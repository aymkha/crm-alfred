(self.webpackChunkshell=self.webpackChunkshell||[]).push([["dist_core_fesm2022_core_mjs-_79191","dist_core_fesm2022_core_mjs-_79190"],{1241:function(we,oe){var n;!function(M){"use strict";var S=Math.cosh||function(I){return Math.abs(I)<1e-9?1-I:.5*(Math.exp(I)+Math.exp(-I))},v=Math.sinh||function(I){return Math.abs(I)<1e-9?I:.5*(Math.exp(I)-Math.exp(-I))},de=function(){throw SyntaxError("Invalid Param")};function ae(I,k){var $=Math.abs(I),G=Math.abs(k);return 0===I?Math.log(G):0===k?Math.log($):$<3e3&&G<3e3?.5*Math.log(I*I+k*k):(I/=2,k/=2,.5*Math.log(I*I+k*k)+Math.LN2)}function U(I,k){if(!(this instanceof U))return new U(I,k);var $=function(I,k){var $={re:0,im:0};if(null==I)$.re=$.im=0;else if(void 0!==k)$.re=I,$.im=k;else switch(typeof I){case"object":if("im"in I&&"re"in I)$.re=I.re,$.im=I.im;else if("abs"in I&&"arg"in I){if(!Number.isFinite(I.abs)&&Number.isFinite(I.arg))return U.INFINITY;$.re=I.abs*Math.cos(I.arg),$.im=I.abs*Math.sin(I.arg)}else if("r"in I&&"phi"in I){if(!Number.isFinite(I.r)&&Number.isFinite(I.phi))return U.INFINITY;$.re=I.r*Math.cos(I.phi),$.im=I.r*Math.sin(I.phi)}else 2===I.length?($.re=I[0],$.im=I[1]):de();break;case"string":$.im=$.re=0;var G=I.match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g),X=1,ie=0;null===G&&de();for(var me=0;me<G.length;me++){var F=G[me];" "===F||"\t"===F||"\n"===F||("+"===F?X++:"-"===F?ie++:"i"===F||"I"===F?(X+ie===0&&de()," "===G[me+1]||isNaN(G[me+1])?$.im+=parseFloat((ie%2?"-":"")+"1"):($.im+=parseFloat((ie%2?"-":"")+G[me+1]),me++),X=ie=0):((X+ie===0||isNaN(F))&&de(),"i"===G[me+1]||"I"===G[me+1]?($.im+=parseFloat((ie%2?"-":"")+F),me++):$.re+=parseFloat((ie%2?"-":"")+F),X=ie=0))}X+ie>0&&de();break;case"number":$.im=0,$.re=I;break;default:de()}return isNaN($.re)||isNaN($.im),$}(I,k);this.re=$.re,this.im=$.im}U.prototype={re:0,im:0,sign:function(){var I=this.abs();return new U(this.re/I,this.im/I)},add:function(I,k){var $=new U(I,k);return this.isInfinite()&&$.isInfinite()?U.NAN:this.isInfinite()||$.isInfinite()?U.INFINITY:new U(this.re+$.re,this.im+$.im)},sub:function(I,k){var $=new U(I,k);return this.isInfinite()&&$.isInfinite()?U.NAN:this.isInfinite()||$.isInfinite()?U.INFINITY:new U(this.re-$.re,this.im-$.im)},mul:function(I,k){var $=new U(I,k);return this.isInfinite()&&$.isZero()||this.isZero()&&$.isInfinite()?U.NAN:this.isInfinite()||$.isInfinite()?U.INFINITY:0===$.im&&0===this.im?new U(this.re*$.re,0):new U(this.re*$.re-this.im*$.im,this.re*$.im+this.im*$.re)},div:function(I,k){var $=new U(I,k);if(this.isZero()&&$.isZero()||this.isInfinite()&&$.isInfinite())return U.NAN;if(this.isInfinite()||$.isZero())return U.INFINITY;if(this.isZero()||$.isInfinite())return U.ZERO;I=this.re,k=this.im;var ie,me,G=$.re,X=$.im;return 0===X?new U(I/G,k/G):Math.abs(G)<Math.abs(X)?new U((I*(me=G/X)+k)/(ie=G*me+X),(k*me-I)/ie):new U((I+k*(me=X/G))/(ie=X*me+G),(k-I*me)/ie)},pow:function(I,k){var $=new U(I,k);if(I=this.re,k=this.im,$.isZero())return U.ONE;if(0===$.im){if(0===k&&I>0)return new U(Math.pow(I,$.re),0);if(0===I)switch(($.re%4+4)%4){case 0:return new U(Math.pow(k,$.re),0);case 1:return new U(0,Math.pow(k,$.re));case 2:return new U(-Math.pow(k,$.re),0);case 3:return new U(0,-Math.pow(k,$.re))}}if(0===I&&0===k&&$.re>0&&$.im>=0)return U.ZERO;var G=Math.atan2(k,I),X=ae(I,k);return I=Math.exp($.re*X-$.im*G),k=$.im*X+$.re*G,new U(I*Math.cos(k),I*Math.sin(k))},sqrt:function(){var G,X,I=this.re,k=this.im,$=this.abs();if(I>=0){if(0===k)return new U(Math.sqrt(I),0);G=.5*Math.sqrt(2*($+I))}else G=Math.abs(k)/Math.sqrt(2*($-I));return X=I<=0?.5*Math.sqrt(2*($-I)):Math.abs(k)/Math.sqrt(2*($+I)),new U(G,k<0?-X:X)},exp:function(){var I=Math.exp(this.re);return new U(I*Math.cos(this.im),I*Math.sin(this.im))},expm1:function(){var I=this.re,k=this.im;return new U(Math.expm1(I)*Math.cos(k)+function(I){var k=Math.PI/4;if(-k>I||I>k)return Math.cos(I)-1;var $=I*I;return $*($*($*($*($*($*($*($/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-.5)}(k),Math.exp(I)*Math.sin(k))},log:function(){var I=this.re,k=this.im;return new U(ae(I,k),Math.atan2(k,I))},abs:function(){return I=this.re,k=this.im,$=Math.abs(I),G=Math.abs(k),$<3e3&&G<3e3?Math.sqrt($*$+G*G):($<G?($=G,G=I/k):G=k/I,$*Math.sqrt(1+G*G));var I,k,$,G},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){var I=this.re,k=this.im;return new U(Math.sin(I)*S(k),Math.cos(I)*v(k))},cos:function(){var I=this.re,k=this.im;return new U(Math.cos(I)*S(k),-Math.sin(I)*v(k))},tan:function(){var I=2*this.re,k=2*this.im,$=Math.cos(I)+S(k);return new U(Math.sin(I)/$,v(k)/$)},cot:function(){var I=2*this.re,k=2*this.im,$=Math.cos(I)-S(k);return new U(-Math.sin(I)/$,v(k)/$)},sec:function(){var I=this.re,k=this.im,$=.5*S(2*k)+.5*Math.cos(2*I);return new U(Math.cos(I)*S(k)/$,Math.sin(I)*v(k)/$)},csc:function(){var I=this.re,k=this.im,$=.5*S(2*k)-.5*Math.cos(2*I);return new U(Math.sin(I)*S(k)/$,-Math.cos(I)*v(k)/$)},asin:function(){var I=this.re,k=this.im,$=new U(k*k-I*I+1,-2*I*k).sqrt(),G=new U($.re-k,$.im+I).log();return new U(G.im,-G.re)},acos:function(){var I=this.re,k=this.im,$=new U(k*k-I*I+1,-2*I*k).sqrt(),G=new U($.re-k,$.im+I).log();return new U(Math.PI/2-G.im,G.re)},atan:function(){var I=this.re,k=this.im;if(0===I){if(1===k)return new U(0,1/0);if(-1===k)return new U(0,-1/0)}var $=I*I+(1-k)*(1-k),G=new U((1-k*k-I*I)/$,-2*I/$).log();return new U(-.5*G.im,.5*G.re)},acot:function(){var I=this.re,k=this.im;if(0===k)return new U(Math.atan2(1,I),0);var $=I*I+k*k;return 0!==$?new U(I/$,-k/$).atan():new U(0!==I?I/0:0,0!==k?-k/0:0).atan()},asec:function(){var I=this.re,k=this.im;if(0===I&&0===k)return new U(0,1/0);var $=I*I+k*k;return 0!==$?new U(I/$,-k/$).acos():new U(0!==I?I/0:0,0!==k?-k/0:0).acos()},acsc:function(){var I=this.re,k=this.im;if(0===I&&0===k)return new U(Math.PI/2,1/0);var $=I*I+k*k;return 0!==$?new U(I/$,-k/$).asin():new U(0!==I?I/0:0,0!==k?-k/0:0).asin()},sinh:function(){var I=this.re,k=this.im;return new U(v(I)*Math.cos(k),S(I)*Math.sin(k))},cosh:function(){var I=this.re,k=this.im;return new U(S(I)*Math.cos(k),v(I)*Math.sin(k))},tanh:function(){var I=2*this.re,k=2*this.im,$=S(I)+Math.cos(k);return new U(v(I)/$,Math.sin(k)/$)},coth:function(){var I=2*this.re,k=2*this.im,$=S(I)-Math.cos(k);return new U(v(I)/$,-Math.sin(k)/$)},csch:function(){var I=this.re,k=this.im,$=Math.cos(2*k)-S(2*I);return new U(-2*v(I)*Math.cos(k)/$,2*S(I)*Math.sin(k)/$)},sech:function(){var I=this.re,k=this.im,$=Math.cos(2*k)+S(2*I);return new U(2*S(I)*Math.cos(k)/$,-2*v(I)*Math.sin(k)/$)},asinh:function(){var I=this.im;this.im=-this.re,this.re=I;var k=this.asin();return this.re=-this.im,this.im=I,I=k.re,k.re=-k.im,k.im=I,k},acosh:function(){var I=this.acos();if(I.im<=0){var k=I.re;I.re=-I.im,I.im=k}else k=I.im,I.im=-I.re,I.re=k;return I},atanh:function(){var I=this.re,k=this.im,$=I>1&&0===k,G=1-I,X=1+I,ie=G*G+k*k,me=0!==ie?new U((X*G-k*k)/ie,(k*G+X*k)/ie):new U(-1!==I?I/0:0,0!==k?k/0:0),F=me.re;return me.re=ae(me.re,me.im)/2,me.im=Math.atan2(me.im,F)/2,$&&(me.im=-me.im),me},acoth:function(){var I=this.re,k=this.im;if(0===I&&0===k)return new U(0,Math.PI/2);var $=I*I+k*k;return 0!==$?new U(I/$,-k/$).atanh():new U(0!==I?I/0:0,0!==k?-k/0:0).atanh()},acsch:function(){var I=this.re,k=this.im;if(0===k)return new U(0!==I?Math.log(I+Math.sqrt(I*I+1)):1/0,0);var $=I*I+k*k;return 0!==$?new U(I/$,-k/$).asinh():new U(0!==I?I/0:0,0!==k?-k/0:0).asinh()},asech:function(){var I=this.re,k=this.im;if(this.isZero())return U.INFINITY;var $=I*I+k*k;return 0!==$?new U(I/$,-k/$).acosh():new U(0!==I?I/0:0,0!==k?-k/0:0).acosh()},inverse:function(){if(this.isZero())return U.INFINITY;if(this.isInfinite())return U.ZERO;var I=this.re,k=this.im,$=I*I+k*k;return new U(I/$,-k/$)},conjugate:function(){return new U(this.re,-this.im)},neg:function(){return new U(-this.re,-this.im)},ceil:function(I){return I=Math.pow(10,I||0),new U(Math.ceil(this.re*I)/I,Math.ceil(this.im*I)/I)},floor:function(I){return I=Math.pow(10,I||0),new U(Math.floor(this.re*I)/I,Math.floor(this.im*I)/I)},round:function(I){return I=Math.pow(10,I||0),new U(Math.round(this.re*I)/I,Math.round(this.im*I)/I)},equals:function(I,k){var $=new U(I,k);return Math.abs($.re-this.re)<=U.EPSILON&&Math.abs($.im-this.im)<=U.EPSILON},clone:function(){return new U(this.re,this.im)},toString:function(){var I=this.re,k=this.im,$="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(I)<U.EPSILON&&(I=0),Math.abs(k)<U.EPSILON&&(k=0),0===k?$+I:(0!==I?($+=I,$+=" ",k<0?(k=-k,$+="-"):$+="+",$+=" "):k<0&&(k=-k,$+="-"),1!==k&&($+=k),$+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return 0===this.im?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return 0===this.im&&0===this.re},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!(this.isNaN()||this.isFinite())}},U.ZERO=new U(0,0),U.ONE=new U(1,0),U.I=new U(0,1),U.PI=new U(Math.PI,0),U.E=new U(Math.E,0),U.INFINITY=new U(1/0,1/0),U.NAN=new U(NaN,NaN),U.EPSILON=1e-15,void 0!==(n=function(){return U}.apply(oe,[]))&&(we.exports=n)}()},8170:we=>{we.exports=function oe(L,n){"use strict";var G,X,M=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,S=/(^[ ]*|[ ]*$)/g,v=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,z=/^0x[0-9a-f]+$/i,K=/^0/,de=function(F){return oe.insensitive&&(""+F).toLowerCase()||""+F},ae=de(L).replace(S,"")||"",V=de(n).replace(S,"")||"",U=ae.replace(M,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),I=V.replace(M,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),k=parseInt(ae.match(z),16)||1!==U.length&&ae.match(v)&&Date.parse(ae),$=parseInt(V.match(z),16)||k&&V.match(v)&&Date.parse(V)||null;if($){if(k<$)return-1;if(k>$)return 1}for(var ie=0,me=Math.max(U.length,I.length);ie<me;ie++){if(G=!(U[ie]||"").match(K)&&parseFloat(U[ie])||U[ie]||0,X=!(I[ie]||"").match(K)&&parseFloat(I[ie])||I[ie]||0,isNaN(G)!==isNaN(X))return isNaN(G)?1:-1;if(typeof G!=typeof X&&(G+="",X+=""),G<X)return-1;if(G>X)return 1}return 0}},7780:function(we){!function(oe){"use strict";var n={s:1,n:0,d:1};function M(G,X){if(isNaN(G=parseInt(G,10)))throw k();return G*X}function S(G,X){if(0===X)throw I();var ie=Object.create(U.prototype);ie.s=G<0?-1:1;var me=V(G=G<0?-G:G,X);return ie.n=G/me,ie.d=X/me,ie}function v(G){for(var X={},ie=G,me=2,F=4;F<=ie;){for(;ie%me==0;)ie/=me,X[me]=(X[me]||0)+1;F+=1+2*me++}return ie!==G?ie>1&&(X[ie]=(X[ie]||0)+1):X[G]=(X[G]||0)+1,X}var z=function(G,X){var en,ie=0,me=1,F=1,Ke=0,pe=0,et=0,je=1,lt=1,ke=0,Be=1,nt=1,ot=1,Ye=1e7;if(null!=G)if(void 0!==X){if(F=(ie=G)*(me=X),ie%1!=0||me%1!=0)throw $()}else switch(typeof G){case"object":if("d"in G&&"n"in G)ie=G.n,me=G.d,"s"in G&&(ie*=G.s);else{if(!(0 in G))throw k();ie=G[0],1 in G&&(me=G[1])}F=ie*me;break;case"number":if(G<0&&(F=G,G=-G),G%1==0)ie=G;else if(G>0){for(G>=1&&(G/=lt=Math.pow(10,Math.floor(1+Math.log(G)/Math.LN10)));Be<=Ye&&ot<=Ye;){if(G===(en=(ke+nt)/(Be+ot))){Be+ot<=Ye?(ie=ke+nt,me=Be+ot):ot>Be?(ie=nt,me=ot):(ie=ke,me=Be);break}G>en?(ke+=nt,Be+=ot):(nt+=ke,ot+=Be),Be>Ye?(ie=nt,me=ot):(ie=ke,me=Be)}ie*=lt}else(isNaN(G)||isNaN(X))&&(me=ie=NaN);break;case"string":if(null===(Be=G.match(/\d+|./g)))throw k();if("-"===Be[ke]?(F=-1,ke++):"+"===Be[ke]&&ke++,Be.length===ke+1?pe=M(Be[ke++],F):"."===Be[ke+1]||"."===Be[ke]?("."!==Be[ke]&&(Ke=M(Be[ke++],F)),(1+ ++ke===Be.length||"("===Be[ke+1]&&")"===Be[ke+3]||"'"===Be[ke+1]&&"'"===Be[ke+3])&&(pe=M(Be[ke],F),je=Math.pow(10,Be[ke].length),ke++),("("===Be[ke]&&")"===Be[ke+2]||"'"===Be[ke]&&"'"===Be[ke+2])&&(et=M(Be[ke+1],F),lt=Math.pow(10,Be[ke+1].length)-1,ke+=3)):"/"===Be[ke+1]||":"===Be[ke+1]?(pe=M(Be[ke],F),je=M(Be[ke+2],1),ke+=3):"/"===Be[ke+3]&&" "===Be[ke+1]&&(Ke=M(Be[ke],F),pe=M(Be[ke+2],F),je=M(Be[ke+4],1),ke+=5),Be.length<=ke){F=ie=et+(me=je*lt)*Ke+lt*pe;break}default:throw k()}if(0===me)throw I();n.s=F<0?-1:1,n.n=Math.abs(ie),n.d=Math.abs(me)};function V(G,X){if(!G)return X;if(!X)return G;for(;;){if(!(G%=X))return X;if(!(X%=G))return G}}function U(G,X){if(z(G,X),!(this instanceof U))return S(n.s*n.n,n.d);G=V(n.d,n.n),this.s=n.s,this.n=n.n/G,this.d=n.d/G}var I=function(){return new Error("Division by Zero")},k=function(){return new Error("Invalid argument")},$=function(){return new Error("Parameters must be integer")};U.prototype={s:1,n:0,d:1,abs:function(){return S(this.n,this.d)},neg:function(){return S(-this.s*this.n,this.d)},add:function(G,X){return z(G,X),S(this.s*this.n*n.d+n.s*this.d*n.n,this.d*n.d)},sub:function(G,X){return z(G,X),S(this.s*this.n*n.d-n.s*this.d*n.n,this.d*n.d)},mul:function(G,X){return z(G,X),S(this.s*n.s*this.n*n.n,this.d*n.d)},div:function(G,X){return z(G,X),S(this.s*n.s*this.n*n.d,this.d*n.n)},clone:function(){return S(this.s*this.n,this.d)},mod:function(G,X){if(isNaN(this.n)||isNaN(this.d))return new U(NaN);if(void 0===G)return S(this.s*this.n%this.d,1);if(z(G,X),0===n.n&&0===this.d)throw I();return S(this.s*(n.d*this.n)%(n.n*this.d),n.d*this.d)},gcd:function(G,X){return z(G,X),S(V(n.n,this.n)*V(n.d,this.d),n.d*this.d)},lcm:function(G,X){return z(G,X),0===n.n&&0===this.n?S(0,1):S(n.n*this.n,V(n.n,this.n)*V(n.d,this.d))},ceil:function(G){return G=Math.pow(10,G||0),isNaN(this.n)||isNaN(this.d)?new U(NaN):S(Math.ceil(G*this.s*this.n/this.d),G)},floor:function(G){return G=Math.pow(10,G||0),isNaN(this.n)||isNaN(this.d)?new U(NaN):S(Math.floor(G*this.s*this.n/this.d),G)},round:function(G){return G=Math.pow(10,G||0),isNaN(this.n)||isNaN(this.d)?new U(NaN):S(Math.round(G*this.s*this.n/this.d),G)},inverse:function(){return S(this.s*this.d,this.n)},pow:function(G,X){if(z(G,X),1===n.d)return n.s<0?S(Math.pow(this.s*this.d,n.n),Math.pow(this.n,n.n)):S(Math.pow(this.s*this.n,n.n),Math.pow(this.d,n.n));if(this.s<0)return null;var ie=v(this.n),me=v(this.d),F=1,Ke=1;for(var pe in ie)if("1"!==pe){if("0"===pe){F=0;break}if(ie[pe]*=n.n,ie[pe]%n.d!=0)return null;ie[pe]/=n.d,F*=Math.pow(pe,ie[pe])}for(var pe in me)if("1"!==pe){if(me[pe]*=n.n,me[pe]%n.d!=0)return null;me[pe]/=n.d,Ke*=Math.pow(pe,me[pe])}return n.s<0?S(Ke,F):S(F,Ke)},equals:function(G,X){return z(G,X),this.s*this.n*n.d==n.s*n.n*this.d},compare:function(G,X){z(G,X);var ie=this.s*this.n*n.d-n.s*n.n*this.d;return(0<ie)-(ie<0)},simplify:function(G){if(isNaN(this.n)||isNaN(this.d))return this;G=G||.001;for(var X=this.abs(),ie=X.toContinued(),me=1;me<ie.length;me++){for(var F=S(ie[me-1],1),Ke=me-2;Ke>=0;Ke--)F=F.inverse().add(ie[Ke]);if(Math.abs(F.sub(X).valueOf())<G)return F.mul(this.s)}return this},divisible:function(G,X){return z(G,X),!(!(n.n*this.d)||this.n*n.d%(n.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(G){var X,ie="",me=this.n,F=this.d;return this.s<0&&(ie+="-"),1===F?ie+=me:(G&&(X=Math.floor(me/F))>0&&(ie+=X,ie+=" ",me%=F),ie+=me,ie+="/",ie+=F),ie},toLatex:function(G){var X,ie="",me=this.n,F=this.d;return this.s<0&&(ie+="-"),1===F?ie+=me:(G&&(X=Math.floor(me/F))>0&&(ie+=X,me%=F),ie+="\\frac{",ie+=me,ie+="}{",ie+=F,ie+="}"),ie},toContinued:function(){var G,X=this.n,ie=this.d,me=[];if(isNaN(X)||isNaN(ie))return me;do{me.push(Math.floor(X/ie)),G=X%ie,X=ie,ie=G}while(1!==X);return me},toString:function(G){var X=this.n,ie=this.d;if(isNaN(X)||isNaN(ie))return"NaN";G=G||15;var me=function de(G,X){for(;X%2==0;X/=2);for(;X%5==0;X/=5);if(1===X)return 0;for(var ie=10%X,me=1;1!==ie;me++)if(ie=10*ie%X,me>2e3)return 0;return me}(0,ie),F=function ae(G,X,ie){for(var me=1,F=function K(G,X,ie){for(var me=1;X>0;G=G*G%ie,X>>=1)1&X&&(me=me*G%ie);return me}(10,ie,X),Ke=0;Ke<300;Ke++){if(me===F)return Ke;me=10*me%X,F=10*F%X}return 0}(0,ie,me),Ke=this.s<0?"-":"";if(Ke+=X/ie|0,X%=ie,(X*=10)&&(Ke+="."),me){for(var pe=F;pe--;)Ke+=X/ie|0,X%=ie,X*=10;for(Ke+="(",pe=me;pe--;)Ke+=X/ie|0,X%=ie,X*=10;Ke+=")"}else for(pe=G;X&&pe--;)Ke+=X/ie|0,X%=ie,X*=10;return Ke}},Object.defineProperty(U,"__esModule",{value:!0}),U.default=U,U.Fraction=U,we.exports=U}()},9128:(we,oe,L)=>{var n=L(9864),M=L(3919),S=L(3263),v=L(5353),z=L(3358),K=L(3789),de=L(2508);de.alea=n,de.xor128=M,de.xorwow=S,de.xorshift7=v,de.xor4096=z,de.tychei=K,we.exports=de},9864:function(we,oe,L){var n;!function(M,S,v){function z(V){var U=this,I=function ae(){var V=4022871197;return function(I){I=String(I);for(var k=0;k<I.length;k++){var $=.02519603282416938*(V+=I.charCodeAt(k));$-=V=$>>>0,V=($*=V)>>>0,V+=4294967296*($-=V)}return 2.3283064365386963e-10*(V>>>0)}}();U.next=function(){var k=2091639*U.s0+2.3283064365386963e-10*U.c;return U.s0=U.s1,U.s1=U.s2,U.s2=k-(U.c=0|k)},U.c=1,U.s0=I(" "),U.s1=I(" "),U.s2=I(" "),U.s0-=I(V),U.s0<0&&(U.s0+=1),U.s1-=I(V),U.s1<0&&(U.s1+=1),U.s2-=I(V),U.s2<0&&(U.s2+=1),I=null}function K(V,U){return U.c=V.c,U.s0=V.s0,U.s1=V.s1,U.s2=V.s2,U}function de(V,U){var I=new z(V),k=U&&U.state,$=I.next;return $.int32=function(){return 4294967296*I.next()|0},$.double=function(){return $()+11102230246251565e-32*(2097152*$()|0)},$.quick=$,k&&("object"==typeof k&&K(k,I),$.state=function(){return K(I,{})}),$}S&&S.exports?S.exports=de:L.amdD&&L.amdO?void 0!==(n=function(){return de}.call(oe,L,oe,S))&&(S.exports=n):this.alea=de}(0,we=L.nmd(we))},3789:function(we,oe,L){var n;!function(M,S,v){function z(ae){var V=this,U="";V.next=function(){var k=V.b,$=V.c,G=V.d,X=V.a;return k=k<<25^k>>>7^$,$=$-G|0,G=G<<24^G>>>8^X,X=X-k|0,V.b=k=k<<20^k>>>12^$,V.c=$=$-G|0,V.d=G<<16^$>>>16^X,V.a=X-k|0},V.a=0,V.b=0,V.c=-1640531527,V.d=1367130551,ae===Math.floor(ae)?(V.a=ae/4294967296|0,V.b=0|ae):U+=ae;for(var I=0;I<U.length+20;I++)V.b^=0|U.charCodeAt(I),V.next()}function K(ae,V){return V.a=ae.a,V.b=ae.b,V.c=ae.c,V.d=ae.d,V}function de(ae,V){var U=new z(ae),I=V&&V.state,k=function(){return(U.next()>>>0)/4294967296};return k.double=function(){do{var X=((U.next()>>>11)+(U.next()>>>0)/4294967296)/(1<<21)}while(0===X);return X},k.int32=U.next,k.quick=k,I&&("object"==typeof I&&K(I,U),k.state=function(){return K(U,{})}),k}S&&S.exports?S.exports=de:L.amdD&&L.amdO?void 0!==(n=function(){return de}.call(oe,L,oe,S))&&(S.exports=n):this.tychei=de}(0,we=L.nmd(we))},3919:function(we,oe,L){var n;!function(M,S,v){function z(ae){var V=this,U="";V.x=0,V.y=0,V.z=0,V.w=0,V.next=function(){var k=V.x^V.x<<11;return V.x=V.y,V.y=V.z,V.z=V.w,V.w^=V.w>>>19^k^k>>>8},ae===(0|ae)?V.x=ae:U+=ae;for(var I=0;I<U.length+64;I++)V.x^=0|U.charCodeAt(I),V.next()}function K(ae,V){return V.x=ae.x,V.y=ae.y,V.z=ae.z,V.w=ae.w,V}function de(ae,V){var U=new z(ae),I=V&&V.state,k=function(){return(U.next()>>>0)/4294967296};return k.double=function(){do{var X=((U.next()>>>11)+(U.next()>>>0)/4294967296)/(1<<21)}while(0===X);return X},k.int32=U.next,k.quick=k,I&&("object"==typeof I&&K(I,U),k.state=function(){return K(U,{})}),k}S&&S.exports?S.exports=de:L.amdD&&L.amdO?void 0!==(n=function(){return de}.call(oe,L,oe,S))&&(S.exports=n):this.xor128=de}(0,we=L.nmd(we))},3358:function(we,oe,L){var n;!function(M,S,v){function z(ae){var V=this;V.next=function(){var G,X,I=V.w,k=V.X,$=V.i;return V.w=I=I+1640531527|0,X=k[$+34&127],G=k[$=$+1&127],X^=X<<13,G^=G<<17,X=k[$]=(X^=X>>>15)^(G^=G>>>12),V.i=$,X+(I^I>>>16)|0},function U(I,k){var $,G,X,ie,me,F=[],Ke=128;for(k===(0|k)?(G=k,k=null):(k+="\0",G=0,Ke=Math.max(Ke,k.length)),X=0,ie=-32;ie<Ke;++ie)k&&(G^=k.charCodeAt((ie+32)%k.length)),0===ie&&(me=G),G^=G<<10,G^=G>>>15,G^=G<<4,G^=G>>>13,ie>=0&&(X=0==($=F[127&ie]^=G+(me=me+1640531527|0))?X+1:0);for(X>=128&&(F[127&(k&&k.length||0)]=-1),X=127,ie=512;ie>0;--ie)G=F[X+34&127],$=F[X=X+1&127],G^=G<<13,$^=$<<17,F[X]=(G^=G>>>15)^($^=$>>>12);I.w=me,I.X=F,I.i=X}(V,ae)}function K(ae,V){return V.i=ae.i,V.w=ae.w,V.X=ae.X.slice(),V}function de(ae,V){null==ae&&(ae=+new Date);var U=new z(ae),I=V&&V.state,k=function(){return(U.next()>>>0)/4294967296};return k.double=function(){do{var X=((U.next()>>>11)+(U.next()>>>0)/4294967296)/(1<<21)}while(0===X);return X},k.int32=U.next,k.quick=k,I&&(I.X&&K(I,U),k.state=function(){return K(U,{})}),k}S&&S.exports?S.exports=de:L.amdD&&L.amdO?void 0!==(n=function(){return de}.call(oe,L,oe,S))&&(S.exports=n):this.xor4096=de}(0,we=L.nmd(we))},5353:function(we,oe,L){var n;!function(M,S,v){function z(ae){var V=this;V.next=function(){var $,G,I=V.x,k=V.i;return $=I[k],G=($^=$>>>7)^$<<24,G^=($=I[k+1&7])^$>>>10,G^=($=I[k+3&7])^$>>>3,G^=($=I[k+4&7])^$<<7,$=I[k+7&7],I[k]=G^=($^=$<<13)^$<<9,V.i=k+1&7,G},function U(I,k){var $,X=[];if(k===(0|k))X[0]=k;else for(k=""+k,$=0;$<k.length;++$)X[7&$]=X[7&$]<<15^k.charCodeAt($)+X[$+1&7]<<13;for(;X.length<8;)X.push(0);for($=0;$<8&&0===X[$];++$);for(8==$&&(X[7]=-1),I.x=X,I.i=0,$=256;$>0;--$)I.next()}(V,ae)}function K(ae,V){return V.x=ae.x.slice(),V.i=ae.i,V}function de(ae,V){null==ae&&(ae=+new Date);var U=new z(ae),I=V&&V.state,k=function(){return(U.next()>>>0)/4294967296};return k.double=function(){do{var X=((U.next()>>>11)+(U.next()>>>0)/4294967296)/(1<<21)}while(0===X);return X},k.int32=U.next,k.quick=k,I&&(I.x&&K(I,U),k.state=function(){return K(U,{})}),k}S&&S.exports?S.exports=de:L.amdD&&L.amdO?void 0!==(n=function(){return de}.call(oe,L,oe,S))&&(S.exports=n):this.xorshift7=de}(0,we=L.nmd(we))},3263:function(we,oe,L){var n;!function(M,S,v){function z(ae){var V=this,U="";V.next=function(){var k=V.x^V.x>>>2;return V.x=V.y,V.y=V.z,V.z=V.w,V.w=V.v,(V.d=V.d+362437|0)+(V.v=V.v^V.v<<4^k^k<<1)|0},V.x=0,V.y=0,V.z=0,V.w=0,V.v=0,ae===(0|ae)?V.x=ae:U+=ae;for(var I=0;I<U.length+64;I++)V.x^=0|U.charCodeAt(I),I==U.length&&(V.d=V.x<<10^V.x>>>4),V.next()}function K(ae,V){return V.x=ae.x,V.y=ae.y,V.z=ae.z,V.w=ae.w,V.v=ae.v,V.d=ae.d,V}function de(ae,V){var U=new z(ae),I=V&&V.state,k=function(){return(U.next()>>>0)/4294967296};return k.double=function(){do{var X=((U.next()>>>11)+(U.next()>>>0)/4294967296)/(1<<21)}while(0===X);return X},k.int32=U.next,k.quick=k,I&&("object"==typeof I&&K(I,U),k.state=function(){return K(U,{})}),k}S&&S.exports?S.exports=de:L.amdD&&L.amdO?void 0!==(n=function(){return de}.call(oe,L,oe,S))&&(S.exports=n):this.xorwow=de}(0,we=L.nmd(we))},2508:function(we,oe,L){var n;!function(M,S,v){var $,z=256,V=v.pow(z,6),U=v.pow(2,52),I=2*U,k=z-1;function G(et,je,lt){var ke=[],Be=F(me((je=1==je?{entropy:!0}:je||{}).entropy?[et,pe(S)]:et??function Ke(){try{var et;return $&&(et=$.randomBytes)?et=et(z):(et=new Uint8Array(z),(M.crypto||M.msCrypto).getRandomValues(et)),pe(et)}catch{var je=M.navigator,lt=je&&je.plugins;return[+new Date,M,lt,M.screen,pe(S)]}}(),3),ke),nt=new X(ke),ot=function(){for(var Ye=nt.g(6),en=V,Qe=0;Ye<U;)Ye=(Ye+Qe)*z,en*=z,Qe=nt.g(1);for(;Ye>=I;)Ye/=2,en/=2,Qe>>>=1;return(Ye+Qe)/en};return ot.int32=function(){return 0|nt.g(4)},ot.quick=function(){return nt.g(4)/4294967296},ot.double=ot,F(pe(nt.S),S),(je.pass||lt||function(Ye,en,Qe,It){return It&&(It.S&&ie(It,nt),Ye.state=function(){return ie(nt,{})}),Qe?(v.random=Ye,en):Ye})(ot,Be,"global"in je?je.global:this==v,je.state)}function X(et){var je,lt=et.length,ke=this,Be=0,nt=ke.i=ke.j=0,ot=ke.S=[];for(lt||(et=[lt++]);Be<z;)ot[Be]=Be++;for(Be=0;Be<z;Be++)ot[Be]=ot[nt=k&nt+et[Be%lt]+(je=ot[Be])],ot[nt]=je;(ke.g=function(Ye){for(var en,Qe=0,It=ke.i,re=ke.j,Me=ke.S;Ye--;)en=Me[It=k&It+1],Qe=Qe*z+Me[k&(Me[It]=Me[re=k&re+en])+(Me[re]=en)];return ke.i=It,ke.j=re,Qe})(z)}function ie(et,je){return je.i=et.i,je.j=et.j,je.S=et.S.slice(),je}function me(et,je){var Be,lt=[],ke=typeof et;if(je&&"object"==ke)for(Be in et)try{lt.push(me(et[Be],je-1))}catch{}return lt.length?lt:"string"==ke?et:et+"\0"}function F(et,je){for(var ke,lt=et+"",Be=0;Be<lt.length;)je[k&Be]=k&(ke^=19*je[k&Be])+lt.charCodeAt(Be++);return pe(je)}function pe(et){return String.fromCharCode.apply(0,et)}if(F(v.random(),S),we.exports){we.exports=G;try{$=L(5042)}catch{}}else void 0!==(n=function(){return G}.call(oe,L,oe,we))&&(we.exports=n)}(typeof self<"u"?self:this,[],Math)},5042:()=>{},9634:function(we){we.exports=function(){"use strict";function oe(){return!0}function L(){return!1}function n(){}const M="Argument is not a typed-function.";return function S(){function z(Y){return"object"==typeof Y&&null!==Y&&Y.constructor===Object}const K=[{name:"number",test:function(Y){return"number"==typeof Y}},{name:"string",test:function(Y){return"string"==typeof Y}},{name:"boolean",test:function(Y){return"boolean"==typeof Y}},{name:"Function",test:function(Y){return"function"==typeof Y}},{name:"Array",test:Array.isArray},{name:"Date",test:function(Y){return Y instanceof Date}},{name:"RegExp",test:function(Y){return Y instanceof RegExp}},{name:"Object",test:z},{name:"null",test:function(Y){return null===Y}},{name:"undefined",test:function(Y){return void 0===Y}}],de={name:"any",test:oe,isAny:!0};let ae,V,U=0,I={createCount:0};function k(Y){const ve=ae.get(Y);if(ve)return ve;let Se='Unknown type "'+Y+'"';const Ne=Y.toLowerCase();let Ue;for(Ue of V)if(Ue.toLowerCase()===Ne){Se+='. Did you mean "'+Ue+'" ?';break}throw new TypeError(Se)}function $(Y){let ve=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"any";const Se=ve?k(ve).index:V.length,Ne=[];for(let Re=0;Re<Y.length;++Re){if(!Y[Re]||"string"!=typeof Y[Re].name||"function"!=typeof Y[Re].test)throw new TypeError("Object with properties {name: string, test: function} expected");const it=Y[Re].name;if(ae.has(it))throw new TypeError('Duplicate type name "'+it+'"');Ne.push(it),ae.set(it,{name:it,test:Y[Re].test,isAny:Y[Re].isAny,index:Se+Re,conversionsTo:[]})}const Ue=V.slice(Se);V=V.slice(0,Se).concat(Ne).concat(Ue);for(let Re=Se+Ne.length;Re<V.length;++Re)ae.get(V[Re]).index=Re}function G(){ae=new Map,V=[],U=0,$([de],!1)}function ie(Y){const ve=V.filter(Se=>{const Ne=ae.get(Se);return!Ne.isAny&&Ne.test(Y)});return ve.length?ve:["any"]}function me(Y){return Y&&"function"==typeof Y&&"_typedFunctionData"in Y}function F(Y,ve,Se){if(!me(Y))throw new TypeError(M);const Ne=Se&&Se.exact,Re=Be(Array.isArray(ve)?ve.join(","):ve),it=et(Re);if(!Ne||it in Y.signatures){const nn=Y._typedFunctionData.signatureMap.get(it);if(nn)return nn}const Ze=Re.length;let rt,Ge;if(Ne){let nn;for(nn in rt=[],Y.signatures)rt.push(Y._typedFunctionData.signatureMap.get(nn))}else rt=Y._typedFunctionData.signatures;for(let nn=0;nn<Ze;++nn){const fn=Re[nn],In=[];let Hn;for(Hn of rt){const Qn=en(Hn.params,nn);if(Qn&&(!fn.restParam||Qn.restParam)){if(!Qn.hasAny){const Ci=ke(Qn);if(fn.types.some(Mi=>!Ci.has(Mi.name)))continue}In.push(Hn)}}if(rt=In,0===rt.length)break}for(Ge of rt)if(Ge.params.length<=Ze)return Ge;throw new TypeError("Signature not found (signature: "+(Y.name||"unnamed")+"("+et(Re,", ")+"))")}function et(Y){let ve=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",";return Y.map(Se=>Se.name).join(ve)}function je(Y){const ve=0===Y.indexOf("..."),Ne=(ve?Y.length>3?Y.slice(3):"any":Y).split("|").map(Ze=>k(Ze.trim()));let Ue=!1,Re=ve?"...":"";return{types:Ne.map(function(Ze){return Ue=Ze.isAny||Ue,Re+=Ze.name+"|",{name:Ze.name,typeIndex:Ze.index,test:Ze.test,isAny:Ze.isAny,conversion:null,conversionIndex:-1}}),name:Re.slice(0,-1),hasAny:Ue,hasConversion:!1,restParam:ve}}function lt(Y){const Se=function Vt(Y){if(0===Y.length)return[];const ve=Y.map(k);Y.length>1&&ve.sort((Ue,Re)=>Ue.index-Re.index);let Se=ve[0].conversionsTo;if(1===Y.length)return Se;Se=Se.concat([]);const Ne=new Set(Y);for(let Ue=1;Ue<ve.length;++Ue){let Re;for(Re of ve[Ue].conversionsTo)Ne.has(Re.from)||(Se.push(Re),Ne.add(Re.from))}return Se}(Y.types.map(it=>it.name));let Ne=Y.hasAny,Ue=Y.name;const Re=Se.map(function(it){const Ze=k(it.from);return Ne=Ze.isAny||Ne,Ue+="|"+it.from,{name:it.from,typeIndex:Ze.index,test:Ze.test,isAny:Ze.isAny,conversion:it,conversionIndex:it.index}});return{types:Y.types.concat(Re),name:Ue,hasAny:Ne,hasConversion:Re.length>0,restParam:Y.restParam}}function ke(Y){return Y.typeSet||(Y.typeSet=new Set,Y.types.forEach(ve=>Y.typeSet.add(ve.name))),Y.typeSet}function Be(Y){const ve=[];if("string"!=typeof Y)throw new TypeError("Signatures must be strings");const Se=Y.trim();if(""===Se)return ve;const Ne=Se.split(",");for(let Ue=0;Ue<Ne.length;++Ue){const Re=je(Ne[Ue].trim());if(Re.restParam&&Ue!==Ne.length-1)throw new SyntaxError('Unexpected rest parameter "'+Ne[Ue]+'": only allowed for the last parameter');if(0===Re.types.length)return null;ve.push(Re)}return ve}function nt(Y){const ve=jt(Y);return!!ve&&ve.restParam}function ot(Y){if(!Y||0===Y.types.length)return oe;if(1===Y.types.length)return k(Y.types[0].name).test;if(2===Y.types.length){const ve=k(Y.types[0].name).test,Se=k(Y.types[1].name).test;return function(Ue){return ve(Ue)||Se(Ue)}}{const ve=Y.types.map(function(Se){return k(Se.name).test});return function(Ne){for(let Ue=0;Ue<ve.length;Ue++)if(ve[Ue](Ne))return!0;return!1}}}function Ye(Y){let ve,Se,Ne;if(nt(Y)){ve=En(Y).map(ot);const Ue=ve.length,Re=ot(jt(Y)),it=function(Ze){for(let rt=Ue;rt<Ze.length;rt++)if(!Re(Ze[rt]))return!1;return!0};return function(rt){for(let Ge=0;Ge<ve.length;Ge++)if(!ve[Ge](rt[Ge]))return!1;return it(rt)&&rt.length>=Ue+1}}return 0===Y.length?function(Re){return 0===Re.length}:1===Y.length?(Se=ot(Y[0]),function(Re){return Se(Re[0])&&1===Re.length}):2===Y.length?(Se=ot(Y[0]),Ne=ot(Y[1]),function(Re){return Se(Re[0])&&Ne(Re[1])&&2===Re.length}):(ve=Y.map(ot),function(Re){for(let it=0;it<ve.length;it++)if(!ve[it](Re[it]))return!1;return Re.length===ve.length})}function en(Y,ve){return ve<Y.length?Y[ve]:nt(Y)?jt(Y):null}function Qe(Y,ve){const Se=en(Y,ve);return Se?ke(Se):new Set}function It(Y){return null==Y.conversion}function re(Y,ve){const Se=new Set;return Y.forEach(Ne=>{const Ue=Qe(Ne.params,ve);let Re;for(Re of Ue)Se.add(Re)}),Se.has("any")?["any"]:Array.from(Se)}function Me(Y,ve,Se){let Ne,Ue;const Re=Y||"unnamed";let Ze,it=Se;for(Ze=0;Ze<ve.length;Ze++){const fn=[];if(it.forEach(In=>{const Qn=ot(en(In.params,Ze));(Ze<In.params.length||nt(In.params))&&Qn(ve[Ze])&&fn.push(In)}),0===fn.length){if(Ue=re(it,Ze),Ue.length>0){const In=ie(ve[Ze]);return Ne=new TypeError("Unexpected type of argument in function "+Re+" (expected: "+Ue.join(" or ")+", actual: "+In.join(" | ")+", index: "+Ze+")"),Ne.data={category:"wrongType",fn:Re,index:Ze,actual:In,expected:Ue},Ne}}else it=fn}const rt=it.map(function(fn){return nt(fn.params)?1/0:fn.params.length});if(ve.length<Math.min.apply(null,rt))return Ue=re(it,Ze),Ne=new TypeError("Too few arguments in function "+Re+" (expected: "+Ue.join(" or ")+", index: "+ve.length+")"),Ne.data={category:"tooFewArgs",fn:Re,index:ve.length,expected:Ue},Ne;const Ge=Math.max.apply(null,rt);if(ve.length>Ge)return Ne=new TypeError("Too many arguments in function "+Re+" (expected: "+Ge+", actual: "+ve.length+")"),Ne.data={category:"tooManyArgs",fn:Re,index:ve.length,expectedLength:Ge},Ne;const nn=[];for(let fn=0;fn<ve.length;++fn)nn.push(ie(ve[fn]).join("|"));return Ne=new TypeError('Arguments of type "'+nn.join(", ")+'" do not match any of the defined signatures of function '+Re+"."),Ne.data={category:"mismatch",actual:nn},Ne}function He(Y){let ve=V.length+1;for(let Se=0;Se<Y.types.length;Se++)It(Y.types[Se])&&(ve=Math.min(ve,Y.types[Se].typeIndex));return ve}function tt(Y){let ve=U+1;for(let Se=0;Se<Y.types.length;Se++)It(Y.types[Se])||(ve=Math.min(ve,Y.types[Se].conversionIndex));return ve}function wt(Y,ve){if(Y.hasAny){if(!ve.hasAny)return 1}else if(ve.hasAny)return-1;if(Y.restParam){if(!ve.restParam)return 1}else if(ve.restParam)return-1;if(Y.hasConversion){if(!ve.hasConversion)return 1}else if(ve.hasConversion)return-1;const Se=He(Y)-He(ve);if(Se<0)return-1;if(Se>0)return 1;const Ne=tt(Y)-tt(ve);return Ne<0?-1:Ne>0?1:0}function Pt(Y,ve){const Se=Y.params,Ne=ve.params,Ue=jt(Se),Re=jt(Ne),it=nt(Se),Ze=nt(Ne);if(it&&Ue.hasAny){if(!Ze||!Re.hasAny)return 1}else if(Ze&&Re.hasAny)return-1;let nn,rt=0,Ge=0;for(nn of Se)nn.hasAny&&++rt,nn.hasConversion&&++Ge;let fn=0,In=0;for(nn of Ne)nn.hasAny&&++fn,nn.hasConversion&&++In;if(rt!==fn)return rt-fn;if(it&&Ue.hasConversion){if(!Ze||!Re.hasConversion)return 1}else if(Ze&&Re.hasConversion)return-1;if(Ge!==In)return Ge-In;if(it){if(!Ze)return 1}else if(Ze)return-1;const Hn=(Se.length-Ne.length)*(it?-1:1);if(0!==Hn)return Hn;const Qn=[];let Mi,Ci=0;for(let Br=0;Br<Se.length;++Br){const Fo=wt(Se[Br],Ne[Br]);Qn.push(Fo),Ci+=Fo}if(0!==Ci)return Ci;for(Mi of Qn)if(0!==Mi)return Mi;return 0}function Bt(Y,ve){let Se=ve;if(Y.some(Ue=>Ue.hasConversion)){const Ue=nt(Y),Re=Y.map(gt);Se=function(){const Ze=[],rt=Ue?arguments.length-1:arguments.length;for(let Ge=0;Ge<rt;Ge++)Ze[Ge]=Re[Ge](arguments[Ge]);return Ue&&(Ze[rt]=arguments[rt].map(Re[rt])),ve.apply(this,Ze)}}let Ne=Se;if(nt(Y)){const Ue=Y.length-1;Ne=function(){return Se.apply(this,Sn(arguments,0,Ue).concat([Sn(arguments,Ue)]))}}return Ne}function gt(Y){let ve,Se,Ne,Ue;const Re=[],it=[];switch(Y.types.forEach(function(Ze){Ze.conversion&&(Re.push(k(Ze.conversion.from).test),it.push(Ze.conversion.convert))}),it.length){case 0:return function(rt){return rt};case 1:return ve=Re[0],Ne=it[0],function(rt){return ve(rt)?Ne(rt):rt};case 2:return ve=Re[0],Se=Re[1],Ne=it[0],Ue=it[1],function(rt){return ve(rt)?Ne(rt):Se(rt)?Ue(rt):rt};default:return function(rt){for(let Ge=0;Ge<it.length;Ge++)if(Re[Ge](rt))return it[Ge](rt);return rt}}}function St(Y){return function ve(Se,Ne,Ue){if(Ne<Se.length){const Re=Se[Ne];let it=[];if(Re.restParam){const Ze=Re.types.filter(It);Ze.length<Re.types.length&&it.push({types:Ze,name:"..."+Ze.map(rt=>rt.name).join("|"),hasAny:Ze.some(rt=>rt.isAny),hasConversion:!1,restParam:!0}),it.push(Re)}else it=Re.types.map(function(Ze){return{types:[Ze],name:Ze.name,hasAny:Ze.isAny,hasConversion:Ze.conversion,restParam:!1}});return function Ki(Y,ve){return Array.prototype.concat.apply([],Y.map(ve))}(it,function(Ze){return ve(Se,Ne+1,Ue.concat([Ze]))})}return[Ue]}(Y,0,[])}function yn(Y,ve){const Se=Math.max(Y.length,ve.length);for(let Ze=0;Ze<Se;Ze++){const rt=Qe(Y,Ze),Ge=Qe(ve,Ze);let fn,nn=!1;for(fn of Ge)if(rt.has(fn)){nn=!0;break}if(!nn)return!1}const Ne=Y.length,Ue=ve.length,Re=nt(Y),it=nt(ve);return Re?it?Ne===Ue:Ue>=Ne:it?Ne>=Ue:Ne===Ue}function At(Y,ve,Se){const Ne=[];let Ue;for(Ue of Y){let Re=Se[Ue];if("number"!=typeof Re)throw new TypeError('No definition for referenced signature "'+Ue+'"');if(Re=ve[Re],"function"!=typeof Re)return!1;Ne.push(Re)}return Ne}function Fn(Y,ve,Se){const Ne=function Ct(Y){return Y.map(ve=>pr(ve)?Kn(ve.referToSelf.callback):xi(ve)?Zi(ve.referTo.references,ve.referTo.callback):ve)}(Y),Ue=new Array(Ne.length).fill(!1);let Re=!0;for(;Re;){Re=!1;let it=!0;for(let Ze=0;Ze<Ne.length;++Ze){if(Ue[Ze])continue;const rt=Ne[Ze];if(pr(rt))Ne[Ze]=rt.referToSelf.callback(Se),Ne[Ze].referToSelf=rt.referToSelf,Ue[Ze]=!0,it=!1;else if(xi(rt)){const Ge=At(rt.referTo.references,Ne,ve);Ge?(Ne[Ze]=rt.referTo.callback.apply(this,Ge),Ne[Ze].referTo=rt.referTo,Ue[Ze]=!0,it=!1):Re=!0}}if(it&&Re)throw new SyntaxError("Circular reference detected in resolving typed.referTo")}return Ne}function on(Y,ve){if(I.createCount++,0===Object.keys(ve).length)throw new SyntaxError("No signatures provided");I.warnAgainstDeprecatedThis&&function ln(Y){const ve=/\bthis(\(|\.signatures\b)/;Object.keys(Y).forEach(Se=>{if(ve.test(Y[Se].toString()))throw new SyntaxError("Using `this` to self-reference a function is deprecated since typed-function@3. Use typed.referTo and typed.referToSelf instead.")})}(ve);const Se=[],Ne=[],Ue={},Re=[];let it;for(it in ve){if(!Object.prototype.hasOwnProperty.call(ve,it))continue;const un=Be(it);if(!un)continue;Se.forEach(function(To){if(yn(To,un))throw new TypeError('Conflicting signatures "'+et(To)+'" and "'+et(un)+'".')}),Se.push(un);const ai=Ne.length;Ne.push(ve[it]);const cp=un.map(lt);let Ao;for(Ao of St(cp)){const To=et(Ao);Re.push({params:Ao,name:To,fn:ai}),Ao.every(lp=>!lp.hasConversion)&&(Ue[To]=ai)}}Re.sort(Pt);const Ze=Fn(Ne,Ue,Io);let rt;for(rt in Ue)Object.prototype.hasOwnProperty.call(Ue,rt)&&(Ue[rt]=Ze[Ue[rt]]);const Ge=[],nn=new Map;for(rt of Re)nn.has(rt.name)||(rt.fn=Ze[rt.fn],Ge.push(rt),nn.set(rt.name,rt));const fn=Ge[0]&&Ge[0].params.length<=2&&!nt(Ge[0].params),In=Ge[1]&&Ge[1].params.length<=2&&!nt(Ge[1].params),Hn=Ge[2]&&Ge[2].params.length<=2&&!nt(Ge[2].params),Qn=Ge[3]&&Ge[3].params.length<=2&&!nt(Ge[3].params),Ci=Ge[4]&&Ge[4].params.length<=2&&!nt(Ge[4].params),Mi=Ge[5]&&Ge[5].params.length<=2&&!nt(Ge[5].params),Br=fn&&In&&Hn&&Qn&&Ci&&Mi;for(let un=0;un<Ge.length;++un)Ge[un].test=Ye(Ge[un].params);const Fo=fn?ot(Ge[0].params[0]):L,pl=In?ot(Ge[1].params[0]):L,ml=Hn?ot(Ge[2].params[0]):L,Ee=Qn?ot(Ge[3].params[0]):L,_e=Ci?ot(Ge[4].params[0]):L,te=Mi?ot(Ge[5].params[0]):L,ue=fn?ot(Ge[0].params[1]):L,Ae=In?ot(Ge[1].params[1]):L,mt=Hn?ot(Ge[2].params[1]):L,Tt=Qn?ot(Ge[3].params[1]):L,gn=Ci?ot(Ge[4].params[1]):L,pn=Mi?ot(Ge[5].params[1]):L;for(let un=0;un<Ge.length;++un)Ge[un].implementation=Bt(Ge[un].params,Ge[un].fn);const Xn=fn?Ge[0].implementation:n,qi=In?Ge[1].implementation:n,Ji=Hn?Ge[2].implementation:n,Zf=Qn?Ge[3].implementation:n,qf=Ci?Ge[4].implementation:n,Jf=Mi?Ge[5].implementation:n,Qf=fn?Ge[0].params.length:-1,Xf=In?Ge[1].params.length:-1,Yf=Hn?Ge[2].params.length:-1,ep=Qn?Ge[3].params.length:-1,tp=Ci?Ge[4].params.length:-1,np=Mi?Ge[5].params.length:-1,ip=Br?6:0,rp=Ge.length,op=Ge.map(un=>un.test),ap=Ge.map(un=>un.implementation),sp=function(){for(let ai=ip;ai<rp;ai++)if(op[ai](arguments))return ap[ai].apply(this,arguments);return I.onMismatch(Y,arguments,Ge)};function Io(un,ai){return arguments.length===Qf&&Fo(un)&&ue(ai)?Xn.apply(this,arguments):arguments.length===Xf&&pl(un)&&Ae(ai)?qi.apply(this,arguments):arguments.length===Yf&&ml(un)&&mt(ai)?Ji.apply(this,arguments):arguments.length===ep&&Ee(un)&&Tt(ai)?Zf.apply(this,arguments):arguments.length===tp&&_e(un)&&gn(ai)?qf.apply(this,arguments):arguments.length===np&&te(un)&&pn(ai)?Jf.apply(this,arguments):sp.apply(this,arguments)}try{Object.defineProperty(Io,"name",{value:Y})}catch{}return Io.signatures=Ue,Io._typedFunctionData={signatures:Ge,signatureMap:nn},Io}function jn(Y,ve,Se){throw Me(Y,ve,Se)}function En(Y){return Sn(Y,0,Y.length-1)}function jt(Y){return Y[Y.length-1]}function Sn(Y,ve,Se){return Array.prototype.slice.call(Y,ve,Se)}function Zi(Y,ve){return{referTo:{references:Y,callback:ve}}}function Kn(Y){if("function"!=typeof Y)throw new TypeError("Callback function expected as first argument");return{referToSelf:{callback:Y}}}function xi(Y){return Y&&"object"==typeof Y.referTo&&Array.isArray(Y.referTo.references)&&"function"==typeof Y.referTo.callback}function pr(Y){return Y&&"object"==typeof Y.referToSelf&&"function"==typeof Y.referToSelf.callback}function Fi(Y,ve){if(!Y)return ve;if(ve&&ve!==Y){const Se=new Error("Function names do not match (expected: "+Y+", actual: "+ve+")");throw Se.data={actual:ve,expected:Y},Se}return Y}function hs(Y){let ve;for(const Se in Y)Object.prototype.hasOwnProperty.call(Y,Se)&&(me(Y[Se])||"string"==typeof Y[Se].signature)&&(ve=Fi(ve,Y[Se].name));return ve}function vs(Y,ve){let Se;for(Se in ve)if(Object.prototype.hasOwnProperty.call(ve,Se)){if(Se in Y&&ve[Se]!==Y[Se]){const Ne=new Error('Signature "'+Se+'" is defined twice');throw Ne.data={signature:Se,sourceFunction:ve[Se],destFunction:Y[Se]},Ne}Y[Se]=ve[Se]}}G(),$(K);const Eo=I;function xo(Y){if(!Y||"string"!=typeof Y.from||"string"!=typeof Y.to||"function"!=typeof Y.convert)throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");if(Y.to===Y.from)throw new SyntaxError('Illegal to define conversion from "'+Y.from+'" to itself.')}return I=function(Y){const ve="string"==typeof Y;let Ne=ve?Y:"";const Ue={};for(let Re=ve?1:0;Re<arguments.length;++Re){const it=arguments[Re];let rt,Ze={};if("function"==typeof it?(rt=it.name,"string"==typeof it.signature?Ze[it.signature]=it:me(it)&&(Ze=it.signatures)):z(it)&&(Ze=it,ve||(rt=hs(it))),0===Object.keys(Ze).length){const Ge=new TypeError("Argument to 'typed' at index "+Re+" is not a (typed) function, nor an object with signatures as keys and functions as values.");throw Ge.data={index:Re,argument:it},Ge}ve||(Ne=Fi(Ne,rt)),vs(Ue,Ze)}return on(Ne||"",Ue)},I.create=S,I.createCount=Eo.createCount,I.onMismatch=jn,I.throwMismatchError=jn,I.createError=Me,I.clear=G,I.clearConversions=function X(){let Y;for(Y of V)ae.get(Y).conversionsTo=[];U=0},I.addTypes=$,I._findType=k,I.referTo=function Hi(){const Y=En(arguments).map(Se=>et(Be(Se))),ve=jt(arguments);if("function"!=typeof ve)throw new TypeError("Callback function expected as last argument");return Zi(Y,ve)},I.referToSelf=Kn,I.convert=function pe(Y,ve){const Se=k(ve);if(Se.test(Y))return Y;const Ne=Se.conversionsTo;if(0===Ne.length)throw new Error("There are no conversions to "+ve+" defined.");for(let Ue=0;Ue<Ne.length;Ue++)if(k(Ne[Ue].from).test(Y))return Ne[Ue].convert(Y);throw new Error("Cannot convert "+Y+" to "+ve)},I.findSignature=F,I.find=function Ke(Y,ve,Se){return F(Y,ve,Se).implementation},I.isTypedFunction=me,I.warnAgainstDeprecatedThis=!0,I.addType=function(Y,ve){let Se="any";!1!==ve&&ae.has("Object")&&(Se="Object"),I.addTypes([Y],Se)},I.addConversion=function(Y){xo(Y);const ve=k(Y.to);if(!ve.conversionsTo.every(function(Se){return Se.from!==Y.from}))throw new Error('There is already a conversion from "'+Y.from+'" to "'+ve.name+'"');ve.conversionsTo.push({from:Y.from,convert:Y.convert,index:U++})},I.addConversions=function(Y){Y.forEach(I.addConversion)},I.removeConversion=function(Y){xo(Y);const ve=k(Y.to),Se=function ii(Y,ve){for(let Se=0;Se<Y.length;Se++)if(ve(Y[Se]))return Y[Se]}(ve.conversionsTo,Ue=>Ue.from===Y.from);if(!Se)throw new Error("Attempt to remove nonexistent conversion from "+Y.from+" to "+Y.to);if(Se.convert!==Y.convert)throw new Error("Conversion to remove does not match existing conversion");const Ne=ve.conversionsTo.indexOf(Se);ve.conversionsTo.splice(Ne,1)},I.resolve=function(Y,ve){if(!me(Y))throw new TypeError(M);const Se=Y._typedFunctionData.signatures;for(let Ne=0;Ne<Se.length;++Ne)if(Se[Ne].test(ve))return Se[Ne];return null},I}()}()},2823:(we,oe,L)=>{L.r(oe),L.d(oe,{ActionGroupMenuComponent:()=>xr,ActionGroupMenuModule:()=>Ir,ActionLogicHandler:()=>kS,ActionMenuComponent:()=>T6,ActionMenuModule:()=>Xd,ActionNameMapper:()=>Co,ActiveFieldsChecker:()=>fa,AdminCardComponent:()=>US,AdminCardModule:()=>VS,AdminMetadataStore:()=>yd,AdminPanelComponent:()=>V7,AdminPanelModule:()=>z7,AppMetadataStore:()=>Da,AppStateStore:()=>Xt,AsyncActionHandler:()=>Xa,AsyncActionService:()=>Yt,AsyncProcessLineAction:()=>RM,AsyncProcessRecordAction:()=>JS,AsyncProcessRecordThreadItemAction:()=>vC,AsyncProcessRecordThreadListAction:()=>mC,AsyncProcessSubpanelAction:()=>eC,AsyncProcessSubpanelLineAction:()=>DS,AsyncProcessTableAction:()=>dD,AttributeBuilder:()=>fd,AuthGuard:()=>F7,AuthService:()=>oi,BaseActionManager:()=>vi,BaseActionsAdapter:()=>Ad,BaseBooleanComponent:()=>Ku,BaseChartComponent:()=>_c,BaseChartModule:()=>GP,BaseComposite:()=>O1,BaseDateComponent:()=>$u,BaseDateTimeComponent:()=>Ya,BaseEnumComponent:()=>zi,BaseFavoritesComponent:()=>Bd,BaseFieldComponent:()=>_n,BaseFieldGridComponent:()=>Bu,BaseFieldModule:()=>_7,BaseFieldRegistry:()=>wi,BaseGroupedMenuItemComponent:()=>PC,BaseHomeMenuItemComponent:()=>RC,BaseLineActionsAdapter:()=>jM,BaseLineItemsComponent:()=>j1,BaseMenuFavoritesComponent:()=>HC,BaseMenuItemComponent:()=>OC,BaseMenuItemLinkComponent:()=>FC,BaseMenuItemsListComponent:()=>VC,BaseMenuRecentlyViewedComponent:()=>WC,BaseMetadataResolver:()=>Cf,BaseMobileGroupedMenuComponent:()=>qC,BaseMobileMenuComponent:()=>tM,BaseMobileModuleMenuComponent:()=>XC,BaseModuleResolver:()=>PS,BaseMultiEnumComponent:()=>bc,BaseNameComponent:()=>ab,BaseNavbarComponent:()=>oM,BaseNumberComponent:()=>Dc,BaseRecordActionsAdapter:()=>dr,BaseRecordContainerStore:()=>Cd,BaseRecordResolver:()=>L7,BaseRelateComponent:()=>ed,BaseRouteService:()=>G1,BaseSaveRecordMapper:()=>pa,BaseSubMenuFavoritesComponent:()=>NC,BaseSubMenuRecentlyViewedComponent:()=>AC,BaseWidgetComponent:()=>io,BaseWidgetModule:()=>v7,BooleanDetailFieldComponent:()=>ha,BooleanDetailFieldModule:()=>Pb,BooleanEditFieldComponent:()=>$c,BooleanEditFieldModule:()=>jb,BooleanFilterFieldComponent:()=>Lc,BooleanFilterFieldModule:()=>Sb,BottomWidgetAdapter:()=>xf,BulkActionMenuComponent:()=>Tu,BulkActionMenuModule:()=>Nu,BulkActionsAdapter:()=>cD,BulkActionsAdapterFactory:()=>lD,ButtonComponent:()=>Vn,ButtonGroupComponent:()=>mo,ButtonGroupModule:()=>Fr,ButtonLoadingDirective:()=>RS,ButtonLoadingUiModule:()=>jS,ButtonModule:()=>cn,ButtonUtils:()=>C0,CancelCreateAction:()=>HS,CancelRecordPanelAction:()=>sD,ChangelogAsyncAction:()=>eb,ChartComponent:()=>A0,ChartDataStore:()=>aS,ChartDataStoreFactory:()=>sS,ChartMessageAreaComponent:()=>la,ChartMessageAreaModule:()=>ua,ChartModule:()=>T0,ChartRegistry:()=>I0,ChartSidebarWidgetComponent:()=>cS,ChartSidebarWidgetModule:()=>lS,ClassicModalComponent:()=>Y0,ClassicModalModule:()=>Q8,ClassicViewResolver:()=>H7,ClassicViewUiComponent:()=>W7,ClassicViewUiModule:()=>K7,CloseButtonComponent:()=>Ou,CloseButtonModule:()=>Ja,CollectionGQL:()=>xu,ColumnChooserComponent:()=>L0,ColumnChooserModule:()=>O0,CompositeComponent:()=>Ca,CompositeModule:()=>B1,ConditionOperatorActionHandler:()=>bo,ConditionOperatorManager:()=>Ru,ConfirmationModalService:()=>Nn,CreateRecordComponent:()=>Cz,CreateRecordModule:()=>wz,CreateRelatedLineAction:()=>BM,CreateViewStore:()=>dl,CurrencyDetailFieldComponent:()=>wc,CurrencyDetailFieldModule:()=>db,CurrencyFormatter:()=>Iu,CurrencyService:()=>Qa,CurrencyUnitConverter:()=>iS,CurrencyValidator:()=>p1,DataTypeFormatter:()=>ut,DataTypeSeriesMapper:()=>oS,DataTypeUnitConverter:()=>rS,DateAdapter:()=>Wu,DateDetailFieldComponent:()=>Sc,DateDetailFieldModule:()=>cb,DateEditFieldComponent:()=>Ec,DateEditFieldModule:()=>Lb,DateFilterFieldComponent:()=>xc,DateFilterFieldModule:()=>Gb,DateFormatter:()=>Hr,DateParserFormatter:()=>Gu,DateTimeDetailFieldComponent:()=>Fc,DateTimeDetailFieldModule:()=>pb,DateTimeEditFieldComponent:()=>zu,DateTimeEditFieldModule:()=>fb,DateTimeFilterFieldComponent:()=>mb,DateTimeFilterFieldModule:()=>gb,DateTimeModel:()=>cr,DateTimeValidator:()=>v1,DateValidator:()=>g1,DatetimeFormatter:()=>Er,DisplayTypeAction:()=>rb,DisplayTypeBackendAction:()=>nb,DropdownButtonComponent:()=>gc,DropdownButtonModule:()=>Zr,DropdownEnumDetailFieldComponent:()=>zc,DropdownEnumDetailFieldModule:()=>Hb,DropdownEnumEditFieldComponent:()=>rd,DropdownEnumEditFieldModule:()=>Kb,DropdownSubmenuComponent:()=>g0,DropdownSubmenuModule:()=>y0,DuplicateEmailValidator:()=>A1,DynamicEnumDetailFieldComponent:()=>y7,DynamicEnumDetailFieldModule:()=>b7,DynamicEnumEditFieldComponent:()=>M7,DynamicEnumEditFieldModule:()=>S7,DynamicFieldComponent:()=>ns,DynamicFieldModule:()=>is,DynamicLabelComponent:()=>vo,DynamicLabelModule:()=>_o,DynamicLabelService:()=>hc,EmailDetailFieldsComponent:()=>D7,EmailDetailFieldsModule:()=>w7,EmailFormatter:()=>_1,EmailListFieldsComponent:()=>Tc,EmailListFieldsModule:()=>hb,EmailPrimarySelectAction:()=>V0,EmailValidator:()=>b1,EntityGQL:()=>oa,EntityMutationGQL:()=>c0,EnumDetailFieldComponent:()=>Jr,EnumDetailFieldModule:()=>ob,EnumEditFieldComponent:()=>es,EnumEditFieldModule:()=>vb,ErrorInterceptor:()=>I7,ExportAsyncAction:()=>Q0,ExtensionLoader:()=>N7,FavoriteToggleComponent:()=>$M,FavoriteToggleModule:()=>UM,FavoritesService:()=>PM,FieldBuilder:()=>rs,FieldComponent:()=>lr,FieldGridComponent:()=>gd,FieldGridModule:()=>wo,FieldLayoutComponent:()=>$1,FieldLayoutModule:()=>hd,FieldLogicActionHandler:()=>sr,FieldLogicDisplayActionHandler:()=>ib,FieldLogicDisplayManager:()=>yt,FieldLogicDisplayTypeAction:()=>U0,FieldLogicManager:()=>_t,FieldManager:()=>di,FieldModule:()=>Jn,FieldRegistry:()=>Hc,FileDetailFieldComponent:()=>Zu,FileDetailFieldModule:()=>bb,FilterAdapter:()=>kf,FilterAttributeBuilder:()=>N1,FilterFieldBuilder:()=>pd,FilterListStore:()=>MM,FilterListStoreFactory:()=>rl,FiltersListGQL:()=>Hd,FloatDetailFieldComponent:()=>Nc,FloatDetailFieldModule:()=>Cb,FloatValidator:()=>M1,FooterUiComponent:()=>n8,FooterUiModule:()=>i8,FormControlUtils:()=>go,FormatCurrencyModule:()=>ub,FormatCurrencyPipe:()=>lb,FormatNumberModule:()=>Ju,FormatNumberPipe:()=>qu,FullNameDetailFieldsComponent:()=>Mc,FullNameDetailFieldsModule:()=>sb,FullPageSpinnerComponent:()=>r8,FullPageSpinnerModule:()=>o8,GlobalSearch:()=>EC,GreaterThanAction:()=>B0,GridWidgetComponent:()=>Ed,GridWidgetModule:()=>xd,GroupFieldBuilder:()=>T1,GroupFieldComponent:()=>ba,GroupFieldModule:()=>c1,GroupedButtonComponent:()=>v0,GroupedButtonModule:()=>b0,GroupedMenuItemComponent:()=>UC,GroupedMenuItemRegistry:()=>$C,HistorySidebarWidgetComponent:()=>fS,HistorySidebarWidgetModule:()=>pS,HistoryTimelineAdapter:()=>mf,HistoryTimelineAdapterFactory:()=>dS,HistoryTimelineStore:()=>uS,HistoryTimelineStoreFactory:()=>pf,HomeMenuItemComponent:()=>kC,HomeMenuItemRegistry:()=>jC,HtmlDetailFieldComponent:()=>Jb,HtmlDetailFieldModule:()=>Qb,HtmlSanitizeModule:()=>x7,HtmlSanitizePipe:()=>E7,IconDetailFieldComponent:()=>ts,IconListFieldModule:()=>n1,IframePageChangeObserver:()=>Pu,IframeResizeHandlerHandler:()=>ku,ImageComponent:()=>wn,ImageModule:()=>Mn,ImmediateDebounce:()=>kM,InlineLoadingSpinnerComponent:()=>vc,InlineLoadingSpinnerModule:()=>qr,InstallAction:()=>eD,InstallActionManager:()=>Lf,InstallActionsAdapter:()=>Of,InstallAuthGuard:()=>A7,InstallContainerComponent:()=>nD,InstallContainerModule:()=>iD,InstallContentAdapter:()=>Bf,InstallErrorModalComponent:()=>Fd,InstallErrorModalModule:()=>$8,InstallHeaderComponent:()=>rD,InstallHeaderModule:()=>oD,InstallViewActionHandler:()=>YS,InstallViewComponent:()=>Fz,InstallViewModule:()=>Iz,InstallViewStore:()=>Ia,IntDetailFieldComponent:()=>Vc,IntDetailFieldModule:()=>Vb,IntValidator:()=>D1,IsEmptyAction:()=>k0,IsEqualAction:()=>P0,LabelComponent:()=>zt,LabelModule:()=>Ut,LanguageStore:()=>$e,LegacyEntrypointLinkBuilder:()=>yb,LessThanAction:()=>R0,LineActionActionHandler:()=>tf,LineActionActionManager:()=>sl,LineActionMenuComponent:()=>iC,LineActionModule:()=>rC,LineActionsAdapter:()=>uD,LineChartComponent:()=>E0,LineChartModule:()=>x0,LineItemBuilder:()=>L1,LineItemsComponent:()=>k1,LineItemsModule:()=>P1,LinkModel:()=>Y8,LinkRouteAsyncActionService:()=>s1,LinkTarget:()=>ds,ListComponent:()=>$z,ListContainerComponent:()=>vD,ListContainerModule:()=>_D,ListFilterComponent:()=>cl,ListFilterModule:()=>ll,ListFilterStore:()=>lf,ListFilterStoreFactory:()=>QM,ListGQL:()=>Bc,ListHeaderComponent:()=>yD,ListHeaderModule:()=>bD,ListModule:()=>Uz,ListViewRecordPanelActionAdapterFactory:()=>hD,ListViewRecordPanelActionHandler:()=>Rf,ListViewRecordPanelActionsAdapter:()=>gD,ListViewSidebarWidgetAdapter:()=>Vf,ListViewSidebarWidgetService:()=>fl,ListViewStore:()=>ni,ListViewTableActionsAdapter:()=>pD,ListviewTableActionsAdapterFactory:()=>mD,LoadMoreComponent:()=>oC,LoadMoreModule:()=>aC,LoadingBuffer:()=>f0,LoadingBufferFactory:()=>Fu,LoadingSpinnerComponent:()=>Ar,LoadingSpinnerModule:()=>Tr,LocalStorageService:()=>wr,LoginAuthGuard:()=>T7,LoginUiComponent:()=>CD,LoginUiModule:()=>Xz,LoginUiRoutes:()=>MD,LogoAbstract:()=>sC,LogoUiComponent:()=>el,LogoUiModule:()=>tl,LogoutComponent:()=>Yz,LogoutModule:()=>eG,LogoutUiComponent:()=>cC,LogoutUiModule:()=>lC,MaxColumnsCalculator:()=>Mo,MenuFavoritesComponent:()=>Pd,MenuFavoritesRegistry:()=>ZC,MenuItemComponent:()=>jd,MenuItemLinkComponent:()=>no,MenuItemLinkRegistry:()=>IC,MenuItemRegistry:()=>BC,MenuItemsListComponent:()=>GC,MenuItemsListRegistry:()=>zC,MenuRecentlyViewedComponent:()=>kd,MenuRecentlyViewedRegistry:()=>KC,MessageModalComponent:()=>ls,MessageModalModule:()=>X8,MessageService:()=>dt,MessageUiComponent:()=>q8,MessageUiModule:()=>J8,MetadataStore:()=>bt,MinimiseButtonComponent:()=>J1,MinimiseButtonModule:()=>Q1,MobileGroupedMenuComponent:()=>QC,MobileGroupedMenuRegistry:()=>JC,MobileMenuComponent:()=>iM,MobileMenuRegistry:()=>nM,MobileModuleMenuComponent:()=>eM,MobileModuleMenuRegistry:()=>YC,ModalButtonGroupComponent:()=>uC,ModalButtonGroupModule:()=>dC,ModalComponent:()=>da,ModalModule:()=>yo,ModalRecordFilterAdapter:()=>Db,ModalRecordListTableAdapter:()=>wb,ModuleNameMapper:()=>Tn,ModuleNavigation:()=>Rn,ModuleTitleComponent:()=>Id,ModuleTitleModule:()=>us,MultiEnumDetailFieldComponent:()=>Ic,MultiEnumDetailFieldModule:()=>_b,MultiEnumEditFieldComponent:()=>Uc,MultiEnumEditFieldModule:()=>Ub,MultiEnumFilterFieldComponent:()=>Cc,MultiEnumFilterFieldModule:()=>Ob,NavbarAbstract:()=>fC,NavbarRegistry:()=>aM,NavbarUiComponent:()=>qV,NavbarUiModule:()=>YV,NavigationStore:()=>Li,NoopAsyncAction:()=>X0,NotEmptyAction:()=>j0,NotEqualAction:()=>$0,NotificationStore:()=>wa,NotificationsComponent:()=>wC,NotificationsModule:()=>cM,NotificationsService:()=>Dd,NumberFormatter:()=>ho,PaginationComponent:()=>Vd,PaginationModule:()=>zd,PanelComponent:()=>Ea,PanelLogicActionHandler:()=>uM,PanelLogicDisplayTypeAction:()=>dM,PanelLogicManager:()=>il,PanelModule:()=>eo,PasswordDetailFieldComponent:()=>Wc,PasswordDetailFieldModule:()=>Xb,PasswordEditFieldComponent:()=>ad,PasswordEditFieldModule:()=>Yb,PhoneDetailFieldComponent:()=>yc,PhoneDetailFieldModule:()=>Nb,PhoneFormatter:()=>Au,PhoneValidator:()=>E1,PieGridChartComponent:()=>M0,PieGridChartModule:()=>w0,PopupButtonComponent:()=>fM,PopupButtonModule:()=>pM,PrimaryEmailValidator:()=>F1,ProcessService:()=>ir,QuickFiltersService:()=>ms,RadioEnumDetailFieldComponent:()=>Gc,RadioEnumDetailFieldModule:()=>Zb,RadioEnumEditFieldComponent:()=>od,RadioEnumEditFieldModule:()=>qb,RangeValidator:()=>d1,RecentlyViewedService:()=>Mf,RecordActionDisplayTypeLogic:()=>QS,RecordActionHandler:()=>fr,RecordActionManager:()=>Df,RecordActionsAdapter:()=>If,RecordCancelAction:()=>KS,RecordComponent:()=>Dz,RecordContainerComponent:()=>Ff,RecordContainerModule:()=>Tf,RecordContentAdapter:()=>wf,RecordContentComponent:()=>Gd,RecordContentModule:()=>Wd,RecordContentSkeletonComponent:()=>_M,RecordContentSkeletonModule:()=>yM,RecordCreateAction:()=>GS,RecordDetailsPopupButtonComponent:()=>mM,RecordDetailsPopupButtonModule:()=>gM,RecordEditAction:()=>zS,RecordFetchGQL:()=>Qr,RecordFlexboxComponent:()=>SC,RecordFlexboxModule:()=>sM,RecordGridComponent:()=>$d,RecordGridModule:()=>ps,RecordHeaderComponent:()=>Af,RecordHeaderModule:()=>Nf,RecordListModalComponent:()=>_a,RecordListModalModule:()=>_9,RecordListModalStore:()=>Fb,RecordListModalStoreFactory:()=>Ib,RecordListStore:()=>Xu,RecordListStoreFactory:()=>Gi,RecordManager:()=>_i,RecordModule:()=>XS,RecordPanelActionHandler:()=>YM,RecordPanelActionManager:()=>jf,RecordPanelAdapter:()=>Uf,RecordPanelComponent:()=>XM,RecordPanelModule:()=>eS,RecordPanelStore:()=>uf,RecordPanelStoreFactory:()=>tS,RecordSaveAction:()=>ZS,RecordSaveGQL:()=>Xr,RecordSaveNewAction:()=>qS,RecordStore:()=>Md,RecordStoreFactory:()=>Yr,RecordStoreList:()=>W1,RecordThreadComponent:()=>Ld,RecordThreadItemActionHandler:()=>fs,RecordThreadItemActionManager:()=>Nd,RecordThreadItemActionsAdapter:()=>CC,RecordThreadItemActionsAdapterFactory:()=>MC,RecordThreadItemCancelAction:()=>_C,RecordThreadItemComponent:()=>DC,RecordThreadItemEditAction:()=>yC,RecordThreadItemModule:()=>nl,RecordThreadItemSaveAction:()=>bC,RecordThreadItemStore:()=>Sd,RecordThreadItemStoreFactory:()=>Jc,RecordThreadListActionHandler:()=>pC,RecordThreadListActionManager:()=>Td,RecordThreadListActionsAdapter:()=>gC,RecordThreadListActionsAdapterFactory:()=>hC,RecordThreadModule:()=>Ud,RecordThreadSidebarWidgetComponent:()=>mS,RecordThreadSidebarWidgetModule:()=>U9,RecordThreadStore:()=>Qc,RecordThreadStoreFactory:()=>Xc,RecordToggleWidgetsAction:()=>WS,RecordViewSidebarWidgetService:()=>gs,RecordViewStore:()=>yi,RecoverPasswordService:()=>$S,RedirectAsyncAction:()=>J0,RelateDetailFieldComponent:()=>Oc,RelateDetailFieldsModule:()=>Bb,RelateEditFieldComponent:()=>td,RelateEditFieldModule:()=>Ab,RelateFilterFieldComponent:()=>nd,RelateFilterFieldModule:()=>Rb,RelateService:()=>ya,RequiredAction:()=>W0,RequiredValidator:()=>ju,RouteConverter:()=>to,RunBulkActionRecordPanelAction:()=>aD,SaveFilterStoreFactory:()=>cf,SavedFilterActionAdapterFactory:()=>JM,SavedFilterActionHandler:()=>nf,SavedFilterActionManager:()=>rf,SavedFilterActionsAdapter:()=>qM,SavedFilterDeleteAction:()=>zM,SavedFilterRecordStore:()=>WM,SavedFilterRecordStoreFactory:()=>af,SavedFilterSaveAction:()=>VM,SavedFilterSaveGQL:()=>HM,SavedFilterStore:()=>sf,SavedSearchRecordMapper:()=>ZM,ScreenSize:()=>qn,ScreenSizeObserverService:()=>hi,SearchBarComponent:()=>xC,SearchBarModule:()=>lM,SelectColumnsTableAction:()=>fD,SelectModalService:()=>kn,SeriesMapper:()=>ff,SeriesStatisticsStore:()=>df,SeriesStatisticsStoreFactory:()=>R7,SeriesTraverser:()=>nS,SettingsMenuComponent:()=>FM,SettingsMenuModule:()=>Yd,SidebarWidgetAdapter:()=>Sf,SidebarWidgetComponent:()=>hf,SidebarWidgetModule:()=>vf,SidebarWidgetRegistry:()=>_S,SingleValueStatisticsStore:()=>q1,SingleValueStatisticsStoreFactory:()=>os,SortButtonComponent:()=>bM,SortButtonModule:()=>CM,StandardFieldRegistry:()=>Kc,StateManager:()=>bd,StatisticsBatch:()=>qd,StatisticsFetchGQL:()=>ur,StatisticsSidebarWidgetComponent:()=>gS,StatisticsSidebarWidgetModule:()=>hS,StatisticsStore:()=>Yc,StatisticsStoreFactory:()=>j7,StatisticsTopWidgetComponent:()=>AS,StatisticsTopWidgetModule:()=>TS,StatusBarComponent:()=>Jd,StatusBarModule:()=>ef,SubMenuFavoritesComponent:()=>Rd,SubMenuFavoritesRegistry:()=>LC,SubMenuRecentlyViewedComponent:()=>Od,SubMenuRecentlyViewedRegistry:()=>TC,SubpanelActionAdapterFactory:()=>bS,SubpanelActionHandler:()=>xa,SubpanelActionManager:()=>cs,SubpanelActionsAdapter:()=>yS,SubpanelClearFilterAction:()=>nC,SubpanelComponent:()=>xS,SubpanelContainerComponent:()=>FS,SubpanelContainerModule:()=>IS,SubpanelCreateAction:()=>X1,SubpanelFilterAdapter:()=>CS,SubpanelFilterAdapterFactory:()=>MS,SubpanelLineActionHandler:()=>SS,SubpanelLineActionManager:()=>_f,SubpanelLineActionsAdapter:()=>wS,SubpanelLineActionsAdapterFactory:()=>yf,SubpanelModule:()=>ul,SubpanelSelectAction:()=>Y1,SubpanelShowFilterAction:()=>tC,SubpanelStore:()=>Fa,SubpanelStoreFactory:()=>Zd,SubpanelTableAdapter:()=>bf,SubpanelTableAdapterFactory:()=>ES,SystemConfigStore:()=>vt,SystemNameService:()=>O7,TableActionHandler:()=>Pf,TableActionManager:()=>$f,TableAdapter:()=>zf,TableBodyComponent:()=>AM,TableBodyModule:()=>LM,TableComponent:()=>ol,TableFooterComponent:()=>TM,TableFooterModule:()=>OM,TableHeaderComponent:()=>IM,TableHeaderModule:()=>NM,TableModule:()=>al,TextDetailFieldComponent:()=>Uu,TextDetailFieldModule:()=>Tb,TextEditFieldComponent:()=>id,TextEditFieldModule:()=>Wb,TextListFieldComponent:()=>ld,TextListFieldModule:()=>r1,ThemeImagesStore:()=>Kr,TinymceDetailFieldComponent:()=>sd,TinymceDetailFieldModule:()=>e1,TinymceEditFieldComponent:()=>cd,TinymceEditFieldModule:()=>t1,ToObservableModule:()=>vM,ToObservablePipe:()=>hM,TopWidgetAdapter:()=>Ef,TopWidgetComponent:()=>OS,TopWidgetModule:()=>BS,UpdateBaseCurrencyAction:()=>K0,UpdateCurrencyAction:()=>H0,UpdateFlexRelateModuleAction:()=>q0,UpdateValueAction:()=>Z0,UpdateValueBackendAction:()=>tb,UrlDetailFieldComponent:()=>ga,UrlDetailFieldModule:()=>$b,UserPreferenceStore:()=>qt,UserService:()=>B7,ValidationManager:()=>Do,VarcharDetailFieldComponent:()=>ma,VarcharDetailFieldModule:()=>zb,VarcharEditFieldComponent:()=>Vu,VarcharEditFieldModule:()=>kb,VarcharFilterFieldComponent:()=>Hu,VarcharFilterFieldModule:()=>Mb,VerticalBarChartComponent:()=>S0,VerticalBarChartModule:()=>D0,ViewStore:()=>Kd,WidgetPanelComponent:()=>as,WidgetPanelModule:()=>Lr,alertTypes:()=>ss,baseFieldComponents:()=>a1,baseFieldModules:()=>o1,baseViewFieldsMap:()=>ud,booleanRequiredValidator:()=>G0,chartModules:()=>F0,chartTypeMap:()=>Lu,componentTypeMap:()=>gf,currencyValidator:()=>f1,dateTimeValidator:()=>h1,dateValidator:()=>m1,duplicateEmailValidator:()=>I1,emailValidator:()=>y1,fieldComponents:()=>v5,fieldModules:()=>R1,floatValidator:()=>C1,intValidator:()=>S1,maxValidator:()=>u1,minValidator:()=>l1,phoneValidator:()=>w1,primaryEmailValidator:()=>x1,requiredValidator:()=>z0,sidebarWidgetModules:()=>vS,topWidgetComponentTypeMap:()=>LS,topWidgetModules:()=>NS,viewFieldsMap:()=>md});var n=L(2611),M=L(1320),S=L(8303),v=L(8103),z=L(2495),K=L(2831);const ae=new Set;let V,U=(()=>{class i{constructor(e,t){this._platform=e,this._nonce=t,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):k}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&function I(i,a){if(!ae.has(i))try{V||(V=document.createElement("style"),a&&(V.nonce=a),V.setAttribute("type","text/css"),document.head.appendChild(V)),V.sheet&&(V.sheet.insertRule(`@media ${i} {body{ }}`,0),ae.add(i))}catch(e){console.error(e)}}(e,this._nonce),this._matchMedia(e)}static#e=this.\u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(K.t4),n.\u0275\u0275inject(n.CSP_NONCE,8))};static#t=this.\u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function k(i){return{matches:"all"===i||""===i,media:i,addListener:()=>{},removeListener:()=>{}}}let $=(()=>{class i{constructor(e,t){this._mediaMatcher=e,this._zone=t,this._queries=new Map,this._destroySubject=new S.Subject}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return G((0,z.Eq)(e)).some(r=>this._registerQuery(r).mql.matches)}observe(e){const r=G((0,z.Eq)(e)).map(s=>this._registerQuery(s).observable);let o=(0,S.combineLatest)(r);return o=(0,S.concat)(o.pipe((0,v.take)(1)),o.pipe((0,v.skip)(1),(0,v.debounceTime)(0))),o.pipe((0,v.map)(s=>{const c={matches:!1,breakpoints:{}};return s.forEach(({matches:l,query:u})=>{c.matches=c.matches||l,c.breakpoints[u]=l}),c}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);const t=this._mediaMatcher.matchMedia(e),o={observable:new S.Observable(s=>{const c=l=>this._zone.run(()=>s.next(l));return t.addListener(c),()=>{t.removeListener(c)}}).pipe((0,v.startWith)(t),(0,v.map)(({matches:s})=>({query:e,matches:s})),(0,v.takeUntil)(this._destroySubject)),mql:t};return this._queries.set(e,o),o}static#e=this.\u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(U),n.\u0275\u0275inject(n.NgZone))};static#t=this.\u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function G(i){return i.map(a=>a.split(",")).reduce((a,e)=>a.concat(e)).map(a=>a.trim())}var ie=L(9298),me=L(8592),F=L(4187),Ke=L(7109),pe=L(3821),et=L(3068),je=L(5248),lt=L(9812),ke=L(9002);const nt=new n.InjectionToken("EventArgument",{providedIn:"root",factory:function Be(){return"$event"}}),Ye=new n.InjectionToken("IoEventContext"),en=new n.InjectionToken("IoEventContextProvider"),Qe=new n.InjectionToken("DynamicComponentInjector");let It=(()=>{class i{constructor(){this.trackOutputChanges=!1}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),re=(()=>{class i{constructor(e,t,r,o,s,c,l,u){if(this.injector=e,this.differs=t,this.cfr=r,this.options=o,this.compInjector=s,this.eventArgument=c,this.cdr=l,this.eventContextProvider=u,this.lastComponentInst=null,this.lastChangedInputs=new Set,this.inputsDiffer=this.differs.find({}).create(),this.compFactory=null,this.outputsShouldDisconnect$=new S.Subject,this.inputs={},this.outputs={},this.outputsChanged=()=>!1,this.options.trackOutputChanges){const d=this.differs.find({}).create();this.outputsChanged=f=>!!d.diff(f)}}get compRef(){return this.compInjector.componentRef}get componentInst(){return this.compRef?this.compRef.instance:null}get componentInstChanged(){return this.lastComponentInst!==this.componentInst&&(this.lastComponentInst=this.componentInst,!0)}ngOnDestroy(){this.disconnectOutputs()}update(e,t){if(!this.compRef)return void this.disconnectOutputs();const r=this.updateIO(e,t),o=this.componentInstChanged,s=this.getInputsChanges(o),c=this.outputsChanged(this.outputs);s&&this.updateChangedInputs(s),(o||s)&&this.updateInputs(o||!this.lastChangedInputs.size),(o||c||r.outputsChanged)&&this.bindOutputs()}updateIO(e,t){e||(e={}),t||(t={});const r=this.inputs!==e,o=this.outputs!==t;return this.inputs=e,this.outputs=t,{inputsChanged:r,outputsChanged:o}}updateInputs(e=!1){e&&this.updateCompFactory();const t=this.compRef,r=this.inputs;if(!r||!t)return;const o=this.lastChangedInputs.size?s=>this.lastChangedInputs.has(s):()=>!0;Object.keys(r).filter(o).forEach(s=>t.setInput(s,r[s]))}bindOutputs(){this.disconnectOutputs();const e=this.componentInst;let t=this.outputs;!t||!e||(t=this.resolveOutputs(t),Object.keys(t).filter(r=>e[r]).forEach(r=>e[r].pipe((0,v.takeUntil)(this.outputsShouldDisconnect$)).subscribe(o=>(this.cdr.markForCheck(),t[r](o)))))}disconnectOutputs(){this.outputsShouldDisconnect$.next()}getInputsChanges(e){return e&&this.inputsDiffer.diff({}),this.inputsDiffer.diff(this.inputs)}updateChangedInputs(e){this.lastChangedInputs.clear();const t=r=>this.lastChangedInputs.add(r.key);e.forEachAddedItem(t),e.forEachChangedItem(t),e.forEachRemovedItem(t)}resolveCompFactory(){if(!this.compRef)return null;try{try{return this.cfr.resolveComponentFactory(this.compRef.componentType)}catch{return this.cfr.resolveComponentFactory(this.compRef.instance.constructor)}}catch{return null}}updateCompFactory(){this.compFactory=this.resolveCompFactory()}resolveOutputs(e){return this.updateOutputsEventContext(),e=this.processOutputs(e),this.compFactory?this.remapIO(e,this.compFactory.outputs):e}updateOutputsEventContext(){if(this.eventContextProvider){const e=n.Injector.create({name:"EventContext",parent:this.injector,providers:[this.eventContextProvider]});this.outputsEventContext=e.get(Ye)}else this.outputsEventContext=this.injector.get(Ye,null)}processOutputs(e){const t={};return Object.keys(e).forEach(r=>{const o=e[r];let s;s="function"==typeof o?o:o&&this.processOutputArgs(o),this.outputsEventContext&&s&&(s=s.bind(this.outputsEventContext)),t[r]=s}),t}processOutputArgs(e){const t=this.eventArgument,r="args"in e?e.args||[]:[t],o=r.indexOf(t),s=e.handler;return-1===o?function(){return s.apply(this,r)}:function(c){const l=[...r];return l[o]=c,s.apply(this,l)}}remapIO(e,t){const r={};return Object.keys(e).forEach(o=>{const s=this.findPropByTplInMapping(o,t)||o;r[s]=e[o]}),r}findPropByTplInMapping(e,t){for(const r of t)if(r.templateName===e)return r.propName;return null}}return i.\u0275fac=function(e){return new(e||i)(n.\u0275\u0275inject(n.Injector),n.\u0275\u0275inject(n.KeyValueDiffers),n.\u0275\u0275inject(n.ComponentFactoryResolver),n.\u0275\u0275inject(It),n.\u0275\u0275inject(Qe),n.\u0275\u0275inject(nt),n.\u0275\u0275inject(n.ChangeDetectorRef),n.\u0275\u0275inject(en,8))},i.\u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac}),i})(),wt=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=n.\u0275\u0275defineNgModule({type:i}),i.\u0275inj=n.\u0275\u0275defineInjector({}),i})(),Pt=(()=>{class i{constructor(e){this.ioService=e}ngDoCheck(){this.ioService.update(this.ndcDynamicInputs,this.ndcDynamicOutputs)}}return i.\u0275fac=function(e){return new(e||i)(n.\u0275\u0275directiveInject(re))},i.\u0275dir=n.\u0275\u0275defineDirective({type:i,selectors:[["","ndcDynamicInputs",""],["","ndcDynamicOutputs",""]],inputs:{ndcDynamicInputs:"ndcDynamicInputs",ndcDynamicOutputs:"ndcDynamicOutputs"},exportAs:["ndcDynamicIo"],standalone:!0,features:[n.\u0275\u0275ProvidersFeature([re])]}),i})(),Vt=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=n.\u0275\u0275defineNgModule({type:i}),i.\u0275inj=n.\u0275\u0275defineInjector({imports:[wt]}),i})(),Bt=(()=>{class i{constructor(e){this.vcr=e,this.ndcDynamicCreated=new n.EventEmitter,this.componentRef=null}ngOnChanges(e){i.UpdateOnInputs.some(t=>e.hasOwnProperty(t))&&this.createDynamicComponent()}createDynamicComponent(){this.vcr.clear(),this.componentRef=null,this.ndcDynamicComponent&&(this.componentRef=this.vcr.createComponent(this.ndcDynamicComponent,{index:0,injector:this._resolveInjector(),projectableNodes:this.ndcDynamicContent,ngModuleRef:this.ndcDynamicNgModuleRef,environmentInjector:this.ndcDynamicEnvironmentInjector}),this.ndcDynamicCreated.emit(this.componentRef))}_resolveInjector(){let e=this.ndcDynamicInjector||this.vcr.injector;return this.ndcDynamicProviders&&(e=n.Injector.create({providers:this.ndcDynamicProviders,parent:e})),e}}return i.UpdateOnInputs=["ndcDynamicComponent","ndcDynamicInjector","ndcDynamicProviders","ndcDynamicContent","ndcDynamicNgModuleRef","ndcDynamicEnvironmentInjector"],i.\u0275fac=function(e){return new(e||i)(n.\u0275\u0275directiveInject(n.ViewContainerRef))},i.\u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["ndc-dynamic"]],inputs:{ndcDynamicComponent:"ndcDynamicComponent",ndcDynamicInjector:"ndcDynamicInjector",ndcDynamicProviders:"ndcDynamicProviders",ndcDynamicContent:"ndcDynamicContent",ndcDynamicNgModuleRef:"ndcDynamicNgModuleRef",ndcDynamicEnvironmentInjector:"ndcDynamicEnvironmentInjector"},outputs:{ndcDynamicCreated:"ndcDynamicCreated"},standalone:!0,features:[n.\u0275\u0275ProvidersFeature([{provide:Qe,useExisting:i}]),n.\u0275\u0275NgOnChangesFeature,n.\u0275\u0275StandaloneFeature],decls:0,vars:0,template:function(e,t){},encapsulation:2}),i})(),gt=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=n.\u0275\u0275defineNgModule({type:i}),i.\u0275inj=n.\u0275\u0275defineInjector({imports:[Vt,Bt,Vt]}),i})();new n.InjectionToken("ReflectRef",{providedIn:"root",factory:()=>window.Reflect});var jt=L(6672),ED=L(6478),pp=L(9388);function gl(i,a,e){for(let t in a)if(a.hasOwnProperty(t)){const r=a[t];r?i.setProperty(t,r,e?.has(t)?"important":""):i.removeProperty(t)}return i}function No(i,a){const e=a?"":"none";gl(i.style,{"touch-action":a?"":"none","-webkit-user-drag":a?"":"none","-webkit-tap-highlight-color":a?"":"transparent","user-select":e,"-ms-user-select":e,"-webkit-user-select":e,"-moz-user-select":e})}function mp(i,a,e){gl(i.style,{position:a?"":"fixed",top:a?"":"0",opacity:a?"":"0",left:a?"":"-999em"},e)}function _s(i,a){return a&&"none"!=a?i+" "+a:i}function gp(i){const a=i.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(i)*a}function hl(i,a){return i.getPropertyValue(a).split(",").map(t=>t.trim())}function vl(i){const a=i.getBoundingClientRect();return{top:a.top,right:a.right,bottom:a.bottom,left:a.left,width:a.width,height:a.height,x:a.x,y:a.y}}function _l(i,a,e){const{top:t,bottom:r,left:o,right:s}=i;return e>=t&&e<=r&&a>=o&&a<=s}function Ta(i,a,e){i.top+=a,i.bottom=i.top+i.height,i.left+=e,i.right=i.left+i.width}function hp(i,a,e,t){const{top:r,right:o,bottom:s,left:c,width:l,height:u}=i,d=l*a,f=u*a;return t>r-f&&t<s+f&&e>c-d&&e<o+d}class vp{constructor(a){this._document=a,this.positions=new Map}clear(){this.positions.clear()}cache(a){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),a.forEach(e=>{this.positions.set(e,{scrollPosition:{top:e.scrollTop,left:e.scrollLeft},clientRect:vl(e)})})}handleScroll(a){const e=(0,K.sA)(a),t=this.positions.get(e);if(!t)return null;const r=t.scrollPosition;let o,s;if(e===this._document){const u=this.getViewportScrollPosition();o=u.top,s=u.left}else o=e.scrollTop,s=e.scrollLeft;const c=r.top-o,l=r.left-s;return this.positions.forEach((u,d)=>{u.clientRect&&e!==d&&e.contains(d)&&Ta(u.clientRect,c,l)}),r.top=o,r.left=s,{top:c,left:l}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}}function _p(i){const a=i.cloneNode(!0),e=a.querySelectorAll("[id]"),t=i.nodeName.toLowerCase();a.removeAttribute("id");for(let r=0;r<e.length;r++)e[r].removeAttribute("id");return"canvas"===t?Cp(i,a):("input"===t||"select"===t||"textarea"===t)&&bp(i,a),yp("canvas",i,a,Cp),yp("input, textarea, select",i,a,bp),a}function yp(i,a,e,t){const r=a.querySelectorAll(i);if(r.length){const o=e.querySelectorAll(i);for(let s=0;s<r.length;s++)t(r[s],o[s])}}let kD=0;function bp(i,a){"file"!==a.type&&(a.value=i.value),"radio"===a.type&&a.name&&(a.name=`mat-clone-${a.name}-${kD++}`)}function Cp(i,a){const e=a.getContext("2d");if(e)try{e.drawImage(i,0,0)}catch{}}const Mp=(0,K.i$)({passive:!0}),ys=(0,K.i$)({passive:!1}),yl=new Set(["position"]);class $D{get disabled(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)}set disabled(a){const e=(0,z.Ig)(a);e!==this._disabled&&(this._disabled=e,this._toggleNativeDragInteractions(),this._handles.forEach(t=>No(t,e)))}constructor(a,e,t,r,o,s){this._config=e,this._document=t,this._ngZone=r,this._viewportRuler=o,this._dragDropRegistry=s,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._hasStartedDragging=!1,this._moveEvents=new S.Subject,this._pointerMoveSubscription=S.Subscription.EMPTY,this._pointerUpSubscription=S.Subscription.EMPTY,this._scrollSubscription=S.Subscription.EMPTY,this._resizeSubscription=S.Subscription.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new S.Subject,this.started=new S.Subject,this.released=new S.Subject,this.ended=new S.Subject,this.entered=new S.Subject,this.exited=new S.Subject,this.dropped=new S.Subject,this.moved=this._moveEvents,this._pointerDown=c=>{if(this.beforeStarted.next(),this._handles.length){const l=this._getTargetHandle(c);l&&!this._disabledHandles.has(l)&&!this.disabled&&this._initializeDragSequence(l,c)}else this.disabled||this._initializeDragSequence(this._rootElement,c)},this._pointerMove=c=>{const l=this._getPointerPositionOnPage(c);if(!this._hasStartedDragging){if(Math.abs(l.x-this._pickupPositionOnPage.x)+Math.abs(l.y-this._pickupPositionOnPage.y)>=this._config.dragStartThreshold){const m=Date.now()>=this._dragStartTime+this._getDragStartDelay(c),h=this._dropContainer;if(!m)return void this._endDragSequence(c);(!h||!h.isDragging()&&!h.isReceiving())&&(c.preventDefault(),this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence(c)))}return}c.preventDefault();const u=this._getConstrainedPointerPosition(l);if(this._hasMoved=!0,this._lastKnownPointerPosition=l,this._updatePointerDirectionDelta(u),this._dropContainer)this._updateActiveDropContainer(u,l);else{const d=this.constrainPosition?this._initialClientRect:this._pickupPositionOnPage,f=this._activeTransform;f.x=u.x-d.x+this._passiveTransform.x,f.y=u.y-d.y+this._passiveTransform.y,this._applyRootElementTransform(f.x,f.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:u,event:c,distance:this._getDragDistance(u),delta:this._pointerDirectionDelta})})},this._pointerUp=c=>{this._endDragSequence(c)},this._nativeDragStart=c=>{if(this._handles.length){const l=this._getTargetHandle(c);l&&!this._disabledHandles.has(l)&&!this.disabled&&c.preventDefault()}else this.disabled||c.preventDefault()},this.withRootElement(a).withParent(e.parentDragRef||null),this._parentPositions=new vp(t),s.registerDragItem(this)}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(a){this._handles=a.map(t=>(0,z.fI)(t)),this._handles.forEach(t=>No(t,this.disabled)),this._toggleNativeDragInteractions();const e=new Set;return this._disabledHandles.forEach(t=>{this._handles.indexOf(t)>-1&&e.add(t)}),this._disabledHandles=e,this}withPreviewTemplate(a){return this._previewTemplate=a,this}withPlaceholderTemplate(a){return this._placeholderTemplate=a,this}withRootElement(a){const e=(0,z.fI)(a);return e!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{e.addEventListener("mousedown",this._pointerDown,ys),e.addEventListener("touchstart",this._pointerDown,Mp),e.addEventListener("dragstart",this._nativeDragStart,ys)}),this._initialTransform=void 0,this._rootElement=e),typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(a){return this._boundaryElement=a?(0,z.fI)(a):null,this._resizeSubscription.unsubscribe(),a&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(a){return this._parentDragRef=a,this}dispose(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&this._rootElement?.remove(),this._anchor?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(a){!this._disabledHandles.has(a)&&this._handles.indexOf(a)>-1&&(this._disabledHandles.add(a),No(a,!0))}enableHandle(a){this._disabledHandles.has(a)&&(this._disabledHandles.delete(a),No(a,this.disabled))}withDirection(a){return this._direction=a,this}_withDropContainer(a){this._dropContainer=a}getFreeDragPosition(){const a=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:a.x,y:a.y}}setFreeDragPosition(a){return this._activeTransform={x:0,y:0},this._passiveTransform.x=a.x,this._passiveTransform.y=a.y,this._dropContainer||this._applyRootElementTransform(a.x,a.y),this}withPreviewContainer(a){return this._previewContainer=a,this}_sortFromLastPointerPosition(){const a=this._lastKnownPointerPosition;a&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(a),a)}_removeSubscriptions(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}_destroyPreview(){this._preview?.remove(),this._previewRef?.destroy(),this._preview=this._previewRef=null}_destroyPlaceholder(){this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(a){if(this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging))if(this.released.next({source:this,event:a}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(a),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;const e=this._getPointerPositionOnPage(a);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(e),dropPoint:e,event:a})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(a){Na(a)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();const e=this._dropContainer;if(e){const t=this._rootElement,r=t.parentNode,o=this._placeholder=this._createPlaceholderElement(),s=this._anchor=this._anchor||this._document.createComment(""),c=this._getShadowRoot();r.insertBefore(s,t),this._initialTransform=t.style.transform||"",this._preview=this._createPreviewElement(),mp(t,!1,yl),this._document.body.appendChild(r.replaceChild(o,t)),this._getPreviewInsertionPoint(r,c).appendChild(this._preview),this.started.next({source:this,event:a}),e.start(),this._initialContainer=e,this._initialIndex=e.getItemIndex(this)}else this.started.next({source:this,event:a}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(e?e.getScrollableParents():[])}_initializeDragSequence(a,e){this._parentDragRef&&e.stopPropagation();const t=this.isDragging(),r=Na(e),o=!r&&0!==e.button,s=this._rootElement,c=(0,K.sA)(e),l=!r&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now(),u=r?function BD(i){const a=i.touches&&i.touches[0]||i.changedTouches&&i.changedTouches[0];return!(!a||-1!==a.identifier||null!=a.radiusX&&1!==a.radiusX||null!=a.radiusY&&1!==a.radiusY)}(e):function OD(i){return 0===i.buttons||0===i.detail}(e);if(c&&c.draggable&&"mousedown"===e.type&&e.preventDefault(),t||o||l||u)return;if(this._handles.length){const p=s.style;this._rootElementTapHighlight=p.webkitTapHighlightColor||"",p.webkitTapHighlightColor="transparent"}this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._initialClientRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(p=>this._updateOnScroll(p)),this._boundaryElement&&(this._boundaryRect=vl(this._boundaryElement));const d=this._previewTemplate;this._pickupPositionInElement=d&&d.template&&!d.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialClientRect,a,e);const f=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(e);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:f.x,y:f.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,e)}_cleanupDragArtifacts(a){mp(this._rootElement,!0,yl),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._initialClientRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{const e=this._dropContainer,t=e.getItemIndex(this),r=this._getPointerPositionOnPage(a),o=this._getDragDistance(r),s=e._isOverContainer(r.x,r.y);this.ended.next({source:this,distance:o,dropPoint:r,event:a}),this.dropped.next({item:this,currentIndex:t,previousIndex:this._initialIndex,container:e,previousContainer:this._initialContainer,isPointerOverContainer:s,distance:o,dropPoint:r,event:a}),e.drop(this,t,this._initialIndex,this._initialContainer,s,o,r,a),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:a,y:e},{x:t,y:r}){let o=this._initialContainer._getSiblingContainerFromPosition(this,a,e);!o&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(a,e)&&(o=this._initialContainer),o&&o!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=o,this._dropContainer.enter(this,a,e,o===this._initialContainer&&o.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:o,currentIndex:o.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(t,r),this._dropContainer._sortItem(this,a,e,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(a,e):this._applyPreviewTransform(a-this._pickupPositionInElement.x,e-this._pickupPositionInElement.y))}_createPreviewElement(){const a=this._previewTemplate,e=this.previewClass,t=a?a.template:null;let r;if(t&&a){const o=a.matchSize?this._initialClientRect:null,s=a.viewContainer.createEmbeddedView(t,a.context);s.detectChanges(),r=Dp(s,this._document),this._previewRef=s,a.matchSize?wp(r,o):r.style.transform=bs(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else r=_p(this._rootElement),wp(r,this._initialClientRect),this._initialTransform&&(r.style.transform=this._initialTransform);return gl(r.style,{"pointer-events":"none",margin:"0",position:"fixed",top:"0",left:"0","z-index":`${this._config.zIndex||1e3}`},yl),No(r,!1),r.classList.add("cdk-drag-preview"),r.setAttribute("dir",this._direction),e&&(Array.isArray(e)?e.forEach(o=>r.classList.add(o)):r.classList.add(e)),r}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();const a=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._applyPreviewTransform(a.left,a.top);const e=function jD(i){const a=getComputedStyle(i),e=hl(a,"transition-property"),t=e.find(c=>"transform"===c||"all"===c);if(!t)return 0;const r=e.indexOf(t),o=hl(a,"transition-duration"),s=hl(a,"transition-delay");return gp(o[r])+gp(s[r])}(this._preview);return 0===e?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(t=>{const r=s=>{(!s||(0,K.sA)(s)===this._preview&&"transform"===s.propertyName)&&(this._preview?.removeEventListener("transitionend",r),t(),clearTimeout(o))},o=setTimeout(r,1.5*e);this._preview.addEventListener("transitionend",r)}))}_createPlaceholderElement(){const a=this._placeholderTemplate,e=a?a.template:null;let t;return e?(this._placeholderRef=a.viewContainer.createEmbeddedView(e,a.context),this._placeholderRef.detectChanges(),t=Dp(this._placeholderRef,this._document)):t=_p(this._rootElement),t.style.pointerEvents="none",t.classList.add("cdk-drag-placeholder"),t}_getPointerPositionInElement(a,e,t){const r=e===this._rootElement?null:e,o=r?r.getBoundingClientRect():a,s=Na(t)?t.targetTouches[0]:t,c=this._getViewportScrollPosition();return{x:o.left-a.left+(s.pageX-o.left-c.left),y:o.top-a.top+(s.pageY-o.top-c.top)}}_getPointerPositionOnPage(a){const e=this._getViewportScrollPosition(),t=Na(a)?a.touches[0]||a.changedTouches[0]||{pageX:0,pageY:0}:a,r=t.pageX-e.left,o=t.pageY-e.top;if(this._ownerSVGElement){const s=this._ownerSVGElement.getScreenCTM();if(s){const c=this._ownerSVGElement.createSVGPoint();return c.x=r,c.y=o,c.matrixTransform(s.inverse())}}return{x:r,y:o}}_getConstrainedPointerPosition(a){const e=this._dropContainer?this._dropContainer.lockAxis:null;let{x:t,y:r}=this.constrainPosition?this.constrainPosition(a,this,this._initialClientRect,this._pickupPositionInElement):a;if("x"===this.lockAxis||"x"===e?r=this._pickupPositionOnPage.y-(this.constrainPosition?this._pickupPositionInElement.y:0):("y"===this.lockAxis||"y"===e)&&(t=this._pickupPositionOnPage.x-(this.constrainPosition?this._pickupPositionInElement.x:0)),this._boundaryRect){const{x:o,y:s}=this.constrainPosition?{x:0,y:0}:this._pickupPositionInElement,c=this._boundaryRect,{width:l,height:u}=this._getPreviewRect(),d=c.top+s,f=c.bottom-(u-s);t=Sp(t,c.left+o,c.right-(l-o)),r=Sp(r,d,f)}return{x:t,y:r}}_updatePointerDirectionDelta(a){const{x:e,y:t}=a,r=this._pointerDirectionDelta,o=this._pointerPositionAtLastDirectionChange,s=Math.abs(e-o.x),c=Math.abs(t-o.y);return s>this._config.pointerDirectionChangeThreshold&&(r.x=e>o.x?1:-1,o.x=e),c>this._config.pointerDirectionChangeThreshold&&(r.y=t>o.y?1:-1,o.y=t),r}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;const a=this._handles.length>0||!this.isDragging();a!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=a,No(this._rootElement,a))}_removeRootElementListeners(a){a.removeEventListener("mousedown",this._pointerDown,ys),a.removeEventListener("touchstart",this._pointerDown,Mp),a.removeEventListener("dragstart",this._nativeDragStart,ys)}_applyRootElementTransform(a,e){const t=bs(a,e),r=this._rootElement.style;null==this._initialTransform&&(this._initialTransform=r.transform&&"none"!=r.transform?r.transform:""),r.transform=_s(t,this._initialTransform)}_applyPreviewTransform(a,e){const t=this._previewTemplate?.template?void 0:this._initialTransform,r=bs(a,e);this._preview.style.transform=_s(r,t)}_getDragDistance(a){const e=this._pickupPositionOnPage;return e?{x:a.x-e.x,y:a.y-e.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:a,y:e}=this._passiveTransform;if(0===a&&0===e||this.isDragging()||!this._boundaryElement)return;const t=this._rootElement.getBoundingClientRect(),r=this._boundaryElement.getBoundingClientRect();if(0===r.width&&0===r.height||0===t.width&&0===t.height)return;const o=r.left-t.left,s=t.right-r.right,c=r.top-t.top,l=t.bottom-r.bottom;r.width>t.width?(o>0&&(a+=o),s>0&&(a-=s)):a=0,r.height>t.height?(c>0&&(e+=c),l>0&&(e-=l)):e=0,(a!==this._passiveTransform.x||e!==this._passiveTransform.y)&&this.setFreeDragPosition({y:e,x:a})}_getDragStartDelay(a){const e=this.dragStartDelay;return"number"==typeof e?e:Na(a)?e.touch:e?e.mouse:0}_updateOnScroll(a){const e=this._parentPositions.handleScroll(a);if(e){const t=(0,K.sA)(a);this._boundaryRect&&t!==this._boundaryElement&&t.contains(this._boundaryElement)&&Ta(this._boundaryRect,e.top,e.left),this._pickupPositionOnPage.x+=e.left,this._pickupPositionOnPage.y+=e.top,this._dropContainer||(this._activeTransform.x-=e.left,this._activeTransform.y-=e.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return void 0===this._cachedShadowRoot&&(this._cachedShadowRoot=(0,K.kV)(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(a,e){const t=this._previewContainer||"global";if("parent"===t)return a;if("global"===t){const r=this._document;return e||r.fullscreenElement||r.webkitFullscreenElement||r.mozFullScreenElement||r.msFullscreenElement||r.body}return(0,z.fI)(t)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialClientRect),this._previewRect}_getTargetHandle(a){return this._handles.find(e=>a.target&&(a.target===e||e.contains(a.target)))}}function bs(i,a){return`translate3d(${Math.round(i)}px, ${Math.round(a)}px, 0)`}function Sp(i,a,e){return Math.max(a,Math.min(e,i))}function Na(i){return"t"===i.type[0]}function Dp(i,a){const e=i.rootNodes;if(1===e.length&&e[0].nodeType===a.ELEMENT_NODE)return e[0];const t=a.createElement("div");return e.forEach(r=>t.appendChild(r)),t}function wp(i,a){i.style.width=`${a.width}px`,i.style.height=`${a.height}px`,i.style.transform=bs(a.left,a.top)}function Ep(i,a,e){const t=La(a,i.length-1),r=La(e,i.length-1);if(t===r)return;const o=i[t],s=r<t?-1:1;for(let c=t;c!==r;c+=s)i[c]=i[c+s];i[r]=o}function La(i,a){return Math.max(0,Math.min(a,i))}class VD{constructor(a,e){this._element=a,this._dragDropRegistry=e,this._itemPositions=[],this.orientation="vertical",this._previousSwap={drag:null,delta:0,overlaps:!1}}start(a){this.withItems(a)}sort(a,e,t,r){const o=this._itemPositions,s=this._getItemIndexFromPointerPosition(a,e,t,r);if(-1===s&&o.length>0)return null;const c="horizontal"===this.orientation,l=o.findIndex(b=>b.drag===a),u=o[s],f=u.clientRect,p=l>s?1:-1,m=this._getItemOffsetPx(o[l].clientRect,f,p),h=this._getSiblingOffsetPx(l,o,p),g=o.slice();return Ep(o,l,s),o.forEach((b,_)=>{if(g[_]===b)return;const D=b.drag===a,y=D?m:h,w=D?a.getPlaceholderElement():b.drag.getRootElement();b.offset+=y,c?(w.style.transform=_s(`translate3d(${Math.round(b.offset)}px, 0, 0)`,b.initialTransform),Ta(b.clientRect,0,y)):(w.style.transform=_s(`translate3d(0, ${Math.round(b.offset)}px, 0)`,b.initialTransform),Ta(b.clientRect,y,0))}),this._previousSwap.overlaps=_l(f,e,t),this._previousSwap.drag=u.drag,this._previousSwap.delta=c?r.x:r.y,{previousIndex:l,currentIndex:s}}enter(a,e,t,r){const o=null==r||r<0?this._getItemIndexFromPointerPosition(a,e,t):r,s=this._activeDraggables,c=s.indexOf(a),l=a.getPlaceholderElement();let u=s[o];if(u===a&&(u=s[o+1]),!u&&(null==o||-1===o||o<s.length-1)&&this._shouldEnterAsFirstChild(e,t)&&(u=s[0]),c>-1&&s.splice(c,1),u&&!this._dragDropRegistry.isDragging(u)){const d=u.getRootElement();d.parentElement.insertBefore(l,d),s.splice(o,0,a)}else(0,z.fI)(this._element).appendChild(l),s.push(a);l.style.transform="",this._cacheItemPositions()}withItems(a){this._activeDraggables=a.slice(),this._cacheItemPositions()}withSortPredicate(a){this._sortPredicate=a}reset(){this._activeDraggables.forEach(a=>{const e=a.getRootElement();if(e){const t=this._itemPositions.find(r=>r.drag===a)?.initialTransform;e.style.transform=t||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(a){return("horizontal"===this.orientation&&"rtl"===this.direction?this._itemPositions.slice().reverse():this._itemPositions).findIndex(t=>t.drag===a)}updateOnScroll(a,e){this._itemPositions.forEach(({clientRect:t})=>{Ta(t,a,e)}),this._itemPositions.forEach(({drag:t})=>{this._dragDropRegistry.isDragging(t)&&t._sortFromLastPointerPosition()})}_cacheItemPositions(){const a="horizontal"===this.orientation;this._itemPositions=this._activeDraggables.map(e=>{const t=e.getVisibleElement();return{drag:e,offset:0,initialTransform:t.style.transform||"",clientRect:vl(t)}}).sort((e,t)=>a?e.clientRect.left-t.clientRect.left:e.clientRect.top-t.clientRect.top)}_getItemOffsetPx(a,e,t){const r="horizontal"===this.orientation;let o=r?e.left-a.left:e.top-a.top;return-1===t&&(o+=r?e.width-a.width:e.height-a.height),o}_getSiblingOffsetPx(a,e,t){const r="horizontal"===this.orientation,o=e[a].clientRect,s=e[a+-1*t];let c=o[r?"width":"height"]*t;if(s){const l=r?"left":"top",u=r?"right":"bottom";-1===t?c-=s.clientRect[l]-o[u]:c+=o[l]-s.clientRect[u]}return c}_shouldEnterAsFirstChild(a,e){if(!this._activeDraggables.length)return!1;const t=this._itemPositions,r="horizontal"===this.orientation;if(t[0].drag!==this._activeDraggables[0]){const s=t[t.length-1].clientRect;return r?a>=s.right:e>=s.bottom}{const s=t[0].clientRect;return r?a<=s.left:e<=s.top}}_getItemIndexFromPointerPosition(a,e,t,r){const o="horizontal"===this.orientation,s=this._itemPositions.findIndex(({drag:c,clientRect:l})=>c!==a&&((!r||c!==this._previousSwap.drag||!this._previousSwap.overlaps||(o?r.x:r.y)!==this._previousSwap.delta)&&(o?e>=Math.floor(l.left)&&e<Math.floor(l.right):t>=Math.floor(l.top)&&t<Math.floor(l.bottom))));return-1!==s&&this._sortPredicate(s,a)?s:-1}}class zD{constructor(a,e,t,r,o){this._dragDropRegistry=e,this._ngZone=r,this._viewportRuler=o,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.beforeStarted=new S.Subject,this.entered=new S.Subject,this.exited=new S.Subject,this.dropped=new S.Subject,this.sorted=new S.Subject,this.receivingStarted=new S.Subject,this.receivingStopped=new S.Subject,this._isDragging=!1,this._draggables=[],this._siblings=[],this._activeSiblings=new Set,this._viewportScrollSubscription=S.Subscription.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new S.Subject,this._cachedShadowRoot=null,this._startScrollInterval=()=>{this._stopScrolling(),(0,S.interval)(0,S.animationFrameScheduler).pipe((0,v.takeUntil)(this._stopScrollTimers)).subscribe(()=>{const s=this._scrollNode,c=this.autoScrollStep;1===this._verticalScrollDirection?s.scrollBy(0,-c):2===this._verticalScrollDirection&&s.scrollBy(0,c),1===this._horizontalScrollDirection?s.scrollBy(-c,0):2===this._horizontalScrollDirection&&s.scrollBy(c,0)})},this.element=(0,z.fI)(a),this._document=t,this.withScrollableParents([this.element]),e.registerDropContainer(this),this._parentPositions=new vp(t),this._sortStrategy=new VD(this.element,e),this._sortStrategy.withSortPredicate((s,c)=>this.sortPredicate(s,c,this))}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this.receivingStarted.complete(),this.receivingStopped.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(a,e,t,r){this._draggingStarted(),null==r&&this.sortingDisabled&&(r=this._draggables.indexOf(a)),this._sortStrategy.enter(a,e,t,r),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:a,container:this,currentIndex:this.getItemIndex(a)})}exit(a){this._reset(),this.exited.next({item:a,container:this})}drop(a,e,t,r,o,s,c,l={}){this._reset(),this.dropped.next({item:a,currentIndex:e,previousIndex:t,container:this,previousContainer:r,isPointerOverContainer:o,distance:s,dropPoint:c,event:l})}withItems(a){const e=this._draggables;return this._draggables=a,a.forEach(t=>t._withDropContainer(this)),this.isDragging()&&(e.filter(r=>r.isDragging()).every(r=>-1===a.indexOf(r))?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(a){return this._sortStrategy.direction=a,this}connectedTo(a){return this._siblings=a.slice(),this}withOrientation(a){return this._sortStrategy.orientation=a,this}withScrollableParents(a){const e=(0,z.fI)(this.element);return this._scrollableElements=-1===a.indexOf(e)?[e,...a]:a.slice(),this}getScrollableParents(){return this._scrollableElements}getItemIndex(a){return this._isDragging?this._sortStrategy.getItemIndex(a):this._draggables.indexOf(a)}isReceiving(){return this._activeSiblings.size>0}_sortItem(a,e,t,r){if(this.sortingDisabled||!this._clientRect||!hp(this._clientRect,.05,e,t))return;const o=this._sortStrategy.sort(a,e,t,r);o&&this.sorted.next({previousIndex:o.previousIndex,currentIndex:o.currentIndex,container:this,item:a})}_startScrollingIfNecessary(a,e){if(this.autoScrollDisabled)return;let t,r=0,o=0;if(this._parentPositions.positions.forEach((s,c)=>{c===this._document||!s.clientRect||t||hp(s.clientRect,.05,a,e)&&([r,o]=function GD(i,a,e,t){const r=Ip(a,t),o=Ap(a,e);let s=0,c=0;if(r){const l=i.scrollTop;1===r?l>0&&(s=1):i.scrollHeight-l>i.clientHeight&&(s=2)}if(o){const l=i.scrollLeft;1===o?l>0&&(c=1):i.scrollWidth-l>i.clientWidth&&(c=2)}return[s,c]}(c,s.clientRect,a,e),(r||o)&&(t=c))}),!r&&!o){const{width:s,height:c}=this._viewportRuler.getViewportSize(),l={width:s,height:c,top:0,right:s,bottom:c,left:0};r=Ip(l,e),o=Ap(l,a),t=window}t&&(r!==this._verticalScrollDirection||o!==this._horizontalScrollDirection||t!==this._scrollNode)&&(this._verticalScrollDirection=r,this._horizontalScrollDirection=o,this._scrollNode=t,(r||o)&&t?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){const a=(0,z.fI)(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=a.msScrollSnapType||a.scrollSnapType||"",a.scrollSnapType=a.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){const a=(0,z.fI)(this.element);this._parentPositions.cache(this._scrollableElements),this._clientRect=this._parentPositions.positions.get(a).clientRect}_reset(){this._isDragging=!1;const a=(0,z.fI)(this.element).style;a.scrollSnapType=a.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(e=>e._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_isOverContainer(a,e){return null!=this._clientRect&&_l(this._clientRect,a,e)}_getSiblingContainerFromPosition(a,e,t){return this._siblings.find(r=>r._canReceive(a,e,t))}_canReceive(a,e,t){if(!this._clientRect||!_l(this._clientRect,e,t)||!this.enterPredicate(a,this))return!1;const r=this._getShadowRoot().elementFromPoint(e,t);if(!r)return!1;const o=(0,z.fI)(this.element);return r===o||o.contains(r)}_startReceiving(a,e){const t=this._activeSiblings;!t.has(a)&&e.every(r=>this.enterPredicate(r,this)||this._draggables.indexOf(r)>-1)&&(t.add(a),this._cacheParentPositions(),this._listenToScrollEvents(),this.receivingStarted.next({initiator:a,receiver:this,items:e}))}_stopReceiving(a){this._activeSiblings.delete(a),this._viewportScrollSubscription.unsubscribe(),this.receivingStopped.next({initiator:a,receiver:this})}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(a=>{if(this.isDragging()){const e=this._parentPositions.handleScroll(a);e&&this._sortStrategy.updateOnScroll(e.top,e.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){const a=(0,K.kV)((0,z.fI)(this.element));this._cachedShadowRoot=a||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){const a=this._sortStrategy.getActiveItemsSnapshot().filter(e=>e.isDragging());this._siblings.forEach(e=>e._startReceiving(this,a))}}function Ip(i,a){const{top:e,bottom:t,height:r}=i,o=.05*r;return a>=e-o&&a<=e+o?1:a>=t-o&&a<=t+o?2:0}function Ap(i,a){const{left:e,right:t,width:r}=i,o=.05*r;return a>=e-o&&a<=e+o?1:a>=t-o&&a<=t+o?2:0}const Cs=(0,K.i$)({passive:!1,capture:!0});let WD=(()=>{class i{constructor(e,t){this._ngZone=e,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=[],this._globalListeners=new Map,this._draggingPredicate=r=>r.isDragging(),this.pointerMove=new S.Subject,this.pointerUp=new S.Subject,this.scroll=new S.Subject,this._preventDefaultWhileDragging=r=>{this._activeDragInstances.length>0&&r.preventDefault()},this._persistentTouchmoveListener=r=>{this._activeDragInstances.length>0&&(this._activeDragInstances.some(this._draggingPredicate)&&r.preventDefault(),this.pointerMove.next(r))},this._document=t}registerDropContainer(e){this._dropInstances.has(e)||this._dropInstances.add(e)}registerDragItem(e){this._dragInstances.add(e),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._persistentTouchmoveListener,Cs)})}removeDropContainer(e){this._dropInstances.delete(e)}removeDragItem(e){this._dragInstances.delete(e),this.stopDragging(e),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,Cs)}startDragging(e,t){if(!(this._activeDragInstances.indexOf(e)>-1)&&(this._activeDragInstances.push(e),1===this._activeDragInstances.length)){const r=t.type.startsWith("touch");this._globalListeners.set(r?"touchend":"mouseup",{handler:o=>this.pointerUp.next(o),options:!0}).set("scroll",{handler:o=>this.scroll.next(o),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:Cs}),r||this._globalListeners.set("mousemove",{handler:o=>this.pointerMove.next(o),options:Cs}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((o,s)=>{this._document.addEventListener(s,o.handler,o.options)})})}}stopDragging(e){const t=this._activeDragInstances.indexOf(e);t>-1&&(this._activeDragInstances.splice(t,1),0===this._activeDragInstances.length&&this._clearGlobalListeners())}isDragging(e){return this._activeDragInstances.indexOf(e)>-1}scrolled(e){const t=[this.scroll];return e&&e!==this._document&&t.push(new S.Observable(r=>this._ngZone.runOutsideAngular(()=>{const s=c=>{this._activeDragInstances.length&&r.next(c)};return e.addEventListener("scroll",s,!0),()=>{e.removeEventListener("scroll",s,!0)}}))),(0,S.merge)(...t)}ngOnDestroy(){this._dragInstances.forEach(e=>this.removeDragItem(e)),this._dropInstances.forEach(e=>this.removeDropContainer(e)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((e,t)=>{this._document.removeEventListener(t,e.handler,e.options)}),this._globalListeners.clear()}static#e=this.\u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(n.NgZone),n.\u0275\u0275inject(F.DOCUMENT))};static#t=this.\u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const KD={dragStartThreshold:5,pointerDirectionChangeThreshold:5};let bl=(()=>{class i{constructor(e,t,r,o){this._document=e,this._ngZone=t,this._viewportRuler=r,this._dragDropRegistry=o}createDrag(e,t=KD){return new $D(e,t,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(e){return new zD(e,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}static#e=this.\u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(F.DOCUMENT),n.\u0275\u0275inject(n.NgZone),n.\u0275\u0275inject(jt.rL),n.\u0275\u0275inject(WD))};static#t=this.\u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const Cl=new n.InjectionToken("CDK_DRAG_PARENT"),Ml=new n.InjectionToken("CdkDragHandle"),Tp=new n.InjectionToken("CdkDragPlaceholder"),Np=new n.InjectionToken("CdkDragPreview"),Lp=new n.InjectionToken("CDK_DRAG_CONFIG"),Op=new n.InjectionToken("CdkDropList");let Bp=(()=>{class i{static#e=this._dragInstances=[];get disabled(){return this._disabled||this.dropContainer&&this.dropContainer.disabled}set disabled(e){this._disabled=(0,z.Ig)(e),this._dragRef.disabled=this._disabled}constructor(e,t,r,o,s,c,l,u,d,f,p){this.element=e,this.dropContainer=t,this._ngZone=o,this._viewContainerRef=s,this._dir=l,this._changeDetectorRef=d,this._selfHandle=f,this._parentDrag=p,this._destroyed=new S.Subject,this.started=new n.EventEmitter,this.released=new n.EventEmitter,this.ended=new n.EventEmitter,this.entered=new n.EventEmitter,this.exited=new n.EventEmitter,this.dropped=new n.EventEmitter,this.moved=new S.Observable(m=>{const h=this._dragRef.moved.pipe((0,v.map)(g=>({source:this,pointerPosition:g.pointerPosition,event:g.event,delta:g.delta,distance:g.distance}))).subscribe(m);return()=>{h.unsubscribe()}}),this._dragRef=u.createDrag(e,{dragStartThreshold:c&&null!=c.dragStartThreshold?c.dragStartThreshold:5,pointerDirectionChangeThreshold:c&&null!=c.pointerDirectionChangeThreshold?c.pointerDirectionChangeThreshold:5,zIndex:c?.zIndex}),this._dragRef.data=this,i._dragInstances.push(this),c&&this._assignDefaults(c),t&&(this._dragRef._withDropContainer(t._dropListRef),t.addItem(this)),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}setFreeDragPosition(e){this._dragRef.setFreeDragPosition(e)}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe((0,v.take)(1),(0,v.takeUntil)(this._destroyed)).subscribe(()=>{this._updateRootElement(),this._setupHandlesListener(),this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)})})}ngOnChanges(e){const t=e.rootElementSelector,r=e.freeDragPosition;t&&!t.firstChange&&this._updateRootElement(),r&&!r.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this);const e=i._dragInstances.indexOf(this);e>-1&&i._dragInstances.splice(e,1),this._ngZone.runOutsideAngular(()=>{this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_updateRootElement(){const e=this.element.nativeElement;let t=e;this.rootElementSelector&&(t=void 0!==e.closest?e.closest(this.rootElementSelector):e.parentElement?.closest(this.rootElementSelector)),this._dragRef.withRootElement(t||e)}_getBoundaryElement(){const e=this.boundaryElement;return e?"string"==typeof e?this.element.nativeElement.closest(e):(0,z.fI)(e):null}_syncInputs(e){e.beforeStarted.subscribe(()=>{if(!e.isDragging()){const t=this._dir,r=this.dragStartDelay,o=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,s=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;e.disabled=this.disabled,e.lockAxis=this.lockAxis,e.dragStartDelay="object"==typeof r&&r?r:(0,z.su)(r),e.constrainPosition=this.constrainPosition,e.previewClass=this.previewClass,e.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(o).withPreviewTemplate(s).withPreviewContainer(this.previewContainer||"global"),t&&e.withDirection(t.value)}}),e.beforeStarted.pipe((0,v.take)(1)).subscribe(()=>{if(this._parentDrag)return void e.withParent(this._parentDrag._dragRef);let t=this.element.nativeElement.parentElement;for(;t;){if(t.classList.contains("cdk-drag")){e.withParent(i._dragInstances.find(r=>r.element.nativeElement===t)?._dragRef||null);break}t=t.parentElement}})}_handleEvents(e){e.started.subscribe(t=>{this.started.emit({source:this,event:t.event}),this._changeDetectorRef.markForCheck()}),e.released.subscribe(t=>{this.released.emit({source:this,event:t.event})}),e.ended.subscribe(t=>{this.ended.emit({source:this,distance:t.distance,dropPoint:t.dropPoint,event:t.event}),this._changeDetectorRef.markForCheck()}),e.entered.subscribe(t=>{this.entered.emit({container:t.container.data,item:this,currentIndex:t.currentIndex})}),e.exited.subscribe(t=>{this.exited.emit({container:t.container.data,item:this})}),e.dropped.subscribe(t=>{this.dropped.emit({previousIndex:t.previousIndex,currentIndex:t.currentIndex,previousContainer:t.previousContainer.data,container:t.container.data,isPointerOverContainer:t.isPointerOverContainer,item:this,distance:t.distance,dropPoint:t.dropPoint,event:t.event})})}_assignDefaults(e){const{lockAxis:t,dragStartDelay:r,constrainPosition:o,previewClass:s,boundaryElement:c,draggingDisabled:l,rootElementSelector:u,previewContainer:d}=e;this.disabled=l??!1,this.dragStartDelay=r||0,t&&(this.lockAxis=t),o&&(this.constrainPosition=o),s&&(this.previewClass=s),c&&(this.boundaryElement=c),u&&(this.rootElementSelector=u),d&&(this.previewContainer=d)}_setupHandlesListener(){this._handles.changes.pipe((0,v.startWith)(this._handles),(0,v.tap)(e=>{const t=e.filter(r=>r._parentDrag===this).map(r=>r.element);this._selfHandle&&this.rootElementSelector&&t.push(this.element),this._dragRef.withHandles(t)}),(0,v.switchMap)(e=>(0,S.merge)(...e.map(t=>t._stateChanges.pipe((0,v.startWith)(t))))),(0,v.takeUntil)(this._destroyed)).subscribe(e=>{const t=this._dragRef,r=e.element.nativeElement;e.disabled?t.disableHandle(r):t.enableHandle(r)})}static#t=this.\u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(n.ElementRef),n.\u0275\u0275directiveInject(Op,12),n.\u0275\u0275directiveInject(F.DOCUMENT),n.\u0275\u0275directiveInject(n.NgZone),n.\u0275\u0275directiveInject(n.ViewContainerRef),n.\u0275\u0275directiveInject(Lp,8),n.\u0275\u0275directiveInject(pp.Is,8),n.\u0275\u0275directiveInject(bl),n.\u0275\u0275directiveInject(n.ChangeDetectorRef),n.\u0275\u0275directiveInject(Ml,10),n.\u0275\u0275directiveInject(Cl,12))};static#n=this.\u0275dir=n.\u0275\u0275defineDirective({type:i,selectors:[["","cdkDrag",""]],contentQueries:function(t,r,o){if(1&t&&(n.\u0275\u0275contentQuery(o,Np,5),n.\u0275\u0275contentQuery(o,Tp,5),n.\u0275\u0275contentQuery(o,Ml,5)),2&t){let s;n.\u0275\u0275queryRefresh(s=n.\u0275\u0275loadQuery())&&(r._previewTemplate=s.first),n.\u0275\u0275queryRefresh(s=n.\u0275\u0275loadQuery())&&(r._placeholderTemplate=s.first),n.\u0275\u0275queryRefresh(s=n.\u0275\u0275loadQuery())&&(r._handles=s)}},hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(t,r){2&t&&n.\u0275\u0275classProp("cdk-drag-disabled",r.disabled)("cdk-drag-dragging",r._dragRef.isDragging())},inputs:{data:["cdkDragData","data"],lockAxis:["cdkDragLockAxis","lockAxis"],rootElementSelector:["cdkDragRootElement","rootElementSelector"],boundaryElement:["cdkDragBoundary","boundaryElement"],dragStartDelay:["cdkDragStartDelay","dragStartDelay"],freeDragPosition:["cdkDragFreeDragPosition","freeDragPosition"],disabled:["cdkDragDisabled","disabled"],constrainPosition:["cdkDragConstrainPosition","constrainPosition"],previewClass:["cdkDragPreviewClass","previewClass"],previewContainer:["cdkDragPreviewContainer","previewContainer"]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],standalone:!0,features:[n.\u0275\u0275ProvidersFeature([{provide:Cl,useExisting:i}]),n.\u0275\u0275NgOnChangesFeature]})}return i})();const Sl=new n.InjectionToken("CdkDropListGroup");let XD=0,Rp=(()=>{class i{static#e=this._dropLists=[];get disabled(){return this._disabled||!!this._group&&this._group.disabled}set disabled(e){this._dropListRef.disabled=this._disabled=(0,z.Ig)(e)}constructor(e,t,r,o,s,c,l){this.element=e,this._changeDetectorRef=r,this._scrollDispatcher=o,this._dir=s,this._group=c,this._destroyed=new S.Subject,this.connectedTo=[],this.id="cdk-drop-list-"+XD++,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.dropped=new n.EventEmitter,this.entered=new n.EventEmitter,this.exited=new n.EventEmitter,this.sorted=new n.EventEmitter,this._unsortedItems=new Set,this._dropListRef=t.createDropList(e),this._dropListRef.data=this,l&&this._assignDefaults(l),this._dropListRef.enterPredicate=(u,d)=>this.enterPredicate(u.data,d.data),this._dropListRef.sortPredicate=(u,d,f)=>this.sortPredicate(u,d.data,f.data),this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),i._dropLists.push(this),c&&c._items.add(this)}addItem(e){this._unsortedItems.add(e),this._dropListRef.isDragging()&&this._syncItemsWithRef()}removeItem(e){this._unsortedItems.delete(e),this._dropListRef.isDragging()&&this._syncItemsWithRef()}getSortedItems(){return Array.from(this._unsortedItems).sort((e,t)=>e._dragRef.getVisibleElement().compareDocumentPosition(t._dragRef.getVisibleElement())&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)}ngOnDestroy(){const e=i._dropLists.indexOf(this);e>-1&&i._dropLists.splice(e,1),this._group&&this._group._items.delete(this),this._unsortedItems.clear(),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}_setupInputSyncSubscription(e){this._dir&&this._dir.change.pipe((0,v.startWith)(this._dir.value),(0,v.takeUntil)(this._destroyed)).subscribe(t=>e.withDirection(t)),e.beforeStarted.subscribe(()=>{const t=(0,z.Eq)(this.connectedTo).map(r=>"string"==typeof r?i._dropLists.find(s=>s.id===r):r);if(this._group&&this._group._items.forEach(r=>{-1===t.indexOf(r)&&t.push(r)}),!this._scrollableParentsResolved){const r=this._scrollDispatcher.getAncestorScrollContainers(this.element).map(o=>o.getElementRef().nativeElement);this._dropListRef.withScrollableParents(r),this._scrollableParentsResolved=!0}e.disabled=this.disabled,e.lockAxis=this.lockAxis,e.sortingDisabled=(0,z.Ig)(this.sortingDisabled),e.autoScrollDisabled=(0,z.Ig)(this.autoScrollDisabled),e.autoScrollStep=(0,z.su)(this.autoScrollStep,2),e.connectedTo(t.filter(r=>r&&r!==this).map(r=>r._dropListRef)).withOrientation(this.orientation)})}_handleEvents(e){e.beforeStarted.subscribe(()=>{this._syncItemsWithRef(),this._changeDetectorRef.markForCheck()}),e.entered.subscribe(t=>{this.entered.emit({container:this,item:t.item.data,currentIndex:t.currentIndex})}),e.exited.subscribe(t=>{this.exited.emit({container:this,item:t.item.data}),this._changeDetectorRef.markForCheck()}),e.sorted.subscribe(t=>{this.sorted.emit({previousIndex:t.previousIndex,currentIndex:t.currentIndex,container:this,item:t.item.data})}),e.dropped.subscribe(t=>{this.dropped.emit({previousIndex:t.previousIndex,currentIndex:t.currentIndex,previousContainer:t.previousContainer.data,container:t.container.data,item:t.item.data,isPointerOverContainer:t.isPointerOverContainer,distance:t.distance,dropPoint:t.dropPoint,event:t.event}),this._changeDetectorRef.markForCheck()}),(0,S.merge)(e.receivingStarted,e.receivingStopped).subscribe(()=>this._changeDetectorRef.markForCheck())}_assignDefaults(e){const{lockAxis:t,draggingDisabled:r,sortingDisabled:o,listAutoScrollDisabled:s,listOrientation:c}=e;this.disabled=r??!1,this.sortingDisabled=o??!1,this.autoScrollDisabled=s??!1,this.orientation=c||"vertical",t&&(this.lockAxis=t)}_syncItemsWithRef(){this._dropListRef.withItems(this.getSortedItems().map(e=>e._dragRef))}static#t=this.\u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(n.ElementRef),n.\u0275\u0275directiveInject(bl),n.\u0275\u0275directiveInject(n.ChangeDetectorRef),n.\u0275\u0275directiveInject(jt.mF),n.\u0275\u0275directiveInject(pp.Is,8),n.\u0275\u0275directiveInject(Sl,12),n.\u0275\u0275directiveInject(Lp,8))};static#n=this.\u0275dir=n.\u0275\u0275defineDirective({type:i,selectors:[["","cdkDropList",""],["cdk-drop-list"]],hostAttrs:[1,"cdk-drop-list"],hostVars:7,hostBindings:function(t,r){2&t&&(n.\u0275\u0275attribute("id",r.id),n.\u0275\u0275classProp("cdk-drop-list-disabled",r.disabled)("cdk-drop-list-dragging",r._dropListRef.isDragging())("cdk-drop-list-receiving",r._dropListRef.isReceiving()))},inputs:{connectedTo:["cdkDropListConnectedTo","connectedTo"],data:["cdkDropListData","data"],orientation:["cdkDropListOrientation","orientation"],id:"id",lockAxis:["cdkDropListLockAxis","lockAxis"],disabled:["cdkDropListDisabled","disabled"],sortingDisabled:["cdkDropListSortingDisabled","sortingDisabled"],enterPredicate:["cdkDropListEnterPredicate","enterPredicate"],sortPredicate:["cdkDropListSortPredicate","sortPredicate"],autoScrollDisabled:["cdkDropListAutoScrollDisabled","autoScrollDisabled"],autoScrollStep:["cdkDropListAutoScrollStep","autoScrollStep"]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],standalone:!0,features:[n.\u0275\u0275ProvidersFeature([{provide:Sl,useValue:void 0},{provide:Op,useExisting:i}])]})}return i})(),jp=(()=>{class i{static#e=this.\u0275fac=function(t){return new(t||i)};static#t=this.\u0275mod=n.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=n.\u0275\u0275defineInjector({providers:[bl],imports:[jt.ZD]})}return i})();function mr(){return mr=Object.assign?Object.assign.bind():function(i){for(var a=1;a<arguments.length;a++){var e=arguments[a];for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(i[t]=e[t])}return i},mr.apply(this,arguments)}var kp={epsilon:1e-12,matrix:"Matrix",number:"number",precision:64,predictable:!1,randomSeed:null},Le=function(a){if(a)throw new Error("The global config is readonly. \nPlease create a mathjs instance if you want to change the default configuration. \nExample:\n\n  import { create, all } from 'mathjs';\n  const mathjs = create(all);\n  mathjs.config({ number: 'BigNumber' });\n");return Object.freeze(kp)};mr(Le,kp,{MATRIX_OPTIONS:["Matrix","Array"],NUMBER_OPTIONS:["number","BigNumber","Fraction"]});var $p,gr,Lo=9e15,Rr=1e9,El="0123456789abcdef",Ms="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",Ss="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",xl={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-Lo,maxE:Lo,crypto:!1},Nt=!0,Ds="[DecimalError] ",jr=Ds+"Invalid argument: ",Up=Ds+"Precision limit exceeded",Vp=Ds+"crypto unavailable",zp="[object Decimal]",ri=Math.floor,Gn=Math.pow,ew=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,tw=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,nw=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,Gp=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Oi=1e7,Dt=7,rw=Ms.length-1,Fl=Ss.length-1,Pe={toStringTag:zp};function Yn(i){var a,e,t,r=i.length-1,o="",s=i[0];if(r>0){for(o+=s,a=1;a<r;a++)(e=Dt-(t=i[a]+"").length)&&(o+=kr(e)),o+=t;(e=Dt-(t=(s=i[a])+"").length)&&(o+=kr(e))}else if(0===s)return"0";for(;s%10==0;)s/=10;return o+s}function fi(i,a,e){if(i!==~~i||i<a||i>e)throw Error(jr+i)}function Oa(i,a,e,t){var r,o,s,c;for(o=i[0];o>=10;o/=10)--a;return--a<0?(a+=Dt,r=0):(r=Math.ceil((a+1)/Dt),a%=Dt),o=Gn(10,Dt-a),c=i[r]%o|0,null==t?a<3?(0==a?c=c/100|0:1==a&&(c=c/10|0),s=e<4&&99999==c||e>3&&49999==c||5e4==c||0==c):s=(e<4&&c+1==o||e>3&&c+1==o/2)&&(i[r+1]/o/100|0)==Gn(10,a-2)-1||(c==o/2||0==c)&&0==(i[r+1]/o/100|0):a<4?(0==a?c=c/1e3|0:1==a?c=c/100|0:2==a&&(c=c/10|0),s=(t||e<4)&&9999==c||!t&&e>3&&4999==c):s=((t||e<4)&&c+1==o||!t&&e>3&&c+1==o/2)&&(i[r+1]/o/1e3|0)==Gn(10,a-3)-1,s}function ws(i,a,e){for(var t,o,r=[0],s=0,c=i.length;s<c;){for(o=r.length;o--;)r[o]*=a;for(r[0]+=El.indexOf(i.charAt(s++)),t=0;t<r.length;t++)r[t]>e-1&&(void 0===r[t+1]&&(r[t+1]=0),r[t+1]+=r[t]/e|0,r[t]%=e)}return r.reverse()}Pe.absoluteValue=Pe.abs=function(){var i=new this.constructor(this);return i.s<0&&(i.s=1),Mt(i)},Pe.ceil=function(){return Mt(new this.constructor(this),this.e+1,2)},Pe.clampedTo=Pe.clamp=function(i,a){var t=this,r=t.constructor;if(i=new r(i),a=new r(a),!i.s||!a.s)return new r(NaN);if(i.gt(a))throw Error(jr+a);return t.cmp(i)<0?i:t.cmp(a)>0?a:new r(t)},Pe.comparedTo=Pe.cmp=function(i){var a,e,t,r,o=this,s=o.d,c=(i=new o.constructor(i)).d,l=o.s,u=i.s;if(!s||!c)return l&&u?l!==u?l:s===c?0:!s^l<0?1:-1:NaN;if(!s[0]||!c[0])return s[0]?l:c[0]?-u:0;if(l!==u)return l;if(o.e!==i.e)return o.e>i.e^l<0?1:-1;for(a=0,e=(t=s.length)<(r=c.length)?t:r;a<e;++a)if(s[a]!==c[a])return s[a]>c[a]^l<0?1:-1;return t===r?0:t>r^l<0?1:-1},Pe.cosine=Pe.cos=function(){var i,a,e=this,t=e.constructor;return e.d?e.d[0]?(a=t.rounding,t.precision=(i=t.precision)+Math.max(e.e,e.sd())+Dt,t.rounding=1,e=function ow(i,a){var e,t,r;if(a.isZero())return a;(t=a.d.length)<32?r=(1/Fs(4,e=Math.ceil(t/3))).toString():(e=16,r="2.3283064365386962890625e-10"),i.precision+=e,a=Oo(i,1,a.times(r),new i(1));for(var o=e;o--;){var s=a.times(a);a=s.times(s).minus(s).times(8).plus(1)}return i.precision-=e,a}(t,Jp(t,e)),t.precision=i,t.rounding=a,Mt(2==gr||3==gr?e.neg():e,i,a,!0)):new t(1):new t(NaN)},Pe.cubeRoot=Pe.cbrt=function(){var i,a,e,t,r,o,s,c,l,u,d=this,f=d.constructor;if(!d.isFinite()||d.isZero())return new f(d);for(Nt=!1,(o=d.s*Gn(d.s*d,1/3))&&Math.abs(o)!=1/0?t=new f(o.toString()):(e=Yn(d.d),(o=((i=d.e)-e.length+1)%3)&&(e+=1==o||-2==o?"0":"00"),o=Gn(e,1/3),i=ri((i+1)/3)-(i%3==(i<0?-1:2)),(t=new f(e=o==1/0?"5e"+i:(e=o.toExponential()).slice(0,e.indexOf("e")+1)+i)).s=d.s),s=(i=f.precision)+3;;)if(u=(l=(c=t).times(c).times(c)).plus(d),t=bn(u.plus(d).times(c),u.plus(l),s+2,1),Yn(c.d).slice(0,s)===(e=Yn(t.d)).slice(0,s)){if("9999"!=(e=e.slice(s-3,s+1))&&(r||"4999"!=e)){(!+e||!+e.slice(1)&&"5"==e.charAt(0))&&(Mt(t,i+1,1),a=!t.times(t).times(t).eq(d));break}if(!r&&(Mt(c,i+1,0),c.times(c).times(c).eq(d))){t=c;break}s+=4,r=1}return Nt=!0,Mt(t,i,f.rounding,a)},Pe.decimalPlaces=Pe.dp=function(){var i,a=this.d,e=NaN;if(a){if(e=((i=a.length-1)-ri(this.e/Dt))*Dt,i=a[i])for(;i%10==0;i/=10)e--;e<0&&(e=0)}return e},Pe.dividedBy=Pe.div=function(i){return bn(this,new this.constructor(i))},Pe.dividedToIntegerBy=Pe.divToInt=function(i){var e=this.constructor;return Mt(bn(this,new e(i),0,1,1),e.precision,e.rounding)},Pe.equals=Pe.eq=function(i){return 0===this.cmp(i)},Pe.floor=function(){return Mt(new this.constructor(this),this.e+1,3)},Pe.greaterThan=Pe.gt=function(i){return this.cmp(i)>0},Pe.greaterThanOrEqualTo=Pe.gte=function(i){var a=this.cmp(i);return 1==a||0===a},Pe.hyperbolicCosine=Pe.cosh=function(){var i,a,e,t,r,o=this,s=o.constructor,c=new s(1);if(!o.isFinite())return new s(o.s?1/0:NaN);if(o.isZero())return c;t=s.rounding,s.precision=(e=s.precision)+Math.max(o.e,o.sd())+4,s.rounding=1,(r=o.d.length)<32?a=(1/Fs(4,i=Math.ceil(r/3))).toString():(i=16,a="2.3283064365386962890625e-10"),o=Oo(s,1,o.times(a),new s(1),!0);for(var l,u=i,d=new s(8);u--;)l=o.times(o),o=c.minus(l.times(d.minus(l.times(d))));return Mt(o,s.precision=e,s.rounding=t,!0)},Pe.hyperbolicSine=Pe.sinh=function(){var i,a,e,t,r=this,o=r.constructor;if(!r.isFinite()||r.isZero())return new o(r);if(e=o.rounding,o.precision=(a=o.precision)+Math.max(r.e,r.sd())+4,o.rounding=1,(t=r.d.length)<3)r=Oo(o,2,r,r,!0);else{i=1.4*Math.sqrt(t),r=Oo(o,2,r=r.times(1/Fs(5,i=i>16?16:0|i)),r,!0);for(var s,c=new o(5),l=new o(16),u=new o(20);i--;)s=r.times(r),r=r.times(c.plus(s.times(l.times(s).plus(u))))}return o.precision=a,o.rounding=e,Mt(r,a,e,!0)},Pe.hyperbolicTangent=Pe.tanh=function(){var i,a,e=this,t=e.constructor;return e.isFinite()?e.isZero()?new t(e):(a=t.rounding,t.precision=(i=t.precision)+7,t.rounding=1,bn(e.sinh(),e.cosh(),t.precision=i,t.rounding=a)):new t(e.s)},Pe.inverseCosine=Pe.acos=function(){var i,a=this,e=a.constructor,t=a.abs().cmp(1),r=e.precision,o=e.rounding;return-1!==t?0===t?a.isNeg()?Bi(e,r,o):new e(0):new e(NaN):a.isZero()?Bi(e,r+4,o).times(.5):(e.precision=r+6,e.rounding=1,a=a.asin(),i=Bi(e,r+4,o).times(.5),e.precision=r,e.rounding=o,i.minus(a))},Pe.inverseHyperbolicCosine=Pe.acosh=function(){var i,a,e=this,t=e.constructor;return e.lte(1)?new t(e.eq(1)?0:NaN):e.isFinite()?(a=t.rounding,t.precision=(i=t.precision)+Math.max(Math.abs(e.e),e.sd())+4,t.rounding=1,Nt=!1,e=e.times(e).minus(1).sqrt().plus(e),Nt=!0,t.precision=i,t.rounding=a,e.ln()):new t(e)},Pe.inverseHyperbolicSine=Pe.asinh=function(){var i,a,e=this,t=e.constructor;return!e.isFinite()||e.isZero()?new t(e):(a=t.rounding,t.precision=(i=t.precision)+2*Math.max(Math.abs(e.e),e.sd())+6,t.rounding=1,Nt=!1,e=e.times(e).plus(1).sqrt().plus(e),Nt=!0,t.precision=i,t.rounding=a,e.ln())},Pe.inverseHyperbolicTangent=Pe.atanh=function(){var i,a,e,t,r=this,o=r.constructor;return r.isFinite()?r.e>=0?new o(r.abs().eq(1)?r.s/0:r.isZero()?r:NaN):(i=o.precision,a=o.rounding,t=r.sd(),Math.max(t,i)<2*-r.e-1?Mt(new o(r),i,a,!0):(o.precision=e=t-r.e,r=bn(r.plus(1),new o(1).minus(r),e+i,1),o.precision=i+4,o.rounding=1,r=r.ln(),o.precision=i,o.rounding=a,r.times(.5))):new o(NaN)},Pe.inverseSine=Pe.asin=function(){var i,a,e,t,r=this,o=r.constructor;return r.isZero()?new o(r):(a=r.abs().cmp(1),e=o.precision,t=o.rounding,-1!==a?0===a?((i=Bi(o,e+4,t).times(.5)).s=r.s,i):new o(NaN):(o.precision=e+6,o.rounding=1,r=r.div(new o(1).minus(r.times(r)).sqrt().plus(1)).atan(),o.precision=e,o.rounding=t,r.times(2)))},Pe.inverseTangent=Pe.atan=function(){var i,a,e,t,r,o,s,c,l,u=this,d=u.constructor,f=d.precision,p=d.rounding;if(u.isFinite()){if(u.isZero())return new d(u);if(u.abs().eq(1)&&f+4<=Fl)return(s=Bi(d,f+4,p).times(.25)).s=u.s,s}else{if(!u.s)return new d(NaN);if(f+4<=Fl)return(s=Bi(d,f+4,p).times(.5)).s=u.s,s}for(d.precision=c=f+10,d.rounding=1,i=e=Math.min(28,c/Dt+2|0);i;--i)u=u.div(u.times(u).plus(1).sqrt().plus(1));for(Nt=!1,a=Math.ceil(c/Dt),t=1,l=u.times(u),s=new d(u),r=u;-1!==i;)if(r=r.times(l),o=s.minus(r.div(t+=2)),r=r.times(l),void 0!==(s=o.plus(r.div(t+=2))).d[a])for(i=a;s.d[i]===o.d[i]&&i--;);return e&&(s=s.times(2<<e-1)),Nt=!0,Mt(s,d.precision=f,d.rounding=p,!0)},Pe.isFinite=function(){return!!this.d},Pe.isInteger=Pe.isInt=function(){return!!this.d&&ri(this.e/Dt)>this.d.length-2},Pe.isNaN=function(){return!this.s},Pe.isNegative=Pe.isNeg=function(){return this.s<0},Pe.isPositive=Pe.isPos=function(){return this.s>0},Pe.isZero=function(){return!!this.d&&0===this.d[0]},Pe.lessThan=Pe.lt=function(i){return this.cmp(i)<0},Pe.lessThanOrEqualTo=Pe.lte=function(i){return this.cmp(i)<1},Pe.logarithm=Pe.log=function(i){var a,e,t,r,o,s,c,l,u=this,d=u.constructor,f=d.precision,p=d.rounding;if(null==i)i=new d(10),a=!0;else{if(e=(i=new d(i)).d,i.s<0||!e||!e[0]||i.eq(1))return new d(NaN);a=i.eq(10)}if(e=u.d,u.s<0||!e||!e[0]||u.eq(1))return new d(e&&!e[0]?-1/0:1!=u.s?NaN:e?0:1/0);if(a)if(e.length>1)o=!0;else{for(r=e[0];r%10==0;)r/=10;o=1!==r}if(Nt=!1,s=Pr(u,c=f+5),t=a?xs(d,c+10):Pr(i,c),Oa((l=bn(s,t,c,1)).d,r=f,p))do{if(s=Pr(u,c+=10),t=a?xs(d,c+10):Pr(i,c),l=bn(s,t,c,1),!o){+Yn(l.d).slice(r+1,r+15)+1==1e14&&(l=Mt(l,f+1,0));break}}while(Oa(l.d,r+=10,p));return Nt=!0,Mt(l,f,p)},Pe.minus=Pe.sub=function(i){var a,e,t,r,o,s,c,l,u,d,f,p,m=this,h=m.constructor;if(i=new h(i),!m.d||!i.d)return m.s&&i.s?m.d?i.s=-i.s:i=new h(i.d||m.s!==i.s?m:NaN):i=new h(NaN),i;if(m.s!=i.s)return i.s=-i.s,m.plus(i);if(p=i.d,c=h.precision,l=h.rounding,!(u=m.d)[0]||!p[0]){if(p[0])i.s=-i.s;else{if(!u[0])return new h(3===l?-0:0);i=new h(m)}return Nt?Mt(i,c,l):i}if(e=ri(i.e/Dt),d=ri(m.e/Dt),u=u.slice(),o=d-e){for((f=o<0)?(a=u,o=-o,s=p.length):(a=p,e=d,s=u.length),o>(t=Math.max(Math.ceil(c/Dt),s)+2)&&(o=t,a.length=1),a.reverse(),t=o;t--;)a.push(0);a.reverse()}else{for((f=(t=u.length)<(s=p.length))&&(s=t),t=0;t<s;t++)if(u[t]!=p[t]){f=u[t]<p[t];break}o=0}for(f&&(a=u,u=p,p=a,i.s=-i.s),t=p.length-(s=u.length);t>0;--t)u[s++]=0;for(t=p.length;t>o;){if(u[--t]<p[t]){for(r=t;r&&0===u[--r];)u[r]=Oi-1;--u[r],u[t]+=Oi}u[t]-=p[t]}for(;0===u[--s];)u.pop();for(;0===u[0];u.shift())--e;return u[0]?(i.d=u,i.e=Es(u,e),Nt?Mt(i,c,l):i):new h(3===l?-0:0)},Pe.modulo=Pe.mod=function(i){var a,e=this,t=e.constructor;return i=new t(i),!e.d||!i.s||i.d&&!i.d[0]?new t(NaN):!i.d||e.d&&!e.d[0]?Mt(new t(e),t.precision,t.rounding):(Nt=!1,9==t.modulo?(a=bn(e,i.abs(),0,3,1)).s*=i.s:a=bn(e,i,0,t.modulo,1),a=a.times(i),Nt=!0,e.minus(a))},Pe.naturalExponential=Pe.exp=function(){return Il(this)},Pe.naturalLogarithm=Pe.ln=function(){return Pr(this)},Pe.negated=Pe.neg=function(){var i=new this.constructor(this);return i.s=-i.s,Mt(i)},Pe.plus=Pe.add=function(i){var a,e,t,r,o,s,c,l,u,d,f=this,p=f.constructor;if(i=new p(i),!f.d||!i.d)return f.s&&i.s?f.d||(i=new p(i.d||f.s===i.s?f:NaN)):i=new p(NaN),i;if(f.s!=i.s)return i.s=-i.s,f.minus(i);if(d=i.d,c=p.precision,l=p.rounding,!(u=f.d)[0]||!d[0])return d[0]||(i=new p(f)),Nt?Mt(i,c,l):i;if(o=ri(f.e/Dt),t=ri(i.e/Dt),u=u.slice(),r=o-t){for(r<0?(e=u,r=-r,s=d.length):(e=d,t=o,s=u.length),r>(s=(o=Math.ceil(c/Dt))>s?o+1:s+1)&&(r=s,e.length=1),e.reverse();r--;)e.push(0);e.reverse()}for((s=u.length)-(r=d.length)<0&&(r=s,e=d,d=u,u=e),a=0;r;)a=(u[--r]=u[r]+d[r]+a)/Oi|0,u[r]%=Oi;for(a&&(u.unshift(a),++t),s=u.length;0==u[--s];)u.pop();return i.d=u,i.e=Es(u,t),Nt?Mt(i,c,l):i},Pe.precision=Pe.sd=function(i){var a,e=this;if(void 0!==i&&i!==!!i&&1!==i&&0!==i)throw Error(jr+i);return e.d?(a=Wp(e.d),i&&e.e+1>a&&(a=e.e+1)):a=NaN,a},Pe.round=function(){var i=this,a=i.constructor;return Mt(new a(i),i.e+1,a.rounding)},Pe.sine=Pe.sin=function(){var i,a,e=this,t=e.constructor;return e.isFinite()?e.isZero()?new t(e):(a=t.rounding,t.precision=(i=t.precision)+Math.max(e.e,e.sd())+Dt,t.rounding=1,e=function sw(i,a){var e,t=a.d.length;if(t<3)return a.isZero()?a:Oo(i,2,a,a);e=1.4*Math.sqrt(t),a=Oo(i,2,a=a.times(1/Fs(5,e=e>16?16:0|e)),a);for(var r,o=new i(5),s=new i(16),c=new i(20);e--;)r=a.times(a),a=a.times(o.plus(r.times(s.times(r).minus(c))));return a}(t,Jp(t,e)),t.precision=i,t.rounding=a,Mt(gr>2?e.neg():e,i,a,!0)):new t(NaN)},Pe.squareRoot=Pe.sqrt=function(){var i,a,e,t,r,o,s=this,c=s.d,l=s.e,u=s.s,d=s.constructor;if(1!==u||!c||!c[0])return new d(!u||u<0&&(!c||c[0])?NaN:c?s:1/0);for(Nt=!1,0==(u=Math.sqrt(+s))||u==1/0?(((a=Yn(c)).length+l)%2==0&&(a+="0"),u=Math.sqrt(a),l=ri((l+1)/2)-(l<0||l%2),t=new d(a=u==1/0?"5e"+l:(a=u.toExponential()).slice(0,a.indexOf("e")+1)+l)):t=new d(u.toString()),e=(l=d.precision)+3;;)if(t=(o=t).plus(bn(s,o,e+2,1)).times(.5),Yn(o.d).slice(0,e)===(a=Yn(t.d)).slice(0,e)){if("9999"!=(a=a.slice(e-3,e+1))&&(r||"4999"!=a)){(!+a||!+a.slice(1)&&"5"==a.charAt(0))&&(Mt(t,l+1,1),i=!t.times(t).eq(s));break}if(!r&&(Mt(o,l+1,0),o.times(o).eq(s))){t=o;break}e+=4,r=1}return Nt=!0,Mt(t,l,d.rounding,i)},Pe.tangent=Pe.tan=function(){var i,a,e=this,t=e.constructor;return e.isFinite()?e.isZero()?new t(e):(a=t.rounding,t.precision=(i=t.precision)+10,t.rounding=1,(e=e.sin()).s=1,e=bn(e,new t(1).minus(e.times(e)).sqrt(),i+10,0),t.precision=i,t.rounding=a,Mt(2==gr||4==gr?e.neg():e,i,a,!0)):new t(NaN)},Pe.times=Pe.mul=function(i){var a,e,t,r,o,s,c,l,u,d=this,f=d.constructor,p=d.d,m=(i=new f(i)).d;if(i.s*=d.s,!(p&&p[0]&&m&&m[0]))return new f(!i.s||p&&!p[0]&&!m||m&&!m[0]&&!p?NaN:p&&m?0*i.s:i.s/0);for(e=ri(d.e/Dt)+ri(i.e/Dt),(l=p.length)<(u=m.length)&&(o=p,p=m,m=o,s=l,l=u,u=s),o=[],t=s=l+u;t--;)o.push(0);for(t=u;--t>=0;){for(a=0,r=l+t;r>t;)c=o[r]+m[t]*p[r-t-1]+a,o[r--]=c%Oi|0,a=c/Oi|0;o[r]=(o[r]+a)%Oi|0}for(;!o[--s];)o.pop();return a?++e:o.shift(),i.d=o,i.e=Es(o,e),Nt?Mt(i,f.precision,f.rounding):i},Pe.toBinary=function(i,a){return Tl(this,2,i,a)},Pe.toDecimalPlaces=Pe.toDP=function(i,a){var e=this,t=e.constructor;return e=new t(e),void 0===i?e:(fi(i,0,Rr),void 0===a?a=t.rounding:fi(a,0,8),Mt(e,i+e.e+1,a))},Pe.toExponential=function(i,a){var e,t=this,r=t.constructor;return void 0===i?e=Qi(t,!0):(fi(i,0,Rr),void 0===a?a=r.rounding:fi(a,0,8),e=Qi(t=Mt(new r(t),i+1,a),!0,i+1)),t.isNeg()&&!t.isZero()?"-"+e:e},Pe.toFixed=function(i,a){var e,t,r=this,o=r.constructor;return void 0===i?e=Qi(r):(fi(i,0,Rr),void 0===a?a=o.rounding:fi(a,0,8),e=Qi(t=Mt(new o(r),i+r.e+1,a),!1,i+t.e+1)),r.isNeg()&&!r.isZero()?"-"+e:e},Pe.toFraction=function(i){var a,e,t,r,o,s,c,l,u,d,f,p,m=this,h=m.d,g=m.constructor;if(!h)return new g(m);if(u=e=new g(1),t=l=new g(0),o=(a=new g(t)).e=Wp(h)-m.e-1,a.d[0]=Gn(10,(s=o%Dt)<0?Dt+s:s),null==i)i=o>0?a:u;else{if(!(c=new g(i)).isInt()||c.lt(u))throw Error(jr+c);i=c.gt(a)?o>0?a:u:c}for(Nt=!1,c=new g(Yn(h)),d=g.precision,g.precision=o=h.length*Dt*2;f=bn(c,a,0,1,1),1!=(r=e.plus(f.times(t))).cmp(i);)e=t,t=r,u=l.plus(f.times(r=u)),l=r,a=c.minus(f.times(r=a)),c=r;return r=bn(i.minus(e),t,0,1,1),l=l.plus(r.times(u)),e=e.plus(r.times(t)),l.s=u.s=m.s,p=bn(u,t,o,1).minus(m).abs().cmp(bn(l,e,o,1).minus(m).abs())<1?[u,t]:[l,e],g.precision=d,Nt=!0,p},Pe.toHexadecimal=Pe.toHex=function(i,a){return Tl(this,16,i,a)},Pe.toNearest=function(i,a){var e=this,t=e.constructor;if(e=new t(e),null==i){if(!e.d)return e;i=new t(1),a=t.rounding}else{if(i=new t(i),void 0===a?a=t.rounding:fi(a,0,8),!e.d)return i.s?e:i;if(!i.d)return i.s&&(i.s=e.s),i}return i.d[0]?(Nt=!1,e=bn(e,i,0,a,1).times(i),Nt=!0,Mt(e)):(i.s=e.s,e=i),e},Pe.toNumber=function(){return+this},Pe.toOctal=function(i,a){return Tl(this,8,i,a)},Pe.toPower=Pe.pow=function(i){var a,e,t,r,o,s,c=this,l=c.constructor,u=+(i=new l(i));if(!(c.d&&i.d&&c.d[0]&&i.d[0]))return new l(Gn(+c,u));if((c=new l(c)).eq(1))return c;if(t=l.precision,o=l.rounding,i.eq(1))return Mt(c,t,o);if((a=ri(i.e/Dt))>=i.d.length-1&&(e=u<0?-u:u)<=9007199254740991)return r=Kp(l,c,e,t),i.s<0?new l(1).div(r):Mt(r,t,o);if((s=c.s)<0){if(a<i.d.length-1)return new l(NaN);if(1&i.d[a]||(s=1),0==c.e&&1==c.d[0]&&1==c.d.length)return c.s=s,c}return(a=0!=(e=Gn(+c,u))&&isFinite(e)?new l(e+"").e:ri(u*(Math.log("0."+Yn(c.d))/Math.LN10+c.e+1)))>l.maxE+1||a<l.minE-1?new l(a>0?s/0:0):(Nt=!1,l.rounding=c.s=1,e=Math.min(12,(a+"").length),(r=Il(i.times(Pr(c,t+e)),t)).d&&Oa((r=Mt(r,t+5,1)).d,t,o)&&+Yn((r=Mt(Il(i.times(Pr(c,(a=t+10)+e)),a),a+5,1)).d).slice(t+1,t+15)+1==1e14&&(r=Mt(r,t+1,0)),r.s=s,Nt=!0,l.rounding=o,Mt(r,t,o))},Pe.toPrecision=function(i,a){var e,t=this,r=t.constructor;return void 0===i?e=Qi(t,t.e<=r.toExpNeg||t.e>=r.toExpPos):(fi(i,1,Rr),void 0===a?a=r.rounding:fi(a,0,8),e=Qi(t=Mt(new r(t),i,a),i<=t.e||t.e<=r.toExpNeg,i)),t.isNeg()&&!t.isZero()?"-"+e:e},Pe.toSignificantDigits=Pe.toSD=function(i,a){var t=this.constructor;return void 0===i?(i=t.precision,a=t.rounding):(fi(i,1,Rr),void 0===a?a=t.rounding:fi(a,0,8)),Mt(new t(this),i,a)},Pe.toString=function(){var i=this,a=i.constructor,e=Qi(i,i.e<=a.toExpNeg||i.e>=a.toExpPos);return i.isNeg()&&!i.isZero()?"-"+e:e},Pe.truncated=Pe.trunc=function(){return Mt(new this.constructor(this),this.e+1,1)},Pe.valueOf=Pe.toJSON=function(){var i=this,a=i.constructor,e=Qi(i,i.e<=a.toExpNeg||i.e>=a.toExpPos);return i.isNeg()?"-"+e:e};var bn=function(){function i(t,r,o){var s,c=0,l=t.length;for(t=t.slice();l--;)t[l]=(s=t[l]*r+c)%o|0,c=s/o|0;return c&&t.unshift(c),t}function a(t,r,o,s){var c,l;if(o!=s)l=o>s?1:-1;else for(c=l=0;c<o;c++)if(t[c]!=r[c]){l=t[c]>r[c]?1:-1;break}return l}function e(t,r,o,s){for(var c=0;o--;)t[o]-=c,t[o]=(c=t[o]<r[o]?1:0)*s+t[o]-r[o];for(;!t[0]&&t.length>1;)t.shift()}return function(t,r,o,s,c,l){var u,d,f,p,m,h,g,b,_,D,y,w,E,C,T,N,O,x,j,P,W=t.constructor,Q=t.s==r.s?1:-1,ee=t.d,J=r.d;if(!(ee&&ee[0]&&J&&J[0]))return new W(t.s&&r.s&&(ee?!J||ee[0]!=J[0]:J)?ee&&0==ee[0]||!J?0*Q:Q/0:NaN);for(l?(m=1,d=t.e-r.e):(l=Oi,d=ri(t.e/(m=Dt))-ri(r.e/m)),j=J.length,O=ee.length,D=(_=new W(Q)).d=[],f=0;J[f]==(ee[f]||0);f++);if(J[f]>(ee[f]||0)&&d--,null==o?(C=o=W.precision,s=W.rounding):C=c?o+(t.e-r.e)+1:o,C<0)D.push(1),h=!0;else{if(C=C/m+2|0,f=0,1==j){for(p=0,J=J[0],C++;(f<O||p)&&C--;f++)D[f]=(T=p*l+(ee[f]||0))/J|0,p=T%J|0;h=p||f<O}else{for((p=l/(J[0]+1)|0)>1&&(J=i(J,p,l),ee=i(ee,p,l),j=J.length,O=ee.length),N=j,w=(y=ee.slice(0,j)).length;w<j;)y[w++]=0;(P=J.slice()).unshift(0),x=J[0],J[1]>=l/2&&++x;do{p=0,(u=a(J,y,j,w))<0?(E=y[0],j!=w&&(E=E*l+(y[1]||0)),(p=E/x|0)>1?(p>=l&&(p=l-1),1==(u=a(g=i(J,p,l),y,b=g.length,w=y.length))&&(p--,e(g,j<b?P:J,b,l))):(0==p&&(u=p=1),g=J.slice()),(b=g.length)<w&&g.unshift(0),e(y,g,w,l),-1==u&&(u=a(J,y,j,w=y.length))<1&&(p++,e(y,j<w?P:J,w,l)),w=y.length):0===u&&(p++,y=[0]),D[f++]=p,u&&y[0]?y[w++]=ee[N]||0:(y=[ee[N]],w=1)}while((N++<O||void 0!==y[0])&&C--);h=void 0!==y[0]}D[0]||D.shift()}if(1==m)_.e=d,$p=h;else{for(f=1,p=D[0];p>=10;p/=10)f++;_.e=f+d*m-1,Mt(_,c?o+_.e+1:o,s,h)}return _}}();function Mt(i,a,e,t){var r,o,s,c,l,u,d,f,p,m=i.constructor;e:if(null!=a){if(!(f=i.d))return i;for(r=1,c=f[0];c>=10;c/=10)r++;if((o=a-r)<0)o+=Dt,l=(d=f[p=0])/Gn(10,r-(s=a)-1)%10|0;else if((p=Math.ceil((o+1)/Dt))>=(c=f.length)){if(!t)break e;for(;c++<=p;)f.push(0);d=l=0,r=1,s=(o%=Dt)-Dt+1}else{for(d=c=f[p],r=1;c>=10;c/=10)r++;l=(s=(o%=Dt)-Dt+r)<0?0:d/Gn(10,r-s-1)%10|0}if(t=t||a<0||void 0!==f[p+1]||(s<0?d:d%Gn(10,r-s-1)),u=e<4?(l||t)&&(0==e||e==(i.s<0?3:2)):l>5||5==l&&(4==e||t||6==e&&(o>0?s>0?d/Gn(10,r-s):0:f[p-1])%10&1||e==(i.s<0?8:7)),a<1||!f[0])return f.length=0,u?(f[0]=Gn(10,(Dt-(a-=i.e+1)%Dt)%Dt),i.e=-a||0):f[0]=i.e=0,i;if(0==o?(f.length=p,c=1,p--):(f.length=p+1,c=Gn(10,Dt-o),f[p]=s>0?(d/Gn(10,r-s)%Gn(10,s)|0)*c:0),u)for(;;){if(0==p){for(o=1,s=f[0];s>=10;s/=10)o++;for(s=f[0]+=c,c=1;s>=10;s/=10)c++;o!=c&&(i.e++,f[0]==Oi&&(f[0]=1));break}if(f[p]+=c,f[p]!=Oi)break;f[p--]=0,c=1}for(o=f.length;0===f[--o];)f.pop()}return Nt&&(i.e>m.maxE?(i.d=null,i.e=NaN):i.e<m.minE&&(i.e=0,i.d=[0])),i}function Qi(i,a,e){if(!i.isFinite())return qp(i);var t,r=i.e,o=Yn(i.d),s=o.length;return a?(e&&(t=e-s)>0?o=o.charAt(0)+"."+o.slice(1)+kr(t):s>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(i.e<0?"e":"e+")+i.e):r<0?(o="0."+kr(-r-1)+o,e&&(t=e-s)>0&&(o+=kr(t))):r>=s?(o+=kr(r+1-s),e&&(t=e-r-1)>0&&(o=o+"."+kr(t))):((t=r+1)<s&&(o=o.slice(0,t)+"."+o.slice(t)),e&&(t=e-s)>0&&(r+1===s&&(o+="."),o+=kr(t))),o}function Es(i,a){var e=i[0];for(a*=Dt;e>=10;e/=10)a++;return a}function xs(i,a,e){if(a>rw)throw Nt=!0,e&&(i.precision=e),Error(Up);return Mt(new i(Ms),a,1,!0)}function Bi(i,a,e){if(a>Fl)throw Error(Up);return Mt(new i(Ss),a,e,!0)}function Wp(i){var a=i.length-1,e=a*Dt+1;if(a=i[a]){for(;a%10==0;a/=10)e--;for(a=i[0];a>=10;a/=10)e++}return e}function kr(i){for(var a="";i--;)a+="0";return a}function Kp(i,a,e,t){var r,o=new i(1),s=Math.ceil(t/Dt+4);for(Nt=!1;;){if(e%2&&Qp((o=o.times(a)).d,s)&&(r=!0),0===(e=ri(e/2))){e=o.d.length-1,r&&0===o.d[e]&&++o.d[e];break}Qp((a=a.times(a)).d,s)}return Nt=!0,o}function Hp(i){return 1&i.d[i.d.length-1]}function Zp(i,a,e){for(var t,r=new i(a[0]),o=0;++o<a.length;){if(!(t=new i(a[o])).s){r=t;break}r[e](t)&&(r=t)}return r}function Il(i,a){var e,t,r,o,s,c,l,u=0,d=0,f=0,p=i.constructor,m=p.rounding,h=p.precision;if(!i.d||!i.d[0]||i.e>17)return new p(i.d?i.d[0]?i.s<0?0:1/0:1:i.s?i.s<0?0:i:NaN);for(null==a?(Nt=!1,l=h):l=a,c=new p(.03125);i.e>-2;)i=i.times(c),f+=5;for(l+=t=Math.log(Gn(2,f))/Math.LN10*2+5|0,e=o=s=new p(1),p.precision=l;;){if(o=Mt(o.times(i),l,1),e=e.times(++d),Yn((c=s.plus(bn(o,e,l,1))).d).slice(0,l)===Yn(s.d).slice(0,l)){for(r=f;r--;)s=Mt(s.times(s),l,1);if(null!=a)return p.precision=h,s;if(!(u<3&&Oa(s.d,l-t,m,u)))return Mt(s,p.precision=h,m,Nt=!0);p.precision=l+=10,e=o=c=new p(1),d=0,u++}s=c}}function Pr(i,a){var e,t,r,o,s,c,l,u,d,f,p,m=1,g=i,b=g.d,_=g.constructor,D=_.rounding,y=_.precision;if(g.s<0||!b||!b[0]||!g.e&&1==b[0]&&1==b.length)return new _(b&&!b[0]?-1/0:1!=g.s?NaN:b?0:g);if(null==a?(Nt=!1,d=y):d=a,_.precision=d+=10,t=(e=Yn(b)).charAt(0),!(Math.abs(o=g.e)<15e14))return u=xs(_,d+2,y).times(o+""),g=Pr(new _(t+"."+e.slice(1)),d-10).plus(u),_.precision=y,null==a?Mt(g,y,D,Nt=!0):g;for(;t<7&&1!=t||1==t&&e.charAt(1)>3;)t=(e=Yn((g=g.times(i)).d)).charAt(0),m++;for(o=g.e,t>1?(g=new _("0."+e),o++):g=new _(t+"."+e.slice(1)),f=g,l=s=g=bn(g.minus(1),g.plus(1),d,1),p=Mt(g.times(g),d,1),r=3;;){if(s=Mt(s.times(p),d,1),Yn((u=l.plus(bn(s,new _(r),d,1))).d).slice(0,d)===Yn(l.d).slice(0,d)){if(l=l.times(2),0!==o&&(l=l.plus(xs(_,d+2,y).times(o+""))),l=bn(l,new _(m),d,1),null!=a)return _.precision=y,l;if(!Oa(l.d,d-10,D,c))return Mt(l,_.precision=y,D,Nt=!0);_.precision=d+=10,u=s=g=bn(f.minus(1),f.plus(1),d,1),p=Mt(g.times(g),d,1),r=c=1}l=u,r+=2}}function qp(i){return String(i.s*i.s/0)}function Al(i,a){var e,t,r;for((e=a.indexOf("."))>-1&&(a=a.replace(".","")),(t=a.search(/e/i))>0?(e<0&&(e=t),e+=+a.slice(t+1),a=a.substring(0,t)):e<0&&(e=a.length),t=0;48===a.charCodeAt(t);t++);for(r=a.length;48===a.charCodeAt(r-1);--r);if(a=a.slice(t,r)){if(r-=t,i.e=e=e-t-1,i.d=[],t=(e+1)%Dt,e<0&&(t+=Dt),t<r){for(t&&i.d.push(+a.slice(0,t)),r-=Dt;t<r;)i.d.push(+a.slice(t,t+=Dt));a=a.slice(t),t=Dt-a.length}else t-=r;for(;t--;)a+="0";i.d.push(+a),Nt&&(i.e>i.constructor.maxE?(i.d=null,i.e=NaN):i.e<i.constructor.minE&&(i.e=0,i.d=[0]))}else i.e=0,i.d=[0];return i}function Oo(i,a,e,t,r){var o,s,c,l,d=i.precision,f=Math.ceil(d/Dt);for(Nt=!1,l=e.times(e),c=new i(t);;){if(s=bn(c.times(l),new i(a++*a++),d,1),c=r?t.plus(s):t.minus(s),t=bn(s.times(l),new i(a++*a++),d,1),void 0!==(s=c.plus(t)).d[f]){for(o=f;s.d[o]===c.d[o]&&o--;);if(-1==o)break}o=c,c=t,t=s,s=o}return Nt=!0,s.d.length=f+1,s}function Fs(i,a){for(var e=i;--a;)e*=i;return e}function Jp(i,a){var e,t=a.s<0,r=Bi(i,i.precision,1),o=r.times(.5);if((a=a.abs()).lte(o))return gr=t?4:1,a;if((e=a.divToInt(r)).isZero())gr=t?3:2;else{if((a=a.minus(e.times(r))).lte(o))return gr=Hp(e)?t?2:3:t?4:1,a;gr=Hp(e)?t?1:4:t?3:2}return a.minus(r).abs()}function Tl(i,a,e,t){var r,o,s,c,l,u,d,f,p,m=i.constructor,h=void 0!==e;if(h?(fi(e,1,Rr),void 0===t?t=m.rounding:fi(t,0,8)):(e=m.precision,t=m.rounding),i.isFinite()){for(h?(r=2,16==a?e=4*e-3:8==a&&(e=3*e-2)):r=a,(s=(d=Qi(i)).indexOf("."))>=0&&(d=d.replace(".",""),(p=new m(1)).e=d.length-s,p.d=ws(Qi(p),10,r),p.e=p.d.length),o=l=(f=ws(d,10,r)).length;0==f[--l];)f.pop();if(f[0]){if(s<0?o--:((i=new m(i)).d=f,i.e=o,f=(i=bn(i,p,e,t,0,r)).d,o=i.e,u=$p),s=f[e],c=r/2,u=u||void 0!==f[e+1],u=t<4?(void 0!==s||u)&&(0===t||t===(i.s<0?3:2)):s>c||s===c&&(4===t||u||6===t&&1&f[e-1]||t===(i.s<0?8:7)),f.length=e,u)for(;++f[--e]>r-1;)f[e]=0,e||(++o,f.unshift(1));for(l=f.length;!f[l-1];--l);for(s=0,d="";s<l;s++)d+=El.charAt(f[s]);if(h){if(l>1)if(16==a||8==a){for(s=16==a?4:3,--l;l%s;l++)d+="0";for(l=(f=ws(d,r,a)).length;!f[l-1];--l);for(s=1,d="1.";s<l;s++)d+=El.charAt(f[s])}else d=d.charAt(0)+"."+d.slice(1);d=d+(o<0?"p":"p+")+o}else if(o<0){for(;++o;)d="0"+d;d="0."+d}else if(++o>l)for(o-=l;o--;)d+="0";else o<l&&(d=d.slice(0,o)+"."+d.slice(o))}else d=h?"0p+0":"0";d=(16==a?"0x":2==a?"0b":8==a?"0o":"")+d}else d=qp(i);return i.s<0?"-"+d:d}function Qp(i,a){if(i.length>a)return i.length=a,!0}function cw(i){return new this(i).abs()}function lw(i){return new this(i).acos()}function uw(i){return new this(i).acosh()}function dw(i,a){return new this(i).plus(a)}function fw(i){return new this(i).asin()}function pw(i){return new this(i).asinh()}function mw(i){return new this(i).atan()}function gw(i){return new this(i).atanh()}function hw(i,a){i=new this(i),a=new this(a);var e,t=this.precision,r=this.rounding,o=t+4;return i.s&&a.s?i.d||a.d?!a.d||i.isZero()?(e=a.s<0?Bi(this,t,r):new this(0)).s=i.s:!i.d||a.isZero()?(e=Bi(this,o,1).times(.5)).s=i.s:a.s<0?(this.precision=o,this.rounding=1,e=this.atan(bn(i,a,o,1)),a=Bi(this,o,1),this.precision=t,this.rounding=r,e=i.s<0?e.minus(a):e.plus(a)):e=this.atan(bn(i,a,o,1)):(e=Bi(this,o,1).times(a.s>0?.25:.75)).s=i.s:e=new this(NaN),e}function vw(i){return new this(i).cbrt()}function _w(i){return Mt(i=new this(i),i.e+1,2)}function yw(i,a,e){return new this(i).clamp(a,e)}function bw(i){if(!i||"object"!=typeof i)throw Error(Ds+"Object expected");var a,e,t,r=!0===i.defaults,o=["precision",1,Rr,"rounding",0,8,"toExpNeg",-Lo,0,"toExpPos",0,Lo,"maxE",0,Lo,"minE",-Lo,0,"modulo",0,9];for(a=0;a<o.length;a+=3)if(e=o[a],r&&(this[e]=xl[e]),void 0!==(t=i[e])){if(!(ri(t)===t&&t>=o[a+1]&&t<=o[a+2]))throw Error(jr+e+": "+t);this[e]=t}if(e="crypto",r&&(this[e]=xl[e]),void 0!==(t=i[e])){if(!0!==t&&!1!==t&&0!==t&&1!==t)throw Error(jr+e+": "+t);if(t){if(!(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes)))throw Error(Vp);this[e]=!0}else this[e]=!1}return this}function Cw(i){return new this(i).cos()}function Mw(i){return new this(i).cosh()}function Sw(i,a){return new this(i).div(a)}function Dw(i){return new this(i).exp()}function ww(i){return Mt(i=new this(i),i.e+1,3)}function Ew(){var i,a,e=new this(0);for(Nt=!1,i=0;i<arguments.length;)if((a=new this(arguments[i++])).d)e.d&&(e=e.plus(a.times(a)));else{if(a.s)return Nt=!0,new this(1/0);e=a}return Nt=!0,e.sqrt()}function Yp(i){return i instanceof Ba||i&&i.toStringTag===zp||!1}function xw(i){return new this(i).ln()}function Fw(i,a){return new this(i).log(a)}function Iw(i){return new this(i).log(2)}function Aw(i){return new this(i).log(10)}function Tw(){return Zp(this,arguments,"lt")}function Nw(){return Zp(this,arguments,"gt")}function Lw(i,a){return new this(i).mod(a)}function Ow(i,a){return new this(i).mul(a)}function Bw(i,a){return new this(i).pow(a)}function Rw(i){var a,e,t,r,o=0,s=new this(1),c=[];if(void 0===i?i=this.precision:fi(i,1,Rr),t=Math.ceil(i/Dt),this.crypto)if(crypto.getRandomValues)for(a=crypto.getRandomValues(new Uint32Array(t));o<t;)(r=a[o])>=429e7?a[o]=crypto.getRandomValues(new Uint32Array(1))[0]:c[o++]=r%1e7;else{if(!crypto.randomBytes)throw Error(Vp);for(a=crypto.randomBytes(t*=4);o<t;)(r=a[o]+(a[o+1]<<8)+(a[o+2]<<16)+((127&a[o+3])<<24))>=214e7?crypto.randomBytes(4).copy(a,o):(c.push(r%1e7),o+=4);o=t/4}else for(;o<t;)c[o++]=1e7*Math.random()|0;for(t=c[--o],i%=Dt,t&&i&&(r=Gn(10,Dt-i),c[o]=(t/r|0)*r);0===c[o];o--)c.pop();if(o<0)e=0,c=[0];else{for(e=-1;0===c[0];e-=Dt)c.shift();for(t=1,r=c[0];r>=10;r/=10)t++;t<Dt&&(e-=Dt-t)}return s.e=e,s.d=c,s}function jw(i){return Mt(i=new this(i),i.e+1,this.rounding)}function kw(i){return(i=new this(i)).d?i.d[0]?i.s:0*i.s:i.s||NaN}function Pw(i){return new this(i).sin()}function $w(i){return new this(i).sinh()}function Uw(i){return new this(i).sqrt()}function Vw(i,a){return new this(i).sub(a)}function zw(){var i=0,a=arguments,e=new this(a[i]);for(Nt=!1;e.s&&++i<a.length;)e=e.plus(a[i]);return Nt=!0,Mt(e,this.precision,this.rounding)}function Gw(i){return new this(i).tan()}function Ww(i){return new this(i).tanh()}function Kw(i){return Mt(i=new this(i),i.e+1,1)}Pe[Symbol.for("nodejs.util.inspect.custom")]=Pe.toString,Pe[Symbol.toStringTag]="Decimal";var Ba=Pe.constructor=function Xp(i){var a,e,t;function r(o){var s,c,l,u=this;if(!(u instanceof r))return new r(o);if(u.constructor=r,Yp(o))return u.s=o.s,void(Nt?!o.d||o.e>r.maxE?(u.e=NaN,u.d=null):o.e<r.minE?(u.e=0,u.d=[0]):(u.e=o.e,u.d=o.d.slice()):(u.e=o.e,u.d=o.d?o.d.slice():o.d));if("number"==(l=typeof o)){if(0===o)return u.s=1/o<0?-1:1,u.e=0,void(u.d=[0]);if(o<0?(o=-o,u.s=-1):u.s=1,o===~~o&&o<1e7){for(s=0,c=o;c>=10;c/=10)s++;return void(Nt?s>r.maxE?(u.e=NaN,u.d=null):s<r.minE?(u.e=0,u.d=[0]):(u.e=s,u.d=[o]):(u.e=s,u.d=[o]))}return 0*o!=0?(o||(u.s=NaN),u.e=NaN,void(u.d=null)):Al(u,o.toString())}if("string"!==l)throw Error(jr+o);return 45===(c=o.charCodeAt(0))?(o=o.slice(1),u.s=-1):(43===c&&(o=o.slice(1)),u.s=1),Gp.test(o)?Al(u,o):function aw(i,a){var e,t,r,o,s,c,l,u,d;if(a.indexOf("_")>-1){if(a=a.replace(/(\d)_(?=\d)/g,"$1"),Gp.test(a))return Al(i,a)}else if("Infinity"===a||"NaN"===a)return+a||(i.s=NaN),i.e=NaN,i.d=null,i;if(tw.test(a))e=16,a=a.toLowerCase();else if(ew.test(a))e=2;else{if(!nw.test(a))throw Error(jr+a);e=8}for((o=a.search(/p/i))>0?(l=+a.slice(o+1),a=a.substring(2,o)):a=a.slice(2),o=a.indexOf("."),t=i.constructor,(s=o>=0)&&(o=(c=(a=a.replace(".","")).length)-o,r=Kp(t,new t(e),o,2*o)),o=d=(u=ws(a,e,Oi)).length-1;0===u[o];--o)u.pop();return o<0?new t(0*i.s):(i.e=Es(u,d),i.d=u,Nt=!1,s&&(i=bn(i,r,4*c)),l&&(i=i.times(Math.abs(l)<54?Gn(2,l):Ba.pow(2,l))),Nt=!0,i)}(u,o)}if(r.prototype=Pe,r.ROUND_UP=0,r.ROUND_DOWN=1,r.ROUND_CEIL=2,r.ROUND_FLOOR=3,r.ROUND_HALF_UP=4,r.ROUND_HALF_DOWN=5,r.ROUND_HALF_EVEN=6,r.ROUND_HALF_CEIL=7,r.ROUND_HALF_FLOOR=8,r.EUCLID=9,r.config=r.set=bw,r.clone=Xp,r.isDecimal=Yp,r.abs=cw,r.acos=lw,r.acosh=uw,r.add=dw,r.asin=fw,r.asinh=pw,r.atan=mw,r.atanh=gw,r.atan2=hw,r.cbrt=vw,r.ceil=_w,r.clamp=yw,r.cos=Cw,r.cosh=Mw,r.div=Sw,r.exp=Dw,r.floor=ww,r.hypot=Ew,r.ln=xw,r.log=Fw,r.log10=Aw,r.log2=Iw,r.max=Tw,r.min=Nw,r.mod=Lw,r.mul=Ow,r.pow=Bw,r.random=Rw,r.round=jw,r.sign=kw,r.sin=Pw,r.sinh=$w,r.sqrt=Uw,r.sub=Vw,r.sum=zw,r.tan=Gw,r.tanh=Ww,r.trunc=Kw,void 0===i&&(i={}),i&&!0!==i.defaults)for(t=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],a=0;a<t.length;)i.hasOwnProperty(e=t[a++])||(i[e]=this[e]);return r.config(i),r}(xl);Ms=new Ba(Ms),Ss=new Ba(Ss);const Is=Ba;function Jt(i){return"number"==typeof i}function tn(i){return!(!i||"object"!=typeof i||"function"!=typeof i.constructor)&&(!0===i.isBigNumber&&"object"==typeof i.constructor.prototype&&!0===i.constructor.prototype.isBigNumber||"function"==typeof i.constructor.isDecimal&&!0===i.constructor.isDecimal(i))}function $r(i){return i&&"object"==typeof i&&!0===Object.getPrototypeOf(i).isComplex||!1}function As(i){return i&&"object"==typeof i&&!0===Object.getPrototypeOf(i).isFraction||!1}function Ri(i){return i&&!0===i.constructor.prototype.isUnit||!1}function si(i){return"string"==typeof i}var an=Array.isArray;function Et(i){return i&&!0===i.constructor.prototype.isMatrix||!1}function Bo(i){return Array.isArray(i)||Et(i)}function Ts(i){return i&&i.isDenseMatrix&&!0===i.constructor.prototype.isMatrix||!1}function ro(i){return i&&i.isSparseMatrix&&!0===i.constructor.prototype.isMatrix||!1}function em(i){return i&&!0===i.constructor.prototype.isRange||!1}function Ns(i){return i&&!0===i.constructor.prototype.isIndex||!1}function Hw(i){return"boolean"==typeof i}function Zw(i){return i&&!0===i.constructor.prototype.isResultSet||!1}function qw(i){return i&&!0===i.constructor.prototype.isHelp||!1}function Jw(i){return"function"==typeof i}function Qw(i){return i instanceof Date}function Xw(i){return i instanceof RegExp}function tm(i){return!(!i||"object"!=typeof i||i.constructor!==Object||$r(i)||As(i))}function Yw(i){return null===i}function eE(i){return void 0===i}function tE(i){return i&&!0===i.isAccessorNode&&!0===i.constructor.prototype.isNode||!1}function nE(i){return i&&!0===i.isArrayNode&&!0===i.constructor.prototype.isNode||!1}function iE(i){return i&&!0===i.isAssignmentNode&&!0===i.constructor.prototype.isNode||!1}function rE(i){return i&&!0===i.isBlockNode&&!0===i.constructor.prototype.isNode||!1}function oE(i){return i&&!0===i.isConditionalNode&&!0===i.constructor.prototype.isNode||!1}function Nl(i){return i&&!0===i.isConstantNode&&!0===i.constructor.prototype.isNode||!1}function aE(i){return i&&!0===i.isFunctionAssignmentNode&&!0===i.constructor.prototype.isNode||!1}function sE(i){return i&&!0===i.isFunctionNode&&!0===i.constructor.prototype.isNode||!1}function cE(i){return i&&!0===i.isIndexNode&&!0===i.constructor.prototype.isNode||!1}function lE(i){return i&&!0===i.isNode&&!0===i.constructor.prototype.isNode||!1}function uE(i){return i&&!0===i.isObjectNode&&!0===i.constructor.prototype.isNode||!1}function nm(i){return i&&!0===i.isOperatorNode&&!0===i.constructor.prototype.isNode||!1}function dE(i){return i&&!0===i.isParenthesisNode&&!0===i.constructor.prototype.isNode||!1}function fE(i){return i&&!0===i.isRangeNode&&!0===i.constructor.prototype.isNode||!1}function pE(i){return i&&!0===i.isRelationalNode&&!0===i.constructor.prototype.isNode||!1}function mE(i){return i&&!0===i.isSymbolNode&&!0===i.constructor.prototype.isNode||!1}function gE(i){return i&&!0===i.constructor.prototype.isChain||!1}function Ln(i){var a=typeof i;return"object"===a?null===i?"null":tn(i)?"BigNumber":i.constructor&&i.constructor.name?i.constructor.name:"Object":a}function xt(i){var a=typeof i;if("number"===a||"string"===a||"boolean"===a||null==i)return i;if("function"==typeof i.clone)return i.clone();if(Array.isArray(i))return i.map(function(e){return xt(e)});if(i instanceof Date)return new Date(i.valueOf());if(tn(i))return i;if(tm(i))return function hE(i,a){var e={};for(var t in i)dn(i,t)&&(e[t]=a(i[t]));return e}(i,xt);throw new TypeError("Cannot clone: unknown type of value (value: ".concat(i,")"))}function Ro(i,a){var e,t,r;if(Array.isArray(i)){if(!Array.isArray(a)||i.length!==a.length)return!1;for(t=0,r=i.length;t<r;t++)if(!Ro(i[t],a[t]))return!1;return!0}if("function"==typeof i)return i===a;if(i instanceof Object){if(Array.isArray(a)||!(a instanceof Object))return!1;for(e in i)if(!(e in a)||!Ro(i[e],a[e]))return!1;for(e in a)if(!(e in i))return!1;return!0}return i===a}function dn(i,a){return i&&Object.hasOwnProperty.call(i,a)}function q(i,a,e,t){function r(o){var s=function yE(i,a){for(var e={},t=0;t<a.length;t++){var r=a[t],o=i[r];void 0!==o&&(e[r]=o)}return e}(o,a.map(SE));return function CE(i,a,e){var t=a.filter(o=>!function ME(i){return i&&"?"===i[0]}(o)).every(o=>void 0!==e[o]);if(!t){var r=a.filter(o=>void 0===e[o]);throw new Error('Cannot create function "'.concat(i,'", ')+"some dependencies are missing: ".concat(r.map(o=>'"'.concat(o,'"')).join(", "),"."))}}(i,a,o),e(s)}return r.isFactory=!0,r.fn=i,r.dependencies=a.slice().sort(),t&&(r.meta=t),r}function SE(i){return i&&"?"===i[0]?i.slice(1):i}var EE=q("BigNumber",["?on","config"],i=>{var{on:a,config:e}=i,t=Is.clone({precision:e.precision,modulo:Is.EUCLID});return t.prototype=Object.create(t.prototype),t.prototype.type="BigNumber",t.prototype.isBigNumber=!0,t.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},t.fromJSON=function(r){return new t(r.value)},a&&a("config",function(r,o){r.precision!==o.precision&&t.config({precision:r.precision})}),t},{isClass:!0}),ei=L(1241);function ht(i){return"boolean"==typeof i||!!isFinite(i)&&i===Math.round(i)}Math,Math,Math,Math,Math,Math;function Ol(i,a,e){var r={2:"0b",8:"0o",16:"0x"}[a],o="";if(e){if(e<1)throw new Error("size must be in greater than 0");if(!ht(e))throw new Error("size must be an integer");if(i>2**(e-1)-1||i<-(2**(e-1)))throw new Error("Value must be in range [-2^".concat(e-1,", 2^").concat(e-1,"-1]"));if(!ht(i))throw new Error("Value must be an integer");i<0&&(i+=2**e),o="i".concat(e)}var s="";return i<0&&(i=-i,s="-"),"".concat(s).concat(r).concat(i.toString(a)).concat(o)}function oo(i,a){if("function"==typeof a)return a(i);if(i===1/0)return"Infinity";if(i===-1/0)return"-Infinity";if(isNaN(i))return"NaN";var t,r,e="auto";if(a&&(a.notation&&(e=a.notation),Jt(a)?t=a:Jt(a.precision)&&(t=a.precision),a.wordSize&&"number"!=typeof(r=a.wordSize)))throw new Error('Option "wordSize" must be a number');switch(e){case"fixed":return lm(i,t);case"exponential":return um(i,t);case"engineering":return function TE(i,a){if(isNaN(i)||!isFinite(i))return String(i);var t=Os(Ls(i),a),r=t.exponent,o=t.coefficients,s=r%3==0?r:r<0?r-3-r%3:r-r%3;if(Jt(a))for(;a>o.length||r-s+1>o.length;)o.push(0);else for(var c=Math.abs(r-s)-(o.length-1),l=0;l<c;l++)o.push(0);for(var u=Math.abs(r-s),d=1;u>0;)d++,u--;var f=o.slice(d).join(""),p=Jt(a)&&f.length||f.match(/[1-9]/)?"."+f:"",m=o.slice(0,d).join("")+p+"e"+(r>=0?"+":"")+s.toString();return t.sign+m}(i,t);case"bin":return Ol(i,2,r);case"oct":return Ol(i,8,r);case"hex":return Ol(i,16,r);case"auto":return function NE(i,a,e){if(isNaN(i)||!isFinite(i))return String(i);var t=e&&void 0!==e.lowerExp?e.lowerExp:-3,r=e&&void 0!==e.upperExp?e.upperExp:5,o=Ls(i),s=a?Os(o,a):o;if(s.exponent<t||s.exponent>=r)return um(i,a);var c=s.coefficients,l=s.exponent;c.length<a&&(c=c.concat(jo(a-c.length))),c=c.concat(jo(l-c.length+1+(c.length<a?a-c.length:0)));var u=l>0?l:0;return u<(c=jo(-l).concat(c)).length-1&&c.splice(u+1,0,"."),s.sign+c.join("")}(i,t,a&&a).replace(/((\.\d*?)(0+))($|e)/,function(){var o=arguments[2],s=arguments[4];return"."!==o?o+s:s});default:throw new Error('Unknown notation "'+e+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function Ls(i){var a=String(i).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!a)throw new SyntaxError("Invalid number "+i);var e=a[1],t=a[2],r=parseFloat(a[4]||"0"),o=t.indexOf(".");r+=-1!==o?o-1:t.length-1;var s=t.replace(".","").replace(/^0*/,function(c){return r-=c.length,""}).replace(/0*$/,"").split("").map(function(c){return parseInt(c)});return 0===s.length&&(s.push(0),r++),{sign:e,coefficients:s,exponent:r}}function lm(i,a){if(isNaN(i)||!isFinite(i))return String(i);var e=Ls(i),t="number"==typeof a?Os(e,e.exponent+1+a):e,r=t.coefficients,o=t.exponent+1,s=o+(a||0);return r.length<s&&(r=r.concat(jo(s-r.length))),o<0&&(r=jo(1-o).concat(r),o=1),o<r.length&&r.splice(o,0,0===o?"0.":"."),t.sign+r.join("")}function um(i,a){if(isNaN(i)||!isFinite(i))return String(i);var e=Ls(i),t=a?Os(e,a):e,r=t.coefficients,o=t.exponent;r.length<a&&(r=r.concat(jo(a-r.length)));var s=r.shift();return t.sign+s+(r.length>0?"."+r.join(""):"")+"e"+(o>=0?"+":"")+o}function Os(i,a){for(var e={sign:i.sign,coefficients:i.coefficients,exponent:i.exponent},t=e.coefficients;a<=0;)t.unshift(0),e.exponent++,a++;if(t.length>a&&t.splice(a,t.length-a)[0]>=5){var o=a-1;for(t[o]++;10===t[o];)t.pop(),0===o&&(t.unshift(0),e.exponent++,o++),t[--o]++}return e}function jo(i){for(var a=[],e=0;e<i;e++)a.push(0);return a}var OE=Number.EPSILON||2220446049250313e-31;function Si(i,a,e){if(null==e)return i===a;if(i===a)return!0;if(isNaN(i)||isNaN(a))return!1;if(isFinite(i)&&isFinite(a)){var t=Math.abs(i-a);return t<OE||t<=Math.max(Math.abs(i),Math.abs(a))*e}return!1}Math,Math,Math,Math,Math;Math;var VE=q("Complex",[],()=>(Object.defineProperty(ei,"name",{value:"Complex"}),ei.prototype.constructor=ei,ei.prototype.type="Complex",ei.prototype.isComplex=!0,ei.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},ei.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},ei.prototype.format=function(i){var e=this.im,t=this.re,r=oo(this.re,i),o=oo(this.im,i),s=Jt(i)?i:i?i.precision:null;if(null!==s){var c=Math.pow(10,-s);Math.abs(t/e)<c&&(t=0),Math.abs(e/t)<c&&(e=0)}return 0===e?r:0===t?1===e?"i":-1===e?"-i":o+"i":e<0?-1===e?r+" - i":r+" - "+o.substring(1)+"i":1===e?r+" + i":r+" + "+o+"i"},ei.fromPolar=function(i){switch(arguments.length){case 1:var a=arguments[0];if("object"==typeof a)return ei(a);throw new TypeError("Input has to be an object with r and phi keys.");case 2:var e=arguments[0],t=arguments[1];if(Jt(e)){if(Ri(t)&&t.hasBase("ANGLE")&&(t=t.toNumber("rad")),Jt(t))return new ei({r:e,phi:t});throw new TypeError("Phi is not a number nor an angle unit.")}throw new TypeError("Radius r is not a number.");default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},ei.prototype.valueOf=ei.prototype.toString,ei.fromJSON=function(i){return new ei(i)},ei.compare=function(i,a){return i.re>a.re?1:i.re<a.re?-1:i.im>a.im?1:i.im<a.im?-1:0},ei),{isClass:!0});function GE(i){var a=0,e=1,t=Object.create(null),r=Object.create(null),o=0,s=function(l){var u=r[l];if(u&&(delete t[u],delete r[l],--a,e===u)){if(!a)return o=0,void(e=1);for(;!Object.prototype.hasOwnProperty.call(t,++e););}};return i=Math.abs(i),{hit:function(l){var u=r[l],d=++o;if(t[d]=l,r[l]=d,!u)return++a<=i?void 0:(s(l=t[e]),l);if(delete t[u],e===u)for(;!Object.prototype.hasOwnProperty.call(t,++e););},delete:s,clear:function(){a=o=0,e=1,t=Object.create(null),r=Object.create(null)}}}function Ra(i){var{hasher:a,limit:e}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=e??Number.POSITIVE_INFINITY,a=a??JSON.stringify,function t(){"object"!=typeof t.cache&&(t.cache={values:new Map,lru:GE(e||Number.POSITIVE_INFINITY)});for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];var s=a(r);if(t.cache.values.has(s))return t.cache.lru.hit(s),t.cache.values.get(s);var c=i.apply(i,r);return t.cache.values.set(s,c),t.cache.values.delete(t.cache.lru.hit(s)),c}}function pm(i){return Object.keys(i.signatures||{}).reduce(function(a,e){var t=(e.match(/,/g)||[]).length+1;return Math.max(a,t)},-1)}Ra(function(i){return new i(1).exp()},{hasher:Bs}),Ra(function(i){return new i(1).plus(new i(5).sqrt()).div(2)},{hasher:Bs});var Bl=Ra(function(i){return i.acos(-1)},{hasher:Bs});function Bs(i){return i[0].precision}function Rs(i,a){return q(i,["config","BigNumber"],t=>{var{config:r,BigNumber:o}=t;return"BigNumber"===r.number?new o(a):a})}Ra(function(i){return Bl(i).times(2)},{hasher:Bs}),Math,Math,Math,Rs("fineStructure",.0072973525693),Rs("weakMixingAngle",.2229),Rs("efimovFactor",22.7),Rs("sackurTetrode",-1.16487052358);var hr=L(7780),pF=q("Fraction",[],()=>(Object.defineProperty(hr,"name",{value:"Fraction"}),hr.prototype.constructor=hr,hr.prototype.type="Fraction",hr.prototype.isFraction=!0,hr.prototype.toJSON=function(){return{mathjs:"Fraction",n:this.s*this.n,d:this.d}},hr.fromJSON=function(i){return new hr(i)},hr),{isClass:!0}),hF=q("Matrix",[],()=>{function i(){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator")}return i.prototype.type="Matrix",i.prototype.isMatrix=!0,i.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},i.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},i.prototype.create=function(a,e){throw new Error("Cannot invoke create on a Matrix interface")},i.prototype.subset=function(a,e,t){throw new Error("Cannot invoke subset on a Matrix interface")},i.prototype.get=function(a){throw new Error("Cannot invoke get on a Matrix interface")},i.prototype.set=function(a,e,t){throw new Error("Cannot invoke set on a Matrix interface")},i.prototype.resize=function(a,e){throw new Error("Cannot invoke resize on a Matrix interface")},i.prototype.reshape=function(a,e){throw new Error("Cannot invoke reshape on a Matrix interface")},i.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},i.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},i.prototype.map=function(a,e){throw new Error("Cannot invoke map on a Matrix interface")},i.prototype.forEach=function(a){throw new Error("Cannot invoke forEach on a Matrix interface")},i.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},i.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},i.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},i.prototype.format=function(a){throw new Error("Cannot invoke format on a Matrix interface")},i.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},i},{isClass:!0});function Rl(i,a,e){var r=new(0,i.constructor)(2),o="";if(e){if(e<1)throw new Error("size must be in greater than 0");if(!ht(e))throw new Error("size must be an integer");if(i.greaterThan(r.pow(e-1).sub(1))||i.lessThan(r.pow(e-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(e-1,", 2^").concat(e-1,"-1]"));if(!i.isInteger())throw new Error("Value must be an integer");i.lessThan(0)&&(i=i.add(r.pow(e))),o="i".concat(e)}switch(a){case 2:return"".concat(i.toBinary()).concat(o);case 8:return"".concat(i.toOctal()).concat(o);case 16:return"".concat(i.toHexadecimal()).concat(o);default:throw new Error("Base ".concat(a," not supported "))}}function mm(i,a){return void 0!==a?i.toExponential(a-1):i.toExponential()}function Gt(i,a){var e=function xF(i,a){return"number"==typeof i?oo(i,a):tn(i)?function SF(i,a){if("function"==typeof a)return a(i);if(!i.isFinite())return i.isNaN()?"NaN":i.gt(0)?"Infinity":"-Infinity";var t,r,e="auto";if(void 0!==a&&(a.notation&&(e=a.notation),"number"==typeof a?t=a:void 0!==a.precision&&(t=a.precision),a.wordSize&&"number"!=typeof(r=a.wordSize)))throw new Error('Option "wordSize" must be a number');switch(e){case"fixed":return function wF(i,a){return i.toFixed(a)}(i,t);case"exponential":return mm(i,t);case"engineering":return function DF(i,a){var e=i.e,t=e%3==0?e:e<0?e-3-e%3:e-e%3,o=i.mul(Math.pow(10,-t)).toPrecision(a);return-1!==o.indexOf("e")&&(o=new(0,i.constructor)(o).toFixed()),o+"e"+(e>=0?"+":"")+t.toString()}(i,t);case"bin":return Rl(i,2,r);case"oct":return Rl(i,8,r);case"hex":return Rl(i,16,r);case"auto":var o=a&&void 0!==a.lowerExp?a.lowerExp:-3,s=a&&void 0!==a.upperExp?a.upperExp:5;if(i.isZero())return"0";var l=i.toSignificantDigits(t),u=l.e;return(u>=o&&u<s?l.toFixed():mm(i,t)).replace(/((\.\d*?)(0+))($|e)/,function(){var d=arguments[2],f=arguments[4];return"."!==d?d+f:f});default:throw new Error('Unknown notation "'+e+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}(i,a):function FF(i){return i&&"object"==typeof i&&"number"==typeof i.s&&"number"==typeof i.n&&"number"==typeof i.d||!1}(i)?a&&"decimal"===a.fraction?i.toString():i.s*i.n+"/"+i.d:Array.isArray(i)?vm(i,a):si(i)?gm(i):"function"==typeof i?i.syntax?String(i.syntax):"function":i&&"object"==typeof i?"function"==typeof i.format?i.format(a):i&&i.toString(a)!=={}.toString()?i.toString(a):"{"+Object.keys(i).map(t=>gm(t)+": "+Gt(i[t],a)).join(", ")+"}":String(i)}(i,a);return a&&"object"==typeof a&&"truncate"in a&&e.length>a.truncate?e.substring(0,a.truncate-3)+"...":e}function gm(i){for(var a=String(i),e="",t=0;t<a.length;){var r=a.charAt(t);e+=r in hm?hm[r]:r,t++}return'"'+e+'"'}var hm={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t"};function vm(i,a){if(Array.isArray(i)){for(var e="[",t=i.length,r=0;r<t;r++)0!==r&&(e+=", "),e+=vm(i[r],a);return e+"]"}return Gt(i,a)}function kt(i,a,e){if(!(this instanceof kt))throw new SyntaxError("Constructor must be called with the new operator");this.actual=i,this.expected=a,this.relation=e,this.message="Dimension mismatch ("+(Array.isArray(i)?"["+i.join(", ")+"]":i)+" "+(this.relation||"!=")+" "+(Array.isArray(a)?"["+a.join(", ")+"]":a)+")",this.stack=(new Error).stack}function Xi(i,a,e){if(!(this instanceof Xi))throw new SyntaxError("Constructor must be called with the new operator");this.index=i,arguments.length<3?(this.min=0,this.max=a):(this.min=a,this.max=e),this.message=void 0!==this.min&&this.index<this.min?"Index out of range ("+this.index+" < "+this.min+")":void 0!==this.max&&this.index>=this.max?"Index out of range ("+this.index+" > "+(this.max-1)+")":"Index out of range ("+this.index+")",this.stack=(new Error).stack}function Ot(i){for(var a=[];Array.isArray(i);)a.push(i.length),i=i[0];return a}function _m(i,a,e){var t,r=i.length;if(r!==a[e])throw new kt(r,a[e]);if(e<a.length-1){var o=e+1;for(t=0;t<r;t++){if(!Array.isArray(i[t]))throw new kt(a.length-1,a.length,"<");_m(i[t],a,o)}}else for(t=0;t<r;t++)if(Array.isArray(i[t]))throw new kt(a.length+1,a.length,">")}function ym(i,a){if(0===a.length){if(Array.isArray(i))throw new kt(i.length,0)}else _m(i,a,0)}function mn(i,a){if(void 0!==i){if(!Jt(i)||!ht(i))throw new TypeError("Index must be an integer (value: "+i+")");if(i<0||"number"==typeof a&&i>=a)throw new Xi(i,a)}}function Po(i,a,e){if(!Array.isArray(a))throw new TypeError("Array expected");if(0===a.length)throw new Error("Resizing to scalar is not supported");return a.forEach(function(r){if(!Jt(r)||!ht(r)||r<0)throw new TypeError("Invalid size, must contain positive integers (size: "+Gt(a)+")")}),(Jt(i)||tn(i))&&(i=[i]),kl(i,a,0,void 0!==e?e:0),i}function kl(i,a,e,t){var r,o,c=a[e],l=Math.min(i.length,c);if(i.length=c,e<a.length-1){var u=e+1;for(r=0;r<l;r++)o=i[r],Array.isArray(o)||(i[r]=o=[o]),kl(o,a,u,t);for(r=l;r<c;r++)i[r]=o=[],kl(o,a,u,t)}else{for(r=0;r<l;r++)for(;Array.isArray(i[r]);)i[r]=i[r][0];for(r=l;r<c;r++)i[r]=t}}function Pl(i,a){var e=function Qt(i){if(!Array.isArray(i))return i;var a=[];return i.forEach(function e(t){Array.isArray(t)?t.forEach(e):a.push(t)}),a}(i),t=e.length;if(!Array.isArray(i)||!Array.isArray(a))throw new TypeError("Array expected");if(0===a.length)throw new kt(0,t,"!=");var r=bm(a=$l(a,t));if(t!==r)throw new kt(r,t,"!=");try{return function IF(i,a){for(var t,e=i,r=a.length-1;r>0;r--){var o=a[r];t=[];for(var s=e.length/o,c=0;c<s;c++)t.push(e.slice(c*o,(c+1)*o));e=t}return e}(e,a)}catch(o){throw o instanceof kt?new kt(r,t,"!="):o}}function $l(i,a){var e=bm(i),t=i.slice(),o=i.indexOf(-1);if(i.indexOf(-1,o+1)>=0)throw new Error("More than one wildcard in sizes");if(o>=0){if(a%e!=0)throw new Error("Could not replace wildcard, since "+a+" is no multiple of "+-e);t[o]=-a/e}return t}function bm(i){return i.reduce((a,e)=>a*e,1)}function Mm(i,a,e,t){var r=t||Ot(i);if(e)for(var o=0;o<e;o++)i=[i],r.unshift(1);for(i=Sm(i,a,0);r.length<a;)r.push(1);return i}function Sm(i,a,e){var t,r;if(Array.isArray(i)){var o=e+1;for(t=0,r=i.length;t<r;t++)i[t]=Sm(i[t],a,o)}else for(var s=e;s<a;s++)i=[i];return i}function ja(i,a){for(var e,t=0,r=0;r<i.length;r++){var o=i[r],s=Array.isArray(o);if(0===r&&s&&(t=o.length),s&&o.length!==t)return;var c=s?ja(o,a):a(o);if(void 0===e)e=c;else if(e!==c)return"mixed"}return e}function wm(i,a,e,t){if(t<e){if(i.length!==a.length)throw new kt(i.length,a.length);for(var r=[],o=0;o<i.length;o++)r[o]=wm(i[o],a[o],e,t+1);return r}return i.concat(a)}function Em(){var i=Array.prototype.slice.call(arguments,0,-1),a=Array.prototype.slice.call(arguments,-1);if(1===i.length)return i[0];if(i.length>1)return i.slice(1).reduce(function(e,t){return wm(e,t,a,0)},i[0]);throw new Error("Wrong number of arguments in function concat")}function $s(i,a){for(var e=a.length,t=i.length,r=0;r<t;r++){var o=e-t+r;if(i[r]<a[o]&&i[r]>1||i[r]>a[o])throw new Error("shape missmatch: missmatch is found in arg with shape (".concat(i,") not possible to broadcast dimension ").concat(t," with size ").concat(i[r]," to size ").concat(a[o]))}}function Ul(i,a){var e=Ot(i);if(Ro(e,a))return i;$s(e,a);var t=function xm(){for(var i=arguments.length,a=new Array(i),e=0;e<i;e++)a[e]=arguments[e];for(var t=a.map(p=>p.length),r=Math.max(...t),o=new Array(r).fill(null),s=0;s<a.length;s++)for(var c=a[s],l=t[s],u=0;u<l;u++){var d=r-l+u;c[u]>o[d]&&(o[d]=c[u])}for(var f=0;f<a.length;f++)$s(a[f],o);return o}(e,a),r=t.length,o=[...Array(r-e.length).fill(1),...e],s=function LF(i){return mr([],i)}(i);e.length<r&&(e=Ot(s=Pl(s,o)));for(var c=0;c<r;c++)e[c]<t[c]&&(e=Ot(s=NF(s,t[c],c)));return s}function NF(i,a,e){return Em(...Array(a).fill(i),e)}(kt.prototype=new RangeError).constructor=RangeError,kt.prototype.name="DimensionError",kt.prototype.isDimensionError=!0,(Xi.prototype=new RangeError).constructor=RangeError,Xi.prototype.name="IndexError",Xi.prototype.isIndexError=!0;var RF=q("DenseMatrix",["Matrix"],i=>{var{Matrix:a}=i;function e(d,f){if(!(this instanceof e))throw new SyntaxError("Constructor must be called with the new operator");if(f&&!si(f))throw new Error("Invalid datatype: "+f);if(Et(d))"DenseMatrix"===d.type?(this._data=xt(d._data),this._size=xt(d._size),this._datatype=f||d._datatype):(this._data=d.toArray(),this._size=d.size(),this._datatype=f||d._datatype);else if(d&&an(d.data)&&an(d.size))this._data=d.data,this._size=d.size,ym(this._data,this._size),this._datatype=f||d.datatype;else if(an(d))this._data=u(d),this._size=Ot(this._data),ym(this._data,this._size),this._datatype=f;else{if(d)throw new TypeError("Unsupported type of data ("+Ln(d)+")");this._data=[],this._size=[0],this._datatype=f}}function r(d,f,p,m){var h=m===p-1,g=f.dimension(m);return h?g.map(function(b){return mn(b,d.length),d[b]}).valueOf():g.map(function(b){return mn(b,d.length),r(d[b],f,p,m+1)}).valueOf()}function s(d,f,p,m,h){var g=h===m-1;f.dimension(h).forEach(g?function(_,D){mn(_),d[_]=p[D[0]]}:function(_,D){mn(_),s(d[_],f,p[D[0]],m,h+1)})}function c(d,f,p){if(0===f.length){for(var m=d._data;an(m);)m=m[0];return m}return d._size=f.slice(0),d._data=Po(d._data,d._size,p),d}function l(d,f,p){for(var m=d._size.slice(0),h=!1;m.length<f.length;)m.push(0),h=!0;for(var g=0,b=f.length;g<b;g++)f[g]>m[g]&&(m[g]=f[g],h=!0);h&&c(d,m,p)}function u(d){return Et(d)?u(d.valueOf()):an(d)?d.map(u):d}return(e.prototype=new a).createDenseMatrix=function(d,f){return new e(d,f)},Object.defineProperty(e,"name",{value:"DenseMatrix"}),e.prototype.constructor=e,e.prototype.type="DenseMatrix",e.prototype.isDenseMatrix=!0,e.prototype.getDataType=function(){return ja(this._data,Ln)},e.prototype.storage=function(){return"dense"},e.prototype.datatype=function(){return this._datatype},e.prototype.create=function(d,f){return new e(d,f)},e.prototype.subset=function(d,f,p){switch(arguments.length){case 1:return function t(d,f){if(!Ns(f))throw new TypeError("Invalid index");if(f.isScalar())return d.get(f.min());var m=f.size();if(m.length!==d._size.length)throw new kt(m.length,d._size.length);for(var h=f.min(),g=f.max(),b=0,_=d._size.length;b<_;b++)mn(h[b],d._size[b]),mn(g[b],d._size[b]);return new e(r(d._data,f,m.length,0),d._datatype)}(this,d);case 2:case 3:return function o(d,f,p,m){if(!f||!0!==f.isIndex)throw new TypeError("Invalid index");var b,h=f.size(),g=f.isScalar();if(Et(p)?(b=p.size(),p=p.valueOf()):b=Ot(p),g){if(0!==b.length)throw new TypeError("Scalar expected");d.set(f.min(),p,m)}else{if(!Ro(b,h))try{b=Ot(p=Ul(0===b.length?[p]:p,h))}catch{}if(h.length<d._size.length)throw new kt(h.length,d._size.length,"<");if(b.length<h.length){for(var _=0,D=0;1===h[_]&&1===b[_];)_++;for(;1===h[_];)D++,_++;p=Mm(p,h.length,D,b)}if(!Ro(h,b))throw new kt(h,b,">");l(d,f.max().map(function(C){return C+1}),m),s(d._data,f,p,h.length,0)}return d}(this,d,f,p);default:throw new SyntaxError("Wrong number of arguments")}},e.prototype.get=function(d){if(!an(d))throw new TypeError("Array expected");if(d.length!==this._size.length)throw new kt(d.length,this._size.length);for(var f=0;f<d.length;f++)mn(d[f],this._size[f]);for(var p=this._data,m=0,h=d.length;m<h;m++){var g=d[m];mn(g,p.length),p=p[g]}return p},e.prototype.set=function(d,f,p){if(!an(d))throw new TypeError("Array expected");if(d.length<this._size.length)throw new kt(d.length,this._size.length,"<");var m,h,g;l(this,d.map(function(D){return D+1}),p);var _=this._data;for(m=0,h=d.length-1;m<h;m++)mn(g=d[m],_.length),_=_[g];return mn(g=d[d.length-1],_.length),_[g]=f,this},e.prototype.resize=function(d,f,p){if(!Bo(d))throw new TypeError("Array or Matrix expected");var m=d.valueOf().map(g=>Array.isArray(g)&&1===g.length?g[0]:g);return c(p?this.clone():this,m,f)},e.prototype.reshape=function(d,f){var p=f?this.clone():this;p._data=Pl(p._data,d);var m=p._size.reduce((h,g)=>h*g);return p._size=$l(d,m),p},e.prototype.clone=function(){return new e({data:xt(this._data),size:xt(this._size),datatype:this._datatype})},e.prototype.size=function(){return this._size.slice(0)},e.prototype.map=function(d){var f=this,p=pm(d),h=function b(_,D){return an(_)?_.map(function(y,w){return b(y,D.concat(w))}):1===p?d(_):2===p?d(_,D):d(_,D,f)}(this._data,[]);return new e(h,void 0!==this._datatype?ja(h,Ln):void 0)},e.prototype.forEach=function(d){var f=this;!function m(h,g){an(h)?h.forEach(function(b,_){m(b,g.concat(_))}):d(h,g,f)}(this._data,[])},e.prototype[Symbol.iterator]=function*(){yield*function*f(p,m){if(an(p))for(var h=0;h<p.length;h++)yield*f(p[h],m.concat(h));else yield{value:p,index:m}}(this._data,[])},e.prototype.rows=function(){var d=[];if(2!==this.size().length)throw new TypeError("Rows can only be returned for a 2D matrix.");var p=this._data;for(var m of p)d.push(new e([m],this._datatype));return d},e.prototype.columns=function(){var d=this,f=[],p=this.size();if(2!==p.length)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var m=this._data,h=function(_){var D=m.map(y=>[y[_]]);f.push(new e(D,d._datatype))},g=0;g<p[1];g++)h(g);return f},e.prototype.toArray=function(){return xt(this._data)},e.prototype.valueOf=function(){return this._data},e.prototype.format=function(d){return Gt(this._data,d)},e.prototype.toString=function(){return Gt(this._data)},e.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},e.prototype.diagonal=function(d){if(d){if(tn(d)&&(d=d.toNumber()),!Jt(d)||!ht(d))throw new TypeError("The parameter k must be an integer number")}else d=0;for(var f=d>0?d:0,p=d<0?-d:0,g=Math.min(this._size[0]-p,this._size[1]-f),b=[],_=0;_<g;_++)b[_]=this._data[_+p][_+f];return new e({data:b,size:[g],datatype:this._datatype})},e.diagonal=function(d,f,p,m){if(!an(d))throw new TypeError("Array expected, size parameter");if(2!==d.length)throw new Error("Only two dimensions matrix are supported");if(d=d.map(function(T){if(tn(T)&&(T=T.toNumber()),!Jt(T)||!ht(T)||T<1)throw new Error("Size values must be positive integers");return T}),p){if(tn(p)&&(p=p.toNumber()),!Jt(p)||!ht(p))throw new TypeError("The parameter k must be an integer number")}else p=0;var y,h=p>0?p:0,g=p<0?-p:0,b=d[0],_=d[1],D=Math.min(b-g,_-h);if(an(f)){if(f.length!==D)throw new Error("Invalid value array length");y=function(N){return f[N]}}else if(Et(f)){var w=f.size();if(1!==w.length||w[0]!==D)throw new Error("Invalid matrix length");y=function(N){return f.get([N])}}else y=function(){return f};m||(m=tn(y(0))?y(0).mul(0):0);var E=[];if(d.length>0){E=Po(E,d,m);for(var C=0;C<D;C++)E[C+g][C+h]=y(C)}return new e({data:E,size:[b,_]})},e.fromJSON=function(d){return new e(d)},e.prototype.swapRows=function(d,f){if(!(Jt(d)&&ht(d)&&Jt(f)&&ht(f)))throw new Error("Row index must be positive integers");if(2!==this._size.length)throw new Error("Only two dimensional matrix is supported");return mn(d,this._size[0]),mn(f,this._size[0]),e._swapRows(d,f,this._data),this},e._swapRows=function(d,f,p){var m=p[d];p[d]=p[f],p[f]=m},e},{isClass:!0}),Uo=L(9634);function Fm(i,a){if(Nm(i)&&Am(i,a))return i[a];throw"function"==typeof i[a]&&function Tm(i,a){return!(null==i||"function"!=typeof i[a]||dn(i,a)&&Object.getPrototypeOf&&a in Object.getPrototypeOf(i)||!dn(VF,a)&&(a in Object.prototype||a in Function.prototype))}(i,a)?new Error('Cannot access method "'+a+'" as a property'):new Error('No access to property "'+a+'"')}function Am(i,a){return!(!i||"object"!=typeof i||!dn(UF,a)&&(a in Object.prototype||a in Function.prototype))}function Nm(i){return"object"==typeof i&&i&&i.constructor===Object}var UF={length:!0,name:!0},VF={toString:!0,valueOf:!0,toLocaleString:!0};class Vl{constructor(a){this.wrappedObject=a}keys(){return Object.keys(this.wrappedObject)}get(a){return Fm(this.wrappedObject,a)}set(a,e){return function Im(i,a,e){if(Nm(i)&&Am(i,a))return i[a]=e,e;throw new Error('No access to property "'+a+'"')}(this.wrappedObject,a,e),this}has(a){return function $F(i,a){return a in i}(this.wrappedObject,a)}}function zl(i){return!!i&&(i instanceof Map||i instanceof Vl||"function"==typeof i.set&&"function"==typeof i.get&&"function"==typeof i.keys&&"function"==typeof i.has)}var Lm=function(){return Lm=Uo.create,Uo},WF=q("typed",["?BigNumber","?Complex","?DenseMatrix","?Fraction"],function(a){var{BigNumber:e,Complex:t,DenseMatrix:r,Fraction:o}=a,s=Lm();return s.clear(),s.addTypes([{name:"number",test:Jt},{name:"Complex",test:$r},{name:"BigNumber",test:tn},{name:"Fraction",test:As},{name:"Unit",test:Ri},{name:"identifier",test:c=>si&&/^(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])*$/.test(c)},{name:"string",test:si},{name:"Chain",test:gE},{name:"Array",test:an},{name:"Matrix",test:Et},{name:"DenseMatrix",test:Ts},{name:"SparseMatrix",test:ro},{name:"Range",test:em},{name:"Index",test:Ns},{name:"boolean",test:Hw},{name:"ResultSet",test:Zw},{name:"Help",test:qw},{name:"function",test:Jw},{name:"Date",test:Qw},{name:"RegExp",test:Xw},{name:"null",test:Yw},{name:"undefined",test:eE},{name:"AccessorNode",test:tE},{name:"ArrayNode",test:nE},{name:"AssignmentNode",test:iE},{name:"BlockNode",test:rE},{name:"ConditionalNode",test:oE},{name:"ConstantNode",test:Nl},{name:"FunctionNode",test:sE},{name:"FunctionAssignmentNode",test:aE},{name:"IndexNode",test:cE},{name:"Node",test:lE},{name:"ObjectNode",test:uE},{name:"OperatorNode",test:nm},{name:"ParenthesisNode",test:dE},{name:"RangeNode",test:fE},{name:"RelationalNode",test:pE},{name:"SymbolNode",test:mE},{name:"Map",test:zl},{name:"Object",test:tm}]),s.addConversions([{from:"number",to:"BigNumber",convert:function(l){if(e||Gl(l),function LE(i){return i.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}(l)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+l+"). Use function bignumber(x) to convert to BigNumber.");return new e(l)}},{from:"number",to:"Complex",convert:function(l){return t||Us(l),new t(l,0)}},{from:"BigNumber",to:"Complex",convert:function(l){return t||Us(l),new t(l.toNumber(),0)}},{from:"Fraction",to:"BigNumber",convert:function(l){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(l){return t||Us(l),new t(l.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(l){o||Wl(l);var u=new o(l);if(u.valueOf()!==l)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+l+"). Use function fraction(x) to convert to Fraction.");return u}},{from:"string",to:"number",convert:function(l){var u=Number(l);if(isNaN(u))throw new Error('Cannot convert "'+l+'" to a number');return u}},{from:"string",to:"BigNumber",convert:function(l){e||Gl(l);try{return new e(l)}catch{throw new Error('Cannot convert "'+l+'" to BigNumber')}}},{from:"string",to:"Fraction",convert:function(l){o||Wl(l);try{return new o(l)}catch{throw new Error('Cannot convert "'+l+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(l){t||Us(l);try{return new t(l)}catch{throw new Error('Cannot convert "'+l+'" to Complex')}}},{from:"boolean",to:"number",convert:function(l){return+l}},{from:"boolean",to:"BigNumber",convert:function(l){return e||Gl(l),new e(+l)}},{from:"boolean",to:"Fraction",convert:function(l){return o||Wl(l),new o(+l)}},{from:"boolean",to:"string",convert:function(l){return String(l)}},{from:"Array",to:"Matrix",convert:function(l){return r||function KF(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}(),new r(l)}},{from:"Matrix",to:"Array",convert:function(l){return l.valueOf()}}]),s.onMismatch=(c,l,u)=>{var d=s.createError(c,l,u);if(["wrongType","mismatch"].includes(d.data.category)&&1===l.length&&Bo(l[0])&&u.some(p=>!p.params.includes(","))){var f=new TypeError("Function '".concat(c,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(c,")'."));throw f.data=d.data,f}throw d},s.onMismatch=(c,l,u)=>{var d=s.createError(c,l,u);if(["wrongType","mismatch"].includes(d.data.category)&&1===l.length&&Bo(l[0])&&u.some(p=>!p.params.includes(","))){var f=new TypeError("Function '".concat(c,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(c,")'."));throw f.data=d.data,f}throw d},s});function Gl(i){throw new Error("Cannot convert value ".concat(i," into a BigNumber: no class 'BigNumber' provided"))}function Us(i){throw new Error("Cannot convert value ".concat(i," into a Complex number: no class 'Complex' provided"))}function Wl(i){throw new Error("Cannot convert value ".concat(i," into a Fraction, no class 'Fraction' provided."))}function Kt(i,a,e){return i&&"function"==typeof i.map?i.map(function(t){return Kt(t,a,e)}):a(i)}var pi="number",_r="number, number";function Rm(i){return Math.abs(i)}function jm(i,a){return i+a}function km(i,a){return i-a}function Pm(i,a){return i*a}function $m(i){return-i}function Xm(i){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!ht(a)||a<0||a>15)throw new Error("Number of decimals in function round must be an integer from 0 to 15 inclusive");return parseFloat(lm(i,a))}Rm.signature=pi,jm.signature=_r,km.signature=_r,Pm.signature=_r,$m.signature=pi;var iI=q("abs",["typed"],i=>{var{typed:a}=i;return a("abs",{number:Rm,"Complex | BigNumber | Fraction | Unit":e=>e.abs(),"Array | Matrix":a.referToSelf(e=>t=>Kt(t,e,!0))})});var bg="addScalar",CI=q(bg,["typed"],i=>{var{typed:a}=i;return a(bg,{"number, number":jm,"Complex, Complex":function(t,r){return t.add(r)},"BigNumber, BigNumber":function(t,r){return t.plus(r)},"Fraction, Fraction":function(t,r){return t.add(r)},"Unit, Unit":a.referToSelf(e=>(t,r)=>{if(null==t.value)throw new Error("Parameter x contains a unit with undefined value");if(null==r.value)throw new Error("Parameter y contains a unit with undefined value");if(!t.equalBase(r))throw new Error("Units do not match");var o=t.clone();return o.value=a.find(e,[o.valueType(),r.valueType()])(o.value,r.value),o.fixPrefix=!1,o})})}),RI=q("bignumber",["typed","BigNumber"],i=>{var{typed:a,BigNumber:e}=i;return a("bignumber",{"":function(){return new e(0)},number:function(r){return new e(r+"")},string:function(r){var o=r.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);if(o){var s=o[2],c=e(o[1]),l=new e(2).pow(Number(s));if(c.gt(l.sub(1)))throw new SyntaxError('String "'.concat(r,'" is out of range'));var u=new e(2).pow(Number(s)-1);return c.gte(u)?c.sub(l):c}return new e(r)},BigNumber:function(r){return r},Unit:a.referToSelf(t=>r=>{var o=r.clone();return o.value=t(r.value),o}),Fraction:function(r){return new e(r.n).div(r.d).times(r.s)},null:function(r){return new e(0)},"Array | Matrix":a.referToSelf(t=>r=>Kt(r,t))})});var tA=q("conj",["typed"],i=>{var{typed:a}=i;return a("conj",{"number | BigNumber | Fraction":e=>e,Complex:e=>e.conjugate(),"Array | Matrix":a.referToSelf(e=>t=>Kt(t,e))})});var Wo=q("compareUnits",["typed"],i=>{var{typed:a}=i;return{"Unit, Unit":a.referToSelf(e=>(t,r)=>{if(!t.equalBase(r))throw new Error("Cannot compare units with different base");return a.find(e,[t.valueType(),r.valueType()])(t.value,r.value)})}}),Ws="equalScalar",fA=q(Ws,["typed","config"],i=>{var{typed:a,config:e}=i,t=Wo({typed:a});return a(Ws,{"boolean, boolean":function(o,s){return o===s},"number, number":function(o,s){return Si(o,s,e.epsilon)},"BigNumber, BigNumber":function(o,s){return o.eq(s)||function Yi(i,a,e){if(null==e)return i.eq(a);if(i.eq(a))return!0;if(i.isNaN()||a.isNaN())return!1;if(i.isFinite()&&a.isFinite()){var t=i.minus(a).abs();if(t.isZero())return!0;var r=i.constructor.max(i.abs(),a.abs());return t.lte(r.times(e))}return!1}(o,s,e.epsilon)},"Fraction, Fraction":function(o,s){return o.equals(s)},"Complex, Complex":function(o,s){return function uA(i,a,e){return Si(i.re,a.re,e)&&Si(i.im,a.im,e)}(o,s,e.epsilon)}},t)});q(Ws,["typed","config"],i=>{var{typed:a,config:e}=i;return a(Ws,{"number, number":function(r,o){return Si(r,o,e.epsilon)}})}),Math.pow(2,53),q("hex",["typed","format"],i=>{var{typed:a,format:e}=i;return a("hex",{"number | BigNumber":function(r){return e(r,{notation:"hex"})},"number | BigNumber, number":function(r,o){return e(r,{notation:"hex",wordSize:o})}})});var $a="number";function Yg(i){return 0===i}Yg.signature=$a;var WA=q("isZero",["typed"],i=>{var{typed:a}=i;return a("isZero",{number:Yg,BigNumber:function(t){return t.isZero()},Complex:function(t){return 0===t.re&&0===t.im},Fraction:function(t){return 1===t.d&&0===t.n},Unit:a.referToSelf(e=>t=>a.find(e,t.valueType())(t.value)),"Array | Matrix":a.referToSelf(e=>t=>Kt(t,e))})});var a2=q("multiplyScalar",["typed"],i=>{var{typed:a}=i;return a("multiplyScalar",{"number, number":Pm,"Complex, Complex":function(t,r){return t.mul(r)},"BigNumber, BigNumber":function(t,r){return t.times(r)},"Fraction, Fraction":function(t,r){return t.mul(r)},"number | Fraction | BigNumber | Complex, Unit":(e,t)=>t.multiply(e),"Unit, number | Fraction | BigNumber | Complex | Unit":(e,t)=>e.multiply(t)})});var m2=q("number",["typed"],i=>{var{typed:a}=i,e=a("number",{"":function(){return 0},number:function(r){return r},string:function(r){if("NaN"===r)return NaN;var o=function f2(i){var a=i.match(/(0[box])([0-9a-fA-F]*)\.([0-9a-fA-F]*)/);return a?{input:i,radix:{"0b":2,"0o":8,"0x":16}[a[1]],integerPart:a[2],fractionalPart:a[3]}:null}(r);if(o)return function p2(i){for(var a=parseInt(i.integerPart,i.radix),e=0,t=0;t<i.fractionalPart.length;t++)e+=parseInt(i.fractionalPart[t],i.radix)/Math.pow(i.radix,t+1);var o=a+e;if(isNaN(o))throw new SyntaxError('String "'+i.input+'" is no valid number');return o}(o);var s=0,c=r.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);c&&(s=Number(c[2]),r=c[1]);var l=Number(r);if(isNaN(l))throw new SyntaxError('String "'+r+'" is no valid number');if(c){if(l>2**s-1)throw new SyntaxError('String "'.concat(r,'" is out of range'));l>=2**(s-1)&&(l-=2**s)}return l},BigNumber:function(r){return r.toNumber()},Fraction:function(r){return r.valueOf()},Unit:a.referToSelf(t=>r=>{var o=r.clone();return o.value=t(r.value),o}),null:function(r){return 0},"Unit, string | Unit":function(r,o){return r.toNumber(o)},"Array | Matrix":a.referToSelf(t=>r=>Kt(r,t))});return e.fromJSON=function(t){return parseFloat(t.value)},e});q("oct",["typed","format"],i=>{var{typed:a,format:e}=i;return a("oct",{"number | BigNumber":function(r){return e(r,{notation:"oct"})},"number | BigNumber, number":function(r,o){return e(r,{notation:"oct",wordSize:o})}})}),L(9128);Date.now();var B2=q("SparseMatrix",["typed","equalScalar","Matrix"],i=>{var{typed:a,equalScalar:e,Matrix:t}=i;function r(g,b){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(b&&!si(b))throw new Error("Invalid datatype: "+b);if(Et(g))!function o(g,b,_){"SparseMatrix"===b.type?(g._values=b._values?xt(b._values):void 0,g._index=xt(b._index),g._ptr=xt(b._ptr),g._size=xt(b._size),g._datatype=_||b._datatype):s(g,b.valueOf(),_||b._datatype)}(this,g,b);else if(g&&an(g.index)&&an(g.ptr)&&an(g.size))this._values=g.values,this._index=g.index,this._ptr=g.ptr,this._size=g.size,this._datatype=b||g.datatype;else if(an(g))s(this,g,b);else{if(g)throw new TypeError("Unsupported type of data ("+Ln(g)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=b}}function s(g,b,_){g._values=[],g._index=[],g._ptr=[],g._datatype=_;var D=b.length,y=0,w=e,E=0;if(si(_)&&(w=a.find(e,[_,_])||e,E=a.convert(0,_)),D>0){var C=0;do{g._ptr.push(g._index.length);for(var T=0;T<D;T++){var N=b[T];if(an(N)){if(0===C&&y<N.length&&(y=N.length),C<N.length){var O=N[C];w(O,E)||(g._values.push(O),g._index.push(T))}}else 0===C&&y<1&&(y=1),w(N,E)||(g._values.push(N),g._index.push(T))}C++}while(C<y)}g._ptr.push(g._index.length),g._size=[D,y]}function u(g,b,_,D){if(_-b==0)return _;for(var y=b;y<_;y++)if(D[y]===g)return y;return b}function f(g,b,_,D,y,w,E){y.splice(g,0,D),w.splice(g,0,b);for(var C=_+1;C<E.length;C++)E[C]++}function p(g,b,_,D){var y=D||0,w=e,E=0;si(g._datatype)&&(w=a.find(e,[g._datatype,g._datatype])||e,E=a.convert(0,g._datatype),y=a.convert(y,g._datatype));var O,x,j,C=!w(y,E),T=g._size[0],N=g._size[1];if(_>N){for(x=N;x<_;x++)if(g._ptr[x]=g._values.length,C)for(O=0;O<T;O++)g._values.push(y),g._index.push(O);g._ptr[_]=g._values.length}else _<N&&(g._ptr.splice(_+1,N-_),g._values.splice(g._ptr[_],g._values.length),g._index.splice(g._ptr[_],g._index.length));if(N=_,b>T){if(C){var P=0;for(x=0;x<N;x++){g._ptr[x]=g._ptr[x]+P,j=g._ptr[x+1]+P;var W=0;for(O=T;O<b;O++,W++)g._values.splice(j+W,0,y),g._index.splice(j+W,0,O),P++}g._ptr[N]=g._values.length}}else if(b<T){var Q=0;for(x=0;x<N;x++){g._ptr[x]=g._ptr[x]-Q;var J=g._ptr[x+1]-Q;for(j=g._ptr[x];j<J;j++)(O=g._index[j])>b-1&&(g._values.splice(j,1),g._index.splice(j,1),Q++)}g._ptr[x]=g._values.length}return g._size[0]=b,g._size[1]=_,g}function h(g,b,_,D,y){var T,N,w=D[0],E=D[1],C=[];for(T=0;T<w;T++)for(C[T]=[],N=0;N<E;N++)C[T][N]=0;for(N=0;N<E;N++)for(var x=_[N+1],j=_[N];j<x;j++)C[T=b[j]][N]=g?y?xt(g[j]):g[j]:1;return C}return(r.prototype=new t).createSparseMatrix=function(g,b){return new r(g,b)},Object.defineProperty(r,"name",{value:"SparseMatrix"}),r.prototype.constructor=r,r.prototype.type="SparseMatrix",r.prototype.isSparseMatrix=!0,r.prototype.getDataType=function(){return ja(this._values,Ln)},r.prototype.storage=function(){return"sparse"},r.prototype.datatype=function(){return this._datatype},r.prototype.create=function(g,b){return new r(g,b)},r.prototype.density=function(){var g=this._size[0],b=this._size[1];return 0!==g&&0!==b?this._index.length/(g*b):0},r.prototype.subset=function(g,b,_){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return function c(g,b){if(!Ns(b))throw new TypeError("Invalid index");if(b.isScalar())return g.get(b.min());var D=b.size();if(D.length!==g._size.length)throw new kt(D.length,g._size.length);var y,w,E,C,T=b.min(),N=b.max();for(y=0,w=g._size.length;y<w;y++)mn(T[y],g._size[y]),mn(N[y],g._size[y]);var O=g._values,x=g._index,j=g._ptr,P=b.dimension(0),W=b.dimension(1),Q=[],ee=[];P.forEach(function(R,se){ee[R]=se[0],Q[R]=!0});var J=O?[]:void 0,B=[],fe=[];return W.forEach(function(R){for(fe.push(B.length),E=j[R],C=j[R+1];E<C;E++)!0===Q[y=x[E]]&&(B.push(ee[y]),J&&J.push(O[E]))}),fe.push(B.length),new r({values:J,index:B,ptr:fe,size:D,datatype:g._datatype})}(this,g);case 2:case 3:return function l(g,b,_,D){if(!b||!0!==b.isIndex)throw new TypeError("Invalid index");var E,y=b.size(),w=b.isScalar();if(Et(_)?(E=_.size(),_=_.toArray()):E=Ot(_),w){if(0!==E.length)throw new TypeError("Scalar expected");g.set(b.min(),_,D)}else{if(1!==y.length&&2!==y.length)throw new kt(y.length,g._size.length,"<");if(E.length<y.length){for(var C=0,T=0;1===y[C]&&1===E[C];)C++;for(;1===y[C];)T++,C++;_=Mm(_,y.length,T,E)}if(!Ro(y,E))throw new kt(y,E,">");if(1===y.length)b.dimension(0).forEach(function(j,P){mn(j),g.set([j,0],_[P[0]],D)});else{var O=b.dimension(0),x=b.dimension(1);O.forEach(function(j,P){mn(j),x.forEach(function(W,Q){mn(W),g.set([j,W],_[P[0]][Q[0]],D)})})}}return g}(this,g,b,_);default:throw new SyntaxError("Wrong number of arguments")}},r.prototype.get=function(g){if(!an(g))throw new TypeError("Array expected");if(g.length!==this._size.length)throw new kt(g.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var b=g[0],_=g[1];mn(b,this._size[0]),mn(_,this._size[1]);var D=u(b,this._ptr[_],this._ptr[_+1],this._index);return D<this._ptr[_+1]&&this._index[D]===b?this._values[D]:0},r.prototype.set=function(g,b,_){if(!an(g))throw new TypeError("Array expected");if(g.length!==this._size.length)throw new kt(g.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var D=g[0],y=g[1],w=this._size[0],E=this._size[1],C=e,T=0;si(this._datatype)&&(C=a.find(e,[this._datatype,this._datatype])||e,T=a.convert(0,this._datatype)),(D>w-1||y>E-1)&&(p(this,Math.max(D+1,w),Math.max(y+1,E),_),w=this._size[0],E=this._size[1]),mn(D,w),mn(y,E);var N=u(D,this._ptr[y],this._ptr[y+1],this._index);return N<this._ptr[y+1]&&this._index[N]===D?C(b,T)?function d(g,b,_,D,y){_.splice(g,1),D.splice(g,1);for(var w=b+1;w<y.length;w++)y[w]--}(N,y,this._values,this._index,this._ptr):this._values[N]=b:C(b,T)||f(N,D,y,b,this._values,this._index,this._ptr),this},r.prototype.resize=function(g,b,_){if(!Bo(g))throw new TypeError("Array or Matrix expected");var D=g.valueOf().map(w=>Array.isArray(w)&&1===w.length?w[0]:w);if(2!==D.length)throw new Error("Only two dimensions matrix are supported");return D.forEach(function(w){if(!Jt(w)||!ht(w)||w<0)throw new TypeError("Invalid size, must contain positive integers (size: "+Gt(D)+")")}),p(_?this.clone():this,D[0],D[1],b)},r.prototype.reshape=function(g,b){if(!an(g))throw new TypeError("Array expected");if(2!==g.length)throw new Error("Sparse matrices can only be reshaped in two dimensions");g.forEach(function(R){if(!Jt(R)||!ht(R)||R<=-2||0===R)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+Gt(g)+")")});var _=this._size[0]*this._size[1];if(_!==(g=$l(g,_))[0]*g[1])throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var y=b?this.clone():this;if(this._size[0]===g[0]&&this._size[1]===g[1])return y;for(var w=[],E=0;E<y._ptr.length;E++)for(var C=0;C<y._ptr[E+1]-y._ptr[E];C++)w.push(E);for(var T=y._values.slice(),N=y._index.slice(),O=0;O<y._index.length;O++){var P=N[O]*y._size[1]+w[O];w[O]=P%g[1],N[O]=Math.floor(P/g[1])}y._values.length=0,y._index.length=0,y._ptr.length=g[1]+1,y._size=g.slice();for(var W=0;W<y._ptr.length;W++)y._ptr[W]=0;for(var Q=0;Q<T.length;Q++){var ee=N[Q],J=w[Q],B=T[Q];f(u(ee,y._ptr[J],y._ptr[J+1],y._index),ee,J,B,y._values,y._index,y._ptr)}return y},r.prototype.clone=function(){return new r({values:this._values?xt(this._values):void 0,index:xt(this._index),ptr:xt(this._ptr),size:xt(this._size),datatype:this._datatype})},r.prototype.size=function(){return this._size.slice(0)},r.prototype.map=function(g,b){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var _=this,D=this._size[0],y=this._size[1],w=pm(g);return function m(g,b,_,D,y,w,E){var C=[],T=[],N=[],O=e,x=0;si(g._datatype)&&(O=a.find(e,[g._datatype,g._datatype])||e,x=a.convert(0,g._datatype));for(var j=function(le,ge,xe){le=w(le,ge,xe),O(le,x)||(C.push(le),T.push(ge))},P=D;P<=y;P++){N.push(C.length);var W=g._ptr[P],Q=g._ptr[P+1];if(E)for(var ee=W;ee<Q;ee++){var J=g._index[ee];J>=b&&J<=_&&j(g._values[ee],J-b,P-D)}else{for(var B={},fe=W;fe<Q;fe++)B[g._index[fe]]=g._values[fe];for(var se=b;se<=_;se++)j(se in B?B[se]:0,se-b,P-D)}}return N.push(C.length),new r({values:C,index:T,ptr:N,size:[_-b+1,y-D+1]})}(this,0,D-1,0,y-1,function(T,N,O){return 1===w?g(T):2===w?g(T,[N,O]):g(T,[N,O],_)},b)},r.prototype.forEach=function(g,b){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var D=this._size[0],y=this._size[1],w=0;w<y;w++){var E=this._ptr[w],C=this._ptr[w+1];if(b)for(var T=E;T<C;T++)g(this._values[T],[this._index[T],w],this);else{for(var O={},x=E;x<C;x++)O[this._index[x]]=this._values[x];for(var P=0;P<D;P++)g(P in O?O[P]:0,[P,w],this)}}},r.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var g=this._size[1],b=0;b<g;b++)for(var D=this._ptr[b+1],y=this._ptr[b];y<D;y++){var w=this._index[y];yield{value:this._values[y],index:[w,b]}}},r.prototype.toArray=function(){return h(this._values,this._index,this._ptr,this._size,!0)},r.prototype.valueOf=function(){return h(this._values,this._index,this._ptr,this._size,!1)},r.prototype.format=function(g){for(var b=this._size[0],_=this._size[1],D=this.density(),y="Sparse Matrix ["+Gt(b,g)+" x "+Gt(_,g)+"] density: "+Gt(D,g)+"\n",w=0;w<_;w++)for(var C=this._ptr[w+1],T=this._ptr[w];T<C;T++)y+="\n    ("+Gt(this._index[T],g)+", "+Gt(w,g)+") ==> "+(this._values?Gt(this._values[T],g):"X");return y},r.prototype.toString=function(){return Gt(this.toArray())},r.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},r.prototype.diagonal=function(g){if(g){if(tn(g)&&(g=g.toNumber()),!Jt(g)||!ht(g))throw new TypeError("The parameter k must be an integer number")}else g=0;var b=g>0?g:0,_=g<0?-g:0,y=this._size[1],w=Math.min(this._size[0]-_,y-b),E=[],C=[],T=[];T[0]=0;for(var N=b;N<y&&E.length<w;N++)for(var x=this._ptr[N+1],j=this._ptr[N];j<x;j++){var P=this._index[j];if(P===N-b+_){E.push(this._values[j]),C[E.length-1]=P-_;break}}return T.push(E.length),new r({values:E,index:C,ptr:T,size:[w,1]})},r.fromJSON=function(g){return new r(g)},r.diagonal=function(g,b,_,D,y){if(!an(g))throw new TypeError("Array expected, size parameter");if(2!==g.length)throw new Error("Only two dimensions matrix are supported");if(g=g.map(function(R){if(tn(R)&&(R=R.toNumber()),!Jt(R)||!ht(R)||R<1)throw new Error("Size values must be positive integers");return R}),_){if(tn(_)&&(_=_.toNumber()),!Jt(_)||!ht(_))throw new TypeError("The parameter k must be an integer number")}else _=0;var w=e,E=0;si(y)&&(w=a.find(e,[y,y])||e,E=a.convert(0,y));var j,C=_>0?_:0,T=_<0?-_:0,N=g[0],O=g[1],x=Math.min(N-T,O-C);if(an(b)){if(b.length!==x)throw new Error("Invalid value array length");j=function(se){return b[se]}}else if(Et(b)){var P=b.size();if(1!==P.length||P[0]!==x)throw new Error("Invalid matrix length");j=function(se){return b.get([se])}}else j=function(){return b};for(var W=[],Q=[],ee=[],J=0;J<O;J++){ee.push(W.length);var B=J-C;if(B>=0&&B<x){var fe=j(B);w(fe,E)||(Q.push(B+T),W.push(fe))}}return ee.push(W.length),new r({values:W,index:Q,ptr:ee,size:[N,O]})},r.prototype.swapRows=function(g,b){if(!(Jt(g)&&ht(g)&&Jt(b)&&ht(b)))throw new Error("Row index must be positive integers");if(2!==this._size.length)throw new Error("Only two dimensional matrix is supported");return mn(g,this._size[0]),mn(b,this._size[0]),r._swapRows(g,b,this._size[1],this._values,this._index,this._ptr),this},r._forEachRow=function(g,b,_,D,y){for(var E=D[g+1],C=D[g];C<E;C++)y(_[C],b[C])},r._swapRows=function(g,b,_,D,y,w){for(var E=0;E<_;E++){var C=w[E],T=w[E+1],N=u(g,C,T,y),O=u(b,C,T,y);if(N<T&&O<T&&y[N]===g&&y[O]===b){if(D){var x=D[N];D[N]=D[O],D[O]=x}}else if(N<T&&y[N]===g&&(O>=T||y[O]!==b)){var j=D?D[N]:void 0;y.splice(O,0,b),D&&D.splice(O,0,j),y.splice(O<=N?N+1:N,1),D&&D.splice(O<=N?N+1:N,1)}else if(O<T&&y[O]===b&&(N>=T||y[N]!==g)){var P=D?D[O]:void 0;y.splice(N,0,g),D&&D.splice(N,0,P),y.splice(N<=O?O+1:O,1),D&&D.splice(N<=O?O+1:O,1)}}},r},{isClass:!0}),Ih="subtractScalar",z2=q(Ih,["typed"],i=>{var{typed:a}=i;return a(Ih,{"number, number":km,"Complex, Complex":function(t,r){return t.sub(r)},"BigNumber, BigNumber":function(t,r){return t.minus(r)},"Fraction, Fraction":function(t,r){return t.sub(r)},"Unit, Unit":a.referToSelf(e=>(t,r)=>{if(null==t.value)throw new Error("Parameter x contains a unit with undefined value");if(null==r.value)throw new Error("Parameter y contains a unit with undefined value");if(!t.equalBase(r))throw new Error("Units do not match");var o=t.clone();return o.value=a.find(e,[o.valueType(),r.valueType()])(o.value,r.value),o.fixPrefix=!1,o})})});q("bin",["typed","format"],i=>{var{typed:a,format:e}=i;return a("bin",{"number | BigNumber":function(r){return e(r,{notation:"bin"})},"number | BigNumber, number":function(r,o){return e(r,{notation:"bin",wordSize:o})}})});var Zh="unaryMinus",IT=q(Zh,["typed"],i=>{var{typed:a}=i;return a(Zh,{number:$m,"Complex | BigNumber | Fraction":e=>e.neg(),Unit:a.referToSelf(e=>t=>{var r=t.clone();return r.value=a.find(e,r.valueType())(t.value),r}),"Array | Matrix":a.referToSelf(e=>t=>Kt(t,e,!0))})}),RT=q("fraction",["typed","Fraction"],i=>{var{typed:a,Fraction:e}=i;return a("fraction",{number:function(r){if(!isFinite(r)||isNaN(r))throw new Error(r+" cannot be represented as a fraction");return new e(r)},string:function(r){return new e(r)},"number, number":function(r,o){return new e(r,o)},null:function(r){return new e(0)},BigNumber:function(r){return new e(r.toString())},Fraction:function(r){return r},Unit:a.referToSelf(t=>r=>{var o=r.clone();return o.value=t(r.value),o}),Object:function(r){return new e(r)},"Array | Matrix":a.referToSelf(t=>r=>Kt(r,t))})}),$T=q("matrix",["typed","Matrix","DenseMatrix","SparseMatrix"],i=>{var{typed:a,DenseMatrix:t,SparseMatrix:r}=i;return a("matrix",{"":function(){return o([])},string:function(c){return o([],c)},"string, string":function(c,l){return o([],c,l)},Array:function(c){return o(c)},Matrix:function(c){return o(c,c.storage())},"Array | Matrix, string":o,"Array | Matrix, string, string":o});function o(s,c,l){if("dense"===c||"default"===c||void 0===c)return new t(s,l);if("sparse"===c)return new r(s,l);throw new TypeError("Unknown matrix type "+JSON.stringify(c)+".")}});function tv(){throw new Error('No "bignumber" implementation available')}function WT(){throw new Error('No "fraction" implementation available')}var ZT=q("numeric",["number","?bignumber","?fraction"],i=>{var{number:a,bignumber:e,fraction:t}=i,r={string:!0,number:!0,BigNumber:!0,Fraction:!0},o={number:s=>a(s),BigNumber:e?s=>e(s):tv,Fraction:t?s=>t(s):WT};return function(c){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"number";if(void 0!==(arguments.length>2?arguments[2]:void 0))throw new SyntaxError("numeric() takes one or two arguments");var d=Ln(c);if(!(d in r))throw new TypeError("Cannot convert "+c+' of type "'+d+'"; valid input types are '+Object.keys(r).join(", "));if(!(l in o))throw new TypeError("Cannot convert "+c+' to type "'+l+'"; valid output types are '+Object.keys(o).join(", "));return l===d?c:o[l](c)}}),eN=q("size",["typed","config","?matrix"],i=>{var{typed:a,config:e,matrix:t}=i;return a("size",{Matrix:function(o){return o.create(o.size())},Array:Ot,string:function(o){return"Array"===e.matrix?[o.length]:t([o.length])},"number | Complex | BigNumber | Unit | boolean | null":function(o){return"Array"===e.matrix?[]:t?t([]):function nv(){throw new Error('No "matrix" implementation available')}()}})}),cN=q("zeros",["typed","config","matrix","BigNumber"],i=>{var{typed:a,config:e,matrix:t,BigNumber:r}=i;return a("zeros",{"":function(){return"Array"===e.matrix?o([]):o([],"default")},"...number | BigNumber | string":function(u){if("string"==typeof u[u.length-1]){var f=u.pop();return o(u,f)}return"Array"===e.matrix?o(u):o(u,"default")},Array:o,Matrix:function(u){var d=u.storage();return o(u.valueOf(),d)},"Array | Matrix, string":function(u,d){return o(u.valueOf(),d)}});function o(l,u){var d=function s(l){var u=!1;return l.forEach(function(d,f,p){tn(d)&&(u=!0,p[f]=d.toNumber())}),u}(l),f=d?new r(0):0;if(function c(l){l.forEach(function(u){if("number"!=typeof u||!ht(u)||u<0)throw new Error("Parameters in function zeros must be positive integers")})}(l),u){var p=t(u);return l.length>0?p.resize(l,f):p}var m=[];return l.length>0?Po(m,l,f):m}}),hv="divideScalar",MN=q(hv,["typed","numeric"],i=>{var{typed:a}=i;return a(hv,{"number, number":function(r,o){return r/o},"Complex, Complex":function(r,o){return r.div(o)},"BigNumber, BigNumber":function(r,o){return r.div(o)},"Fraction, Fraction":function(r,o){return r.div(o)},"Unit, number | Complex | Fraction | BigNumber | Unit":(t,r)=>t.divide(r),"number | Fraction | Complex | BigNumber, Unit":(t,r)=>r.divideInto(t)})}),ti=q("matAlgo11xS0s",["typed","equalScalar"],i=>{var{typed:a,equalScalar:e}=i;return function(r,o,s,c){var l=r._values,u=r._index,d=r._ptr,f=r._size,p=r._datatype;if(!l)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var g,m=f[0],h=f[1],b=e,_=0,D=s;"string"==typeof p&&(b=a.find(e,[g=p,g]),_=a.convert(0,g),o=a.convert(o,g),D=a.find(s,[g,g]));for(var y=[],w=[],E=[],C=0;C<h;C++){E[C]=w.length;for(var N=d[C+1],O=d[C];O<N;O++){var x=u[O],j=c?D(o,l[O]):D(l[O],o);b(j,_)||(w.push(x),y.push(j))}}return E[h]=w.length,r.createSparseMatrix({values:y,index:w,ptr:E,size:[m,h],datatype:g})}}),Wn=q("matAlgo12xSfs",["typed","DenseMatrix"],i=>{var{typed:a,DenseMatrix:e}=i;return function(r,o,s,c){var l=r._values,u=r._index,d=r._ptr,f=r._size,p=r._datatype;if(!l)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var g,m=f[0],h=f[1],b=s;"string"==typeof p&&(o=a.convert(o,g=p),b=a.find(s,[g,g]));for(var _=[],D=[],y=[],w=0;w<h;w++){for(var E=w+1,T=d[w+1],N=d[w];N<T;N++){var O=u[N];D[O]=l[N],y[O]=E}for(var x=0;x<m;x++)0===w&&(_[x]=[]),_[x][w]=y[x]===E?c?b(o,D[x]):b(D[x],o):c?b(o,0):b(0,o)}return new e({data:_,size:[m,h],datatype:g})}}),ki=q("matAlgo14xDs",["typed"],i=>{var{typed:a}=i;return function(r,o,s,c){var f,l=r._data,u=r._size,d=r._datatype,p=s;"string"==typeof d&&(o=a.convert(o,f=d),p=a.find(s,[f,f]));var m=u.length>0?e(p,0,u,u[0],l,o,c):[];return r.createDenseMatrix({data:m,size:xt(u),datatype:f})};function e(t,r,o,s,c,l,u){var d=[];if(r===o.length-1)for(var f=0;f<s;f++)d[f]=u?t(l,c[f]):t(c[f],l);else for(var p=0;p<s;p++)d[p]=e(t,r+1,o,o[r+1],c[p],l,u);return d}}),bv=(q("equal",["typed","equalScalar"],i=>{var{typed:a,equalScalar:e}=i;return a("equal",{"any, any":function(r,o){return null===r?null===o:null===o?null===r:void 0===r?void 0===o:void 0===o?void 0===r:e(r,o)}})}),"identity"),YN=q(bv,["typed","config","matrix","BigNumber","DenseMatrix","SparseMatrix"],i=>{var{typed:a,config:e,matrix:t,BigNumber:r,DenseMatrix:o,SparseMatrix:s}=i;return a(bv,{"":function(){return"Matrix"===e.matrix?t([]):[]},string:function(d){return t(d)},"number | BigNumber":function(d){return l(d,d,"Matrix"===e.matrix?"dense":void 0)},"number | BigNumber, string":function(d,f){return l(d,d,f)},"number | BigNumber, number | BigNumber":function(d,f){return l(d,f,"Matrix"===e.matrix?"dense":void 0)},"number | BigNumber, number | BigNumber, string":function(d,f,p){return l(d,f,p)},Array:function(d){return c(d)},"Array, string":function(d,f){return c(d,f)},Matrix:function(d){return c(d.valueOf(),d.storage())},"Matrix, string":function(d,f){return c(d.valueOf(),f)}});function c(u,d){switch(u.length){case 0:return d?t(d):[];case 1:return l(u[0],u[0],d);case 2:return l(u[0],u[1],d);default:throw new Error("Vector containing two values expected")}}function l(u,d,f){var p=tn(u)||tn(d)?r:null;if(tn(u)&&(u=u.toNumber()),tn(d)&&(d=d.toNumber()),!ht(u)||u<1)throw new Error("Parameters in function identity must be positive integers");if(!ht(d)||d<1)throw new Error("Parameters in function identity must be positive integers");var m=p?new r(1):1,h=p?new p(0):0,g=[u,d];if(f){if("sparse"===f)return s.diagonal(g,m,0,h);if("dense"===f)return o.diagonal(g,m,0,h);throw new TypeError('Unknown matrix type "'.concat(f,'"'))}for(var b=Po([],g,h),_=u<d?u:d,D=0;D<_;D++)b[D][D]=m;return b}});function so(i,a,e,t){if(!(this instanceof so))throw new SyntaxError("Constructor must be called with the new operator");this.fn=i,this.count=a,this.min=e,this.max=t,this.message="Wrong number of arguments in function "+i+" ("+a+" provided, "+e+(null!=t?"-"+t:"")+" expected)",this.stack=(new Error).stack}(so.prototype=new Error).constructor=Error,so.prototype.name="ArgumentsError",so.prototype.isArgumentsError=!0;var qo="Number of decimals in function round must be an integer",NL=q("round",["typed","matrix","equalScalar","zeros","BigNumber","DenseMatrix"],i=>{var{typed:a,matrix:e,equalScalar:t,zeros:r,BigNumber:o,DenseMatrix:s}=i,c=ti({typed:a,equalScalar:t}),l=Wn({typed:a,DenseMatrix:s}),u=ki({typed:a});return a("round",{number:Xm,"number, number":Xm,"number, BigNumber":function(f,p){if(!p.isInteger())throw new TypeError(qo);return new o(f).toDecimalPlaces(p.toNumber())},Complex:function(f){return f.round()},"Complex, number":function(f,p){if(p%1)throw new TypeError(qo);return f.round(p)},"Complex, BigNumber":function(f,p){if(!p.isInteger())throw new TypeError(qo);var m=p.toNumber();return f.round(m)},BigNumber:function(f){return f.toDecimalPlaces(0)},"BigNumber, BigNumber":function(f,p){if(!p.isInteger())throw new TypeError(qo);return f.toDecimalPlaces(p.toNumber())},Fraction:function(f){return f.round()},"Fraction, number":function(f,p){if(p%1)throw new TypeError(qo);return f.round(p)},"Fraction, BigNumber":function(f,p){if(!p.isInteger())throw new TypeError(qo);return f.round(p.toNumber())},"Array | Matrix":a.referToSelf(d=>f=>Kt(f,d,!0)),"SparseMatrix, number | BigNumber":a.referToSelf(d=>(f,p)=>c(f,p,d,!1)),"DenseMatrix, number | BigNumber":a.referToSelf(d=>(f,p)=>u(f,p,d,!1)),"Array, number | BigNumber":a.referToSelf(d=>(f,p)=>u(e(f),p,d,!1).valueOf()),"number | Complex | BigNumber | Fraction, SparseMatrix":a.referToSelf(d=>(f,p)=>t(f,0)?r(p.size(),p.storage()):l(p,f,d,!0)),"number | Complex | BigNumber | Fraction, DenseMatrix":a.referToSelf(d=>(f,p)=>t(f,0)?r(p.size(),p.storage()):u(p,f,d,!0)),"number | Complex | BigNumber | Fraction, Array":a.referToSelf(d=>(f,p)=>u(e(p),f,d,!0).valueOf())})}),ec="unequal";q(ec,["typed","equalScalar"],i=>{var{typed:a,equalScalar:e}=i;return a(ec,{"any, any":function(r,o){return null===r?null!==o:null===o?null!==r:void 0===r?void 0!==o:void 0===o?void 0!==r:!e(r,o)}})});var SO=q("dot",["typed","addScalar","multiplyScalar","conj","size"],i=>{var{typed:a,addScalar:e,multiplyScalar:t,conj:r,size:o}=i;return a("dot",{"Array | DenseMatrix, Array | DenseMatrix":function c(d,f){var p=s(d,f),m=Et(d)?d._data:d,h=Et(d)?d._datatype:void 0,g=Et(f)?f._data:f,b=Et(f)?f._datatype:void 0,_=2===u(d).length,D=2===u(f).length,y=e,w=t;if(h&&b&&h===b&&"string"==typeof h){var E=h;y=a.find(e,[E,E]),w=a.find(t,[E,E])}if(!_&&!D){for(var C=w(r(m[0]),g[0]),T=1;T<p;T++)C=y(C,w(r(m[T]),g[T]));return C}if(!_&&D){for(var N=w(r(m[0]),g[0][0]),O=1;O<p;O++)N=y(N,w(r(m[O]),g[O][0]));return N}if(_&&!D){for(var x=w(r(m[0][0]),g[0]),j=1;j<p;j++)x=y(x,w(r(m[j][0]),g[j]));return x}if(_&&D){for(var P=w(r(m[0][0]),g[0][0]),W=1;W<p;W++)P=y(P,w(r(m[W][0]),g[W][0]));return P}},"SparseMatrix, SparseMatrix":function l(d,f){s(d,f);for(var p=d._index,m=d._values,h=f._index,g=f._values,b=0,_=e,D=t,y=0,w=0;y<p.length&&w<h.length;){var E=p[y],C=h[w];E<C?y++:E>C?w++:E===C&&(b=_(b,D(m[y],g[w])),y++,w++)}return b}});function s(d,f){var h,g,p=u(d),m=u(f);if(1===p.length)h=p[0];else{if(2!==p.length||1!==p[1])throw new RangeError("Expected a column vector, instead got a matrix of size ("+p.join(", ")+")");h=p[0]}if(1===m.length)g=m[0];else{if(2!==m.length||1!==m[1])throw new RangeError("Expected a column vector, instead got a matrix of size ("+m.join(", ")+")");g=m[0]}if(h!==g)throw new RangeError("Vectors must have equal length ("+h+" != "+g+")");if(0===h)throw new RangeError("Cannot calculate the dot product of empty vectors");return h}function u(d){return Et(d)?d.size():o(d)}}),tu="number | BigNumber | Fraction | Matrix | Array";"".concat(tu,", ").concat(tu,", ...").concat(tu);var n_="multiply",XO=q(n_,["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],i=>{var{typed:a,matrix:e,addScalar:t,multiplyScalar:r,equalScalar:o,dot:s}=i,c=ti({typed:a,equalScalar:o}),l=ki({typed:a});function u(E,C){switch(E.length){case 1:switch(C.length){case 1:if(E[0]!==C[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(E[0]!==C[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+E[0]+") must match Matrix rows ("+C[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+C.length+" dimensions)")}break;case 2:switch(C.length){case 1:if(E[1]!==C[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+E[1]+") must match Vector length ("+C[0]+")");break;case 2:if(E[1]!==C[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+E[1]+") must match Matrix B rows ("+C[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+C.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+E.length+" dimensions)")}}var m=a("_multiplyMatrixVector",{"DenseMatrix, any":function g(E,C){var Q,T=E._data,N=E._size,O=E._datatype,x=C._data,j=C._datatype,P=N[0],W=N[1],ee=t,J=r;O&&j&&O===j&&"string"==typeof O&&(ee=a.find(t,[Q=O,Q]),J=a.find(r,[Q,Q]));for(var B=[],fe=0;fe<P;fe++){for(var R=T[fe],se=J(R[0],x[0]),he=1;he<W;he++)se=ee(se,J(R[he],x[he]));B[fe]=se}return E.createDenseMatrix({data:B,size:[P],datatype:Q})},"SparseMatrix, any":function D(E,C){var T=E._values,N=E._index,O=E._ptr,x=E._datatype;if(!T)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var fe,j=C._data,P=C._datatype,W=E._size[0],Q=C._size[0],ee=[],J=[],B=[],R=t,se=r,he=o,Ie=0;x&&P&&x===P&&"string"==typeof x&&(R=a.find(t,[fe=x,fe]),se=a.find(r,[fe,fe]),he=a.find(o,[fe,fe]),Ie=a.convert(0,fe));var le=[],ge=[];B[0]=0;for(var xe=0;xe<Q;xe++){var be=j[xe];if(!he(be,Ie))for(var Ve=O[xe+1],qe=O[xe];qe<Ve;qe++){var Fe=N[qe];ge[Fe]?le[Fe]=R(le[Fe],se(be,T[qe])):(ge[Fe]=!0,J.push(Fe),le[Fe]=se(be,T[qe]))}}for(var ft=J.length,at=0;at<ft;at++)ee[at]=le[J[at]];return B[1]=J.length,E.createSparseMatrix({values:ee,index:J,ptr:B,size:[W,1],datatype:fe})}}),h=a("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":function b(E,C){var J,T=E._data,N=E._size,O=E._datatype,x=C._data,P=C._datatype,W=N[0],Q=N[1],ee=C._size[1],B=t,fe=r;O&&P&&O===P&&"string"==typeof O&&(B=a.find(t,[J=O,J]),fe=a.find(r,[J,J]));for(var R=[],se=0;se<W;se++){var he=T[se];R[se]=[];for(var Ie=0;Ie<ee;Ie++){for(var le=fe(he[0],x[0][Ie]),ge=1;ge<Q;ge++)le=B(le,fe(he[ge],x[ge][Ie]));R[se][Ie]=le}}return E.createDenseMatrix({data:R,size:[W,ee],datatype:J})},"DenseMatrix, SparseMatrix":function _(E,C){var T=E._data,N=E._size,O=E._datatype,x=C._values,j=C._index,P=C._ptr,W=C._size,Q=C._datatype;if(!x)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var B,ee=N[0],J=W[1],fe=t,R=r,se=o,he=0;O&&Q&&O===Q&&"string"==typeof O&&(fe=a.find(t,[B=O,B]),R=a.find(r,[B,B]),se=a.find(o,[B,B]),he=a.convert(0,B));for(var Ie=[],le=[],ge=[],xe=C.createSparseMatrix({values:Ie,index:le,ptr:ge,size:[ee,J],datatype:B}),be=0;be<J;be++){ge[be]=le.length;var Te=P[be],Ve=P[be+1];if(Ve>Te)for(var qe=0,Fe=0;Fe<ee;Fe++){for(var ft=Fe+1,at=void 0,Je=Te;Je<Ve;Je++){var pt=j[Je];qe!==ft?(at=R(T[Fe][pt],x[Je]),qe=ft):at=fe(at,R(T[Fe][pt],x[Je]))}qe===ft&&!se(at,he)&&(le.push(Fe),Ie.push(at))}}return ge[J]=le.length,xe},"SparseMatrix, DenseMatrix":function y(E,C){var T=E._values,N=E._index,O=E._ptr,x=E._datatype;if(!T)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var J,j=C._data,P=C._datatype,W=E._size[0],Q=C._size[0],ee=C._size[1],B=t,fe=r,R=o,se=0;x&&P&&x===P&&"string"==typeof x&&(B=a.find(t,[J=x,J]),fe=a.find(r,[J,J]),R=a.find(o,[J,J]),se=a.convert(0,J));for(var he=[],Ie=[],le=[],ge=E.createSparseMatrix({values:he,index:Ie,ptr:le,size:[W,ee],datatype:J}),xe=[],be=[],Te=0;Te<ee;Te++){le[Te]=Ie.length;for(var Ve=Te+1,qe=0;qe<Q;qe++){var Fe=j[qe][Te];if(!R(Fe,se))for(var at=O[qe+1],Je=O[qe];Je<at;Je++){var pt=N[Je];be[pt]!==Ve?(be[pt]=Ve,Ie.push(pt),xe[pt]=fe(Fe,T[Je])):xe[pt]=B(xe[pt],fe(Fe,T[Je]))}}for(var ne=Ie.length,ye=le[Te];ye<ne;ye++)he[ye]=xe[Ie[ye]]}return le[ee]=Ie.length,ge},"SparseMatrix, SparseMatrix":function w(E,C){var fe,T=E._values,N=E._index,O=E._ptr,x=E._datatype,j=C._values,P=C._index,W=C._ptr,Q=C._datatype,ee=E._size[0],J=C._size[1],B=T&&j,R=t,se=r;x&&Q&&x===Q&&"string"==typeof x&&(R=a.find(t,[fe=x,fe]),se=a.find(r,[fe,fe]));for(var Te,qe,Fe,at,Je,pt,he=B?[]:void 0,Ie=[],le=[],ge=E.createSparseMatrix({values:he,index:Ie,ptr:le,size:[ee,J],datatype:fe}),xe=B?[]:void 0,be=[],H=0;H<J;H++){le[H]=Ie.length;var ne=H+1;for(at=W[H+1],Fe=W[H];Fe<at;Fe++)if(pt=P[Fe],B)for(qe=O[pt+1],Te=O[pt];Te<qe;Te++)be[Je=N[Te]]!==ne?(be[Je]=ne,Ie.push(Je),xe[Je]=se(j[Fe],T[Te])):xe[Je]=R(xe[Je],se(j[Fe],T[Te]));else for(qe=O[pt+1],Te=O[pt];Te<qe;Te++)be[Je=N[Te]]!==ne&&(be[Je]=ne,Ie.push(Je));if(B)for(var Ce=Ie.length,Oe=le[H];Oe<Ce;Oe++)he[Oe]=xe[Ie[Oe]]}return le[J]=Ie.length,ge}});return a(n_,r,{"Array, Array":a.referTo("Matrix, Matrix",E=>(C,T)=>{u(Ot(C),Ot(T));var N=E(e(C),e(T));return Et(N)?N.valueOf():N}),"Matrix, Matrix":function(C,T){var N=C.size(),O=T.size();return u(N,O),1===N.length?1===O.length?function d(E,C,T){if(0===T)throw new Error("Cannot multiply two empty vectors");return s(E,C)}(C,T,N[0]):function f(E,C){if("dense"!==C.storage())throw new Error("Support for SparseMatrix not implemented");return function p(E,C){var ee,T=E._data,O=E._datatype,x=C._data,P=C._datatype,W=E._size[0],Q=C._size[1],J=t,B=r;O&&P&&O===P&&"string"==typeof O&&(J=a.find(t,[ee=O,ee]),B=a.find(r,[ee,ee]));for(var fe=[],R=0;R<Q;R++){for(var se=B(T[0],x[0][R]),he=1;he<W;he++)se=J(se,B(T[he],x[he][R]));fe[R]=se}return E.createDenseMatrix({data:fe,size:[Q],datatype:ee})}(E,C)}(C,T):1===O.length?m(C,T):h(C,T)},"Matrix, Array":a.referTo("Matrix,Matrix",E=>(C,T)=>E(C,e(T))),"Array, Matrix":a.referToSelf(E=>(C,T)=>E(e(C,T.storage()),T)),"SparseMatrix, any":function(C,T){return c(C,T,r,!1)},"DenseMatrix, any":function(C,T){return l(C,T,r,!1)},"any, SparseMatrix":function(C,T){return c(T,C,r,!0)},"any, DenseMatrix":function(C,T){return l(T,C,r,!0)},"Array, any":function(C,T){return l(e(C),T,r,!1).valueOf()},"any, Array":function(C,T){return l(e(T),C,r,!0).valueOf()},"any, any":r,"any, any, ...any":a.referToSelf(E=>(C,T,N)=>{for(var O=E(C,T),x=0;x<N.length;x++)O=E(O,N[x]);return O})})});L(8170);var rR=q("det",["typed","matrix","subtractScalar","multiply","divideScalar","isZero","unaryMinus"],i=>{var{typed:a,matrix:e,subtractScalar:t,multiply:r,divideScalar:o,isZero:s,unaryMinus:c}=i;return a("det",{any:function(d){return xt(d)},"Array | Matrix":function(d){var f;switch((f=Et(d)?d.size():Array.isArray(d)?(d=e(d)).size():[]).length){case 0:return xt(d);case 1:if(1===f[0])return xt(d.valueOf()[0]);if(0===f[0])return 1;throw new RangeError("Matrix must be square (size: "+Gt(f)+")");case 2:var p=f[0],m=f[1];if(p===m)return function l(u,d,f){if(1===d)return xt(u[0][0]);if(2===d)return t(r(u[0][0],u[1][1]),r(u[1][0],u[0][1]));for(var p=!1,m=new Array(d).fill(0).map((T,N)=>N),h=0;h<d;h++){var g=m[h];if(s(u[g][h])){var b=void 0;for(b=h+1;b<d;b++)if(!s(u[m[b]][h])){g=m[b],m[b]=m[h],m[h]=g,p=!p;break}if(b===d)return u[g][h]}for(var _=u[g][h],D=0===h?1:u[m[h-1]][h-1],y=h+1;y<d;y++)for(var w=m[y],E=h+1;E<d;E++)u[w][E]=o(t(r(u[w][E],_),r(u[w][h],u[g][E])),D)}var C=u[m[d-1]][d-1];return p?c(C):C}(d.clone().valueOf(),p);if(0===m)return 1;throw new RangeError("Matrix must be square (size: "+Gt(f)+")");default:throw new RangeError("Matrix must be two dimensional (size: "+Gt(f)+")")}}})}),ij=q("inv",["typed","matrix","divideScalar","addScalar","multiply","unaryMinus","det","identity","abs"],i=>{var{typed:a,matrix:e,divideScalar:t,addScalar:r,multiply:o,unaryMinus:s,det:c,identity:l,abs:u}=i;return a("inv",{"Array | Matrix":function(p){var m=Et(p)?p.size():Ot(p);switch(m.length){case 1:if(1===m[0])return Et(p)?e([t(1,p.valueOf()[0])]):[t(1,p[0])];throw new RangeError("Matrix must be square (size: "+Gt(m)+")");case 2:var h=m[0],g=m[1];if(h===g)return Et(p)?e(d(p.valueOf(),h,g),p.storage()):d(p,h,g);throw new RangeError("Matrix must be square (size: "+Gt(m)+")");default:throw new RangeError("Matrix must be two dimensional (size: "+Gt(m)+")")}},any:function(p){return t(1,p)}});function d(f,p,m){var h,g,b,_,D;if(1===p){if(0===(_=f[0][0]))throw Error("Cannot calculate inverse, determinant is zero");return[[t(1,_)]]}if(2===p){var y=c(f);if(0===y)throw Error("Cannot calculate inverse, determinant is zero");return[[t(f[1][1],y),t(s(f[0][1]),y)],[t(s(f[1][0]),y),t(f[0][0],y)]]}var w=f.concat();for(h=0;h<p;h++)w[h]=w[h].concat();for(var E=l(p).valueOf(),C=0;C<m;C++){var T=u(w[C][C]),N=C;for(h=C+1;h<p;)u(w[h][C])>T&&(T=u(w[h][C]),N=h),h++;if(0===T)throw Error("Cannot calculate inverse, determinant is zero");(h=N)!==C&&(D=w[C],w[C]=w[h],w[h]=D,D=E[C],E[C]=E[h],E[h]=D);var O=w[C],x=E[C];for(h=0;h<p;h++){var j=w[h],P=E[h];if(h!==C){if(0!==j[C]){for(b=t(s(j[C]),O[C]),g=C;g<m;g++)j[g]=r(j[g],o(b,O[g]));for(g=0;g<m;g++)P[g]=r(P[g],o(b,x[g]))}}else{for(b=O[C],g=C;g<m;g++)j[g]=t(j[g],b);for(g=0;g<m;g++)P[g]=t(P[g],b)}}}return E}}),Bj=q("divide",["typed","matrix","multiply","equalScalar","divideScalar","inv"],i=>{var{typed:a,matrix:e,multiply:t,equalScalar:r,divideScalar:o,inv:s}=i,c=ti({typed:a,equalScalar:r}),l=ki({typed:a});return a("divide",function im(i,a){for(var e in a)dn(a,e)&&(i[e]=a[e]);return i}({"Array | Matrix, Array | Matrix":function(d,f){return t(d,s(f))},"DenseMatrix, any":function(d,f){return l(d,f,o,!1)},"SparseMatrix, any":function(d,f){return c(d,f,o,!1)},"Array, any":function(d,f){return l(e(d),f,o,!1).valueOf()},"any, Array | Matrix":function(d,f){return t(d,s(f))}},o.signatures))}),We=EE({config:Le}),vn=VE({}),Qo=pF({}),su=hF({}),$t=RF({Matrix:su}),ce=WF({BigNumber:We,Complex:vn,DenseMatrix:$t,Fraction:Qo}),mi=iI({typed:ce}),Zn=CI({typed:ce}),Xo=RI({BigNumber:We,typed:ce}),Yo=tA({typed:ce}),Zt=fA({config:Le,typed:ce}),ea=WA({typed:ce}),$n=a2({typed:ce}),lo=m2({typed:ce}),Gr=B2({Matrix:su,equalScalar:Zt,typed:ce}),Pi=z2({typed:ce}),Mr=IT({typed:ce}),Ty=RT({Fraction:Qo,typed:ce}),Xe=$T({DenseMatrix:$t,Matrix:su,SparseMatrix:Gr,typed:ce}),Wa=ZT({bignumber:Xo,fraction:Ty,number:lo}),gi=eN({matrix:Xe,config:Le,typed:ce}),Ii=cN({BigNumber:We,config:Le,matrix:Xe,typed:ce}),On=MN({numeric:Wa,typed:ce}),fo=YN({BigNumber:We,DenseMatrix:$t,SparseMatrix:Gr,config:Le,matrix:Xe,typed:ce}),na=NL({BigNumber:We,DenseMatrix:$t,equalScalar:Zt,matrix:Xe,typed:ce,zeros:Ii}),Cn=XO({addScalar:Zn,dot:SO({addScalar:Zn,conj:Yo,multiplyScalar:$n,size:gi,typed:ce}),equalScalar:Zt,matrix:Xe,multiplyScalar:$n,typed:ce}),Ti=Bj({divideScalar:On,equalScalar:Zt,inv:ij({abs:mi,addScalar:Zn,det:rR({divideScalar:On,isZero:ea,matrix:Xe,multiply:Cn,subtractScalar:Pi,typed:ce,unaryMinus:Mr}),divideScalar:On,identity:fo,matrix:Xe,multiply:Cn,typed:ce,unaryMinus:Mr}),matrix:Xe,multiply:Cn,typed:ce}),Rt=L(3510),Wt=L(3656),De=L(2496),Un=L(4462),Dr=L(3984);function Ak(i,a){}const uc=()=>{const i=typeof window<"u"?window:void 0;return i&&i.tinymce?i.tinymce:null};let Tk=(()=>{class i{constructor(){this.onBeforePaste=new n.EventEmitter,this.onBlur=new n.EventEmitter,this.onClick=new n.EventEmitter,this.onContextMenu=new n.EventEmitter,this.onCopy=new n.EventEmitter,this.onCut=new n.EventEmitter,this.onDblclick=new n.EventEmitter,this.onDrag=new n.EventEmitter,this.onDragDrop=new n.EventEmitter,this.onDragEnd=new n.EventEmitter,this.onDragGesture=new n.EventEmitter,this.onDragOver=new n.EventEmitter,this.onDrop=new n.EventEmitter,this.onFocus=new n.EventEmitter,this.onFocusIn=new n.EventEmitter,this.onFocusOut=new n.EventEmitter,this.onKeyDown=new n.EventEmitter,this.onKeyPress=new n.EventEmitter,this.onKeyUp=new n.EventEmitter,this.onMouseDown=new n.EventEmitter,this.onMouseEnter=new n.EventEmitter,this.onMouseLeave=new n.EventEmitter,this.onMouseMove=new n.EventEmitter,this.onMouseOut=new n.EventEmitter,this.onMouseOver=new n.EventEmitter,this.onMouseUp=new n.EventEmitter,this.onPaste=new n.EventEmitter,this.onSelectionChange=new n.EventEmitter,this.onActivate=new n.EventEmitter,this.onAddUndo=new n.EventEmitter,this.onBeforeAddUndo=new n.EventEmitter,this.onBeforeExecCommand=new n.EventEmitter,this.onBeforeGetContent=new n.EventEmitter,this.onBeforeRenderUI=new n.EventEmitter,this.onBeforeSetContent=new n.EventEmitter,this.onChange=new n.EventEmitter,this.onClearUndos=new n.EventEmitter,this.onDeactivate=new n.EventEmitter,this.onDirty=new n.EventEmitter,this.onExecCommand=new n.EventEmitter,this.onGetContent=new n.EventEmitter,this.onHide=new n.EventEmitter,this.onInit=new n.EventEmitter,this.onInitNgModel=new n.EventEmitter,this.onLoadContent=new n.EventEmitter,this.onNodeChange=new n.EventEmitter,this.onPostProcess=new n.EventEmitter,this.onPostRender=new n.EventEmitter,this.onPreInit=new n.EventEmitter,this.onPreProcess=new n.EventEmitter,this.onProgressState=new n.EventEmitter,this.onRedo=new n.EventEmitter,this.onRemove=new n.EventEmitter,this.onReset=new n.EventEmitter,this.onResizeEditor=new n.EventEmitter,this.onSaveContent=new n.EventEmitter,this.onSetAttrib=new n.EventEmitter,this.onObjectResizeStart=new n.EventEmitter,this.onObjectResized=new n.EventEmitter,this.onObjectSelected=new n.EventEmitter,this.onSetContent=new n.EventEmitter,this.onShow=new n.EventEmitter,this.onSubmit=new n.EventEmitter,this.onUndo=new n.EventEmitter,this.onVisualAid=new n.EventEmitter}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=n.\u0275\u0275defineDirective({type:i,outputs:{onBeforePaste:"onBeforePaste",onBlur:"onBlur",onClick:"onClick",onContextMenu:"onContextMenu",onCopy:"onCopy",onCut:"onCut",onDblclick:"onDblclick",onDrag:"onDrag",onDragDrop:"onDragDrop",onDragEnd:"onDragEnd",onDragGesture:"onDragGesture",onDragOver:"onDragOver",onDrop:"onDrop",onFocus:"onFocus",onFocusIn:"onFocusIn",onFocusOut:"onFocusOut",onKeyDown:"onKeyDown",onKeyPress:"onKeyPress",onKeyUp:"onKeyUp",onMouseDown:"onMouseDown",onMouseEnter:"onMouseEnter",onMouseLeave:"onMouseLeave",onMouseMove:"onMouseMove",onMouseOut:"onMouseOut",onMouseOver:"onMouseOver",onMouseUp:"onMouseUp",onPaste:"onPaste",onSelectionChange:"onSelectionChange",onActivate:"onActivate",onAddUndo:"onAddUndo",onBeforeAddUndo:"onBeforeAddUndo",onBeforeExecCommand:"onBeforeExecCommand",onBeforeGetContent:"onBeforeGetContent",onBeforeRenderUI:"onBeforeRenderUI",onBeforeSetContent:"onBeforeSetContent",onChange:"onChange",onClearUndos:"onClearUndos",onDeactivate:"onDeactivate",onDirty:"onDirty",onExecCommand:"onExecCommand",onGetContent:"onGetContent",onHide:"onHide",onInit:"onInit",onInitNgModel:"onInitNgModel",onLoadContent:"onLoadContent",onNodeChange:"onNodeChange",onPostProcess:"onPostProcess",onPostRender:"onPostRender",onPreInit:"onPreInit",onPreProcess:"onPreProcess",onProgressState:"onProgressState",onRedo:"onRedo",onRemove:"onRemove",onReset:"onReset",onResizeEditor:"onResizeEditor",onSaveContent:"onSaveContent",onSetAttrib:"onSetAttrib",onObjectResizeStart:"onObjectResizeStart",onObjectResized:"onObjectResized",onObjectSelected:"onObjectSelected",onSetContent:"onSetContent",onShow:"onShow",onSubmit:"onSubmit",onUndo:"onUndo",onVisualAid:"onVisualAid"}}),i})();const Wy=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onResizeEditor","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],dc=(i,a,e)=>(0,S.fromEvent)(i,a).pipe((0,v.takeUntil)(e)),Ky=(i,a)=>"string"==typeof i?i.split(",").map(e=>e.trim()):Array.isArray(i)?i:a;let Hy=0;const Zy=i=>typeof i<"u"&&"textarea"===i.tagName.toLowerCase(),qy=i=>typeof i>"u"||""===i?[]:Array.isArray(i)?i:i.split(" "),Bk=(i,a)=>qy(i).concat(qy(a)),Rk=()=>{},Jy=i=>null==i,jk=(()=>{let i={script$:null};return{load:(t,r)=>i.script$||(i.script$=(0,S.defer)(()=>{const o=t.createElement("script");return o.referrerPolicy="origin",o.type="application/javascript",o.src=r,t.head.appendChild(o),(0,S.fromEvent)(o,"load").pipe((0,v.take)(1),(0,v.mapTo)(void 0))}).pipe((0,v.shareReplay)({bufferSize:1,refCount:!0}))),reinitialize:()=>{i={script$:null}}}})(),gu=new n.InjectionToken("TINYMCE_SCRIPT_SRC"),kk={provide:De.NG_VALUE_ACCESSOR,useExisting:(0,n.forwardRef)(()=>fc),multi:!0};let fc=(()=>{class i extends Tk{constructor(e,t,r,o){super(),this.platformId=r,this.tinymceScriptSrc=o,this.cloudChannel="6",this.apiKey="no-api-key",this.id="",this.modelEvents="change input undo redo",this.onTouchedCallback=Rk,this.destroy$=new S.Subject,this.initialise=()=>{const s={...this.init,selector:void 0,target:this._element,inline:this.inline,readonly:this.disabled,plugins:Bk(this.init&&this.init.plugins,this.plugins),toolbar:this.toolbar||this.init&&this.init.toolbar,setup:c=>{this._editor=c,dc(c,"init",this.destroy$).subscribe(()=>{this.initEditor(c)}),((i,a,e)=>{(i=>{const a=Ky(i.ignoreEvents,[]);return Ky(i.allowedEvents,Wy).filter(t=>Wy.includes(t)&&!a.includes(t))})(i).forEach(r=>{const o=i[r];dc(a,r.substring(2),e).subscribe(s=>{o.observers.length>0&&i.ngZone.run(()=>o.emit({event:s,editor:a}))})})})(this,c,this.destroy$),this.init&&"function"==typeof this.init.setup&&this.init.setup(c)}};Zy(this._element)&&(this._element.style.visibility=""),this.ngZone.runOutsideAngular(()=>{uc().init(s)})},this._elementRef=e,this.ngZone=t}set disabled(e){this._disabled=e,this._editor&&this._editor.initialized&&("function"==typeof this._editor.mode?.set?this._editor.mode.set(e?"readonly":"design"):this._editor.setMode(e?"readonly":"design"))}get disabled(){return this._disabled}get editor(){return this._editor}writeValue(e){this._editor&&this._editor.initialized?this._editor.setContent(Jy(e)?"":e):this.initialValue=null===e?void 0:e}registerOnChange(e){this.onChangeCallback=e}registerOnTouched(e){this.onTouchedCallback=e}setDisabledState(e){this.disabled=e}ngAfterViewInit(){(0,F.isPlatformBrowser)(this.platformId)&&(this.id=this.id||(i=>{const e=(new Date).getTime(),t=Math.floor(1e9*Math.random());return Hy++,"tiny-angular_"+t+Hy+String(e)})(),this.inline=void 0!==this.inline?!1!==this.inline:!!this.init?.inline,this.createElement(),null!==uc()?this.initialise():this._element&&this._element.ownerDocument&&jk.load(this._element.ownerDocument,this.getScriptSrc()).pipe((0,v.takeUntil)(this.destroy$)).subscribe(this.initialise))}ngOnDestroy(){this.destroy$.next(),null!==uc()&&uc().remove(this._editor)}createElement(){this._element=document.createElement(this.inline?"string"==typeof this.tagName?this.tagName:"div":"textarea"),this._element&&(document.getElementById(this.id)&&console.warn(`TinyMCE-Angular: an element with id [${this.id}] already exists. Editors with duplicate Id will not be able to mount`),this._element.id=this.id,Zy(this._element)&&(this._element.style.visibility="hidden"),this._elementRef.nativeElement.appendChild(this._element))}getScriptSrc(){return Jy(this.tinymceScriptSrc)?`https://cdn.tiny.cloud/1/${this.apiKey}/tinymce/${this.cloudChannel}/tinymce.min.js`:this.tinymceScriptSrc}initEditor(e){dc(e,"blur",this.destroy$).subscribe(()=>{this.ngZone.run(()=>this.onTouchedCallback())}),dc(e,this.modelEvents,this.destroy$).subscribe(()=>{this.ngZone.run(()=>this.emitOnChange(e))}),"string"==typeof this.initialValue&&this.ngZone.run(()=>{e.setContent(this.initialValue),e.getContent()!==this.initialValue&&this.emitOnChange(e),void 0!==this.onInitNgModel&&this.onInitNgModel.emit(e)})}emitOnChange(e){this.onChangeCallback&&this.onChangeCallback(e.getContent({format:this.outputFormat}))}}return i.\u0275fac=function(e){return new(e||i)(n.\u0275\u0275directiveInject(n.ElementRef),n.\u0275\u0275directiveInject(n.NgZone),n.\u0275\u0275directiveInject(n.PLATFORM_ID),n.\u0275\u0275directiveInject(gu,8))},i.\u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["editor"]],inputs:{cloudChannel:"cloudChannel",apiKey:"apiKey",init:"init",id:"id",initialValue:"initialValue",outputFormat:"outputFormat",inline:"inline",tagName:"tagName",plugins:"plugins",toolbar:"toolbar",modelEvents:"modelEvents",allowedEvents:"allowedEvents",ignoreEvents:"ignoreEvents",disabled:"disabled"},standalone:!0,features:[n.\u0275\u0275ProvidersFeature([kk]),n.\u0275\u0275InheritDefinitionFeature,n.\u0275\u0275StandaloneFeature],decls:1,vars:0,template:function(e,t){1&e&&n.\u0275\u0275template(0,Ak,0,0,"ng-template")},dependencies:[F.CommonModule,De.FormsModule],styles:["[_nghost-%COMP%]{display:block}"]}),i})(),Xy=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=n.\u0275\u0275defineNgModule({type:i}),i.\u0275inj=n.\u0275\u0275defineInjector({imports:[fc]}),i})();var Ha=L(8176),Yy=L(1196),pc=L(3080),Pk=L(8123),Vi=L(4463),e0=L(6593),ra=L(5861);let po={};const Za={},t0={};let n0=!1;function hu(){return(hu=(0,ra.Z)(function*(i,a){return(yield Za[i].get(a))()})).apply(this,arguments)}function r0(i,a){return vu.apply(this,arguments)}function vu(){return(vu=(0,ra.Z)(function*(i,a){return t0[a]||(n0||(yield L.I("default"),n0=!0),yield i.init(L.S.default),t0[a]=!0),i})).apply(this,arguments)}function yu(){return yu=(0,ra.Z)(function*(i,a){if("string"==typeof i)return yield o0(i,a);if("script"===i.type){const e=i;return yield o0(e.remoteEntry,e.remoteName)}"module"===i.type&&(yield function Uk(i){return bu.apply(this,arguments)}(i.remoteEntry))}),yu.apply(this,arguments)}function bu(){return(bu=(0,ra.Z)(function*(i){return Za[i]?Promise.resolve():yield import(i).then(a=>{r0(a,i),Za[i]=a})})).apply(this,arguments)}function o0(i,a){return Cu.apply(this,arguments)}function Cu(){return(Cu=(0,ra.Z)(function*(i,a){return new Promise((e,t)=>{if(Za[a])return void e();const r=document.createElement("script");r.src=i,r.onerror=t,r.onload=()=>{const o=window[a];r0(o,a),Za[a]=o,e()},document.body.appendChild(r)})})).apply(this,arguments)}function Mu(){return Mu=(0,ra.Z)(function*(i,a){let e,t,r,o;if(o="string"==typeof i?{type:"manifest",remoteName:i,exposedModule:a}:i,!o.type){const s=Object.keys(po).length>0;o.type=s?"manifest":"script"}if("manifest"===o.type){const s=po[o.remoteName];if(!s)throw new Error("Manifest does not contain "+o.remoteName);o={type:s.type,exposedModule:o.exposedModule,remoteEntry:s.remoteEntry,remoteName:"script"===s.type?o.remoteName:void 0},r=s.remoteEntry}else r=o.remoteEntry;return"script"===o.type?(e={type:"script",remoteEntry:o.remoteEntry,remoteName:o.remoteName},t=o.remoteName):"module"===o.type&&(e={type:"module",remoteEntry:o.remoteEntry},t=o.remoteEntry),r&&(yield function _u(i,a){return yu.apply(this,arguments)}(e)),yield function $k(i,a){return hu.apply(this,arguments)}(t,o.exposedModule)}),Mu.apply(this,arguments)}var qn=function(i){return i.XSmall="XSmall",i.Small="Small",i.Medium="Medium",i.Large="Large",i.XLarge="XLarge",i}(qn||{});let hi=(()=>{class i{breakpointObserver;screenSize=new S.BehaviorSubject(qn.Medium);screenSize$=this.screenSize.asObservable();constructor(e){this.breakpointObserver=e,this.initScreenSizeObservable()}initScreenSizeObservable(){(0,S.merge)(this.breakpointObserver.observe(["(max-width: 599.98px)"]).pipe((0,v.map)(e=>{if(e.matches)return qn.XSmall})),this.breakpointObserver.observe(["(min-width: 600px) and (max-width: 959.98px)"]).pipe((0,v.map)(e=>{if(e.matches)return qn.Small})),this.breakpointObserver.observe(["(min-width: 960px) and (max-width: 1279.98px)"]).pipe((0,v.map)(e=>{if(e.matches)return qn.Medium})),this.breakpointObserver.observe(["(min-width: 1280px) and (max-width: 1919.98px)"]).pipe((0,v.map)(e=>{if(e.matches)return qn.Large})),this.breakpointObserver.observe(["(min-width: 1920px)"]).pipe((0,v.map)(e=>{if(e.matches)return qn.XLarge}))).subscribe(e=>{e&&this.screenSize.next(e)})}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject($))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),oa=(()=>{class i{apollo;constructor(e){this.apollo=e}fetch(e,t,r){const s={query:me.gql`
              query ${e}($id: ID!) {
                ${e}(id: $id) {
                  ${r.fields.join("\n")}
                }
              }
            `,variables:{id:t}};return this.apollo.query(s)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(me.Apollo))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),wr=(()=>{class i{storageKey="scrm-session-storage";stickyStorageKey="scrm-sticky-session-storage";constructor(){}clear(){this.getLocalStorage().removeItem(this.storageKey);const e=this.getLocalStorage().getItem(this.stickyStorageKey);e&&this.getLocalStorage().setItem(this.storageKey,e)}set(e,t,r=!1){this.store(this.storageKey,e,t),r&&this.store(this.stickyStorageKey,e,t)}store(e,t,r){const o=this.getLocalStorage().getItem(e);let s={};o&&(s=JSON.parse(o)),s[t]=r,this.getLocalStorage().setItem(e,JSON.stringify(s))}get(e){const t=this.getLocalStorage().getItem(this.storageKey);let r={};return t&&(r=JSON.parse(t)),r[e]}getLocalStorage(){return localStorage}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),c0=(()=>{class i{apollo;constructor(e){this.apollo=e}create(e,t,r,o){const c={mutation:me.gql`
                mutation create${t}($input: create${t}Input!) {
                  create${t}(input: $input) {
                    ${e} {
                      ${o.fields.join("\n")}
                    }
                    clientMutationId
                  }
                }
            `,variables:{input:r}};return this.apollo.mutate(c)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(me.Apollo))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const Wk={id:null,_id:null,status:null,async:null,type:null,options:null,messages:[]};let ir=(()=>{class i{recordMutationGQL;graphqlName="process";coreName="Process";createFieldsMetadata={fields:["_id","status","async","type","messages","data"]};constructor(e){this.recordMutationGQL=e}submit(e,t){return this.create(e,t)}create(e,t){return this.recordMutationGQL.create(this.graphqlName,this.coreName,{type:e,options:t},this.createFieldsMetadata).pipe((0,v.map)(({data:o})=>{const s={...Wk};return o.createProcess&&o.createProcess.process?o.createProcess.process:s}))}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(c0))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),xu=(()=>{class i{apollo;constructor(e){this.apollo=e}fetchAll(e,t){const o={query:me.gql`
                query ${e}{
                    ${e} {
                        edges {
                            node {
                                ${t.fields.join("\n")}
                            }
                        }
                    }
                }
            `};return this.apollo.query(o)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(me.Apollo))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const l0={configs:{},loading:!1};let rr=(0,M.deepClone)(l0),aa=null,vt=(()=>{class i{collectionGQL;configs$;loading$;store=new S.BehaviorSubject(rr);state$=this.store.asObservable();resourceName="systemConfigs";fieldsMetadata={fields:["id","_id","value","items"]};constructor(e){this.collectionGQL=e,this.configs$=this.state$.pipe((0,v.map)(t=>t.configs),(0,v.distinctUntilChanged)()),this.loading$=this.state$.pipe((0,v.map)(t=>t.loading))}getConfigValue(e){return rr.configs&&rr.configs[e]?null!==rr.configs[e].value?rr.configs[e].value:rr.configs[e].items:null}getUi(e){return(this.getConfigValue("ui")??{})[e]??null}getHomePage(){let e="home";const t=this.getConfigValue("default_module");return t&&(e=t),e}clear(){aa=null,this.updateState((0,M.deepClone)(l0))}clearAuthBased(){this.clear()}load(){return this.updateState({...rr,loading:!0}),this.getSystemConfigs().pipe((0,v.tap)(e=>{this.updateState({...rr,configs:e,loading:!1})}))}isCached(){return null!==aa}set(e){aa=(0,S.of)(e).pipe((0,v.shareReplay)(1)),this.updateState({...rr,configs:e,loading:!1})}updateState(e){this.store.next(rr=e)}getSystemConfigs(){return null==aa&&(aa=this.fetch().pipe((0,v.shareReplay)(1))),aa}fetch(){return this.collectionGQL.fetchAll(this.resourceName,this.fieldsMetadata).pipe((0,v.map)(({data:e})=>{const t={};return e.systemConfigs&&e.systemConfigs.edges&&e.systemConfigs.edges.forEach(r=>{t[r.node._id]=r.node}),t}))}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(xu))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const u0={appStrings:{},appListStrings:{},modStrings:{},languageKey:"en_us",loaded:{},hasChanged:!1};let Bn=(0,M.deepClone)(u0);const d0={appStrings:{},appListStrings:{},modStrings:{}};let or={},ar=(0,M.deepClone)(d0),$e=(()=>{class i{recordGQL;localStorage;processService;configs;appStrings$;appListStrings$;modStrings$;languageKey$;vm$;store=new S.BehaviorSubject(Bn);state$=this.store.asObservable();config={appStrings:{fetch:"fetchAppStrings",resourceName:"appStrings",metadata:{fields:["id","_id","items"]}},appListStrings:{fetch:"fetchAppListStrings",resourceName:"appListStrings",metadata:{fields:["id","_id","items"]}},modStrings:{fetch:"fetchModStrings",resourceName:"modStrings",metadata:{fields:["id","_id","items"]}}};constructor(e,t,r,o){this.recordGQL=e,this.localStorage=t,this.processService=r,this.configs=o,this.appStrings$=this.state$.pipe((0,v.map)(s=>s.appStrings),(0,v.distinctUntilChanged)()),this.appListStrings$=this.state$.pipe((0,v.map)(s=>s.appListStrings),(0,v.distinctUntilChanged)()),this.modStrings$=this.state$.pipe((0,v.map)(s=>s.modStrings),(0,v.distinctUntilChanged)()),this.languageKey$=this.state$.pipe((0,v.map)(s=>s.languageKey),(0,v.distinctUntilChanged)()),this.vm$=this.appStrings$.pipe((0,S.combineLatestWith)(this.appListStrings$,this.modStrings$,this.languageKey$),(0,v.map)(([s,c,l,u])=>({appStrings:s,appListStrings:c,modStrings:l,languageKey:u})))}clear(){or={},ar=(0,M.deepClone)(d0),this.updateState((0,M.deepClone)(u0))}clearAuthBased(){["modStrings","appListStrings"].forEach(t=>{or&&or[t]&&delete or[t]}),ar.modStrings={},ar.appListStrings={}}changeLanguage(e,t=!1){const r=[];return Object.keys(or).forEach(o=>or[o]&&r.push(o)),Bn.hasChanged=!0,this.load(e,r,t).pipe((0,v.tap)(()=>{this.localStorage.set("selected_language",e,!0)}))}getLanguageStrings(){return Bn?{appStrings:Bn.appStrings,appListStrings:Bn.appListStrings,modStrings:Bn.modStrings,languageKey:Bn.languageKey}:null}getAppString(e){return Bn.appStrings&&Bn.appStrings[e]?Bn.appStrings[e]:null}getAppListString(e){return Bn.appListStrings&&Bn.appListStrings[e]?Bn.appListStrings[e]:null}getModString(e){return Bn.modStrings&&Bn.modStrings[e]?Bn.modStrings[e]:null}getFieldLabel(e,t=null,r=null){let o=r;if(r||(o=this.getLanguageStrings()),!o||!o.modStrings||!e)return"";let s="";return t&&(s=o.modStrings[t]&&o.modStrings[t][e]),s||(s=o.appStrings&&o.appStrings[e]),s||""}getListLabel(e,t){if(!e||!t)return"";const r=this.getAppListString(e);return r&&r[t]||""}getAvailableStringsTypes(){return Object.keys(this.config)}hasLanguageChanged(){return Bn.hasChanged}getCurrentLanguage(){return this.localStorage.get("selected_language")||(Bn.languageKey??"en_us")}getActiveLanguage(){return Bn.languageKey??""}getSelectedLanguage(){return this.localStorage.get("selected_language")??""}isLanguageEnabled(e){if(!e)return!1;const t=this.configs.getConfigValue("languages")??{},r=this.getDisabledLanguages(),o=Object.keys(t);return!!o.length&&o.includes(e)&&!r.includes(e)}getDisabledLanguages(){const e=this.configs.getConfigValue("disabled_languages")??"";return(0,ie.isString)(e)&&""!==e?e.replace(" ","").split(","):[]}getEnabledLanguages(){const e=this.configs.getConfigValue("languages")??{},t=this.getDisabledLanguages(),r={};return Object.keys(e).filter(s=>!t.includes(s)).forEach(s=>{r[s]=e[s]}),r}getFirstLanguage(){const e=this.configs.getConfigValue("languages")??{};return Object.keys(e).sort()[0]??""}load(e,t,r=!1){const o=[];return t.forEach(s=>o.push(this.getStrings(e,s,r))),(0,S.forkJoin)(o).pipe((0,v.first)(),(0,v.tap)(s=>{const c={...Bn,languageKey:e};t.forEach((l,u)=>{c[l]=s[u],or[l]=!0}),this.updateState(c)}))}areAllCached(){let e=!0;return e=e&&!(0,M.emptyObject)(ar?.appStrings??{}),e=e&&!(0,M.emptyObject)(ar?.appListStrings??{}),e=e&&!(0,M.emptyObject)(ar?.modStrings??{}),e}set(e,t){const r={...Bn,languageKey:e};t.appStrings&&!(0,M.emptyObject)(t.appStrings)&&(ar.appStrings[e]=(0,S.of)(t.appStrings).pipe((0,v.shareReplay)(1)),r.appStrings=t.appStrings,or.appStrings=!0),t.appListStrings&&!(0,M.emptyObject)(t.appListStrings)&&(ar.appListStrings[e]=(0,S.of)(t.appListStrings).pipe((0,v.shareReplay)(1)),r.appListStrings=t.appListStrings,or.appListStrings=!0),t.modStrings&&!(0,M.emptyObject)(t.modStrings)&&(ar.modStrings[e]=(0,S.of)(t.modStrings).pipe((0,v.shareReplay)(1)),r.modStrings=t.modStrings,or.modStrings=!0),this.updateState(r)}setSessionLanguage(){return this.processService.submit("set-session-language",{language:Bn.languageKey}).pipe((0,v.take)(1))}updateState(e){this.store.next(Bn=e)}getStrings(e,t,r=!1){const o=ar[t];return o[e]&&!1===r||(o[e]=this[this.config[t].fetch](e).pipe((0,v.shareReplay)(1))),o[e]}fetchAppStrings(e){return this.recordGQL.fetch(this.config.appStrings.resourceName,`/api/app-strings/${e}`,this.config.appStrings.metadata).pipe((0,v.map)(({data:o})=>{let s={};return o.appStrings&&(s=o.appStrings.items),s}))}fetchAppListStrings(e){return this.recordGQL.fetch(this.config.appListStrings.resourceName,`/api/app-list-strings/${e}`,this.config.appListStrings.metadata).pipe((0,v.map)(({data:o})=>{let s={};return o.appListStrings&&(s=o.appListStrings.items),s}))}fetchModStrings(e){return this.recordGQL.fetch(this.config.modStrings.resourceName,`/api/mod-strings/${e}`,this.config.modStrings.metadata).pipe((0,v.map)(({data:o})=>{let s={};return o.modStrings&&(s=o.modStrings.items),s}))}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(oa),n.\u0275\u0275inject(wr),n.\u0275\u0275inject(ir),n.\u0275\u0275inject(vt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),f0=(()=>{class i{config;delayConfigKey;loading$;loadingStore=new S.BehaviorSubject(!1);loadingBufferStore=new S.BehaviorSubject(!1);loadingBufferStore$;subs=[];buffered=!1;constructor(e,t="loading_display_delay"){this.config=e,this.delayConfigKey=t,this.loading$=this.loadingStore.asObservable();const r=e.getConfigValue("ui")??{},o=parseInt(r[t]??"")??1500;this.loadingBufferStore$=this.loadingBufferStore.asObservable().pipe((0,v.debounceTime)(o)),this.subs.push(this.loadingBufferStore$.subscribe(s=>{this.buffered&&this.loadingStore.next(s)}))}updateLoading(e){if(!0===e)return this.buffered=!0,void this.loadingBufferStore.next(e);this.buffered=!1,this.loadingStore.next(e),this.loadingBufferStore.next(e)}static \u0275fac=function(t){n.\u0275\u0275invalidFactory()};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),Fu=(()=>{class i{config;constructor(e){this.config=e}create(e="loading_display_delay"){return new f0(this.config,e)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(vt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const p0={loading:!1,initialAppLoading:!0,module:null,view:null,loaded:!1,routeUrl:null,preLoginUrl:null,currentUser:null,activeRequests:0};let Dn=(0,M.deepClone)(p0),Xt=(()=>{class i{loadingBufferFactory;configs;loading$;module$;view$;initialAppLoading$;activeRequests$;vm$;store=new S.BehaviorSubject(Dn);state$=this.store.asObservable();loadingQueue={};loadingBuffer;subs=[];constructor(e,t){this.loadingBufferFactory=e,this.configs=t,this.loading$=this.state$.pipe((0,v.map)(r=>r.loading),(0,v.distinctUntilChanged)()),this.module$=this.state$.pipe((0,v.map)(r=>r.module),(0,v.distinctUntilChanged)()),this.view$=this.state$.pipe((0,v.map)(r=>r.view),(0,v.distinctUntilChanged)()),this.initialAppLoading$=this.state$.pipe((0,v.map)(r=>r.initialAppLoading),(0,v.distinctUntilChanged)()),this.activeRequests$=this.state$.pipe((0,v.map)(r=>r.activeRequests),(0,v.distinctUntilChanged)()),this.vm$=this.loading$.pipe((0,S.combineLatestWith)(this.module$,this.view$,this.initialAppLoading$),(0,v.map)(([r,o,s,c])=>({loading:r,module:o,view:s,loaded:Dn.loaded,initialAppLoading:c})))}clear(){this.loadingQueue={},this.updateState((0,M.deepClone)(p0)),this.subs.forEach(e=>e.unsubscribe())}clearAuthBased(){}init(){this.initLoadingBuffer()}isLoggedIn(){return!!Dn.currentUser}getCurrentUser(){return Dn.currentUser}setCurrentUser(e){(0,M.isVoid)(e)?this.onLogout():this.onLogin(),this.updateState({...Dn,currentUser:e})}onLogin(){}onLogout(){this.updateState({...Dn,preLoginUrl:null})}getActiveRequests(){return Dn.activeRequests}addActiveRequest(){let e=Dn.activeRequests;(0,M.isVoid)(e)&&(e=0),e++,this.updateState({...Dn,activeRequests:e})}removeActiveRequest(){let e=Dn.activeRequests;(0,M.isVoid)(e)?e=0:e--,e<0&&(e=0),this.updateState({...Dn,activeRequests:e})}updateLoading(e,t,r=!0){if(this.initLoadingBuffer(),!0===t)return this.addToLoadingQueue(e),this.loadingBuffer.updateLoading(t),void(r||this.updateState({...Dn,loading:t}));this.removeFromLoadingQueue(e),this.hasActiveLoading()&&(this.loadingBuffer.updateLoading(t),this.updateState({...Dn,loading:t}))}updateInitialAppLoading(e){this.updateState({...Dn,initialAppLoading:e})}isLoaded(){return Dn.loaded}setLoaded(e){this.updateState({...Dn,loaded:e})}setModule(e){this.updateState({...Dn,module:e})}getModule(){return Dn?.module??""}setView(e){this.updateState({...Dn,view:e})}getView(){return Dn.view}setRouteUrl(e){this.updateState({...Dn,routeUrl:e})}getRouteUrl(){return Dn.routeUrl}setPreLoginUrl(e){this.updateState({...Dn,preLoginUrl:e})}getPreLoginUrl(){return Dn.preLoginUrl??""}initLoadingBuffer(){this.loadingBuffer||(this.loadingBuffer=this.loadingBufferFactory.create(),this.subs.push(this.loadingBuffer.loading$.subscribe(e=>{this.updateState({...Dn,loading:e})})))}hasActiveLoading(){return Object.keys(this.loadingQueue).length<1}removeFromLoadingQueue(e){this.loadingQueue[e]&&delete this.loadingQueue[e]}addToLoadingQueue(e){this.loadingQueue[e]=!0}updateState(e){this.store.next(Dn=e)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Fu),n.\u0275\u0275inject(vt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const m0={theme:null,images:{}};let qa=(0,M.deepClone)(m0),mc=null,sa=null,Kr=(()=>{class i{recordGQL;appStateStore;iconRegistry;images$;store=new S.BehaviorSubject(qa);state$=this.store.asObservable();resourceName="themeImages";frontendName="theme-images";fieldsMetadata={fields:["id","_id","items"]};constructor(e,t,r){this.recordGQL=e,this.appStateStore=t,this.iconRegistry=r,this.images$=this.state$.pipe((0,v.map)(o=>o.images),(0,v.distinctUntilChanged)())}clear(){mc=null,sa=null,this.updateState((0,M.deepClone)(m0))}clearAuthBased(){}changeTheme(e){this.appStateStore.updateLoading("change-theme",!0),this.load(e).pipe((0,v.tap)(()=>this.appStateStore.updateLoading("change-theme",!1))).subscribe()}getTheme(){return qa.theme}load(e){return this.getThemeImages(e).pipe((0,v.tap)(t=>{this.updateState({...qa,images:t,theme:e})}))}isCached(){return null!==sa}set(e,t){mc=e,this.registerSvgs(t),sa=(0,S.of)(t).pipe((0,v.shareReplay)(1)),this.updateState({...qa,images:t})}updateState(e){this.store.next(qa=e)}getThemeImages(e){return(mc!==e||null===sa)&&(mc=e,sa=this.fetch(e).pipe((0,v.shareReplay)(1))),sa}registerSvgs(e){Object.keys(e).forEach(t=>{const r=e[t],o=r.content??"",s=r.name??"";""===o||""===s||this.iconRegistry.addSvg(s,o)})}fetch(e){return this.recordGQL.fetch(this.resourceName,`/api/${this.frontendName}/${e}`,this.fieldsMetadata).pipe((0,v.map)(({data:t})=>{let r={};if(t&&t.themeImages&&(r=t.themeImages.items),!(0,M.emptyObject)(r)){const o={};return this.registerSvgs(r),Object.keys(r).forEach(s=>{const{content:c,...l}=r[s]??{};o[s]=l}),o}return r}))}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(oa),n.\u0275\u0275inject(Xt),n.\u0275\u0275inject(Ke.SvgIconRegistryService))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function Kk(i,a){if(1&i&&n.\u0275\u0275element(0,"svg-icon",3),2&i){const e=n.\u0275\u0275nextContext().ngIf,t=n.\u0275\u0275nextContext();n.\u0275\u0275classMap(t.wrapperClass),n.\u0275\u0275propertyInterpolate("name",e.name),n.\u0275\u0275property("svgClass",t.klass||"")("title",t.title||"")}}function Hk(i,a){if(1&i&&n.\u0275\u0275element(0,"img",4),2&i){const e=n.\u0275\u0275nextContext().ngIf,t=n.\u0275\u0275nextContext();n.\u0275\u0275classMap(t.klass),n.\u0275\u0275propertyInterpolate("src",e.path,n.\u0275\u0275sanitizeUrl),n.\u0275\u0275property("title",t.title||"")}}function Zk(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,Kk,1,6,"svg-icon",1),n.\u0275\u0275template(2,Hk,1,5,"img",2),n.\u0275\u0275elementContainerEnd()),2&i){const e=a.ngIf;n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf","svg"===e.type),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf","svg"!==e.type)}}let wn=(()=>{class i{themeImagesStore;image;klass="";title="";wrapperClass="sicon";images$=(0,S.of)({});imageSig=(0,n.signal)({});subs=[];constructor(e){this.themeImagesStore=e,e?.images$&&(this.images$=e.images$)}ngOnInit(){this.subs=[],this.subs.push(this.images$.pipe((0,v.filter)(e=>null!==e),(0,v.map)(e=>({images:e})),(0,v.tap)(e=>this.getImage(e,this.image))).subscribe())}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe()),this.subs=[]}getImage(e,t){if(!e||!e.images||Object.keys(e.images).length<1)return null;this.imageSig.update(()=>e.images[t]),this.imageSig()||console.warn(`Image with name '${t}' not found`)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(Kr))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-image"]],inputs:{image:"image",klass:"klass",title:"title",wrapperClass:"wrapperClass"},decls:1,vars:1,consts:[[4,"ngIf"],[3,"svgClass","title","class","name",4,"ngIf"],["alt","",3,"src","class","title",4,"ngIf"],[3,"svgClass","title","name"],["alt","",3,"src","title"]],template:function(t,r){1&t&&n.\u0275\u0275template(0,Zk,3,2,"ng-container",0),2&t&&n.\u0275\u0275property("ngIf",r.imageSig())},dependencies:[F.NgIf,Ke.SvgIconComponent],encapsulation:2})}return i})();function qk(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275text(1),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",e.language.getFieldLabel(e.labelKey,e.module)," ")}}function Jk(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275text(1),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",e.language.getListLabel(e.listKey,e.labelKey)," ")}}function Qk(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,qk,2,1,"ng-container",0),n.\u0275\u0275template(2,Jk,2,1,"ng-container",0),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!e.listKey&&e.labelKey),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.listKey&&e.labelKey)}}let zt=(()=>{class i{language;labelKey="";module=null;listKey=null;languages$;constructor(e){this.language=e,this.languages$=this.language?.vm$??(0,S.of)({appStrings:{},appListStrings:{},modStrings:{},languageKey:""})}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject($e))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-label"]],inputs:{labelKey:"labelKey",module:"module",listKey:"listKey"},decls:2,vars:3,consts:[[4,"ngIf"]],template:function(t,r){1&t&&(n.\u0275\u0275template(0,Qk,3,2,"ng-container",0),n.\u0275\u0275pipe(1,"async")),2&t&&n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(1,1,r.languages$))},dependencies:[F.NgIf,F.AsyncPipe],encapsulation:2})}return i})();function Xk(i,a){if(1&i&&n.\u0275\u0275element(0,"scrm-image",4),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275property("image",e.config.icon)("klass",e.config.iconKlass||"")("title",e.language.getFieldLabel(e.config.titleKey||""))}}function Yk(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275text(1),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(e.config.label||"")}}function eP(i,a){if(1&i&&n.\u0275\u0275element(0,"scrm-label",5),2&i){const e=n.\u0275\u0275nextContext();let t;n.\u0275\u0275property("labelKey",e.config.labelKey)("module",null!==(t=e.config.labelModule)&&void 0!==t?t:"")}}const tP=["*"];let Vn=(()=>{class i{language;config;clickCallBack;clickBuffer=new S.Subject;clickBuffer$=this.clickBuffer.asObservable();subs=[];constructor(e){this.language=e}ngOnInit(){const e=this.config?.debounceClick??null;this.clickCallBack=this.config?.onClick??null;const t=this.getDebounceTime();e&&this.clickCallBack&&this.subs.push(this.clickBuffer$.pipe((0,v.debounceTime)(t)).subscribe(r=>{this.clickCallBack(r??null)}))}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}runClick(e){if(this.clickCallBack){if(this.config?.debounceClick&&this.clickCallBack)return void this.clickBuffer.next(e??null);this.clickCallBack(e??null)}}getDebounceTime(){let e=this.config?.clickDebounceTime??625;return isFinite(e)||(e=625),e}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject($e))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-button"]],inputs:{config:"config"},ngContentSelectors:tP,decls:5,vars:5,consts:[["type","button",3,"ngClass","title","click"],[3,"image","klass","title",4,"ngIf"],[4,"ngIf"],[3,"labelKey","module",4,"ngIf"],[3,"image","klass","title"],[3,"labelKey","module"]],template:function(t,r){1&t&&(n.\u0275\u0275projectionDef(),n.\u0275\u0275elementStart(0,"button",0),n.\u0275\u0275listener("click",function(){return r.runClick()}),n.\u0275\u0275template(1,Xk,1,3,"scrm-image",1),n.\u0275\u0275template(2,Yk,2,1,"ng-container",2),n.\u0275\u0275template(3,eP,1,2,"scrm-label",3),n.\u0275\u0275projection(4),n.\u0275\u0275elementEnd()),2&t&&(n.\u0275\u0275property("ngClass",r.config.klass)("title",r.language.getFieldLabel(r.config.titleKey)||(null==r.config?null:r.config.title)||""),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.config.icon),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!r.config.labelKey),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.config.labelKey))},dependencies:[F.NgClass,F.NgIf,wn,zt],encapsulation:2})}return i})();function nP(i,a){if(1&i&&n.\u0275\u0275element(0,"scrm-image",5),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275property("image",e.item.icon)}}function iP(i,a){if(1&i&&n.\u0275\u0275element(0,"scrm-image",5),2&i){const e=n.\u0275\u0275nextContext().$implicit;n.\u0275\u0275property("image",e.icon)}}function rP(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"li",9)(1,"a",10),n.\u0275\u0275listener("click",function(){const o=n.\u0275\u0275restoreView(e).$implicit,s=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(s.click(o))}),n.\u0275\u0275template(2,iP,1,1,"scrm-image",2),n.\u0275\u0275text(3),n.\u0275\u0275elementEnd()()}if(2&i){const e=a.$implicit;n.\u0275\u0275advance(1),n.\u0275\u0275property("ngClass",e&&e.klass),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.icon),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",e&&e.label," ")}}function oP(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",6)(1,"ul",7),n.\u0275\u0275template(2,rP,4,3,"li",8),n.\u0275\u0275elementEnd()()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275property("ngbCollapse",e.isCollapsed),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngForOf",e.item.items)}}const aP=["*"];let g0=(()=>{class i{item;itemClicked=new n.EventEmitter;isCollapsed=!0;constructor(){}ngOnInit(){}click(e){e&&e.onClick&&e.onClick(),this.itemClicked.emit(!0)}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-dropdown-submenu"]],inputs:{item:"item"},outputs:{itemClicked:"item-clicked"},ngContentSelectors:aP,decls:8,vars:3,consts:[[1,"dropdown-submenu-items-container"],[1,"dropdown-submenu-parent-button","dropdown-item","dropdown-toggle",3,"click"],[3,"image",4,"ngIf"],[3,"ngbCollapse",4,"ngIf"],[1,"dropdown-submenu-extra"],[3,"image"],[3,"ngbCollapse"],[1,"dropdown-submenu","pl-2","mb-1"],["class","dropdown-submenu-item dropdown-item",4,"ngFor","ngForOf"],[1,"dropdown-submenu-item","dropdown-item"],[1,"action-link","dropdown-submenu-item-link",3,"ngClass","click"]],template:function(t,r){1&t&&(n.\u0275\u0275projectionDef(),n.\u0275\u0275elementStart(0,"div")(1,"div",0)(2,"a",1),n.\u0275\u0275listener("click",function(){return r.isCollapsed=!r.isCollapsed}),n.\u0275\u0275template(3,nP,1,1,"scrm-image",2),n.\u0275\u0275text(4),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(5,oP,3,2,"div",3),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(6,"div",4),n.\u0275\u0275projection(7),n.\u0275\u0275elementEnd()()),2&t&&(n.\u0275\u0275advance(3),n.\u0275\u0275property("ngIf",r.item&&r.item.icon),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",r.item&&r.item.label," "),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.item&&r.item.items.length))},dependencies:[F.NgClass,F.NgForOf,F.NgIf,wn,pe.NgbCollapse],encapsulation:2})}return i})();function sP(i,a){if(1&i&&n.\u0275\u0275element(0,"scrm-image",7),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275property("image",e.config.icon)("klass",e.config.iconKlass||"")}}function cP(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275text(1),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",e.config.label," ")}}function lP(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275element(1,"scrm-label",8),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("labelKey",e.config.labelKey)}}function uP(i,a){1&i&&n.\u0275\u0275elementContainer(0)}const h0=function(i){return{item:i}};function dP(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,uP,1,0,"ng-container",13),n.\u0275\u0275elementContainerEnd()),2&i){const e=a.$implicit;n.\u0275\u0275nextContext(3);const t=n.\u0275\u0275reference(10);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngTemplateOutlet",t)("ngTemplateOutletContext",n.\u0275\u0275pureFunction1(2,h0,e))}}function fP(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",10)(1,"div",11),n.\u0275\u0275element(2,"scrm-label",8),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(3,dP,2,4,"ng-container",12),n.\u0275\u0275elementEnd()),2&i){const e=a.$implicit,t=a.last,r=a.first;let o,s;n.\u0275\u0275classProp("section-split",!r)("last-section",t)("first-section",r),n.\u0275\u0275property("ngClass",null!==(o=e.klass)&&void 0!==o?o:""),n.\u0275\u0275advance(2),n.\u0275\u0275property("labelKey",null!==(s=null!==(s=e.labelKey)&&void 0!==s?s:e.label)&&void 0!==s?s:""),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",e.items)}}function pP(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,fP,4,9,"div",9),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",e.sections)}}function mP(i,a){1&i&&n.\u0275\u0275elementContainer(0)}function gP(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,mP,1,0,"ng-container",13),n.\u0275\u0275elementContainerEnd()),2&i){const e=a.$implicit;n.\u0275\u0275nextContext(2);const t=n.\u0275\u0275reference(10);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngTemplateOutlet",t)("ngTemplateOutletContext",n.\u0275\u0275pureFunction1(2,h0,e))}}function hP(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,gP,2,4,"ng-container",12),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",e.buttons)}}function vP(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div"),n.\u0275\u0275element(1,"scrm-image",7),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext(2).item;n.\u0275\u0275advance(1),n.\u0275\u0275property("image",e.icon)("klass",e.iconKlass||"")}}function _P(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275text(1),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(2).item;n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",e.label," ")}}function yP(i,a){if(1&i&&n.\u0275\u0275element(0,"scrm-label",18),2&i){const e=n.\u0275\u0275nextContext(3).item;let t;n.\u0275\u0275property("labelKey",e.labelKey)("module",null!==(t=e.labelModule)&&void 0!==t?t:"")}}function bP(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,yP,1,2,"scrm-label",17),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(2).item;n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e&&e.labelKey)}}function CP(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"a",14),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(e);const r=n.\u0275\u0275nextContext().item,o=n.\u0275\u0275nextContext(),s=n.\u0275\u0275reference(1);return n.\u0275\u0275resetView(r&&o.click(r.onClick,s))}),n.\u0275\u0275elementStart(2,"div",15),n.\u0275\u0275template(3,vP,2,2,"div",4),n.\u0275\u0275elementStart(4,"div",16),n.\u0275\u0275template(5,_P,2,1,"ng-container",4),n.\u0275\u0275template(6,bP,2,1,"ng-container",4),n.\u0275\u0275elementEnd()()(),n.\u0275\u0275elementContainerEnd()}if(2&i){const e=n.\u0275\u0275nextContext().item;n.\u0275\u0275advance(1),n.\u0275\u0275property("ngClass",e&&e.klass),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",e.icon),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",e&&e.label),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e&&!e.label&&e.labelKey)}}function MP(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"scrm-dropdown-submenu",19),n.\u0275\u0275listener("item-clicked",function(){n.\u0275\u0275restoreView(e);const r=n.\u0275\u0275nextContext(2),o=n.\u0275\u0275reference(1);return n.\u0275\u0275resetView(r.close(o))}),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()}if(2&i){const e=n.\u0275\u0275nextContext().item;n.\u0275\u0275advance(1),n.\u0275\u0275property("item",e)}}function SP(i,a){if(1&i&&(n.\u0275\u0275template(0,CP,7,4,"ng-container",4),n.\u0275\u0275template(1,MP,2,1,"ng-container",4)),2&i){const e=a.item,t=n.\u0275\u0275nextContext();n.\u0275\u0275property("ngIf",e&&!t.isDropdown(e)),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e&&t.isDropdown(e))}}let gc=(()=>{class i{language;config;disabled=!1;autoClose=!0;buttons=[];sections=[];sectionsEnabled=!1;constructor(e){this.language=e}isDropdown(e){return!!e&&"items"in e}click(e,t){e(),t.close()}close(e){e.close()}ngOnInit(){if(this.config&&!this.config.placement&&(this.config.placement=["bottom-left","bottom-right","top-left","top-right"]),this.sections=[],(0,M.emptyObject)(this.config?.sections??{}))return this.buttons=[...this.config?.items??[]],void(this.sectionsEnabled=!1);this.sectionsEnabled=!0,this.preprocessItems(this.config?.items??[])}preprocessItems(e){const t=this.config?.sections??{},r={};!e||!e.length||(e.forEach(o=>{this.getSection(t,o?.section??"default",r).items.push(o)}),Object.keys(t).forEach(o=>{const s=r[o];s&&s.items&&s.items.length&&this.sections.push(s)}))}getSection(e,t,r){let s=r[t]??null;return null===s&&(s=(0,M.deepClone)(e[t]??{}),s.items=[],r[t]=s),s}getPlacement(){return this.config&&!this.config.placement?["bottom-left","bottom-right","top-left","top-right"]:this.config.placement}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject($e))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-dropdown-button"]],inputs:{config:"config",disabled:"disabled",autoClose:"autoClose"},decls:11,vars:13,consts:[["ngbDropdown","",1,"d-inline-block","dropdown-button",3,"autoClose","placement","ngClass"],["dropDown","ngbDropdown"],["ngbDropdownToggle","",3,"disabled","ngClass","title"],[3,"image","klass",4,"ngIf"],[4,"ngIf"],["ngbDropdownMenu",""],["buttonTemplate",""],[3,"image","klass"],[3,"labelKey"],[3,"ngClass","section-split","last-section","first-section",4,"ngFor","ngForOf"],[3,"ngClass"],[1,"dropdown-menu-item-header"],[4,"ngFor","ngForOf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["ngbDropdownItem","",3,"ngClass","click"],[1,"d-flex","align-items-center"],[1,"dropdown-item-label","flex-grow-1"],[3,"labelKey","module",4,"ngIf"],[3,"labelKey","module"],[3,"item","item-clicked"]],template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"div",0,1)(2,"button",2),n.\u0275\u0275template(3,sP,1,2,"scrm-image",3),n.\u0275\u0275template(4,cP,2,1,"ng-container",4),n.\u0275\u0275template(5,lP,2,1,"ng-container",4),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(6,"div",5),n.\u0275\u0275template(7,pP,2,1,"ng-container",4),n.\u0275\u0275template(8,hP,2,1,"ng-container",4),n.\u0275\u0275elementEnd()(),n.\u0275\u0275template(9,SP,2,2,"ng-template",null,6,n.\u0275\u0275templateRefExtractor)),2&t&&(n.\u0275\u0275classProp("sectioned-dropdown-menu",r.sectionsEnabled),n.\u0275\u0275property("autoClose",r.autoClose)("placement",r.getPlacement())("ngClass",r.config.wrapperKlass),n.\u0275\u0275advance(2),n.\u0275\u0275property("disabled",r.disabled)("ngClass",r.config.klass)("title",r.language.getFieldLabel(r.config.titleKey)||""),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.config.icon),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.config.label),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!r.config.label&&r.config.labelKey),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",r.sectionsEnabled),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!r.sectionsEnabled))},dependencies:[F.NgClass,F.NgForOf,F.NgIf,F.NgTemplateOutlet,pe.NgbDropdown,pe.NgbDropdownToggle,pe.NgbDropdownMenu,pe.NgbDropdownItem,wn,g0,zt],encapsulation:2,changeDetection:0})}return i})();function DP(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275element(1,"scrm-button",3),n.\u0275\u0275elementContainerEnd()),2&i){const e=a.$implicit;n.\u0275\u0275advance(1),n.\u0275\u0275property("config",e)}}function wP(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,DP,2,1,"ng-container",2),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",e.config.items)}}let v0=(()=>{class i{config;static \u0275fac=function(t){return new(t||i)};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-grouped-button"]],inputs:{config:"config"},decls:2,vars:2,consts:[["role","group",1,"btn-group","grouped-button",3,"ngClass"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"config"]],template:function(t,r){if(1&t&&(n.\u0275\u0275elementStart(0,"div",0),n.\u0275\u0275template(1,wP,2,1,"ng-container",1),n.\u0275\u0275elementEnd()),2&t){let o;n.\u0275\u0275property("ngClass",null!==(o=null==r.config?null:r.config.wrapperKlass)&&void 0!==o?o:""),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",null==r.config?null:r.config.items)}},dependencies:[F.NgClass,F.NgForOf,F.NgIf,Vn],encapsulation:2,changeDetection:0})}return i})();function EP(i,a){if(1&i&&n.\u0275\u0275element(0,"scrm-button",4),2&i){const e=n.\u0275\u0275nextContext().$implicit;n.\u0275\u0275property("config",e)}}function xP(i,a){if(1&i&&n.\u0275\u0275element(0,"scrm-dropdown-button",4),2&i){const e=n.\u0275\u0275nextContext().$implicit;n.\u0275\u0275property("config",e)}}function FP(i,a){if(1&i&&n.\u0275\u0275element(0,"scrm-grouped-button",4),2&i){const e=n.\u0275\u0275nextContext().$implicit;n.\u0275\u0275property("config",e)}}function IP(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,EP,1,1,"scrm-button",3),n.\u0275\u0275template(2,xP,1,1,"scrm-dropdown-button",3),n.\u0275\u0275template(3,FP,1,1,"scrm-grouped-button",3),n.\u0275\u0275elementContainerEnd()),2&i){const e=a.$implicit;let t,r,o;n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e&&!(null!==(t=null==e?null:e.items)&&void 0!==t&&t)),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e&&(null!==(r=null==e?null:e.items)&&void 0!==r?r:"")&&"dropdown"===(null!==(r=null==e?null:e.type)&&void 0!==r?r:"dropdown")),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e&&(null!==(o=null==e?null:e.items)&&void 0!==o?o:"")&&"grouped"===(null!==(o=null==e?null:e.type)&&void 0!==o?o:"dropdown"))}}function AP(i,a){if(1&i&&n.\u0275\u0275element(0,"scrm-dropdown-button",5),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("config",e.dropdownConfig)}}function TP(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div"),n.\u0275\u0275template(1,IP,4,3,"ng-container",1),n.\u0275\u0275template(2,AP,1,1,"scrm-dropdown-button",2),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275classMap(e.klass),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",e.buttons.expanded),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.buttons.collapsed.length)}}let mo=(()=>{class i{config$;klass="";buttons={expanded:[],collapsed:[]};dropdownConfig;internalConfig;sub;constructor(){}ngOnInit(){this.sub=this.config$.subscribe(e=>{this.internalConfig={...e},this.splitButtons()})}ngOnDestroy(){this.sub.unsubscribe()}buildDropdownConfig(){let e=["button-group-button"];this.internalConfig.buttonKlass&&this.internalConfig.buttonKlass.length>0&&(e=e.concat(this.internalConfig.buttonKlass)),this?.internalConfig?.dropdownOptions?.klass&&(e=e.concat(this.internalConfig.dropdownOptions.klass));let t=["button-group-dropdown"];const r=this.internalConfig.dropdownOptions,o=r&&r.wrapperKlass;o&&o.length>0&&(t=t.concat(o)),this.dropdownConfig={label:this.internalConfig.dropdownLabel,klass:[...e],wrapperKlass:t,items:this.buttons.collapsed},this.internalConfig.dropdownOptions&&this.internalConfig.dropdownOptions.placement&&(this.dropdownConfig.placement=this.internalConfig.dropdownOptions.placement),this.internalConfig.dropdownOptions&&this.internalConfig.dropdownOptions.icon&&(this.dropdownConfig.icon=this.internalConfig.dropdownOptions.icon)}getBreakpoint(){return this.internalConfig.breakpoint||0===this.internalConfig.breakpoint?this.internalConfig.breakpoint:4}splitButtons(){if(this.buttons.expanded=[],this.buttons.collapsed=[],!this.internalConfig.buttons||this.internalConfig.buttons.length<1)return;let e=0;const t=this.internalConfig.showAfterBreakpoint??!0;this.internalConfig.buttons.forEach(r=>{if(r){if(e<this.getBreakpoint()){let o=["button-group-button"];this.internalConfig.buttonKlass&&this.internalConfig.buttonKlass.length>0&&(o=o.concat(this.internalConfig.buttonKlass));const s={...r};M.Button.appendClasses(s,[...o]),this.buttons.expanded.push(s)}else!0===t&&this.buttons.collapsed.push({...r});e++}}),this.buildDropdownConfig()}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-button-group"]],inputs:{config$:"config$",klass:"klass"},decls:1,vars:1,consts:[[3,"class",4,"ngIf"],[4,"ngFor","ngForOf"],["autoClose","outside",3,"config",4,"ngIf"],[3,"config",4,"ngIf"],[3,"config"],["autoClose","outside",3,"config"]],template:function(t,r){1&t&&n.\u0275\u0275template(0,TP,3,4,"div",0),2&t&&n.\u0275\u0275property("ngIf",r.config$)},dependencies:[F.NgForOf,F.NgIf,Vn,gc,v0],encapsulation:2})}return i})();const _0={userPreferences:{},loading:!1};let Ni=(0,M.deepClone)(_0),ca=null,qt=(()=>{class i{collectionGQL;config;processService;localStorage;store=new S.BehaviorSubject(Ni);state$=this.store.asObservable();saveBufferStore=new S.BehaviorSubject(!1);saveBuffer$;subs=[];resourceName="userPreferences";fieldsMetadata={fields:["id","_id","value","items"]};userPreferences$=this.state$.pipe((0,v.map)(e=>e.userPreferences),(0,v.distinctUntilChanged)());loading$=this.state$.pipe((0,v.map)(e=>e.loading));constructor(e,t,r,o){this.collectionGQL=e,this.config=t,this.processService=r,this.localStorage=o;const c=(t.getConfigValue("ui")??{}).user_preferences_save_delay??5e3;this.saveBuffer$=this.saveBufferStore.asObservable().pipe((0,v.debounceTime)(c??5e3)),this.subs.push(this.saveBuffer$.subscribe(l=>{l&&this.saveUiPreferences()}))}clear(){ca=null,this.updateState((0,M.deepClone)(_0)),this.subs.forEach(e=>e.unsubscribe())}clearAuthBased(){this.clear()}getUserPreference(e){return Ni.userPreferences&&Ni.userPreferences[e]?Ni.userPreferences[e]:null}getUi(e,t){const r=e+"-"+t;return this.storageLoad(e,r)??(Ni?.userPreferences?.ui??{})[r]??null}setUi(e,t,r){const o=e+"-"+t;this.storageSave(e,o,r);const s=Ni?.userPreferences?.ui??{};s[o]=r,Ni.userPreferences.ui=s,this.saveBufferStore.next(!0)}saveUiPreferences(){this.processService.submit("save-ui-user-preferences",{preferences:Ni.userPreferences.ui}).pipe((0,v.take)(1)).subscribe()}storageSave(e,t,r){let o=this.localStorage.get(t);o||(o={}),o[e]=r,this.localStorage.set(t,o)}storageLoad(e,t){const r=this.localStorage.get(t);return r&&r[e]?r[e]:null}load(){return this.updateState({...Ni,loading:!0}),this.getUserPreferences().pipe((0,v.tap)(e=>{this.updateState({...Ni,userPreferences:e,loading:!1})}))}isCached(){return null!==ca}set(e){ca=(0,S.of)(e).pipe((0,v.shareReplay)(1)),this.updateState({...Ni,userPreferences:e,loading:!1})}updateState(e){this.store.next(Ni=e)}getUserPreferences(){return null==ca&&(ca=this.fetch().pipe((0,v.shareReplay)(1))),ca}fetch(){return this.collectionGQL.fetchAll(this.resourceName,this.fieldsMetadata).pipe((0,v.map)(({data:e})=>{const t={};return e.userPreferences&&e.userPreferences.edges&&e.userPreferences.edges.forEach(r=>{r.node.items&&Object.keys(r.node.items).forEach(o=>{t[o]=r.node.items[o]})}),t}))}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(xu),n.\u0275\u0275inject(vt),n.\u0275\u0275inject(ir),n.\u0275\u0275inject(wr))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),go=(()=>{class i{getTrimmedInputValue(e){return"string"!=typeof e?e:e.trim()}isEmptyInputValue(e){return null==e||typeof e>"u"||""===e||0===e.length}isEmptyTrimmedInputValue(e){return this.isEmptyInputValue(this.getTrimmedInputValue(e))}isEmptyBooleanInputValue(e){return this.isEmptyInputValue(e)||"false"===e||!1===e||""===e}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),ho=(()=>{class i{preferences;formUtils;locale;constructor(e,t,r){this.preferences=e,this.formUtils=t,this.locale=r}toUserFormat(e,t){if((0,M.isVoid)(e)||""===e)return"";if((0,M.isFalse)(t?.metadata?.format??!0))return e;const r=(0,F.formatNumber)(Number(e),this.locale);return this.replaceSeparators(r)}toInternalFormat(e){if(!e)return e;const t=this.getDecimalsSymbol()||".",r=this.getGroupSymbol()||",";let o=new RegExp(t,"g");"."===t&&(o=new RegExp("\\.","g"));let s=new RegExp(r,"g");return"."===r&&(s=new RegExp("\\.","g")),(e=(e=(e=e.replace(s,"group_separator")).replace(o,"decimal_separator")).replace(/decimal_separator/g,".")).replace(/group_separator/g,"")}getFloatUserFormatPattern(){const e=this.getGroupSymbol(),t=this.getDecimalsSymbol();let r="^(";return r+="(\\d{1,3}(\\"+e+"\\d{3})*(\\"+t+"\\d+)?)|",r+="\\d*|",r+="(\\d+(\\"+t+"\\d+)?)|",r+="(\\d+(\\.\\d+)?)",r+=")$",r}getIntUserFormatPattern(){let t="^(";return t+="(\\d{1,3}(\\"+this.getGroupSymbol()+"\\d{3})*)|",t+="\\d*",t+=")$",t}getGroupSymbol(){return this.preferences.getUserPreference("num_grp_sep")||","}getDecimalsSymbol(){return this.preferences.getUserPreference("dec_sep")||"."}replaceSeparators(e){if(!e)return e;e=(e=e.replace(/,/g,"group_separator")).replace(/\./g,"decimal_separator");const t=this.getDecimalsSymbol()||".",r=this.getGroupSymbol()||",";return(e=e.replace(/decimal_separator/g,t)).replace(/group_separator/g,r)}validateIntUserFormat(e){const t=this.formUtils.getTrimmedInputValue(e);if(this.formUtils.isEmptyInputValue(t)||new RegExp(this.getIntUserFormatPattern()).test(t))return!1}validateFloatUserFormat(e){const t=this.formUtils.getTrimmedInputValue(e);return!this.formUtils.isEmptyInputValue(t)&&!new RegExp(this.getFloatUserFormatPattern()).test(t)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(qt),n.\u0275\u0275inject(go),n.\u0275\u0275inject(n.LOCALE_ID))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Iu=(()=>{class i{preferences;numberFormatter;locale;constructor(e,t,r){this.preferences=e,this.numberFormatter=t,this.locale=r}toUserFormat(e,t=null){if((0,M.isVoid)(e)||""===e)return"";const r=t&&t.symbol||this.getSymbol(),o=t&&t.code||this.getCode();let s=null;t&&null!==t.digits&&isFinite(t.digits)&&(s=t.digits);const c=this.getDigitsInfo(s);let l;return t&&"edit"===t.mode?(l=(0,F.formatNumber)(Number(e),this.locale,c),this.replaceSeparators(l)):(l=(0,F.formatCurrency)(Number(e),this.locale,r,o,c),this.replaceSeparators(l))}toInternalFormat(e){if(!e)return"";const t=e.replace(this.getSymbol(),"");return this.numberFormatter.toInternalFormat(t)}getCurrencyFormat(){return this.preferences.getUserPreference("currency")||this.getDefaultFormat()}getDefaultFormat(){return{iso4217:"USD",name:"US Dollars",symbol:"$"}}getCode(){return this.getCurrencyFormat().iso4217}getSymbol(){return this.getCurrencyFormat().symbol}getDigits(){return this.preferences.getUserPreference("default_currency_significant_digits")||2}getDigitsInfo(e){let t="1.2-2",r=this.getDigits();return null!==e&&isFinite(e)&&(r=e),null!==r&&isFinite(r)&&(t=r<1?"1.0-0":`1.${r}-${r}`),t}replaceSeparators(e){return this.numberFormatter.replaceSeparators(e)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(qt),n.\u0275\u0275inject(ho),n.\u0275\u0275inject(n.LOCALE_ID))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Er=(()=>{class i{preferences;formUtils;locale;format$;prefStore;constructor(e,t,r){this.preferences=e,this.formUtils=t,this.locale=r,this.prefStore=e??{userPreferences$:(0,S.of)({}),getUserPreference:()=>null};const o={date:this.getInternalDateFormat(),time:this.getInternalTimeFormat()};this.format$=(this.prefStore.userPreferences$??(0,S.of)(o)).pipe((0,v.map)(()=>({date:this.getDateFormat(),time:this.getTimeFormat()})))}getDateFormat(){const e=this.prefStore?.getUserPreference?.("date_format");return e||this.getInternalTimeFormat()}getTimeFormat(){const e=this.prefStore?.getUserPreference?.("time_format");if(e){let t=e;return t.includes("aaaaaa")&&(t=t.replace("aaaaaa","aaaaa'm'")),t}return this.getInternalTimeFormat()}getDateTimeFormat(){return this.getDateFormat()+" "+this.getTimeFormat()}getInternalDateFormat(){return"yyyy-MM-dd"}getInternalTimeFormat(){return"HH:mm:ss"}getInternalDateTimeFormat(){return this.getInternalDateFormat()+" "+this.getInternalTimeFormat()}getInternalFormat(){return this.getInternalDateTimeFormat()}getUserFormat(){return this.getDateTimeFormat()}toUserFormat(e,t){const r=t&&t.fromFormat||this.getInternalFormat();if(e){const o=this.toDateTime(e,r,{zone:"GMT"});return o.isValid?(0,F.formatDate)(o.toJSDate(),this.getUserFormat(),this.locale,this.userTimeZone()):e}return""}toInternalFormat(e,t){const r=t&&t.fromFormat||this.getUserFormat();if(e){let o=this.toDateTime(e,r,{zone:this.prefStore?.getUserPreference?.("timezone")});return(0,F.formatDate)(o.toJSDate(),this.getInternalFormat(),this.locale,"GMT")}return""}formatDateTime(e,t,r="",o=this.locale,s=""){const c=this.toDateTime(e,r);return c.isValid?(0,F.formatDate)(c.toJSDate(),t,o,s):e}toDateTime(e,t="",r){if(!e)return je.DateTime.invalid("empty");if(t)return je.DateTime.fromFormat(e,t,r);let o=this.fromUserFormat(e,r);return o.isValid||(o=this.fromInternalFormat(e,r)),o}userDateTimeFormatToStruct(e){if(!e)return null;const t=this.toDateTime(e,"",{zone:this.prefStore?.getUserPreference?.("timezone")});return t.isValid?{date:{day:t.day,month:t.month,year:t.year},time:{hour:t.hour,minute:t.minute,second:t.second}}:null}internalDateTimeFormatToStruct(e){if(!e)return null;const t=this.toDateTime(e,this.getInternalDateTimeFormat(),{zone:"GMT"}),r=t.setZone(this.prefStore?.getUserPreference?.("timezone")??"GMT");return t.isValid?{date:{day:r.day,month:r.month,year:r.year},time:{hour:r.hour,minute:r.minute,second:r.second}}:null}userDateFormatToStruct(e){if(!e)return null;const t=this.toDateTime(e,"",{zone:this.prefStore?.getUserPreference?.("timezone")});return t.isValid?{day:t.day,month:t.month,year:t.year}:null}dateFormatToStruct(e,t=""){if(!e)return null;const r=this.toDateTime(e,t);return r.isValid?{day:r.day,month:r.month,year:r.year}:null}userTimeFormatToStruct(e){if(!e)return null;const t=this.toDateTime(e,"",{zone:this.prefStore?.getUserPreference?.("timezone")});return t.isValid?{hour:t.hour,minute:t.minute,second:t.second}:null}fromUserFormat(e,t,r){e=(e=(e=(e=(e=this.toUserFormat(e,r)).toString()).replace("a","A")).replace("p","P")).replace("m","M");let o=this.getUserFormat();return o=o.replace("aaaaa'm'","a"),je.DateTime.fromFormat(e,o,t)}fromInternalFormat(e,t){const r=this.getInternalFormat();return je.DateTime.fromFormat(e.toString(),r,t)}validateUserFormat(e,t=""){const r=this.formUtils.getTrimmedInputValue(e);return!this.formUtils.isEmptyInputValue(r)&&!this.fromUserFormat(r,{},{fromFormat:t}).isValid}userTimeZone(){let e=this.prefStore?.getUserPreference?.("timezone")??"GMT";e||(e="GMT");const t=je.DateTime.now().setZone(e).toMillis();return je.IANAZone.create(e).formatOffset(t,"techie")}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(qt),n.\u0275\u0275inject(go),n.\u0275\u0275inject(n.LOCALE_ID))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Hr=(()=>{class i extends Er{getInternalFormat(){return this.getInternalDateFormat()}getUserFormat(){return this.getDateFormat()}toInternalFormat(e,t){const r=t&&t.fromFormat||this.getUserFormat();if(e){let o=this.toDateTime(e,r);return(!o||!o.isValid)&&(o=this.toDateTime(e)),(0,F.formatDate)(o.toJSDate(),this.getInternalFormat(),this.locale)}return""}toUserFormat(e,t){const r=t&&t.fromFormat||this.getInternalFormat(),o=t&&t.toFormat||this.getUserFormat();if(e){const s=this.toDateTime(e,r);return s.isValid?(0,F.formatDate)(s.toJSDate(),o,this.locale):e}return""}static \u0275fac=function(){let e;return function(r){return(e||(e=n.\u0275\u0275getInheritedFactory(i)))(r||i)}}();static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Au=(()=>{class i{formUtils;constructor(e){this.formUtils=e}toUserFormat(e){return e}toInternalFormat(e){return e}getUserFormatPattern(){return"^([\\+]?|00)((([(]{0,1}\\s*[0-9]{1,4}\\s*[)]{0,1})\\s*)*|([\\-\\s\\./0-9])*)+$"}validateUserFormat(e){const t=this.formUtils.getTrimmedInputValue(e);return!this.formUtils.isEmptyInputValue(t)&&!new RegExp(this.getUserFormatPattern()).test(t)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(go))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),ut=(()=>{class i{currencyFormatter;numberFormatter;dateFormatter;datetimeFormatter;phoneFormatter;map={};constructor(e,t,r,o,s){this.currencyFormatter=e,this.numberFormatter=t,this.dateFormatter=r,this.datetimeFormatter=o,this.phoneFormatter=s,this.map.int=t,this.map.float=t,this.map.date=r,this.map.datetime=o,this.map.currency=e,this.map.phone=s}toUserFormat(e,t,r){if(!e)return t;const o=this.map[e];return o?o.toUserFormat(t,r):t}toInternalFormat(e,t){if(!e)return t;const r=this.map[e];return r?r.toInternalFormat(t):t}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Iu),n.\u0275\u0275inject(ho),n.\u0275\u0275inject(Hr),n.\u0275\u0275inject(Er),n.\u0275\u0275inject(Au))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),hc=(()=>{class i{typeFormatter;language;configs;preferences;valuePipes={};fieldPipes={};constructor(e,t,r,o){this.typeFormatter=e,this.language=t,this.configs=r,this.preferences=o,this.valuePipes.int=s=>this.valueTypeFormat("int",s),this.valuePipes.float=s=>this.valueTypeFormat("float",s),this.valuePipes.date=s=>this.valueTypeFormat("date",s),this.valuePipes.datetime=s=>this.valueTypeFormat("datetime",s),this.valuePipes.currency=s=>this.valueTypeFormat("currency",s),this.valuePipes.enum=(s,c=[])=>this.enumFormat(s,c),this.fieldPipes.int=s=>this.fieldTypeFormat("int",s),this.fieldPipes.float=s=>this.fieldTypeFormat("float",s),this.fieldPipes.date=s=>this.fieldTypeFormat("date",s),this.fieldPipes.datetime=s=>this.fieldTypeFormat("datetime",s),this.fieldPipes.currency=s=>this.fieldTypeFormat("currency",s),this.fieldPipes.phone=s=>this.fieldTypeFormat("phone",s),this.fieldPipes.enum=s=>this.enumFieldFormat(s),this.fieldPipes.dynamicenum=s=>this.enumFieldFormat(s),this.fieldPipes.multienum=s=>this.multiEnumFormat(s)}addValuePipe(e,t){this.valuePipes[e]=t}addFieldPipe(e,t){this.fieldPipes[e]=t}parse(e,t,r){if(!e)return e;const s=e.match(/({{[\s\S]+?}})/g);if(!s||s.length<1)return e;let c=e;const l=t&&t.module||"";return s.forEach(u=>{if(!c.includes(u))return;let d="",f=[],p="",m="context",h=[],g=""+u;g=g.replace("{{",""),g=g.replace("}}",""),g=g.trim();let b=g;if(g.includes("|")){const[D,y,...w]=g.split("|");if(d=y.trim(),y.trim().includes(":")){let[E,...C]=y.trim().split(":");d=E.trim(),f=C}g=D.trim(),b=D.trim()}g.includes(".")&&(h=g.split("."),m=h[0],g=h[1]);let _=t;if("fields"===m&&(_=r),"fields"===m){if(!_||!(g in _))return void(c=c.replace(u,p));const D=r[g];return D?h[2]&&"value"===h[2]&&D.type in this.fieldPipes?(p=this.fieldPipes[D.type](D),void(c=c.replace(u,p))):h[2]&&"label"===h[2]?(p=this.getFieldLabel(D.labelKey,l),void(c=c.replace(u,p))):(p=(0,et.Z)({fields:r},b,""),void(c=c.replace(u,p))):void(c=c.replace(u,""))}"config"!==m?"preferences"!==m?_&&g in _?(p=(0,et.Z)({context:t},b,""),d in this.valuePipes&&(p=this.valuePipes[d](p)),c=c.replace(u,p)):c=c.replace(u,p):c=this.parseObjectContext(g,c,u,d,f,D=>this.preferences.getUserPreference(D)):c=this.parseObjectContext(g,c,u,d,f,D=>this.configs.getConfigValue(D))}),c}valueTypeFormat(e,t){return this.typeFormatter.toUserFormat(e,t)}enumFormat(e,t){const r=t[0]??"";return r&&e?this.language.getListLabel(r,e):""}fieldTypeFormat(e,t){return this.typeFormatter.toUserFormat(e,t.value)}enumFieldFormat(e){return(0,M.isVoid)(e.definition.options)||(0,M.isVoid)(e.value)?"":this.language.getListLabel(e.definition.options,e.value)}multiEnumFormat(e){if((0,M.isVoid)(e.definition.options)||(0,M.isVoid)(e.valueList)||e.valueList.length<1)return"";const t=[];return e.valueList.forEach(r=>{(0,M.isVoid)(r)||t.push(this.language.getListLabel(e.definition.options,r))}),t.join(", ")}getFieldLabel(e,t=""){return(0,M.isVoid)(e)?"":this.language.getFieldLabel(e,t)}parseObjectContext(e,t,r,o,s,c){let l=e;if(e.includes(".")){let[d,...f]=e.split(".");l=d}let u=c(l);return e.includes(".")&&"object"==typeof u&&(u=(0,et.Z)({value:u},e,"")),u&&"object"!=typeof u?(o in this.valuePipes&&(u=this.valuePipes[o](u,s)),t.replace(r,u)):t.replace(r,"")}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(ut),n.\u0275\u0275inject($e),n.\u0275\u0275inject(vt),n.\u0275\u0275inject(qt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function NP(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"span",1),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(e.parsedLabel)}}let vo=(()=>{class i{dynamicLabels;language;template="";labelKey="";context={};fields={};module=null;parsedLabel="";vm$;constructor(e,t){this.dynamicLabels=e,this.language=t}ngOnInit(){this.vm$=this.language.vm$.pipe((0,v.tap)(()=>{this.labelKey&&(this.template=this.language.getFieldLabel(this.labelKey,this.module)),this.parseLabel()}))}ngOnChanges(e){(e.template||e.context||e.labelKey||e.fields)&&this.parseLabel()}parseLabel(){this.parsedLabel=this.dynamicLabels.parse(this.template,this.context,this.fields)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(hc),n.\u0275\u0275directiveInject($e))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-dynamic-label"]],inputs:{template:"template",labelKey:"labelKey",context:"context",fields:"fields",module:"module"},features:[n.\u0275\u0275NgOnChangesFeature],decls:2,vars:3,consts:[[4,"ngIf"],[1,"dynamic-label"]],template:function(t,r){1&t&&(n.\u0275\u0275template(0,NP,3,1,"ng-container",0),n.\u0275\u0275pipe(1,"async")),2&t&&n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(1,1,r.vm$))},dependencies:[F.NgIf,F.AsyncPipe],encapsulation:2})}return i})(),vc=(()=>{class i{klass="";constructor(){}ngOnInit(){}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-inline-loading-spinner"]],inputs:{klass:"klass"},decls:4,vars:3,consts:[[1,"bounce1"],[1,"bounce2"],[1,"bounce3"]],template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"div"),n.\u0275\u0275element(1,"div",0)(2,"div",1)(3,"div",2),n.\u0275\u0275elementEnd()),2&t&&n.\u0275\u0275classMapInterpolate1("inline-spinner ",r.klass,"")},styles:[".inline-spinner[_ngcontent-%COMP%]{text-align:center}.inline-spinner[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{border-radius:100%;display:inline-block;animation:_ngcontent-%COMP%_sk-bouncedelay 1.4s infinite ease-in-out both}.inline-spinner[_ngcontent-%COMP%]   .bounce1[_ngcontent-%COMP%]{animation-delay:-.32s}.inline-spinner[_ngcontent-%COMP%]   .bounce2[_ngcontent-%COMP%]{animation-delay:-.16s}@keyframes _ngcontent-%COMP%_sk-bouncedelay{0%,80%,to{transform:scale(0)}40%{transform:scale(1)}}"]})}return i})();function LP(i,a){if(1&i&&n.\u0275\u0275element(0,"scrm-button-group",2),2&i){const e=n.\u0275\u0275nextContext(3);n.\u0275\u0275property("config$",e.config$)("klass",e.buttonGroupClass)}}function OP(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,LP,1,2,"scrm-button-group",1),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.config$)}}function BP(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",6),n.\u0275\u0275element(1,"scrm-label",7),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext(3);n.\u0275\u0275advance(1),n.\u0275\u0275property("labelKey",e.confirmationLabel)}}const RP=function(){return{}};function jP(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",6),n.\u0275\u0275element(1,"scrm-dynamic-label",8),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext(3);let t,r;n.\u0275\u0275advance(1),n.\u0275\u0275property("labelKey",e.confirmationDynamicLabel)("module",null!==(t=null==e.actionContext?null:e.actionContext.module)&&void 0!==t?t:"")("fields",null!==(r=null==e.actionContext||null==e.actionContext.record?null:e.actionContext.record.fields)&&void 0!==r?r:n.\u0275\u0275pureFunction0(3,RP))}}function kP(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",9),n.\u0275\u0275element(1,"scrm-button",10),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext(3);n.\u0275\u0275advance(1),n.\u0275\u0275property("config",e.inlineCancelButton)}}function PP(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",9),n.\u0275\u0275element(1,"scrm-button",10),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext(3);n.\u0275\u0275advance(1),n.\u0275\u0275property("config",e.inlineConfirmButton)}}function $P(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"div",3),n.\u0275\u0275template(2,BP,2,1,"div",4),n.\u0275\u0275template(3,jP,2,4,"div",4),n.\u0275\u0275template(4,kP,2,1,"div",5),n.\u0275\u0275template(5,PP,2,1,"div",5),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",e.confirmationLabel),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.confirmationDynamicLabel&&!e.confirmationLabel),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.inlineCancelButton),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.inlineConfirmButton)}}function UP(i,a){1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275element(1,"scrm-inline-loading-spinner",11),n.\u0275\u0275elementContainerEnd())}function VP(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"div"),n.\u0275\u0275template(2,OP,2,1,"ng-container",0),n.\u0275\u0275template(3,$P,6,4,"ng-container",0),n.\u0275\u0275template(4,UP,2,0,"ng-container",0),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275classMapInterpolate1("",e.klass," float-right action-group-menu"),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!e.inlineConfirmationEnabled&&!e.loading),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.inlineConfirmationEnabled&&!e.loading),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.loading)}}let xr=(()=>{class i{languages;screenSize;systemConfigStore;klass="";buttonClass="btn btn-sm";buttonGroupClass="";actionContext;config;actionLimitConfig="recordview_actions_limits";configState=new S.BehaviorSubject({buttons:[]});config$=this.configState.asObservable();vm$;inlineConfirmationEnabled=!1;confirmationLabel="";confirmationDynamicLabel="";inlineCancelButton=null;inlineConfirmButton=null;loading=!1;buttonGroupDropdownClass="dropdown-button-secondary";subs;screen=qn.Medium;defaultBreakpoint=3;breakpoint;constructor(e,t,r){this.languages=e,this.screenSize=t,this.systemConfigStore=r}ngOnInit(){const e=this.config?.getActions?.()??(0,S.of)([]),t=this.screenSize?.screenSize$??(0,S.of)(qn.Medium),r=this.languages?.vm$??(0,S.of)({});this.vm$=e.pipe((0,S.combineLatestWith)(t,r),(0,v.map)(([o,s,c])=>(s&&(this.screen=s),this.configState.next(this.getButtonGroupConfig(o)),{actions:o,screenSize:s,languages:c})))}isXSmallScreen(){return this.screen===qn.XSmall}getButtonGroupConfig(e){const t=[],r=[];e.forEach(l=>{const u=this.buildButton(l);l.params&&l.params.expanded?t.push(u):r.push(u)});let s=e.length;!0===(this.config?.collapseButtons??!0)&&(s=this.getBreakpoint(),t.length<s&&(s=t.length));const c=t.concat(r);return{buttonKlass:[this.buttonClass],dropdownLabel:this.languages.getAppString("LBL_ACTIONS")||"",breakpoint:s,dropdownOptions:{placement:["bottom-right"],wrapperKlass:[this.buttonGroupDropdownClass]},buttons:c}}getBreakpoint(){const e=this.systemConfigStore.getConfigValue(this.actionLimitConfig);return this.screen&&e&&e[this.screen]?(this.breakpoint=e[this.screen],this.breakpoint):this.breakpoint?this.breakpoint:this.defaultBreakpoint}buildButton(e){const t={label:e.label||"",labelModule:this?.actionContext?.module??"",labelKey:e.labelKey||"",klass:this.buttonClass,titleKey:e.titleKey||"",onClick:()=>{e?.params?.inlineConfirmation?(this.triggerTemporaryLoading(),this.initInlineConfirmation(e,()=>{this.config.runAction(e,this.actionContext)})):this.config.runAction(e,this.actionContext)}};t.label||(t.labelKey=e.labelKey??"");const r=e?.params?.debounceClick??null;return t.debounceClick=!0,(0,M.isFalse)(r)&&(t.debounceClick=!1),e.icon&&(t.icon=e.icon),e.status&&M.Button.appendClasses(t,[e.status]),e.klass&&M.Button.appendClasses(t,e.klass),t}triggerTemporaryLoading(){this.loading=!0;const e=parseInt(this.systemConfigStore.getUi("inline_confirmation_loading_delay"))??200;setTimeout(()=>{this.loading=!1},e)}initInlineConfirmation(e,t){const r=e?.params?.inlineConfirmationButtons?.cancel??{},o=e?.params?.inlineConfirmationButtons?.confirm??{};this.confirmationLabel=e?.params?.confirmationLabel??"",this.confirmationDynamicLabel=e?.params?.confirmationDynamicLabel??"",this.inlineCancelButton=this.buildInlineCancelButton(r),this.inlineConfirmButton=this.buildInlineConfirmButton(o,t),this.inlineConfirmationEnabled=!0}buildInlineCancelButton(e){const r={labelKey:"LBL_NO",klass:"btn btn-sm p-0 m-0 btn-link border-0 line-height-initial",debounceClick:!0,...e??{}};return r.onClick=()=>{this.triggerTemporaryLoading(),this.resetInlineConfirmation()},r}buildInlineConfirmButton(e,t){const o={labelKey:"LBL_YES",klass:"btn btn-sm p-0 m-0 btn-link border-0 line-height-initial",debounceClick:!0,...e??{}};return o.onClick=()=>{this.triggerTemporaryLoading(),t(),this.resetInlineConfirmation()},o}resetInlineConfirmation(){this.inlineConfirmationEnabled=!1,this.confirmationDynamicLabel="",this.confirmationLabel="",this.inlineConfirmButton=null,this.inlineCancelButton=null}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject($e),n.\u0275\u0275directiveInject(hi),n.\u0275\u0275directiveInject(vt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-action-group-menu"]],inputs:{klass:"klass",buttonClass:"buttonClass",buttonGroupClass:"buttonGroupClass",actionContext:"actionContext",config:"config",actionLimitConfig:"actionLimitConfig"},decls:2,vars:3,consts:[[4,"ngIf"],[3,"config$","klass",4,"ngIf"],[3,"config$","klass"],[1,"d-flex","align-items-start","justify-content-end","inline-confirmation"],["class","pl-1 inline-confirmation-label",4,"ngIf"],["class","pl-1 inline-confirmation-button",4,"ngIf"],[1,"pl-1","inline-confirmation-label"],[3,"labelKey"],[3,"labelKey","module","fields"],[1,"pl-1","inline-confirmation-button"],[3,"config"],["klass","inline-spinner-md"]],template:function(t,r){1&t&&(n.\u0275\u0275template(0,VP,5,6,"ng-container",0),n.\u0275\u0275pipe(1,"async")),2&t&&n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(1,1,r.vm$))},dependencies:[F.NgIf,Vn,mo,zt,vo,vc,F.AsyncPipe],encapsulation:2})}return i})(),Mn=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Ke.AngularSvgIconModule]})}return i})(),y0=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Mn,pe.NgbModule]})}return i})(),Ut=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule]})}return i})(),Zr=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,pe.NgbDropdownModule,Mn,y0,Ut,pe.NgbTooltipModule]})}return i})(),cn=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Mn,Ut,pe.NgbTooltipModule]})}return i})(),b0=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,cn]})}return i})(),Fr=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,cn,Zr,b0]})}return i})(),_o=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule]})}return i})(),qr=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule]})}return i})(),Ir=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Mn,cn,Fr,Ut,_o,qr]})}return i})();function zP(i,a){1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275element(1,"scrm-label",16),n.\u0275\u0275elementContainerEnd())}let Tu=(()=>{class i{languageStore;selectionSource;actionSource;dropdownConfig;subs=[];status=M.SelectionStatus.NONE;count=0;constructor(e){this.languageStore=e}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe()),this.subs=[],this.count=0,this.status=M.SelectionStatus.NONE}ngOnInit(){this.subs=[],this.subs.push(this.selectionSource.getSelectionStatus().subscribe(e=>this.status=e)),this.subs.push(this.selectionSource.getSelectedCount().subscribe(e=>this.count=e)),this.subs.push(this.actionSource.getBulkActions().subscribe(e=>{const t={labelKey:"LBL_BULK_ACTION_BUTTON_LABEL",klass:["bulk-action-button","btn","btn-sm"],wrapperKlass:["bulk-action-group","float-left"],items:[]};Object.keys(e).forEach(r=>{const o=e[r];t.items.push({labelKey:o.labelKey??"",klass:[`${r}-bulk-action`],onClick:()=>{this.actionSource.executeBulkAction(o.key)}})}),this.dropdownConfig=t}))}selectPage(){this.selectionSource.updateSelection(M.SelectionStatus.PAGE)}selectAll(){this.selectionSource.updateSelection(M.SelectionStatus.ALL)}deselectAll(){this.selectionSource.updateSelection(M.SelectionStatus.NONE)}toggleSelection(e){this.selectionSource.updateSelection(e!==M.SelectionStatus.ALL?M.SelectionStatus.ALL:M.SelectionStatus.NONE)}SelectionStatus=M.SelectionStatus;static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject($e))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-bulk-action-menu"]],inputs:{selectionSource:"selectionSource",actionSource:"actionSource"},decls:17,vars:6,consts:[[1,"bulk-action","float-left"],["ngbDropdown","",1,"dropdown","select-action-group","float-left"],["type","button","ngbDropdownToggle","","aria-haspopup","true","aria-expanded","false","aria-hidden","true","aria-label","Select Action Menu",1,"bulk-action-button","dropdown-toggle","btn","btn-sm"],[1,"checkbox-container"],["type","checkbox","aria-hidden","true",3,"checked","indeterminate","change"],[1,"checkmark"],[1,"bulk-action-selected-number"],[4,"ngIf"],["ngbDropdownMenu","","aria-hidden","true",1,"dropdown-menu"],[1,"dropdown-item","select-all",3,"click"],["labelKey","LBL_LISTVIEW_OPTION_ENTIRE"],[1,"dropdown-item","select-page",3,"click"],["labelKey","LBL_LISTVIEW_OPTION_CURRENT"],[1,"dropdown-item","deselect-all",3,"click"],["labelKey","LBL_LISTVIEW_NONE"],[3,"disabled","config"],["labelKey","LBL_LISTVIEW_SELECTED_OBJECTS"]],template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"button",2)(3,"label",3)(4,"input",4),n.\u0275\u0275listener("change",function(){return r.toggleSelection(r.status)}),n.\u0275\u0275elementEnd(),n.\u0275\u0275element(5,"span",5),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(6,"span",6),n.\u0275\u0275template(7,zP,2,0,"ng-container",7),n.\u0275\u0275text(8),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(9,"div",8)(10,"a",9),n.\u0275\u0275listener("click",function(){return r.selectAll()}),n.\u0275\u0275element(11,"scrm-label",10),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(12,"a",11),n.\u0275\u0275listener("click",function(){return r.selectPage()}),n.\u0275\u0275element(13,"scrm-label",12),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(14,"a",13),n.\u0275\u0275listener("click",function(){return r.deselectAll()}),n.\u0275\u0275element(15,"scrm-label",14),n.\u0275\u0275elementEnd()()(),n.\u0275\u0275element(16,"scrm-dropdown-button",15),n.\u0275\u0275elementEnd()),2&t&&(n.\u0275\u0275advance(4),n.\u0275\u0275property("checked","ALL"===r.status)("indeterminate","SOME"===r.status||"PAGE"===r.status),n.\u0275\u0275advance(3),n.\u0275\u0275property("ngIf",r.count>0),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",r.count>0?r.count:""," "),n.\u0275\u0275advance(8),n.\u0275\u0275property("disabled",r.count<1)("config",r.dropdownConfig))},dependencies:[F.NgIf,pe.NgbDropdown,pe.NgbDropdownToggle,pe.NgbDropdownMenu,gc,zt],encapsulation:2})}return i})(),Nu=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,pe.NgbModule,Zr,Ut]})}return i})(),C0=(()=>{class i{constructor(){}addOnClickPartial(e,t){const r={...e};if(e&&"items"in r){const o=r.items;return r.items=[],o.forEach(s=>{r.items.push(this.addOnClickPartial(s,t))}),r}return r.onClick=r.onClick&&(0,lt.Z)(r.onClick,t),r}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),_c=(()=>{class i{elementRef;screenSize;dataSource;height=300;view=(0,n.signal)([300,this.height]);subs=[];constructor(e,t){this.elementRef=e,this.screenSize=t}onResize(){this.calculateView()}initResizeListener(){const e=(0,S.fromEvent)(window,"resize").pipe((0,v.tap)(()=>this.view.set([])),(0,v.debounceTime)(300));this.view.set([]),this.subs.push(e.pipe((0,v.debounceTime)(50)).subscribe(()=>{this.calculateView()}))}calculateView(){let e;const t=this.elementRef&&this.elementRef.nativeElement||{},r=t.parentElement&&t.parentElement.parentElement||{},o=r&&r.offsetWidth||0;o>0?e=o:(e=.7*window.innerWidth,window.innerWidth>990&&(e=.23*window.innerWidth)),this.view.set([e,this.height])}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(n.ElementRef),n.\u0275\u0275directiveInject(hi))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["ng-component"]],inputs:{dataSource:"dataSource"},decls:0,vars:0,template:function(t,r){},encapsulation:2})}return i})(),GP=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule]})}return i})();function WP(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",2),n.\u0275\u0275element(1,"scrm-label",3),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("labelKey",e.labelKey)}}let la=(()=>{class i{language;labelKey="";constructor(e){this.language=e}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject($e))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-chart-message-area"]],inputs:{labelKey:"labelKey"},decls:2,vars:1,consts:[[1,"d-flex","mb-4","mt-4","justify-content-center"],["class","lead",4,"ngIf"],[1,"lead"],[3,"labelKey"]],template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"div",0),n.\u0275\u0275template(1,WP,2,1,"div",1),n.\u0275\u0275elementEnd()),2&t&&(n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.labelKey))},dependencies:[F.NgIf,zt],encapsulation:2})}return i})(),Ar=(()=>{class i{overlay=!1;constructor(){}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-loading-spinner"]],inputs:{overlay:"overlay"},decls:19,vars:2,consts:[[1,"loading-spinner"],[1,"sk-cube-grid"],[1,"sk-cube","sk-cube1","sk-cube-primary"],[1,"sk-cube","sk-cube2","sk-cube-secondary"],[1,"sk-cube","sk-cube3","sk-cube-secondary"],[1,"sk-cube","sk-cube4","sk-cube-primary"],[1,"sk-cube","sk-cube5","sk-cube-secondary"],[1,"sk-cube","sk-cube6","sk-cube-secondary"],[1,"sk-cube","sk-cube7","sk-cube-primary"],[1,"sk-cube","sk-cube8","sk-cube-primary"],[1,"sk-cube","sk-cube9","sk-cube-primary"]],template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"div")(1,"div",0)(2,"div",1),n.\u0275\u0275element(3,"div",2)(4,"div",2)(5,"div",3)(6,"div",4)(7,"div",5)(8,"div",5)(9,"div",6)(10,"div",7)(11,"div",8)(12,"div",8)(13,"div",9)(14,"div",10)(15,"div",8)(16,"div",8)(17,"div",9)(18,"div",10),n.\u0275\u0275elementEnd()()()),2&t&&n.\u0275\u0275classProp("overlay",r.overlay)},styles:[".sk-cube-grid[_ngcontent-%COMP%]{width:6.25em;height:6.25em}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube[_ngcontent-%COMP%]{width:25%;height:25%;float:left;animation:_ngcontent-%COMP%_sk-cubeGridScaleDelay 1.3s infinite ease-in-out}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube1[_ngcontent-%COMP%]{animation-delay:.2s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube2[_ngcontent-%COMP%]{animation-delay:.3s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube3[_ngcontent-%COMP%]{animation-delay:.4s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube4[_ngcontent-%COMP%]{animation-delay:.1s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube5[_ngcontent-%COMP%]{animation-delay:.2s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube6[_ngcontent-%COMP%]{animation-delay:.3s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube7[_ngcontent-%COMP%]{animation-delay:0s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube8[_ngcontent-%COMP%]{animation-delay:.1s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube9[_ngcontent-%COMP%]{animation-delay:.2s}@keyframes _ngcontent-%COMP%_sk-cubeGridScaleDelay{0%,70%,to{transform:scaleZ(1)}35%{transform:scale3D(0,0,1)}}"]})}return i})();function KP(i,a){1&i&&n.\u0275\u0275element(0,"scrm-chart-message-area",3)}function HP(i,a){if(1&i&&n.\u0275\u0275element(0,"ngx-charts-pie-grid",5),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("animations",!1)("view",e.view())("scheme",e.scheme)("minWidth",e.minWidth)("label",e.language.getFieldLabel(e.label))("results",e.results)}}function ZP(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,HP,1,6,"ngx-charts-pie-grid",4),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.results&&e.results.length>0)}}function qP(i,a){1&i&&(n.\u0275\u0275elementStart(0,"div",6),n.\u0275\u0275element(1,"scrm-loading-spinner"),n.\u0275\u0275elementEnd()),2&i&&n.\u0275\u0275classProp("m-5",!0)}let M0=(()=>{class i extends _c{language;elementRef;screenSize;results;height=700;minWidth=100;constructor(e,t,r){super(t,r),this.language=e,this.elementRef=t,this.screenSize=r}ngOnInit(){this.dataSource.options.height&&(this.height=this.dataSource.options.height),this?.dataSource?.options?.minWidth&&(this.minWidth=this.dataSource.options.minWidth),this.initResizeListener(),this.subs.push(this.dataSource.getResults().pipe((0,v.debounceTime)(500)).subscribe(e=>{this.parseResults(e),this.calculateHeightBasedOnResults(),this.calculateView()}))}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}get scheme(){return this.dataSource.options.scheme||"picnic"}get label(){return this.dataSource.options.label||""}onResize(){this.calculateHeightBasedOnResults(),this.calculateView()}calculateHeightBasedOnResults(){if(this.results&&this.results.length){const e=Math.floor(this.view()[0]/170);this.height=200*Math.floor(this.results.length/e)}else this.height=50}parseResults(e){this.results=[],e.singleSeries&&e.singleSeries.length&&e.singleSeries.forEach(t=>{const r=parseFloat(""+t.value);this.results.push(r?{name:t.name,value:r}:t)})}calculateView(){let e;const t=this.elementRef&&this.elementRef.nativeElement||{},r=t.parentElement&&t.parentElement.parentElement||{},o=r&&r.offsetWidth||0;o>0?e=o:(e=.7*window.innerWidth,window.innerWidth>990&&(e=.23*window.innerWidth)),this.view.set(e>239?[e,this.height]:[e,800])}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject($e),n.\u0275\u0275directiveInject(n.ElementRef),n.\u0275\u0275directiveInject(hi))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-pie-grid-chart"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:3,vars:3,consts:[["labelKey","LBL_NO_DATA",4,"ngIf"],[4,"ngIf"],["class","chart-loading",3,"m-5",4,"ngIf"],["labelKey","LBL_NO_DATA"],[3,"animations","view","scheme","minWidth","label","results",4,"ngIf"],[3,"animations","view","scheme","minWidth","label","results"],[1,"chart-loading"]],template:function(t,r){1&t&&(n.\u0275\u0275template(0,KP,1,0,"scrm-chart-message-area",0),n.\u0275\u0275template(1,ZP,2,1,"ng-container",1),n.\u0275\u0275template(2,qP,2,2,"div",2)),2&t&&(n.\u0275\u0275property("ngIf",!r.results||!r.results.length||r.results.length<1),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.view().length),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!r.view().length&&r.results&&r.results.length>0))},dependencies:[F.NgIf,ke.PieGridComponent,la,Ar],encapsulation:2})}return i})();function JP(i,a){1&i&&n.\u0275\u0275element(0,"scrm-chart-message-area",3)}function QP(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div"),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(2,"div"),n.\u0275\u0275text(3),n.\u0275\u0275elementEnd()),2&i){const e=a.model,t=n.\u0275\u0275nextContext(3);n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(e.name),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(t.formatTooltipValue(e.value))}}function XP(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"ngx-charts-bar-vertical",5),n.\u0275\u0275template(1,QP,4,2,"ng-template",null,6,n.\u0275\u0275templateRefExtractor),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("animations",!1)("results",e.results)("view",e.view())("scheme",e.scheme)("gradient",e.gradient)("xAxis",e.xAxis)("yAxis",e.yAxis)("legend",e.legend)("legendPosition","below")("showXAxisLabel",e.showXAxisLabel)("showYAxisLabel",e.showYAxisLabel)("xAxisLabel",e.xAxisLabel)("yAxisLabel",e.yAxisLabel)("yAxisTickFormatting",e.yAxisTickFormatting)}}function YP(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,XP,3,14,"ngx-charts-bar-vertical",4),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.results&&e.results.length>0)}}function e4(i,a){1&i&&(n.\u0275\u0275elementStart(0,"div",7),n.\u0275\u0275element(1,"scrm-loading-spinner"),n.\u0275\u0275elementEnd()),2&i&&n.\u0275\u0275classProp("m-5",!0)}let S0=(()=>{class i extends _c{elementRef;screenSize;results;constructor(e,t){super(e,t),this.elementRef=e,this.screenSize=t}ngOnInit(){this.dataSource.options.height&&(this.height=this.dataSource.options.height),this.initResizeListener(),this.subs.push(this.dataSource.getResults().pipe((0,v.debounceTime)(500)).subscribe(e=>{this.results=e.singleSeries,this.calculateView()}))}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}get scheme(){return this.dataSource.options.scheme||"picnic"}get gradient(){return this.dataSource.options.gradient||!1}get xAxis(){return this.dataSource.options.xAxis||!1}get yAxis(){return!(0,M.isFalse)(this.dataSource.options.yAxis)}get legend(){return!(0,M.isFalse)(this.dataSource.options.legend)}get showXAxisLabel(){return this.dataSource.options.showXAxisLabel||!1}get showYAxisLabel(){return this.dataSource.options.showYAxisLabel||!1}get xAxisLabel(){return this.dataSource.options.xAxisLabel||""}get yAxisLabel(){return this.dataSource.options.yAxisLabel||""}get yAxisTickFormatting(){return this.dataSource.options.yAxisTickFormatting?this.dataSource.tickFormatting:null}formatTooltipValue(e){return this.dataSource&&this.dataSource.tooltipFormatting?this.dataSource.tooltipFormatting(e):e}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(n.ElementRef),n.\u0275\u0275directiveInject(hi))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-vertical-bar-chart"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:3,vars:3,consts:[["labelKey","LBL_NO_DATA",4,"ngIf"],[4,"ngIf"],["class","chart-loading",3,"m-5",4,"ngIf"],["labelKey","LBL_NO_DATA"],["class","vertical-bar-chart",3,"animations","results","view","scheme","gradient","xAxis","yAxis","legend","legendPosition","showXAxisLabel","showYAxisLabel","xAxisLabel","yAxisLabel","yAxisTickFormatting",4,"ngIf"],[1,"vertical-bar-chart",3,"animations","results","view","scheme","gradient","xAxis","yAxis","legend","legendPosition","showXAxisLabel","showYAxisLabel","xAxisLabel","yAxisLabel","yAxisTickFormatting"],["tooltipTemplate",""],[1,"chart-loading"]],template:function(t,r){1&t&&(n.\u0275\u0275template(0,JP,1,0,"scrm-chart-message-area",0),n.\u0275\u0275template(1,YP,2,1,"ng-container",1),n.\u0275\u0275template(2,e4,2,2,"div",2)),2&t&&(n.\u0275\u0275property("ngIf",!r.results||!r.results.length||r.results.length<1),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.view().length),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!r.view().length&&r.results&&r.results.length>0))},dependencies:[F.NgIf,ke.BarVerticalComponent,la,Ar],encapsulation:2})}return i})(),ua=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Ut]})}return i})(),Tr=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule]})}return i})(),D0=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,ke.NgxChartsModule,ua,Tr]})}return i})(),w0=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,ke.NgxChartsModule,ua,Tr]})}return i})();function t4(i,a){1&i&&n.\u0275\u0275element(0,"scrm-chart-message-area",3)}function n4(i,a){if(1&i&&n.\u0275\u0275element(0,"ngx-charts-line-chart",5),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("animations",!1)("results",e.results)("view",e.view())("scheme",e.scheme)("gradient",e.gradient)("xAxis",e.xAxis)("yAxis",e.yAxis)("legend",e.legend)("xScaleMin",e.xScaleMin)("xScaleMax",e.xScaleMax)("xAxisTicks",e.xAxisTicks)("showXAxisLabel",e.showXAxisLabel)("showYAxisLabel",e.showYAxisLabel)("xAxisLabel",e.xAxisLabel)("legendPosition","below")("autoScale",!0)("yAxisTickFormatting",e.yAxisTickFormatting)("xAxisTickFormatting",e.xAxisTickFormatting)("tooltipDisabled",e.tooltipDisabled)("yAxisLabel",e.yAxisLabel)}}function i4(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,n4,1,20,"ngx-charts-line-chart",4),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.results&&e.results.length>0)}}function r4(i,a){1&i&&(n.\u0275\u0275elementStart(0,"div",6),n.\u0275\u0275element(1,"scrm-loading-spinner"),n.\u0275\u0275elementEnd()),2&i&&n.\u0275\u0275classProp("m-5",!0)}let E0=(()=>{class i extends _c{elementRef;screenSize;results;scheme;gradient;xAxis;yAxis;legend;xScaleMin;xScaleMax;xAxisTicks;showXAxisLabel;showYAxisLabel;xAxisLabel;yAxisLabel;yAxisTickFormatting;xAxisTickFormatting;tooltipDisabled;constructor(e,t){super(e,t),this.elementRef=e,this.screenSize=t}ngOnInit(){this.dataSource.options.height&&(this.height=this.dataSource.options.height),this.initResizeListener(),this.subs.push(this.dataSource.getResults().subscribe(e=>{this.results=e.multiSeries,this.calculateView()})),this.scheme=this.getScheme(),this.gradient=this.getGradient(),this.xAxis=this.getXAxis(),this.yAxis=this.getYAxis(),this.legend=this.getLegend(),this.xScaleMin=this.getXScaleMin(),this.xScaleMax=this.getXScaleMax(),this.xAxisTicks=this.getXAxisTicks(),this.showXAxisLabel=this.getShowXAxisLabel(),this.showYAxisLabel=this.getShowYAxisLabel(),this.xAxisLabel=this.getXAxisLabel(),this.yAxisLabel=this.getYAxisLabel(),this.yAxisTickFormatting=this.getYAxisTickFormatting(),this.xAxisTickFormatting=this.getXAxisTickFormatting(),this.tooltipDisabled=this.getTooltipDisabled()}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}getScheme(){return this.dataSource.options.scheme||"picnic"}getGradient(){return this.dataSource.options.gradient||!1}getXAxis(){return!(0,M.isFalse)(this.dataSource.options.xAxis)}getYAxis(){return!(0,M.isFalse)(this.dataSource.options.yAxis)}getLegend(){return!(0,M.isFalse)(this.dataSource.options.legend)}getXScaleMin(){return this.dataSource.options.xScaleMin||null}getXScaleMax(){return this.dataSource.options.xScaleMax||null}getXAxisTicks(){return this.dataSource.options.xAxisTicks||null}getShowXAxisLabel(){return!(0,M.isFalse)(this.dataSource.options.showXAxisLabel)}getShowYAxisLabel(){return this.dataSource.options.showYAxisLabel||!1}getXAxisLabel(){return this.dataSource.options.xAxisLabel||""}getYAxisLabel(){return this.dataSource.options.yAxisLabel||""}getYAxisTickFormatting(){return this.dataSource.options.yAxisTickFormatting&&this.dataSource.tickFormatting||null}getXAxisTickFormatting(){return this.dataSource.options.xAxisTickFormatting&&this.dataSource.tickFormatting||null}getTooltipDisabled(){return this.dataSource.options.tooltipDisabled||!1}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(n.ElementRef),n.\u0275\u0275directiveInject(hi))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-line-chart"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:3,vars:3,consts:[["labelKey","LBL_NO_DATA",4,"ngIf"],[4,"ngIf"],["class","chart-loading",3,"m-5",4,"ngIf"],["labelKey","LBL_NO_DATA"],["class","line-chart",3,"animations","results","view","scheme","gradient","xAxis","yAxis","legend","xScaleMin","xScaleMax","xAxisTicks","showXAxisLabel","showYAxisLabel","xAxisLabel","legendPosition","autoScale","yAxisTickFormatting","xAxisTickFormatting","tooltipDisabled","yAxisLabel",4,"ngIf"],[1,"line-chart",3,"animations","results","view","scheme","gradient","xAxis","yAxis","legend","xScaleMin","xScaleMax","xAxisTicks","showXAxisLabel","showYAxisLabel","xAxisLabel","legendPosition","autoScale","yAxisTickFormatting","xAxisTickFormatting","tooltipDisabled","yAxisLabel"],[1,"chart-loading"]],template:function(t,r){1&t&&(n.\u0275\u0275template(0,t4,1,0,"scrm-chart-message-area",0),n.\u0275\u0275template(1,i4,2,1,"ng-container",1),n.\u0275\u0275template(2,r4,2,2,"div",2)),2&t&&(n.\u0275\u0275property("ngIf",!r.results||!r.results.length||r.results.length<1),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.view().length),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!r.view().length&&r.results&&r.results.length>0))},dependencies:[F.NgIf,ke.LineChartComponent,la,Ar],encapsulation:2})}return i})(),x0=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,ke.NgxChartsModule,ua,Tr]})}return i})();const F0=[x0,w0,D0],Lu={"line-chart":E0,"pie-grid":M0,"vertical-bar":S0};let I0=(()=>{class i extends M.BaseComponentRegistry{constructor(){super()}initDefault(){Object.keys(Lu).forEach(e=>{this.register("default",e,Lu[e])})}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function o4(i,a){1&i&&n.\u0275\u0275element(0,"scrm-chart-message-area",2)}const a4=function(i){return{dataSource:i}};function s4(i,a){if(1&i&&n.\u0275\u0275element(0,"ndc-dynamic",3),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275property("ndcDynamicComponent",e.chartType)("ndcDynamicInputs",n.\u0275\u0275pureFunction1(2,a4,e.dataSource))}}let A0=(()=>{class i{registry;dataSource=null;type;constructor(e){this.registry=e}get chartType(){return this.registry.get("default",this.type)}ngOnInit(){}isConfigured(){return!!(this.type&&this.dataSource&&this.chartType)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(I0))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-chart"]],inputs:{dataSource:"dataSource",type:"type"},decls:2,vars:2,consts:[["labelKey","LBL_BAD_CONFIG",4,"ngIf"],[3,"ndcDynamicComponent","ndcDynamicInputs",4,"ngIf"],["labelKey","LBL_BAD_CONFIG"],[3,"ndcDynamicComponent","ndcDynamicInputs"]],template:function(t,r){1&t&&(n.\u0275\u0275template(0,o4,1,0,"scrm-chart-message-area",0),n.\u0275\u0275template(1,s4,1,4,"ndc-dynamic",1)),2&t&&(n.\u0275\u0275property("ngIf",!r.isConfigured()),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.isConfigured()))},dependencies:[F.NgIf,Pt,Bt,la],encapsulation:2})}return i})(),T0=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,F0,gt,ua]})}return i})();function c4(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"scrm-button",1)(1,"span",2),n.\u0275\u0275text(2,"\xd7"),n.\u0275\u0275elementEnd()()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275property("config",e.getConfig())}}let Ou=(()=>{class i{config;buttonClasses=["close-button"];constructor(){}getConfig(){const e=M.Button.fromButton(this.config);return e.addClasses(this.buttonClasses),e}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-close-button"]],inputs:{config:"config"},decls:1,vars:1,consts:[[3,"config",4,"ngIf"],[3,"config"],["aria-hidden","true"]],template:function(t,r){1&t&&n.\u0275\u0275template(0,c4,3,1,"scrm-button",0),2&t&&n.\u0275\u0275property("ngIf",r.config)},dependencies:[F.NgIf,Vn],encapsulation:2})}return i})(),Ja=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,cn]})}return i})();function l4(i,a){if(1&i&&n.\u0275\u0275element(0,"scrm-label",3),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275property("labelKey",e.titleKey)}}function u4(i,a){if(1&i&&n.\u0275\u0275element(0,"scrm-close-button",4),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275property("config",e.close)}}const d4=[[["","modal-body",""]],[["","modal-footer",""]]],f4=["[modal-body]","[modal-footer]"];let da=(()=>{class i{klass="";headerKlass="";bodyKlass="";footerKlass="";titleKey="";closable=!1;close={klass:["btn","btn-outline-light","btn-sm"]};static \u0275fac=function(t){return new(t||i)};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-modal"]],inputs:{klass:"klass",headerKlass:"headerKlass",bodyKlass:"bodyKlass",footerKlass:"footerKlass",titleKey:"titleKey",closable:"closable",close:"close"},ngContentSelectors:f4,decls:9,vars:13,consts:[[1,"modal-title"],[3,"labelKey",4,"ngIf"],[3,"config",4,"ngIf"],[3,"labelKey"],[3,"config"]],template:function(t,r){1&t&&(n.\u0275\u0275projectionDef(d4),n.\u0275\u0275elementStart(0,"div")(1,"div")(2,"div",0),n.\u0275\u0275template(3,l4,1,1,"scrm-label",1),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(4,u4,1,1,"scrm-close-button",2),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(5,"div"),n.\u0275\u0275projection(6),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(7,"div"),n.\u0275\u0275projection(8,1),n.\u0275\u0275elementEnd()()),2&t&&(n.\u0275\u0275classMap(r.klass),n.\u0275\u0275advance(1),n.\u0275\u0275classMapInterpolate1("modal-header ",r.headerKlass," d-flex align-items-center"),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",r.titleKey),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.closable),n.\u0275\u0275advance(1),n.\u0275\u0275classMapInterpolate1("modal-body ",r.bodyKlass,""),n.\u0275\u0275advance(2),n.\u0275\u0275classMapInterpolate1("modal-footer ",r.footerKlass,""))},dependencies:[F.NgIf,Ou,zt],encapsulation:2})}return i})();function p4(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",16),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&i){const e=a.$implicit,t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",t.getColumnLabel(e.label)," ")}}function m4(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",17),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&i){const e=a.$implicit,t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",t.getColumnLabel(e.label)," ")}}const N0=function(i){return[i]};let L0=(()=>{class i{appState;languageStore;modal;displayed;hidden;titleKey="LBL_COLUMN_SELECTOR_MODAL_TITLE";closeButtonIcon;closeButton;saveButton;constructor(e,t,r){this.appState=e,this.languageStore=t,this.modal=r}drop(e){e.previousContainer===e.container?Ep(e.container.data,e.previousIndex,e.currentIndex):function UD(i,a,e,t){const r=La(e,i.length-1),o=La(t,a.length);i.length&&a.splice(o,0,i.splice(r,1)[0])}(e.previousContainer.data,e.container.data,e.previousIndex,e.currentIndex)}getHeaderLabel(){return this.languageStore.getFieldLabel("LBL_COLUMN_SELECTOR_MODAL_TITLE")}getColumnLabel(e){return this.languageStore.getFieldLabel(e,this.appState.getModule())}ngOnInit(){this.closeButtonIcon={klass:["btn","btn-outline-light","btn-sm"],onClick:()=>{this.modal.close({type:"close-button"})}},this.closeButton={klass:["btn","modal-button-cancel"],labelKey:"LBL_COLUMN_SELECTOR_CLOSE_BUTTON",onClick:()=>{this.modal.close({type:"close-button"})}},this.saveButton={klass:["btn","modal-button-save"],labelKey:"LBL_COLUMN_SELECTOR_SAVE_BUTTON",onClick:()=>{this.modal.close({type:"close-button",displayed:this.displayed,hidden:this.hidden})}}}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(Xt),n.\u0275\u0275directiveInject($e),n.\u0275\u0275directiveInject(pe.NgbActiveModal))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-columnchooser"]],inputs:{displayed:"displayed",hidden:"hidden"},decls:19,vars:16,consts:[["klass","column-chooser-modal",3,"closable","close","title","titleKey"],["modal-body",""],[1,"d-flex","bd-highlight"],[1,"p-2","flex-fill","bd-highlight","column-chooser-container"],[1,"column-chooser-title"],["labelKey","LBL_COLUMN_SELECTOR_DISPLAYED_COLS"],["cdkDropList","",1,"column-chooser-list",3,"cdkDropListData","cdkDropListConnectedTo","cdkDropListDropped"],["displayedList","cdkDropList"],["class","column-chooser-item column-displayed","cdkDrag","",4,"ngFor","ngForOf"],["labelKey","LBL_COLUMN_SELECTOR_HIDDEN_COLS"],["hiddenList","cdkDropList"],["class","column-chooser-item column-hidden","cdkDrag","",4,"ngFor","ngForOf"],["modal-footer",""],[1,"modal-buttons"],["data-dismiss","modal",3,"config"],[3,"config"],["cdkDrag","",1,"column-chooser-item","column-displayed"],["cdkDrag","",1,"column-chooser-item","column-hidden"]],template:function(t,r){if(1&t&&(n.\u0275\u0275elementStart(0,"scrm-modal",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),n.\u0275\u0275element(5,"scrm-label",5),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(6,"div",6,7),n.\u0275\u0275listener("cdkDropListDropped",function(s){return r.drop(s)}),n.\u0275\u0275template(8,p4,2,1,"div",8),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(9,"div",3)(10,"h2",4),n.\u0275\u0275element(11,"scrm-label",9),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(12,"div",6,10),n.\u0275\u0275listener("cdkDropListDropped",function(s){return r.drop(s)}),n.\u0275\u0275template(14,m4,2,1,"div",11),n.\u0275\u0275elementEnd()()()(),n.\u0275\u0275elementStart(15,"div",12)(16,"div",13),n.\u0275\u0275element(17,"scrm-button",14)(18,"scrm-button",15),n.\u0275\u0275elementEnd()()()),2&t){const o=n.\u0275\u0275reference(7),s=n.\u0275\u0275reference(13);n.\u0275\u0275property("closable",!0)("close",r.closeButtonIcon)("title",r.getHeaderLabel())("titleKey",r.titleKey),n.\u0275\u0275advance(6),n.\u0275\u0275property("cdkDropListData",r.displayed)("cdkDropListConnectedTo",n.\u0275\u0275pureFunction1(12,N0,s)),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngForOf",r.displayed),n.\u0275\u0275advance(4),n.\u0275\u0275property("cdkDropListData",r.hidden)("cdkDropListConnectedTo",n.\u0275\u0275pureFunction1(14,N0,o)),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngForOf",r.hidden),n.\u0275\u0275advance(3),n.\u0275\u0275property("config",r.closeButton),n.\u0275\u0275advance(1),n.\u0275\u0275property("config",r.saveButton)}},dependencies:[F.NgForOf,Rp,Bp,da,zt,Vn],encapsulation:2})}return i})(),yo=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Ke.AngularSvgIconModule,Ja,Ut,pe.NgbModalModule]})}return i})(),O0=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,jp,Ja,yo,Ut,cn]})}return i})(),Bu=(()=>{class i{breakpointObserver;special=!1;actions=!1;appendActions=!1;labelDisplay="top";labelClass={};inputClass={};rowClass={};colClass={};colAlignItems="";maxColumns;sizeMap={handset:1,tablet:2,web:3,wide:4};fieldGrid;baseColClass={col:!0,"form-group":!0,"m-1":!0};baseRowClass={"form-row":!0,"align-items-center":!0};baseLabelClass={"col-form-label-sm":!0,"mb-0":!0};baseInputClass={"form-control":!0,"form-control-sm":!0};currentSize="web";subscriptions=[];constructor(e){this.breakpointObserver=e}ngOnInit(){this.initScreenSizeObserver(this.breakpointObserver),this.buildGrid(),this.colClass={...this.colClass,...this.baseColClass},this.rowClass={...this.baseRowClass,...this.rowClass},this.labelClass={...this.labelClass,...this.baseLabelClass},this.inputClass={...this.inputClass,...this.baseInputClass}}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}get colNumber(){const e=this.sizeMap[this.currentSize];return this.maxColumns&&e>this.maxColumns?this.maxColumns:e}addSpecialSlots(e){if(!e||0===e.length)return;const t=this.getNeededExtraSlots();if(0!==t.length)if(1===this.colNumber)t.reverse().forEach(r=>{const o={cols:[]};this.fillRow(o),e.push(o),o.cols[0][r]=!0});else if(!0===this.appendActions){const r=e[e.length-1],o=this.colNumber-1;t.forEach(s=>{r.cols[o][s]=!0})}else{let o=e[e.length-1];o.cols[this.colNumber-t.length].field&&(o={cols:[]},this.fillRow(o),e.push(o));let s=this.colNumber-1;t.forEach(c=>{o.cols[s][c]=!0,s--})}}getNeededExtraSlots(){const e=[];return this.actions&&e.push("actionSlot"),this.special&&e.push("specialSlot"),e}fillRow(e){for(let r=e.cols.length;r<this.colNumber;r++)e.cols.push({field:{type:"",display:"none"}})}initScreenSizeObserver(e){this.subscriptions.push(e.observe(["(max-width: 599.98px) and (orientation: portrait)"]).subscribe(t=>{t.matches&&(this.currentSize="handset",this.buildGrid())})),this.subscriptions.push(e.observe(["(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait)"]).subscribe(t=>{t.matches&&(this.currentSize="tablet",this.buildGrid())})),this.subscriptions.push(e.observe(["(min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)","(min-width: 840px) and (orientation: portrait)","(min-width: 1280px) and (orientation: landscape)"]).subscribe(t=>{t.matches&&(this.currentSize="web",this.buildGrid())})),this.subscriptions.push(e.observe(["(min-width: 1920px)"]).subscribe(t=>{t.matches&&(this.currentSize="wide",this.buildGrid())}))}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject($))};static \u0275dir=n.\u0275\u0275defineDirective({type:i,inputs:{special:"special",actions:"actions",appendActions:"appendActions",labelDisplay:"labelDisplay",labelClass:"labelClass",inputClass:"inputClass",rowClass:"rowClass",colClass:"colClass",colAlignItems:"colAlignItems",maxColumns:"maxColumns",sizeMap:"sizeMap"}})}return i})(),vi=(()=>{class i{actions={edit:{},create:{},list:{},detail:{},massupdate:{},filter:{}};run(e,t,r){!this.actions||!this.actions[t]||!this.actions[t][e.key]||this.actions[t][e.key].run(r,e)}getHandler(e,t){let r=e.key;return e&&e.asyncProcess&&(r="async-process"),this.actions&&this.actions[t]&&this.actions[t][r]?this.actions[t][r]:null}addHandler(e,t,r){this.actions[t]||(this.actions[t]={}),this.actions[t][e.key]=r}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();class sr extends M.ActionHandler{shouldDisplay(a){return!0}getTriggeringStatus(){return["onValueChange"]}}class bo{}let B0=(()=>{class i extends bo{key="greater-than";constructor(){super()}run(e,t,r){const o=r.field?e.fields[r.field].value:r.value;return Number(t.value)>Number(o)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),R0=(()=>{class i extends bo{key="less-than";constructor(){super()}run(e,t,r){const o=r.field?e.fields[r.field].value:r.value;return Number(t.value)<Number(o)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),j0=(()=>{class i extends bo{key="not-empty";constructor(){super()}run(e,t,r){return!(0,M.isEmptyString)(t.value)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),k0=(()=>{class i extends bo{key="is-empty";constructor(){super()}run(e,t,r){return!!(0,M.isEmptyString)(t.value)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),P0=(()=>{class i extends bo{key="is-equal";constructor(){super()}run(e,t,r){const o=r.field?[e.fields[r.field].value]:(Array.isArray(r.values)?r.values:[r.value]).map(s=>s.toString());return!!o&&o.includes(t.value.toString())}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),$0=(()=>{class i extends bo{key="not-equal";constructor(){super()}run(e,t,r){const o=r.field?[e.fields[r.field].value]:(Array.isArray(r.values)?r.values:[r.value]).map(s=>s.toString());return!!o&&!o.includes(t.value.toString())}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Ru=(()=>{class i{greaterThanAction;lessThanAction;notEmptyAction;isEmptyAction;isEqualAction;notEqualAction;constructor(e,t,r,o,s,c){this.greaterThanAction=e,this.lessThanAction=t,this.notEmptyAction=r,this.isEmptyAction=o,this.isEqualAction=s,this.notEqualAction=c}get(e){return{"greater-than":this.greaterThanAction,"less-than":this.lessThanAction,"not-empty":this.notEmptyAction,"is-empty":this.isEmptyAction,"is-equal":this.isEqualAction,"not-equal":this.notEqualAction}[e]}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(B0),n.\u0275\u0275inject(R0),n.\u0275\u0275inject(j0),n.\u0275\u0275inject(k0),n.\u0275\u0275inject(P0),n.\u0275\u0275inject($0))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),U0=(()=>{class i extends sr{operatorManager;key="displayType";modes=["edit","detail","list","create","massupdate","filter"];constructor(e){super(),this.operatorManager=e}run(e,t){const r=e.record;if(!r||!e.field)return;const s=t.params&&t.params.activeOnFields||{},c=Object.keys(s),l=t.params&&t.params.activeOnAttributes||{},u=Object.keys(l);if(!c.length&&!u.length)return;const d=t.params&&t.params.targetDisplayType;if(!d)return;let f=this.isActive(c,r,s,u,l),p=e.field.defaultDisplay;f&&(p=d),e.field.display=p,(t.params&&t.params.resetOn||"none")===p&&(e.field.valueList&&e.field.valueList.length&&(e.field.valueList=[]),e.field.value&&(e.field.value=""))}isActive(e,t,r,o,s){let c=!1;return!c&&!(0,ie.isEmpty)(r)&&(c=this.areFieldsActive(e,t,r)),!c&&!(0,ie.isEmpty)(s)&&(c=this.areAttributesActive(o,t,s)),c}areAttributesActive(e,t,r){return e.some(o=>{const c=t.fields&&t.fields[o]||null,l=r[o]&&Object.keys(r[o]);if(c&&l&&l.length)return l.some(u=>{const d=r[o][u],f=c.attributes&&c.attributes[u];if(d&&d.length&&f)return this.isValueActive(t,f,d)})})}areFieldsActive(e,t,r){return e.every(o=>{const c=t.fields&&t.fields[o]||null,l=r[o];if(c&&l&&l.length)return this.isValueActive(t,c,l)})}isValueActive(e,t,r){let o=!1;if(t.valueList&&t.valueList.length)return t.valueList.some(l=>r.some(u=>{if(u===l)return o=!0,!0})),o;const s=Object.keys(e.fields);let c=[];return r.some(t.value?l=>{if((!l.field||s.includes(l.field))&&(l===t.value&&!l.operator&&(o=!0),l.operator)){const d=this.operatorManager.get(l.operator);c.push(d.run(e,t,l)),o=c.every(f=>f)}}:l=>{if(l.operator){if(l.field&&!s.includes(l.field))return;const d=this.operatorManager.get(l.operator);c.push(d.run(e,t,l)),o=c.every(f=>f)}}),o}getTriggeringStatus(){return["onValueChange","onFieldInitialize"]}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Ru))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),V0=(()=>{class i extends sr{key="emailPrimarySelect";modes=["edit","create","massupdate"];constructor(){super()}run(e,t){const o=e.field;if(!e.record||!o)return;const s=o.items;if(!o||!s||!s.length)return;const c=s.filter(f=>!(f&&f.attributes&&f.attributes.deleted));if(c&&1!==c.length)return;const l=c[0],u=l.fields&&l.fields["email-fields"]||{},d=u.attributes&&u.attributes.primary_address||null;d&&!(0,M.isTrue)(d.value)&&(d.value="true",d.formControl.setValue("true"),u.formControl.updateValueAndValidity({onlySelf:!0,emitEvent:!0}))}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const z0=i=>a=>i.isEmptyTrimmedInputValue(a.value)?{required:{required:!0,message:{labelKey:"LBL_VALIDATION_ERROR_REQUIRED",context:{value:a.value}}}}:null,G0=i=>a=>i.isEmptyBooleanInputValue(a.value)?{required:{required:!0,message:{labelKey:"LBL_VALIDATION_ERROR_REQUIRED",context:{value:a.value}}}}:null;let ju=(()=>{class i{utils;constructor(e){this.utils=e}applies(e,t){return!(!t||!t.fieldDefinition)&&(0,M.isTrue)(t.fieldDefinition.required)}getValidator(e){return"boolean"===e.type?[G0(this.utils)]:[z0(this.utils)]}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(go))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),fa=(()=>{class i{operatorManager;constructor(e){this.operatorManager=e}isActive(e,t,r,o,s){let c=!0;return(0,ie.isEmpty)(r)||(c=this.areFieldsActive(e,t,r)),(0,ie.isEmpty)(s)||(c=c&&this.areAttributesActive(o,t,s)),c}areAttributesActive(e,t,r){return e.every(o=>{const c=t.fields&&t.fields[o]||null,l=r[o]&&Object.keys(r[o]);if(c&&l&&l.length)return l.some(u=>{const d=r[o][u],f=c.attributes&&c.attributes[u];if(d&&d.length&&f)return this.isValueActive(t,f,d)})})}areFieldsActive(e,t,r){return e.every(o=>{const c=t.fields&&t.fields[o]||null,l=r[o];return!(c&&l&&l.length)||this.isValueActive(t,c,l)})}isValueActive(e,t,r){let o=!1;if(t.valueList&&t.valueList.length)return t.valueList.some(l=>r.some(u=>{if(u===l)return o=!0,!0})),o;const s=Object.keys(e.fields);let c=[];return r.some(t.value?l=>{if((!l.field||s.includes(l.field))&&(l===t.value&&!l.operator&&(o=!0),l.operator)){const d=this.operatorManager.get(l.operator);c.push(d.run(e,t,l)),o=c.every(f=>f)}}:l=>{if(l.operator){if(l.field&&!s.includes(l.field))return;const d=this.operatorManager.get(l.operator);c.push(d.run(e,t,l)),o=c.every(f=>f)}}),o}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Ru))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),W0=(()=>{class i extends sr{requiredValidator;activeFieldsChecker;key="required";modes=["edit","create","massupdate","filter"];constructor(e,t){super(),this.requiredValidator=e,this.activeFieldsChecker=t}run(e,t){const r=e.record,o=e.field;if(!r||!o)return;const s=t.params&&t.params.activeOnFields||{},c=Object.keys(s),l=t.params&&t.params.activeOnAttributes||{},u=Object.keys(l);if(!c.length&&!u.length)return;const d=this.activeFieldsChecker.isActive(c,r,s,u,l);let f=!1,p=[...e.field.validators||[]];d&&(f=!0,p=p.concat(this.requiredValidator.getValidator(o))),e.field.formControl.updateValueAndValidity({onlySelf:!0,emitEvent:!0}),r.formGroup.updateValueAndValidity({onlySelf:!0,emitEvent:!0}),e.field.definition.required=f,e.field.formControl.setValidators(p),e.field.formControl.updateValueAndValidity({onlySelf:!0,emitEvent:!0}),r.formGroup.updateValueAndValidity({onlySelf:!0,emitEvent:!0})}getTriggeringStatus(){return["onValueChange","onFieldInitialize"]}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(ju),n.\u0275\u0275inject(fa))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Qa=(()=>{class i{config;preferences;constructor(e,t){this.config=e,this.preferences=t}getFieldCurrencyValue(e,t){const r=this.isBase(e),o=this.getCurrencyId(t);if(!r&&null!==o)return e.value;const s=parseFloat(e.value);if(!isFinite(s))return e.value;const c=this.getUserCurrency();return this.baseToCurrency(c.id,s).toString()}baseToCurrency(e,t){const r=this.getConversionRate(e);return isFinite(r)?this.round(Cn(t,r)):t}currencyToBase(e,t){const r=this.getConversionRate(e);return isFinite(r)?this.round(Ti(t,r)):t}round(e){const t=this.getPrecision();return na(e,t)}getCurrencyId(e){return e?.fields?.currency_id?.value??null}isBase(e){return e?.metadata?.isBaseCurrency??!1}getCurrency(e){return this.config.getConfigValue("currencies")[e]??[]}getBaseCurrency(){return this.config.getConfigValue("currency")}getUserCurrency(){return this.preferences.getUserPreference("currency")}getPrecision(){const e=parseInt(this.preferences.getUserPreference("default_currency_significant_digits"));if(isFinite(e))return e;const t=parseInt(this.config.getConfigValue("default_currency_significant_digits"));return isFinite(t)?t:0}getConversionRate(e){const t=this.getCurrency(e);return parseFloat(t.conversion_rate)}getCode(e){return this.getCurrency(e).iso4217}getSymbol(e){return this.getCurrency(e).symbol}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(vt),n.\u0275\u0275inject(qt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),K0=(()=>{class i extends sr{currencyService;key="update-base-currency";modes=["edit","create","massupdate","filter"];constructor(e){super(),this.currencyService=e}run(e,t){const r=e.record,o=e.field;if(!r||!o)return;const s=t.params.currencyIdField??"currency_id",c=t.params.currencyField??"amount",l=r?.fields[s]?.value??null;let u=parseFloat(r?.fields[c]?.value??null);if(!isFinite(u))return;null===l&&this.updateValue(o,u,r);const d=this.currencyService.currencyToBase(l,u);isFinite(d)&&this.updateValue(o,d,r)}updateValue(e,t,r){e.value=t.toString(),e.formControl.setValue(t.toString()),r.formGroup.updateValueAndValidity({onlySelf:!0,emitEvent:!0})}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Qa))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),H0=(()=>{class i extends sr{currencyService;key="update-currency";modes=["edit","create","massupdate","filter"];constructor(e){super(),this.currencyService=e}run(e,t){const r=e.record,o=e.field;if(!r||!o||o?.definition?.metadata?.isBaseCurrency)return;const c=t.params.currencyIdField??"currency_id",l=t.params.baseCurrencyField??"amount_usdollar",u=r?.fields[c]?.value??null;let d=parseFloat(o?.value??null),f=parseFloat(r?.fields[l]?.value??null);if(!isFinite(d)||!isFinite(f)||null===u)return;const p=this.currencyService.baseToCurrency(u,f);isFinite(p)&&this.updateValue(o,p,r)}updateValue(e,t,r){e.value=t.toString(),e.formControl.setValue(t.toString()),r.formGroup.updateValueAndValidity({onlySelf:!0,emitEvent:!0})}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Qa))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Z0=(()=>{class i extends sr{activeFieldsChecker;key="updateValue";modes=["edit","detail","list","create","massupdate","filter"];constructor(e){super(),this.activeFieldsChecker=e}run(e,t){const r=e.record,o=e.field;if(!r||!o)return;const s=t.params&&t.params.activeOnFields||{},c=Object.keys(s),l=t.params&&t.params.activeOnAttributes||{},u=Object.keys(l);if(!c.length&&!u.length)return;const d=t.params&&t.params.targetValue;if(!d)return;const f=this.activeFieldsChecker.isActive(c,r,s,u,l);let p=e.field?.value;f&&(p=d),this.updateValue(o,p.toString(),r)}updateValue(e,t,r){e.value=t.toString(),e.formControl.setValue(t),r.formGroup.updateValueAndValidity({onlySelf:!0,emitEvent:!0})}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(fa))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),q0=(()=>{class i extends sr{key="update-flex-relate-module";modes=["edit","create","massupdate","filter"];constructor(){super()}run(e,t){const r=e.record,o=e.field;if(!r||!o)return;const s=o.definition.type_name??"";""!==s&&(r?.fields[s]?.value??"")!==(o?.definition?.module??"")&&(o.definition.module=r?.fields[s]?.value??"",this.updateValue(o,{},"",r))}updateValue(e,t,r,o){e.value=r,e.valueObject=t,e.formControl.setValue(r),o.formGroup.updateValueAndValidity({onlySelf:!0,emitEvent:!0})}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),dt=(()=>{class i{config;messages$;messages=[];messagesStage;timeout=3;constructor(e){this.config=e,this.messagesStage=new S.BehaviorSubject([]),this.messages$=this.messagesStage.asObservable(),this.initTimeOut()}updateState(e){this.messagesStage.next(this.messages=e)}removeMessages(){this.updateState([])}contains(e,t=!1){let r=!1;for(let o=0;o<this.messages.length;o++)if(this.isSame(e,this.messages[o])){if(r=!0,t){const s=[...this.messages];s.splice(o,1),this.updateState(s)}break}return r}addMessage(e){let t=-1;if(!this.contains(e)){const r=[...this.messages];t=r.push(e),(e.type===M.MessageTypes.success||e.type===M.MessageTypes.warning)&&setTimeout(()=>{this.contains(e,!0)},1e3*this.timeout),this.updateState(r)}return t}addPrimaryMessage(e){return this.addMessage({type:M.MessageTypes.primary,text:e})}addSecondaryMessage(e){return this.addMessage({type:M.MessageTypes.secondary,text:e})}addSuccessMessage(e){return this.addMessage({type:M.MessageTypes.success,text:e})}addSuccessMessageByKey(e){return this.addMessage({type:M.MessageTypes.success,labelKey:e})}addDangerMessage(e){return this.addMessage({type:M.MessageTypes.danger,text:e})}addDangerMessageByKey(e){return this.addMessage({type:M.MessageTypes.danger,labelKey:e})}addWarningMessage(e){return this.addMessage({type:M.MessageTypes.warning,text:e})}addWarningMessageByKey(e){return this.addMessage({type:M.MessageTypes.warning,labelKey:e})}addInfoMessage(e){return this.addMessage({type:M.MessageTypes.info,text:e})}addDarkMessage(e){return this.addMessage({type:M.MessageTypes.dark,text:e})}log(...e){console.log.apply(console,e)}error(...e){console.error.apply(console,e)}initTimeOut(){const e=this.config.getConfigValue("ui");if(e&&e.alert_timeout){const t=parseInt(e.alert_timeout,10);isNaN(t)||(this.timeout=t)}}isSame(e,t){let r="text";return e.labelKey&&(r="labelKey"),e[r]===t[r]}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(vt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();class Xa{}let J0=(()=>{class i extends Xa{router;message;key="redirect";constructor(e,t){super(),this.router=e,this.message=t}run(e){if(!e||!e.route)return void this.message.addDangerMessageByKey("LBL_MISSING_HANDLER_DATA_ROUTE");const t={queryParams:{}};e.queryParams&&(t.queryParams=e.queryParams),this.router.navigate([e.route],t).then()}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Rt.Router),n.\u0275\u0275inject(dt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Q0=(()=>{class i extends Xa{message;key="export";constructor(e){super(),this.message=e}run(e){e&&e.url&&e.formData?this.download(e.url,e.formData):this.message.addDangerMessageByKey("LBL_MISSING_HANDLER_DATA_ROUTE")}download(e,t){const r=document.createElement("form");r.setAttribute("id","export-download"),r.setAttribute("method","post"),r.setAttribute("action",e),r.setAttribute("target","_self"),r.setAttribute("style","display: none;"),Object.keys(t).forEach(o=>{const s=document.createElement("input");s.setAttribute("name",o),s.setAttribute("value",t[o]),r.appendChild(s)}),document.body.appendChild(r),r.submit(),document.body.removeChild(r)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(dt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),X0=(()=>{class i extends Xa{key="noop";constructor(){super()}run(e){}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();class ku{iframe;observer;constructor(){}init(a){this.iframe=a,this.initialSizeAdjustment(),this.addBodyResizeListener()}destroy(){this.observer&&this.observer.disconnect(),this.iframe=null,this.observer=null}initialSizeAdjustment(){setTimeout(this.onResize.bind(this),200)}addBodyResizeListener(){const a={document:this.iframe.contentWindow.document,element:this.iframe.contentWindow.document.body,height:this.iframe.contentWindow.document.body.scrollHeight,watched:[{getHeight:()=>{const e=a.document.getElementsByClassName("modal in"),t=e&&e[0],r=t&&t.firstElementChild;return r&&r.scrollHeight+200||-1}},{getHeight:()=>{const e=a.document.getElementById("bootstrap-container"),t=e&&e.scrollHeight+150||-1;return t>0?t:a.element.scrollHeight+50}}]};this.observer=(new ED.MutationObserverFactory).create(()=>{const e=[];a.watched.forEach(o=>{const s=o.getHeight();s>0&&e.push(s)}),e.sort((o,s)=>o-s);const t=e.pop(),r=this.calculateResizing(a.height,t);r.resized&&(a.height=r.height)}),this.observer.observe(this.iframe.contentWindow.document.body,{attributes:!0,childList:!0,characterData:!0,subtree:!0})}calculateResizing(a,e){const t=window.innerHeight-50;return e<t&&(e=t),a===e?{resized:!1}:a<e-20||this.iframe.scrollHeight>e?(this.resizeIFrame(e),{resized:!0,height:e}):{resized:!1}}onResize(){this.calculateResizing(this.iframe.offsetHeight,this.iframe.contentWindow.document.body.scrollHeight+120)}resizeIFrame(a){this.iframe.style.height=a+1+"px"}}class Pu{iframe;lastDispatched;changeCallback=null;loadCallback=null;unLoadCallback=null;unloadListener=null;loadListener=null;constructor(a,e=null,t=null,r=null){this.iframe=a,this.changeCallback=e,this.loadCallback=t,this.unLoadCallback=r}init(){this.loadListener=this.loadHandler.bind(this),this.unloadListener=this.unloadHandler.bind(this),this.iframe.contentWindow.addEventListener("load",this.loadListener),this.iframe.contentWindow.removeEventListener("unload",this.unloadListener)}destroy(){const a=this.iframe&&this.iframe.contentWindow;a&&(a.removeEventListener("unload",this.unloadListener),a.removeEventListener("load",this.loadListener)),this.iframe=null,this.lastDispatched=null,this.changeCallback=null,this.loadCallback=null,this.unLoadCallback=null,this.loadListener=null,this.unloadListener=null}loadHandler(){this.loadCallback(),this.bindUnload()}bindUnload(){this.iframe.contentWindow.removeEventListener("unload",this.unloadListener),this.unloadListener=this.unloadHandler.bind(this),this.iframe.contentWindow.addEventListener("unload",this.unloadListener)}unloadHandler(){this.unLoadCallback(),setTimeout(this.triggerPageChange.bind(this),0)}triggerPageChange(){const a=this.iframe&&this.iframe.contentWindow&&this.iframe.contentWindow.location.href;a&&a!==this.lastDispatched&&(this.lastDispatched=a,this.changeCallback(a))}}const g4=["dataContainer"];let Y0=(()=>{class i{languageStore;activeModal;url="";titleKey="";asyncActionCallback=null;dataContainer;closeButton;wrapper;iframe=null;iframePageChangeHandler;iframeResizeHandler;constructor(e,t){this.languageStore=e,this.activeModal=t}ngOnInit(){this.closeButton={klass:["btn","btn-outline-light","btn-sm"],onClick:()=>{this.activeModal.close({type:"close-button"})}}}ngAfterViewInit(){this.initIframe()}ngOnDestroy(){this.cleanObservers(),this.iframe=null;const e=this.wrapper;this.wrapper.firstChild&&e.removeChild(e.firstChild),e.innerHTML="<iframe></iframe>",this.wrapper=null}cleanObservers(){this.iframeResizeHandler&&(this.iframeResizeHandler.destroy(),this.iframeResizeHandler=null),this.iframePageChangeHandler&&(this.iframePageChangeHandler.destroy(),this.iframePageChangeHandler=null)}initIframe(){this.wrapper=this.dataContainer.nativeElement,this.wrapper.firstChild&&this.wrapper.removeChild(this.wrapper.firstChild);const e=document.createElement("iframe");e.src=this.url,this.wrapper.appendChild(e),this.iframe=e,this.iframe.style.display="block",this.initObservers()}initObservers(){this.iframePageChangeHandler=this.buildIframePageChangeObserver(),this.iframeResizeHandler=this.buildIframeResizeHandlerHandler(),this.iframePageChangeHandler&&this.iframePageChangeHandler.init()}onIFrameLoad(){this.iframe.contentWindow.document.body.style.overflow="hidden",null!==this.asyncActionCallback&&this.asyncActionCallback(this.iframe),this.iframeResizeHandler.init(this.iframe)}onIFrameUnload(){this.iframe.style.display="none",this.iframeResizeHandler.destroy()}buildIframePageChangeObserver(){return new Pu(this.iframe,null,this.onIFrameLoad.bind(this),this.onIFrameUnload.bind(this))}buildIframeResizeHandlerHandler(){return new ku}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject($e),n.\u0275\u0275directiveInject(pe.NgbActiveModal))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-classic-modal"]],viewQuery:function(t,r){if(1&t&&n.\u0275\u0275viewQuery(g4,7),2&t){let o;n.\u0275\u0275queryRefresh(o=n.\u0275\u0275loadQuery())&&(r.dataContainer=o.first)}},inputs:{url:"url",titleKey:"titleKey",asyncActionCallback:"asyncActionCallback"},decls:5,vars:3,consts:[["bodyKlass","m-0 small-font","footerKlass","border-0","klass","classic-view-modal",3,"closable","close","titleKey"],["modal-body",""],[1,"classic-view-container"],["dataContainer",""]],template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"scrm-modal",0)(1,"div",1)(2,"div",2,3),n.\u0275\u0275element(4,"iframe"),n.\u0275\u0275elementEnd()()()),2&t&&n.\u0275\u0275property("closable",!0)("close",r.closeButton)("titleKey",r.titleKey)},dependencies:[da],encapsulation:2,data:{animation:[(0,Wt.trigger)("modalFade",[(0,Wt.transition)("void <=> *",[(0,Wt.animate)("800ms")])])]}})}return i})(),eb=(()=>{class i extends Xa{router;modalService;message;key="audit";constructor(e,t,r){super(),this.router=e,this.modalService=t,this.message=r}run(e){e&&e.url?this.showClassicViewModal(e.url):this.message.addDangerMessageByKey("LBL_MISSING_HANDLER_DATA_ROUTE")}changeLogLegacyContentFormatter(e){if(!e)return;const t=e.contentDocument.getElementsByClassName("moduleTitle")[0];t&&(t.innerText="")}showClassicViewModal(e){const t=this.modalService.open(Y0,{size:"xl",centered:!0,scrollable:!0});t.componentInstance.titleKey="LBL_CHANGE_LOG",t.componentInstance.url=e,t.componentInstance.asyncActionCallback=this.changeLogLegacyContentFormatter.bind(this)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Rt.Router),n.\u0275\u0275inject(pe.NgbModal),n.\u0275\u0275inject(dt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Yt=(()=>{class i{processService;appStateStore;message;redirectAction;exportAction;noopAction;changelogAction;actions={};constructor(e,t,r,o,s,c,l){this.processService=e,this.appStateStore=t,this.message=r,this.redirectAction=o,this.exportAction=s,this.noopAction=c,this.changelogAction=l,this.registerHandler(o),this.registerHandler(s),this.registerHandler(c),this.registerHandler(l)}registerHandler(e){this.actions[e.key]=e}run(e,t,r=null){const o={...t};return this.appStateStore.updateLoading(e,!0),this.processService.submit(e,o).pipe((0,v.take)(1),(0,v.tap)(s=>{this.appStateStore.updateLoading(e,!1);let c="addSuccessMessageByKey";if("error"===s.status&&(c="addDangerMessageByKey"),s.messages&&s.messages.forEach(d=>{d&&this.message[c](d)}),"error"===s.status)return;const l=r||s.data&&s.data.handler||null;if(!l)return;const u=this.actions[l];u?u.run(s.data.params):this.message.addDangerMessageByKey("LBL_MISSING_HANDLER")}),(0,v.catchError)(s=>"Access Denied."===(s?.message??"")?(this.appStateStore.updateLoading(e,!1),(0,S.of)(null)):(this.message.addDangerMessageByKey("LBL_ACTION_ERROR"),this.appStateStore.updateLoading(e,!1),(0,S.of)(null))))}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(ir),n.\u0275\u0275inject(Xt),n.\u0275\u0275inject(dt),n.\u0275\u0275inject(J0),n.\u0275\u0275inject(Q0),n.\u0275\u0275inject(X0),n.\u0275\u0275inject(eb))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),pa=(()=>{class i{getKey(){return"base"}map(e){!e.fields||!Object.keys(e.fields).length||Object.keys(e.fields).forEach(t=>{const r=e.fields[t],o=r.type||"",s=r.definition.source||"",c=r.definition.rname||"name",l=r.definition.id_name||"";if("relate"!==o||"non-db"!==s||l!==t){if("relate"===o&&"non-db"===s&&""!==c&&r.valueObject){const u=e.attributes[t]||{};return u[c]=r.valueObject[c],u.id=r.valueObject.id,e.attributes[t]=u,void(e.attributes[l]=r.valueObject.id)}if(!r.valueObject)return r.items?(e.attributes[t]=[],void r.items.forEach(u=>{e.attributes[t].push({id:u.id,module:u.module,attributes:(0,M.deepClone)(u.attributes)})})):void(e.attributes[t]=r.valueObjectArray?r.valueObjectArray:r.valueList?r.valueList:r.value);e.attributes[t]=r.valueObject}else e.attributes[t]=r.value})}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),tb=(()=>{class i extends sr{asyncActionService;processService;messages;recordMappers;baseMapper;activeFieldsChecker;key="updateValueBackend";modes=["edit","detail","list","create","massupdate","filter"];constructor(e,t,r,o,s,c){super(),this.asyncActionService=e,this.processService=t,this.messages=r,this.recordMappers=o,this.baseMapper=s,this.activeFieldsChecker=c,o.register("default",s.getKey(),s)}run(e,t){const r=e.record,o=e.field;if(!r||!o)return;const s=t.params&&t.params.activeOnFields||{},c=Object.keys(s),l=t.params&&t.params.activeOnAttributes||{},u=Object.keys(l);if(!c.length&&!u.length)return;const d=t.params&&t.params.process;if(d&&this.activeFieldsChecker.isActive(c,r,s,u,l)){const p=d,m=this.getBaseRecord(r),h={action:p,module:r.module??"",record:m};o.loading=!0,this.processService.submit(p,h).pipe((0,v.take)(1)).subscribe(g=>{const b=g?.data?.value??null;o.loading=!1,null!==b?this.updateValue(o,b.toString(),r):this.messages.addDangerMessageByKey("ERR_FIELD_LOGIC_BACKEND_CALCULATION")},g=>{o.loading=!1,this.messages.addDangerMessageByKey("ERR_FIELD_LOGIC_BACKEND_CALCULATION")})}}getBaseRecord(e){return e?(this.mapRecordFields(e),(0,M.deepClone)({id:e.id,type:e.type,module:e.module,attributes:e.attributes,acls:e.acls})):null}mapRecordFields(e){const t=this.recordMappers.get(e.module);Object.keys(t).forEach(r=>{t[r].map(e)})}updateValue(e,t,r){e.value=t.toString(),e.formControl.setValue(t),r.formGroup.updateValueAndValidity({onlySelf:!0,emitEvent:!0})}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Yt),n.\u0275\u0275inject(ir),n.\u0275\u0275inject(dt),n.\u0275\u0275inject(M.RecordMapperRegistry),n.\u0275\u0275inject(pa),n.\u0275\u0275inject(fa))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),nb=(()=>{class i extends sr{asyncActionService;processService;messages;recordMappers;baseMapper;activeFieldsChecker;key="displayTypeBackend";modes=["edit","detail","list","create","massupdate","filter"];constructor(e,t,r,o,s,c){super(),this.asyncActionService=e,this.processService=t,this.messages=r,this.recordMappers=o,this.baseMapper=s,this.activeFieldsChecker=c,o.register("default",s.getKey(),s)}run(e,t){const r=e.record,o=e.field;if(!r||!o)return;const s=t.params&&t.params.activeOnFields||{},c=Object.keys(s),l=t.params&&t.params.activeOnAttributes||{},u=Object.keys(l);if(!c.length&&!u.length)return;const d=t.params&&t.params.process;if(!d)return;const f=this.activeFieldsChecker.isActive(c,r,s,u,l);let p=e.field.defaultDisplay;if(f){const h=d,g=this.getBaseRecord(r),b={action:h,module:r.module??"",record:g};o.loading=!0,this.processService.submit(h,b).subscribe(_=>{const D=_?.data?.value??null;o.loading=!1,null!==D?(p=D,e.field.display=p):this.messages.addDangerMessageByKey("ERR_FIELD_LOGIC_BACKEND_CALCULATION")},_=>{o.loading=!1,this.messages.addDangerMessageByKey("ERR_FIELD_LOGIC_BACKEND_CALCULATION")})}(t.params&&t.params.resetOn||"none")===p&&(e.field.valueList&&e.field.valueList.length&&(e.field.valueList=[]),e.field.value&&(e.field.value=""))}getBaseRecord(e){return e?(this.mapRecordFields(e),(0,M.deepClone)({id:e.id,type:e.type,module:e.module,attributes:e.attributes,acls:e.acls})):null}mapRecordFields(e){const t=this.recordMappers.get(e.module);Object.keys(t).forEach(r=>{t[r].map(e)})}getTriggeringStatus(){return["onValueChange","onFieldInitialize"]}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Yt),n.\u0275\u0275inject(ir),n.\u0275\u0275inject(dt),n.\u0275\u0275inject(M.RecordMapperRegistry),n.\u0275\u0275inject(pa),n.\u0275\u0275inject(fa))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),_t=(()=>{class i extends vi{actions={edit:{},create:{},list:{},detail:{},massupdate:{},filter:{}};constructor(e,t,r,o,s,c,l,u,d){super(),e.modes.forEach(f=>this.actions[f][e.key]=e),t.modes.forEach(f=>this.actions[f][t.key]=t),r.modes.forEach(f=>this.actions[f][r.key]=r),o.modes.forEach(f=>this.actions[f][o.key]=o),s.modes.forEach(f=>this.actions[f][s.key]=s),l.modes.forEach(f=>this.actions[f][l.key]=l),c.modes.forEach(f=>this.actions[f][c.key]=c),u.modes.forEach(f=>this.actions[f][u.key]=u),d.modes.forEach(f=>this.actions[f][d.key]=d)}runLogic(e,t,r,o=""){if(!e.logic)return;const s=Object.keys(e.logic).map(u=>e.logic[u]),c=this.parseModeActions(s,t,o),l={record:r,field:e,module:r.module};c.forEach(u=>{this.runAction(u,t,l)})}runAction(e,t,r=null){this.runFrontEndAction(e,t,r)}runFrontEndAction(e,t,r=null){const o=this.buildActionData(e,r);this.run(e,t,o)}getModuleName(e){return e.module}buildActionData(e,t){return{field:t.field,record:t&&t.record||null}}parseModeActions(e,t,r){if(!e)return[];const o={list:[],detail:[],edit:[],create:[],massupdate:[],filter:[]};e&&e.length&&e.forEach(l=>{!l.modes||!l.modes.length||l.modes.forEach(u=>{!o[u]&&!l.asyncProcess||o[u].push(l)})});const s=[],c=["onValueChange"];return o[t].forEach(l=>{const u=this?.actions[t][l.key]?.getTriggeringStatus()??null;r&&!(l?.triggeringStatus??u??c).includes(r)||s.push(l)}),s}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(U0),n.\u0275\u0275inject(V0),n.\u0275\u0275inject(W0),n.\u0275\u0275inject(K0),n.\u0275\u0275inject(H0),n.\u0275\u0275inject(Z0),n.\u0275\u0275inject(q0),n.\u0275\u0275inject(tb),n.\u0275\u0275inject(nb))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();class ib extends M.ActionHandler{shouldDisplay(a){return!0}}let rb=(()=>{class i extends ib{activeFieldsChecker;key="displayType";modes=["edit","detail","list","create","massupdate","filter"];constructor(e){super(),this.activeFieldsChecker=e}run(e,t){const r=e.record;if(!r||!e.field)return!0;const s=t.params&&t.params.activeOnFields||{},c=Object.keys(s),l=t.params&&t.params.activeOnAttributes||{},u=Object.keys(l);return!c.length&&!u.length||this.activeFieldsChecker.isActive(c,r,s,u,l)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(fa))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),yt=(()=>{class i extends vi{constructor(e){super(),e.modes.forEach(t=>this.actions[t][e.key]=e)}runAll(e,t,r){let o="show";if(!e.displayLogic)return;const s=Object.values(e.displayLogic).filter(f=>{const p=f.modes??[];return!(!p.length||!p.includes(r))});if(!s||!s.length)return;let c=e.defaultDisplay??"show",l="none";"none"===c&&(l="show");const u={record:t,field:e,module:t.module};s.some(f=>{const p=this.buildActionData(f,u);return this.actions[r][f.key].run(p,f)})&&(c=l),o=c,"show"===c&&(o="show"),e.display=o}buildActionData(e,t){return{field:t.field,record:t&&t.record||null}}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(rb))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),_n=(()=>{class i{typeFormatter;logic;logicDisplay;mode;field;record;parent;klass=null;dependentFields={};dependentAttributes=[];subs=[];constructor(e,t,r){this.typeFormatter=e,this.logic=t,this.logicDisplay=r}ngOnInit(){this.baseInit()}ngOnDestroy(){this.unsubscribeAll()}baseInit(){this.initDependencyHandlers()}initDependencyHandlers(){if(!this.record)return;const e=this.record.fields&&Object.keys(this.record.fields)||[];e.length>1&&(this.calculateDependentFields(e),this.field.previousValue=this.field.value,(this.dependentFields&&Object.keys(this.dependentFields).length||this.dependentAttributes.length)&&Object.keys(this.dependentFields).forEach(t=>{const r=this.record.fields[t]||null;if(!r)return;const o=this.dependentFields[t].type??[];o.includes("logic")&&this.logic.runLogic(r,this.mode,this.record,"onFieldInitialize"),o.includes("displayLogic")&&this.logicDisplay.runAll(r,this.record,this.mode)}),this.field.valueChanges$&&(this.dependentFields&&Object.keys(this.dependentFields).length||this.dependentAttributes.length)&&this.subs.push(this.field.valueChanges$.pipe((0,v.debounceTime)(500)).subscribe(t=>{Object.keys(this.dependentFields).forEach(r=>{const s=this.record.fields[r]||null;if(s&&this.field.previousValue!=t.value){const c=this.dependentFields[r].type??[];c.includes("logic")&&this.logic.runLogic(s,this.mode,this.record,"onValueChange"),c.includes("displayLogic")&&this.logicDisplay.runAll(s,this.record,this.mode)}}),this.field.previousValue=t.value,this.dependentAttributes.forEach(r=>{const o=this.record.fields[r.field]||{},s=o&&o.attributes&&o.attributes[r.attribute]||null;s&&this.logic.runLogic(s,this.mode,this.record,"onValueChange")})})))}calculateDependentFields(e){e.forEach(t=>{"field"!==this.field.source&&"groupField"!==this.field.source?"attribute"!==this.field.source||this.addAttributeDependency(t,this.dependentFields,this.dependentAttributes):this.addFieldDependency(t,this.dependentFields,this.dependentAttributes)})}addFieldDependency(e,t,r){const o=this.record.fields[e],s=this.field.name||this.field.definition.name||"";e!==s&&o&&(o.fieldDependencies&&this.isDependencyField(o.fieldDependencies)&&(t[e]=o.fieldDependencies[s]),(o.attributes&&Object.keys(o.attributes)||[]).forEach(l=>{const u=o.attributes[l];!u||!u.fieldDependencies||!u.fieldDependencies.length||this.isDependencyField(u.fieldDependencies)&&r.push({field:e,attribute:l,types:t[s].types??[]})}))}isDependencyField(e){return!!e[this.field.name||this.field.definition.name||""]}addAttributeDependency(e,t,r){const o=this.record.fields[e],s=this.field.name||this.field.definition.name||"";e!==s&&o&&(o.attributeDependencies&&o.attributeDependencies.length&&this.isDependencyAttribute(o.attributeDependencies)&&(t[s]=o.fieldDependencies[s]),(o.attributes&&Object.keys(o.attributes)||[]).forEach(l=>{const u=o.attributes[l];!u||!u.attributeDependencies||!u.attributeDependencies.length||this.isDependencyAttribute(u.attributeDependencies)&&r.push({field:e,attribute:l,types:(t[s]??{}).types??[]})}))}isDependencyAttribute(e){const t=this.field.parentKey||"",r=this.field.name||this.field.definition.name||"";return e.some(o=>t===o.field&&r===o.attribute)}subscribeValueChanges(){this.field&&this.field.formControl&&this.subs.push(this.field.formControl.valueChanges.subscribe(e=>{e=(0,M.isVoid)(e)?"":e.trim(),this.typeFormatter&&this.field.type&&(e=this.toInternalFormat(this.field.type,e)),this.setFieldValue(e)}))}toInternalFormat(e,t){return this.typeFormatter.toInternalFormat(e,t)}setFieldValue(e){this.field.value=e}unsubscribeAll(){this.subs.forEach(e=>e.unsubscribe())}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(ut),n.\u0275\u0275directiveInject(_t),n.\u0275\u0275directiveInject(yt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["ng-component"]],inputs:{mode:"mode",field:"field",record:"record",parent:"parent",klass:"klass"},decls:0,vars:0,template:function(t,r){},encapsulation:2})}return i})(),yc=(()=>{class i extends _n{typeFormatter;logic;logicDisplay;constructor(e,t,r){super(e,t,r),this.typeFormatter=e,this.logic=t,this.logicDisplay=r}getTelLink(e){return e?"tel:"+this.getUnFormatted(e):null}getUnFormatted(e){return e?e.replace(/\s+/g,""):""}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(ut),n.\u0275\u0275directiveInject(_t),n.\u0275\u0275directiveInject(yt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-phone-detail"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:2,vars:2,consts:[[3,"href"]],template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"a",0),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&t&&(n.\u0275\u0275property("href",r.getTelLink(r.field.value),n.\u0275\u0275sanitizeUrl),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(r.field.value))},encapsulation:2})}return i})(),zi=(()=>{class i extends _n{languages;typeFormatter;logic;logicDisplay;selectedValues=[];valueLabel="";optionsMap;options=[];labels;subs=[];mappedOptions;isDynamicEnum=!1;constructor(e,t,r,o){super(t,r,o),this.languages=e,this.typeFormatter=t,this.logic=r,this.logicDisplay=o}ngOnInit(){super.ngOnInit();const e=this?.field?.metadata?.options$??null;if(e)return void this.subs.push(this.field.metadata.options$.subscribe(r=>{this.buildProvidedOptions(r),this.initValue()}));const t=this?.field?.definition?.options??null;t&&this.subs.push(this.languages.vm$.subscribe(r=>{this.buildAppStringListOptions(r.appListStrings),this.initValue()})),!t&&!e&&this.initValue()}ngOnDestroy(){this.isDynamicEnum=!1,this.subs.forEach(e=>e.unsubscribe())}getInvalidClass(){return this.field.formControl&&this.field.formControl.invalid&&this.field.formControl.touched?"is-invalid":""}buildProvidedOptions(e){this.options=e,this.optionsMap={},e.forEach(t=>{this.optionsMap[t.value]=t.label})}buildAppStringListOptions(e){if(this.optionsMap={},this.addExtraOptions(),e&&this.field.definition.options&&e[this.field.definition.options]){const t=e[this.field.definition.options];this.options&&Object.keys(this.options)&&(this.optionsMap={...this.optionsMap,...t})}this.buildOptionsArray(e)}addExtraOptions(){(this.field.metadata&&this.field.metadata.extraOptions||[]).forEach(t=>{if((0,M.isVoid)(t.value))return;let r=t.label||"";t.labelKey&&(r=this.languages.getFieldLabel(t.labelKey)),this.optionsMap[t.value]=r})}buildOptionsArray(e){this.options=[],Object.keys(this.optionsMap).forEach(t=>{this.options.push({value:t,label:this.optionsMap[t]})}),this.isDynamicEnum&&this.buildDynamicEnumOptions(e)}initValue(){this.selectedValues=[],this.field.criteria?this.initValueLabel():this.field.value?"string"==typeof this.field.value&&this.optionsMap&&"string"==typeof this.optionsMap[this.field.value]&&this.initValueLabel():this.initEnumDefault()}initValueLabel(){const e=this.field.value||this.field.criteria?.target||void 0;void 0!==e&&(this.valueLabel=this.optionsMap[e],this.selectedValues.push({value:e,label:this.valueLabel}))}initEnumDefault(){if(!(0,M.isEmptyString)(this.record?.id))return void this.field?.formControl.setValue("");let e=this.field?.definition?.default;"string"==typeof e&&(e=e.trim()),e?(this.selectedValues.push({value:e,label:this.optionsMap[e]}),this.initEnumDefaultFieldValues(e)):this.field.formControl.setValue("")}initEnumDefaultFieldValues(e){if("multienum"===this.field.type){const t=this.selectedValues.map(r=>r.value);this.field.valueList=t,this.field.formControl.setValue(t)}else this.field.value=e,this.field.formControl.setValue(e);this.field.formControl.markAsDirty()}checkAndInitAsDynamicEnum(){const e=this.field&&this.field.definition||{},r=e&&e.parentenum||"",o=this.record&&this.record.fields||null;if(e&&e.dynamic&&r&&o){this.isDynamicEnum=!0;const s=o[r];s&&this.subscribeToParentValueChanges(s)}}buildDynamicEnumOptions(e){const t=this.record.fields[this.field.definition.parentenum];if(t){const r=e[t.definition.options];if(r&&0!==Object.keys(r).length){this.mappedOptions=this.createParentChildOptionsMap(r,this.options);let o=[];"multienum"===t.definition.type?o=t.valueList:o.push(t.value),this.options=this.filterMatchingOptions(o)}}}filterMatchingOptions(e){let t=[];return e&&e.length?(e.forEach(r=>{this.mappedOptions[r]&&(t=t.concat([...this.mappedOptions[r]]))}),t):[]}createParentChildOptionsMap(e,t){const r={};return Object.keys(e).forEach(o=>{r[o]=t.filter(s=>String(s.value).startsWith(o))}),r}subscribeToParentValueChanges(e){e.formControl&&this.subs.push(e.formControl.valueChanges.subscribe(t=>{"string"==typeof t&&(t=[t]),this.field.value="",this.field.formControl.setValue(""),this.options=this.filterMatchingOptions(t),this.initValue()}))}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject($e),n.\u0275\u0275directiveInject(ut),n.\u0275\u0275directiveInject(_t),n.\u0275\u0275directiveInject(yt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["ng-component"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:0,vars:0,template:function(t,r){},encapsulation:2})}return i})(),bc=(()=>{class i extends zi{languages;typeFormatter;logic;logicDisplay;constructor(e,t,r,o){super(e,t,r,o),this.languages=e,this.typeFormatter=t,this.logic=r,this.logicDisplay=o}initValue(){this.selectedValues=[],!this.field.valueList||this.field.valueList.length<1?this.initEnumDefault():this.field.valueList.forEach(e=>{"string"==typeof this.optionsMap[e]&&this.selectedValues.push({value:e,label:this.optionsMap[e]})})}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject($e),n.\u0275\u0275directiveInject(ut),n.\u0275\u0275directiveInject(_t),n.\u0275\u0275directiveInject(yt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["ng-component"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:0,vars:0,template:function(t,r){},encapsulation:2})}return i})();const h4=["tag"];let Cc=(()=>{class i extends bc{languages;typeFormatter;logic;logicDisplay;tag;constructor(e,t,r,o){super(e,t,r,o),this.languages=e,this.typeFormatter=t,this.logic=r,this.logicDisplay=o}ngOnInit(){this.field.valueList=[],this.field.criteria.values&&this.field.criteria.values.length>0&&(this.field.valueList=this.field.criteria.values),super.ngOnInit()}onAdd(){const e=this.selectedValues.map(t=>t.value);this.field.valueList=e,this.field.formControl.setValue(e),this.field.formControl.markAsDirty(),this.field.criteria.operator="=",this.field.criteria.values=e}onRemove(){let e=this.selectedValues.map(t=>t.value);e||(e=[]),this.field.valueList=e,this.field.formControl.setValue(e),this.field.formControl.markAsDirty(),this.field.criteria.operator="=",this.field.criteria.values=e,setTimeout(()=>{this.tag.focus(!0,!0),this.tag.dropdown.show()},200)}getPlaceholderLabel(){return this.languages.getAppString("LBL_SELECT_ITEM")||""}selectFirstElement(){const e=this.tag.dropdown.items;0!==e.length&&(this.selectedValues.push(e[0]),this.onAdd(),this.tag.dropdown.hide())}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject($e),n.\u0275\u0275directiveInject(ut),n.\u0275\u0275directiveInject(_t),n.\u0275\u0275directiveInject(yt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-multienum-filter"]],viewQuery:function(t,r){if(1&t&&n.\u0275\u0275viewQuery(h4,5),2&t){let o;n.\u0275\u0275queryRefresh(o=n.\u0275\u0275loadQuery())&&(r.tag=o.first)}},features:[n.\u0275\u0275InheritDefinitionFeature],decls:3,vars:13,consts:[[3,"ngModel","onlyFromAutocomplete","clearOnBlur","displayBy","identifyBy","placeholder","secondaryPlaceholder","inputClass","ngModelChange","onAdd","onRemove","keyup.enter"],["tag",""],[3,"displayBy","identifyBy","showDropdownIfEmpty","keepOpen","autocompleteItems"]],template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"tag-input",0,1),n.\u0275\u0275listener("ngModelChange",function(s){return r.selectedValues=s})("onAdd",function(){return r.onAdd()})("onRemove",function(){return r.onRemove()})("keyup.enter",function(){return r.selectFirstElement()}),n.\u0275\u0275element(2,"tag-input-dropdown",2),n.\u0275\u0275elementEnd()),2&t&&(n.\u0275\u0275property("ngModel",r.selectedValues)("onlyFromAutocomplete",!0)("clearOnBlur",!0)("displayBy","label")("identifyBy","value")("placeholder",r.getPlaceholderLabel())("secondaryPlaceholder",r.getPlaceholderLabel())("inputClass",r.getInvalidClass()),n.\u0275\u0275advance(2),n.\u0275\u0275property("displayBy","label")("identifyBy","value")("showDropdownIfEmpty",!0)("keepOpen",!1)("autocompleteItems",r.options))},dependencies:[De.NgControlStatus,De.NgModel,Un.TagInputComponent,Un.TagInputDropdown],encapsulation:2})}return i})(),Jr=(()=>{class i extends zi{languages;typeFormatter;logic;logicDisplay;constructor(e,t,r,o){super(e,t,r,o),this.languages=e,this.typeFormatter=t,this.logic=r,this.logicDisplay=o}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject($e),n.\u0275\u0275directiveInject(ut),n.\u0275\u0275directiveInject(_t),n.\u0275\u0275directiveInject(yt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-enum-detail"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,template:function(t,r){1&t&&n.\u0275\u0275text(0),2&t&&n.\u0275\u0275textInterpolate1("\n",r.valueLabel,"\n")},encapsulation:2})}return i})(),ob=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,De.FormsModule]})}return i})(),ab=(()=>{class i extends _n{typeFormatter;logic;logicDisplay;constructor(e,t,r){super(e,t,r),this.typeFormatter=e,this.logic=t,this.logicDisplay=r}getNameField(e,t){if(!e.value||!t.attributes)return;const r=e.value.split(" "),o=[];return r.forEach(s=>{t.attributes[s]&&o.push(t.attributes[s])}),o.join(" ")}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(ut),n.\u0275\u0275directiveInject(_t),n.\u0275\u0275directiveInject(yt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["ng-component"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:0,vars:0,template:function(t,r){},encapsulation:2})}return i})(),Mc=(()=>{class i extends ab{typeFormatter;logic;logicDisplay;data;constructor(e,t,r){super(e,t,r),this.typeFormatter=e,this.logic=t,this.logicDisplay=r}ngOnInit(){super.ngOnInit(),this.data=this.getNameField(this.field,this.record)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(ut),n.\u0275\u0275directiveInject(_t),n.\u0275\u0275directiveInject(yt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-fullname-detail"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,template:function(t,r){1&t&&n.\u0275\u0275text(0),2&t&&n.\u0275\u0275textInterpolate1("\n",r.data,"\n")},encapsulation:2})}return i})(),sb=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule]})}return i})(),ma=(()=>{class i extends _n{typeFormatter;logic;logicDisplay;constructor(e,t,r){super(e,t,r),this.typeFormatter=e,this.logic=t,this.logicDisplay=r}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(ut),n.\u0275\u0275directiveInject(_t),n.\u0275\u0275directiveInject(yt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-varchar-detail"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,template:function(t,r){1&t&&n.\u0275\u0275text(0),2&t&&n.\u0275\u0275textInterpolate1("\n",r.field.value,"\n")},encapsulation:2})}return i})(),ga=(()=>{class i extends _n{typeFormatter;logic;logicDisplay;constructor(e,t,r){super(e,t,r),this.typeFormatter=e,this.logic=t,this.logicDisplay=r}get target(){return this.field.metadata&&this.field.metadata.target?this.field.metadata.target:"_blank"}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(ut),n.\u0275\u0275directiveInject(_t),n.\u0275\u0275directiveInject(yt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-url-detail"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:2,vars:3,consts:[[3,"target","href"]],template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"a",0),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&t&&(n.\u0275\u0275propertyInterpolate("href",r.field.value,n.\u0275\u0275sanitizeUrl),n.\u0275\u0275property("target",r.target),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(r.field.value))},encapsulation:2})}return i})(),Ya=(()=>{class i extends _n{formatter;typeFormatter;logic;logicDisplay;vm$;constructor(e,t,r,o){super(t,r,o),this.formatter=e,this.typeFormatter=t,this.logic=r,this.logicDisplay=o,this.vm$=this.formatter?.format$??(0,S.of)({date:"yyyy-MM-dd",time:"HH:mm:ss"})}getDateFormat(){return this.field.metadata.date_time_format?this.field.metadata.date_time_format:this.formatter.getDateFormat()}getDateTimeFormat(){return this.formatter.getDateTimeFormat()}toInternalFormat(e,t){return this.formatter.toInternalFormat(t,{fromFormat:this.getDateTimeFormat()})}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(Er),n.\u0275\u0275directiveInject(ut),n.\u0275\u0275directiveInject(_t),n.\u0275\u0275directiveInject(yt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["ng-component"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:0,vars:0,template:function(t,r){},encapsulation:2})}return i})(),$u=(()=>{class i extends Ya{formatter;typeFormatter;logic;logicDisplay;constructor(e,t,r,o){super(e,t,r,o),this.formatter=e,this.typeFormatter=t,this.logic=r,this.logicDisplay=o}toInternalFormat(e,t){return this.formatter.toInternalFormat(t,{fromFormat:this.getDateFormat()})}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(Er),n.\u0275\u0275directiveInject(ut),n.\u0275\u0275directiveInject(_t),n.\u0275\u0275directiveInject(yt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["ng-component"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:0,vars:0,template:function(t,r){},encapsulation:2})}return i})();function v4(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275text(1),n.\u0275\u0275pipe(2,"date"),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",n.\u0275\u0275pipeBind2(2,1,e.field.value,e.getDateFormat()),"\n")}}let Sc=(()=>{class i extends $u{formatter;typeFormatter;logic;logicDisplay;constructor(e,t,r,o){super(e,t,r,o),this.formatter=e,this.typeFormatter=t,this.logic=r,this.logicDisplay=o}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(Hr),n.\u0275\u0275directiveInject(ut),n.\u0275\u0275directiveInject(_t),n.\u0275\u0275directiveInject(yt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-date-detail"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:2,vars:3,consts:[[4,"ngIf"]],template:function(t,r){1&t&&(n.\u0275\u0275template(0,v4,3,4,"ng-container",0),n.\u0275\u0275pipe(1,"async")),2&t&&n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(1,1,r.vm$))},dependencies:[F.NgIf,F.AsyncPipe,F.DatePipe],encapsulation:2})}return i})(),cb=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule]})}return i})(),lb=(()=>{class i{formatter;constructor(e){this.formatter=e}transform(e,t=null){return this.formatter.toUserFormat(e,t)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(Iu,16))};static \u0275pipe=n.\u0275\u0275definePipe({name:"formatCurrency",type:i,pure:!0})}return i})(),ub=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule]})}return i})(),Dc=(()=>{class i extends _n{userPreferences;systemConfig;typeFormatter;logic;logicDisplay;preferences$;configs$;vm$;constructor(e,t,r,o,s){super(r,o,s),this.userPreferences=e,this.systemConfig=t,this.typeFormatter=r,this.logic=o,this.logicDisplay=s,this.preferences$=this.userPreferences?.userPreferences$,this.configs$=this.systemConfig?.configs$,this.vm$=this.configs$.pipe((0,S.combineLatestWith)(this.preferences$),(0,v.map)(([c,l])=>({configs:c,preferences:l})))}get format(){return!this.field.metadata||!1!==this.field.metadata.format}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(qt),n.\u0275\u0275directiveInject(vt),n.\u0275\u0275directiveInject(ut),n.\u0275\u0275directiveInject(_t),n.\u0275\u0275directiveInject(yt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["ng-component"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:0,vars:0,template:function(t,r){},encapsulation:2})}return i})();function _4(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275text(1),n.\u0275\u0275pipe(2,"formatCurrency"),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",n.\u0275\u0275pipeBind2(2,1,e.getCurrencyValue(),e.getOptions()),"\n")}}let wc=(()=>{class i extends Dc{userPreferences;systemConfig;typeFormatter;logic;currencyService;logicDisplay;constructor(e,t,r,o,s,c){super(e,t,r,o,c),this.userPreferences=e,this.systemConfig=t,this.typeFormatter=r,this.logic=o,this.currencyService=s,this.logicDisplay=c}getOptions(){let e={};this.field&&this.field.metadata&&null!==this.field.metadata.digits&&isFinite(this.field.metadata.digits)&&(e={digits:this.field.metadata.digits});const t=this.currencyService.isBase(this.field);let r=this.currencyService.getCurrencyId(this.record);return(t||null===r)&&(r=this.currencyService.getUserCurrency().id),e.symbol=this.currencyService.getSymbol(r),e.code=this.currencyService.getCode(r),e}getCurrencyValue(){return this.currencyService.getFieldCurrencyValue(this.field,this.record)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(qt),n.\u0275\u0275directiveInject(vt),n.\u0275\u0275directiveInject(ut),n.\u0275\u0275directiveInject(_t),n.\u0275\u0275directiveInject(Qa),n.\u0275\u0275directiveInject(yt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-currency-detail"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:2,vars:3,consts:[[4,"ngIf"]],template:function(t,r){1&t&&(n.\u0275\u0275template(0,_4,3,4,"ng-container",0),n.\u0275\u0275pipe(1,"async")),2&t&&n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(1,1,r.vm$))},dependencies:[F.NgIf,F.AsyncPipe,lb],encapsulation:2})}return i})(),db=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,ub]})}return i})(),Uu=(()=>{class i extends _n{typeFormatter;logic;logicDisplay;constructor(e,t,r){super(e,t,r),this.typeFormatter=e,this.logic=t,this.logicDisplay=r}get rows(){return this.field.metadata&&this.field.metadata.rows?this.field.metadata.rows:6}get cols(){return this.field.metadata&&this.field.metadata.cols?this.field.metadata.cols:20}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(ut),n.\u0275\u0275directiveInject(_t),n.\u0275\u0275directiveInject(yt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-text-detail"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:2,vars:4,consts:[["readonly","",3,"rows","cols","ngClass"]],template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"textarea",0),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&t&&(n.\u0275\u0275property("rows",r.rows)("cols",r.cols)("ngClass",r.klass),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(r.field.value))},dependencies:[F.NgClass],encapsulation:2})}return i})(),Vu=(()=>{class i extends _n{typeFormatter;logic;logicDisplay;constructor(e,t,r){super(e,t,r),this.typeFormatter=e,this.logic=t,this.logicDisplay=r}ngOnInit(){super.ngOnInit(),this.subscribeValueChanges()}ngOnDestroy(){this.unsubscribeAll()}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(ut),n.\u0275\u0275directiveInject(_t),n.\u0275\u0275directiveInject(yt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-varchar-edit"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:1,vars:5,consts:[["type","text",3,"formControl","value","ngClass"]],template:function(t,r){1&t&&n.\u0275\u0275element(0,"input",0),2&t&&(n.\u0275\u0275classProp("is-invalid",r.field.formControl.invalid&&r.field.formControl.touched),n.\u0275\u0275property("formControl",r.field.formControl)("value",r.field.value)("ngClass",r.klass))},dependencies:[F.NgClass,De.DefaultValueAccessor,De.NgControlStatus,De.FormControlDirective],encapsulation:2})}return i})();class cr{hourStep=1;minuteStep=15;secondStep=30;displaySeconds=!1;date;time;constructor(a){Object.assign(this,a)}static toDateTimeStruct(a,e){if(!e)return null;const t=a.userDateTimeFormatToStruct(e);if(!t)return null;const{date:r,time:o}=t;return new cr({date:r,time:o})}static internalToDateTimeStruct(a,e){if(!e)return null;const t=a.internalDateTimeFormatToStruct(e);if(!t)return null;const{date:r,time:o}=t;return new cr({date:r,time:o})}toUserFormat(a){const r=[[this.date.year,this.date.month,this.date.day].join("-"),[this.time.hour,this.time.minute,this.time.second].join(":")].join(" "),o=a.toInternalFormat(r,{fromFormat:"yyyy-M-d H:m:s"});return a.toUserFormat(o,{fromFormat:"yyyy-M-d H:m:s"})}}function y4(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"div")(1,"div")(2,"ngb-datepicker",5),n.\u0275\u0275listener("dateSelect",function(r){n.\u0275\u0275restoreView(e);const o=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(o.onDateChange(r))}),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(3,"div",6)(4,"ngb-timepicker",7),n.\u0275\u0275listener("ngModelChange",function(r){n.\u0275\u0275restoreView(e);const o=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(o.onTimeChange(r))}),n.\u0275\u0275elementEnd()()()}if(2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(2),n.\u0275\u0275property("ngModel",e.dateTimeModel.date)("startDate",e.dateTimeModel.date),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngModel",e.dateTimeModel.time)("seconds",e.dateTimeModel.displaySeconds)("hourStep",e.dateTimeModel.hourStep)("minuteStep",e.dateTimeModel.minuteStep)("secondStep",e.dateTimeModel.secondStep)}}let zu=(()=>{class i extends Ya{formatter;typeFormatter;calendar;config;logic;logicDisplay;popover;dateTimeModel=new cr;constructor(e,t,r,o,s,c){super(e,t,s,c),this.formatter=e,this.typeFormatter=t,this.calendar=r,this.config=o,this.logic=s,this.logicDisplay=c,o.autoClose="outside",o.placement=this.getPlacement()}ngOnInit(){if((0,M.isVoid)(this.field.value)||(0,M.isEmptyString)(this.field.value))this.dateTimeModel.date=this.calendar.getToday(),this.dateTimeModel.time={hour:0,minute:0,second:0},this.field.formControl.setValue(null);else{if(this.dateTimeModel=cr.internalToDateTimeStruct(this.formatter,this.field.value),null===this.dateTimeModel)return void this.field.formControl.setValue(null);this.setFormValues(this.dateTimeModel.toUserFormat(this.formatter))}this.formatter.getTimeFormat().includes("ss")&&(this.dateTimeModel.displaySeconds=!0),this.subscribeValueChanges()}ngOnDestroy(){this.unsubscribeAll()}setFormValues(e){this.field.formControl.setValue(e),this.field.formControl.markAsDirty()}onDateChange(e){this.dateTimeModel.date=e,this.setFormValues(this.dateTimeModel.toUserFormat(this.formatter))}onTimeChange(e){this.dateTimeModel.time=e,this.setFormValues(this.dateTimeModel.toUserFormat(this.formatter))}onInputChange(e){const t=cr.toDateTimeStruct(this.formatter,e.target.value);t&&(this.dateTimeModel=t)}getOpenButton(){return{klass:"btn btn-sm btn-outline-secondary m-0 border-0",icon:"calendar"}}getPlacement(){return["bottom-right","top-right","bottom-left","top-left"]}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(Er),n.\u0275\u0275directiveInject(ut),n.\u0275\u0275directiveInject(pe.NgbCalendar),n.\u0275\u0275directiveInject(pe.NgbPopoverConfig),n.\u0275\u0275directiveInject(_t),n.\u0275\u0275directiveInject(yt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-datetime-edit"]],viewQuery:function(t,r){if(1&t&&n.\u0275\u0275viewQuery(pe.NgbPopover,7),2&t){let o;n.\u0275\u0275queryRefresh(o=n.\u0275\u0275loadQuery())&&(r.popover=o.first)}},features:[n.\u0275\u0275InheritDefinitionFeature],decls:6,vars:7,consts:[[1,"input-group","mr-2"],[3,"ngClass","placeholder","formControl","change"],[1,"input-group-append"],[3,"config","ngbPopover"],["calendarContent",""],["name","datepicker",3,"ngModel","startDate","dateSelect"],[1,"d-flex","justify-content-center","mt-auto"],["name","timepicker",3,"ngModel","seconds","hourStep","minuteStep","secondStep","ngModelChange"]],template:function(t,r){if(1&t&&(n.\u0275\u0275elementStart(0,"div",0)(1,"input",1),n.\u0275\u0275listener("change",function(s){return r.onInputChange(s)}),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(2,"div",2),n.\u0275\u0275element(3,"scrm-button",3),n.\u0275\u0275elementEnd()(),n.\u0275\u0275template(4,y4,5,7,"ng-template",null,4,n.\u0275\u0275templateRefExtractor)),2&t){const o=n.\u0275\u0275reference(5);n.\u0275\u0275advance(1),n.\u0275\u0275classProp("is-invalid",r.field.formControl.invalid&&r.field.formControl.touched),n.\u0275\u0275property("ngClass",r.klass)("placeholder",r.getDateTimeFormat().toLowerCase())("formControl",r.field.formControl),n.\u0275\u0275advance(2),n.\u0275\u0275property("config",r.getOpenButton())("ngbPopover",o)}},dependencies:[F.NgClass,De.DefaultValueAccessor,De.NgControlStatus,De.NgModel,pe.NgbDatepicker,pe.NgbTimepicker,Vn,De.FormControlDirective,pe.NgbPopover],encapsulation:2})}return i})(),fb=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,De.FormsModule,pe.NgbDatepickerModule,pe.NgbTimepickerModule,Mn,cn,De.ReactiveFormsModule,pe.NgbModule]})}return i})(),Gu=(()=>{class i extends pe.NgbDateParserFormatter{formatter;userFormat;constructor(e){super(),this.formatter=e}getUserFormat(){return this.userFormat}setUserFormat(e){this.userFormat=e}parse(e){if(!e)return null;const t={fromFormat:"yyyy-M-d"};return this.userFormat&&(t.toFormat=this.userFormat),this.formatter.dateFormatToStruct(e,t.toFormat||this.formatter.getUserFormat())}format(e){if(!e)return null;const t=[e.year,e.month,e.day].join("-"),r={fromFormat:"yyyy-M-d"};return this.userFormat&&(r.toFormat=this.userFormat),this.formatter.toUserFormat(t,r)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Hr))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),Wu=(()=>{class i extends pe.NgbDateAdapter{formatter;userFormat;constructor(e){super(),this.formatter=e}getUserFormat(){return this.userFormat}setUserFormat(e){this.userFormat=e}fromModel(e){return e?this.formatter.dateFormatToStruct(e,this.userFormat||""):null}toModel(e){if(!e)return null;const t=[e.year,e.month,e.day].join("-"),r={fromFormat:"yyyy-M-d"};return this.userFormat&&(r.toFormat=this.userFormat),this.formatter.toUserFormat(t,r)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Hr))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),Ec=(()=>{class i extends $u{formatter;dateAdapter;dateParserFormatter;typeFormatter;logic;logicDisplay;dateModel;constructor(e,t,r,o,s,c){super(e,o,s,c),this.formatter=e,this.dateAdapter=t,this.dateParserFormatter=r,this.typeFormatter=o,this.logic=s,this.logicDisplay=c}ngOnInit(){(0,M.isVoid)(this.field.value)||(0,M.isEmptyString)(this.field.value)?this.field.formControl.setValue(null):this.field.formControl.setValue(this.formatter.toUserFormat(this.field.value,{toFormat:this.getDateFormat()})),this.dateAdapter.setUserFormat(this.getDateFormat()),this.dateParserFormatter.setUserFormat(this.getDateFormat()),this.dateModel=this.formatter.dateFormatToStruct(this.field.value,this.formatter.getInternalFormat()),this.subscribeValueChanges()}ngOnDestroy(){this.unsubscribeAll()}setModel(e){this.field.value=this.formatter.toInternalFormat(e,{fromFormat:this.getDateFormat()}),this.dateModel=this.formatter.dateFormatToStruct(e,this.getDateFormat())}getOpenButton(e){return{klass:"btn btn-sm btn-outline-secondary m-0 border-0",onClick:()=>{e.toggle(),e.navigateTo(this.dateModel)},icon:"calendar"}}getPlacement(){return["bottom-left","bottom-right","top-left","top-right"]}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(Hr),n.\u0275\u0275directiveInject(pe.NgbDateAdapter),n.\u0275\u0275directiveInject(pe.NgbDateParserFormatter),n.\u0275\u0275directiveInject(ut),n.\u0275\u0275directiveInject(_t),n.\u0275\u0275directiveInject(yt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-date-edit"]],features:[n.\u0275\u0275ProvidersFeature([{provide:pe.NgbDateAdapter,useClass:Wu},{provide:pe.NgbDateParserFormatter,useClass:Gu}]),n.\u0275\u0275InheritDefinitionFeature],decls:5,vars:8,consts:[[1,"field-datetime-edit","input-group"],["ngbDatepicker","",3,"ngClass","placement","placeholder","formControl","startDate","ngModelChange"],["datepicker","ngbDatepicker"],[1,"input-group-append","align-items-end"],[3,"config"]],template:function(t,r){if(1&t&&(n.\u0275\u0275elementStart(0,"div",0)(1,"input",1,2),n.\u0275\u0275listener("ngModelChange",function(s){return r.setModel(s)}),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(3,"span",3),n.\u0275\u0275element(4,"scrm-button",4),n.\u0275\u0275elementEnd()()),2&t){const o=n.\u0275\u0275reference(2);n.\u0275\u0275advance(1),n.\u0275\u0275classProp("is-invalid",r.field.formControl.invalid&&r.field.formControl.touched),n.\u0275\u0275property("ngClass",r.klass)("placement",r.getPlacement())("placeholder",r.getDateFormat().toLowerCase())("formControl",r.field.formControl)("startDate",r.dateModel),n.\u0275\u0275advance(3),n.\u0275\u0275property("config",r.getOpenButton(o))}},dependencies:[F.NgClass,De.DefaultValueAccessor,De.NgControlStatus,pe.NgbInputDatepicker,Vn,De.FormControlDirective],encapsulation:2})}return i})(),xc=(()=>{class i extends Ec{formatter;dateAdapter;dateParserFormatter;typeFormatter;logic;logicDisplay;constructor(e,t,r,o,s,c){super(e,t,r,o,s,c),this.formatter=e,this.dateAdapter=t,this.dateParserFormatter=r,this.typeFormatter=o,this.logic=s,this.logicDisplay=c}ngOnInit(){let e=null;this.field.criteria.values&&this.field.criteria.values.length>0&&(e=this.field.criteria.values[0]),!(0,M.isVoid)(e)&&!(0,M.isEmptyString)(e)&&(e=e.trim()),this.field.value=e??"",super.ngOnInit()}setFieldValue(e){super.setFieldValue(e),this.field.criteria.operator="=",this.field.criteria.values=[e]}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(Hr),n.\u0275\u0275directiveInject(pe.NgbDateAdapter),n.\u0275\u0275directiveInject(pe.NgbDateParserFormatter),n.\u0275\u0275directiveInject(ut),n.\u0275\u0275directiveInject(_t),n.\u0275\u0275directiveInject(yt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-date-filter"]],features:[n.\u0275\u0275ProvidersFeature([{provide:pe.NgbDateAdapter,useClass:Wu},{provide:pe.NgbDateParserFormatter,useClass:Gu}]),n.\u0275\u0275InheritDefinitionFeature],decls:5,vars:8,consts:[[1,"input-group"],["ngbDatepicker","",3,"ngClass","placement","placeholder","formControl","startDate","ngModelChange"],["datepicker","ngbDatepicker"],[1,"input-group-append","align-items-end"],[3,"config"]],template:function(t,r){if(1&t&&(n.\u0275\u0275elementStart(0,"div",0)(1,"input",1,2),n.\u0275\u0275listener("ngModelChange",function(s){return r.setModel(s)}),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(3,"span",3),n.\u0275\u0275element(4,"scrm-button",4),n.\u0275\u0275elementEnd()()),2&t){const o=n.\u0275\u0275reference(2);n.\u0275\u0275advance(1),n.\u0275\u0275classProp("is-invalid",r.field.formControl.invalid&&r.field.formControl.touched),n.\u0275\u0275property("ngClass",r.klass)("placement",r.getPlacement())("placeholder",r.getDateFormat().toLowerCase())("formControl",r.field.formControl)("startDate",r.dateModel),n.\u0275\u0275advance(3),n.\u0275\u0275property("config",r.getOpenButton(o))}},dependencies:[F.NgClass,De.DefaultValueAccessor,De.NgControlStatus,pe.NgbInputDatepicker,Vn,De.FormControlDirective],encapsulation:2})}return i})();function b4(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"span"),n.\u0275\u0275text(1),n.\u0275\u0275pipe(2,"date"),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",n.\u0275\u0275pipeBind3(2,1,e.toDateTime(e.field.value),e.getDateTimeFormat(),e.getUserTimeZone())," ")}}function C4(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,b4,3,5,"span",0),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.field.value)}}let Fc=(()=>{class i extends Ya{formatter;typeFormatter;logic;logicDisplay;constructor(e,t,r,o){super(e,t,r,o),this.formatter=e,this.typeFormatter=t,this.logic=r,this.logicDisplay=o}getUserTimeZone(){return this.formatter.userTimeZone()}toDateTime(e){return this.formatter.toDateTime(e,this.formatter.getInternalFormat(),{zone:"GMT"}).toJSDate()}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(Er),n.\u0275\u0275directiveInject(ut),n.\u0275\u0275directiveInject(_t),n.\u0275\u0275directiveInject(yt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-datetime-detail"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:2,vars:3,consts:[[4,"ngIf"]],template:function(t,r){1&t&&(n.\u0275\u0275template(0,C4,2,1,"ng-container",0),n.\u0275\u0275pipe(1,"async")),2&t&&n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(1,1,r.vm$))},dependencies:[F.NgIf,F.AsyncPipe,F.DatePipe],encapsulation:2})}return i})(),pb=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule]})}return i})();function M4(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"div")(1,"div")(2,"ngb-datepicker",5),n.\u0275\u0275listener("dateSelect",function(r){n.\u0275\u0275restoreView(e);const o=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(o.onDateChange(r))}),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(3,"div",6)(4,"ngb-timepicker",7),n.\u0275\u0275listener("ngModelChange",function(r){n.\u0275\u0275restoreView(e);const o=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(o.onTimeChange(r))}),n.\u0275\u0275elementEnd()()()}if(2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(2),n.\u0275\u0275property("ngModel",e.dateTimeModel.date)("startDate",e.dateTimeModel.date),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngModel",e.dateTimeModel.time)("seconds",e.dateTimeModel.displaySeconds)("hourStep",e.dateTimeModel.hourStep)("minuteStep",e.dateTimeModel.minuteStep)("secondStep",e.dateTimeModel.secondStep)}}let mb=(()=>{class i extends Ya{formatter;typeFormatter;calendar;config;logic;logicDisplay;popover;dateTimeModel=new cr;constructor(e,t,r,o,s,c){super(e,t,s,c),this.formatter=e,this.typeFormatter=t,this.calendar=r,this.config=o,this.logic=s,this.logicDisplay=c,o.autoClose="outside",o.placement=this.getPlacement()}ngOnInit(){super.ngOnInit();let t="";if((this.field&&this.field.criteria&&this.field.criteria.values||[]).length>0&&(t=this.field.criteria.values[0]),(0,M.isEmptyString)(t))this.dateTimeModel.date=this.calendar.getToday(),this.dateTimeModel.time={hour:0,minute:0,second:0},this.field.formControl.setValue(null);else{if(this.dateTimeModel=cr.internalToDateTimeStruct(this.formatter,t),null===this.dateTimeModel)return void this.field.formControl.setValue(null);this.setFormValues(this.dateTimeModel.toUserFormat(this.formatter))}this.formatter.getTimeFormat().includes("ss")&&(this.dateTimeModel.displaySeconds=!0),this.subscribeValueChanges()}ngOnDestroy(){this.unsubscribeAll()}setFormValues(e){this.field.formControl.setValue(e),this.field.formControl.markAsDirty()}setFieldValue(e){this.field.value=e,this.field.criteria.operator="=",this.field.criteria.values=[e]}onDateChange(e){this.dateTimeModel.date=e,this.setFormValues(this.dateTimeModel.toUserFormat(this.formatter))}onTimeChange(e){this.dateTimeModel.time=e,this.setFormValues(this.dateTimeModel.toUserFormat(this.formatter))}onInputChange(e){const t=cr.toDateTimeStruct(this.formatter,e.target.value);t&&(this.dateTimeModel=t)}getOpenButton(){return{klass:"btn btn-sm btn-outline-secondary m-0 border-0",icon:"calendar"}}getPlacement(){return["bottom-right","top-right","bottom-left","top-left"]}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(Er),n.\u0275\u0275directiveInject(ut),n.\u0275\u0275directiveInject(pe.NgbCalendar),n.\u0275\u0275directiveInject(pe.NgbPopoverConfig),n.\u0275\u0275directiveInject(_t),n.\u0275\u0275directiveInject(yt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-datetime-filter"]],viewQuery:function(t,r){if(1&t&&n.\u0275\u0275viewQuery(pe.NgbPopover,7),2&t){let o;n.\u0275\u0275queryRefresh(o=n.\u0275\u0275loadQuery())&&(r.popover=o.first)}},features:[n.\u0275\u0275InheritDefinitionFeature],decls:6,vars:7,consts:[[1,"input-group","mr-2"],[3,"ngClass","placeholder","formControl","change"],[1,"input-group-append"],[3,"config","ngbPopover"],["calendarContent",""],["name","datepicker",3,"ngModel","startDate","dateSelect"],[1,"d-flex","justify-content-center","mt-auto"],["name","timepicker",3,"ngModel","seconds","hourStep","minuteStep","secondStep","ngModelChange"]],template:function(t,r){if(1&t&&(n.\u0275\u0275elementStart(0,"div",0)(1,"input",1),n.\u0275\u0275listener("change",function(s){return r.onInputChange(s)}),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(2,"div",2),n.\u0275\u0275element(3,"scrm-button",3),n.\u0275\u0275elementEnd()(),n.\u0275\u0275template(4,M4,5,7,"ng-template",null,4,n.\u0275\u0275templateRefExtractor)),2&t){const o=n.\u0275\u0275reference(5);n.\u0275\u0275advance(1),n.\u0275\u0275classProp("is-invalid",r.field.formControl.invalid&&r.field.formControl.touched),n.\u0275\u0275property("ngClass",r.klass)("placeholder",r.getDateTimeFormat().toLowerCase())("formControl",r.field.formControl),n.\u0275\u0275advance(2),n.\u0275\u0275property("config",r.getOpenButton())("ngbPopover",o)}},dependencies:[F.NgClass,De.DefaultValueAccessor,De.NgControlStatus,De.NgModel,pe.NgbDatepicker,pe.NgbTimepicker,Vn,De.FormControlDirective,pe.NgbPopover],encapsulation:2})}return i})(),gb=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,De.FormsModule,pe.NgbDatepickerModule,pe.NgbTimepickerModule,Mn,cn,De.ReactiveFormsModule,pe.NgbModule]})}return i})();function S4(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"li"),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&i){const e=a.$implicit;n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(e.label)}}let Ic=(()=>{class i extends bc{languages;typeFormatter;logic;logicDisplay;constructor(e,t,r,o){super(e,t,r,o),this.languages=e,this.typeFormatter=t,this.logic=r,this.logicDisplay=o}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject($e),n.\u0275\u0275directiveInject(ut),n.\u0275\u0275directiveInject(_t),n.\u0275\u0275directiveInject(yt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-multienum-detail"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:2,vars:1,consts:[[4,"ngFor","ngForOf"]],template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"ul"),n.\u0275\u0275template(1,S4,2,1,"li",0),n.\u0275\u0275elementEnd()),2&t&&(n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",r.selectedValues))},dependencies:[F.NgForOf],encapsulation:2})}return i})();const D4=["tag"];let es=(()=>{class i extends zi{languages;typeFormatter;logic;logicDisplay;tag;constructor(e,t,r,o){super(e,t,r,o),this.languages=e,this.typeFormatter=t,this.logic=r,this.logicDisplay=o}ngOnInit(){this.checkAndInitAsDynamicEnum(),super.ngOnInit()}onAdd(e){if(e&&e.value)return this.field.value=e.value,this.field.formControl.setValue(e.value),void this.field.formControl.markAsDirty();this.field.value="",this.field.formControl.setValue(""),this.field.formControl.markAsDirty(),this.selectedValues=[]}onRemove(){this.field.value="",this.field.formControl.setValue(""),this.field.formControl.markAsDirty(),setTimeout(()=>{this.tag.focus(!0,!0),this.tag.dropdown.show()},200)}getPlaceholderLabel(){return this.languages.getAppString("LBL_SELECT_ITEM")||""}selectFirstElement(){const e=this.tag.dropdown.items;if(0!==e.length){const t=e[0];this.selectedValues.push(t),this.onAdd(t),this.tag.dropdown.hide()}}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject($e),n.\u0275\u0275directiveInject(ut),n.\u0275\u0275directiveInject(_t),n.\u0275\u0275directiveInject(yt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-enum-edit"]],viewQuery:function(t,r){if(1&t&&n.\u0275\u0275viewQuery(D4,5),2&t){let o;n.\u0275\u0275queryRefresh(o=n.\u0275\u0275loadQuery())&&(r.tag=o.first)}},features:[n.\u0275\u0275InheritDefinitionFeature],decls:3,vars:15,consts:[["maxItems","1",3,"ngModel","onlyFromAutocomplete","clearOnBlur","displayBy","identifyBy","placeholder","secondaryPlaceholder","inputClass","ngModelChange","onAdd","onRemove","keyup.enter"],["tag",""],[3,"displayBy","identifyBy","showDropdownIfEmpty","keepOpen","autocompleteItems"]],template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"tag-input",0,1),n.\u0275\u0275listener("ngModelChange",function(s){return r.selectedValues=s})("onAdd",function(s){return r.onAdd(s)})("onRemove",function(){return r.onRemove()})("keyup.enter",function(){return r.selectFirstElement()}),n.\u0275\u0275element(2,"tag-input-dropdown",2),n.\u0275\u0275elementEnd()),2&t&&(n.\u0275\u0275classMap(r.getInvalidClass()),n.\u0275\u0275property("ngModel",r.selectedValues)("onlyFromAutocomplete",!0)("clearOnBlur",!0)("displayBy","label")("identifyBy","value")("placeholder",r.getPlaceholderLabel())("secondaryPlaceholder",r.getPlaceholderLabel())("inputClass",r.getInvalidClass()),n.\u0275\u0275advance(2),n.\u0275\u0275property("displayBy","label")("identifyBy","value")("showDropdownIfEmpty",!0)("keepOpen",!1)("autocompleteItems",r.options))},dependencies:[Un.TagInputComponent,Un.TagInputDropdown,De.NgControlStatus,De.NgModel],encapsulation:2})}return i})(),Ku=(()=>{class i extends _n{get checked(){return(0,M.isTrue)(this.field.value)}toggle(){let e="true";this.checked&&(e="false"),this.field.value=e,this.field.formControl.setValue(e),this.field.formControl.markAsDirty()}static \u0275fac=function(){let e;return function(r){return(e||(e=n.\u0275\u0275getInheritedFactory(i)))(r||i)}}();static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["ng-component"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:0,vars:0,template:function(t,r){},encapsulation:2})}return i})(),ha=(()=>{class i extends Ku{typeFormatter;logic;logicDisplay;constructor(e,t,r){super(e,t,r),this.typeFormatter=e,this.logic=t,this.logicDisplay=r}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(ut),n.\u0275\u0275directiveInject(_t),n.\u0275\u0275directiveInject(yt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-boolean-detail"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:3,vars:1,consts:[[1,"checkbox-container"],["type","checkbox","disabled","","readonly","","aria-hidden","true",3,"checked"],[1,"checkmark"]],template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"label",0),n.\u0275\u0275element(1,"input",1)(2,"span",2),n.\u0275\u0275elementEnd()),2&t&&(n.\u0275\u0275advance(1),n.\u0275\u0275property("checked",r.checked))},encapsulation:2})}return i})(),Tn=(()=>{class i{systemConfig;constructor(e){this.systemConfig=e}toFrontend(e){const t=this.getLegacyToFrontendMap();return t&&t[e]?t[e]:e}toLegacy(e){const t=this.getFrontendToLegacyMap();return t[e]?t[e]:e}isValid(e){let r=!1;return this.getFrontendToLegacyMap()[e]&&(r=!0),r}getLegacyToFrontendMap(){return this.systemConfig.getConfigValue("module_name_map")}getFrontendToLegacyMap(){const e=this.systemConfig.getConfigValue("module_name_map"),t={};return Object.keys(e).forEach(r=>{t[e[r]]=r}),t}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(vt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Co=(()=>{class i{systemConfig;constructor(e){this.systemConfig=e}toFrontend(e){const t=this.getLegacyToFrontendMap();return t[e]?t[e]:e}toLegacy(e){const t=this.getFrontendToLegacyMap();return t[e]?t[e]:e}isValid(e){let r=!1;return this.getFrontendToLegacyMap()[e]&&(r=!0),r}getLegacyToFrontendMap(){return this.systemConfig.getConfigValue("action_name_map")}getFrontendToLegacyMap(){const e=this.systemConfig.getConfigValue("action_name_map"),t={};return Object.keys(e).forEach(r=>{t[e[r]]=r}),t}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(vt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const Ac="./#";let Rn=(()=>{class i{router;moduleNameMapper;actionNameMapper;constructor(e,t,r){this.router=e,this.moduleNameMapper=t,this.actionNameMapper=r}getModuleInfo(e,t){return t&&t.modules?t.modules[e]:null}getModuleLabel(e,t){if(!t||!t.moduleList||!e)return"";const r=e&&e.labelKey||"";return t.moduleList[r]||r}getModuleRoute(e){let t=e&&e.defaultRoute||"",r=null;return t.startsWith(Ac)&&(r=t.replace(Ac,""),t=null),{route:r,url:t,params:null}}navigate(e){const t=this.getActionRoute(e);return this.router.navigate([t.route],{queryParams:t.params})}getActionRoute(e){let t=e.url,r=null,o={},s=e?.process;if(t.startsWith(Ac))if(r=t.replace(Ac,""),t=null,e.params)o=e.params;else{const c=r.split("?");r=c[0];const l=c[1],u={};l&&l.split("&").forEach(d=>{const f=d.split("=");u[f[0]]=f[1]}),o=u}return{route:r,url:t,params:o,process:s}}getActionLabel(e,t,r,o=""){if(!(r&&r.modStrings&&t&&e))return"";let s=o;s||(s=t.labelKey);let c=r.modStrings[e]&&r.modStrings[e][s];return c||(c=r.appStrings&&r.appStrings[s]),!c&&t.module&&(c=r.modStrings[t.module]&&r.modStrings[t.module][s]),c||(c=r.modStrings.administration&&r.modStrings.administration[s]),c||""}getRecordRouterLink(e,t){return`/${e}/record/${t}`}navigateBack(e,t,r){let o=this.getReturnModule(r),s=this.getReturnAction(r);const c=this.getReturnId(r);let l="";o&&(l+="/"+o),s&&(l+="/"+s),c&&(l+="/"+c),o===t&&"record"===s&&(l="/"+t+"/record/"+(c||e.id)),!l&&e&&e.id&&(l="/"+t+"/record/"+e.id),!l&&e&&e.id&&(l="/"+t),this.router.navigate([l]).then()}getReturnId(e){return e.return_id||""}getReturnAction(e){let t="";return e.return_action&&(t=this.actionNameMapper.toFrontend(e.return_action)),t}getReturnModule(e){let t="";return e.return_module&&(t=this.moduleNameMapper.toFrontend(e.return_module)),t}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Rt.Router),n.\u0275\u0275inject(Tn),n.\u0275\u0275inject(Co))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function w4(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"a",3),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275propertyInterpolate1("href","mailto:",e.field.value,"",n.\u0275\u0275sanitizeUrl),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(e.field.value)}}function E4(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"a",4),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(e);const r=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(r.openEmail())}),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()}if(2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(e.field.value)}}let Tc=(()=>{class i extends _n{typeFormatter;logic;logicDisplay;preferences;navigation;moduleNameMapper;actionNameMapper;appState;modalService;router;linkType;constructor(e,t,r,o,s,c,l,u,d,f){super(e,t,r),this.typeFormatter=e,this.logic=t,this.logicDisplay=r,this.preferences=o,this.navigation=s,this.moduleNameMapper=c,this.actionNameMapper=l,this.appState=u,this.modalService=d,this.router=f}ngOnInit(){this.linkType=this.preferences.getUserPreference("email_link_type")||"mailto"}openEmail(){const e=this.actionNameMapper.toLegacy(this.appState.getView()),t=this.moduleNameMapper.toLegacy(this.parent.module),r=this.parent.id;let c;"ListView"!==e&&"index"!==e&&(c=r),this.router.navigate(["emails","compose"],{queryParams:{return_module:t,return_action:e,return_id:c,to_addrs_names:this.field.value,parent_type:t,parent_name:this.parent.attributes.name,parent_id:r}})}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(ut),n.\u0275\u0275directiveInject(_t),n.\u0275\u0275directiveInject(yt),n.\u0275\u0275directiveInject(qt),n.\u0275\u0275directiveInject(Rn),n.\u0275\u0275directiveInject(Tn),n.\u0275\u0275directiveInject(Co),n.\u0275\u0275directiveInject(Xt),n.\u0275\u0275directiveInject(pe.NgbModal),n.\u0275\u0275directiveInject(Rt.Router))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-email-list"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:3,vars:2,consts:[[1,"mailto-field"],[3,"href",4,"ngIf"],["class","clickable field-link",3,"click",4,"ngIf"],[3,"href"],[1,"clickable","field-link",3,"click"]],template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"div",0),n.\u0275\u0275template(1,w4,2,2,"a",1),n.\u0275\u0275template(2,E4,2,1,"a",2),n.\u0275\u0275elementEnd()),2&t&&(n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf","mailto"===r.linkType),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf","sugar"===r.linkType))},dependencies:[F.NgIf],encapsulation:2})}return i})(),hb=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule]})}return i})(),Hu=(()=>{class i extends _n{typeFormatter;logic;logicDisplay;constructor(e,t,r){super(e,t,r),this.typeFormatter=e,this.logic=t,this.logicDisplay=r}ngOnInit(){super.ngOnInit();let e="";this.field.criteria&&this.field.criteria.values&&this.field.criteria.values.length>0&&(e=this.field.criteria.values[0]),e=(0,M.isVoid)(e)?"":e.trim(),this.field.value=e;const t=this.typeFormatter.toUserFormat(this.field.type,e,{mode:"edit"});this.field.formControl.setValue(t),this.field.formControl.markAsDirty(),this.subscribeValueChanges()}ngOnDestroy(){this.unsubscribeAll()}setFieldValue(e){this.field.value=e,this.field.criteria.operator="=",this.field.criteria.values=[e]}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(ut),n.\u0275\u0275directiveInject(_t),n.\u0275\u0275directiveInject(yt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-varchar-filter"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:1,vars:5,consts:[["type","text",3,"formControl","value","ngClass"]],template:function(t,r){1&t&&n.\u0275\u0275element(0,"input",0),2&t&&(n.\u0275\u0275classProp("is-invalid",r.field.formControl.invalid&&r.field.formControl.touched),n.\u0275\u0275property("formControl",r.field.formControl)("value",r.field.value)("ngClass",r.klass))},dependencies:[F.NgClass,De.DefaultValueAccessor,De.NgControlStatus,De.FormControlDirective],encapsulation:2})}return i})(),vb=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Un.TagInputModule,De.FormsModule]})}return i})(),_b=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,De.FormsModule]})}return i})(),yb=(()=>{class i{getDownloadEntrypointLink(e,t){return"./index.php"+this.buildQueryString({entryPoint:"download",id:e,type:t})}buildQueryString(e,t=[]){let r=new Dr.HttpParams;return Object.keys(e).forEach(o=>{t.includes(o)||(r=r.set(o,e[o]))}),r.keys().length>0?"?"+r.toString():""}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Zu=(()=>{class i extends _n{typeFormatter;logic;logicDisplay;legacyEntrypointLinkBuilder;filenameLink="";constructor(e,t,r,o){super(e,t,r),this.typeFormatter=e,this.logic=t,this.logicDisplay=r,this.legacyEntrypointLinkBuilder=o}ngOnInit(){this.filenameLink=this.legacyEntrypointLinkBuilder.getDownloadEntrypointLink(this.record.id,this.record.module)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(ut),n.\u0275\u0275directiveInject(_t),n.\u0275\u0275directiveInject(yt),n.\u0275\u0275directiveInject(yb))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-file-detail"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:3,vars:2,consts:[[1,"clickable","field-link",3,"href"]],template:function(t,r){1&t&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"a",0),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()),2&t&&(n.\u0275\u0275advance(1),n.\u0275\u0275property("href",r.filenameLink,n.\u0275\u0275sanitizeUrl),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",r.field.value," "))},encapsulation:2})}return i})(),bb=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Rt.RouterModule]})}return i})(),qu=(()=>{class i extends F.DecimalPipe{formatter;locale;constructor(e,t){super(t),this.formatter=e,this.locale=t}transform(e,t,r){return e?this.formatter.toUserFormat(""+e):null}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(ho,16),n.\u0275\u0275directiveInject(n.LOCALE_ID,16))};static \u0275pipe=n.\u0275\u0275definePipe({name:"formatNumber",type:i,pure:!0})}return i})();function x4(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275text(1),n.\u0275\u0275pipe(2,"formatNumber"),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",n.\u0275\u0275pipeBind1(2,1,e.field.value),"\n")}}let Nc=(()=>{class i extends Dc{userPreferences;systemConfig;typeFormatter;logic;logicDisplay;constructor(e,t,r,o,s){super(e,t,r,o,s),this.userPreferences=e,this.systemConfig=t,this.typeFormatter=r,this.logic=o,this.logicDisplay=s}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(qt),n.\u0275\u0275directiveInject(vt),n.\u0275\u0275directiveInject(ut),n.\u0275\u0275directiveInject(_t),n.\u0275\u0275directiveInject(yt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-float-detail"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:2,vars:3,consts:[[4,"ngIf"]],template:function(t,r){1&t&&(n.\u0275\u0275template(0,x4,3,3,"ng-container",0),n.\u0275\u0275pipe(1,"async")),2&t&&n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(1,1,r.vm$))},dependencies:[F.NgIf,F.AsyncPipe,qu],encapsulation:2})}return i})(),Ju=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule]})}return i})(),Cb=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Ju]})}return i})();const F4=["tag"];let Lc=(()=>{class i extends zi{languages;typeFormatter;logic;logicDisplay;tag;constructor(e,t,r,o){super(e,t,r,o),this.languages=e,this.typeFormatter=t,this.logic=r,this.logicDisplay=o}ngOnInit(){this.field.value="",this.field.criteria.values&&this.field.criteria.values.length>0&&(this.field.value=this.field.criteria.values[0]),super.ngOnInit()}onAdd(e){if(e&&e.value)return this.field.value=e.value,this.field.formControl.setValue(e.value),this.field.formControl.markAsDirty(),this.field.criteria.operator="=",void(this.field.criteria.values=[e.value]);this.field.value="",this.field.formControl.setValue(""),this.field.formControl.markAsDirty(),this.selectedValues=[],this.field.criteria.operator="",this.field.criteria.values=[]}onRemove(){this.field.value="",this.field.formControl.setValue(""),this.field.formControl.markAsDirty(),this.field.criteria.operator="",this.field.criteria.values=[],setTimeout(()=>{this.tag.focus(!0,!0),this.tag.dropdown.show()},200)}getPlaceholderLabel(){return this.languages.getAppString("LBL_SELECT_ITEM")||""}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject($e),n.\u0275\u0275directiveInject(ut),n.\u0275\u0275directiveInject(_t),n.\u0275\u0275directiveInject(yt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-boolean-filter"]],viewQuery:function(t,r){if(1&t&&n.\u0275\u0275viewQuery(F4,5),2&t){let o;n.\u0275\u0275queryRefresh(o=n.\u0275\u0275loadQuery())&&(r.tag=o.first)}},features:[n.\u0275\u0275InheritDefinitionFeature],decls:3,vars:15,consts:[["maxItems","1",3,"ngModel","clearOnBlur","displayBy","identifyBy","inputClass","onlyFromAutocomplete","placeholder","secondaryPlaceholder","onAdd","onRemove","ngModelChange"],["tag",""],[3,"autocompleteItems","displayBy","identifyBy","keepOpen","showDropdownIfEmpty"]],template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"tag-input",0,1),n.\u0275\u0275listener("onAdd",function(s){return r.onAdd(s)})("onRemove",function(){return r.onRemove()})("ngModelChange",function(s){return r.selectedValues=s}),n.\u0275\u0275element(2,"tag-input-dropdown",2),n.\u0275\u0275elementEnd()),2&t&&(n.\u0275\u0275classMap(r.getInvalidClass()),n.\u0275\u0275property("ngModel",r.selectedValues)("clearOnBlur",!0)("displayBy","label")("identifyBy","value")("inputClass",r.getInvalidClass())("onlyFromAutocomplete",!0)("placeholder",r.getPlaceholderLabel())("secondaryPlaceholder",r.getPlaceholderLabel()),n.\u0275\u0275advance(2),n.\u0275\u0275property("autocompleteItems",r.options)("displayBy","label")("identifyBy","value")("keepOpen",!1)("showDropdownIfEmpty",!0))},dependencies:[De.NgControlStatus,De.NgModel,Un.TagInputComponent,Un.TagInputDropdown],encapsulation:2})}return i})(),Mb=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,De.FormsModule,De.ReactiveFormsModule]})}return i})(),Sb=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,De.FormsModule,De.ReactiveFormsModule,Un.TagInputModule]})}return i})(),Oc=(()=>{class i extends _n{typeFormatter;logic;logicDisplay;constructor(e,t,r){super(e,t,r),this.typeFormatter=e,this.logic=t,this.logicDisplay=r}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(ut),n.\u0275\u0275directiveInject(_t),n.\u0275\u0275directiveInject(yt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-relate-detail"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,template:function(t,r){1&t&&n.\u0275\u0275text(0),2&t&&n.\u0275\u0275textInterpolate1("\n",r.field.value,"\n")},encapsulation:2})}return i})(),Db=(()=>{class i{getConfig(e){return{klass:"light-filter",panelMode:"collapsible",isCollapsed:!0,collapseOnSearch:!0,savedFilterEdit:!1,displayHeader:!0,module:e.recordList.getModule(),filter$:e.recordList.criteria$.pipe((0,v.map)(t=>({key:"default",criteria:t}))),savedFilters$:(0,S.of)([]),searchFields$:e.searchMetadata$.pipe((0,v.map)(t=>{if(!t)return{};let r="advanced";return t.layout.advanced||(r="basic"),t.layout[r]})),listFields:[],onClose:()=>{},onSearch:()=>{},updateFilter:(t,r=!0)=>{e.recordList.updateSearchCriteria(t.criteria,r)},resetFilter:t=>{e.recordList.resetSearchCriteria(t)},addSavedFilter:t=>{},removeSavedFilter:t=>{},setOpenFilter:t=>{}}}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})();class wb{systemConfigs;preferences;constructor(a,e){this.systemConfigs=a,this.preferences=e}getTable(a,e=!1){const t={showHeader:!0,showFooter:!0,klass:"light-table",module:a.recordList.getModule(),columns:a.columns$.pipe((0,v.map)(r=>this.mapColumns(a,r))),sort$:a.recordList.sort$,maxColumns$:(0,S.of)(5),loading$:a.recordList.loading$,dataSource:a.recordList,pagination:a.recordList,toggleRecordSelection:r=>{a.recordList.toggleSelection(r)},updateSorting:(r,o)=>{a.recordList.updateSorting(r,o),a.saveCurrentSort()},maxListHeight:this.preferences.getUserPreference("record_modal_max_height")??this.systemConfigs.getConfigValue("record_modal_max_height"),paginationType:this.preferences.getUserPreference("record_modal_pagination_type")??this.systemConfigs.getConfigValue("record_modal_pagination_type"),loadMore:()=>{const r=this.preferences.getUserPreference("list_max_entries_per_modal")??this.systemConfigs.getConfigValue("list_max_entries_per_modal"),o=a.recordList.getPagination(),c=Number(o.pageSize||0)+Number(r);a.recordList.setPageSize(c),a.recordList.updatePagination(o.current)},allLoaded:()=>{const r=a.recordList.getPagination();return!!r&&(Number(r.pageLast)>=Number(r.total)||Number(r.pageSize)>=Number(r.total))}};return e&&(t.selection$=a.recordList.selection$,t.selectedCount$=a.recordList.selectedCount$,t.selectedStatus$=a.recordList.selectedStatus$),t}mapColumns(a,e){const t=[];return e.forEach(r=>{const o={...r};o.metadata={...r.metadata||{}},this.disableRelateFieldsLink(o),this.addLinkSelectHandler(a,o),t.push(o)}),t}disableRelateFieldsLink(a){"relate"===a.type&&(a.link=!1,a.metadata.link=!1)}addLinkSelectHandler(a,e){e.link&&(e.metadata.onClick=(t,r)=>{a.recordList.clearSelection(),a.recordList.toggleSelection(r.id),a.emitLinkClicked()})}}let Mo=(()=>{class i{screenSize;systemConfigStore;screen=qn.Medium;maxColumns=5;constructor(e,t){this.screenSize=e,this.systemConfigStore=t}getMaxColumns(e){return e.pipe((0,S.combineLatestWith)(this.screenSize.screenSize$),(0,v.map)(([t,r])=>(r&&(this.screen=r),this.calculateMaxColumns(t))),(0,v.distinctUntilChanged)())}calculateMaxColumns(e=!0){let t;if(t=this.systemConfigStore.getConfigValue("listview_column_limits"),t=e?t.with_sidebar:t.without_sidebar,this.screen&&t){const r=t[this.screen];r&&(this.maxColumns=r)}return this.maxColumns}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(hi),n.\u0275\u0275inject(vt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),Bc=(()=>{class i{apollo;fieldsMetadata={fields:["id","_id","meta","records"]};constructor(e){this.apollo=e}fetch(e,t,r,o,s,c){const u={query:me.gql`
              query getRecordList($module: String!, $limit: Int, $offset: Int, $criteria: Iterable, $sort: Iterable) {
                getRecordList(module: $module, limit: $limit, offset: $offset, criteria: $criteria, sort: $sort) {
                  ${c.fields.join("\n")}
                }
              }
            `,variables:{module:e,limit:t,offset:r,criteria:o,sort:s}};return this.apollo.query(u)}get(e,t,r,o){const s=this.mapSort(r);return this.fetch(e,o.pageSize,o.current,t,s,this.fieldsMetadata).pipe((0,v.map)(({data:c})=>{const l={records:[],pagination:{...o}};if(!c||!c.getRecordList)return l;const u=c.getRecordList;if(u.records&&u.records.forEach(d=>{l.records.push(this.mapRecord(d))}),!u.meta)return l;if(u.meta.offsets){const d={current:"current",next:"next",prev:"previous",total:"total",end:"last"};Object.keys(d).forEach(f=>{f in u.meta.offsets&&(l.pagination[d[f]]=u.meta.offsets[f])})}return l.meta=u.meta,l}))}mapSort(e){return{sortOrder:{NONE:"",ASC:"ASC",DESC:"DESC"}[e.sortOrder],orderBy:e.orderBy}}mapRecord(e){return e}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(me.Apollo))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const Qu={key:"default",module:"saved-search",attributes:{contents:""},criteria:{name:"default",filters:{}}},I4={default:(0,M.deepClone)(Qu)},Rc={filters:{}},jc={orderBy:"",sortOrder:M.SortDirection.DESC},kc={all:!1,status:M.SelectionStatus.NONE,selected:{},count:0},A4={module:"",records:[],criteria:(0,M.deepClone)(Rc),activeFilters:(0,M.deepClone)(I4),sort:(0,M.deepClone)(jc),pagination:{pageSize:5,current:0,previous:0,next:5,last:0,total:0,pageFirst:0,pageLast:0},selection:(0,M.deepClone)(kc),openFilter:(0,M.deepClone)(Qu),loading:!1,meta:{}};let Xu=(()=>{class i{listGQL;configStore;preferencesStore;languageStore;message;records$;criteria$;sort$;pagination$;selection$;selectedCount$;selectedStatus$;activeFilters$;openFilter$;loading$;cache$=null;internalState=(0,M.deepClone)(A4);store=new S.BehaviorSubject(this.internalState);state$=this.store.asObservable();preferencesSub;preferenceKey;baseFilter;baseFilterMap;constructor(e,t,r,o,s){this.listGQL=e,this.configStore=t,this.preferencesStore=r,this.languageStore=o,this.message=s,this.records$=this.state$.pipe((0,v.map)(c=>c.records),(0,v.distinctUntilChanged)()),this.criteria$=this.state$.pipe((0,v.map)(c=>c.criteria),(0,v.distinctUntilChanged)()),this.sort$=this.state$.pipe((0,v.map)(c=>c.sort),(0,v.distinctUntilChanged)()),this.pagination$=this.state$.pipe((0,v.map)(c=>c.pagination),(0,v.distinctUntilChanged)()),this.selection$=this.state$.pipe((0,v.map)(c=>c.selection),(0,v.distinctUntilChanged)()),this.selectedCount$=this.state$.pipe((0,v.map)(c=>c.selection.count),(0,v.distinctUntilChanged)()),this.selectedStatus$=this.state$.pipe((0,v.map)(c=>c.selection.status),(0,v.distinctUntilChanged)()),this.activeFilters$=this.state$.pipe((0,v.map)(c=>c.activeFilters),(0,v.distinctUntilChanged)()),this.openFilter$=this.state$.pipe((0,v.map)(c=>c.openFilter),(0,v.distinctUntilChanged)()),this.loading$=this.state$.pipe((0,v.map)(c=>c.loading))}connect(){return this.records$}disconnect(){}get criteria(){return(0,M.deepClone)(this.internalState.criteria?this.internalState.criteria:Rc)}set criteria(e){this.updateState({...this.internalState,criteria:e})}get activeFilters(){return(0,M.deepClone)(this.internalState.activeFilters)}get sort(){return(0,M.deepClone)(this.internalState.sort?this.internalState.sort:jc)}set sort(e){this.updateState({...this.internalState,sort:e})}get selection(){return(0,M.deepClone)(this.internalState.selection?this.internalState.selection:kc)}get records(){return this.internalState.records?this.internalState.records:[]}getModule(){return this.internalState.module}getRecord(e){let t=null;return this.records.some(r=>{if(r.id===e)return t=r,!0}),t}destroy(){this.clear()}init(e,t=!0,r="list_max_entries_per_page",o=(0,M.deepClone)(Qu),s=""){return this.internalState.module=e,this.preferenceKey=s,r&&this.watchPageSize(r),this.setBaseFilter(o),this.loadCurrentFilter(e),!1===t?null:this.load()}setBaseFilter(e){this.baseFilterMap={default:(0,M.deepClone)(e)},this.baseFilter=(0,M.deepClone)(e),this.updateState({...this.internalState,activeFilters:(0,M.deepClone)(this.baseFilterMap),openFilter:(0,M.deepClone)(this.baseFilter)})}loadCurrentFilter(e){const t=this.loadPreference(e,"current-filters")??this.baseFilterMap;if(!t||(0,M.emptyObject)(t))return;let r=this.loadPreference(e,"current-sort");!r&&(0,M.emptyObject)(r)&&(r=null),this.setFilters(t,!1,r)}setFilters(e,t=!0,r=null){const s=e[Object.keys(e).shift()];if(this.updateState({...this.internalState,activeFilters:(0,M.deepClone)(e),openFilter:(0,M.deepClone)(s)}),s.criteria){let c=s.criteria.orderBy??"",u=this.mapSortOrder(s.criteria.sortOrder??"desc");null!==r&&(c=r.orderBy,u=r.sortOrder),this.updateSorting(c,u,!1),this.updateSortLocalStorage(),this.updateSearchCriteria(s.criteria,t)}this.updateFilterLocalStorage()}updateFilterLocalStorage(){this.savePreference(this.internalState.module,"current-filters",this.internalState.activeFilters)}updateSortLocalStorage(){this.savePreference(this.internalState.module,"current-sort",this.sort)}load(e=!0){return this.updateState({...this.internalState,loading:!0}),this.getRecords(this.internalState.module,this.internalState.criteria,this.internalState.sort,this.internalState.pagination,e).pipe((0,v.catchError)(()=>(this.message.addDangerMessageByKey("LBL_GET_RECORD_LIST_ERROR"),(0,S.of)({records:[],criteria:(0,M.deepClone)(Rc),sort:(0,M.deepClone)(jc),pagination:{pageSize:5,current:0,previous:0,next:5,last:0,total:0,pageFirst:0,pageLast:0},openFilter:(0,M.deepClone)(this.baseFilter),activeFilters:(0,M.deepClone)(this.baseFilterMap),selection:(0,M.deepClone)(kc),meta:{}}))),(0,v.tap)(t=>{this.calculatePageCount(t.records,t.pagination),this.updateState({...this.internalState,records:t.records,pagination:t.pagination,loading:!1,meta:t.meta??{}})}))}updateSearchCriteria(e,t=!0){this.updateState({...this.internalState,criteria:e}),t&&(this.updateSelection(M.SelectionStatus.NONE),this.resetPagination())}resetSearchCriteria(e=!0){this.updateSearchCriteria((0,M.deepClone)(Rc),e)}updateSorting(e,t,r=!0){t===M.SortDirection.NONE&&(e="",t=M.SortDirection.DESC),this.updateState({...this.internalState,sort:{orderBy:e,sortOrder:t}}),r&&this.load(!1).pipe((0,v.take)(1)).subscribe()}mapSortOrder(e){let t=M.SortDirection.NONE;const r=e.toLowerCase();return"asc"===r?t=M.SortDirection.ASC:"desc"===r&&(t=M.SortDirection.DESC),t}updatePagination(e){const t={...this.internalState.pagination,current:e};this.updateState({...this.internalState,pagination:t}),this.load(!1).pipe((0,v.take)(1)).subscribe()}setOpenFilter(e){this.updateState({...this.internalState,openFilter:(0,M.deepClone)(e)})}resetFilters(e=!0){this.updateState({...this.internalState,activeFilters:(0,M.deepClone)(this.baseFilterMap),openFilter:(0,M.deepClone)(this.baseFilter)}),this.clearSort(),this.updateSortLocalStorage(),this.updateFilterLocalStorage(),this.updateSearchCriteria(this.baseFilter.criteria,e)}savePreference(e,t,r){const o=this.preferenceKey??null;if(!o)return null;this.preferencesStore.setUi(e,`${o}${t}`,r)}loadPreference(e,t){const r=this.preferenceKey??null;return r?this.preferencesStore.getUi(e,`${r}${t}`):null}resetPagination(){this.updatePagination(0)}clear(){this.cache$=null,this.store.unsubscribe(),this.preferencesSub.unsubscribe()}clearAuthBased(){this.clear()}getSelectionStatus(){return this.selectedStatus$}getSelectedCount(){return this.selectedCount$}updateSelection(e){e!==M.SelectionStatus.NONE?e!==M.SelectionStatus.ALL?e!==M.SelectionStatus.PAGE||this.selectPage():this.selectAll():this.clearSelection()}clearSelection(){this.updateState({...this.internalState,selection:(0,M.deepClone)(kc)})}clearSort(){this.updateState({...this.internalState,sort:(0,M.deepClone)(jc)})}selectAll(){this.updateState({...this.internalState,selection:{all:!0,status:M.SelectionStatus.ALL,selected:{},count:this.internalState.pagination.total}})}selectPage(){const e={...this.internalState.selection.selected};this.internalState.records&&this.internalState.records.length&&this.internalState.records.forEach(t=>{t&&t.id&&(e[t.id]=t.id)}),this.updateState({...this.internalState,selection:{all:!1,status:M.SelectionStatus.SOME,selected:e,count:Object.keys(e).length}})}toggleSelection(e){const t=(0,M.deepClone)(this.internalState.selection);t.selected[e]?delete t.selected[e]:t.selected[e]=e,t.count=Object.keys(t.selected).length,t.status=0===t.count?M.SelectionStatus.NONE:M.SelectionStatus.SOME,this.updateState({...this.internalState,selection:t})}getPaginationCount(){return this.pagination$.pipe((0,v.map)(e=>({pageFirst:e.pageFirst,pageLast:e.pageLast,total:e.total})),(0,v.distinctUntilChanged)())}getPagination(){return this.store.value.pagination}getMeta(){return this.store.value.meta}changePage(e){let t=0;const r={};if(r[M.PageSelection.FIRST]=0,r[M.PageSelection.PREVIOUS]=this.internalState.pagination.previous,r[M.PageSelection.NEXT]=this.internalState.pagination.next,r[M.PageSelection.LAST]=this.internalState.pagination.last,e in r&&r[e]>=0){if(t=r[e],Number(t)>this.internalState.pagination.last||t<0)return;this.updatePagination(t)}}setPageSize(e){const t={...this.internalState.pagination,pageSize:e};this.updateState({...this.internalState,pagination:t})}getPageSize(){return this?.internalState?.pagination?.pageSize??10}watchPageSize(e){const t=this.preferencesStore.getUserPreference(e),r=this.configStore.getConfigValue(e);this.determinePageSize(t,r),this.preferencesSub=this.configStore.configs$.pipe((0,S.combineLatestWith)(this.preferencesStore.userPreferences$),(0,v.tap)(([o,s])=>{this.determinePageSize(s&&s[e]||null,o&&o[e]&&o[e].value||null)})).subscribe()}determinePageSize(e,t){let r=20;e?r=e:t&&(r=parseInt(t,10)),this.setPageSize(r)}updateState(e){this.store.next(this.internalState=e)}calculatePageCount(e,t){const r=e&&e.length||0;let o=0,s=0;r>0&&(o=t.current+1,s=t.current+r),t.pageFirst=o,t.pageLast=s}getRecords(e,t,r,o,s=!0){return(null==this.cache$||!1===s)&&(this.cache$=this.listGQL.get(e,t,r,o).pipe((0,v.shareReplay)(1))),this.cache$}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Bc),n.\u0275\u0275inject(vt),n.\u0275\u0275inject(qt),n.\u0275\u0275inject($e),n.\u0275\u0275inject(dt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),Gi=(()=>{class i{listGQL;configStore;preferencesStore;languageStore;message;constructor(e,t,r,o,s){this.listGQL=e,this.configStore=t,this.preferencesStore=r,this.languageStore=o,this.message=s}create(){return new Xu(this.listGQL,this.configStore,this.preferencesStore,this.languageStore,this.message)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Bc),n.\u0275\u0275inject(vt),n.\u0275\u0275inject(qt),n.\u0275\u0275inject($e),n.\u0275\u0275inject(dt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const Yu={module:"",detailView:{},editView:{},listView:{},search:{},recordView:{},subPanel:{},massUpdate:{},recentlyViewed:[],favorites:[]},Eb={};let Pc=(0,M.deepClone)(Yu),va=(0,M.deepClone)(Eb);const xb={};let So=(0,M.deepClone)(xb),bt=(()=>{class i{recordGQL;appState;listViewColumns$;listViewLineActions$;listViewTableActions$;listMetadata$;searchMetadata$;recordViewMetadata$;metadata$;allModuleMetadata$;subPanelMetadata$;typeKeys={listView:"listView",search:"search",recordView:"recordView",subPanel:"subPanel",massUpdate:"massUpdate",recentlyViewed:"recentlyViewed",favorites:"favorites"};store=new S.BehaviorSubject(Pc);state$=this.store.asObservable();allModuleStore=new S.BehaviorSubject(va);allModulesState$=this.allModuleStore.asObservable();resourceName="moduleMetadata";fieldsMetadata={fields:["id","_id"]};types=["listView","search","recordView","subPanel","massUpdate","recentlyViewed","favorites"];baseTypes=["listView","search","recordView","favorites"];constructor(e,t){this.recordGQL=e,this.appState=t,this.listViewColumns$=this.state$.pipe((0,v.map)(r=>r.listView.fields),(0,v.distinctUntilChanged)()),this.listViewLineActions$=this.state$.pipe((0,v.map)(r=>r.listView.lineActions),(0,v.distinctUntilChanged)()),this.listViewTableActions$=this.state$.pipe((0,v.map)(r=>r.listView.tableActions),(0,v.distinctUntilChanged)()),this.listMetadata$=this.state$.pipe((0,v.map)(r=>r.listView),(0,v.distinctUntilChanged)()),this.searchMetadata$=this.state$.pipe((0,v.map)(r=>r.search),(0,v.distinctUntilChanged)()),this.recordViewMetadata$=this.state$.pipe((0,v.map)(r=>r.recordView),(0,v.distinctUntilChanged)()),this.subPanelMetadata$=this.state$.pipe((0,v.map)(r=>r.subPanel),(0,v.distinctUntilChanged)()),this.metadata$=this.state$,this.allModuleMetadata$=this.allModulesState$}clear(){So=(0,M.deepClone)(xb),va=(0,M.deepClone)(Eb),this.updateState("",(0,M.deepClone)(Yu))}clearAuthBased(){this.clear()}getMetadataTypes(){return this.types}getModule(){return Pc.module}get(){return Pc}getModuleMeta(e){return{...va[e]??{}}}setModuleMetadata(e,t){So[e]=(0,S.of)(t).pipe((0,v.shareReplay)(1)),this.updateAllModulesState(e,t)}reloadModuleMetadata(e,t,r=!0){return t||(t=this.getMetadataTypes()),this.getMetadata(e,t,r).pipe((0,v.tap)(o=>{this.updateAllModulesState(e,o)}))}load(e,t,r=!0){return t||(t=this.getMetadataTypes()),this.getMetadata(e,t,r).pipe((0,v.tap)(o=>{this.updateState(e,o)}))}isCached(e){return null!==(So[e]??null)}getEmpty(){return(0,M.deepClone)(Yu)}set(e,t){So[e]=(0,S.of)(t).pipe((0,v.shareReplay)(1)),this.updateState(e,t)}getMetadata(e,t=null,r=!0){return(null==So[e]||!1===r)&&(So[e]=this.fetchMetadata(e,t).pipe((0,v.shareReplay)(1))),So[e]}mapMetadata(e,t){const o={...va[e]??{}};return this.parseListViewMetadata(t,o),this.parseSearchMetadata(t,o),this.parseRecordViewMetadata(t,o),this.parseSubPanelMetadata(t,o),this.parseMassUpdateMetadata(t,o),this.parseRecentlyViewedMetadata(t,o),this.parseFavoritesMetadata(t,o),o}updateState(e,t){this.updateAllModulesState(e,t),this.store.next(Pc={...t,module:e})}updateAllModulesState(e,t){if(""!==e){const r={...va};r[e]={...t},this.allModuleStore.next(va=r)}}fetchMetadata(e,t){const r={fields:[...this.fieldsMetadata.fields,...t??this.baseTypes]};return this.recordGQL.fetch(this.resourceName,`/api/module-metadata/${e}`,r).pipe((0,v.map)(({data:o})=>this.mapMetadata(e,o.moduleMetadata)))}parseListViewMetadata(e,t){if(!e||!e.listView)return;const r={fields:[],bulkActions:{},lineActions:[],tableActions:[],chartTypes:{},filters:[]};e.listView.columns&&e.listView.columns.forEach(s=>{r.fields.push(s)}),this.addDefinedMeta(r,e.listView,{bulkActions:"bulkActions",lineActions:"lineActions",tableActions:"tableActions",sidebarWidgets:"sidebarWidgets",availableFilters:"filters",paginationType:"paginationType"}),t.listView=r}parseSearchMetadata(e,t){e&&e.search&&(t.search=e.search)}parseSubPanelMetadata(e,t){e&&e.subPanel&&(t.subPanel=e.subPanel)}parseMassUpdateMetadata(e,t){e&&e.massUpdate&&(t.massUpdate=e.massUpdate)}parseRecordViewMetadata(e,t){if(!e||!e.recordView)return;const r={actions:[],templateMeta:{},panels:[]};this.addDefinedMeta(r,e.recordView,{templateMeta:"templateMeta",actions:"actions",panels:"panels",topWidget:"topWidget",sidebarWidgets:"sidebarWidgets",bottomWidgets:"bottomWidgets",summaryTemplates:"summaryTemplates",vardefs:"vardefs"}),t.recordView=r}parseRecentlyViewedMetadata(e,t){e&&e.recentlyViewed&&(t.recentlyViewed=e.recentlyViewed)}parseFavoritesMetadata(e,t){e&&e.favorites&&(t.favorites=e.favorites)}addDefinedMeta(e,t,r){Object.keys(r).forEach(o=>{t[o]&&(e[r[o]]=t[o])})}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(oa),n.\u0275\u0275inject(Xt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Fb=(()=>{class i{listStoreFactory;meta;preferences;module="";parentModule="";recordList;listMetadata$;searchMetadata$;selection$;selectedCount$;selectedStatus$;columns$;listMetadata;linkClicked$;loading$;metadataLoading$;metadataLoadingState;linkClickedState;constructor(e,t,r){this.listStoreFactory=e,this.meta=t,this.preferences=r,this.recordList=e.create(),this.loading$=this.recordList.loading$,this.metadataLoadingState=new S.BehaviorSubject(!1),this.linkClickedState=new S.BehaviorSubject(!1),this.linkClicked$=this.linkClickedState.asObservable(),this.metadataLoading$=this.metadataLoadingState.asObservable(),this.selection$=this.recordList.selection$,this.selectedCount$=this.recordList.selectedCount$,this.selectedStatus$=this.recordList.selectedStatus$}clear(){this.recordList.clear(),this.recordList=null}clearAuthBased(){this.recordList.clearAuthBased()}init(e,t=""){this.module=e,this.parentModule=t,this.loadCurrentSort(),this.metadataLoadingState.next(!0);const r=this.meta.getMetadata(e).pipe((0,v.tap)(()=>{this.metadataLoadingState.next(!1),this.recordList.load().pipe((0,v.take)(1)).subscribe()}));this.listMetadata$=r.pipe((0,v.map)(o=>o.listView)),this.searchMetadata$=r.pipe((0,v.map)(o=>o.search)),this.recordList.init(e,!1,"list_max_entries_per_modal"),this.columns$=this.listMetadata$.pipe((0,v.map)(o=>o.fields))}load(e=!0){return this.recordList.load(e)}loadCurrentSort(){if(!this.parentModule)return;const e=this.loadPreference(this.parentModule,"current-sort");!e||(0,M.emptyObject)(e)||(this.recordList.sort=e)}saveCurrentSort(){this.parentModule&&this.savePreference(this.parentModule,"current-sort",this.recordList.sort)}emitLinkClicked(){this.linkClickedState.next(!0)}getPreferenceKey(e){return this.module+"-record-list-modal-"+e}savePreference(e,t,r){this.preferences.setUi(e,this.getPreferenceKey(t),r)}loadPreference(e,t){return this.preferences.getUi(e,this.getPreferenceKey(t))}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Gi),n.\u0275\u0275inject(bt),n.\u0275\u0275inject(qt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),Ib=(()=>{class i{listStoreFactory;metadataStore;preferences;constructor(e,t,r){this.listStoreFactory=e,this.metadataStore=t,this.preferences=r}create(){return new Fb(this.listStoreFactory,this.metadataStore,this.preferences)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Gi),n.\u0275\u0275inject(bt),n.\u0275\u0275inject(qt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function T4(i,a){1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275element(1,"scrm-label",3),n.\u0275\u0275elementContainerEnd())}function N4(i,a){if(1&i&&n.\u0275\u0275element(0,"scrm-list-filter",9),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("config",e.filterConfig)}}function L4(i,a){1&i&&n.\u0275\u0275element(0,"scrm-loading-spinner",11),2&i&&n.\u0275\u0275property("overlay",!0)}function O4(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,L4,1,1,"scrm-loading-spinner",10),n.\u0275\u0275elementContainerEnd()),2&i){const e=a.ngIf;n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e)}}function B4(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275element(1,"scrm-button",9),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("config",e.buildSelectButton())}}function R4(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"div")(2,"div",4)(3,"div",5)(4,"div",6),n.\u0275\u0275template(5,N4,1,1,"scrm-list-filter",7),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(6,"div",8)(7,"div",6),n.\u0275\u0275element(8,"scrm-table",9),n.\u0275\u0275elementEnd()()(),n.\u0275\u0275template(9,O4,2,1,"ng-container",2),n.\u0275\u0275pipe(10,"async"),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(11,B4,2,1,"ng-container",2),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(5),n.\u0275\u0275property("ngIf",e.filterConfig),n.\u0275\u0275advance(3),n.\u0275\u0275property("config",e.tableConfig),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(10,4,e.loading$)),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",e.multiSelect)}}let _a=(()=>{class i{activeModal;storeFactory;languages;maxColumnCalculator;preferences;systemConfigs;titleKey="";module;parentModule;multiSelect=!1;multiSelectButtonLabel="LBL_SAVE";adapter=null;filterAdapter=null;loading$;closeButton;tableConfig;filterConfig;store;maxHeight;subs=[];constructor(e,t,r,o,s,c){this.activeModal=e,this.storeFactory=t,this.languages=r,this.maxColumnCalculator=o,this.preferences=s,this.systemConfigs=c,this.store=this.storeFactory.create()}ngOnInit(){this.closeButton={klass:["btn","btn-outline-light","btn-sm"],onClick:()=>{this.activeModal.close({type:"close-button"})}},this.init()}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}init(){this.module&&(this.initStore(),this.initTableAdapter(),this.initFilterAdapters())}getMaxColumns(){return this.maxColumnCalculator.getMaxColumns((0,S.of)(!0))}linkSelectedRecords(){this.activeModal.close({selection:this.store.recordList.selection,records:this.store.recordList.records})}buildSelectButton(){return{klass:["btn","btn-primary","btn-sm"],onClick:()=>{this.linkSelectedRecords()},labelKey:this.multiSelectButtonLabel}}initTableAdapter(){if(null===this.adapter&&(this.adapter=new wb(this.systemConfigs,this.preferences)),this.tableConfig=this.adapter.getTable(this.store,this.multiSelect),this.store?.listMetadata?.maxHeight&&(this.tableConfig.maxListHeight=this.store.listMetadata.maxHeight),!this.tableConfig?.maxListHeight){const e=this.systemConfigs.getConfigValue("ui")??{},t=this.systemConfigs.getConfigValue("record_modal_max_height")??"";this.tableConfig.maxListHeight=e.record_modal_max_height??t}this.tableConfig.maxColumns$=this.getMaxColumns()}initFilterAdapters(){null===this.filterAdapter&&(this.filterAdapter=new Db),this.filterConfig=this.filterAdapter.getConfig(this.store)}initStore(){this.store.init(this.module,this.parentModule??""),this.loading$=this.store.metadataLoading$,this.subs.push(this.store.linkClicked$.pipe((0,v.distinctUntilChanged)(),(0,v.skip)(1)).subscribe(e=>{e&&this.linkSelectedRecords()}))}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(pe.NgbActiveModal),n.\u0275\u0275directiveInject(Ib),n.\u0275\u0275directiveInject($e),n.\u0275\u0275directiveInject(Mo),n.\u0275\u0275directiveInject(qt),n.\u0275\u0275directiveInject(vt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-record-list-modal"]],inputs:{titleKey:"titleKey",module:"module",parentModule:"parentModule",multiSelect:"multiSelect",multiSelectButtonLabel:"multiSelectButtonLabel",adapter:"adapter",filterAdapter:"filterAdapter"},features:[n.\u0275\u0275ProvidersFeature([Mo])],decls:4,vars:5,consts:[["bodyKlass","m-0 small-font","footerKlass","border-0","headerKlass","border-0","klass","record-list-modal",3,"closable","close","title"],["modal-body",""],[4,"ngIf"],["labelKey","LBL_CONFIG_NO_CONFIG"],[1,"container-fluid"],[1,"row","pb-3"],[1,"col"],[3,"config",4,"ngIf"],[1,"row"],[3,"config"],[3,"overlay",4,"ngIf"],[3,"overlay"]],template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"scrm-modal",0)(1,"div",1),n.\u0275\u0275template(2,T4,2,0,"ng-container",2),n.\u0275\u0275template(3,R4,12,6,"ng-container",2),n.\u0275\u0275elementEnd()()),2&t&&(n.\u0275\u0275property("closable",!0)("close",r.closeButton)("title",r.titleKey),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",!r.tableConfig),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.tableConfig))},encapsulation:2,data:{animation:[(0,Wt.trigger)("modalFade",[(0,Wt.transition)("void <=> *",[(0,Wt.animate)("800ms")])])]}})}return i})(),ya=(()=>{class i{recordList;constructor(e){this.recordList=e.create()}init(e){this.recordList.init(e,!1)}search(e,t){const r=this.recordList.criteria;return r.filters[t]={field:t,operator:"=",values:[e]},this.recordList.updateSearchCriteria(r,!1),this.recordList.load(!1).pipe((0,v.map)(o=>o.records),(0,v.take)(1),(0,v.shareReplay)(1))}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Gi))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),ed=(()=>{class i extends _n{languages;typeFormatter;relateService;moduleNameMapper;logic;logicDisplay;selectedValues=[];status="";initModule="";constructor(e,t,r,o,s,c){super(t,s,c),this.languages=e,this.typeFormatter=t,this.relateService=r,this.moduleNameMapper=o,this.logic=s,this.logicDisplay=c}get module(){return this.record&&this.record.module?this.record.module:null}ngOnInit(){super.ngOnInit(),this.init(),this.subs.push(this.field.valueChanges$.subscribe(()=>{this.onModuleChange()}))}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}onModuleChange(){const e=this.initModule,t=this?.field?.definition?.module??"";e!==t&&(this.initModule=t,""===e&&e!==t&&this.init(),this.status=""===t?"no-module":"")}search=e=>(this.status="searching",this.relateService.search(e,this.getRelateFieldName()).pipe((0,v.tap)(()=>this.status="found"),(0,v.catchError)(()=>(this.status="error",(0,S.of)([]))),(0,v.map)(t=>{if(!t||t.length<1)return this.status="not-found",[];const r=[];return t.forEach(o=>{o&&o.attributes&&r.push(o.attributes)}),this.status="",r})));getRelateFieldName(){return this.field&&this.field.definition&&this.field.definition.rname||"name"}getRelateIdField(){return this.field&&this.field.definition&&this.field.definition.id_name||""}getRelatedModule(){const e=this.field&&this.field.definition&&this.field.definition.module||"";return e?this.moduleNameMapper.toFrontend(e):""}getMessage(){const e={searching:"LBL_SEARCHING","not-found":"LBL_NOT_FOUND",error:"LBL_SEARCH_ERROR",found:"LBL_FOUND","no-module":"LBL_NO_MODULE_SELECTED"};return e[this.status]?e[this.status]:""}getInvalidClass(){return this.field.formControl&&this.field.formControl.invalid&&this.field.formControl.touched||this.hasSearchError()?"is-invalid":""}hasSearchError(){return"error"===this.status||"not-found"===this.status}resetStatus(){this.status=""}getPlaceholderLabel(){return this.languages.getAppString("LBL_TYPE_TO_SEARCH")||""}init(){this.initModule=this?.field?.definition?.module??"",this.relateService&&this.relateService.init(this.getRelatedModule())}buildRelate(e,t){const r={id:e};return this.getRelateFieldName()&&(r[this.getRelateFieldName()]=t),r}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject($e),n.\u0275\u0275directiveInject(ut),n.\u0275\u0275directiveInject(ya),n.\u0275\u0275directiveInject(Tn),n.\u0275\u0275directiveInject(_t),n.\u0275\u0275directiveInject(yt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["ng-component"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:0,vars:0,template:function(t,r){},encapsulation:2})}return i})();const j4=["tag"];function k4(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"div",3)(2,"tag-input",4,5),n.\u0275\u0275listener("keyup.enter",function(){n.\u0275\u0275restoreView(e);const r=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(r.selectFirstElement())})("onAdd",function(r){n.\u0275\u0275restoreView(e);const o=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(o.onAdd(r))})("onBlur",function(){n.\u0275\u0275restoreView(e);const r=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(r.resetStatus())})("onRemove",function(){n.\u0275\u0275restoreView(e);const r=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(r.onRemove())})("ngModelChange",function(r){n.\u0275\u0275restoreView(e);const o=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(o.selectedValues=r)}),n.\u0275\u0275element(4,"tag-input-dropdown",6),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(5,"div",7),n.\u0275\u0275element(6,"scrm-button",8),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()}if(2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(2),n.\u0275\u0275classMap(e.getInvalidClass()),n.\u0275\u0275property("ngModel",e.selectedValues)("clearOnBlur",!0)("displayBy",e.getRelateFieldName())("inputClass",e.getInvalidClass())("onTextChangeDebounce",500)("onlyFromAutocomplete",!0)("placeholder",e.getPlaceholderLabel())("secondaryPlaceholder",e.getPlaceholderLabel()),n.\u0275\u0275advance(2),n.\u0275\u0275property("autocompleteObservable",e.search)("displayBy",e.getRelateFieldName())("keepOpen",!1)("showDropdownIfEmpty",!0),n.\u0275\u0275advance(2),n.\u0275\u0275property("config",e.selectButton)}}function P4(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"small",9),n.\u0275\u0275element(1,"scrm-label",10),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("labelKey",e.getMessage())("module",e.module)}}let td=(()=>{class i extends ed{languages;typeFormatter;relateService;moduleNameMapper;modalService;logic;logicDisplay;tag;selectButton;idField;constructor(e,t,r,o,s,c,l){super(e,t,r,o,c,l),this.languages=e,this.typeFormatter=t,this.relateService=r,this.moduleNameMapper=o,this.modalService=s,this.logic=c,this.logicDisplay=l,this.selectButton={klass:["btn","btn-sm","btn-outline-secondary","select-button","m-0"],onClick:()=>{this.showSelectModal()},icon:"cursor"}}ngOnInit(){super.ngOnInit(),this.init()}init(){super.init(),this.initValue();const e=this.getRelateIdField();e&&this.record&&this.record.fields&&this.record.fields[e]&&(this.idField=this.record.fields[e])}initValue(){return this.field.valueObject&&this.field.valueObject.id?(this.selectedValues=[],void this.selectedValues.push(this.field.valueObject)):(this.selectedValues=[],void this.field.formControl.setValue(""))}onAdd(e){if(e){const t=this.getRelateFieldName();this.setValue(e.id,e[t])}else this.setValue("",""),this.selectedValues=[]}onRemove(){this.setValue("",""),this.selectedValues=[],setTimeout(()=>{this.tag.focus(!0,!0)},200)}setValue(e,t){const r=this.buildRelate(e,t);this.field.value=t,this.field.valueObject=r,this.field.formControl.setValue(t),this.field.formControl.markAsDirty(),this.idField&&(this.idField.value=e,this.idField.formControl.setValue(e),this.idField.formControl.markAsDirty())}showSelectModal(){const e=this.modalService.open(_a,{size:"xl",scrollable:!0});e.componentInstance.module=this.getRelatedModule(),e.result.then(t=>{if(!t||!t.selection||!t.selection.selected)return;const r=this.getSelectedRecord(t);this.setItem(r)})}getSelectedRecord(e){let t="";Object.keys(e.selection.selected).some(o=>(t=o,!0));let r=null;return e.records.some(o=>{if(o&&o.id===t)return r=o,!0}),r}setItem(e){this.tag.writeValue([e.attributes]),this.onAdd(e.attributes)}selectFirstElement(){const e=this.tag.dropdown.items;if(0!==e.length){const t=e[0];this.selectedValues.push(t),this.onAdd(t),this.tag.dropdown.hide()}}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject($e),n.\u0275\u0275directiveInject(ut),n.\u0275\u0275directiveInject(ya),n.\u0275\u0275directiveInject(Tn),n.\u0275\u0275directiveInject(pe.NgbModal),n.\u0275\u0275directiveInject(_t),n.\u0275\u0275directiveInject(yt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-relate-edit"]],viewQuery:function(t,r){if(1&t&&n.\u0275\u0275viewQuery(j4,5),2&t){let o;n.\u0275\u0275queryRefresh(o=n.\u0275\u0275loadQuery())&&(r.tag=o.first)}},features:[n.\u0275\u0275ProvidersFeature([ya]),n.\u0275\u0275InheritDefinitionFeature],decls:3,vars:2,consts:[[1,"d-flex"],[4,"ngIf"],["class","text-danger form-text text-muted",4,"ngIf"],[1,"flex-grow-1"],["maxItems","1",3,"ngModel","clearOnBlur","displayBy","inputClass","onTextChangeDebounce","onlyFromAutocomplete","placeholder","secondaryPlaceholder","keyup.enter","onAdd","onBlur","onRemove","ngModelChange"],["tag",""],[3,"autocompleteObservable","displayBy","keepOpen","showDropdownIfEmpty"],[1,"relate-btn"],[3,"config"],[1,"text-danger","form-text","text-muted"],[3,"labelKey","module"]],template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"div",0),n.\u0275\u0275template(1,k4,7,15,"ng-container",1),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(2,P4,2,2,"small",2)),2&t&&(n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.initModule),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.getMessage()))},dependencies:[F.NgIf,Un.TagInputComponent,Un.TagInputDropdown,zt,De.NgControlStatus,De.NgModel,Vn],encapsulation:2})}return i})(),Ab=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Un.TagInputModule,Ut,De.FormsModule,qr,cn]})}return i})();const $4=["tag"];function U4(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"small",8),n.\u0275\u0275element(1,"scrm-label",9),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("labelKey",e.getMessage())("module",e.module)}}let nd=(()=>{class i extends ed{languages;typeFormatter;relateService;moduleNameMapper;modalService;logic;logicDisplay;tag;selectButton;selectedTags;idField;constructor(e,t,r,o,s,c,l){super(e,t,r,o,c,l),this.languages=e,this.typeFormatter=t,this.relateService=r,this.moduleNameMapper=o,this.modalService=s,this.logic=c,this.logicDisplay=l,this.selectButton={klass:["btn","btn-sm","btn-outline-secondary","select-button","m-0"],onClick:()=>{this.showSelectModal()},icon:"cursor"}}ngOnInit(){const e=this.record;this.field.valueList=[],this.field.valueObjectArray=[];const t=this.field&&this.field.criteria&&this.field.criteria.values||[];t.length>0&&(this.field.valueList=t,this.selectedTags=t);const r=this.field&&this.field.criteria&&this.field.criteria.valueObjectArray||[];r.length>0&&(this.field.valueObjectArray=(0,M.deepClone)(r),this.selectedTags=(0,M.deepClone)(r)),super.ngOnInit();const o=this.getRelateIdField();if(o&&e&&e.criteriaFields&&e.criteriaFields[o]){this.idField=e.criteriaFields[o],this.idField.valueList=[];const s=this.idField&&this.idField.criteria&&this.idField.criteria.values||[];s.length>0&&(this.idField.valueList=(0,M.deepClone)(s))}}onAdd(e){e&&this.setValue(e)}onAdding(e){if(!e||this.idField&&this.idField.valueList.includes(e.id))return S.EMPTY;const t=this.getRelateFieldName();return!this.idField&&this.field.valueList.includes(e[t])?S.EMPTY:(0,S.of)(e)}onRemove(e){const t=e.id??"",r=e.name??"";this.field.valueList=this.field.valueList.filter(o=>o!==r),this.field.valueObjectArray=this.field.valueObjectArray.filter(o=>o.id!==t),this.updateSearchCriteria(this.field),this.field.criteria.valueObjectArray=(0,M.deepClone)(this.field.valueObjectArray),this.idField&&t&&(this.idField.valueList=this.idField.valueList.filter(o=>o!==t),this.updateSearchCriteria(this.idField)),setTimeout(()=>{this.tag.focus(!0,!0)},200)}selectFirstElement(){const e=this.tag.dropdown.items;if(0!==e.length){const t=e[0];this.tag.appendTag(t),this.onAdd(t),this.tag.dropdown.hide()}}setValue(e){const t=this.getRelateFieldName(),r=e.id,o=e[t];if(this.idField&&this.idField.valueList.includes(r)||!this.idField&&this.field.valueList.includes(o))return;const s={};s.id=r,s[t]=o,this.field.valueObjectArray.push(s),this.field.valueList.push(o),this.idField&&(this.idField.valueList.push(r),this.updateSearchCriteria(this.idField)),this.updateSearchCriteria(this.field),this.field.criteria.valueObjectArray||(this.field.criteria.valueObjectArray=[]),this.field.criteria.valueObjectArray.push(s)}updateSearchCriteria(e){e.criteria.operator="=",e.criteria.values=e.valueList,e.formControl.setValue(e.valueList),e.formControl.markAsDirty()}showSelectModal(){const e=this.modalService.open(_a,{size:"xl",scrollable:!0});e.componentInstance.module=this.getRelatedModule(),e.result.then(t=>{if(!t||!t.selection||!t.selection.selected)return;const r=this.getSelectedRecord(t);this.field.valueObjectArray.find(s=>s.id===r.id)||this.setItem(r)})}getSelectedRecord(e){let t="";Object.keys(e.selection.selected).some(o=>(t=o,!0));let r=null;return e.records.some(o=>{if(o&&o.id===t)return r=o,!0}),r}setItem(e){this.tag.appendTag(e.attributes),this.onAdd(e.attributes)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject($e),n.\u0275\u0275directiveInject(ut),n.\u0275\u0275directiveInject(ya),n.\u0275\u0275directiveInject(Tn),n.\u0275\u0275directiveInject(pe.NgbModal),n.\u0275\u0275directiveInject(_t),n.\u0275\u0275directiveInject(yt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-relate-filter"]],viewQuery:function(t,r){if(1&t&&n.\u0275\u0275viewQuery($4,5),2&t){let o;n.\u0275\u0275queryRefresh(o=n.\u0275\u0275loadQuery())&&(r.tag=o.first)}},features:[n.\u0275\u0275ProvidersFeature([ya]),n.\u0275\u0275InheritDefinitionFeature],decls:8,vars:18,consts:[[1,"d-flex"],[1,"flex-grow-1"],[3,"ngModel","clearOnBlur","identifyBy","displayBy","inputClass","onTextChangeDebounce","onlyFromAutocomplete","placeholder","secondaryPlaceholder","keyup.enter","onAdd","onBlur","onRemove","ngModelChange"],["tag",""],[3,"autocompleteObservable","identifyBy","displayBy","keepOpen","showDropdownIfEmpty"],[1,"relate-btn"],[3,"config"],["class","text-danger form-text text-muted",4,"ngIf"],[1,"text-danger","form-text","text-muted"],[3,"labelKey","module"]],template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"tag-input",2,3),n.\u0275\u0275listener("keyup.enter",function(){return r.selectFirstElement()})("onAdd",function(s){return r.onAdd(s)})("onBlur",function(){return r.resetStatus()})("onRemove",function(s){return r.onRemove(s)})("ngModelChange",function(s){return r.selectedTags=s}),n.\u0275\u0275element(4,"tag-input-dropdown",4),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(5,"div",5),n.\u0275\u0275element(6,"scrm-button",6),n.\u0275\u0275elementEnd()(),n.\u0275\u0275template(7,U4,2,2,"small",7)),2&t&&(n.\u0275\u0275advance(2),n.\u0275\u0275classMap(r.getInvalidClass()),n.\u0275\u0275property("ngModel",r.selectedTags)("clearOnBlur",!0)("identifyBy","id")("displayBy",r.getRelateFieldName())("inputClass",r.getInvalidClass())("onTextChangeDebounce",500)("onlyFromAutocomplete",!0)("placeholder",r.getPlaceholderLabel())("secondaryPlaceholder",r.getPlaceholderLabel()),n.\u0275\u0275advance(2),n.\u0275\u0275property("autocompleteObservable",r.search)("identifyBy","id")("displayBy",r.getRelateFieldName())("keepOpen",!1)("showDropdownIfEmpty",!0),n.\u0275\u0275advance(2),n.\u0275\u0275property("config",r.selectButton),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.getMessage()))},dependencies:[F.NgIf,Un.TagInputComponent,Un.TagInputDropdown,zt,De.NgControlStatus,De.NgModel,Vn],encapsulation:2})}return i})(),Tb=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,De.FormsModule]})}return i})(),Nb=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule]})}return i})(),Lb=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,De.FormsModule,pe.NgbDatepickerModule,cn,De.ReactiveFormsModule]})}return i})(),Ob=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,De.FormsModule,De.ReactiveFormsModule,Un.TagInputModule]})}return i})(),Bb=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule]})}return i})(),Rb=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Un.TagInputModule,Ut,De.FormsModule,qr,cn]})}return i})(),$c=(()=>{class i extends Ku{typeFormatter;logic;logicDisplay;constructor(e,t,r){super(e,t,r),this.typeFormatter=e,this.logic=t,this.logicDisplay=r}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(ut),n.\u0275\u0275directiveInject(_t),n.\u0275\u0275directiveInject(yt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-boolean-edit"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:4,vars:1,consts:[[1,"pb-4","checkbox-field"],[1,"checkbox-container"],["type","checkbox","aria-hidden","true",3,"checked","change"],[1,"checkmark"]],template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"div",0)(1,"label",1)(2,"input",2),n.\u0275\u0275listener("change",function(){return r.toggle()}),n.\u0275\u0275elementEnd(),n.\u0275\u0275element(3,"span",3),n.\u0275\u0275elementEnd()()),2&t&&(n.\u0275\u0275advance(2),n.\u0275\u0275property("checked",r.checked))},encapsulation:2})}return i})(),jb=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule]})}return i})(),kb=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,De.FormsModule,De.ReactiveFormsModule,Ut]})}return i})(),Pb=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule]})}return i})(),$b=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule]})}return i})();const V4=["tag"];let Uc=(()=>{class i extends bc{languages;typeFormatter;logic;logicDisplay;tag;constructor(e,t,r,o){super(e,t,r,o),this.languages=e,this.typeFormatter=t,this.logic=r,this.logicDisplay=o}ngOnInit(){this.checkAndInitAsDynamicEnum(),super.ngOnInit()}onAdd(){const e=this.selectedValues.map(t=>t.value);this.field.valueList=e,this.field.formControl.setValue(e),this.field.formControl.markAsDirty()}onRemove(){const e=this.selectedValues.map(t=>t.value);this.field.valueList=e,this.field.formControl.setValue(e),this.field.formControl.markAsDirty(),setTimeout(()=>{this.tag.focus(!0,!0),this.tag.dropdown.show()},200)}getPlaceholderLabel(){return this.languages.getAppString("LBL_SELECT_ITEM")||""}selectFirstElement(){const e=this.tag.dropdown.items;0!==e.length&&(this.selectedValues.push(e[0]),this.onAdd(),this.tag.dropdown.hide())}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject($e),n.\u0275\u0275directiveInject(ut),n.\u0275\u0275directiveInject(_t),n.\u0275\u0275directiveInject(yt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-multienum-edit"]],viewQuery:function(t,r){if(1&t&&n.\u0275\u0275viewQuery(V4,5),2&t){let o;n.\u0275\u0275queryRefresh(o=n.\u0275\u0275loadQuery())&&(r.tag=o.first)}},features:[n.\u0275\u0275InheritDefinitionFeature],decls:3,vars:13,consts:[[3,"ngModel","onlyFromAutocomplete","clearOnBlur","displayBy","identifyBy","placeholder","secondaryPlaceholder","inputClass","ngModelChange","onAdd","onRemove","keyup.enter"],["tag",""],[3,"displayBy","identifyBy","showDropdownIfEmpty","keepOpen","autocompleteItems"]],template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"tag-input",0,1),n.\u0275\u0275listener("ngModelChange",function(s){return r.selectedValues=s})("onAdd",function(){return r.onAdd()})("onRemove",function(){return r.onRemove()})("keyup.enter",function(){return r.selectFirstElement()}),n.\u0275\u0275element(2,"tag-input-dropdown",2),n.\u0275\u0275elementEnd()),2&t&&(n.\u0275\u0275property("ngModel",r.selectedValues)("onlyFromAutocomplete",!0)("clearOnBlur",!0)("displayBy","label")("identifyBy","value")("placeholder",r.getPlaceholderLabel())("secondaryPlaceholder",r.getPlaceholderLabel())("inputClass",r.getInvalidClass()),n.\u0275\u0275advance(2),n.\u0275\u0275property("displayBy","label")("identifyBy","value")("showDropdownIfEmpty",!0)("keepOpen",!1)("autocompleteItems",r.options))},dependencies:[Un.TagInputComponent,Un.TagInputDropdown,De.NgControlStatus,De.NgModel],encapsulation:2})}return i})();function z4(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275text(1),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(e.field.value)}}function G4(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275text(1),n.\u0275\u0275pipe(2,"formatNumber"),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",n.\u0275\u0275pipeBind1(2,1,e.field.value),"\n")}}let Vc=(()=>{class i extends Dc{userPreferences;systemConfig;typeFormatter;logic;logicDisplay;constructor(e,t,r,o,s){super(e,t,r,o,s),this.userPreferences=e,this.systemConfig=t,this.typeFormatter=r,this.logic=o,this.logicDisplay=s}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(qt),n.\u0275\u0275directiveInject(vt),n.\u0275\u0275directiveInject(ut),n.\u0275\u0275directiveInject(_t),n.\u0275\u0275directiveInject(yt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-int-detail"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:3,vars:4,consts:[[4,"ngIf"]],template:function(t,r){1&t&&(n.\u0275\u0275template(0,z4,2,1,"ng-container",0),n.\u0275\u0275template(1,G4,3,3,"ng-container",0),n.\u0275\u0275pipe(2,"async")),2&t&&(n.\u0275\u0275property("ngIf",!r.format),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.format&&n.\u0275\u0275pipeBind1(2,2,r.vm$)))},dependencies:[F.NgIf,F.AsyncPipe,qu],encapsulation:2})}return i})(),Ub=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Un.TagInputModule,De.FormsModule]})}return i})(),Vb=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Ju]})}return i})(),zb=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule]})}return i})(),id=(()=>{class i extends _n{typeFormatter;logic;logicDisplay;constructor(e,t,r){super(e,t,r),this.typeFormatter=e,this.logic=t,this.logicDisplay=r}ngOnInit(){super.ngOnInit(),this.subscribeValueChanges()}ngOnDestroy(){this.unsubscribeAll()}get rows(){return this.field.metadata&&this.field.metadata.rows?this.field.metadata.rows:6}get cols(){return this.field.metadata&&this.field.metadata.cols?this.field.metadata.cols:20}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(ut),n.\u0275\u0275directiveInject(_t),n.\u0275\u0275directiveInject(yt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-text-edit"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:1,vars:6,consts:[[3,"rows","cols","ngClass","formControl"]],template:function(t,r){1&t&&n.\u0275\u0275element(0,"textarea",0),2&t&&(n.\u0275\u0275classProp("is-invalid",r.field.formControl.invalid&&r.field.formControl.touched),n.\u0275\u0275property("rows",r.rows)("cols",r.cols)("ngClass",r.klass)("formControl",r.field.formControl))},dependencies:[F.NgClass,De.DefaultValueAccessor,De.NgControlStatus,De.FormControlDirective],encapsulation:2})}return i})(),Gb=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,De.FormsModule,pe.NgbDatepickerModule,cn,De.ReactiveFormsModule]})}return i})(),Wb=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,De.FormsModule,De.ReactiveFormsModule]})}return i})();function W4(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"option",4),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&i){const e=a.$implicit,t=n.\u0275\u0275nextContext(2);n.\u0275\u0275classMap(t.getId(e)),n.\u0275\u0275property("ngValue",e.value),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",e.label," ")}}function K4(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,W4,2,5,"option",3),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",e.options)}}let rd=(()=>{class i extends zi{languages;typeFormatter;logic;logicDisplay;formGroup;constructor(e,t,r,o){super(e,t,r,o),this.languages=e,this.typeFormatter=t,this.logic=r,this.logicDisplay=o}ngOnInit(){super.ngOnInit(),this.subscribeValueChanges(),this.record&&this.record.formGroup?this.formGroup=this.record.formGroup:(this.formGroup=new De.UntypedFormGroup({}),this.formGroup.addControl(this.field.name,this.field.formControl))}getId(e){return this.field.name+"-"+e.value}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject($e),n.\u0275\u0275directiveInject(ut),n.\u0275\u0275directiveInject(_t),n.\u0275\u0275directiveInject(yt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-dropdownenum-edit"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:3,vars:2,consts:[[1,"dropdownenum"],[1,"custom-select","custom-select-sm",3,"formControl"],[4,"ngIf"],[3,"class","ngValue",4,"ngFor","ngForOf"],[3,"ngValue"]],template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"div",0)(1,"select",1),n.\u0275\u0275template(2,K4,2,1,"ng-container",2),n.\u0275\u0275elementEnd()()),2&t&&(n.\u0275\u0275advance(1),n.\u0275\u0275property("formControl",r.field.formControl),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.options&&r.options.length))},dependencies:[F.NgForOf,F.NgIf,De.NgSelectOption,De.\u0275NgSelectMultipleOption,De.SelectControlValueAccessor,De.NgControlStatus,De.FormControlDirective],encapsulation:2})}return i})(),Kb=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,De.FormsModule,De.ReactiveFormsModule]})}return i})(),zc=(()=>{class i extends zi{languages;typeFormatter;logic;logicDisplay;constructor(e,t,r,o){super(e,t,r,o),this.languages=e,this.typeFormatter=t,this.logic=r,this.logicDisplay=o}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject($e),n.\u0275\u0275directiveInject(ut),n.\u0275\u0275directiveInject(_t),n.\u0275\u0275directiveInject(yt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-dropdownenum-detail"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,template:function(t,r){1&t&&n.\u0275\u0275text(0),2&t&&n.\u0275\u0275textInterpolate1("\n",r.valueLabel,"\n")},encapsulation:2})}return i})(),Hb=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,De.FormsModule]})}return i})(),Gc=(()=>{class i extends zi{languages;typeFormatter;logic;logicDisplay;constructor(e,t,r,o){super(e,t,r,o),this.languages=e,this.typeFormatter=t,this.logic=r,this.logicDisplay=o}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject($e),n.\u0275\u0275directiveInject(ut),n.\u0275\u0275directiveInject(_t),n.\u0275\u0275directiveInject(yt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-radioenum-detail"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,template:function(t,r){1&t&&n.\u0275\u0275text(0),2&t&&n.\u0275\u0275textInterpolate1("\n",r.valueLabel,"\n")},encapsulation:2})}return i})(),Zb=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,De.FormsModule]})}return i})();function H4(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div"),n.\u0275\u0275element(1,"input",2),n.\u0275\u0275elementStart(2,"label",3),n.\u0275\u0275text(3),n.\u0275\u0275elementEnd()()),2&i){const e=a.$implicit,t=n.\u0275\u0275nextContext();n.\u0275\u0275classMapInterpolate1("form-check radioenum-input ",t.getId(e),""),n.\u0275\u0275classProp("form-check-inline","row"===t.displayDirection),n.\u0275\u0275advance(1),n.\u0275\u0275propertyInterpolate("id",t.getId(e)),n.\u0275\u0275property("checked",t.field.value===e.value)("formControl",t.field.formControl)("value",e.value),n.\u0275\u0275advance(1),n.\u0275\u0275propertyInterpolate("for",t.getId(e)),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",e.label," ")}}let od=(()=>{class i extends zi{languages;typeFormatter;logic;logicDisplay;formGroup;constructor(e,t,r,o){super(e,t,r,o),this.languages=e,this.typeFormatter=t,this.logic=r,this.logicDisplay=o}get displayDirection(){return this.field&&this.field.definition&&this.field.definition.displayDirection?this.field.definition.displayDirection:""}ngOnInit(){super.ngOnInit(),this.subscribeValueChanges(),this.record&&this.record.formGroup?this.formGroup=this.record.formGroup:(this.formGroup=new De.UntypedFormGroup({}),this.formGroup.addControl(this.field.name,this.field.formControl))}getId(e){return this.field.name+"-"+e.value}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject($e),n.\u0275\u0275directiveInject(ut),n.\u0275\u0275directiveInject(_t),n.\u0275\u0275directiveInject(yt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-radioenum-edit"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:2,vars:1,consts:[[1,"radioenum"],[3,"form-check-inline","class",4,"ngFor","ngForOf"],["type","radio",1,"form-check-input",3,"checked","formControl","value","id"],[1,"form-check-label",3,"for"]],template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"div",0),n.\u0275\u0275template(1,H4,4,11,"div",1),n.\u0275\u0275elementEnd()),2&t&&(n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",r.options))},dependencies:[F.NgForOf,De.DefaultValueAccessor,De.RadioControlValueAccessor,De.NgControlStatus,De.FormControlDirective],encapsulation:2})}return i})(),qb=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,De.FormsModule,De.ReactiveFormsModule]})}return i})(),Jb=(()=>{class i extends _n{typeFormatter;logic;logicDisplay;constructor(e,t,r){super(e,t,r),this.typeFormatter=e,this.logic=t,this.logicDisplay=r}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(ut),n.\u0275\u0275directiveInject(_t),n.\u0275\u0275directiveInject(yt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-html-detail"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,consts:[[1,"field-html","text-break",3,"innerHTML"]],template:function(t,r){1&t&&n.\u0275\u0275element(0,"div",0),2&t&&n.\u0275\u0275property("innerHTML",r.field.value,n.\u0275\u0275sanitizeHtml)},encapsulation:2})}return i})(),Qb=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,De.FormsModule]})}return i})(),Wc=(()=>{class i extends _n{typeFormatter;logic;logicDisplay;constructor(e,t,r){super(e,t,r),this.typeFormatter=e,this.logic=t,this.logicDisplay=r}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(ut),n.\u0275\u0275directiveInject(_t),n.\u0275\u0275directiveInject(yt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-password-detail"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:2,vars:0,template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"span"),n.\u0275\u0275text(1,"*****"),n.\u0275\u0275elementEnd())},encapsulation:2})}return i})(),Xb=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule]})}return i})(),ad=(()=>{class i extends _n{typeFormatter;logic;logicDisplay;constructor(e,t,r){super(e,t,r),this.typeFormatter=e,this.logic=t,this.logicDisplay=r}ngOnInit(){super.ngOnInit(),this.subscribeValueChanges()}ngOnDestroy(){this.unsubscribeAll()}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(ut),n.\u0275\u0275directiveInject(_t),n.\u0275\u0275directiveInject(yt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-password-edit"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:1,vars:5,consts:[["type","password",3,"formControl","ngClass","value"]],template:function(t,r){1&t&&n.\u0275\u0275element(0,"input",0),2&t&&(n.\u0275\u0275classProp("is-invalid",r.field.formControl.invalid&&r.field.formControl.touched),n.\u0275\u0275property("formControl",r.field.formControl)("ngClass",r.klass)("value",r.field.value))},dependencies:[F.NgClass,De.DefaultValueAccessor,De.NgControlStatus,De.FormControlDirective],encapsulation:2})}return i})(),Yb=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,De.FormsModule,De.ReactiveFormsModule,Ut]})}return i})(),sd=(()=>{class i extends _n{typeFormatter;logic;config;logicDisplay;settings={};initialValue="";constructor(e,t,r,o){super(e,t,o),this.typeFormatter=e,this.logic=t,this.config=r,this.logicDisplay=o}ngOnInit(){super.ngOnInit(),this.initSettings(),this.initialValue=this.field.value}initSettings(){const r=this.config.getConfigValue("ui")?.tinymce?.detail??{};let s={};s=(0,ie.merge)(s,{toolbar:!1,menubar:!1,readonly:!0,deprecation_warnings:!1},r,this.field?.metadata?.tinymce?.detail??{}),this.settings=s}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(ut),n.\u0275\u0275directiveInject(_t),n.\u0275\u0275directiveInject(vt),n.\u0275\u0275directiveInject(yt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-tinymce-detail"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:1,vars:3,consts:[[1,"field-html","text-break",3,"initialValue","init","disabled"]],template:function(t,r){1&t&&n.\u0275\u0275element(0,"editor",0),2&t&&n.\u0275\u0275property("initialValue",r.initialValue)("init",r.settings)("disabled",!0)},dependencies:[fc],encapsulation:2,changeDetection:0})}return i})(),e1=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({providers:[{provide:gu,useValue:"tinymce/tinymce.min.js"}],imports:[F.CommonModule,De.FormsModule,Xy,De.ReactiveFormsModule]})}return i})(),cd=(()=>{class i extends _n{typeFormatter;logic;logicDisplay;config;settings={};modelEvents="change";ignoreEvents="onKeyDown,onKeyPress,onKeyUp,onSelectionChange";value="";constructor(e,t,r,o){super(e,t,r),this.typeFormatter=e,this.logic=t,this.logicDisplay=r,this.config=o}ngOnInit(){super.ngOnInit(),this.initSettings(),this.subscribeValueChanges(),this.value=this.field.value??""}ngOnDestroy(){this.unsubscribeAll()}initSettings(){const r=this.config.getConfigValue("ui")?.tinymce?.edit??{};let s={};s=(0,ie.merge)(s,{height:300,menubar:!1,deprecation_warnings:!1,plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table paste code help wordcount"],toolbar:"undo redo | formatselect | bold italic backcolor | alignleft aligncenter alignright alignjustify |  bullist numlist outdent indent | removeformat | help",toolbar_mode:"floating"},r,this?.field?.metadata?.tinymce?.edit??{}),this.modelEvents=s?.modelEvents??"change",this.ignoreEvents=s?.ignoreEvents??"onKeyDown,onKeyPress,onKeyUp,onSelectionChange",this.settings=s}setModel(){this.field.formControl.setValue(this.value)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(ut),n.\u0275\u0275directiveInject(_t),n.\u0275\u0275directiveInject(yt),n.\u0275\u0275directiveInject(vt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-tinymce-edit"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:1,vars:4,consts:[[1,"field-html",3,"init","modelEvents","ignoreEvents","formControl"]],template:function(t,r){1&t&&n.\u0275\u0275element(0,"editor",0),2&t&&n.\u0275\u0275property("init",r.settings)("modelEvents",r.modelEvents)("ignoreEvents",r.ignoreEvents)("formControl",r.field.formControl)},dependencies:[De.NgControlStatus,fc,De.FormControlDirective],encapsulation:2,changeDetection:0})}return i})(),t1=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({providers:[{provide:gu,useValue:"tinymce/tinymce.min.js"}],imports:[F.CommonModule,De.FormsModule,Xy,De.ReactiveFormsModule]})}return i})(),ts=(()=>{class i extends _n{typeFormatter;logic;logicDisplay;constructor(e,t,r){super(e,t,r),this.typeFormatter=e,this.logic=t,this.logicDisplay=r}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(ut),n.\u0275\u0275directiveInject(_t),n.\u0275\u0275directiveInject(yt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-icon-detail"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,consts:[[3,"image"]],template:function(t,r){1&t&&n.\u0275\u0275element(0,"scrm-image",0),2&t&&n.\u0275\u0275property("image",r.field.value)},dependencies:[wn],encapsulation:2})}return i})(),n1=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Mn]})}return i})();function Z4(i,a){1&i&&n.\u0275\u0275element(0,"br")}function q4(i,a){1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275text(1," ... "),n.\u0275\u0275elementContainerEnd())}function J4(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",1)(1,"span"),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(3,Z4,1,0,"br",2),n.\u0275\u0275template(4,q4,2,0,"ng-container",2),n.\u0275\u0275elementEnd()),2&i){const e=a.$implicit,t=a.last,r=n.\u0275\u0275nextContext();n.\u0275\u0275property("ngClass",r.klass)("title",r.field.value),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(e),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!t),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t&&r.isTruncated)}}let ld=(()=>{class i extends _n{typeFormatter;logic;logicDisplay;isTruncated=!1;constructor(e,t,r){super(e,t,r),this.typeFormatter=e,this.logic=t,this.logicDisplay=r}truncateValue(e){let r=e.slice(0,50),o=r.split("\n");const c=o.slice(0,3);return this.isTruncated=r.length!==e.length||o.length>3,c}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(ut),n.\u0275\u0275directiveInject(_t),n.\u0275\u0275directiveInject(yt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-text-list"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,consts:[[3,"ngClass","title",4,"ngFor","ngForOf"],[3,"ngClass","title"],[4,"ngIf"]],template:function(t,r){1&t&&n.\u0275\u0275template(0,J4,5,5,"div",0),2&t&&n.\u0275\u0275property("ngForOf",r.truncateValue(r.field.value))},dependencies:[F.NgClass,F.NgForOf,F.NgIf],encapsulation:2})}return i})(),r1=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,De.FormsModule]})}return i})();const o1=[zb,kb,Mb,Xb,Yb,Vb,n1,bb,Cb,Nb,cb,Lb,Gb,pb,fb,gb,$b,db,hb,Tb,Wb,r1,Bb,Ab,Rb,sb,ob,vb,Hb,Kb,Zb,qb,_b,Ub,Ob,Pb,jb,Sb,Qb,e1,t1],a1=[ma,Vu,Hu,Wc,ad,Vc,Zu,Nc,yc,Sc,Ec,xc,Fc,zu,mb,ga,ts,wc,Tc,Uu,id,ld,Oc,td,nd,Mc,Jr,es,zc,rd,Gc,od,Ic,Uc,Cc,ha,$c,Lc,Jb,sd,cd],ud={"varchar.list":ma,"varchar.detail":ma,"varchar.edit":Vu,"varchar.filter":Hu,"password.list":Wc,"password.detail":Wc,"password.edit":ad,"char.list":ma,"char.detail":ma,"int.list":Vc,"int.detail":Vc,"file.detail":Zu,"float.list":Nc,"float.detail":Nc,"phone.list":yc,"phone.detail":yc,"date.list":Sc,"date.detail":Sc,"date.edit":Ec,"date.filter":xc,"datetime.list":Fc,"datetime.detail":Fc,"datetime.edit":zu,"datetime.filter":xc,"url.list":ga,"url.detail":ga,"icon.detail":ts,"icon.edit":ts,"icon.list":ts,"link.list":ga,"link.detail":ga,"currency.list":wc,"currency.detail":wc,"email.list":Tc,"email.detail":Tc,"text.detail":Uu,"text.edit":id,"text.list":ld,"relate.list":Oc,"relate.edit":td,"relate.detail":Oc,"relate.filter":nd,"fullname.list":Mc,"fullname.detail":Mc,"enum-radio.list":Gc,"enum-radio.detail":Gc,"enum-radio.edit":od,"enum-dropdown.list":zc,"enum-dropdown.detail":zc,"enum-dropdown.edit":rd,"enum-chips.list":Jr,"enum-chips.detail":Jr,"enum-chips.edit":es,"enum.list":Jr,"enum.detail":Jr,"enum.edit":es,"enum.filter":Cc,"multienum.list":Ic,"multienum.detail":Ic,"multienum.edit":Uc,"multienum.filter":Cc,"dynamicenum.list":Jr,"dynamicenum.detail":Jr,"dynamicenum.edit":es,"dynamicenum.filter":Uc,"boolean.list":ha,"boolean.detail":ha,"boolean.edit":$c,"boolean.filter":Lc,"bool.list":ha,"bool.detail":ha,"bool.edit":$c,"bool.filter":Lc,"html.detail":sd,"html.edit":cd};class wi{map;fieldMap;constructor(){this.init()}register(a,e,t,r){this.map.addEntry(a,wi.getKey(e,t),r)}registerField(a,e,t,r){this.fieldMap.addEntry(a,wi.getKey(e,t),r)}exclude(a,e){this.map.excludeEntry(a,e)}getDisplayType(a,e,t,r,o){const s=this.getDisplayTypeKey(e,t);return this.hasFieldOverride(a,o,r)?this.getFieldOverride(a,e,r,o):t&&this.has(a,s,r)?this.get(a,s,r,o):this.get(a,e,r,o)}get(a,e,t,r){const o=this.map.getGroupEntries(a);let s=wi.getKey(e,t);return o[s]||"massupdate"===t&&(s=wi.getKey(e,"edit"),o[s])?o[s]:o[wi.getKey("varchar",t)]}getFieldOverride(a,e,t,r){const o=this.fieldMap.getGroupEntries(a);let s=wi.getKey(r,t);return o[s]||"massupdate"===t&&(s=wi.getKey(r,"edit"),o[s])?o[s]:null}has(a,e,t){return!!this.map.getGroupEntries(a)[wi.getKey(e,t)]}hasFieldOverride(a,e,t){return!!this.fieldMap.getGroupEntries(a)[wi.getKey(e,t)]}static getKey(a,e){return a+"."+e}getDisplayTypeKey(a,e){return a&&e?a+"-"+e:""}init(){this.map=new M.OverridableMap,this.fieldMap=new M.OverridableMap,Object.keys(this.getDefaultMap()).forEach(a=>{const[e,t]=a.split(".",2);this.register("default",e,t,this.getDefaultMap()[a])})}getDefaultMap(){return{}}}let Kc=(()=>{class i extends wi{constructor(){super()}getDefaultMap(){return ud}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),s1=(()=>{class i{asyncActionService;constructor(e){this.asyncActionService=e}run(e,t,r){this.asyncActionService.run(e,{payload:{fieldName:t.name??"",fieldValue:t.value??""},record:{id:r.id??"",type:r.type??"",module:r.module??"",favorite:r.favorite??"",attributes:r.attributes??{},acls:r.acls??[]}})}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Yt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const dd=function(i,a,e,t,r){return{mode:i,field:a,klass:e,record:t,parent:r}};function Q4(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"a",1),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(e);const r=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(r.onClick())}),n.\u0275\u0275element(2,"ndc-dynamic",2),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()}if(2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(2),n.\u0275\u0275property("ndcDynamicComponent",e.componentType)("ndcDynamicInputs",n.\u0275\u0275pureFunction5(2,dd,e.mode,e.field,e.klass,e.record,e.parent))}}function X4(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"a",3),n.\u0275\u0275element(2,"ndc-dynamic",2),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("routerLink",e.getLink()),n.\u0275\u0275advance(1),n.\u0275\u0275property("ndcDynamicComponent",e.componentType)("ndcDynamicInputs",n.\u0275\u0275pureFunction5(3,dd,e.mode,e.field,e.klass,e.record,e.parent))}}function Y4(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275element(1,"ndc-dynamic",2),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("ndcDynamicComponent",e.componentType)("ndcDynamicInputs",n.\u0275\u0275pureFunction5(2,dd,e.mode,e.field,e.klass,e.record,e.parent))}}function e5(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,Q4,3,8,"ng-container",0),n.\u0275\u0275template(2,X4,3,9,"ng-container",0),n.\u0275\u0275template(3,Y4,2,8,"ng-container",0),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.hasOnClick()),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.isLink()&&!e.hasOnClick()),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!e.isLink()&&!e.hasOnClick())}}function t5(i,a){1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"div",4),n.\u0275\u0275element(2,"div",5),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd())}const n5=function(i){return{field:i}};function i5(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",7),n.\u0275\u0275element(1,"scrm-dynamic-label",8),n.\u0275\u0275elementEnd()),2&i){const e=a.$implicit,t=n.\u0275\u0275nextContext(3);n.\u0275\u0275advance(1),n.\u0275\u0275property("context",t.getMessageContext(e.value,t.record))("fields",n.\u0275\u0275pureFunction1(3,n5,t.field))("labelKey",t.getMessageLabelKey(e.value))}}function r5(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,i5,2,5,"div",6),n.\u0275\u0275pipe(2,"keyvalue"),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",n.\u0275\u0275pipeBind1(2,1,e.field.formControl.errors))}}function o5(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,r5,3,3,"ng-container",0),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.field.formControl.invalid&&e.field.formControl.touched)}}let ns=(()=>{class i{navigation;moduleNameMapper;router;dynamicLabelService;linkRouteAsyncActionService;cd;mode;type;field;record=null;parent=null;klass=null;componentType;class="dynamic-field";constructor(e,t,r,o,s,c){this.navigation=e,this.moduleNameMapper=t,this.router=r,this.dynamicLabelService=o,this.linkRouteAsyncActionService=s,this.cd=c}get getRelateLink(){let e=this.field.definition.module;if("parent_type"===this.field.definition.type_name&&(e=this.record.attributes.parent_type),this.field.definition.id_name&&e){const t=this.moduleNameMapper.toFrontend(e);return this.navigation.getRecordRouterLink(t,this.record.attributes[this.field.definition.id_name])}return""}ngOnInit(){this.setHostClass(),this.cd.detectChanges()}isLink(){return!(M.EDITABLE_VIEW_MODES.includes(this.mode)||!this.field||!this.record||"relate"!==this.type&&(!this?.field?.metadata||!this?.field?.metadata?.link))}hasOnClick(){const e=this?.field?.metadata??{};return!(!e?.linkAsyncAction&&!e?.onClick)}isEdit(){return"edit"===this.mode||"filter"===this.mode}getLink(){if("relate"===this.type)return this.getRelateLink;const e=this?.field?.metadata??null,t=e.linkRoute??null;return e&&t?this.dynamicLabelService.parse(t,{},this.record.fields):this.navigation.getRecordRouterLink(this.record.module,this.record.id)}getMessageContext(e,t){const r=e&&e.message&&e.message.context||{};return r.module=t&&t.module||"",r}getMessageLabelKey(e){return e&&e.message&&e.message.labelKey||""}onClick(){const e=this?.field?.metadata??null;if(e&&e.onClick)return void this.field.metadata.onClick(this.field,this.record);const t=e.linkAsyncAction??null;if(!e||!t)return this.router.navigateByUrl(this.getLink()).then(),!1;this.linkRouteAsyncActionService.run(t,this.field,this.record)}setHostClass(){const e=[];e.push("dynamic-field"),this.mode&&e.push("dynamic-field-mode-"+this.mode),this.type&&e.push("dynamic-field-type-"+this.type),this.field&&this.field.name&&e.push("dynamic-field-name-"+this.field.name),this.class=e.join(" ")}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(Rn),n.\u0275\u0275directiveInject(Tn),n.\u0275\u0275directiveInject(Rt.Router),n.\u0275\u0275directiveInject(hc),n.\u0275\u0275directiveInject(s1),n.\u0275\u0275directiveInject(n.ChangeDetectorRef))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-dynamic-field"]],hostVars:2,hostBindings:function(t,r){2&t&&n.\u0275\u0275classMap(r.class)},inputs:{mode:"mode",type:"type",field:"field",record:"record",parent:"parent",klass:"klass",componentType:"componentType"},decls:3,vars:3,consts:[[4,"ngIf"],[1,"clickable","field-link",3,"click"],[3,"ndcDynamicComponent","ndcDynamicInputs"],[1,"field-link",3,"routerLink"],[1,"dynamic-field"],[1,"flex-grow-1","text-break","rounded","box-loading","skeleton-field-content"],["class","invalid-feedback d-block",4,"ngFor","ngForOf"],[1,"invalid-feedback","d-block"],[3,"context","fields","labelKey"]],template:function(t,r){1&t&&(n.\u0275\u0275template(0,e5,4,3,"ng-container",0),n.\u0275\u0275template(1,t5,3,0,"ng-container",0),n.\u0275\u0275template(2,o5,2,1,"ng-container",0)),2&t&&(n.\u0275\u0275property("ngIf",!r.field.loading),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.field.loading),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.isEdit()&&r.field.formControl&&r.field.formControl.errors))},dependencies:[F.NgForOf,F.NgIf,Rt.RouterLink,vo,Pt,Bt,F.KeyValuePipe],encapsulation:2})}return i})();function a5(i,a){1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275element(1,"scrm-label",1),n.\u0275\u0275elementContainerEnd())}function s5(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"span",7)(1,"label"),n.\u0275\u0275element(2,"scrm-label",8),n.\u0275\u0275elementEnd()()),2&i){const e=n.\u0275\u0275nextContext(2).$implicit,t=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(2),n.\u0275\u0275property("labelKey",e.labelKey)("module",t.getModule())}}function c5(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"span",9),n.\u0275\u0275element(1,"scrm-dynamic-field",10),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext(2).$implicit,t=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("componentType",t.getComponentType(e.type,e.definition))("field",e)("klass",t.klass)("mode",t.mode)("record",t.record)("parent",t.parent)("type",e.type)}}function l5(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",4),n.\u0275\u0275template(1,s5,3,2,"span",5),n.\u0275\u0275template(2,c5,2,7,"span",6),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext().$implicit,t=n.\u0275\u0275nextContext(2);n.\u0275\u0275classProp("flex-fill","edit"===t.mode&&"flex-row"===t.getDirection()),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.labelKey&&t.showLabel(e.definition.name)),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.type)}}function u5(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,l5,3,4,"div",3),n.\u0275\u0275elementContainerEnd()),2&i){const e=a.$implicit,t=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.isModeEnabled(t.mode,e))}}function d5(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"div"),n.\u0275\u0275template(2,u5,2,1,"ng-container",2),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275classMapInterpolate1("d-flex ",e.getDirection()," justify-content-start align-items-start field-group h-100"),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",e.getFields())}}let ba=(()=>{class i extends _n{typeFormatter;registry;logic;logicDisplay;constructor(e,t,r,o){super(e,r,o),this.typeFormatter=e,this.registry=t,this.logic=r,this.logicDisplay=o}getComponentType(e,t){return this.registry.getDisplayType(this.record&&this.record.module||"default",e,t&&t.displayType||"",this.mode,this.field.name)}getFields(){const e=[];return this.field.definition.layout.forEach(t=>{!this.record.fields[t]||"none"===this.record.fields[t].display||e.push(this.record.fields[t])}),e}getModule(){return this.record?this.record.module:null}getDirection(){let e="flex-column";return"inline"===this.field.definition.display&&(e="flex-row"),e}isConfigured(){return this.hasDisplay()&&this.hasLayout()&&this.hasGroupFields()}showLabel(e){const t=this.field.definition||null;if(!t||!t.showLabel)return!1;const o=t.showLabel[this.mode]||null;return!(!o||typeof o>"u")&&(o.includes("*")||o.includes(e))}isModeEnabled(e,t){const r=t.definition.modes;return!r||r.length<1||r.includes(e)}hasGroupFields(){return!(!this.field.definition.groupFields||!Object.keys(this.field.definition.groupFields).length)}hasLayout(){return!(!this.field.definition.layout||!this.field.definition.layout.length)}hasDisplay(){return!!this.field.definition.display}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(ut),n.\u0275\u0275directiveInject(Kc),n.\u0275\u0275directiveInject(_t),n.\u0275\u0275directiveInject(yt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-group-field"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:2,vars:2,consts:[[4,"ngIf"],["labelKey","LBL_BAD_GROUP_FIELD_CONFIG"],[4,"ngFor","ngForOf"],["class","field-group-item d-flex flex-column justify-content-end h-100 w-100",3,"flex-fill",4,"ngIf"],[1,"field-group-item","d-flex","flex-column","justify-content-end","h-100","w-100"],["class","field-group-label pt-2 pr-1",4,"ngIf"],["class","field-group-field pr-1",4,"ngIf"],[1,"field-group-label","pt-2","pr-1"],[3,"labelKey","module"],[1,"field-group-field","pr-1"],[3,"componentType","field","klass","mode","record","parent","type"]],template:function(t,r){1&t&&(n.\u0275\u0275template(0,a5,2,0,"ng-container",0),n.\u0275\u0275template(1,d5,3,4,"ng-container",0)),2&t&&(n.\u0275\u0275property("ngIf",!r.isConfigured()),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.isConfigured()))},dependencies:[F.NgForOf,F.NgIf,zt,ns],encapsulation:2})}return i})(),is=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Rt.RouterModule,_o,gt]})}return i})(),c1=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Ut,is]})}return i})();const l1=i=>a=>{const e=De.Validators.min(i)(a);return null===e?null:{emailValidator:{...e,message:{labelKey:"LBL_VALIDATION_ERROR_MIN",context:{value:a.value,min:""+i}}}}},u1=i=>a=>{const e=De.Validators.max(i)(a);return null===e?null:{emailValidator:{...e,message:{labelKey:"LBL_VALIDATION_ERROR_MAX",context:{value:a.value,max:""+i}}}}};let d1=(()=>{class i{applies(e,t){return!(!t||!t.fieldDefinition)&&null!==this.getRangeValidation(t.fieldDefinition)}getValidator(e){if(!e||!e.fieldDefinition)return[];const t=this.getRangeValidation(e.fieldDefinition);if(!t)return[];const r=t.min&&parseInt(""+t.min,10),o=t.max&&parseInt(""+t.max,10),s=[];return isFinite(r)&&s.push(l1(r)),isFinite(o)&&s.push(u1(o)),s}getRangeValidation(e){if(this.isRangeValidation(e.validation))return e.validation;if(!e.validations||!e.validations.length)return null;let t=null;return e.validations.some(r=>(t=r,this.isRangeValidation(r))),t}isRangeValidation(e){return e&&"range"===e.type}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const f1=i=>a=>i.validateFloatUserFormat(a.value)?{currencyValidator:{valid:!1,format:i.getFloatUserFormatPattern(),message:{labelKey:"LBL_VALIDATION_ERROR_CURRENCY_FORMAT",context:{value:a.value,expected:i.toUserFormat("1000.50")}}}}:null;let p1=(()=>{class i{formatter;constructor(e){this.formatter=e}applies(e,t){return!(!t||!t.fieldDefinition)&&"currency"===t.type}getValidator(e){return e&&e.fieldDefinition?[f1(this.formatter)]:[]}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(ho))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const m1=(i,a)=>e=>i.validateUserFormat(e.value,a)?{invalidDate:{value:e.value,message:{labelKey:"LBL_VALIDATION_ERROR_DATE_FORMAT",context:{value:e.value,expected:i.toUserFormat("2020-01-23")}}}}:null;let g1=(()=>{class i{formatter;utils;constructor(e,t){this.formatter=e,this.utils=t}applies(e,t){return!(!t||!t.fieldDefinition)&&"date"===t.type}getValidator(e){return e&&e.fieldDefinition?[m1(this.formatter,e?.metadata?.date_time_format||"")]:[]}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Hr),n.\u0275\u0275inject(go))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const h1=i=>a=>i.validateUserFormat(a.value)?{dateTimeValidator:{value:a.value,message:{labelKey:"LBL_VALIDATION_ERROR_DATETIME_FORMAT",context:{value:a.value,expected:i.toUserFormat("2020-01-23 12:30:40")}}}}:null;let v1=(()=>{class i{formatter;constructor(e){this.formatter=e}applies(e,t){return!(!t||!t.fieldDefinition)&&"datetime"===t.type}getValidator(e){return e&&e.fieldDefinition?[h1(this.formatter)]:[]}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Er))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),_1=(()=>{class i{formUtils;constructor(e){this.formUtils=e}toUserFormat(e){return e}toInternalFormat(e){return e}getUserFormatPattern(){return/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/}validateUserFormat(e){const t=this.formUtils.getTrimmedInputValue(e);return!this.formUtils.isEmptyInputValue(t)&&!new RegExp(this.getUserFormatPattern()).test(t)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(go))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const y1=i=>a=>i.validateUserFormat(a.value)?{emailValidator:{valid:!1,format:i.getUserFormatPattern(),message:{labelKey:"LBL_VALIDATION_ERROR_EMAIL_FORMAT",context:{value:a.value,expected:"example@example.org"}}}}:null;let b1=(()=>{class i{formatter;constructor(e){this.formatter=e}applies(e,t){return!(!t||!t.fieldDefinition)&&"email"===t.type}getValidator(e){return e&&e.fieldDefinition?[y1(this.formatter)]:[]}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(_1))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const C1=i=>a=>i.validateFloatUserFormat(a.value)?{floatValidator:{valid:!1,format:i.getFloatUserFormatPattern(),message:{labelKey:"LBL_VALIDATION_ERROR_FLOAT_FORMAT",context:{value:a.value,expected:i.toUserFormat("1000.50")}}}}:null;let M1=(()=>{class i{formatter;constructor(e){this.formatter=e}applies(e,t){return!(!t||!t.fieldDefinition)&&"float"===t.type}getValidator(e){return e&&e.fieldDefinition?[C1(this.formatter)]:[]}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(ho))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const S1=i=>a=>i.validateIntUserFormat(a.value)?{intValidator:{valid:!1,format:i.getIntUserFormatPattern(),message:{labelKey:"LBL_VALIDATION_ERROR_INT_FORMAT",context:{value:a.value,expected:i.toUserFormat("1000")}}}}:null;let D1=(()=>{class i{formatter;constructor(e){this.formatter=e}applies(e,t){return!(!t||!t.fieldDefinition)&&"int"===t.type}getValidator(e){return e&&e.fieldDefinition?[S1(this.formatter)]:[]}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(ho))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const w1=i=>a=>i.validateUserFormat(a.value)?{phoneValidator:{valid:!1,format:i.getUserFormatPattern(),message:{labelKey:"LBL_VALIDATION_ERROR_PHONE_FORMAT",context:{value:a.value}}}}:null;let E1=(()=>{class i{formatter;constructor(e){this.formatter=e}applies(e,t){return!(!t||!t.fieldDefinition)&&"phone"===t.type}getValidator(e){return e&&e.fieldDefinition?[w1(this.formatter)]:[]}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Au))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const x1=(i,a)=>e=>{const t=i.name||"";if(!t||!a||!a.fields)return null;const r=a.fields[t]||{},o=r.items;if(!r||!o||!o.length)return null;let s=0;const c=o.filter(l=>!(l&&l.attributes&&l.attributes.deleted));return c&&c.length<1||(c.some(l=>{const u=l.fields&&l.fields["email-fields"]||{},d=u.attributes&&u.attributes.primary_address||null;return!!d&&((0,M.isTrue)(d.value)&&s++,s>1)}),1==s)?null:0==s?{primaryEmailValidation:{valid:!1,message:{labelKey:"LBL_NO_PRIMARY_EMAIL_VALIDATION_ERROR",context:{}}}}:{primaryEmailValidation:{valid:!1,message:{labelKey:"LBL_MULTIPLE_PRIMARY_EMAIL_VALIDATION_ERROR",context:{}}}}};let F1=(()=>{class i{constructor(){}applies(e,t){return!(!t||!t.fieldDefinition)&&("line-items"===(t.type||t.fieldDefinition.type||"")&&"email_addresses"===(t.name||t.fieldDefinition.name||""))}getValidator(e,t){return e&&e.fieldDefinition&&t?[x1(e,t)]:[]}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const I1=(i,a)=>e=>{const t=i.name||"";if(!t||!a||!a.fields)return null;const r=a.fields[t]||{},o=r.items;if(!r||!o||!o.length)return null;const s={};let c=0;const l=o.filter(u=>!(u&&u.attributes&&u.attributes.deleted));return l&&l.length<1||(l.some(u=>{const d=u.fields&&u.fields["email-fields"]||{},f=d.attributes&&d.attributes.email_address||null;if(!f.value)return!1;const p=(""+f.value).toUpperCase();return s[p]?(c++,!0):(s[p]=!0,c>1)}),0==c)?null:{duplicateEmailValidation:{valid:!1,message:{labelKey:"LBL_DUPLICATE_EMAIL_VALIDATION_ERROR",context:{}}}}};let A1=(()=>{class i{constructor(){}applies(e,t){return!(!t||!t.fieldDefinition)&&("line-items"===(t.type||t.fieldDefinition.type||"")&&"email_addresses"===(t.name||t.fieldDefinition.name||""))}getValidator(e,t){return e&&e.fieldDefinition&&t?[I1(e,t)]:[]}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Do=(()=>{class i{requiredValidator;rangeValidator;currencyValidator;dateValidator;datetimeValidator;emailValidator;floatValidator;intValidator;phoneValidator;primaryEmailValidator;duplicateEmailValidator;saveValidators;asyncSaveValidators;filterValidators;filterFieldExclusion={default:{}};saveFieldExclusions={default:{}};constructor(e,t,r,o,s,c,l,u,d,f,p){this.requiredValidator=e,this.rangeValidator=t,this.currencyValidator=r,this.dateValidator=o,this.datetimeValidator=s,this.emailValidator=c,this.floatValidator=l,this.intValidator=u,this.phoneValidator=d,this.primaryEmailValidator=f,this.duplicateEmailValidator=p,this.saveValidators=new M.OverridableMap,this.asyncSaveValidators=new M.OverridableMap,this.filterValidators=new M.OverridableMap,this.saveValidators.addEntry("default",this.getKey("required","all"),e),this.saveValidators.addEntry("default",this.getKey("range","all"),t),this.saveValidators.addEntry("default",this.getKey("currency","all"),r),this.saveValidators.addEntry("default",this.getKey("date","all"),o),this.saveValidators.addEntry("default",this.getKey("datetime","all"),s),this.saveValidators.addEntry("default",this.getKey("email","all"),c),this.saveValidators.addEntry("default",this.getKey("float","all"),l),this.saveValidators.addEntry("default",this.getKey("int","all"),u),this.saveValidators.addEntry("default",this.getKey("phone","all"),d),this.saveValidators.addEntry("default",this.getKey("primary-email","all"),f),this.saveValidators.addEntry("default",this.getKey("duplicate-email","all"),p),this.filterValidators.addEntry("default",this.getKey("date","all"),o),this.filterValidators.addEntry("default",this.getKey("datetime","all"),s),this.filterValidators.addEntry("default",this.getKey("float","all"),l),this.filterValidators.addEntry("default",this.getKey("currency","all"),r),this.filterValidators.addEntry("default",this.getKey("int","all"),u),this.filterValidators.addEntry("default",this.getKey("phone","all"),d)}registerFieldSaveValidator(e,t,r,o){this.saveValidators.addEntry(e,this.getKey(t,r),o)}registerSaveValidator(e,t,r){this.saveValidators.addEntry(e,this.getKey(t,"all"),r)}registerFieldFilterValidator(e,t,r,o){this.filterValidators.addEntry(e,this.getKey(t,r),o)}registerFilterValidator(e,t,r){this.filterValidators.addEntry(e,this.getKey(t,"all"),r)}excludeFieldSaveValidator(e,t,r){const o=this.saveFieldExclusions[e]||{},s=this.getKey(t,r);o[s]=s,this.saveFieldExclusions[e]=o}excludeSaveValidator(e,t){this.saveValidators.excludeEntry(e,this.getKey(t,"all"))}excludeFieldFilterValidator(e,t,r){const o=this.filterFieldExclusion[e]||{},s=this.getKey(t,r);o[s]=s,this.filterFieldExclusion[e]=o}excludeFilterValidator(e,t){this.filterValidators.excludeEntry(e,this.getKey(t,"all"))}registerAsyncSaveValidator(e,t,r){this.asyncSaveValidators.addEntry(e,this.getKey(t,"all"),r)}excludeAsyncSaveValidator(e,t){this.saveValidators.excludeEntry(e,this.getKey(t,"all"))}getSaveValidations(e,t,r){const o=this.saveValidators.getGroupEntries(e),s=this.getExclusions(e,this.saveFieldExclusions);return this.filterValidations(o,s,r,t)}getFilterValidations(e,t,r){const o=this.filterValidators.getGroupEntries(e),s=this.getExclusions(e,this.filterFieldExclusion);return this.filterValidations(o,s,r,t)}getAsyncSaveValidations(e,t,r){const o=[],s=this.asyncSaveValidators.getGroupEntries(e);return Object.keys(s).forEach(c=>{const l=s[c];l.applies(r,t)&&o.push(l.getValidator(t,r))}),o}getKey(e,t){return`${e}.${t}`}parseType(e){return(e.split(".")||[])[0]||""}getExclusions(e,t){return{...t.default||{},...t[e]||{}}}filterValidations(e,t,r,o){let s=[];return Object.keys(e).forEach(c=>{const l=this.getKey(this.parseType(c),o.name);if(t[c]||t[l])return;const u=e[c];u.applies(r,o)&&(s=s.concat(u.getValidator(o,r)))}),s}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(ju),n.\u0275\u0275inject(d1),n.\u0275\u0275inject(p1),n.\u0275\u0275inject(g1),n.\u0275\u0275inject(v1),n.\u0275\u0275inject(b1),n.\u0275\u0275inject(M1),n.\u0275\u0275inject(D1),n.\u0275\u0275inject(E1),n.\u0275\u0275inject(F1),n.\u0275\u0275inject(A1))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),rs=(()=>{class i{validationManager;typeFormatter;constructor(e,t){this.validationManager=e,this.typeFormatter=t}buildField(e,t,r=null){const o=t&&t.fieldDefinition||{},{value:s,valueList:c,valueObject:l}=this.parseValue(t,o,e),{validators:u,asyncValidators:d}=this.getSaveValidators(e,t);return this.setupField(e.module,t,s,c,l,e,o,u,d,r)}getFieldLabel(e,t,r){const o=r.getLanguageStrings();return r.getFieldLabel(e,t,o)}parseValue(e,t,r){const o=e&&e.type||"",c=t&&t.rname||"name",l=e.name||"";let u=null,d=null;if(l&&r.attributes[l]){if("relate"===o&&"non-db"===(t&&t.source||"")&&""!==c)return u=r.attributes[l][c],{value:u,valueList:d,valueObject:r.attributes[l]};u=r.attributes[l]}else u="";return"line-items"===o?{value:null,valueList:d}:(Array.isArray(u)&&(d=u,u=null),!u&&t.default?u=t.default:null===u&&(u=""),{value:u,valueList:d})}setupField(e,t,r,o,s,c,l,u,d,f){const p=(0,ie.merge)(l?.metadata??{},t?.metadata??{}),m=this.typeFormatter.toUserFormat(t.type,r,{mode:"edit",metadata:p});t.link&&(p.link=t.link);const h=new M.BaseField;h.type=t.type||l.type,h.name=t.name||l.name||"",h.vardefBased=t?.vardefBased??l?.vardefBased??!1,h.readonly=(0,M.isTrue)(t.readonly)||(0,M.isTrue)(l.readonly)||!1,h.display=t.display||l.display||"default",h.defaultDisplay=h.display,"default"===h.defaultDisplay&&(h.defaultDisplay="show"),h.value=r,h.metadata=p,h.definition=l,t?.lineItems&&(h.definition.lineItems=t.lineItems),h.labelKey=t.label||l.vname||"",h.dynamicLabelKey=t.dynamicLabelKey||l.dynamicLabelKey||"",h.validators=u,h.asyncValidators=d,"line-items"===h.type?(h.valueObjectArray=c.attributes[h.name],h.itemFormArray=new De.UntypedFormArray([]),h.formControl=new De.UntypedFormControl(m)):h.formControl=new De.UntypedFormControl(m),h.attributes={},h.source="field",h.logic=t.logic||l.logic||null,h.displayLogic=t.displayLogic||l.displayLogic||null;const g={},b={};return this.addFieldDependencies(h.logic,g,b,"logic"),this.addFieldDependencies(h.displayLogic,g,b,"displayLogic"),h.attributeDependencies=Object.keys(b).map(_=>b[_]),h.fieldDependencies=g,o&&(h.valueList=o),s&&(h.valueObject=s),f&&(h.label=this.getFieldLabel(t.label,e,f)),!h.labelKey&&t.label&&(h.labelKey=t.label),h}addFieldDependencies(e,t,r,o){e&&Object.keys(e).length&&Object.keys(e).forEach(s=>{const c=e[s]||{};c.params&&(c.params&&c.params.attributeDependencies&&c.params.attributeDependencies.forEach(l=>{r[l.field+"."+l.attribute]=l}),c.params&&c.params.fieldDependencies&&c.params.fieldDependencies.forEach(l=>{const d=(t[l]??{}).types??[];d.push(o),t[l]={field:l,type:d}}))})}getSaveValidators(e,t){return{validators:this.validationManager.getSaveValidations(e.module,t,e),asyncValidators:this.validationManager.getAsyncSaveValidations(e.module,t,e)}}getParentValue(e,t,r,o){const s=o.valueParent??"field";return o.valuePath?(0,et.Z)("record"===s?e:t,o.valuePath,""):(0,et.Z)("record"===s?e.attributes:t.valueObject,r,"")}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Do),n.\u0275\u0275inject(ut))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),T1=(()=>{class i extends rs{validationManager;typeFormatter;constructor(e,t){super(e,t),this.validationManager=e,this.typeFormatter=t}addGroupFields(e,t,r,o,s,c){const u=(t&&t.fieldDefinition||{}).groupFields||{};Object.keys(u).forEach(f=>{const p=u[f];if(o(e,f))return;p&&"relate"===p.type&&"parent_type"===p.type_name&&(p.module=e.attributes.parent_type);const h=s(e,{name:p.name,label:p.vname,type:p.type,fieldDefinition:p},r);h.source="groupField",c(e,p.name,h)})}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Do),n.\u0275\u0275inject(ut))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),fd=(()=>{class i extends rs{validationManager;typeFormatter;constructor(e,t){super(e,t),this.validationManager=e,this.typeFormatter=t}addAttributes(e,t,r,o,s,c){const l=Object.keys(t)||[];l.length<1||l.forEach(u=>{this.addFieldAttributes(e,t[u],o,s,c)})}addFieldAttributes(e,t,r,o,s){const l=(t&&t.definition||{}).attributeFields||{};Object.keys(l).forEach(d=>{const f=l[d];if(t.attributes[d])return;const m=o(e,t,{name:f.name,label:f.vname,type:f.type,fieldDefinition:f},r);s(e,t,f.name,m)})}buildAttribute(e,t,r,o=null){const s=r&&r.fieldDefinition||{},{value:c,valueList:l,valueObject:u}=this.parseAttributeValue(r,s,e,t),{validators:d,asyncValidators:f}=this.getSaveValidators(e,r),m=this.setupField(e.module,r,c,l,u,e,s,d,f,o);return m.valuePath=s.valuePath,m.valueParent=s.valueParent,m.source="attribute",m.parentKey=t.name,m}addAttributeToRecord(e,t,r,o){!e||!r||!t||!o||(t.attributes=t.attributes||{},t.attributes[r]=o,e.formGroup&&o.formControl&&e.formGroup.addControl(r,o.formControl))}parseAttributeValue(e,t,r,o){const l=t&&t.rname||"name",u=e.name||"";let d;return"relate"===(e&&e.type||"")&&"non-db"===(t&&t.source||"")&&""!==l?(d=this.getParentValue(r,o,u,t)[l],{value:d,valueList:null,valueObject:this.getParentValue(r,o,u,t)}):(d=u?this.getParentValue(r,o,u,t):"",d=this.getParentValue(r,o,u,t),Array.isArray(d)?{value:null,valueList:d,valueObject:null}:(0,Yy.Z)(d)?{value:null,valueList:null,valueObject:d}:{value:d,valueList:null,valueObject:null})}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Do),n.\u0275\u0275inject(ut))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),pd=(()=>{class i extends rs{validationManager;typeFormatter;constructor(e,t){super(e,t),this.validationManager=e,this.typeFormatter=t}buildFilterField(e,t,r=null){const o=t&&t.fieldDefinition||{},{validators:s,asyncValidators:c}=this.getFilterValidators(e,t),l=this.setupField(e.searchModule,t,null,null,null,e,o,s,c,r);return l.criteria=this.initFieldFilter(e.criteria,t,l),l}getFilterValidators(e,t){return{validators:this.validationManager.getFilterValidations(e.searchModule,t,e),asyncValidators:[]}}initFieldFilter(e,t,r){let o;const s=t.name;let c=t.type;return"composite"===c&&(c=r.definition.type),o=e.filters[s]&&e.filters[s].fieldType?(0,M.deepClone)(e.filters[s]):{field:s,fieldType:c,operator:"",values:[]},o}isCriteriaFieldInitialized(e,t){const r=e.criteriaFields[t];return!!r&&!r.vardefBased}addToSavedFilter(e,t,r){!e||!t||!r||(e.criteriaFields||(e.criteriaFields={}),e.criteriaFields[t]=r,e.criteria.filters||(e.criteria.filters={}),e.criteria.filters[t]=r.criteria,e.criteriaFormGroup&&r.formControl&&e.criteriaFormGroup.addControl(t,r.formControl))}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Do),n.\u0275\u0275inject(ut))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),N1=(()=>{class i extends pd{validationManager;typeFormatter;constructor(e,t){super(e,t),this.validationManager=e,this.typeFormatter=t}buildFilterAttribute(e,t,r,o=null){const s=r&&r.fieldDefinition||{};s.valuePath||(s.valuePath="criteria."+(r.name||s.name));const{value:c,valueList:l,valueObject:u}=this.parseFilterAttributeValue(r,s,e,t),{validators:d,asyncValidators:f}=this.getFilterValidators(e,r),m=this.setupField(e.searchModule,r,c,l,u,e,s,d,f,o);return m.valuePath=s.valuePath,m.source="attribute",m.parentKey=t.definition.name,m}addAttributeToSavedFilter(e,t,r,o){!e||!r||!t||!o||(t.attributes=t.attributes||{},t.attributes[r]=o,e.criteriaFormGroup&&o.formControl&&e.criteriaFormGroup.addControl(r,o.formControl))}parseFilterAttributeValue(e,t,r,o){const s=e.name||"";let c;return c=s?this.getParentValue(r,o,s,t):"",Array.isArray(c)?{value:null,valueList:c,valueObject:null}:(0,Yy.Z)(c)?{value:null,valueList:null,valueObject:c}:{value:c,valueList:null,valueObject:null}}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Do),n.\u0275\u0275inject(ut))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),L1=(()=>{class i extends fd{validationManager;typeFormatter;constructor(e,t){super(e,t),this.validationManager=e,this.typeFormatter=t}addLineItems(e,t,r,o,s){const c=Object.keys(t)||[];c.length<1||c.forEach(l=>{this.addFieldLineItems(e,t[l],o,s)})}addFieldLineItems(e,t,r,o){const s=t&&t.definition||{},l=t.valueObjectArray&&t.valueObjectArray||[];if("line-items"!==(t&&t.type||"")||!l.length)return;const u=s.lineItems?.definition||{};t.items=[],l.forEach(d=>{this.addLineItem(u,d,o,r,e,t)})}addLineItem(e,t,r,o,s,c){const l={name:e.name,label:e.vname,type:e.type,fieldDefinition:(0,M.deepClone)(e)},u={id:t.id||"",type:t.type||"",module:t.module||"",attributes:t.attributes||{},fields:{},formGroup:new De.UntypedFormGroup({})};r(u,l,o),c.itemFormArray.push(u.formGroup),c.items.push(u)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Do),n.\u0275\u0275inject(ut))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),di=(()=>{class i{fieldBuilder;groupFieldBuilder;attributeBuilder;filterFieldBuilder;filterAttributeBuilder;lineItemBuilder;languageStore;constructor(e,t,r,o,s,c,l){this.fieldBuilder=e,this.groupFieldBuilder=t,this.attributeBuilder=r,this.filterFieldBuilder=o,this.filterAttributeBuilder=s,this.lineItemBuilder=c,this.languageStore=l}buildShallowField(e,t){return{type:e,value:t,definition:{type:e}}}addField(e,t,r=null){const o=this.fieldBuilder.buildField(e,t,r);return this.addToRecord(e,t.name,o),this.groupFieldBuilder.addGroupFields(e,t,r,this.isFieldInitialized.bind(this),this.fieldBuilder.buildField.bind(this.fieldBuilder),this.addToRecord.bind(this)),this.attributeBuilder.addAttributes(e,e.fields,t,r,this.attributeBuilder.buildAttribute.bind(this.attributeBuilder),this.attributeBuilder.addAttributeToRecord.bind(this.attributeBuilder)),this.lineItemBuilder.addLineItems(e,e.fields,t,r,this.addField.bind(this)),o}addFilterField(e,t,r=null){if(t.vardefBased&&!(0,ie.isEmpty)(e.criteriaFields[t.name]))return e.criteriaFields[t.name];const o=this.filterFieldBuilder.buildFilterField(e,t,r);return this.filterFieldBuilder.addToSavedFilter(e,t.name,o),this.groupFieldBuilder.addGroupFields(e,t,r,this.filterFieldBuilder.isCriteriaFieldInitialized.bind(this.filterFieldBuilder),this.filterFieldBuilder.buildFilterField.bind(this.filterFieldBuilder),this.filterFieldBuilder.addToSavedFilter.bind(this.filterFieldBuilder)),this.attributeBuilder.addAttributes(e,e.criteriaFields,t,r,this.filterAttributeBuilder.buildFilterAttribute.bind(this.filterAttributeBuilder),this.filterAttributeBuilder.addAttributeToSavedFilter.bind(this.filterAttributeBuilder)),o}addLineItem(e,t,r,o=null){o||(o={id:"",module:r.definition.module||"",attributes:{},fields:{},formGroup:new De.UntypedFormGroup({})}),this.lineItemBuilder.addLineItem(e,o,this.addField.bind(this),this.languageStore,t,r),r.itemFormArray.updateValueAndValidity()}removeLineItem(e,t){const r=e.items[t];r&&(r.id?r.attributes.deleted=1:e.items=t>-1?[...e.items.slice(0,t),...e.items.slice(t+1)]:e.items,e.itemFormArray.clear(),e.items.forEach(o=>{!o||o&&o.attributes&&o.attributes.deleted||e.itemFormArray.push(o.formGroup)}),e.itemFormArray.updateValueAndValidity())}addToRecord(e,t,r){!e||!t||!r||(e.fields||(e.fields={}),e.fields[t]=r,e.formGroup&&r.itemFormArray&&e.formGroup.addControl(t+"-items",r.itemFormArray),e.formGroup&&r.formControl&&e.formGroup.addControl(t,r.formControl))}addVardefOnlyField(e,t,r=null){const o=this.fieldBuilder.buildField(e,t,r);return this.addVardefOnlyFieldToRecord(e,t.name,o),o}addVardefOnlyFieldToRecord(e,t,r){!e||!t||!r||(e.fields||(e.fields={}),e.fields[t]=r)}isFieldInitialized(e,t){return!!e.fields[t]}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(rs),n.\u0275\u0275inject(T1),n.\u0275\u0275inject(fd),n.\u0275\u0275inject(pd),n.\u0275\u0275inject(N1),n.\u0275\u0275inject(L1),n.\u0275\u0275inject($e))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),_i=(()=>{class i{fieldManager;language;constructor(e,t){this.fieldManager=e,this.language=t}buildEmptyRecord(e){return{id:"",module:e,attributes:{id:""},fields:{},formGroup:new De.UntypedFormGroup({})}}initFields(e,t){return e.fields||(e.fields={}),e.formGroup||(e.formGroup=new De.UntypedFormGroup({})),t.forEach(r=>{r&&r.name&&!e.fields[r.name]&&(r?.vardefBased?this.fieldManager.addVardefOnlyField(e,r,this.language):this.fieldManager.addField(e,r,this.language))}),e.fields}injectParamFields(e,t,r){Object.keys(e).forEach(o=>{const s=r[o];if((0,M.isVoid)(s))this.handleLinkTypeRelationship(o,e,r,t);else{const c=s.type||"";let l=s.id_name||"",d=s.rname||"";if("relate"===c&&l===(s.name||""))return void(t.attributes[o]=e[o]);if("parent"===c){const f={};let p="name",m="parent_id";const b=(r[o+"-group"]??{}).groupFields[o];return b&&b.rname&&(p=b.rname),p&&(f[p]=e[o]),m&&e[m]&&(f.id=e[m]),void(t.attributes[o]=f)}if("relate"===c){const f={};return d&&(f[d]=e[o]),l&&e[l]&&(f.id=e[l]),void(t.attributes[o]=f)}t.attributes[o]=e[o]}})}handleLinkTypeRelationship(e,t,r,o){if("return_relationship"===e){const s=t.return_relationship;if(!s)return;Object.keys(r).forEach(c=>{const l=r[c];if("link"!==(l.type||""))return;const d=l.relationship||"";if(d&&d===s){const f=l.name,p=l.module??t.return_module??"";if(!p)return;const m=t.parent_name;if(!m)return;const h=l?.relationshipMetadata?.related_id,g=t[h]??"";if(!g)return;o.attributes[f]=[{id:g,module:p,attributes:{id:g,name:m}}]}})}}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(di),n.\u0275\u0275inject($e))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),O1=(()=>{class i extends _n{typeFormatter;registry;recordManager;logic;logicDisplay;constructor(e,t,r,o,s){super(e,o,s),this.typeFormatter=e,this.registry=t,this.recordManager=r,this.logic=o,this.logicDisplay=s}ngOnInit(){super.ngOnInit(),this.initUpdateParentSubscription()}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}getComponentType(e,t){return this.registry.getDisplayType(this.record&&this.record.module||"default",e,t&&t.displayType||"",this.getMode(),this.field.name)}getAttributes(){const e=[];return this.field.definition.layout.forEach(t=>{!this.field.attributes[t]||"none"===this.field.attributes[t].display||e.push(this.field.attributes[t])}),e}getModule(){return this.record?this.record.module:null}getMode(){return"filter"===this.mode?"edit":this.mode}getDirection(){let e="flex-column";return"inline"===this.field.definition.display&&(e="flex-row"),e}isConfigured(){return this.hasDisplay()&&this.hasLayout()&&this.hasAttributes()}showLabel(e){const t=e.definition||null,r=t.showLabel||null;return!(!t||!r||"hide"===(e.metadata&&e.metadata.labelDisplay||""))&&(r.includes("*")||r.includes(this.mode))}hasAttributes(){return!(!this.field.definition.attributeFields||(0,M.emptyObject)(this.field.definition.attributeFields))}hasLayout(){return!(!this.field.definition.layout||!this.field.definition.layout.length)}hasDisplay(){return!!this.field.definition.display}initUpdateParentSubscription(){this.field.attributes&&Object.keys(this.field.attributes).forEach(e=>{const t=this.field.attributes[e];t.valueChanges$&&this.subs.push(t.valueChanges$.subscribe(r=>{this.setValueOnParent(t,r.valueObject||r.valueList||r.value)}))})}setValueOnParent(e,t){const r=e.valueParent??"field";e.valuePath?(0,Ha.Z)("record"===r?this.record:this.field,e.valuePath,t):(0,Ha.Z)("record"===r?this.record.attributes:this.field.valueObject,e.name,t)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(ut),n.\u0275\u0275directiveInject(Kc),n.\u0275\u0275directiveInject(_i),n.\u0275\u0275directiveInject(_t),n.\u0275\u0275directiveInject(yt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["ng-component"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:0,vars:0,template:function(t,r){},encapsulation:2})}return i})();function f5(i,a){1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275element(1,"scrm-label",1),n.\u0275\u0275elementContainerEnd())}function p5(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"label"),n.\u0275\u0275element(1,"scrm-label",6),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext().$implicit,t=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("labelKey",e.labelKey)("module",t.getModule())}}function m5(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"span",7),n.\u0275\u0275element(1,"scrm-dynamic-field",8),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext().$implicit,t=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("componentType",t.getComponentType(e.type,e.definition))("field",e)("klass",t.klass)("mode",t.getMode())("record",t.record)("parent",t.parent)("type",e.type)}}function g5(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",3)(1,"span",4),n.\u0275\u0275template(2,p5,2,2,"label",0),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(3,m5,2,7,"span",5),n.\u0275\u0275elementEnd()),2&i){const e=a.$implicit,t=n.\u0275\u0275nextContext(2);n.\u0275\u0275classProp("flex-fill","edit"===t.mode&&"flex-row"===t.getDirection())("align-self-start","flex-row"===t.getDirection()&&e.labelKey&&t.showLabel(e)),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",e.labelKey&&t.showLabel(e)),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.type)}}function h5(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"div"),n.\u0275\u0275template(2,g5,4,6,"div",2),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275classMapInterpolate1("d-flex ",e.getDirection()," justify-content-start align-items-end field-group h-100 composite-field-wrapper"),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",e.getAttributes())}}let Ca=(()=>{class i extends O1{typeFormatter;registry;recordManager;logic;logicDisplay;constructor(e,t,r,o,s){super(e,t,r,o,s),this.typeFormatter=e,this.registry=t,this.recordManager=r,this.logic=o,this.logicDisplay=s}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(ut),n.\u0275\u0275directiveInject(Kc),n.\u0275\u0275directiveInject(_i),n.\u0275\u0275directiveInject(_t),n.\u0275\u0275directiveInject(yt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-composite-field"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:2,vars:2,consts:[[4,"ngIf"],["labelKey","LBL_BAD_GROUP_FIELD_CONFIG"],["class","field-group-item d-flex flex-column justify-content-end h-100 w-100",3,"flex-fill","align-self-start",4,"ngFor","ngForOf"],[1,"field-group-item","d-flex","flex-column","justify-content-end","h-100","w-100"],[1,"field-group-label","pt-2","pr-1"],["class","field-group-field pr-1 pb-1 composite-field",4,"ngIf"],[3,"labelKey","module"],[1,"field-group-field","pr-1","pb-1","composite-field"],[3,"componentType","field","klass","mode","record","parent","type"]],template:function(t,r){1&t&&(n.\u0275\u0275template(0,f5,2,0,"ng-container",0),n.\u0275\u0275template(1,h5,3,4,"ng-container",0)),2&t&&(n.\u0275\u0275property("ngIf",!r.isConfigured()),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.isConfigured()))},dependencies:[F.NgForOf,F.NgIf,zt,ns],encapsulation:2})}return i})(),B1=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Ut,is]})}return i})();const R1=[...o1,c1,B1],v5=[...a1,ba,Ca],md={...ud,"grouped-field.list":ba,"grouped-field.detail":ba,"grouped-field.edit":ba,"grouped-field.filter":ba,"composite.list":Ca,"composite.detail":Ca,"composite.edit":Ca,"composite.filter":Ca};let Hc=(()=>{class i extends wi{constructor(){super()}getDefaultMap(){return md}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),j1=(()=>{class i extends _n{typeFormatter;registry;recordManager;logic;fieldManager;logicDisplay;constructor(e,t,r,o,s,c){super(e,o,c),this.typeFormatter=e,this.registry=t,this.recordManager=r,this.logic=o,this.fieldManager=s,this.logicDisplay=c}ngOnInit(){super.ngOnInit(),this.initUpdateParentSubscription()}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}getComponentType(e,t){return this.registry.getDisplayType(this.record&&this.record.module||"default",e,t&&t.displayType||"",this.getMode(),this.field.name)}getItems(){this.field.items=this.field.items||[];const e=this.field.items,t=e&&e.filter(o=>!(o&&o.attributes&&o.attributes.deleted)),r=!!this.field?.definition?.lineItems?.labelOnFirstLine;return t.forEach((o,s)=>{this.setAttributeLabelDisplay(o,!r||s<=0)}),this.field.items}getItemFields(e){const t=e.fields||{};return Object.keys(t).map(r=>t[r])}removeItem(e){this.fieldManager.removeLineItem(this.field,e),this.updateItems(this.field.items),this.triggerLineActionEvents(M.LineActionEvent.onLineItemRemove)}addEmptyItem(){this.fieldManager.addLineItem(this.field?.definition?.lineItems?.definition||{},this.record,this.field),this.triggerLineActionEvents(M.LineActionEvent.onLineItemAdd)}updateItems(e){this.field.items=e}getModule(){return this.record?this.record.module:null}getMode(){return"filter"===this.mode?"edit":this.mode}getDirection(){let e="flex-column";return"inline"===this.field.definition.display&&(e="flex-row"),e}isConfigured(){return this.hasItemConfig()}isEditable(){return(0,M.isEditable)(this.mode)}showLabel(e){const t=e.definition||null,r=t.showLabel||null;return!(!t||!r)&&(r.includes("*")||r.includes(this.mode))}getMessageContext(e,t){const r=e&&e.message&&e.message.context||{};return r.module=t&&t.module||"",r}getMessageLabelKey(e){return e&&e.message&&e.message.labelKey||""}hasItemConfig(){return!!this.field?.definition?.lineItems?.definition}initUpdateParentSubscription(){this.field.attributes&&Object.keys(this.field.attributes).forEach(e=>{const t=this.field.attributes[e];t.valueChanges$&&this.subs.push(t.valueChanges$.subscribe(r=>{this.setValueOnParent(t,r.valueObject||r.valueList||r.value)}))})}setValueOnParent(e,t){e.valuePath?(0,Ha.Z)(this.field,e.valuePath,t):(0,Ha.Z)(this.field.valueObject,e.name,t)}setAttributeLabelDisplay(e,t){const r=e.fields||{};Object.keys(r).forEach(o=>{const s=r[o];if("composite"!==s.type)return;const c=s.attributes||{};Object.keys(c).forEach(l=>{const u=c[l],d=u.metadata||{};d.labelDisplay=t?"default":"hide",u.metadata=d})})}triggerLineActionEvents(e){const t=this.field?.logic||{};(0,M.emptyObject)(t)||Object.keys(t).forEach(r=>{const s=(t[r]||null)?.params?.triggerOnEvents?.[e];(0,M.isTrue)(s)&&this.logic.runLogic(this.field,this.mode,this.record)})}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(ut),n.\u0275\u0275directiveInject(Hc),n.\u0275\u0275directiveInject(_i),n.\u0275\u0275directiveInject(_t),n.\u0275\u0275directiveInject(di),n.\u0275\u0275directiveInject(yt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["ng-component"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:0,vars:0,template:function(t,r){},encapsulation:2})}return i})();function _5(i,a){1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275element(1,"scrm-label",1),n.\u0275\u0275elementContainerEnd())}function y5(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div"),n.\u0275\u0275element(1,"scrm-dynamic-field",10),n.\u0275\u0275elementEnd()),2&i){const e=a.$implicit,t=n.\u0275\u0275nextContext(2).$implicit,r=n.\u0275\u0275nextContext(2);n.\u0275\u0275classMapInterpolate2("",e.type," ",e.name,""),n.\u0275\u0275advance(1),n.\u0275\u0275property("componentType",r.getComponentType(e.type,e.definition))("field",e)("klass",r.klass)("mode",r.mode)("record",t)("parent",r.parent)("type",e.type)}}function b5(i,a){if(1&i&&n.\u0275\u0275element(0,"scrm-button",11),2&i){const e=n.\u0275\u0275nextContext(2),t=e.$implicit,r=e.index,o=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("config",o.getRemoveItemButton(t,r))}}function C5(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",6)(1,"div",7),n.\u0275\u0275template(2,y5,2,11,"div",8),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(3,"div",9),n.\u0275\u0275template(4,b5,1,1,"scrm-button",4),n.\u0275\u0275elementEnd()()),2&i){const e=n.\u0275\u0275nextContext().$implicit,t=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(2),n.\u0275\u0275property("ngForOf",t.getItemFields(e)),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",t.isEditable())}}function M5(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,C5,5,2,"div",5),n.\u0275\u0275elementContainerEnd()),2&i){const e=a.$implicit;n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!(e&&e.attributes&&e.attributes.deleted))}}function S5(i,a){if(1&i&&n.\u0275\u0275element(0,"scrm-button",11),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("config",e.getAddItemButton())}}const D5=function(i){return{field:i}};function w5(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",13),n.\u0275\u0275element(1,"scrm-dynamic-label",14),n.\u0275\u0275elementEnd()),2&i){const e=a.$implicit,t=n.\u0275\u0275nextContext(4);n.\u0275\u0275advance(1),n.\u0275\u0275property("context",t.getMessageContext(e.value,t.record))("fields",n.\u0275\u0275pureFunction1(3,D5,t.field))("labelKey",t.getMessageLabelKey(e.value))}}function E5(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,w5,2,5,"div",12),n.\u0275\u0275pipe(2,"keyvalue"),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(3);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",n.\u0275\u0275pipeBind1(2,1,e.field.itemFormArray.errors))}}function x5(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,E5,3,3,"ng-container",0),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.field.itemFormArray.invalid)}}function F5(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"div")(2,"div"),n.\u0275\u0275template(3,M5,2,1,"ng-container",2),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(4,"div",3),n.\u0275\u0275template(5,S5,1,1,"scrm-button",4),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(6,x5,2,1,"ng-container",0),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275classMapInterpolate2("line-items d-flex flex-column ",e.field.type," ",e.field.name,""),n.\u0275\u0275advance(1),n.\u0275\u0275classMapInterpolate1("d-flex ",e.getDirection()," justify-content-start align-items-end line-item h-100"),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",e.getItems()),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",e.isEditable()),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.isEditable()&&e.field.itemFormArray&&e.field.itemFormArray.errors)}}let k1=(()=>{class i extends j1{typeFormatter;registry;recordManager;logic;fieldManager;logicDisplay;constructor(e,t,r,o,s,c){super(e,t,r,o,s,c),this.typeFormatter=e,this.registry=t,this.recordManager=r,this.logic=o,this.fieldManager=s,this.logicDisplay=c}getAddItemButton(){return{klass:"btn btn-sm btn-outline-secondary m-0 border-0",icon:"plus",onClick:()=>{this.addEmptyItem()}}}getRemoveItemButton(e,t){return{klass:"btn btn-sm btn-outline-secondary m-0 border-0",icon:"minimise",onClick:()=>{this.removeItem(t)}}}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(ut),n.\u0275\u0275directiveInject(Hc),n.\u0275\u0275directiveInject(_i),n.\u0275\u0275directiveInject(_t),n.\u0275\u0275directiveInject(di),n.\u0275\u0275directiveInject(yt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-line-items-field"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:2,vars:2,consts:[[4,"ngIf"],["labelKey","LBL_LINE_ITEMS_FIELD_CONFIG"],[4,"ngFor","ngForOf"],[1,"line-item-buttons","d-flex","justify-content-end","mt-1"],[3,"config",4,"ngIf"],["class","d-flex flex-row line-item-entry w-100 align-items-end",4,"ngIf"],[1,"d-flex","flex-row","line-item-entry","w-100","align-items-end"],[1,"flex-grow-1","line-item-entry-composite"],[3,"class",4,"ngFor","ngForOf"],[1,"line-item-entry-buttons","mb-1"],[3,"componentType","field","klass","mode","record","parent","type"],[3,"config"],["class","invalid-feedback d-block",4,"ngFor","ngForOf"],[1,"invalid-feedback","d-block"],[3,"context","fields","labelKey"]],template:function(t,r){1&t&&(n.\u0275\u0275template(0,_5,2,0,"ng-container",0),n.\u0275\u0275template(1,F5,7,10,"ng-container",0)),2&t&&(n.\u0275\u0275property("ngIf",!r.isConfigured()),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.isConfigured()))},dependencies:[F.NgForOf,F.NgIf,zt,ns,Vn,vo,F.KeyValuePipe],encapsulation:2})}return i})();function I5(i,a){if(1&i&&n.\u0275\u0275element(0,"scrm-dynamic-field",3),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("componentType",e.componentType)("field",e.field)("klass",e.klass)("mode",e.componentMode)("record",e.record)("parent",e.record)("type",e.type)}}function A5(i,a){if(1&i&&n.\u0275\u0275element(0,"scrm-line-items-field",4),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("field",e.field)("klass",e.klass)("mode",e.componentMode)("record",e.record)("parent",e.record)}}function T5(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,I5,1,7,"scrm-dynamic-field",1),n.\u0275\u0275template(2,A5,1,5,"scrm-line-items-field",2),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf","line-items"!==e.type),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf","line-items"===e.type)}}let lr=(()=>{class i{registry;mode;type;field;record=null;klass=null;class="field";map=md;constructor(e){this.registry=e}ngOnInit(){this.setHostClass()}get componentMode(){let e=this.mode;return"create"===e&&(e="edit"),["edit","filter"].includes(e)&&this.field.readonly&&(e="detail"),e}get componentType(){return this.registry.getDisplayType(this.record&&this.record.module||"default",this.type,this.field.definition&&this.field.definition.displayType||"",this.componentMode,this.field.name)}setHostClass(){const e=[];e.push("field"),this.mode&&e.push("field-mode-"+this.mode),this.type&&e.push("field-type-"+this.type),this.field&&this.field.name&&e.push("field-name-"+this.field.name),this.class=e.join(" ")}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(Hc))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-field"]],hostVars:2,hostBindings:function(t,r){2&t&&n.\u0275\u0275classMap(r.class)},inputs:{mode:"mode",type:"type",field:"field",record:"record",klass:"klass"},decls:1,vars:1,consts:[[4,"ngIf"],[3,"componentType","field","klass","mode","record","parent","type",4,"ngIf"],[3,"field","klass","mode","record","parent",4,"ngIf"],[3,"componentType","field","klass","mode","record","parent","type"],[3,"field","klass","mode","record","parent"]],template:function(t,r){1&t&&n.\u0275\u0275template(0,T5,3,2,"ng-container",0),2&t&&n.\u0275\u0275property("ngIf",r.field&&"none"!==r.field.display)},dependencies:[F.NgIf,ns,k1],encapsulation:2})}return i})();function N5(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"label",1),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext(2).$implicit,t=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("ngClass",t.labelClass),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(e.field.label)}}function L5(i,a){if(1&i&&n.\u0275\u0275element(0,"scrm-label",8),2&i){const e=n.\u0275\u0275nextContext(2).$implicit,t=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("labelKey",e.field.labelKey)("ngClass",t.labelClass)}}function O5(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div"),n.\u0275\u0275template(1,N5,2,2,"label",6),n.\u0275\u0275template(2,L5,1,2,"scrm-label",7),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext().$implicit,t=n.\u0275\u0275nextContext(2);n.\u0275\u0275classProp("pr-3","inline"===t.labelDisplay),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.field.label),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!e.field.label&&e.field.labelKey)}}function B5(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div"),n.\u0275\u0275element(1,"scrm-field",9),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext().$implicit,t=n.\u0275\u0275nextContext(2);n.\u0275\u0275classProp("flex-grow-1","inline"===t.labelDisplay),n.\u0275\u0275advance(1),n.\u0275\u0275property("field",e.field)("klass",t.inputClass)("mode",t.fieldMode)("record",t.record)("type",e.field.type)}}function R5(i,a){1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275projection(1),n.\u0275\u0275elementContainerEnd())}function j5(i,a){1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275projection(1,1),n.\u0275\u0275elementContainerEnd())}function k5(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",1)(1,"div",2),n.\u0275\u0275template(2,O5,3,4,"div",3),n.\u0275\u0275template(3,B5,2,7,"div",4),n.\u0275\u0275template(4,R5,2,0,"ng-container",5),n.\u0275\u0275template(5,j5,2,0,"ng-container",5),n.\u0275\u0275elementEnd()()),2&i){const e=a.$implicit,t=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("ngClass",t.colClass),n.\u0275\u0275advance(1),n.\u0275\u0275classProp("align-items-center","inline"===t.labelDisplay&&!t.colAlignItems)("flex-column","top"===t.labelDisplay)("flex-row","inline"===t.labelDisplay)("justify-content-end",!e.field),n.\u0275\u0275property("ngClass",t.colAlignItems?t.colAlignItems:""),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.field&&"none"!==e.field.display),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.field&&"none"!==e.field.display),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.actionSlot),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.specialSlot)}}function P5(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",1),n.\u0275\u0275template(1,k5,6,14,"div",0),n.\u0275\u0275elementEnd()),2&i){const e=a.$implicit,t=n.\u0275\u0275nextContext();n.\u0275\u0275property("ngClass",t.rowClass),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",e.cols)}}const $5=[[["","field-grid-actions",""]],[["","field-grid-actions",""]]],U5=["[field-grid-actions]","[field-grid-actions]"];let gd=(()=>{class i extends Bu{breakpointObserver;fields;record;fieldMode="detail";constructor(e){super(e),this.breakpointObserver=e}ngOnChanges(){this.buildGrid()}buildGrid(){const e=[];if(!this.fields||0===this.fields.length)return void(this.fieldGrid=[]);let t=0,r={cols:[]};e.push(r),this.fields.forEach(s=>{t>=this.colNumber&&(t=0,r={cols:[]},e.push(r)),r.cols.push({field:s}),t++}),t<this.colNumber&&this.fillRow(e[e.length-1]),this.addSpecialSlots(e),this.fieldGrid=e}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject($))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-field-grid"]],inputs:{fields:"fields",record:"record",fieldMode:"fieldMode"},features:[n.\u0275\u0275InheritDefinitionFeature,n.\u0275\u0275NgOnChangesFeature],ngContentSelectors:U5,decls:2,vars:1,consts:[[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[1,"d-flex",3,"ngClass"],[3,"pr-3",4,"ngIf"],[3,"flex-grow-1",4,"ngIf"],[4,"ngIf"],[3,"ngClass",4,"ngIf"],[3,"labelKey","ngClass",4,"ngIf"],[3,"labelKey","ngClass"],[3,"field","klass","mode","record","type"]],template:function(t,r){1&t&&(n.\u0275\u0275projectionDef($5),n.\u0275\u0275elementStart(0,"form"),n.\u0275\u0275template(1,P5,2,2,"div",0),n.\u0275\u0275elementEnd()),2&t&&(n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",r.fieldGrid))},dependencies:[F.NgClass,F.NgForOf,F.NgIf,lr,zt],encapsulation:2})}return i})(),P1=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Ut,is,cn,_o]})}return i})(),Jn=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[R1,F.CommonModule,is,P1]})}return i})(),wo=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,cn,Jn,Ut]})}return i})();function V5(i,a){1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"span",10),n.\u0275\u0275text(2,"*"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd())}function z5(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"button",11),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(e);const r=n.\u0275\u0275nextContext(4);return n.\u0275\u0275resetView(r.dataSource.getEditAction())}),n.\u0275\u0275element(1,"scrm-image",12),n.\u0275\u0275elementEnd()}}const G5=function(){return["edit","create"]};function W5(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"div",5)(2,"strong")(3,"label",1),n.\u0275\u0275text(4),n.\u0275\u0275pipe(5,"uppercase"),n.\u0275\u0275elementEnd(),n.\u0275\u0275text(6,": "),n.\u0275\u0275template(7,V5,3,0,"ng-container",3),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(8,"div",6)(9,"div",7),n.\u0275\u0275element(10,"scrm-field",8),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(11,"div"),n.\u0275\u0275template(12,z5,2,0,"button",9),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext().$implicit,t=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(3),n.\u0275\u0275property("ngClass",t.labelClass),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(n.\u0275\u0275pipeBind1(5,9,e.field.label)),n.\u0275\u0275advance(3),n.\u0275\u0275property("ngIf",e.field.definition.required&&n.\u0275\u0275pureFunction0(11,G5).includes(t.config.mode)),n.\u0275\u0275advance(3),n.\u0275\u0275property("type",e.field.type)("mode",t.config.mode)("klass",t.inputClass)("field",e.field)("record",t.record),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",!1!==e.field.definition.inline_edit&&!e.field.readonly&&!e.field.definition.readonly&&t.dataSource.inlineEdit&&"detail"===t.config.mode)}}function K5(i,a){1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275projection(1),n.\u0275\u0275elementContainerEnd())}function H5(i,a){1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275projection(1,1),n.\u0275\u0275elementContainerEnd())}function Z5(i,a){1&i&&n.\u0275\u0275element(0,"div",13)}function q5(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",1),n.\u0275\u0275template(1,W5,13,12,"ng-container",3),n.\u0275\u0275template(2,K5,2,0,"ng-container",3),n.\u0275\u0275template(3,H5,2,0,"ng-container",3),n.\u0275\u0275template(4,Z5,1,0,"div",4),n.\u0275\u0275elementEnd()),2&i){const e=a.$implicit,t=a.index,r=n.\u0275\u0275nextContext(),o=r.$implicit,s=r.index,c=n.\u0275\u0275nextContext();n.\u0275\u0275classProp("field-column-bordered",o.cols.length>1&&t<o.cols.length-1),n.\u0275\u0275property("ngClass",c.colClass),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.field&&"none"!==e.field.display),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.actionSlot),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.specialSlot),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.field&&"none"!==(null==e.field?null:e.field.display)&&s<c.fieldGrid.length-1)}}function J5(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",1),n.\u0275\u0275template(1,q5,5,7,"div",2),n.\u0275\u0275elementEnd()),2&i){const e=a.$implicit,t=n.\u0275\u0275nextContext();n.\u0275\u0275property("ngClass",t.rowClass),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",e.cols)}}const Q5=[[["","field-grid-actions",""]],[["","field-grid-special",""]]],X5=["[field-grid-actions]","[field-grid-special]"];let $1=(()=>{class i extends Bu{breakpointObserver;dataSource;config;layout;fields;record;baseColClass={col:!0,"form-group":!0,"m-1":!1,"m-0":!0,"pl-3":!0,"pb-2":!0,"pr-3":!0,"d-flex":!0,"flex-column":!0,"justify-content-between":!0};baseRowClass={"form-row":!0,"align-items-stretch":!0};constructor(e){super(e),this.breakpointObserver=e}ngOnInit(){this.subscriptions.push(this.dataSource.getConfig().subscribe(e=>{this.config={...e}})),this.subscriptions.push(this.dataSource.getLayout().subscribe(e=>{this.layout={...e}})),this.subscriptions.push(this.dataSource.getFields().subscribe(e=>{this.fields={...e}})),this.subscriptions.push(this.dataSource.getRecord().subscribe(e=>{this.record={...e}})),super.ngOnInit()}buildGrid(){const e=[];this.fields&&0!==Object.keys(this.fields).length?(this.layout.rows.forEach(t=>{let r={cols:[]};t.cols.forEach((o,s)=>{const l=this.fields[o.name]||null;l?(r.cols.push({field:l}),1===this.colNumber&&s<t.cols.length-1&&(e.push(r),r={cols:[]})):r.cols.push({})}),r.cols.length<this.colNumber&&this.fillRow(r),e.push(r)}),this.addSpecialSlots(e),this.fieldGrid=e):this.fieldGrid=[]}get colNumber(){return 1===this.sizeMap[this.currentSize]?1:this.config.maxColumns}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject($))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-field-layout"]],inputs:{dataSource:"dataSource"},features:[n.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:X5,decls:2,vars:4,consts:[[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[3,"field-column-bordered","ngClass",4,"ngFor","ngForOf"],[4,"ngIf"],["class","field-separation mt-2",4,"ngIf"],[1,"label-container"],[1,"d-flex","flex-grow-1"],[1,"flex-grow-1","text-break"],[3,"type","mode","klass","field","record"],["type","button","class","record-action-button",3,"click",4,"ngIf"],[1,"required"],["type","button",1,"record-action-button",3,"click"],["image","pencil",1,"sicon"],[1,"field-separation","mt-2"]],template:function(t,r){1&t&&(n.\u0275\u0275projectionDef(Q5),n.\u0275\u0275elementStart(0,"form"),n.\u0275\u0275template(1,J5,2,2,"div",0),n.\u0275\u0275elementEnd()),2&t&&(n.\u0275\u0275classMapInterpolate1("field-layout ",r.config.mode,""),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",r.fieldGrid))},dependencies:[F.NgClass,F.NgForOf,F.NgIf,lr,wn,F.UpperCasePipe],encapsulation:2})}return i})(),hd=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Jn,wo,Mn]})}return i})();const U1={tabs:[],groupedTabs:[],modules:{},userActionMenu:[],quickActions:[],maxTabs:0};let Zc=(0,M.deepClone)(U1),Ma=null,Li=(()=>{class i{recordGQL;tabs$;groupedTabs$;modules$;userActionMenu$;maxTabs$;quickActions$;vm$;store=new S.BehaviorSubject(Zc);state$=this.store.asObservable();resourceName="navbar";fieldsMetadata={fields:["tabs","groupedTabs","modules","userActionMenu","maxTabs"]};constructor(e){this.recordGQL=e,this.tabs$=this.state$.pipe((0,v.map)(t=>t.tabs),(0,v.distinctUntilChanged)()),this.groupedTabs$=this.state$.pipe((0,v.map)(t=>t.groupedTabs),(0,v.distinctUntilChanged)()),this.modules$=this.state$.pipe((0,v.map)(t=>t.modules),(0,v.distinctUntilChanged)()),this.userActionMenu$=this.state$.pipe((0,v.map)(t=>t.userActionMenu),(0,v.distinctUntilChanged)()),this.maxTabs$=this.state$.pipe((0,v.map)(t=>t.maxTabs),(0,v.distinctUntilChanged)()),this.quickActions$=this.state$.pipe((0,v.map)(t=>t.quickActions),(0,v.distinctUntilChanged)()),this.vm$=this.tabs$.pipe((0,S.combineLatestWith)(this.groupedTabs$,this.modules$,this.userActionMenu$,this.maxTabs$,this.quickActions$),(0,v.map)(([t,r,o,s,c,l])=>({tabs:t,groupedTabs:r,modules:o,userActionMenu:s,maxTabs:c,quickActions:l})))}clear(){Ma=null,this.updateState((0,M.deepClone)(U1))}clearAuthBased(){this.clear()}load(){return this.getNavigation().pipe((0,v.tap)(e=>{this.updateState({...Zc,tabs:e.tabs,groupedTabs:e.groupedTabs,userActionMenu:e.userActionMenu,modules:e.modules,maxTabs:e.maxTabs,quickActions:e?.quickActions??[]})}))}isCached(){return null!==Ma}set(e){Ma=(0,S.of)(e).pipe((0,v.shareReplay)(1)),this.updateState({...Zc,tabs:e.tabs,groupedTabs:e.groupedTabs,userActionMenu:e.userActionMenu,modules:e.modules,maxTabs:e.maxTabs,quickActions:e?.quickActions??[]})}updateState(e){this.store.next(Zc=e)}getNavigation(){return null===Ma&&(Ma=this.fetch("1").pipe((0,v.shareReplay)(1))),Ma}fetch(e){return this.recordGQL.fetch(this.resourceName,`/api/navbars/${e}`,this.fieldsMetadata).pipe((0,v.map)(({data:t})=>{let r=null;return t&&t.navbar&&(r={tabs:t.navbar.tabs,groupedTabs:t.navbar.groupedTabs,userActionMenu:t.navbar.userActionMenu,modules:t.navbar.modules,maxTabs:t.navbar.maxTabs,quickActions:t?.navbar?.quickActions??[]}),r}))}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(oa))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const V1={adminPanel:[]};let vd=(0,M.deepClone)(V1),_d=null,yd=(()=>{class i{appStateStore;adminPanel$;store=new S.BehaviorSubject(vd);state$=this.store.asObservable();constructor(e){this.appStateStore=e,this.adminPanel$=this.state$.pipe((0,v.map)(t=>t.adminPanel),(0,v.distinctUntilChanged)())}clear(){_d=null,this.updateState((0,M.deepClone)(V1))}clearAuthBased(){this.clear()}getAdminPanel(){return vd.adminPanel}isCached(){return null!==_d}updateState(e){this.store.next(vd=e)}set(e){_d=(0,S.of)(e).pipe((0,v.shareReplay)(1)),this.updateState(e)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Xt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const z1={systemConfig:!1,userPreferences:!1,appStrings:!1,appListStrings:!1,modStrings:!1,themeImages:!1,navigation:!1,moduleMetadata:!1,adminMetadata:!1};let Sa=(0,M.deepClone)(z1),qc=null,Da=(()=>{class i{recordGQL;metadata;language;themeImages;config;preferences;navigation;adminMetadataStore;metadata$;store=new S.BehaviorSubject(Sa);state$=this.store.asObservable();resourceName="appMetadata";fieldsMetadata={fields:["id","_id"]};types=["systemConfig","userPreferences","language","themeImages","navigation","moduleMetadata","adminMetadata"];constructor(e,t,r,o,s,c,l,u){this.recordGQL=e,this.metadata=t,this.language=r,this.themeImages=o,this.config=s,this.preferences=c,this.navigation=l,this.adminMetadataStore=u,this.metadata$=this.state$}clear(){qc=null,this.updateState((0,M.deepClone)(z1))}clearAuthBased(){this.clear()}get(){return Sa}load(e="login",t=[],r=!0){const o=this.getNotLoadedTypes();return r=r&&o.length<1,(!t||t.length<1)&&(t=o).push("minimalModuleMetadata"),this.getMetadata(e,t,r).pipe((0,v.tap)(s=>{this.updateState(s)}))}loadModuleMetadata(e="login",t=!0){return this.getMetadata(e,["moduleMetadata"],t=t&&(Sa?.moduleMetadata??!1)).pipe((0,v.tap)(o=>{this.updateState(o)}))}getMetadata(e="app",t=[],r=!0){return(!t||t.length<1)&&(t=[...this.types]),(null==qc||!0!==r)&&(qc=this.fetch(e,t).pipe((0,v.shareReplay)(1))),qc}getNotLoadedTypes(){const e=[];return this.isNavigationLoaded()||e.push("navigation"),this.arePreferencesLoaded()||e.push("userPreferences"),this.areSystemConfigsLoaded()||e.push("systemConfig"),this.areAllLanguageStringsLoaded()||e.push("language"),this.areThemeImagesLoaded()||e.push("themeImages"),this.isAdminMetadataLoaded()||e.push("adminMetadata"),e}areAllLanguageStringsLoaded(){return this.language.areAllCached()}arePreferencesLoaded(){return this.preferences.isCached()}areSystemConfigsLoaded(){return this.config.isCached()}areThemeImagesLoaded(){return this.themeImages.isCached()}isNavigationLoaded(){return this.navigation.isCached()}isAdminMetadataLoaded(){return!!Sa.adminMetadata}updateState(e){this.store.next(Sa=e)}fetch(e,t=[]){const r={fields:[...this.fieldsMetadata.fields,...t]};return this.recordGQL.fetch(this.resourceName,`/api/app-metadata/${e}`,r).pipe((0,v.catchError)(()=>(0,S.of)({})),(0,v.map)(({data:o})=>{const s=o?.appMetadata,c={...Sa};return(0,M.emptyObject)(s)||(this.setConfig(c,s),this.setPreferences(c,s),this.setThemeImages(c,s),this.setNavigation(c,s),this.setLanguages(c,s),this.setModuleMetadata(c,s),this.setAdminMetadata(c,s)),c}))}setModuleMetadata(e,t){let r=t?.moduleMetadata??{},o="moduleMetadata";(0,M.emptyObject)(r)&&(r=t?.minimalModuleMetadata??{},o="minimalModuleMetadata"),(0,M.emptyObject)(r)||(e[o]=!0,Object.keys(r).forEach(s=>{if(!(0,M.emptyObject)(r[s]??{})){const l=this.metadata.mapMetadata(s,r[s]);this.metadata.getModule()!==s?this.metadata.setModuleMetadata(s,l):this.metadata.isCached(s)||this.metadata.set(s,l)}}))}setLanguages(e,t){const r=t?.language??{};if(!(0,M.emptyObject)(r)){const o={};o.languageKey=r.id??"",o.appStrings=r?.appStrings?.items??{},o.appListStrings=r?.appListStrings?.items??{},o.modStrings=r?.modStrings?.items??{},e.appStrings=!(0,M.emptyObject)(o.appStrings),e.appListStrings=!(0,M.emptyObject)(o.appListStrings),e.modStrings=!(0,M.emptyObject)(o.modStrings),this.language.set(o.languageKey,o)}}setNavigation(e,t){const r=t?.navigation??{};(0,M.emptyObject)(r)||(e.navigation=!0,this.navigation.set(r))}setThemeImages(e,t){const r=t?.themeImages??{},o=r?.items??{};(0,M.emptyObject)(r)||(0,M.emptyObject)(o)||(e.themeImages=!0,this.themeImages.set(r.id,o))}setPreferences(e,t){const r=t?.userPreferences??{};if(!(0,M.emptyObject)(r)){e.userPreferences=!0;const o=this.mapPreferences(r);this.preferences.set(o)}}setConfig(e,t){const r=t?.systemConfig??{};(0,M.emptyObject)(r)||(e.systemConfig=!0,this.config.set(r))}setAdminMetadata(e,t){const r=t?.adminMetadata??{};(0,M.emptyObject)(r)||(e.adminMetadata=!0,this.adminMetadataStore.set(r))}mapPreferences(e){const t={};return Object.keys(e).forEach(r=>{e[r].items&&Object.keys(e[r].items).forEach(o=>{t[o]=e[r].items[o]})}),t}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(oa),n.\u0275\u0275inject(bt),n.\u0275\u0275inject($e),n.\u0275\u0275inject(Kr),n.\u0275\u0275inject(vt),n.\u0275\u0275inject(qt),n.\u0275\u0275inject(Li),n.\u0275\u0275inject(yd))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),bd=(()=>{class i{appStore;languageStore;metadataStore;navigationStore;systemConfigStore;themeImagesStore;userPreferenceStore;appMetadataStore;stateStores={};constructor(e,t,r,o,s,c,l,u){this.appStore=e,this.languageStore=t,this.metadataStore=r,this.navigationStore=o,this.systemConfigStore=s,this.themeImagesStore=c,this.userPreferenceStore=l,this.appMetadataStore=u,this.stateStores.appStore=this.buildMapEntry(e,!1),this.stateStores.navigationStore=this.buildMapEntry(o,!0),this.stateStores.languageStore=this.buildMapEntry(t,!0),this.stateStores.metadataStore=this.buildMapEntry(r,!1),this.stateStores.systemConfigStore=this.buildMapEntry(s,!1),this.stateStores.themeImagesStore=this.buildMapEntry(c,!1),this.stateStores.userPreferenceStore=this.buildMapEntry(l,!0),this.stateStores.appMetadataStore=this.buildMapEntry(u,!0)}clear(){Object.keys(this.stateStores).forEach(e=>{this.stateStores[e].store.clear()})}clearAuthBased(){Object.keys(this.stateStores).forEach(e=>{this.stateStores[e].authBased&&this.stateStores[e].store.clearAuthBased()})}clearBackendCacheable(){this.clearAuthBased(),this.systemConfigStore.clear()}buildMapEntry(e,t){return{store:e,authBased:t}}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Xt),n.\u0275\u0275inject($e),n.\u0275\u0275inject(bt),n.\u0275\u0275inject(Li),n.\u0275\u0275inject(vt),n.\u0275\u0275inject(Kr),n.\u0275\u0275inject(qt),n.\u0275\u0275inject(Da))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),G1=(()=>{class i{constructor(){}calculateRoute(e){const t=window.location.pathname;return t.includes("index.php")&&(e=`${t}/${e}`),e}appendNativeAuth(e){return window.location.pathname.includes("auth")&&(e=`auth/${e}`),e}removeNativeAuth(){let e=window.location.pathname;return e.includes("/auth")&&(e=e.replace("/auth","/")),e=e.replace("//","/"),e}isNativeAuth(){return window.location.pathname.includes("auth")}getNativeOutLogoutUrl(){return"auth/logout"}isLoggedOutPath(){return window.location.pathname.includes("logged-out")}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),W1=(()=>{class i{listStoreFactory;recordStoreFactory;storesMap$;stores$;module;subs=[];recordList;stores=[];storeSubject=new S.BehaviorSubject([]);state$=this.storeSubject.asObservable();pageSize=10;constructor(e,t){this.listStoreFactory=e,this.recordStoreFactory=t,this.recordList=e.create(),this.stores$=this.state$,this.storesMap$=this.stores$.pipe((0,v.map)(r=>this.getStoreMap(r)))}clear(){this.subs.forEach(e=>e.unsubscribe())}clearAuthBased(){}getItemMetadata(){return null}getRecordList(){return this.recordList}init(e,t=!0,r=null){let o="list_max_entries_per_record_thread";r&&isFinite(r)&&(o="",this.recordList.setPageSize(r));const s=this.recordList.init(e,t,o);this.pageSize=this.recordList.getPageSize(),this.subs.push(this.recordList.records$.subscribe(c=>{this.initStores(c)})),s&&(s.pipe((0,v.tap)(c=>{this.initStores(c.records)})).pipe((0,v.take)(1)).subscribe(),this.module=e)}load(e=!0){return this.recordList.load(e).pipe((0,v.tap)(t=>{this.initStores(t.records)}))}initStores(e){if(!e)return;const t={},r=[],o=this.getStoreMap(this.stores);e.forEach(c=>{if(!c||!c.id)return;const l=c.id;if(o[l]){const u=o[l];return u.setRecord(c),t[l]=u,void r.push(u)}t[l]=this.recordStoreFactory.create(),this.getItemMetadata()&&t[l].setMetadata(this.getItemMetadata()),t[l].initRecord(c,"detail",!1),r.push(t[l])}),Object.keys(o).forEach(c=>{t[c]||o[c].destroy()}),this.updateState(r)}updateState(e){this.storeSubject.next(this.stores=e)}getStoreMap(e){const t={};return!e||!e.length||e.forEach(r=>{t[r.getBaseRecord().id]=r}),t}getItemStores(){const e=this.stores??[];return e&&e.length?e:[]}getRecordIds(){const e=[];return!this.stores||!this.stores.length||this.stores.forEach(t=>{e.push(t.getRecordId())}),e}static \u0275fac=function(t){n.\u0275\u0275invalidFactory()};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})();const K1={module:"",recordId:"",loading:{data:!1,metadata:!1},mode:"detail"};class Cd{appStateStore;meta;message;fieldManager;language;storeFactory;record$;stagingRecord$;loading$;mode$;meta$;vm$;recordStore;internalState=(0,M.deepClone)(K1);metadataState=(0,M.deepClone)({});store=new S.BehaviorSubject(this.internalState);state$=this.store.asObservable();metadataStore=new S.BehaviorSubject({});metadataState$=this.metadataStore.asObservable();subs=[];constructor(a,e,t,r,o,s){this.appStateStore=a,this.meta=e,this.message=t,this.fieldManager=r,this.language=o,this.storeFactory=s,this.meta$=this.metadataState$,this.recordStore=s.create(this.getViewFields$()),this.record$=this.recordStore.state$.pipe((0,v.distinctUntilChanged)()),this.stagingRecord$=this.recordStore.staging$.pipe((0,v.distinctUntilChanged)()),this.loading$=this.state$.pipe((0,v.map)(c=>c.loading.data||c.loading.metadata)),this.mode$=this.state$.pipe((0,v.map)(c=>c.mode)),this.vm$=this.state$}getModuleName(){return this.internalState.module}getRecordId(){return this.internalState.recordId}getViewContext(){return{module:this.getModuleName(),id:this.getRecordId()}}init(a,e,t="detail"){return this.baseInit(a,e,t),this.setMetadataLoading(!0),(0,S.forkJoin)([this.loadMetadata(),this.load()]).pipe((0,v.map)(([o,s])=>s))}initRecord(a,e="detail",t=!0){this.baseInit(a.module,a.id,e),t&&this.loadMetadata().pipe((0,v.take)(1),(0,v.tap)(()=>{this.setRecord(a)})).subscribe()}initStaging(a){const e=(0,M.deepClone)(this.recordStore.extractBaseRecord(a));this.recordStore.setStaging(e)}setRecord(a){const e=(0,M.deepClone)(this.recordStore.extractBaseRecord(a));this.recordStore.setRecord(e)}setMetadata(a){this.updateMetadataState(a),this.setMetadataLoading(!1)}destroy(){this.clear()}clear(){this.updateState((0,M.deepClone)(K1)),this.recordStore.destroy(),this.recordStore=null}clearAuthBased(){this.clear()}getBaseRecord(){return this.recordStore.getBaseRecord()}getMode(){return this.internalState?this.internalState.mode:null}setMode(a){this.updateState({...this.internalState,mode:a})}setDataLoading(a){this.updateState({...this.internalState,loading:{...this.internalState.loading,data:a}})}setMetadataLoading(a){this.updateState({...this.internalState,loading:{...this.internalState.loading,metadata:a}})}save(){return this.setDataLoading(!0),this.recordStore.save().pipe((0,v.catchError)(()=>(this.message.addDangerMessageByKey("LBL_ERROR_SAVING"),(0,S.of)({}))),(0,v.finalize)(()=>{this.setDataLoading(!1)}))}validate(){return this.recordStore.validate()}load(a=!0){return this.setDataLoading(!0),this.recordStore.retrieveRecord(this.internalState.module,this.internalState.recordId,a).pipe((0,v.tap)(e=>{this.updateState({...this.internalState,recordId:e.id,module:e.module})}),(0,v.finalize)(()=>{this.setDataLoading(!1)}))}loadMetadata(a=!0){return this.setMetadataLoading(!0),this.meta.getMetadata(this.internalState.module).pipe((0,v.map)(e=>e.recordView),(0,v.tap)(e=>{this.updateMetadataState(e)}),(0,v.finalize)(()=>{this.setMetadataLoading(!1)}))}updateState(a){this.store.next(this.internalState=a)}updateMetadataState(a){this.metadataStore.next(this.metadataState=a)}getMetadata(){return(0,M.deepClone)(this.metadataState)}baseInit(a,e,t="detail"){this.updateState({...this.internalState,module:a,recordId:e,mode:t})}}const H1={id:"",type:"",module:"",attributes:{},acls:[]};class Md{definitions$;recordSaveGQL;recordFetchGQL;message;recordManager;recordMappers;state$;staging$;cache$=null;internalState=(0,M.deepClone)(H1);stagingState=(0,M.deepClone)(H1);store=new S.BehaviorSubject(this.internalState);staging=new S.BehaviorSubject(this.stagingState);definitions=[];subs=[];fieldsMetadata={fields:["_id","id","attributes","module","type","acls","favorite"]};constructor(a,e,t,r,o,s){this.definitions$=a,this.recordSaveGQL=e,this.recordFetchGQL=t,this.message=r,this.recordManager=o,this.recordMappers=s,this.state$=this.store.asObservable().pipe((0,v.distinctUntilChanged)()),this.staging$=this.staging.asObservable(),this.subs.push(this.state$.subscribe(c=>{this.updateStaging(c)})),this.subs.push(a.subscribe(c=>{this.definitions=c,this.init(this.internalState)}))}init(a){const e={...a};this.initRecord(e),this.updateState(e)}getStaging(){return this.stagingState?this.stagingState:null}setStaging(a){this.initRecord(a),this.staging.next(this.stagingState=a)}setRecord(a){this.initRecord(a),this.updateState(a)}save(){return this.mapStagingFields(),this.recordSaveGQL.save(this.stagingState).pipe((0,v.tap)(a=>{this.initRecord(a),this.updateState(a)}))}validate(){return this.stagingState.formGroup.markAllAsTouched(),this.stagingState.formGroup.statusChanges.pipe((0,v.startWith)(this.stagingState.formGroup.status),(0,v.filter)(a=>"PENDING"!==a),(0,v.take)(1),(0,v.map)(a=>"VALID"===a))}resetStaging(){this.updateStaging(this.internalState)}destroy(){this.subs.forEach(a=>a.unsubscribe())}getBaseRecord(){return this.internalState?(0,M.deepClone)({id:this.internalState.id,type:this.internalState.type,module:this.internalState.module,attributes:this.internalState.attributes,acls:this.internalState.acls}):null}getBaseStaging(){return this.stagingState?(this.mapStagingFields(),(0,M.deepClone)({id:this.stagingState.id,type:this.stagingState.type,module:this.stagingState.module,attributes:this.stagingState.attributes,acls:this.stagingState.acls})):null}extractBaseRecord(a){const{fields:e,formGroup:t,...r}=a;return{...r}}isDirty(){return!(!this.stagingState||!this.stagingState.formGroup)&&this.stagingState.formGroup.dirty}retrieveRecord(a,e,t=!0){return(null==this.cache$||!1===t)&&(this.cache$=this.fetch(a,e).pipe((0,v.tap)(r=>this.init(r)),(0,v.shareReplay)(1))),this.cache$}updateState(a){this.store.next(this.internalState=a)}updateStaging(a){const e=(0,M.deepClone)(this.extractBaseRecord(a));this.initRecord(e),this.staging.next(this.stagingState=e)}mapStagingFields(){const a=this.recordMappers.get(this.stagingState.module);Object.keys(a).forEach(e=>{a[e].map(this.stagingState)})}initRecord(a){a.module&&this.definitions&&this.definitions.length>0&&(a.fields=this.recordManager.initFields(a,this.definitions))}fetch(a,e){return this.recordFetchGQL.fetch(a,e,this.fieldsMetadata).pipe((0,v.map)(({data:t})=>{const r={type:"",module:"",attributes:{},acls:[]};if(!t)return r;const o=t.getRecord.attributes.id;return o?(r.id=o,r.module=a,r.type=t.getRecord.attributes&&t.getRecord.attributes.object_name,r.attributes=t.getRecord.attributes,r.acls=t.getRecord.acls,r.favorite=t?.getRecord?.favorite??!1,r):(this.message.addDangerMessageByKey("LBL_RECORD_DOES_NOT_EXIST"),r)}),(0,v.catchError)(t=>(0,S.throwError)(t)))}}let Qr=(()=>{class i{apollo;constructor(e){this.apollo=e}fetch(e,t,r){const s={query:me.gql`
            query getRecord($module: String!, $record: String!) {
                getRecord(module: $module, record: $record) {
                    ${r.fields.join("\n")}
                }
            }
        `,variables:{module:e,record:t}};return this.apollo.query(s)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(me.Apollo))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Xr=(()=>{class i{apollo;constructor(e){this.apollo=e}save(e){const t={module:e.module,attributes:(0,M.deepClone)(e.attributes)};e.id&&(t._id=e.id);const r={mutation:me.gql`
                mutation saveRecord($input: saveRecordInput!) {
                    saveRecord(input: $input) {
                        record {
                            attributes
                            favorite
                            id
                            _id
                            module
                            acls
                        }
                    }
                }
            `,variables:{input:t}};return this.apollo.mutate(r).pipe((0,v.map)(o=>this.mapToRecord(o)))}mapToRecord(e){return e.data&&e.data.saveRecord&&e.data.saveRecord.record?{id:e.data.saveRecord.record._id,type:e?.data?.saveRecord?.record?.type??"",module:e?.data?.saveRecord?.record?.module??"",attributes:e?.data?.saveRecord?.record?.attributes??[],acls:e?.data?.saveRecord?.record?.acls??[],favorite:e?.data.saveRecord?.record?.favorite??!1}:null}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(me.Apollo))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Yr=(()=>{class i{recordFetchGQL;recordSaveGQL;message;recordManager;recordMappers;baseMapper;constructor(e,t,r,o,s,c){this.recordFetchGQL=e,this.recordSaveGQL=t,this.message=r,this.recordManager=o,this.recordMappers=s,this.baseMapper=c,s.register("default",c.getKey(),c)}create(e){return new Md(e,this.recordSaveGQL,this.recordFetchGQL,this.message,this.recordManager,this.recordMappers)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Qr),n.\u0275\u0275inject(Xr),n.\u0275\u0275inject(dt),n.\u0275\u0275inject(_i),n.\u0275\u0275inject(M.RecordMapperRegistry),n.\u0275\u0275inject(pa))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Sd=(()=>{class i extends Cd{appStateStore;meta;message;fieldManager;language;storeFactory;constructor(e,t,r,o,s,c){super(e,t,r,o,s,c),this.appStateStore=e,this.meta=t,this.message=r,this.fieldManager=o,this.language=s,this.storeFactory=c}getViewFields$(){return this.meta$.pipe((0,v.map)(e=>{const t={},r=[],o=e.fields??{};return Object.keys(o).forEach(s=>{o[s]&&(t[s]=o[s])}),e.headerLayout&&e.headerLayout.rows&&e.headerLayout.rows.forEach(s=>{s.cols.forEach(c=>{c.field&&(t[c.field.name]=c.field)})}),e.bodyLayout&&e.bodyLayout.rows&&e.bodyLayout.rows.forEach(s=>{s.cols.forEach(c=>{c.field&&(t[c.field.name]=c.field)})}),Object.keys(t).forEach(s=>{r.push(t[s])}),r}))}initRecord(e,t="detail",r=!0){super.initRecord(e,t,r),this.setRecord(e)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Xt),n.\u0275\u0275inject(bt),n.\u0275\u0275inject(dt),n.\u0275\u0275inject(di),n.\u0275\u0275inject($e),n.\u0275\u0275inject(Yr))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),Jc=(()=>{class i{appStateStore;meta;message;fieldManager;language;storeFactory;constructor(e,t,r,o,s,c){this.appStateStore=e,this.meta=t,this.message=r,this.fieldManager=o,this.language=s,this.storeFactory=c}create(){return new Sd(this.appStateStore,this.meta,this.message,this.fieldManager,this.language,this.storeFactory)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Xt),n.\u0275\u0275inject(bt),n.\u0275\u0275inject(dt),n.\u0275\u0275inject(di),n.\u0275\u0275inject($e),n.\u0275\u0275inject(Yr))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Qc=(()=>{class i extends W1{listStoreFactory;recordStoreFactory;itemMetadata;listMetadata;$loading;autoRefreshEnabled=!0;constructor(e,t){super(e,t),this.listStoreFactory=e,this.recordStoreFactory=t,this.$loading=this.recordList.loading$}init(e,t=!0,r=null){super.init(e,t,r),this.autoRefreshEnabled=!0}setFilters(e){let t=this.recordList.criteria;if(t={...t,...e},e&&e.orderBy){let r=M.SortDirection.DESC;e.sortOrder&&"ASC"===String(e.sortOrder).toUpperCase()&&(r=M.SortDirection.ASC),this.recordList.updateSorting(e.orderBy,r,!1)}return this.recordList.updateSearchCriteria(t,!1),this.load(!1).pipe((0,v.map)(r=>r.records))}getItemMetadata(){return this.itemMetadata}getListMetadata(){return this.listMetadata}setItemMetadata(e){return this.itemMetadata=e}setListMetadata(e){return this.listMetadata=e}allLoaded(){const e=this.recordList.getPagination();return!!e&&e.pageSize>=e.total}loadMore(e=null){e||(e=this.pageSize);let o=(this.recordList.getPagination().pageSize||0)+e;this.recordList.setPageSize(o),this.recordList.updatePagination(0)}reload(){this.recordList.updatePagination(0)}getViewContext(){return{module:this.module,ids:this.getRecordIds()}}initAutoRefresh(e,t,r,o){const s=new Date,c=new Date(s.getFullYear(),s.getMonth(),s.getDate(),s.getHours(),s.getMinutes()+1),l=this.getAutoRefreshTime(e,t,r);return(0,S.timer)(c,l).pipe((0,v.takeWhile)(()=>this.autoRefreshEnabled),(0,v.tap)(()=>{this.load(!1).subscribe(()=>{o&&o()})}))}disableAutoRefresh(){this.autoRefreshEnabled=!1}getAutoRefreshTime(e,t,r){let o=6e4*e;return 0===t&&0===r?o:o+this.getRandomDeviation(t,r)}getRandomDeviation(e,t){return e=Math.ceil(e),t=Math.floor(t),1e3*Math.floor(Math.random()*(t-e+1)+e)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Gi),n.\u0275\u0275inject(Jc))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),Xc=(()=>{class i{recordListFactory;recordStoreFactory;constructor(e,t){this.recordListFactory=e,this.recordStoreFactory=t}create(){return new Qc(this.recordListFactory,this.recordStoreFactory)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Gi),n.\u0275\u0275inject(Jc))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Dd=(()=>{class i{systemConfig;storeFactory;processService;messages;language;dynamicLabels;constructor(e,t,r,o,s,c){this.systemConfig=e,this.storeFactory=t,this.processService=r,this.messages=o,this.language=s,this.dynamicLabels=c}getOptions(){return this.systemConfig.getConfigValue("ui")?.notifications??null}initStore(){const e=this.getOptions(),t={};this.setupListActions(t,e),this.setupItemConfig(t,e);const r=this.storeFactory.create();r.setItemMetadata(t.itemConfig.metadata),r.setListMetadata({actions:t.listActions});const o={orderBy:e?.filters?.orderBy??"date_entered",sortOrder:e?.filters?.sortOrder??"asc",preset:{type:"alerts"}};return r.init(e.module,!1,e?.pageSize??null),r.setFilters(o).pipe((0,v.take)(1)).subscribe(),r}setupListActions(e,t){e.listActions=t?.listActions??[],null!==(t?.collapseListActions??null)&&(e.collapseListActions=t.collapseListActions)}setupItemConfig(e,t){e.itemConfig={collapsible:t?.item?.collapsible??!1,collapseLimit:t?.item?.collapseLimit??null,klass:t?.item?.itemClass??"",buttonClass:t?.item?.buttonClass??"",buttonGroupClass:t?.item?.buttonGroupClass??"",dynamicClass:t?.item?.dynamicClass??[],containerClass:t?.item?.containerClass??"",flexDirection:t?.item?.flexDirection??"",metadata:{}},this.setupItemMetadata(e.itemConfig.metadata,t.item.layout,t)}setupItemMetadata(e,t,r){t&&t.header&&(e.headerLayout=(0,M.deepClone)(t.header)),t&&t.body&&(e.bodyLayout=(0,M.deepClone)(t.body)),t&&t.actions&&(e.actions=(0,M.deepClone)(t.actions)),r?.item&&r?.item?.fields&&(e.fields=(0,M.deepClone)(r.item.fields)),null!==(r?.item?.collapseActions??null)&&(e.collapseActions=r?.item?.collapseActions)}markNotificationsAsRead(e){const t={action:"record-thread-list-mark-as-read",module:e.module??"alerts",ids:e.getRecordIds()};return this.processService.submit("record-thread-list-mark-as-read",t).pipe((0,v.tap)(r=>{let o="addSuccessMessageByKey";"error"===r.status&&(o="addDangerMessageByKey"),r.messages&&r.messages.forEach(s=>{this.messages[o](s)}),e.getItemStores().forEach(s=>{const l=(s?.recordStore?.getStaging()??{})?.fields.is_read??null;null!=l&&(l.value="true")})}),(0,v.catchError)(r=>{throw this.messages.addDangerMessageByKey("ERR_NOTIFICATIONS_MARK_AS_READ"),r}))}onLoadMore(e){(0,S.timer)(1500).pipe((0,v.take)(1)).subscribe(()=>{e.markNotificationsAsRead()})}onRefresh(e,t){const r=e.getRecordList().getMeta().unreadCount;let o=t.getNotificationsUnreadTotal();if(r>o){let s=(r-o).toString();const c=this.language.getFieldLabel("LBL_NEW_NOTIFICATION"),l=this.dynamicLabels.parse(c,{unread:s},{});this.messages.addSuccessMessage(l)}t.setNotificationsUnreadTotal(r)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(vt),n.\u0275\u0275inject(Xc),n.\u0275\u0275inject(ir),n.\u0275\u0275inject(dt),n.\u0275\u0275inject($e),n.\u0275\u0275inject(hc))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const Z1={notificationsEnabled:!1,notificationsTotal:0,notificationsUnreadTotal:0};let Nr=(0,M.deepClone)(Z1),wd=null,wa=(()=>{class i{appStateStore;configs;notificationService;notificationsUnreadTotal$;notificationsTotal$;notificationsEnabled$;store=new S.BehaviorSubject(Nr);state$=this.store.asObservable();notificationStore;notificationPageSize=0;constructor(e,t,r){this.appStateStore=e,this.configs=t,this.notificationService=r,this.notificationsUnreadTotal$=this.state$.pipe((0,v.map)(o=>o.notificationsUnreadTotal),(0,v.distinctUntilChanged)()),this.notificationsTotal$=this.state$.pipe((0,v.map)(o=>o.notificationsTotal),(0,v.distinctUntilChanged)()),this.notificationsEnabled$=this.state$.pipe((0,v.map)(o=>o.notificationsEnabled),(0,v.distinctUntilChanged)())}clear(){wd=null,this.updateState((0,M.deepClone)(Z1))}clearAuthBased(){this.clear(),this.notificationStore.clear(),this.notificationStore=null}init(){this.appStateStore.isLoggedIn()&&this.initNotifications()}initNotifications(){this.notificationStore||(this.notificationStore=this.notificationService.initStore())}enableNotifications(){this.initNotifications(),this.updateState({...Nr,notificationsEnabled:!0})}disableNotifications(){this.disableNotificationAutoRefresh(),this.updateState({...Nr,notificationsEnabled:!1,notificationsTotal:0,notificationsUnreadTotal:0})}areNotificationsEnabled(){return Nr.notificationsEnabled}refreshNotifications(){this.areNotificationsEnabled()&&this.notificationStore.load(!1).pipe((0,v.take)(1)).subscribe(()=>{this.notificationService.onRefresh(this.notificationStore,this)})}markNotificationsAsRead(){if(!this.areNotificationsEnabled())return;this.notificationStore.getRecordList().pagination$.pipe((0,v.take)(1),(0,v.tap)(r=>this.notificationPageSize=r.pageSize),(0,v.tap)(r=>this.setNotificationsTotal(r.total))).subscribe();let e=this.notificationStore.getRecordList().records.filter(r=>!1===r.attributes.is_read).length,t=this.getNotificationsTotal()-this.getNotificationsUnreadTotal();(0,S.timer)(500).pipe((0,v.take)(1)).subscribe(()=>{this.getNotificationsUnreadTotal()>0&&(this.notificationPageSize>t||e>0)&&this.notificationService.markNotificationsAsRead(this.notificationStore).subscribe(r=>{this.setNotificationsUnreadTotal(r?.data?.unreadCount??0),this.setRecordAsReadTrue()})})}conditionalNotificationRefresh(e=""){if(!this.areNotificationsEnabled())return;const t=this.configs.getUi("notifications_reload_actions")??null,r=this.getModule();if(e||(e=this.getView()),!t||!r)return;const o=t[r];o&&o.length&&o.some(c=>"any"===c||c===e)&&this.refreshNotifications()}disableNotificationAutoRefresh(){this.notificationStore.disableAutoRefresh()}setRecordAsReadTrue(){this.notificationStore.getRecordList().records.forEach(e=>{e.attributes.is_read||(e.attributes.is_read=!0)})}setNotificationsUnreadTotal(e){this.updateState({...Nr,notificationsUnreadTotal:e})}setNotificationsTotal(e){this.updateState({...Nr,notificationsTotal:e})}getNotificationsTotal(){return Nr.notificationsTotal}getNotificationsUnreadTotal(){return Nr.notificationsUnreadTotal}getNotificationStore(){return this.notificationStore}getModule(){return this.appStateStore.getModule()}getView(){return this.appStateStore.getView()}onLogin(){}onLogout(){this.disableNotifications(),this.clearAuthBased()}isCached(){return null!==wd}updateState(e){this.store.next(Nr=e)}set(e){wd=(0,S.of)(e).pipe((0,v.shareReplay)(1)),this.updateState(e)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Xt),n.\u0275\u0275inject(vt),n.\u0275\u0275inject(Dd))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),oi=(()=>{class i{http;router;message;stateManager;languageStore;appStateStore;localStorage;configs;baseRoute;notificationStore;currentUser$;isUserLoggedIn=new S.BehaviorSubject(!1);currentUserSubject=new S.BehaviorSubject({});constructor(e,t,r,o,s,c,l,u,d,f){this.http=e,this.router=t,this.message=r,this.stateManager=o,this.languageStore=s,this.appStateStore=c,this.localStorage=l,this.configs=u,this.baseRoute=d,this.notificationStore=f,this.currentUser$=this.currentUserSubject.asObservable().pipe((0,v.distinctUntilChanged)())}isLoggedIn(){return this.isUserLoggedIn.value}getCurrentUser(){return this.currentUserSubject.value}setCurrentUser(e){this.appStateStore.setCurrentUser(e),this.currentUserSubject.next(e),this.isUserLoggedIn.next(!0)}doLogin(e,t,r,o){let s="login";s=this.baseRoute.appendNativeAuth(s),s=this.baseRoute.calculateRoute(s);const c=new Dr.HttpHeaders({"Content-Type":"application/json"});return this.http.post(s,{username:e,password:t},{headers:c}).subscribe(l=>{this.baseRoute.isNativeAuth()&&(window.location.href=this.baseRoute.removeNativeAuth()),this.appStateStore.updateInitialAppLoading(!0),r(l),this.isUserLoggedIn.next(!0),this.setCurrentUser(l),this.notificationStore.enableNotifications(),this.notificationStore.refreshNotifications()},l=>{o(l)})}logout(e="LBL_LOGOUT_SUCCESS",t=!0){this.appStateStore.updateLoading("logout",!0,!1);const r=this.configs.getConfigValue("logout")??[];let o=r?.path??"logout";const s=(0,M.isTrue)(r?.redirect??!1);this.baseRoute.isNativeAuth()&&(o=this.baseRoute.getNativeOutLogoutUrl()),o=this.baseRoute.calculateRoute(o);const c=new Dr.HttpParams,l=(new Dr.HttpHeaders).set("Content-Type","text/plain; charset=utf-8");this.appStateStore.getActiveRequests()<1?this.callLogout(o,c,l,t,e,s):this.appStateStore.activeRequests$.pipe((0,v.filter)(u=>u<1),(0,v.take)(1)).subscribe(()=>{this.callLogout(o,c,l,t,e,s)})}callLogout(e,t,r,o,s,c){this.resetState(),c?window.location.href=e:this.http.post(e,t.toString(),{headers:r,responseType:"text"}).pipe((0,v.take)(1),(0,v.catchError)(l=>(this.message.log("Logout failed"),(0,S.throwError)(l))),(0,v.finalize)(()=>{this.appStateStore.updateInitialAppLoading(!0),this.appStateStore.updateLoading("logout",!1,!1),this.appStateStore.setCurrentUser(null),this.stateManager.clearAuthBased(),this.configs.clear(),!0===o&&this.router.navigate(["/Login"]).finally()})).subscribe(()=>{this.message.log("Logout success"),(0,M.isEmptyString)(s)||this.message.addSuccessMessageByKey(s)},()=>{this.message.log("Error on logout"),(0,M.isEmptyString)(s)||this.message.addSuccessMessageByKey(s)})}resetState(){this.stateManager.clearAuthBased(),this.localStorage.clear(),this.isUserLoggedIn.next(!1)}fetchSessionStatus(){let e="session-status";e=this.baseRoute.appendNativeAuth(e),e=this.baseRoute.calculateRoute(e);const t=(new Dr.HttpHeaders).set("Content-Type","text/plain; charset=utf-8");return this.http.get(e,{headers:t})}getSessionExpiredRoute(){return(this.configs.getConfigValue("session-expired")??[])?.path??"Login"}handleInvalidSession(e){this.sessionExpiredRedirect()?this.handleSessionExpiredRedirect():this.logout(e)}handleSessionExpiredRedirect(){window.location.href=this.getSessionExpiredRoute()}sessionExpiredRedirect(){const e=this.configs.getConfigValue("session-expired")??[];return(0,M.isTrue)(e?.redirect??!1)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Dr.HttpClient),n.\u0275\u0275inject(Rt.Router),n.\u0275\u0275inject(dt),n.\u0275\u0275inject(bd),n.\u0275\u0275inject($e),n.\u0275\u0275inject(Xt),n.\u0275\u0275inject(wr),n.\u0275\u0275inject(vt),n.\u0275\u0275inject(G1),n.\u0275\u0275inject(wa))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function Y5(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"div",8)(2,"a",9),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(e);const r=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(r.backToTop())}),n.\u0275\u0275elementStart(3,"span"),n.\u0275\u0275text(4," Back To Top "),n.\u0275\u0275element(5,"scrm-image",10),n.\u0275\u0275elementEnd()()(),n.\u0275\u0275elementContainerEnd()}}function e8(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"div",11)(1,"div",12)(2,"h5",13),n.\u0275\u0275text(3,"\xa9 Powered By SugarCRM"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(4,"button",14),n.\u0275\u0275listener("click",function(){const o=n.\u0275\u0275restoreView(e).$implicit;return n.\u0275\u0275resetView(o.dismiss("Cross click"))}),n.\u0275\u0275element(5,"scrm-image",15),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(6,"div",16)(7,"p"),n.\u0275\u0275text(8," \xa9 2004-2013 SugarCRM Inc. The Program is provided AS IS, without warranty. Licensed under AGPLv3. "),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(9,"p"),n.\u0275\u0275text(10," This program is free software; you can redistribute it and/or modify it under the terms of the GNU Affero General Public License version 3 as published by the Free Software Foundation, including the additional permission set forth in the source code header. "),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(11,"p"),n.\u0275\u0275text(12," SugarCRM is a trademark of SugarCRM, Inc. All other company and product names may be trademarks of the respective companies with which they are associated. "),n.\u0275\u0275elementEnd()()()}}function t8(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"div",17)(1,"div",12)(2,"h5",13),n.\u0275\u0275text(3,"\xa9 Supercharged by SuiteCRM"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(4,"button",14),n.\u0275\u0275listener("click",function(){const o=n.\u0275\u0275restoreView(e).$implicit;return n.\u0275\u0275resetView(o.dismiss("Cross click"))}),n.\u0275\u0275element(5,"scrm-image",15),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(6,"div",16)(7,"p"),n.\u0275\u0275text(8," SuiteCRM has been written and assembled by SalesAgility. The Program is provided AS IS, without warranty. Licensed under AGPLv3. "),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(9,"p"),n.\u0275\u0275text(10," This program is free software; you can redistribute it and/or modify it under the terms of the GNU Affero General Public License version 3 as published by the Free Software Foundation, including the additional permission set forth in the source code header. "),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(11,"p"),n.\u0275\u0275text(12," SuiteCRM is a trademark of SalesAgility Ltd. All other company and product names may be trademarks of the respective companies with which they are associated. "),n.\u0275\u0275elementEnd()()()}}let n8=(()=>{class i{modalService;authService;authSub;closeResult;isUserLoggedIn;constructor(e,t){this.modalService=e,this.authService=t}openSugarCopyright(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",centered:!0,size:"lg"}).result.then(t=>{this.closeResult=`Closed with: ${t}`},t=>{this.closeResult=`Dismissed ${this.getDismissReason(t)}`})}openSuiteCopyright(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",centered:!0,size:"lg"}).result.then(t=>{this.closeResult=`Closed with: ${t}`},t=>{this.closeResult=`Dismissed ${this.getDismissReason(t)}`})}getDismissReason(e){return e===pe.ModalDismissReasons.ESC?"by pressing ESC":e===pe.ModalDismissReasons.BACKDROP_CLICK?"by clicking on a backdrop":`with: ${e}`}backToTop(){document.body.scrollTop=0,document.documentElement.scrollTop=0}ngOnInit(){this.authSub=this.authService.isUserLoggedIn.subscribe(e=>{this.isUserLoggedIn=e})}ngOnDestroy(){this.authSub.unsubscribe()}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(pe.NgbModal),n.\u0275\u0275directiveInject(oi))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-footer-ui"]],decls:12,vars:1,consts:[[1,"footer"],[1,"copyright-links"],["data-toggle","modal","data-target",".copyright-suitecrm",1,"footer-link",3,"click"],["data-toggle","modal","data-target",".copyright-sugarcrm",1,"footer-link",3,"click"],[4,"ngIf"],[1,"copyright"],["sugarcopyright",""],["suitecopyright",""],[1,"back-to-top"],[1,"footer-link",3,"click"],["image","arrow_up_filled",1,"sicon","back-top-icon"],["role","dialog","aria-hidden","true",1,"copyright-sugarcrm"],[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["image","icon_modal_close",1,"sicon"],[1,"modal-body"],["role","dialog","aria-hidden","true",1,"copyright-suitecrm"]],template:function(t,r){if(1&t){const o=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"a",2),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(o);const c=n.\u0275\u0275reference(11);return n.\u0275\u0275resetView(r.openSuiteCopyright(c))}),n.\u0275\u0275text(3," \xa9 Supercharged by SuiteCRM "),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(4,"a",3),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(o);const c=n.\u0275\u0275reference(9);return n.\u0275\u0275resetView(r.openSugarCopyright(c))}),n.\u0275\u0275text(5," \xa9 Powered By SugarCRM "),n.\u0275\u0275elementEnd()(),n.\u0275\u0275template(6,Y5,6,0,"ng-container",4),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(7,"div",5),n.\u0275\u0275template(8,e8,13,0,"ng-template",null,6,n.\u0275\u0275templateRefExtractor),n.\u0275\u0275template(10,t8,13,0,"ng-template",null,7,n.\u0275\u0275templateRefExtractor),n.\u0275\u0275elementEnd()}2&t&&(n.\u0275\u0275advance(6),n.\u0275\u0275property("ngIf",r.isUserLoggedIn))},dependencies:[F.NgIf,wn],encapsulation:2})}return i})(),i8=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Mn]})}return i})(),r8=(()=>{class i{constructor(){}ngOnInit(){}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["app-full-page-spinner"]],decls:20,vars:0,consts:[[1,"app-overlay"],["id","overlay-spinner"],[1,"app-loading"],[1,"sk-cube-grid"],[1,"sk-cube","sk-cube1","sk-cube-primary"],[1,"sk-cube","sk-cube2","sk-cube-secondary"],[1,"sk-cube","sk-cube3","sk-cube-secondary"],[1,"sk-cube","sk-cube4","sk-cube-primary"],[1,"sk-cube","sk-cube5","sk-cube-secondary"],[1,"sk-cube","sk-cube6","sk-cube-secondary"],[1,"sk-cube","sk-cube7","sk-cube-primary"],[1,"sk-cube","sk-cube8","sk-cube-primary"],[1,"sk-cube","sk-cube9","sk-cube-primary"]],template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),n.\u0275\u0275element(4,"div",4)(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",7)(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",10)(14,"div",11)(15,"div",12)(16,"div",10)(17,"div",10)(18,"div",11)(19,"div",12),n.\u0275\u0275elementEnd()()()())},styles:[".app-overlay[_ngcontent-%COMP%]{position:fixed;display:flex;justify-content:center;align-items:center;flex-direction:column;width:100%;height:100%;inset:0;background-color:#fff9;z-index:4000;cursor:default}.app-loading[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%}.app-loading[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{height:200px;width:200px;animation:scaleIn 4s linear infinite;transform-origin:center center;position:absolute;inset:0;margin:auto}.app-loading[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]   .path[_ngcontent-%COMP%]{stroke-dasharray:1,200;stroke-dashoffset:0;animation:dash 1.5s ease-in-out infinite;stroke-linecap:round;stroke:#ddd}.sk-cube-primary[_ngcontent-%COMP%]{background-color:#e67062}.sk-cube-secondary[_ngcontent-%COMP%]{background-color:#4e5063}.sk-cube-grid[_ngcontent-%COMP%]{width:100px;height:100px}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube[_ngcontent-%COMP%]{width:25%;height:25%;float:left;animation:_ngcontent-%COMP%_sk-cubeGridScaleDelay 1.3s infinite ease-in-out}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube1[_ngcontent-%COMP%]{animation-delay:.2s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube2[_ngcontent-%COMP%]{animation-delay:.3s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube3[_ngcontent-%COMP%]{animation-delay:.4s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube4[_ngcontent-%COMP%]{animation-delay:.1s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube5[_ngcontent-%COMP%]{animation-delay:.2s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube6[_ngcontent-%COMP%]{animation-delay:.3s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube7[_ngcontent-%COMP%]{animation-delay:0s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube8[_ngcontent-%COMP%]{animation-delay:.1s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube9[_ngcontent-%COMP%]{animation-delay:.2s}@keyframes _ngcontent-%COMP%_sk-cubeGridScaleDelay{0%,70%,to{transform:scaleZ(1)}35%{transform:scale3D(0,0,1)}}"]})}return i})(),o8=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Ke.AngularSvgIconModule]})}return i})(),ur=(()=>{class i{apollo;constructor(e){this.apollo=e}fetch(e,t){const r={query:me.gql`
            query getBatchedStatistics($module: String!, $queries: Iterable!){
              getBatchedStatistics(module: $module, queries: $queries) {
                  _id
                  id
                  items
              }
            }
        `,variables:{module:e,queries:t}};return this.apollo.query(r).pipe((0,v.map)(o=>{const s={},l=(o.data&&o.data.getBatchedStatistics||{}).items||{},u=Object.keys(l);return u&&u.length&&u.forEach(d=>{const f=l[d];s[d||f._id]={id:f._id,data:f.data,metadata:f.metadata}}),s}))}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(me.Apollo))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const a8={module:"",query:{},statistic:{id:"",data:{}},loading:!1};let Yc=(()=>{class i{fetchGQL;state$;statistic$;loading$;cache$=null;internalState=(0,M.deepClone)(a8);store=new S.BehaviorSubject(this.internalState);constructor(e){this.fetchGQL=e,this.state$=this.store.asObservable(),this.statistic$=this.state$.pipe((0,v.map)(t=>t.statistic),(0,v.distinctUntilChanged)()),this.loading$=this.state$.pipe((0,v.map)(t=>t.loading),(0,v.distinctUntilChanged)())}clear(){this.store.unsubscribe(),this.cache$=null}clearAuthBased(){this.clear()}getQuery(){return(0,M.deepClone)(this.internalState.query)}get context(){return this.internalState.query.context}set context(e){const t=(0,M.deepClone)(this.internalState.query);t.context=e,this.updateState({...this.internalState,query:t})}init(e,t,r=!0){return this.internalState.module=e,this.updateState({...this.internalState,module:e,query:t}),!1===r?null:this.load()}load(e=!0){return this.updateState({...this.internalState,loading:!0}),this.fetchStatistics(this.internalState.module,this.getQuery(),e).pipe((0,v.map)(t=>this.mapStatistics(t)),(0,v.tap)(t=>{this.addNewState(t)}))}setLoading(e){this.updateState({...this.internalState,loading:e})}setStatistic(e,t,r=!1){if(this.addNewState(t),!r)return;const o={};o[e]=t,this.cache$=(0,S.of)(o).pipe((0,v.shareReplay)(1))}addNewState(e){this.updateState({...this.internalState,statistic:e,loading:!1})}mapStatistics(e){const t=Object.keys(e),r=t&&t.length&&t[0];let o={id:"",data:{}};return r&&(o=e[r]),o}updateState(e){this.store.next(this.internalState=e)}fetchStatistics(e,t,r=!0){const o={};return o[t.key]=t,(null==this.cache$||!1===r)&&(this.cache$=this.fetchGQL.fetch(e,o).pipe((0,v.shareReplay)(1))),this.cache$}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(ur))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})();const s8={module:"",query:{},statistic:{id:"",data:{}},loading:!1};let q1=(()=>{class i extends Yc{fetchGQL;fieldManager;cache$=null;internalState=(0,M.deepClone)(s8);store=new S.BehaviorSubject(this.internalState);constructor(e,t){super(e),this.fetchGQL=e,this.fieldManager=t,this.state$=this.store.asObservable(),this.statistic$=this.state$.pipe((0,v.map)(r=>r.statistic),(0,v.distinctUntilChanged)()),this.loading$=this.state$.pipe((0,v.map)(r=>r.loading),(0,v.distinctUntilChanged)())}addNewState(e){if(!e.metadata||!e.metadata.dataType)return;const t=this.fieldManager.buildShallowField(e.metadata.dataType,e.data.value);t.metadata={digits:0},this.updateState({...this.internalState,statistic:e,field:t,loading:!1})}updateState(e){super.updateState(e)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(ur),n.\u0275\u0275inject(di))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),os=(()=>{class i{fetchGQL;fieldManager;constructor(e,t){this.fetchGQL=e,this.fieldManager=t}create(){return new q1(this.fetchGQL,this.fieldManager)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(ur),n.\u0275\u0275inject(di))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function c8(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",2),n.\u0275\u0275element(1,"scrm-label",3),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("labelKey",e.messageLabelKey)}}function l8(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"div",8),n.\u0275\u0275element(2,"scrm-image",9),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(2).$implicit;n.\u0275\u0275advance(2),n.\u0275\u0275property("image",e.icon)("klass",e.iconClass)}}function u8(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",12),n.\u0275\u0275element(1,"scrm-field",13),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext().ngIf;n.\u0275\u0275advance(1),n.\u0275\u0275property("type",e.field.type)("field",e.field)}}function d8(i,a){1&i&&(n.\u0275\u0275elementStart(0,"div",14),n.\u0275\u0275element(1,"scrm-inline-loading-spinner"),n.\u0275\u0275elementEnd())}function f8(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,u8,2,2,"div",10),n.\u0275\u0275template(2,d8,2,0,"div",11),n.\u0275\u0275elementContainerEnd()),2&i){const e=a.ngIf,t=n.\u0275\u0275nextContext(5);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.field),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.loading&&t.loading)}}function p8(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"div",15),n.\u0275\u0275element(2,"scrm-label",16),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(2).$implicit,t=n.\u0275\u0275nextContext(3);n.\u0275\u0275advance(2),n.\u0275\u0275property("labelKey",e.labelKey)("module",t.getContextModule())}}function m8(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"div",17)(2,"label"),n.\u0275\u0275text(3),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(4).ngIf;n.\u0275\u0275advance(3),n.\u0275\u0275textInterpolate(e.description)}}function g8(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",19),n.\u0275\u0275element(1,"scrm-dynamic-label",20),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext(3).$implicit,t=n.\u0275\u0275nextContext(2).ngIf,r=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("context",r.getMessageContext())("fields",r.getMessageFields(t.statistics))("labelKey",e.dynamicLabel)}}function h8(i,a){1&i&&(n.\u0275\u0275elementStart(0,"div",14),n.\u0275\u0275element(1,"scrm-inline-loading-spinner"),n.\u0275\u0275elementEnd())}function v8(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,g8,2,3,"div",18),n.\u0275\u0275template(2,h8,2,0,"div",11),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(5);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!e.loading),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.loading)}}function _8(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"div"),n.\u0275\u0275text(2," - "),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(2).$implicit,t=n.\u0275\u0275nextContext(3);n.\u0275\u0275advance(1),n.\u0275\u0275classMapInterpolate1("widget-entry-value ",t.getSizeClass(e.size),"")}}function y8(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,l8,3,2,"ng-container",7),n.\u0275\u0275template(2,f8,3,2,"ng-container",7),n.\u0275\u0275template(3,p8,3,2,"ng-container",7),n.\u0275\u0275template(4,m8,4,1,"ng-container",7),n.\u0275\u0275template(5,v8,3,2,"ng-container",7),n.\u0275\u0275template(6,_8,3,3,"ng-container",7),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext().$implicit,t=n.\u0275\u0275nextContext(2).ngIf,r=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.icon),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.statistic&&t.statistics[e.statistic]),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.labelKey),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.descriptionKey),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.dynamicLabel),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.statistic&&!r.loading&&(!t.statistics[e.statistic].field||t.statistics[e.statistic].field&&r.isEmptyFieldValue(t.statistics[e.statistic].field.value)))}}function b8(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div"),n.\u0275\u0275template(1,y8,7,6,"ng-container",7),n.\u0275\u0275elementEnd()),2&i){const e=a.$implicit,t=n.\u0275\u0275nextContext(3);n.\u0275\u0275classMapInterpolate2("",t.getColClass()," ",t.getClass(e),""),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf","hidden"!==e.display)}}function C8(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"div"),n.\u0275\u0275template(2,b8,2,5,"div",6),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()),2&i){const e=a.$implicit,t=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275classMapInterpolate4("d-flex ",t.getJustify(e.justify)," ",t.getAlign(e.align)," ",t.getRowClass()," ",t.getLayoutRowClass(e),""),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",e.cols)}}function M8(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",4),n.\u0275\u0275template(1,C8,3,7,"ng-container",5),n.\u0275\u0275elementEnd()),2&i){const e=a.ngIf;n.\u0275\u0275propertyInterpolate("ngbTooltip",e.tooltipTitleText),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",e.layout)}}let Ed=(()=>{class i{language;factory;config;vm$;loading=!0;messageLabelKey;subs=[];statistics={};loading$;gridWidgetInput;constructor(e,t){this.language=e,this.factory=t}ngOnInit(){this.validateConfig()&&(this.gridWidgetInput=this.config,this.buildStatistics(),this.setupLoading$(),this.setupVM(),this.setupReload())}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}validateConfig(){return this.config&&this.config.layout?this.config.queryArgs.context&&this.config.queryArgs.module?this.config.widgetConfig?!(!this.config.layout||!this.config.layout.rows)||(this.messageLabelKey="LBL_CONFIG_NO_STATISTICS_KEY",!1):(this.messageLabelKey="LBL_CONFIG_NO_CONFIG",!1):(this.messageLabelKey="LBL_CONFIG_BAD_CONTEXT",!1):(this.messageLabelKey="LBL_CONFIG_NO_CONFIG",!1)}getRowClass(){return this.gridWidgetInput.rowClass}getColClass(){return this.gridWidgetInput.columnClass}getContextModule(){return this.gridWidgetInput.queryArgs.context.module}getMessageContext(){const e=this.getContextModule();return e?{module:e}:{}}getMessageFields(e){if(!e||!Object.keys(e).length)return{};const t={};return Object.keys(e).forEach(r=>{t[r]=e[r].field}),t}getSizeClass(e){return{regular:"text-regular",medium:"text-medium",large:"text-large","x-large":"text-x-large","xx-large":"text-xx-large",huge:"text-huge"}[e]||"text-regular"}getFontWeight(e){let t="font-weight-normal";return e&&(0,M.isTrue)(e)&&(t="font-weight-bolder"),t}getColor(e){return{yellow:"text-yellow",blue:"text-blue",green:"text-green",red:"text-red",purple:"text-purple",dark:"text-dark",grey:"text-grey"}[e]||""}getJustify(e){return{start:"justify-content-start",end:"justify-content-end",center:"justify-content-center",between:"justify-content-between",around:"justify-content-around"}[e]||"justify-content-center"}getAlign(e){return{start:"align-items-start",end:"align-items-end",center:"align-items-center",baseline:"align-items-baseline",stretch:"align-items-stretch"}[e]||"align-items-center"}getLayoutRowClass(e){let t="";return e&&e.class&&(t=e.class),t}getClass(e){let t="";return e&&(t=e.class),t=t+" "+this.getSizeClass(e.size)+" "+this.getFontWeight(e.bold)+" "+this.getColor(e.color),t}isEmptyFieldValue(e){return"string"==typeof e&&(e=e.trim()),null==e||typeof e>"u"||""===e||0===e.length}getLabel(e,t){let r="";return e&&e[t]&&(r=this.language.getFieldLabel(e[t])),r}getLayout(){return this.gridWidgetInput.layout.rows}buildStatistics(){this.gridWidgetInput.layout.rows.forEach(e=>{!e.cols||!e.cols.length||e.cols.forEach(t=>{if(t.statistic){if(t.store)return void(this.statistics[t.statistic]={type:t.statistic,store:t.store});this.statistics[t.statistic]={type:t.statistic,store:this.factory.create()},this.statistics[t.statistic].store.init(this.gridWidgetInput.queryArgs.module,{key:t.statistic,context:{...this.gridWidgetInput.queryArgs.context},params:{...this.gridWidgetInput.queryArgs.params}}).pipe((0,v.take)(1)).subscribe()}})})}setupLoading$(){const e=[];Object.keys(this.statistics).forEach(r=>e.push(this.statistics[r].store.loading$));let t=(0,S.of)([]);if(e.length<1)t=(0,S.of)([]);else if(1===e.length)t=e[0].pipe((0,v.map)(r=>[r]));else{let o,r=null;[r,...o]=e,t=r.pipe((0,S.combineLatestWith)(o))}this.loading$=t.pipe((0,v.map)(r=>{if(!r||r.length<1)return this.loading=!1,!1;let o=!0;return r.forEach(s=>{o=o&&s}),this.loading=o,o})),this.subs.push(this.loading$.subscribe())}setupReload(){this.gridWidgetInput.widgetConfig.reload$&&this.subs.push(this.gridWidgetInput.widgetConfig.reload$.subscribe(()=>{!1===this.loading&&(this.loading=!0,Object.keys(this.statistics).forEach(e=>{const t=this.statistics[e];t.store&&t.store.load(!1).pipe((0,v.take)(1)).subscribe()}))}))}setupVM(){let e=(0,S.of)([]).pipe((0,v.shareReplay)());const t=(0,S.of)(this.getLayout()).pipe((0,v.shareReplay)());if(this.statistics&&Object.keys(this.statistics).length>0){const r=[];if(Object.keys(this.statistics).forEach(o=>r.push(this.statistics[o].store.state$)),r.length<1)e=(0,S.of)([]);else if(1===r.length)e=r[0].pipe((0,v.map)(o=>[o]));else{let s,o=null;[o,...s]=r,e=o.pipe((0,S.combineLatestWith)(s))}}this.vm$=e.pipe((0,S.combineLatestWith)(t),(0,v.map)(([r,o])=>{const s={},c=[],l=[];return r.forEach(u=>{s[u.query.key]=u;const d=this.getLabel(u.statistic.metadata,"tooltip_title_key");d&&c.push(d);const f=this.getLabel(u.statistic.metadata,"descriptionKey");f&&l.push(f)}),{layout:o,statistics:s,tooltipTitleText:c.join(" | "),description:l.join(" | ")}}))}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject($e),n.\u0275\u0275directiveInject(os))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-grid-widget"]],inputs:{config:"config"},decls:3,vars:4,consts:[["class","p-3 widget-message",4,"ngIf"],["class","grid-widget d-flex flex-column","placement","auto","container","body",3,"ngbTooltip",4,"ngIf"],[1,"p-3","widget-message"],[3,"labelKey"],["placement","auto","container","body",1,"grid-widget","d-flex","flex-column",3,"ngbTooltip"],[4,"ngFor","ngForOf"],[3,"class",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"widget-entry-icon"],[3,"image","klass"],["class","widget-entry-value",4,"ngIf"],["class","widget-entry-loading",4,"ngIf"],[1,"widget-entry-value"],["mode","list",3,"type","field"],[1,"widget-entry-loading"],[1,"widget-entry-label","text-truncate"],[3,"labelKey","module"],[1,"text-truncate","widget-entry-label"],["class","widget-entry-dynamic-label",4,"ngIf"],[1,"widget-entry-dynamic-label"],[3,"context","fields","labelKey"]],template:function(t,r){1&t&&(n.\u0275\u0275template(0,c8,2,1,"div",0),n.\u0275\u0275template(1,M8,2,2,"div",1),n.\u0275\u0275pipe(2,"async")),2&t&&(n.\u0275\u0275property("ngIf",r.messageLabelKey),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!r.messageLabelKey&&n.\u0275\u0275pipeBind1(2,2,r.vm$)))},dependencies:[F.NgForOf,F.NgIf,lr,vc,zt,wn,vo,pe.NgbTooltip,F.AsyncPipe],encapsulation:2})}return i})();function S8(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275element(1,"scrm-button",1),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("config",e.internalConfig)}}let J1=(()=>{class i{config;status="maximised";internalConfig;buttonClasses=["minimise-button"];constructor(){}ngOnInit(){this.buildButton()}ngOnChanges(e){e.config&&this.buildButton()}buildButton(){const e=M.Button.fromButton(this.config);e.addClasses(this.buttonClasses),e.icon=this.getIcon(),e.onClick=()=>{this.config.onClick(),this.toggleStatus()},this.internalConfig=e}toggleStatus(){let e="minimised";"minimised"===this.status&&(e="maximised"),this.status=e,this.buildButton()}getIcon(){return"minimised"===this.status?"plus_thin":"minimise"}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-minimise-button"]],inputs:{config:"config",status:"status"},features:[n.\u0275\u0275NgOnChangesFeature],decls:1,vars:1,consts:[[4,"ngIf"],[3,"config"]],template:function(t,r){1&t&&n.\u0275\u0275template(0,S8,2,1,"ng-container",0),2&t&&n.\u0275\u0275property("ngIf",r.internalConfig)},dependencies:[F.NgIf,Vn],encapsulation:2})}return i})();function D8(i,a){if(1&i&&n.\u0275\u0275element(0,"scrm-close-button",9),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("config",e.getCloseButton())}}function w8(i,a){if(1&i&&n.\u0275\u0275element(0,"scrm-minimise-button",10),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("config",e.minimiseButton)("status",e.minimiseStatus)}}function E8(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",11),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(e.title)}}function x8(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",11),n.\u0275\u0275element(1,"scrm-label",12),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("labelKey",e.titleKey)}}function F8(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",2)(1,"div",3)(2,"div",4),n.\u0275\u0275template(3,D8,1,1,"scrm-close-button",5),n.\u0275\u0275template(4,w8,1,2,"scrm-minimise-button",6),n.\u0275\u0275projection(5,1),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(6,E8,2,1,"div",7),n.\u0275\u0275template(7,x8,2,1,"div",7),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(8,"div",8),n.\u0275\u0275projection(9,2),n.\u0275\u0275elementEnd()()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(3),n.\u0275\u0275property("ngIf",e.isClosable()),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.isCollapsible()),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",e.title),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.titleKey)}}const I8=[[["","panel-body",""]],[["","panel-icon-area",""]],[["","panel-header-button",""]]],A8=["[panel-body]","[panel-icon-area]","[panel-header-button]"];let Ea=(()=>{class i{klass="";bodyPadding=2;title;titleKey;mode="closable";isCollapsed$;close={klass:["btn","btn-outline-light","btn-sm"]};showHeader=!0;isCollapsed=!1;minimiseButton;minimiseStatus;buttonClasses=["btn","btn-outline-light","btn-sm"];subs=[];constructor(){}ngOnInit(){this.isCollapsed$&&this.subs.push(this.isCollapsed$.subscribe(e=>{this.isCollapsed=e,this.initMinimiseButton()})),this.initMinimiseButton()}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}getCloseButton(){if(!this.close)return null;const e=M.Button.fromButton(this.close);return e.addClasses(this.buttonClasses),this.close=e,e}isClosable(){return"closable"===this.mode}isCollapsible(){return"collapsible"===this.mode}initMinimiseButton(){this.minimiseButton={klass:["btn","btn-outline-light","btn-sm"],onClick:()=>{this.isCollapsed=!this.isCollapsed,this.initMinimiseStatus()}},this.initMinimiseStatus()}initMinimiseStatus(){this.minimiseStatus=this.isCollapsed?"minimised":"maximised"}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-panel"]],inputs:{klass:"klass",bodyPadding:"bodyPadding",title:"title",titleKey:"titleKey",mode:"mode",isCollapsed$:"isCollapsed$",close:"close",showHeader:"showHeader"},ngContentSelectors:A8,decls:4,vars:10,consts:[["class","card-header d-flex justify-content-between align-items-center",4,"ngIf"],[3,"ngbCollapse"],[1,"card-header","d-flex","justify-content-between","align-items-center"],[1,"flex-grow-1","align-items-center","d-flex"],[1,"d-flex","align-items-center"],[3,"config",4,"ngIf"],[3,"config","status",4,"ngIf"],["class","pl-1 panel-title",4,"ngIf"],[1,"panel-buttons","float-right"],[3,"config"],[3,"config","status"],[1,"pl-1","panel-title"],[3,"labelKey"]],template:function(t,r){1&t&&(n.\u0275\u0275projectionDef(I8),n.\u0275\u0275elementStart(0,"div"),n.\u0275\u0275template(1,F8,10,4,"div",0),n.\u0275\u0275elementStart(2,"div",1),n.\u0275\u0275projection(3),n.\u0275\u0275elementEnd()()),2&t&&(n.\u0275\u0275classMapInterpolate1("card panel-card ",r.klass,""),n.\u0275\u0275classProp("collapsed",r.isCollapsed),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.showHeader),n.\u0275\u0275advance(1),n.\u0275\u0275classMapInterpolate1("card-body p-",r.bodyPadding,""),n.\u0275\u0275property("ngbCollapse",r.isCollapsed))},dependencies:[F.NgIf,Ou,pe.NgbCollapse,J1,zt],encapsulation:2})}return i})();function T8(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",5),n.\u0275\u0275projection(1),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275property("@widgetContentFade",e.displayContent?"true":"false")}}const N8=[[["","widget-body",""]]],L8=["[widget-body]"];let as=(()=>{class i{languageStore;title="";mode="none";displayContent=!0;constructor(e){this.languageStore=e}ngOnInit(){}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject($e))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-widget-panel"]],inputs:{title:"title",mode:"mode"},ngContentSelectors:L8,decls:5,vars:3,consts:[[1,"accordion","widget-panel","mr-0","shadow-sm"],["bodyPadding","0",3,"mode","title"],["panel-header-button",""],["panel-body",""],["class","widget collapse show open-close-container","data-parent",".widget-panel",4,"ngIf"],["data-parent",".widget-panel",1,"widget","collapse","show","open-close-container"]],template:function(t,r){1&t&&(n.\u0275\u0275projectionDef(N8),n.\u0275\u0275elementStart(0,"div",0)(1,"scrm-panel",1),n.\u0275\u0275element(2,"span",2),n.\u0275\u0275elementStart(3,"div",3),n.\u0275\u0275template(4,T8,2,1,"div",4),n.\u0275\u0275elementEnd()()()),2&t&&(n.\u0275\u0275advance(1),n.\u0275\u0275property("mode",r.mode)("title",r.title),n.\u0275\u0275advance(3),n.\u0275\u0275property("ngIf",r.displayContent))},dependencies:[F.NgIf,Ea],encapsulation:2,data:{animation:[(0,Wt.trigger)("widgetFade",[(0,Wt.transition)("void => *",[(0,Wt.style)({transform:"translateX(100%)",opacity:0}),(0,Wt.animate)("500ms",(0,Wt.style)({transform:"translateX(0)",opacity:1}))]),(0,Wt.transition)("* => void",[(0,Wt.style)({transform:"translateX(0)",opacity:1}),(0,Wt.animate)("500ms",(0,Wt.style)({transform:"translateX(100%)",opacity:0}))])]),(0,Wt.trigger)("widgetContentFade",[(0,Wt.transition)("void => *",[(0,Wt.style)({transform:"translateY(-5%)",opacity:0}),(0,Wt.animate)("500ms",(0,Wt.style)({transform:"translateY(0)",opacity:1}))]),(0,Wt.transition)("* => void",[(0,Wt.style)({transform:"translateY(0)",opacity:1}),(0,Wt.animate)("500ms",(0,Wt.style)({transform:"translateY(-5%)",opacity:0}))])])]}})}return i})(),Q1=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,cn]})}return i})(),eo=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,cn,Ja,pe.NgbModule,Q1,Ut]})}return i})(),Lr=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Mn,eo]})}return i})(),xd=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Jn,qr,Lr,Ut,Mn,_o,pe.NgbTooltipModule]})}return i})();function O8(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",5)(1,"div",6)(2,"strong"),n.\u0275\u0275text(3),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(4,"div",7),n.\u0275\u0275text(5),n.\u0275\u0275elementEnd()()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(3),n.\u0275\u0275textInterpolate(e.getColumnLabel("LBL_CHECKSYS_TITLE")),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate1(" ",e.getColumnLabel("ERR_CHECKSYS")," ")}}function B8(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"span",14)(1,"strong"),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd()()),2&i){const e=n.\u0275\u0275nextContext().$implicit,t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate1(" ",t.getColumnLabel(e.value.info)," ")}}function R8(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div"),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext().$implicit,t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",t.getColumnLabel(e.value.error)," ")}}function j8(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"li"),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&i){const e=a.$implicit;n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",e," ")}}function k8(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",15)(1,"ul"),n.\u0275\u0275template(2,j8,2,1,"li",4),n.\u0275\u0275elementEnd()()),2&i){const e=n.\u0275\u0275nextContext().$implicit;n.\u0275\u0275advance(2),n.\u0275\u0275property("ngForOf",e.value.data)}}function P8(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"li")(1,"div",8)(2,"div")(3,"span"),n.\u0275\u0275element(4,"scrm-image",9),n.\u0275\u0275elementStart(5,"strong",10),n.\u0275\u0275text(6),n.\u0275\u0275elementEnd()(),n.\u0275\u0275template(7,B8,3,1,"span",11),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(8,R8,2,1,"div",12),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(9,k8,3,1,"div",13),n.\u0275\u0275elementEnd()),2&i){const e=a.$implicit,t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275classMapInterpolate1("alert ",t.getAlertType(e.value),""),n.\u0275\u0275advance(3),n.\u0275\u0275property("image",t.getAlertIcon(e.value)),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate1(" ",t.getColumnLabel(e.value.label)," "),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",""!==e.value.info),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",""!==e.value.error),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",0!==e.value.data.length)}}const ss={success:{alertClass:"alert-success",alertIcon:"info-circle"},error:{alertClass:"alert-danger",alertIcon:"exclamation-circle"},warning:{alertClass:"alert-warning",alertIcon:"exclamation-triangle"},info:{alertClass:"alert-info",alertIcon:"info-circle"},light:{alertClass:"alert-light",alertIcon:"exclamation-circle"}};let Fd=(()=>{class i{appState;languageStore;modal;errors;titleKey="LBL_CHECKSYS_TITLE";closeButtonIcon;closeButton;saveButton;constructor(e,t,r){this.appState=e,this.languageStore=t,this.modal=r}getHeaderLabel(){return this.languageStore.getFieldLabel("LBL_CHECKSYS_TITLE")}getColumnLabel(e){const t=this.languageStore.getFieldLabel(e,this.appState.getModule());return(0,M.isEmptyString)(t)?e:t}ngOnInit(){console.log(this.errors),this.closeButtonIcon={klass:["btn","btn-outline-light","btn-sm"],onClick:()=>{this.modal.close({type:"close-button"})}},this.closeButton={klass:["btn","modal-button-cancel"],labelKey:"LBL_COLUMN_SELECTOR_CLOSE_BUTTON",onClick:()=>{this.modal.close({type:"close-button"})}}}getAlertType(e){return"error"===e.status?ss[e.type].alertClass:ss[e.status].alertClass}getAlertIcon(e){return"error"===e.status?ss[e.type].alertIcon:ss[e.status].alertIcon}returnZero(){return 0}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(Xt),n.\u0275\u0275directiveInject($e),n.\u0275\u0275directiveInject(pe.NgbActiveModal))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-install-error-modal"]],inputs:{errors:"errors"},decls:8,vars:11,consts:[[3,"closable","close","title","titleKey","headerKlass","bodyKlass"],["modal-body",""],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"list-style-none"],[4,"ngFor","ngForOf"],["role","alert",1,"alert","alert-danger"],[1,"alert-heading"],[1,"alert-desc"],["role","alert"],[3,"image"],[2,"margin-left","2px"],["style","float:right",4,"ngIf"],[4,"ngIf"],["class","alert alert-light","role","alert",4,"ngIf"],[2,"float","right"],["role","alert",1,"alert","alert-light"]],template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"scrm-modal",0)(1,"div",1),n.\u0275\u0275elementContainerStart(2),n.\u0275\u0275template(3,O8,6,2,"div",2),n.\u0275\u0275elementStart(4,"div")(5,"ul",3),n.\u0275\u0275template(6,P8,10,8,"li",4),n.\u0275\u0275pipe(7,"keyvalue"),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementContainerEnd(),n.\u0275\u0275elementEnd()()),2&t&&(n.\u0275\u0275property("closable",!0)("close",r.closeButtonIcon)("title",r.getHeaderLabel())("titleKey",r.titleKey)("headerKlass","alert-header")("bodyKlass","alert-body"),n.\u0275\u0275advance(3),n.\u0275\u0275property("ngIf",r.errors.hasValidationError&&!0===r.errors.hasValidationError),n.\u0275\u0275advance(3),n.\u0275\u0275property("ngForOf",n.\u0275\u0275pipeBind2(7,8,r.errors.data,r.returnZero)))},dependencies:[F.NgForOf,F.NgIf,da,wn,F.KeyValuePipe],encapsulation:2})}return i})(),$8=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i,bootstrap:[Fd]});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,jp,Ja,yo,Ut,cn,pe.NgbModule,pe.NgbAlertModule,Mn]})}return i})();class xa extends M.ActionHandler{}let X1=(()=>{class i extends xa{moduleNameMapper;router;key="create";modes=["list"];constructor(e,t){super(),this.moduleNameMapper=e,this.router=t}run(e){const t=e.module,r=e?.action?.moduleAction??"edit",o=e?.parentId??"",s=e.parentModule??"",c=`/${t}/${r}`,l={return_module:this.moduleNameMapper.toLegacy(s),return_action:"DetailView",return_id:o,relate_to:s,relate_id:o};this.addAdditionalFields(e,l),this.addParams(e,l),this.router.navigate([c],{queryParams:l}).then()}shouldDisplay(){return!0}addAdditionalFields(e,t){const r=e.store.parentRecord&&e.store.parentRecord.attributes||{};if(!r&&!Object.keys(r).length)return;const o=e.action.additionalFields??{};(Object.keys(o)||[]).forEach(c=>{if(!c||!o[c])return;const u=(0,et.Z)(r,o[c],null);(0,M.isVoid)(u)||(t[c]=u)})}addParams(e,t){const r=e.action.extraParams??{};(Object.keys(r)||[]).forEach(s=>{!s||!r[s]||(t[s]=r[s])})}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Tn),n.\u0275\u0275inject(Rt.Router))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Y1=(()=>{class i extends xa{modalService;message;asyncActionService;key="select";modes=["list"];constructor(e,t,r){super(),this.modalService=e,this.message=t,this.asyncActionService=r}shouldDisplay(e){return!0}run(e){this.showSelectModal(e)}showSelectModal(e){const t=this.modalService.open(_a,{size:"xl",scrollable:!0}),r=e.module;t.componentInstance.module=r,t.componentInstance.parentModule=e?.parentModule??"",t.componentInstance.multiSelect=!0,t.componentInstance.multiSelectButtonLabel="LBL_LINK",t.result.then(o=>{if(!o||!o.selection||!o.selection.selected)return;const s=this.getSelectedIds(o);let c=e.subpanelMeta.get_subpanel_data;const l=e.subpanelMeta?.collection_list??null;l&&l?.[r]?.get_subpanel_data&&(c=l[r].get_subpanel_data),this.runAsyncAction({action:"record-select",module:e.store.parentModule,id:e.store.parentId||"",payload:{baseModule:e.parentModule,baseRecordId:e.parentId,linkField:c,relateModule:r,relateRecordIds:s}},e)})}getSelectedIds(e){const t=[];return Object.keys(e.selection.selected).forEach(r=>{r&&t.push(r)}),t}runAsyncAction(e,t){this.message.removeMessages(),this.asyncActionService.run("record-select",e).pipe((0,v.take)(1)).subscribe(()=>{t.store.load(!1).pipe((0,v.take)(1)).subscribe(),t.store.loadAllStatistics(!1).pipe((0,v.take)(1)).subscribe()})}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(pe.NgbModal),n.\u0275\u0275inject(dt),n.\u0275\u0275inject(Yt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),eC=(()=>{class i extends xa{key="async-process";modes=M.ALL_VIEW_MODES;constructor(){super()}run(e){}shouldDisplay(e){return!0}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),tC=(()=>{class i extends xa{key="show-filter";modes=["list"];shouldDisplay(e){return!0}getStatus(e){return this.isAnyFilterApplied(e.store)?"active":""}run(e){e.store.toggleFilter()}isAnyFilterApplied(e){return e.hasActiveFilter()||!e.areAllCurrentCriteriaFilterEmpty()}static \u0275fac=function(){let e;return function(r){return(e||(e=n.\u0275\u0275getInheritedFactory(i)))(r||i)}}();static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),nC=(()=>{class i extends xa{key="clear-filter";modes=["list"];shouldDisplay(e){return this.isAnyFilterApplied(e.store)}run(e){e.store.clearFilter()}isAnyFilterApplied(e){return e.hasActiveFilter()||!e.areAllCurrentCriteriaFilterEmpty()}static \u0275fac=function(){let e;return function(r){return(e||(e=n.\u0275\u0275getInheritedFactory(i)))(r||i)}}();static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),cs=(()=>{class i extends vi{create;select;async;showFilter;clearFilter;constructor(e,t,r,o,s){super(),this.create=e,this.select=t,this.async=r,this.showFilter=o,this.clearFilter=s,r.modes.forEach(c=>this.actions[c][r.key]=r),e.modes.forEach(c=>this.actions[c][e.key]=e),t.modes.forEach(c=>this.actions[c][t.key]=t),o.modes.forEach(c=>this.actions[c][o.key]=o),s.modes.forEach(c=>this.actions[c][s.key]=s)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(X1),n.\u0275\u0275inject(Y1),n.\u0275\u0275inject(eC),n.\u0275\u0275inject(tC),n.\u0275\u0275inject(nC))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function U8(i,a){if(1&i&&n.\u0275\u0275element(0,"scrm-button-group",3),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("config$",e.config$)}}function V8(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"div",1)(2,"div"),n.\u0275\u0275template(3,U8,1,1,"scrm-button-group",2),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(2),n.\u0275\u0275classMap(e.klass),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.config$)}}let iC=(()=>{class i{languageStore;actionManager;languages;screenSize;systemConfigStore;klass="";record;config;limitConfigKey="listview_line_actions_limits";configState=new S.BehaviorSubject({buttons:[]});config$=this.configState.asObservable();actions;vm$;buttonClass="line-action-item line-action";buttonGroupClass="float-right";subs=[];screen=qn.Medium;defaultBreakpoint=3;breakpoint;constructor(e,t,r,o,s){this.languageStore=e,this.actionManager=t,this.languages=r,this.screenSize=o,this.systemConfigStore=s}ngOnInit(){this.subs.push(this.config.getActions({record:this.record}).pipe((0,S.combineLatestWith)(this.screenSize.screenSize$,this.languages.vm$),(0,v.map)(([e,t,r])=>{t&&(this.screen=t),this.configState.next(this.getButtonGroupConfig(e)),this.actions=e})).subscribe())}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}getButtonGroupConfig(e){const t=[],r=[];e.forEach(c=>{const l=this.buildButton(c);c.params&&c.params.expanded?t.push(l):r.push(l)});let o=e.length;const s=t.concat(r);return{buttonKlass:[this.buttonClass],dropdownLabel:this.languages.getAppString("LBL_ACTIONS")||"",breakpoint:o,dropdownOptions:{placement:["bottom-right"],wrapperKlass:[this.buttonGroupClass]},buttons:s}}getBreakpoint(){const e=this.systemConfigStore.getConfigValue(this.limitConfigKey);return this.screen&&e&&e[this.screen]?(this.breakpoint=e[this.screen],this.breakpoint):this.breakpoint?this.breakpoint:this.defaultBreakpoint}buildButton(e){const t={titleKey:e.labelKey||"",klass:this.buttonClass,icon:e.icon||"",onClick:()=>{this.config.runAction(e,{module:this.record&&this.record.module||"",record:this.record})}};e.icon&&(t.icon=e.icon);const r=e?.params?.debounceClick??null;return t.debounceClick=!0,(0,M.isFalse)(r)&&(t.debounceClick=!1),e.status&&M.Button.appendClasses(t,[e.status]),t}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject($e),n.\u0275\u0275directiveInject(cs),n.\u0275\u0275directiveInject($e),n.\u0275\u0275directiveInject(hi),n.\u0275\u0275directiveInject(vt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-line-action-menu"]],inputs:{klass:"klass",record:"record",config:"config",limitConfigKey:"limitConfigKey"},decls:1,vars:1,consts:[[4,"ngIf"],["id","line-action-div",1,"line-action","float-right"],[3,"config$",4,"ngIf"],[3,"config$"]],template:function(t,r){1&t&&n.\u0275\u0275template(0,V8,4,4,"ng-container",0),2&t&&n.\u0275\u0275property("ngIf",r.actions)},dependencies:[F.NgIf,mo],encapsulation:2})}return i})(),rC=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,pe.NgbModule,Mn,Rt.RouterModule,Fr]})}return i})(),oC=(()=>{class i{loadMoreButton;static \u0275fac=function(t){return new(t||i)};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-load-more"]],inputs:{loadMoreButton:"loadMoreButton"},decls:3,vars:1,consts:[[1,"float-right"],[1,"",3,"config"],["image","plus_thin",1,"small",2,"fill","#FFFFFF"]],template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"div",0)(1,"scrm-button",1),n.\u0275\u0275element(2,"scrm-image",2),n.\u0275\u0275elementEnd()()),2&t&&(n.\u0275\u0275advance(1),n.\u0275\u0275property("config",r.loadMoreButton))},dependencies:[wn,Vn],encapsulation:2})}return i})(),aC=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Mn,cn]})}return i})();class sC{url="";md5="";width=0;height=0}let el=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-logo-ui"]],decls:1,vars:0,consts:[["image","company_logo",1,"logo"]],template:function(t,r){1&t&&n.\u0275\u0275element(0,"scrm-image",0)},dependencies:[wn],encapsulation:2})}return i})(),tl=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Mn]})}return i})();function z8(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"a",1),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(e);const r=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(r.doLogout())}),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()}if(2&i){const e=a.ngIf,t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(e.appStrings[t.logout.logoutAction.label]||"")}}let cC=(()=>{class i{auth;languageStore;logout={logoutAction:{label:"LBL_LOGOUT"}};languages$=(0,S.of)({});vm$=this.languages$.pipe((0,v.map)(e=>({appStrings:e.appStrings||{},appListStrings:e.appListStrings||{}})));constructor(e,t){this.auth=e,this.languageStore=t,this.languages$=t?.vm$??(0,S.of)({})}doLogout(){this.auth.logout()}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(oi),n.\u0275\u0275directiveInject($e))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-logout-ui"]],decls:2,vars:3,consts:[[4,"ngIf"],[1,"dropdown-item","global-links-sublink",3,"click"]],template:function(t,r){1&t&&(n.\u0275\u0275template(0,z8,3,1,"ng-container",0),n.\u0275\u0275pipe(1,"async")),2&t&&n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(1,1,r.vm$))},dependencies:[F.NgIf,F.AsyncPipe],encapsulation:2})}return i})(),lC=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule]})}return i})();function G8(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275text(1),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext().$implicit,t=n.\u0275\u0275nextContext(2).ngIf;n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(t[e.labelKey]||e.labelKey||"")}}function W8(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275text(1),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext().$implicit;n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(e.text)}}function K8(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"div",5),n.\u0275\u0275listener("click",function(){const o=n.\u0275\u0275restoreView(e).$implicit,s=n.\u0275\u0275nextContext(3);return n.\u0275\u0275resetView(s.close(o))}),n.\u0275\u0275template(1,G8,2,1,"ng-container",6),n.\u0275\u0275template(2,W8,2,1,"ng-container",6),n.\u0275\u0275elementStart(3,"a",7),n.\u0275\u0275listener("click",function(){const o=n.\u0275\u0275restoreView(e).$implicit,s=n.\u0275\u0275nextContext(3);return n.\u0275\u0275resetView(s.close(o))}),n.\u0275\u0275elementStart(4,"span",8),n.\u0275\u0275text(5,"\xd7"),n.\u0275\u0275elementEnd()()()}if(2&i){const e=a.$implicit;n.\u0275\u0275classMapInterpolate1("message ",e.type," alert-dismissible fade show shadow"),n.\u0275\u0275property("@fade",void 0),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.labelKey),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.text&&!e.labelKey)}}function H8(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",3),n.\u0275\u0275template(1,K8,6,6,"div",4),n.\u0275\u0275elementEnd()),2&i){const e=a.ngIf;n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",e)}}function Z8(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",1),n.\u0275\u0275template(1,H8,2,1,"div",2),n.\u0275\u0275pipe(2,"async"),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(2,1,e.messages$))}}let q8=(()=>{class i{messageService;languages;messages$;appStrings$;constructor(e,t){this.messageService=e,this.languages=t,this.appStrings$=t.appStrings$}ngOnInit(){this.messages$=this.messageService.messages$}close(e){this.messageService.contains(e,!0)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(dt),n.\u0275\u0275directiveInject($e))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-message-ui"]],decls:2,vars:3,consts:[["class","container-fluid alert-fixed message-wrapper",4,"ngIf"],[1,"container-fluid","alert-fixed","message-wrapper"],["class","d-flex justify-content-center flex-column align-items-center message-container",4,"ngIf"],[1,"d-flex","justify-content-center","flex-column","align-items-center","message-container"],["role","alert",3,"class","click",4,"ngFor","ngForOf"],["role","alert",3,"click"],[4,"ngIf"],["type","button","data-dismiss","alert","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"]],template:function(t,r){1&t&&(n.\u0275\u0275template(0,Z8,3,3,"div",0),n.\u0275\u0275pipe(1,"async")),2&t&&n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(1,1,r.appStrings$))},dependencies:[F.NgForOf,F.NgIf,F.AsyncPipe],encapsulation:2,data:{animation:[(0,Wt.trigger)("fade",[(0,Wt.transition)(":enter",(0,Wt.useAnimation)(pc.fadeIn,{params:{timing:.5,delay:0}})),(0,Wt.transition)(":leave",(0,Wt.useAnimation)(pc.fadeOut,{params:{timing:.5,delay:0}}))])]}})}return i})(),J8=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule]})}return i})(),Q8=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,yo]})}return i})(),uC=(()=>{class i{buttonUtils;config;config$;activeModal=null;buttonGroup$;defaultButtonGroup={breakpoint:4,wrapperKlass:["modal-buttons"],buttonKlass:["modal-button","btn","btn-sm"],buttons:[]};constructor(e,t){this.buttonUtils=e,this.config=t;const r=this.config.getConfigValue("ui");r&&r.modal_button_group_breakpoint&&(this.defaultButtonGroup.breakpoint=r.modal_buttons_collapse_breakpoint)}ngOnInit(){this.config$&&(this.buttonGroup$=this.config$.pipe((0,v.map)(e=>this.mapButtonGroup(e))))}mapButtonGroup(e){const t=(0,Pk.Z)({...e},(0,M.deepClone)(this.defaultButtonGroup));return this.mapButtons(t),t}mapButtons(e){const t=e.buttons||[];e.buttons=[],t.length>0&&t.forEach(r=>{const o=this.buttonUtils.addOnClickPartial(r,this.activeModal);e.buttons.push(o)})}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(C0),n.\u0275\u0275directiveInject(vt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-modal-button-group"]],inputs:{config$:"config$",activeModal:"activeModal"},decls:1,vars:1,consts:[[3,"config$"]],template:function(t,r){1&t&&n.\u0275\u0275element(0,"scrm-button-group",0),2&t&&n.\u0275\u0275property("config$",r.buttonGroup$)},dependencies:[mo],encapsulation:2})}return i})(),ls=(()=>{class i{activeModal;titleKey;textKey;buttons=[];buttonGroup$;closeButton;constructor(e){this.activeModal=e}ngOnInit(){this.buttonGroup$=(0,S.of)({buttons:this.buttons}),this.closeButton={klass:["btn","btn-outline-light","btn-sm"],onClick:()=>{this.activeModal.close({type:"close-button"})}}}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(pe.NgbActiveModal))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-message-modal"]],inputs:{titleKey:"titleKey",textKey:"textKey",buttons:"buttons"},decls:6,vars:6,consts:[["klass","message-modal",3,"closable","close","title"],["modal-body","",1,"p-3"],[3,"labelKey"],["modal-footer",""],[3,"activeModal","config$"]],template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"scrm-modal",0)(1,"div",1)(2,"span"),n.\u0275\u0275element(3,"scrm-label",2),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(4,"div",3),n.\u0275\u0275element(5,"scrm-modal-button-group",4),n.\u0275\u0275elementEnd()()),2&t&&(n.\u0275\u0275property("closable",!0)("close",r.closeButton)("title",r.titleKey||""),n.\u0275\u0275advance(3),n.\u0275\u0275property("labelKey",r.textKey),n.\u0275\u0275advance(2),n.\u0275\u0275property("activeModal",r.activeModal)("config$",r.buttonGroup$))},dependencies:[da,zt,uC],encapsulation:2,data:{animation:[(0,Wt.trigger)("modalFade",[(0,Wt.transition)("void <=> *",[(0,Wt.animate)("800ms")])])]}})}return i})(),dC=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Fr]})}return i})(),X8=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,yo,Fr,Ut,dC,pe.NgbModule]})}return i})(),Id=(()=>{class i{title="";static \u0275fac=function(t){return new(t||i)};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-module-title"]],inputs:{title:"title"},decls:2,vars:3,template:function(t,r){1&t&&(n.\u0275\u0275text(0),n.\u0275\u0275pipe(1,"uppercase")),2&t&&n.\u0275\u0275textInterpolate1("\n",n.\u0275\u0275pipeBind1(1,1,r.title),"\n")},dependencies:[F.UpperCasePipe],encapsulation:2})}return i})(),us=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule]})}return i})();var ds=function(i){return i.none="",i.blank="_blank",i.parent="_parent",i.self="_self",i.top="_top",i}(ds||{});class Y8{label;url;route;target=ds.none}class fC{routeConverter;moduleNavigation;preferences;language;appState;authenticated=!0;logo=new sC;useGroupTabs=!1;globalActions=[];currentUser={id:"",firstName:"",lastName:""};all={modules:[],extra:[]};menu=[];current;constructor(a,e,t,r,o){this.routeConverter=a,this.moduleNavigation=e,this.preferences=t,this.language=r,this.appState=o}resetMenu(){this.menu=[],this.globalActions=[],this.all.modules=[],this.all.extra=[],this.current=null,this.currentUser={}}buildUserActionMenu(a,e){this.currentUser.id=e.id,this.currentUser.firstName=e.firstName,this.currentUser.lastName=e.lastName,a&&a.forEach(t=>{const r=t.name;let o=t.url;if("logout"===r)return;let s=ds.none;"training"===r?s=ds.blank:o=this.routeConverter.toFrontEndLink(o);const c=this.language.getAppString(t.labelKey)??"";this.globalActions.push({link:{url:o,label:c,target:s}})})}build(a,e,t){this.buildUserActionMenu(a.userActionMenu,e);const r=this.preferences.getUserPreference("navigation_paradigm"),o="on"===this.preferences.getUserPreference("sort_modules_by_name");"m"!==r?"gm"!==r||this.buildGroupedNavigation(a,t,o):this.buildModuleNavigation(a,t,o)}buildGroupTabMenu(a,e,t,r,o){const s=[],c=[];a&&a.length>0&&(a.forEach(u=>{c.push(this.buildTabMenuItem(u,e[u]))}),o&&this.sortMenuItems(c));let l=0;r.forEach(u=>{l<=t&&s.push(this.buildTabGroupedMenuItem(u.labelKey,u.modules,e,o)),l++}),this.menu=s,this.all.modules=c}buildModuleNavigation(a,e,t){(0,M.ready)([a.tabs,a.modules])&&(this.buildTabMenu(a.tabs,a.modules,e,t),this.buildSelectedModule(a))}buildGroupedNavigation(a,e,t){(0,M.ready)([a.tabs,a.modules,a.groupedTabs])&&(this.buildGroupTabMenu(a.tabs,a.modules,e,a.groupedTabs,t),this.buildSelectedModule(a))}buildSelectedModule(a){const e=this.appState.getModule()??"";""===e||"home"===e||a.modules[e]&&(this.current=this.buildTabMenuItem(e,a.modules[e]))}buildTabMenu(a,e,t,r){const o=[],s=[];if(!a||0===a.length)return this.menu=o,void(this.all.modules=s);let c=0;a.forEach(l=>{const u=this.buildTabMenuItem(l,e[l]);"home"===l||this.appState.getModule()===l||c>=t?s.push(u):o.push(u),c++}),r&&(this.sortMenuItems(o),this.sortMenuItems(s)),this.menu=o,this.all.modules=s}buildTabGroupedMenuItem(a,e,t,r){return{link:{label:this.language.getAppString(a)||a,url:"",route:null,params:null},icon:"",submenu:this.buildGroupedMenu(e,t,r)}}buildGroupedMenu(a,e,t){const r=[];let o=null;return a.forEach(s=>{const c=e[s];if(!c)return;const l=this.buildTabMenuItem(s,c);"home"!==s?r.push(l):o=l}),t&&this.sortMenuItems(r),o&&r.unshift(o),r}buildTabMenuItem(a,e){e.name&&(a=e.name);const t=this.moduleNavigation.getModuleRoute(e),r=this.language.getLanguageStrings()?.appListStrings??{},o={link:{label:this.moduleNavigation.getModuleLabel(e,r),url:t.url,route:t.route,params:null},icon:"home"===a?"home":"",submenu:[],module:a??null,isGroupedMenu:!1};let s=!1;return e&&e.menu.forEach(c=>{const l=c.sublinks||[],u=this.buildSubMenuItem(a,c,l);o.submenu.push(u),l.length>0&&(s=!0)}),o.isGroupedMenu=s,o}buildSubMenuItem(a,e,t){const r=this.moduleNavigation.getActionRoute(e);return{link:{label:this.moduleNavigation.getActionLabel(a,e,this.language.getLanguageStrings()),url:r.url,route:r.route,params:r.params,process:r.process},icon:e.icon||"",submenu:t.map(s=>this.buildSubMenuItem(a,s,[]))}}sortMenuItems(a){a.sort((e,t)=>{const r=e.link.label.toUpperCase(),o=t.link.label.toUpperCase();return r<o?-1:r>o?1:0})}}let to=(()=>{class i{moduleNameMapper;actionNameMapper;systemConfigStore;constructor(e,t,r){this.moduleNameMapper=e,this.actionNameMapper=t,this.systemConfigStore=r}toFrontEndLink(e){return"#/"+this.toFrontEndRoute(e)}toFrontEndRoute(e){if(e&&e.includes("/#/")){const o=e.split("/#/");return o.length<2?"/":o[1]}const t=this.parse(e);if(!t)return"/";let r=this.buildRoute(t.module,t.action,t.record);return r+=this.buildQueryString(t.params,["module","action","record"]),r}toLegacy(e,t){let r="./legacy/index.php";const o={...t};return e.module&&(o.module=this.moduleNameMapper.toLegacy(e.module)),e.action&&(o.action=this.actionNameMapper.toLegacy(e.action)),e.record&&(o.record=e.record),r+=this.buildQueryString(o),r}parse(e){const t=new Rt.DefaultUrlSerializer,o=e.replace("/legacy","").split("?");if(o.length<2)return null;const s=t.parse("/?"+o[1]),c=s.queryParamMap;return{module:c.get("module")||"",action:c.get("action")||"",record:c.get("record")||"",params:s.queryParams}}parseRouteURL(e){return{module:e[0]?.path??"",action:e[1]?.path??"index",record:e[2]?.path??""}}parseRouteInfoFromUrlTree(e){return this.parseRouteURL(e.root.children[Rt.PRIMARY_OUTLET].segments)}isClassicViewRoute(e){const t=this.systemConfigStore.getConfigValue("module_routing"),r=this.parseRouteInfoFromUrlTree(e),o=r.module;return!t[o]||!t[o][r.action]}matchesActiveRoute(e,t){let o=!0;return[{name:"module",map:s=>s&&this.mapModuleToFrontend(s)},{name:"action",map:s=>s&&this.mapActionToFrontEnd(s)},{name:"record",map:s=>s}].forEach(s=>{!e.snapshot.params[s.name]&&!t[s.name]||(o=o&&e.snapshot.params[s.name]===s.map(t[s.name]))}),o}buildRoute(e,t,r){let s=`${this.mapModuleToFrontend(e)}`;return t&&(s+=`/${this.mapActionToFrontEnd(t)}`),r&&(s+=`/${r}`),s}buildQueryString(e,t=[]){let r=new Dr.HttpParams;return Object.keys(e).forEach(o=>{t.includes(o)||(r=r.set(o,e[o]))}),r.keys().length>0?"?"+r.toString():""}mapModuleToFrontend(e){return this.moduleNameMapper.toFrontend(e)}mapActionToFrontEnd(e){return this.actionNameMapper.toFrontend(e)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Tn),n.\u0275\u0275inject(Co),n.\u0275\u0275inject(vt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();class Ad{actionManager;asyncActionService;message;confirmation;language;selectModalService;metadata;defaultActions={detail:[],list:[],edit:[],create:[],massupdate:[]};constructor(a,e,t,r,o,s,c){this.actionManager=a,this.asyncActionService=e,this.message=t,this.confirmation=r,this.language=o,this.selectModalService=s,this.metadata=c}runAction(a,e=null){const t=a&&a.params||{},s=a.params&&a.params.selectModal,c=s&&s.module;t.displayConfirmation?this.confirmation.showModal(t.confirmationLabel||"",()=>{c?this.showSelectModal(s.module,a,e):this.callAction(a,e)}):c?this.showSelectModal(s.module,a,e):this.callAction(a,e)}showSelectModal(a,e,t=null){this.selectModalService.showSelectModal(a,r=>{if(r){const{fields:o,formGroup:s,...c}=r;e.params.modalRecord=c}this.callAction(e,t)})}getActionName(a){return`${a.key}`}parseModeActions(a,e,t=null){if(!a)return[];const r={list:[],detail:[],edit:[],create:[],massupdate:[]};a&&a.length&&a.forEach(s=>{!s.modes||!s.modes.length||s.modes.forEach(c=>{!r[c]&&!s.asyncProcess||r[c].push(s)})}),r.detail=r.detail.concat(this.defaultActions.detail??[]),r.list=r.list.concat(this.defaultActions.list??[]),r.edit=r.edit.concat(this.defaultActions.edit??[]),r.create=r.create.concat(this.defaultActions.create??[]),r.massupdate=r.massupdate.concat(this.defaultActions.massupdate??[]);const o=[];return r[e].forEach(s=>{const c=this.actionManager.getHandler(s,e);if(c){const d=this.buildActionData(s,t);if(!this.shouldDisplay(c,d))return;s.status=c.getStatus(d)||""}const u=this.language.getFieldLabel(s.labelKey,t&&t.module||"");o.push({...s,label:u})}),o}shouldDisplay(a,e){return a&&a.shouldDisplay(e)}callAction(a,e=null){a.asyncProcess?this.runAsyncAction(a,e):this.runFrontEndAction(a,e)}runAsyncAction(a,e=null){const t=this.getActionName(a),r=this.getModuleName(e);this.message.removeMessages();const o=this.buildActionInput(a,t,r,e);this.asyncActionService.run(t,o).pipe((0,v.take)(1)).subscribe(s=>{this.afterAsyncAction(t,r,o,s,a,e)})}afterAsyncAction(a,e,t,r,o,s){this.shouldReload(r)&&this.reload(o,r,s),this.reloadMetadata(e,o,r,s)}reloadMetadata(a,e,t,r){const o=[];this.shouldReloadRecentlyViewed(t)&&o.push(this.metadata.typeKeys.recentlyViewed),this.shouldReloadFavorites(t)&&o.push(this.metadata.typeKeys.favorites),o&&o.length&&this.metadata.reloadModuleMetadata(a,o,!1).pipe((0,v.take)(1)).subscribe()}shouldReloadRecentlyViewed(a){return!(!a.data||!a.data.reloadRecentlyViewed)}shouldReloadFavorites(a){return!(!a.data||!a.data.reloadFavorites)}shouldReload(a){return!(!a.data||!a.data.reload)}runFrontEndAction(a,e=null){const t=this.buildActionData(a,e);this.actionManager.run(a,this.getMode(),t)}}let Nn=(()=>{class i{modalService;constructor(e){this.modalService=e}showModal(e,t){const r=this.modalService.open(ls);r.componentInstance.textKey=e??"LBL_GENERIC_CONFIRMATION",r.componentInstance.buttons=[{labelKey:"LBL_CANCEL",klass:["btn-secondary"],onClick:o=>o.dismiss()},{labelKey:"LBL_PROCEED",klass:["btn-main"],onClick:o=>{t(),o.close()}}]}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(pe.NgbModal))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),kn=(()=>{class i{languageStore;message;modalService;constructor(e,t,r){this.languageStore=e,this.message=t,this.modalService=r}showSelectModal(e,t=null){const r=this.modalService.open(_a,{size:"xl",scrollable:!0});r.componentInstance.module=e,r.result.then(o=>{if(!o||!o.selection||!o.selection.selected)return;const s=this.getSelectedRecord(o);if(s.id)null!==t&&t(s);else{let c=this.languageStore.getFieldLabel("ERROR_NO_RECORD");this.message.addDangerMessage(c)}})}getSelectedRecord(e){let t="";Object.keys(e.selection.selected).some(o=>(t=o,!0));let r=null;return e.records.some(o=>{if(o&&o.id===t)return r=o,!0}),r}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject($e),n.\u0275\u0275inject(dt),n.\u0275\u0275inject(pe.NgbModal))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),dr=(()=>{class i extends Ad{actionManager;asyncActionService;message;confirmation;language;selectModalService;metadata;constructor(e,t,r,o,s,c,l){super(e,t,r,o,s,c,l),this.actionManager=e,this.asyncActionService=t,this.message=r,this.confirmation=o,this.language=s,this.selectModalService=c,this.metadata=l}getActionName(e){return`record-${e.key}`}buildActionInput(e,t,r,o=null){return{action:t,module:r,id:o&&o.record&&o.record.id||"",params:e&&e.params||[]}}static \u0275fac=function(t){n.\u0275\u0275invalidFactory()};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})();class pC extends M.ActionHandler{checkRecordAccess(a,e=[]){return!0}navigateBack(a,e,t,r,o){let s=a.getReturnModule(e),c=a.getReturnAction(e),l=a.getReturnId(e);t!==l&&(s===r&&"record"===c&&l!==t||!s||!c||a.navigateBack(o,r,e))}}let mC=(()=>{class i extends pC{key="async-process";modes=M.ALL_VIEW_MODES;constructor(){super()}run(e){}shouldDisplay(e){const t=e?.action?.acl??[];return!t.length||this.checkRecordAccess(e,t)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Td=(()=>{class i extends vi{async;constructor(e){super(),this.async=e,e.modes.forEach(t=>this.actions[t][e.key]=e)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(mC))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),gC=(()=>{class i extends dr{threadStore;language;actionManager;asyncActionService;message;confirmation;selectModalService;metadata;defaultActions={detail:[],edit:[],create:[],list:[]};collapseButtons=!1;constructor(e,t,r,o,s,c,l,u){super(r,o,s,c,t,l,u),this.threadStore=e,this.language=t,this.actionManager=r,this.asyncActionService=o,this.message=s,this.confirmation=c,this.selectModalService=l,this.metadata=u}getActions(e){return(0,S.of)(this.threadStore.getListMetadata()).pipe((0,S.combineLatestWith)((0,S.of)("list")),(0,v.map)(([t,r])=>r&&t?this.parseModeActions(t.actions,r,this.threadStore.getViewContext()):[]))}getActionName(e){return`record-thread-list-${e.key}`}buildActionData(e,t){return{threadStore:this.threadStore,action:e}}buildActionInput(e,t,r,o=null){return this.message.removeMessages(),{action:t,module:this.threadStore.module,ids:this.threadStore.getRecordIds(),params:e&&e.params||[]}}getMode(){return"list"}getModuleName(e){return this.threadStore.module}reload(e,t,r){(0,M.isTrue)(t?.data?.reloadThread??!1)&&this.threadStore.reload()}shouldReload(e){return(0,M.isTrue)(e?.data?.reloadThread??!1)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Qc),n.\u0275\u0275inject($e),n.\u0275\u0275inject(Td),n.\u0275\u0275inject(Yt),n.\u0275\u0275inject(dt),n.\u0275\u0275inject(Nn),n.\u0275\u0275inject(kn),n.\u0275\u0275inject(bt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),hC=(()=>{class i{language;actionManager;asyncActionService;message;confirmation;selectModalService;metadata;constructor(e,t,r,o,s,c,l){this.language=e,this.actionManager=t,this.asyncActionService=r,this.message=o,this.confirmation=s,this.selectModalService=c,this.metadata=l}create(e,t){const r=new gC(e,this.language,this.actionManager,this.asyncActionService,this.message,this.confirmation,this.selectModalService,this.metadata),o=t?.collapseListActions??null;return null!==o&&(r.collapseButtons=o),r}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject($e),n.\u0275\u0275inject(Td),n.\u0275\u0275inject(Yt),n.\u0275\u0275inject(dt),n.\u0275\u0275inject(Nn),n.\u0275\u0275inject(kn),n.\u0275\u0275inject(bt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();class fs extends M.ActionHandler{checkRecordAccess(a,e=[]){const r=a.itemStore.recordStore.getBaseRecord().acls??[];return!(!r||!r.length)&&this.checkAccess(a.action??null,r,e)}navigateBack(a,e,t,r,o){let s=a.getReturnModule(e),c=a.getReturnAction(e),l=a.getReturnId(e);t!==l&&(s===r&&"record"===c&&l!==t||!s||!c||a.navigateBack(o,r,e))}}let vC=(()=>{class i extends fs{key="async-process";modes=M.ALL_VIEW_MODES;constructor(){super()}run(e){}shouldDisplay(e){const t=e?.action?.acl??[];return!t.length||this.checkRecordAccess(e,t)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),_C=(()=>{class i extends fs{modalService;navigation;key="cancel";modes=["edit","detail"];constructor(e,t){super(),this.modalService=e,this.navigation=t}run(e){e.itemStore.recordStore.isDirty()?this.showConfirmationModal(e):this.cancel(e)}shouldDisplay(){return!0}cancel(e){e.itemStore.recordStore.resetStaging(),e.itemStore.setMode("detail")}showConfirmationModal(e){const t=this.modalService.open(ls);t.componentInstance.textKey="WARN_UNSAVED_CHANGES",t.componentInstance.buttons=[{labelKey:"LBL_CANCEL",klass:["btn-secondary"],onClick:r=>r.dismiss()},{labelKey:"LBL_PROCEED",klass:["btn-main"],onClick:r=>{this.cancel(e),r.close()}}]}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(pe.NgbModal),n.\u0275\u0275inject(Rn))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),yC=(()=>{class i extends fs{key="edit";modes=["detail"];constructor(){super()}run(e){e.itemStore.setMode("edit")}shouldDisplay(e){return this.checkRecordAccess(e,["edit"])}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),bC=(()=>{class i extends fs{message;navigation;key="save";modes=["edit"];constructor(e,t){super(),this.message=e,this.navigation=t}run(e){e.itemStore.recordStore.validate().pipe((0,v.take)(1)).subscribe(t=>{t?e.itemStore.save().pipe((0,v.take)(1)).subscribe(r=>{e.itemStore.setMode("detail")}):this.message.addWarningMessageByKey("LBL_VALIDATION_ERRORS")})}shouldDisplay(e){return!0}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(dt),n.\u0275\u0275inject(Rn))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Nd=(()=>{class i extends vi{async;cancel;edit;save;constructor(e,t,r,o){super(),this.async=e,this.cancel=t,this.edit=r,this.save=o,e.modes.forEach(s=>this.actions[s][e.key]=e),r.modes.forEach(s=>this.actions[s][r.key]=r),o.modes.forEach(s=>this.actions[s][o.key]=o),t.modes.forEach(s=>this.actions[s][t.key]=t)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(vC),n.\u0275\u0275inject(_C),n.\u0275\u0275inject(yC),n.\u0275\u0275inject(bC))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),CC=(()=>{class i extends dr{itemStore;threadStore;language;actionManager;asyncActionService;message;confirmation;selectModalService;metadata;defaultActions={detail:[],edit:[],create:[]};collapseButtons=!1;constructor(e,t,r,o,s,c,l,u,d){super(o,s,c,l,r,u,d),this.itemStore=e,this.threadStore=t,this.language=r,this.actionManager=o,this.asyncActionService=s,this.message=c,this.confirmation=l,this.selectModalService=u,this.metadata=d}getActions(e){return this.itemStore.meta$.pipe((0,S.combineLatestWith)(this.itemStore.mode$),(0,v.map)(([t,r])=>r&&t?this.parseModeActions(t.actions,r,this.itemStore.getViewContext()):[]))}getActionName(e){return`record-thread-item-${e.key}`}buildActionData(e,t){return{itemStore:this.itemStore,threadStore:this.threadStore,action:e}}buildActionInput(e,t,r,o=null){const s=this.itemStore.getBaseRecord();return this.message.removeMessages(),{action:t,module:s.module,id:s.id,params:e&&e.params||[]}}getMode(){return this.itemStore.getMode()}getModuleName(e){return this.itemStore.getModuleName()}reload(e,t,r){const o=t?.data?.reload??!1,s=t?.data?.reloadThread??!1;(0,M.isTrue)(o)&&this.itemStore.load(!1).pipe((0,v.take)(1)).subscribe(),(0,M.isTrue)(s)&&this.threadStore.reload()}shouldReload(e){const t=e?.data?.reload??!1,r=e?.data?.reloadThread??!1;return(0,M.isTrue)(t)||(0,M.isTrue)(r)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Sd),n.\u0275\u0275inject(Qc),n.\u0275\u0275inject($e),n.\u0275\u0275inject(Nd),n.\u0275\u0275inject(Yt),n.\u0275\u0275inject(dt),n.\u0275\u0275inject(Nn),n.\u0275\u0275inject(kn),n.\u0275\u0275inject(bt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),MC=(()=>{class i{language;actionManager;asyncActionService;message;confirmation;selectModalService;metadata;constructor(e,t,r,o,s,c,l){this.language=e,this.actionManager=t,this.asyncActionService=r,this.message=o,this.confirmation=s,this.selectModalService=c,this.metadata=l}create(e,t,r=null){const o=new CC(e,t,this.language,this.actionManager,this.asyncActionService,this.message,this.confirmation,this.selectModalService,this.metadata),s=r?.metadata?.collapseActions??null;return null!==s&&(o.collapseButtons=s),o}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject($e),n.\u0275\u0275inject(Nd),n.\u0275\u0275inject(Yt),n.\u0275\u0275inject(dt),n.\u0275\u0275inject(Nn),n.\u0275\u0275inject(kn),n.\u0275\u0275inject(bt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function e$(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"label",3),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext(3).ngIf,t=n.\u0275\u0275nextContext(4).$implicit,r=n.\u0275\u0275nextContext(4);n.\u0275\u0275property("ngClass",r.getLabelClass(t)),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",e.label," ")}}function t$(i,a){if(1&i&&n.\u0275\u0275element(0,"scrm-label",9),2&i){const e=n.\u0275\u0275nextContext(3).ngIf,t=n.\u0275\u0275nextContext(4).$implicit,r=n.\u0275\u0275nextContext(4);n.\u0275\u0275property("labelKey",e.labelKey)("ngClass",r.getLabelClass(t))}}function n$(i,a){if(1&i&&n.\u0275\u0275element(0,"scrm-dynamic-label",10),2&i){const e=n.\u0275\u0275nextContext(3).ngIf,t=n.\u0275\u0275nextContext(8);n.\u0275\u0275property("labelKey",e.dynamicLabelKey)("fields",t.record.fields)}}function i$(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"div"),n.\u0275\u0275template(2,e$,2,2,"label",6),n.\u0275\u0275template(3,t$,1,2,"scrm-label",7),n.\u0275\u0275template(4,n$,1,2,"scrm-dynamic-label",8),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(2).ngIf,t=n.\u0275\u0275nextContext(4).$implicit,r=n.\u0275\u0275nextContext(4);n.\u0275\u0275advance(1),n.\u0275\u0275classProp("pr-3","inline"===r.getLabelDisplay(t,r.mode)&&"none"!==r.getDisplay(t)),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.label),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!e.label&&e.labelKey),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.dynamicLabelKey)}}function r$(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"div"),n.\u0275\u0275element(2,"scrm-field",11),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(2).ngIf,t=n.\u0275\u0275nextContext(4).$implicit,r=n.\u0275\u0275nextContext(4);n.\u0275\u0275advance(1),n.\u0275\u0275classProp("flex-grow-1","inline"===r.getLabelDisplay(t,r.mode)),n.\u0275\u0275advance(1),n.\u0275\u0275property("field",e)("klass",r.getFieldClass(t))("mode",r.mode)("record",r.record)("type",e.type)}}function o$(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,i$,5,5,"ng-container",1),n.\u0275\u0275template(2,r$,3,7,"ng-container",1),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(5).$implicit,t=n.\u0275\u0275nextContext(4);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf","none"!==t.getLabelDisplay(e,t.mode)),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf","none"!==t.getDisplay(e))}}function a$(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,o$,3,2,"ng-container",1),n.\u0275\u0275elementContainerEnd()),2&i){const e=a.ngIf,t=n.\u0275\u0275nextContext(4).$implicit,r=n.\u0275\u0275nextContext(4);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.shouldDisplay(t,e,r.mode))}}function s$(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,a$,2,1,"ng-container",1),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(3).$implicit,t=n.\u0275\u0275nextContext(4);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.getField(t.record,e.field))}}function c$(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275element(1,"scrm-action-group-menu",12),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(7);let t,r;n.\u0275\u0275advance(1),n.\u0275\u0275property("buttonClass",null!==(t=e.config.buttonClass)&&void 0!==t?t:"")("buttonGroupClass",null!==(r=e.config.buttonGroupClass)&&void 0!==r?r:"")("config",e.config.actions)}}function l$(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"div",5),n.\u0275\u0275template(2,s$,2,1,"ng-container",1),n.\u0275\u0275template(3,c$,2,3,"ng-container",1),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(2).$implicit,t=n.\u0275\u0275nextContext(4);n.\u0275\u0275advance(1),n.\u0275\u0275classProp("align-items-center","inline"===t.getLabelDisplay(e,t.mode))("flex-column","top"===t.getLabelDisplay(e,t.mode))("flex-row","inline"===t.getLabelDisplay(e,t.mode))("justify-content-end",!e.field),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.record),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.actionSlot&&t.config.actions)}}function u$(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",3),n.\u0275\u0275template(1,l$,4,10,"ng-container",1),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext().$implicit,t=n.\u0275\u0275nextContext(4);let r;n.\u0275\u0275classMapInterpolate1("record-flexbox-col ",t.getClass(e),""),n.\u0275\u0275property("ngClass",null!==(r=t.config.colClass)&&void 0!==r?r:null),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf","hidden"!==e.display&&t.shouldColDisplayInMode(e,t.mode))}}function d$(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,u$,2,5,"div",4),n.\u0275\u0275elementContainerEnd()),2&i){const e=a.$implicit,t=n.\u0275\u0275nextContext(4);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf","hidden"!==e.display&&t.shouldColDisplayInMode(e,t.mode))}}function f$(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"div",3),n.\u0275\u0275template(2,d$,2,1,"ng-container",2),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()),2&i){const e=a.$implicit,t=n.\u0275\u0275nextContext(3);let r;n.\u0275\u0275advance(1),n.\u0275\u0275classMapInterpolate3("d-flex record-flexbox-row ",t.getJustify(e.justify)," ",t.getAlign(e.align)," ",t.getLayoutRowClass(e),""),n.\u0275\u0275property("ngClass",null!==(r=t.config.rowClass)&&void 0!==r?r:null),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",e.cols)}}function p$(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,f$,3,7,"ng-container",2),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",e.layout.rows)}}function m$(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div"),n.\u0275\u0275template(1,p$,2,1,"ng-container",1),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275classMapInterpolate2("d-flex ",(e.config&&e.config.flexDirection?e.config.flexDirection:"flex-column")||""," ",e.config&&e.config.klass||"",""),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.layout&&e.layout.rows)}}let SC=(()=>{class i{config;mode="detail";record;layout;maxColumns=4;sizeMap={handset:1,tablet:2,web:3,wide:4};subs=[];constructor(){}ngOnInit(){if(!this.config)return;const e=this.config;e.record$&&this.subs.push(e.record$.subscribe(t=>{this.record=t??null})),e.mode$&&this.subs.push(e.mode$.subscribe(t=>{this.mode=t??"detail"})),e.layout$&&this.subs.push(e.layout$.subscribe(t=>{this.layout=t??null}))}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}getRowClass(){return this.config.rowClass}getColClass(){return this.config.colClass}getSizeClass(e){return{regular:"text-regular",medium:"text-medium",large:"text-large","x-large":"text-x-large","xx-large":"text-xx-large",huge:"text-huge"}[e]||"text-regular"}getFontWeight(e){let t="font-weight-normal";return e&&(0,M.isTrue)(e)&&(t="font-weight-bolder"),t}getColor(e){return{yellow:"text-yellow",blue:"text-blue",green:"text-green",red:"text-red",purple:"text-purple",dark:"text-dark",grey:"text-grey"}[e]||""}getJustify(e){return{start:"justify-content-start",end:"justify-content-end",center:"justify-content-center",between:"justify-content-between",around:"justify-content-around"}[e]||""}getAlign(e){return{start:"align-items-start",end:"align-items-end",center:"align-items-center",baseline:"align-items-baseline",stretch:"align-items-stretch"}[e]||""}getLayoutRowClass(e){return e&&e.class||""}getClass(e){if(!e)return"";const t=[];return t.push(e.class||""),e.size&&t.push(this.getSizeClass(e.size)||""),e.bold&&t.push(this.getFontWeight(e.bold)||""),e.color&&t.push(this.getColor(e.color)||""),t.join(" ")}getLabelDisplay(e,t){return this.shouldLabelDisplayInMode(e,t)?e.labelDisplay||this.config&&this.config.labelDisplay||"inline":"none"}getField(e,t){return t&&t.name&&e&&e.fields?e.fields[t.name]??null:null}getFieldClass(e){let t=this.config.inputClass||{};return e.inputClass&&(t[e.inputClass]=!0),t}getLabelClass(e){let t=this.config.labelClass||{};return e.labelClass&&(t[e.labelClass]=!0),t}shouldDisplay(e,t,r){if(!this.shouldFieldDisplayInMode(e,r))return!1;if(!e.hideIfEmpty)return!0;let s=!1;return s=s||!!t.value,s=s||!(!t.valueList||!t.valueList.length),s=s||!(!t.valueObject||!Object.keys(t.valueObject).length),s}shouldColDisplayInMode(e,t){return this.shouldFieldDisplayInMode(e,t)||this.shouldLabelDisplayInMode(e,t)}shouldFieldDisplayInMode(e,t){const r=e?.modes??null;return!(r&&r.length&&!r.includes(t))}shouldLabelDisplayInMode(e,t){const r=e?.labelModes??null;return!(r&&r.length&&!r.includes(t))}getDisplay(e){return e.display||""}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-record-flexbox"]],inputs:{config:"config"},decls:1,vars:1,consts:[[3,"class",4,"ngIf"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"ngClass"],[3,"ngClass","class",4,"ngIf"],[1,"d-flex"],[3,"ngClass",4,"ngIf"],[3,"labelKey","ngClass",4,"ngIf"],[3,"labelKey","fields",4,"ngIf"],[3,"labelKey","ngClass"],[3,"labelKey","fields"],[3,"field","klass","mode","record","type"],[3,"buttonClass","buttonGroupClass","config"]],template:function(t,r){1&t&&n.\u0275\u0275template(0,m$,2,5,"div",0),2&t&&n.\u0275\u0275property("ngIf",r.config)},dependencies:[F.NgClass,F.NgForOf,F.NgIf,lr,zt,xr,vo],encapsulation:2})}return i})();const g$=["body"];function h$(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275element(1,"scrm-record-flexbox",6),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("config",e.buildConfig(e.config.metadata.headerLayout))}}function v$(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275element(1,"scrm-record-flexbox",6),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("config",e.buildConfig(e.config.metadata.bodyLayout))}}function _$(i,a){1&i&&n.\u0275\u0275element(0,"div",7)}function y$(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",8),n.\u0275\u0275element(1,"scrm-button",6),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("config",e.getCollapseButton())}}function b$(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div")(1,"div",1),n.\u0275\u0275template(2,h$,2,1,"ng-container",2),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(3,"div",null,3),n.\u0275\u0275template(5,v$,2,1,"ng-container",2),n.\u0275\u0275template(6,_$,1,0,"div",4),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(7,y$,2,1,"div",5),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275classMapInterpolate2("d-flex flex-column record-thread-item ",e.config&&e.config.klass||""," ",e.dynamicClass,""),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",e.config.metadata&&e.config.metadata.headerLayout),n.\u0275\u0275advance(1),n.\u0275\u0275classMapInterpolate1("record-thread-item-body flex-grow-1 ",e.getBodyClass(),""),n.\u0275\u0275classProp("collapsed",e.collapsible&&e.collapsed)("expanded",e.collapsible&&!e.collapsed),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",e.config.metadata&&e.config.metadata.bodyLayout),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.collapsible&&e.collapsed),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.collapsible)}}let DC=(()=>{class i{actionAdapterFactory;config;bodyEl;collapsed=!1;collapsible=!1;collapseLimit=300;dynamicClass="";subs=[];actionAdapter;dynamicClassesMap={};dynamicClassFieldSubs=[];constructor(e){this.actionAdapterFactory=e}ngOnInit(){this.actionAdapter=this.actionAdapterFactory.create(this.config.store,this.config.threadStore,this.config),this.initDynamicClass()}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe()),this.dynamicClassFieldSubs.forEach(e=>e.unsubscribe())}ngAfterViewInit(){!this.config||!this.config.collapsible||setTimeout(()=>{(this.bodyEl.nativeElement.offsetHeight||this.bodyEl.nativeElement.height)>(this.config.collapseLimit||this.collapseLimit)&&(this.collapsible=!0,this.collapsed=!0)},2e3)}buildConfig(e){return{record$:this.config.store.stagingRecord$,mode$:this.config.store.mode$,layout$:(0,S.of)(e).pipe((0,v.shareReplay)(1)),inputClass:{...this.config.inputClass||{},"form-control form-control-sm":!0},buttonClass:this?.config?.buttonClass??"",buttonGroupClass:this?.config?.buttonGroupClass??"",labelClass:this?.config?.labelClass??{},rowClass:this?.config?.rowClass??{},colClass:this?.config?.colClass??{},actions:this?.actionAdapter,klass:this?.config?.containerClass,flexDirection:this?.config?.flexDirection||""}}getCollapseButton(){return{klass:"collapse-button btn btn-link btn-sm",labelKey:this.collapsed?"LBL_SHOW_MORE":"LBL_SHOW_LESS",onClick:()=>{this.collapsed=!this.collapsed,this.collapsed?this.config&&this.config.collapsed():this.config&&this.config.expanded()}}}initDynamicClass(){!this.config||!this.config.dynamicClass||!this.config.dynamicClass.length||this.subs.push(this.config.store.stagingRecord$.subscribe(e=>{const t={};this.dynamicClassFieldSubs.forEach(r=>r.unsubscribe()),e&&e.fields&&Object.keys(e.fields).length&&(this.config.dynamicClass.forEach(r=>{if(!r||!e.fields[r]&&!e.attributes[r])return;e.fields[r]&&this.dynamicClassFieldSubs.push(e.fields[r].valueChanges$.pipe((0,v.debounceTime)(100)).subscribe(()=>{const s=this.getDynamicClasses(r,e)??"";""!==s&&(this.dynamicClassesMap[r]=s,this.calculateDynamicClasses())}));const o=this.getDynamicClasses(r,e)??"";""!==o&&(t[r]=o)}),this.dynamicClassesMap=t,this.calculateDynamicClasses())}))}calculateDynamicClasses(){const e=[];Object.keys(this.dynamicClassesMap??{}).forEach(t=>{const r=this.dynamicClassesMap[t]??"";""!==r&&e.push(r)}),this.dynamicClass=e.join(" ")}getDynamicClasses(e,t){const r=e+"-";let o=[];return t.fields[e]?(t.fields[e].value&&o.push(t.fields[e].value),t.fields[e].valueList&&t.fields[e].valueList.length&&(o=o.concat(t.fields[e].valueList))):Array.isArray(t.attributes[e])?o=o.concat(t.attributes[e]):"object"!=typeof t.attributes[e]&&o.push(t.attributes[e]),o&&o.length?r+o.join(" "+r):""}getBodyClass(){return this.config?.metadata?.bodyLayout?.class??""}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(MC))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-record-thread-item"]],viewQuery:function(t,r){if(1&t&&n.\u0275\u0275viewQuery(g$,5),2&t){let o;n.\u0275\u0275queryRefresh(o=n.\u0275\u0275loadQuery())&&(r.bodyEl=o.first)}},inputs:{config:"config"},decls:1,vars:1,consts:[[3,"class",4,"ngIf"],[1,"record-thread-item-header","flex-grow-1"],[4,"ngIf"],["body",""],["class","fadeout",4,"ngIf"],["class","record-thread-item-collapse d-flex justify-content-center flex-grow-1",4,"ngIf"],[3,"config"],[1,"fadeout"],[1,"record-thread-item-collapse","d-flex","justify-content-center","flex-grow-1"]],template:function(t,r){1&t&&n.\u0275\u0275template(0,b$,8,15,"div",0),2&t&&n.\u0275\u0275property("ngIf",r.config)},dependencies:[F.NgIf,Vn,SC],encapsulation:2})}return i})();const C$=["list"];function M$(i,a){1&i&&(n.\u0275\u0275elementStart(0,"div",4),n.\u0275\u0275element(1,"scrm-label",5),n.\u0275\u0275elementEnd())}function S$(i,a){1&i&&(n.\u0275\u0275elementStart(0,"div",6),n.\u0275\u0275element(1,"scrm-loading-spinner",7),n.\u0275\u0275elementEnd()),2&i&&(n.\u0275\u0275advance(1),n.\u0275\u0275property("overlay",!0))}function D$(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",13),n.\u0275\u0275element(1,"scrm-button",14),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("config",e.getLoadMoreButton())}}function w$(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",null,15),n.\u0275\u0275element(2,"scrm-record-thread-item",14),n.\u0275\u0275elementEnd()),2&i){const e=a.$implicit,t=n.\u0275\u0275reference(1),r=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(2),n.\u0275\u0275property("config",r.buildItem(e,t))}}function E$(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",16),n.\u0275\u0275element(1,"scrm-button",14),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("config",e.getLoadMoreButton())}}function x$(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275element(1,"scrm-action-group-menu",17),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(2);let t,r;n.\u0275\u0275advance(1),n.\u0275\u0275property("buttonClass",null!==(t=e.config.listActionsButtonClass)&&void 0!==t?t:"")("buttonGroupClass",null!==(r=e.config.listActionsButtonGroupClass)&&void 0!==r?r:"")("config",e.listActionAdapter)}}function F$(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",8,9),n.\u0275\u0275template(2,D$,2,1,"div",10),n.\u0275\u0275template(3,w$,3,1,"div",11),n.\u0275\u0275elementStart(4,"div"),n.\u0275\u0275template(5,E$,2,1,"div",12),n.\u0275\u0275template(6,x$,2,3,"ng-container",3),n.\u0275\u0275elementEnd()()),2&i){const e=n.\u0275\u0275nextContext();let t;n.\u0275\u0275property("ngStyle",e.getMaxHeight()),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf","top"===e.loadMorePosition&&!e.allLoaded()),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",e.records),n.\u0275\u0275advance(1),n.\u0275\u0275classMap(null!==(t=e.config.listActionsClass)&&void 0!==t?t:""),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf","bottom"===e.loadMorePosition&&!e.allLoaded()),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.config.listActions)}}function I$(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div")(1,"h6",18),n.\u0275\u0275element(2,"scrm-label",19),n.\u0275\u0275elementEnd()()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(2),n.\u0275\u0275property("labelKey",e.config.noDataLabel||"LBL_NO_DATA")}}function A$(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",21)(1,"div",22),n.\u0275\u0275element(2,"scrm-record-thread-item",14),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(3,"div",23),n.\u0275\u0275element(4,"scrm-button",14),n.\u0275\u0275elementEnd()()),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(2),n.\u0275\u0275property("config",e.buildCreateItem()),n.\u0275\u0275advance(2),n.\u0275\u0275property("config",e.getCreateButton())}}function T$(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,A$,5,2,"div",20),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!e.loading)}}let Ld=(()=>{class i{storeFactory;itemFactory;recordManager;message;actionAdapterFactory;config;listContainer;store;createStore;records;loading=!1;maxHeight=400;direction="asc";loadMorePosition="top";listActionAdapter;shouldResetScroll=!1;subs=[];presetFieldValues;constructor(e,t,r,o,s){this.storeFactory=e,this.itemFactory=t,this.recordManager=r,this.message=o,this.actionAdapterFactory=s}ngOnInit(){if((0,M.isVoid)(this.config.maxListHeight)||(this.maxHeight=this.config.maxListHeight),!this.config.module)return;this.config.store?this.store=this.config.store:(this.store=this.storeFactory.create(),this.store.setItemMetadata(this.config.itemConfig.metadata),this.store.setListMetadata({actions:this.config.listActions}),this.store.init(this.config.module,!1,this?.config?.pageSize??null)),this.direction=this.config.direction||this.direction,this.setLoadMorePosition(),this.initCreate(),this.initDataSubscription(),this.config.filters$?this.subs.push(this.config.filters$.subscribe(t=>{this.store.setFilters(t).pipe((0,v.take)(1)).subscribe(()=>{this.config.onRefresh&&this.config.onRefresh()})})):this.store.load(!1).subscribe(()=>{this.config.onRefresh&&this.config.onRefresh()});const e=this?.config?.autoRefreshFrequency??0;e&&this.store&&this.subs.push(this.store.initAutoRefresh(e,this.config.autoRefreshDeviationMin??-15,this.config.autoRefreshDeviationMax??15,this.config.onRefresh).subscribe()),this.initLoading(),this.listActionAdapter=this.actionAdapterFactory.create(this.store,this.config)}setLoadMorePosition(){this.loadMorePosition="asc"===this.direction?"top":"bottom",this.config.loadMorePosition&&(this.loadMorePosition=this.config.loadMorePosition)}ngAfterViewInit(){this.shouldResetScroll=!0,this.resetScroll()}ngOnDestroy(){(this?.config?.store??null)||this.store.clear(),this.store=null,this.subs.forEach(e=>e.unsubscribe())}buildItem(e,t){let r="record-thread-list-item";return this.config.itemConfig.klass&&(r+=" "+this.config.itemConfig.klass),{...this.config.itemConfig,store:e,threadStore:this.store,klass:r,containerClass:this.config.itemConfig.containerClass,flexDirection:this.config?.itemConfig?.flexDirection??"",expanded:()=>{this.scrollToItem(t)},collapsed:()=>{this.scrollToItem(t)}}}getLoadMoreButton(){return{klass:"load-more-button btn btn-link btn-sm",labelKey:"LBL_LOAD_MORE",onClick:()=>{this?.config?.onLoadMore&&this.store.getRecordList().records$.pipe((0,v.take)(1),(0,v.tap)(()=>this.config.onLoadMore())).subscribe(),this.store.loadMore()}}}buildCreateItem(){return{...this.config.createConfig,store:this.createStore,rowClass:{"pt-1":!0},klass:"record-thread-create-item"}}getCreateButton(){return{klass:"create-thread-item-button btn btn-main btn-sm",labelKey:"LBL_SUBMIT_BUTTON_LABEL",onClick:()=>{this.createStore.validate().pipe((0,v.take)(1)).subscribe(e=>{e?this.createStore.save().pipe((0,v.take)(1)).subscribe(()=>{this.store.reload(),this.initRecord(),this.shouldResetScroll=!0,this.message.addSuccessMessageByKey("LBL_ACTION_SUCCESS")}):this.message.addWarningMessageByKey("LBL_VALIDATION_ERRORS")})}}}allLoaded(){return!(!this.store||!this.store.allLoaded())}getMaxHeight(){return 0==this.maxHeight?null:{"max-height.px":this.maxHeight,"overflow-y":"auto"}}initRecord(){const e=this.recordManager.buildEmptyRecord(this.config.module);this.addPresetFields(e);let t="edit";this.config.createConfig&&this.config.createConfig.initialMode&&(t=this.config.createConfig.initialMode),this.createStore.initRecord(e,t,!1)}scrollToEnd(){!this.listContainer||!this.listContainer.nativeElement||this.scrollTo(this.listContainer.nativeElement.scrollHeight)}scrollToTop(){this.scrollTo(0)}scrollTo(e){try{this.listContainer.nativeElement.scrollTop=e}catch{}}scrollToItem(e){e&&this.listContainer&&this.listContainer.nativeElement&&this.scrollTo(e.offsetTop-this.listContainer.nativeElement.offsetTop)}resetScroll(){!1!==this.shouldResetScroll&&("asc"===this.direction?this.scrollToEnd():this.scrollToTop(),this.shouldResetScroll=!1)}scheduleScrollReset(){setTimeout(()=>{this.resetScroll()},500)}initCreate(){this.config.create&&(this.createStore=this.itemFactory.create(),this.createStore.setMetadata(this.config.createConfig.metadata),this.initRecord(),this.initPresetFieldsMapping())}initPresetFieldsMapping(){this.config.presetFields$&&this.subs.push(this.config.presetFields$.subscribe(e=>{if(!e||!Object.keys(e).length)return;this.presetFieldValues=e;const t=this.createStore.recordStore.getBaseRecord();this.addPresetFields(t),this.createStore.recordStore.setRecord(t)}))}addPresetFields(e){this.presetFieldValues&&(e.attributes={...this.presetFieldValues,...e.attributes||{}})}initDataSubscription(){this.subs.push(this.store.stores$.subscribe(e=>{if((!this.records||!this.records.length)&&(this.shouldResetScroll=!0),"asc"===this.direction)return this.records=e.reverse(),void this.scheduleScrollReset();this.records=e,this.scheduleScrollReset()}))}initLoading(){let e;e=this.store.$loading.pipe(this.createStore&&this.createStore.loading$?(0,S.combineLatestWith)(this.createStore.loading$):(0,v.map)(t=>[t])),this.subs.push(e.subscribe(t=>{if(!t||!t.length)return void(this.loading=!1);let r=!1;t.forEach(o=>{r=r||o}),this.loading=r}))}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(Xc),n.\u0275\u0275directiveInject(Jc),n.\u0275\u0275directiveInject(_i),n.\u0275\u0275directiveInject(dt),n.\u0275\u0275directiveInject(hC))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-record-thread"]],viewQuery:function(t,r){if(1&t&&n.\u0275\u0275viewQuery(C$,5),2&t){let o;n.\u0275\u0275queryRefresh(o=n.\u0275\u0275loadQuery())&&(r.listContainer=o.first)}},inputs:{config:"config"},decls:6,vars:8,consts:[["class","d-flex record-thread-no-data justify-content-center h3",4,"ngIf"],["class","d-flex record-thread-loading justify-content-center",4,"ngIf"],["class","record-thread-list scrollbar-thin",3,"ngStyle",4,"ngIf"],[4,"ngIf"],[1,"d-flex","record-thread-no-data","justify-content-center","h3"],["labelKey","LBL_NO_DATA"],[1,"d-flex","record-thread-loading","justify-content-center"],[3,"overlay"],[1,"record-thread-list","scrollbar-thin",3,"ngStyle"],["list",""],["class","record-thread-load-more d-flex justify-content-center flex-grow-1",4,"ngIf"],[4,"ngFor","ngForOf"],["class","record-thread-load-more d-flex justify-content-center",4,"ngIf"],[1,"record-thread-load-more","d-flex","justify-content-center","flex-grow-1"],[3,"config"],["item",""],[1,"record-thread-load-more","d-flex","justify-content-center"],[3,"buttonClass","buttonGroupClass","config"],[1,"pt-3","pl-3","pr-3","pb-2"],[3,"labelKey"],["class","d-flex flex-column record-thread-create-container",4,"ngIf"],[1,"d-flex","flex-column","record-thread-create-container"],[1,"flex-grow-1"],[1,"flex-grow-1","d-flex","justify-content-start","pt-1","record-thread-create-buttons"]],template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"div"),n.\u0275\u0275template(1,M$,2,0,"div",0),n.\u0275\u0275template(2,S$,2,1,"div",1),n.\u0275\u0275template(3,F$,7,7,"div",2),n.\u0275\u0275template(4,I$,3,1,"div",3),n.\u0275\u0275template(5,T$,2,1,"ng-container",3),n.\u0275\u0275elementEnd()),2&t&&(n.\u0275\u0275classMapInterpolate1("record-thread ",r.config&&r.config.klass||"",""),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!r.loading&&!r.records&&!r.records.length),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.loading),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.records&&r.records.length),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",(!r.records||!r.records.length)&&!r.loading&&r.config.showNoDataMessage),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.config.create&&r.createStore))},dependencies:[F.NgForOf,F.NgIf,F.NgStyle,Vn,zt,DC,Ar,xr],encapsulation:2})}return i})();function N$(i,a){1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"div",2),n.\u0275\u0275element(2,"scrm-label",3),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd())}function L$(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275element(1,"scrm-record-thread",4),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("config",e.recordThreadConfig)}}let wC=(()=>{class i{language;systemConfig;storeFactory;message;notificationService;notificationStore;recordThreadConfig;store;options;constructor(e,t,r,o,s,c){this.language=e,this.systemConfig=t,this.storeFactory=r,this.message=o,this.notificationService=s,this.notificationStore=c}ngOnInit(){this.options=this.notificationService.getOptions(),this.recordThreadConfig=this.getConfig()}getConfig(){const e={filters$:(0,S.of)({orderBy:this?.options?.filters?.orderBy??"date_entered",sortOrder:this?.options?.filters?.sortOrder??"asc",preset:{type:"alerts"}}),module:this.options.module,klass:this.options.class??"",maxListHeight:this.options.maxListHeight??350,direction:this.options.direction||"asc",autoRefreshFrequency:this.options.autoRefreshFrequency||0,autoRefreshDeviationMin:this.options.autoRefreshDeviationMin??0,autoRefreshDeviationMax:this.options.autoRefreshDeviationMax??0,onRefresh:()=>{this.notificationService.onRefresh(this.store,this.notificationStore)},onLoadMore:()=>{this.notificationService.onLoadMore(this.notificationStore)},loadMorePosition:this.options?.loadMorePosition??"",create:!1,listActionsClass:this.options?.listActionsClass??"",listActionsButtonClass:this.options?.listActionsButtonClass??"",listActionsButtonGroupClass:this.options?.listActionsButtonGroupClass??"",pageSize:this.options?.pageSize??"",showNoDataMessage:this.options?.showNoDataMessage,noDataLabel:this.options?.noDataLabel};return this.notificationService.setupListActions(e,this.options),this.notificationService.setupItemConfig(e,this.options),e.store=this.notificationStore.getNotificationStore(),this.store=this.notificationStore.getNotificationStore(),e}setupItemMetadata(e,t){t&&t.header&&(e.headerLayout=(0,M.deepClone)(t.header)),t&&t.body&&(e.bodyLayout=(0,M.deepClone)(t.body)),t&&t.actions&&(e.actions=(0,M.deepClone)(t.actions))}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject($e),n.\u0275\u0275directiveInject(vt),n.\u0275\u0275directiveInject(Xc),n.\u0275\u0275directiveInject(dt),n.\u0275\u0275directiveInject(Dd),n.\u0275\u0275directiveInject(wa))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-notifications"]],decls:3,vars:2,consts:[["widget-body","",1,"notifications"],[4,"ngIf"],[1,"p-3","widget-message"],["labelKey","LBL_BAD_CONFIG"],[3,"config"]],template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"div",0),n.\u0275\u0275template(1,N$,3,0,"ng-container",1),n.\u0275\u0275template(2,L$,2,1,"ng-container",1),n.\u0275\u0275elementEnd()),2&t&&(n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!r.options),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.options))},dependencies:[F.NgIf,zt,Ld],encapsulation:2})}return i})(),EC=(()=>{class i{router;constructor(e){this.router=e}navigateToSearch(e){let r="";return e&&(r=e),this.router.navigate(["/home/unified-search"],{queryParams:{query_string:r}})}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Rt.Router))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const O$=["searchInput"],B$=function(i){return{"dropdown-active":i}};function R$(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"ul",8)(1,"li",9)(2,"a",10),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(e);const r=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(r.search())}),n.\u0275\u0275element(3,"scrm-image",11),n.\u0275\u0275elementStart(4,"span",12),n.\u0275\u0275text(5,'"'),n.\u0275\u0275elementStart(6,"strong"),n.\u0275\u0275text(7),n.\u0275\u0275elementEnd(),n.\u0275\u0275text(8),n.\u0275\u0275pipe(9,"lowercase"),n.\u0275\u0275elementEnd()()()()}if(2&i){const e=n.\u0275\u0275nextContext().ngIf,t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction1(5,B$,t.searchWord)),n.\u0275\u0275advance(6),n.\u0275\u0275textInterpolate(t.searchWord),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1('" ',n.\u0275\u0275pipeBind1(9,3,e.appStrings.LBL_IN_EVERYWHERE),"")}}function j$(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"button",13),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(e);const r=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(r.search())}),n.\u0275\u0275element(1,"scrm-image",11),n.\u0275\u0275elementEnd()}}function k$(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"button",13),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(e);const r=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(r.clearSearchTerm())}),n.\u0275\u0275element(1,"scrm-image",14),n.\u0275\u0275elementEnd()}}const P$=function(i){return{"search-focused":i}};function $$(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"form",1)(2,"div",2)(3,"input",3,4),n.\u0275\u0275listener("focus",function(){n.\u0275\u0275restoreView(e);const r=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(r.onFocus())})("blur",function(){n.\u0275\u0275restoreView(e);const r=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(r.onBlur())})("keydown.enter",function(){n.\u0275\u0275restoreView(e);const r=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(r.search())}),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(5,R$,10,7,"ul",5),n.\u0275\u0275elementStart(6,"div",6),n.\u0275\u0275template(7,j$,2,0,"button",7),n.\u0275\u0275template(8,k$,2,0,"button",7),n.\u0275\u0275elementEnd()()(),n.\u0275\u0275elementContainerEnd()}if(2&i){const e=a.ngIf,t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("formGroup",t.searchForm),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction1(6,P$,t.isFocused)),n.\u0275\u0275advance(1),n.\u0275\u0275propertyInterpolate1("placeholder","",e.appStrings.LBL_SEARCH||"","..."),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",t.searchWord.length&&t.hasSearchTyped),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",!t.hasSearchTyped),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.hasSearchTyped)}}let xC=(()=>{class i{globalSearch;languageStore;searchInput;searchWord="";searchForm;searchResults=[];isFocused=!1;hasSearchTyped=!1;subs=[];languages$=(0,S.of)({});vm$=this.languages$.pipe((0,v.map)(e=>({appStrings:e.appStrings||{}})));constructor(e,t){this.globalSearch=e,this.languageStore=t,this.languages$=t?.vm$??(0,S.of)({})}ngOnInit(){this.searchForm=new De.FormGroup({searchTerm:new De.FormControl("")}),this.subs.push(this.searchForm.get("searchTerm").valueChanges.pipe((0,v.tap)(e=>{this.hasSearchTyped=!!e}),(0,v.distinctUntilChanged)(),(0,v.filter)(e=>e?.length>1)).subscribe(e=>this.searchWord=e))}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}search(){this.searchWord.length&&this.globalSearch.navigateToSearch(this.searchWord).finally(()=>{this.clearSearchTerm(),this.searchInput.nativeElement.blur()})}clearSearchTerm(){this.searchForm.reset(),this.hasSearchTyped=!1,this.searchWord=""}onFocus(){this.isFocused=!0;const e=this.searchForm?.get("searchTerm")?.value??"";e.length>2&&(this.hasSearchTyped=!0,this.searchWord=e)}onBlur(){setTimeout(()=>{this.isFocused=!1,this.hasSearchTyped=!1},200)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(EC),n.\u0275\u0275directiveInject($e))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-search-bar"]],viewQuery:function(t,r){if(1&t&&n.\u0275\u0275viewQuery(O$,5),2&t){let o;n.\u0275\u0275queryRefresh(o=n.\u0275\u0275loadQuery())&&(r.searchInput=o.first)}},decls:2,vars:3,consts:[[4,"ngIf"],["name","global-search",1,"global-search",3,"formGroup"],[1,"input-group","dropdown",3,"ngClass"],["formControlName","searchTerm","type","text","name","global-search-term","aria-label","Search","data-toggle","dropdown","autocomplete","off","required","",1,"form-control","dropdown-toggle","global-search-term",3,"placeholder","focus","blur","keydown.enter"],["searchInput",""],["class","dropdown-menu global-search-dropdown",4,"ngIf"],[1,"input-group-append"],["class","btn btn-default search-button d-flex align-items-center","aria-label","Search","scrm-button-loading","",3,"click",4,"ngIf"],[1,"dropdown-menu","global-search-dropdown"],[1,"dropdown-item-block",3,"ngClass"],[1,"dropdown-item",3,"click"],["image","search",1,"search-icon","sicon"],[1,"dropdown-text","ml-2"],["aria-label","Search","scrm-button-loading","",1,"btn","btn-default","search-button","d-flex","align-items-center",3,"click"],["image","cross",1,"search-icon","sicon"]],template:function(t,r){1&t&&(n.\u0275\u0275template(0,$$,9,8,"ng-container",0),n.\u0275\u0275pipe(1,"async")),2&t&&n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(1,1,r.vm$))},dependencies:[F.NgClass,F.NgIf,De.\u0275NgNoValidate,De.DefaultValueAccessor,De.NgControlStatus,De.NgControlStatusGroup,De.RequiredValidator,wn,De.FormGroupDirective,De.FormControlName,F.AsyncPipe,F.LowerCasePipe],encapsulation:2})}return i})();function U$(i,a){if(1&i&&n.\u0275\u0275element(0,"scrm-image",6),2&i){const e=n.\u0275\u0275nextContext(3);n.\u0275\u0275propertyInterpolate("image",e.icon)}}function V$(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"a",4),n.\u0275\u0275template(1,U$,1,1,"scrm-image",5),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("ngClass",e.class)("queryParams",e.link.params)("routerLink",e.link.route),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.icon),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",e.link.label," ")}}function z$(i,a){if(1&i&&n.\u0275\u0275element(0,"scrm-image",6),2&i){const e=n.\u0275\u0275nextContext(3);n.\u0275\u0275propertyInterpolate("image",e.icon)}}function G$(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"a",7),n.\u0275\u0275template(1,z$,1,1,"scrm-image",5),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("href",e.link.url,n.\u0275\u0275sanitizeUrl)("ngClass",e.class),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.icon),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",e.link.label," ")}}function W$(i,a){if(1&i&&n.\u0275\u0275element(0,"scrm-image",6),2&i){const e=n.\u0275\u0275nextContext(3);n.\u0275\u0275propertyInterpolate("image",e.icon)}}function K$(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"a",8),n.\u0275\u0275template(1,W$,1,1,"scrm-image",5),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("ngClass",e.class),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.icon),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",e.link.label," ")}}function H$(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,V$,3,5,"a",1),n.\u0275\u0275template(2,G$,3,4,"a",2),n.\u0275\u0275template(3,K$,3,3,"a",3),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.link.route),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!e.link.route&&e.link.url),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!e.link.route&&!e.link.url)}}function Z$(i,a){if(1&i&&n.\u0275\u0275element(0,"scrm-image",6),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275propertyInterpolate("image",e.icon)}}function q$(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"a",9),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(e);const r=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(r.handleProcess(r.link.process))}),n.\u0275\u0275template(2,Z$,1,1,"scrm-image",5),n.\u0275\u0275text(3),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()}if(2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngClass",e.class),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.icon),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",e.link.label," ")}}let FC=(()=>{class i{asyncActionService;appState;link;icon;class;constructor(e,t){this.asyncActionService=e,this.appState=t}handleProcess(e){if(!e)return;const t=e,r={action:t,module:this.appState.getModule()};this.asyncActionService.run(t,r).pipe((0,v.take)(1)).subscribe()}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(Yt),n.\u0275\u0275directiveInject(Xt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-base-menu-item-link"]],inputs:{link:"link",icon:"icon",class:"class"},decls:2,vars:2,consts:[[4,"ngIf"],[3,"ngClass","queryParams","routerLink",4,"ngIf"],[3,"href","ngClass",4,"ngIf"],[3,"ngClass",4,"ngIf"],[3,"ngClass","queryParams","routerLink"],[3,"image",4,"ngIf"],[3,"image"],[3,"href","ngClass"],[3,"ngClass"],[3,"ngClass","click"]],template:function(t,r){1&t&&(n.\u0275\u0275template(0,H$,4,3,"ng-container",0),n.\u0275\u0275template(1,q$,4,3,"ng-container",0)),2&t&&(n.\u0275\u0275property("ngIf",!r.link.process),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.link.process))},dependencies:[F.NgClass,F.NgIf,Rt.RouterLink,wn],encapsulation:2})}return i})(),IC=(()=>{class i extends M.BaseComponentRegistry{constructor(){super()}initDefault(){this.register("default","default",FC)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const J$=function(i,a,e){return{link:i,icon:a,class:e}};function Q$(i,a){if(1&i&&n.\u0275\u0275element(0,"ndc-dynamic",1),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275property("ndcDynamicComponent",e.getType)("ndcDynamicInputs",n.\u0275\u0275pureFunction3(2,J$,e.link,e.icon,e.class))}}let no=(()=>{class i{registry;link;icon;class;constructor(e){this.registry=e}get getType(){return this.registry.get("default","default")}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(IC))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-menu-item-link"]],inputs:{link:"link",icon:"icon",class:"class"},decls:1,vars:1,consts:[[3,"ndcDynamicComponent","ndcDynamicInputs",4,"ngIf"],[3,"ndcDynamicComponent","ndcDynamicInputs"]],template:function(t,r){1&t&&n.\u0275\u0275template(0,Q$,1,6,"ndc-dynamic",0),2&t&&n.\u0275\u0275property("ngIf",r.getType)},dependencies:[F.NgIf,Pt,Bt],encapsulation:2})}return i})();const X$=function(i,a,e){return{label:i,url:a,route:e}};function Y$(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"li",7),n.\u0275\u0275element(1,"scrm-menu-item-link",8),n.\u0275\u0275elementEnd()),2&i){const e=a.$implicit,t=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275classMap("submenu-nav-link nav-link action-link"),n.\u0275\u0275property("link",n.\u0275\u0275pureFunction3(3,X$,e.attributes.item_summary,t.buildRoute(e),t.buildRoute(e)))}}function eU(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"li",1)(2,"a",2),n.\u0275\u0275element(3,"scrm-image",3)(4,"scrm-label",4),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(5,"ul",5),n.\u0275\u0275template(6,Y$,2,7,"li",6),n.\u0275\u0275pipe(7,"slice"),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(6),n.\u0275\u0275property("ngForOf",n.\u0275\u0275pipeBind3(7,1,e.records,0,e.maxDisplayed))}}let AC=(()=>{class i{navigation;nameMapper;configs;metadata;module;maxDisplayed=5;records;subs=[];constructor(e,t,r,o){this.navigation=e,this.nameMapper=t,this.configs=r,this.metadata=o}ngOnInit(){const e=this.configs.getConfigValue("ui")??{};this.maxDisplayed=parseInt(e.navigation_max_module_recently_viewed)??5,this.initMetadata$()}ngOnDestroy(){this.clear()}ngOnChanges(e){null!==(e?.module??null)&&(e?.module?.previousValue??"")!==(e?.module?.currentValue??"")&&(this.clear(),this.initMetadata$())}buildRoute(e){const r=this.nameMapper.toFrontend(e.attributes.module_name??"")??"";return this.navigation.getRecordRouterLink(r,e.attributes.item_id??"")}initMetadata$(){const e=this.metadata.allModuleMetadata$.pipe((0,v.map)(t=>t[this.module]??null));this.subs.push(e.subscribe(t=>{this.records=t?.recentlyViewed??null}))}clear(){this.records=null,this.subs.forEach(e=>e.unsubscribe())}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(Rn),n.\u0275\u0275directiveInject(Tn),n.\u0275\u0275directiveInject(vt),n.\u0275\u0275directiveInject(bt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-base-sub-menu-recently-viewed"]],inputs:{module:"module"},features:[n.\u0275\u0275NgOnChangesFeature],decls:1,vars:1,consts:[[4,"ngIf"],[1,"nav-item","dropdown-submenu","submenu","submenu-extra"],[1,"sub-nav-link","nav-link","action-link","dropdown-item","dropdown-toggle","pr-4"],["image","clock"],["labelKey","LBL_LAST_VIEWED"],[1,"dropdown-menu","submenu"],["class","nav-item",4,"ngFor","ngForOf"],[1,"nav-item"],[3,"link"]],template:function(t,r){1&t&&n.\u0275\u0275template(0,eU,8,5,"ng-container",0),2&t&&n.\u0275\u0275property("ngIf",r.records&&r.records.length)},dependencies:[F.NgForOf,F.NgIf,wn,zt,no,F.SlicePipe],encapsulation:2})}return i})(),TC=(()=>{class i extends M.BaseComponentRegistry{constructor(){super()}initDefault(){this.register("default","default",AC)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const tU=function(i){return{module:i}};function nU(i,a){if(1&i&&n.\u0275\u0275element(0,"ndc-dynamic",1),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275property("ndcDynamicComponent",e.getType)("ndcDynamicInputs",n.\u0275\u0275pureFunction1(2,tU,e.module))}}let Od=(()=>{class i{registry;module;constructor(e){this.registry=e}get getType(){return this.registry.get("default","default")}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(TC))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-sub-menu-recently-viewed"]],inputs:{module:"module"},decls:1,vars:1,consts:[[3,"ndcDynamicComponent","ndcDynamicInputs",4,"ngIf"],[3,"ndcDynamicComponent","ndcDynamicInputs"]],template:function(t,r){1&t&&n.\u0275\u0275template(0,nU,1,4,"ndc-dynamic",0),2&t&&n.\u0275\u0275property("ngIf",r.getType)},dependencies:[F.NgIf,Pt,Bt],encapsulation:2})}return i})(),Bd=(()=>{class i{navigation;nameMapper;configs;metadata;module;maxDisplayed=5;records;subs=[];constructor(e,t,r,o){this.navigation=e,this.nameMapper=t,this.configs=r,this.metadata=o}ngOnInit(){const e=this.configs.getConfigValue("ui")??{};this.maxDisplayed=parseInt(e.navigation_max_module_favorites)??5,this.initMetadata$()}ngOnDestroy(){this.clear()}ngOnChanges(e){null!==(e?.module??null)&&(e?.module?.previousValue??"")!==(e?.module?.currentValue??"")&&(this.clear(),this.initMetadata$())}buildRoute(e){const r=this.nameMapper.toFrontend(e.attributes.parent_type??"")??"";return this.navigation.getRecordRouterLink(r,e.attributes.parent_id??"")}initMetadata$(){const e=this.metadata.allModuleMetadata$.pipe((0,v.map)(t=>t[this.module]??null));this.subs.push(e.subscribe(t=>{this.records=t?.favorites??null}))}clear(){this.records=null,this.subs.forEach(e=>e.unsubscribe())}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(Rn),n.\u0275\u0275directiveInject(Tn),n.\u0275\u0275directiveInject(vt),n.\u0275\u0275directiveInject(bt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["ng-component"]],inputs:{module:"module"},features:[n.\u0275\u0275NgOnChangesFeature],decls:0,vars:0,template:function(t,r){},encapsulation:2})}return i})();const iU=function(i,a,e){return{label:i,url:a,route:e}};function rU(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"li",7),n.\u0275\u0275element(1,"scrm-menu-item-link",8),n.\u0275\u0275elementEnd()),2&i){const e=a.$implicit,t=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275classMap("submenu-nav-link nav-link action-link"),n.\u0275\u0275property("link",n.\u0275\u0275pureFunction3(3,iU,e.attributes.parent_name,t.buildRoute(e),t.buildRoute(e)))}}function oU(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"li",1)(2,"a",2),n.\u0275\u0275element(3,"scrm-image",3)(4,"scrm-label",4),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(5,"ul",5),n.\u0275\u0275template(6,rU,2,7,"li",6),n.\u0275\u0275pipe(7,"slice"),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(6),n.\u0275\u0275property("ngForOf",n.\u0275\u0275pipeBind3(7,1,e.records,0,e.maxDisplayed))}}let NC=(()=>{class i extends Bd{navigation;nameMapper;configs;metadata;constructor(e,t,r,o){super(e,t,r,o),this.navigation=e,this.nameMapper=t,this.configs=r,this.metadata=o}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(Rn),n.\u0275\u0275directiveInject(Tn),n.\u0275\u0275directiveInject(vt),n.\u0275\u0275directiveInject(bt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-base-sub-menu-favorites"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,consts:[[4,"ngIf"],[1,"nav-item","dropdown-submenu","submenu","submenu-extra"],[1,"sub-nav-link","nav-link","action-link","dropdown-item","dropdown-toggle","pr-4"],["image","star"],["labelKey","LBL_FAVORITES"],[1,"dropdown-menu","submenu"],["class","nav-item",4,"ngFor","ngForOf"],[1,"nav-item"],[3,"link"]],template:function(t,r){1&t&&n.\u0275\u0275template(0,oU,8,5,"ng-container",0),2&t&&n.\u0275\u0275property("ngIf",r.records&&r.records.length)},dependencies:[F.NgForOf,F.NgIf,wn,zt,no,F.SlicePipe],encapsulation:2})}return i})(),LC=(()=>{class i extends M.BaseComponentRegistry{constructor(){super()}initDefault(){this.register("default","default",NC)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const aU=function(i){return{module:i}};function sU(i,a){if(1&i&&n.\u0275\u0275element(0,"ndc-dynamic",1),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275property("ndcDynamicComponent",e.getType)("ndcDynamicInputs",n.\u0275\u0275pureFunction1(2,aU,e.module))}}let Rd=(()=>{class i{registry;module;constructor(e){this.registry=e}get getType(){return this.registry.get("default","default")}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(LC))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-sub-menu-favorites"]],inputs:{module:"module"},decls:1,vars:1,consts:[[3,"ndcDynamicComponent","ndcDynamicInputs",4,"ngIf"],[3,"ndcDynamicComponent","ndcDynamicInputs"]],template:function(t,r){1&t&&n.\u0275\u0275template(0,sU,1,4,"ndc-dynamic",0),2&t&&n.\u0275\u0275property("ngIf",r.getType)},dependencies:[F.NgIf,Pt,Bt],encapsulation:2})}return i})();function cU(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",6),n.\u0275\u0275element(1,"scrm-menu-item-link",7),n.\u0275\u0275elementEnd()),2&i){const e=a.$implicit;n.\u0275\u0275advance(1),n.\u0275\u0275classMap("sub-nav-link nav-link action-link"),n.\u0275\u0275property("icon",e.icon)("link",e.link)}}function lU(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275element(1,"scrm-sub-menu-recently-viewed",8)(2,"scrm-sub-menu-favorites",8),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("module",e.item.module),n.\u0275\u0275advance(1),n.\u0275\u0275property("module",e.item.module)}}function uU(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"div",3),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(e);const r=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(r.hideDropdown())}),n.\u0275\u0275template(1,cU,2,4,"div",4),n.\u0275\u0275template(2,lU,3,2,"ng-container",5),n.\u0275\u0275elementEnd()}if(2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",e.item.submenu),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.item&&e.item.module)}}const dU=function(i){return{"top-nav-link":!0,"nav-link-nongrouped":!0,"dropdown-toggle":i}};let OC=(()=>{class i{item;showDropdown=!0;constructor(){}hideDropdown(){this.showDropdown=!1,setTimeout(()=>this.showDropdown=!0,0)}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-base-menu-item"]],inputs:{item:"item"},decls:4,vars:6,consts:[["data-target",".navbar-collapse","data-toggle","collapse"],[3,"link"],["aria-labelledby","navbarDropdownMenuLink","class","dropdown-menu submenu",3,"click",4,"ngIf"],["aria-labelledby","navbarDropdownMenuLink",1,"dropdown-menu","submenu",3,"click"],["class","nav-item",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"nav-item"],[3,"icon","link"],[3,"module"]],template:function(t,r){1&t&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"span",0),n.\u0275\u0275element(2,"scrm-menu-item-link",1),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(3,uU,3,2,"div",2),n.\u0275\u0275elementContainerEnd()),2&t&&(n.\u0275\u0275advance(2),n.\u0275\u0275classMap(n.\u0275\u0275pureFunction1(4,dU,r.item.submenu.length)),n.\u0275\u0275property("link",r.item.link),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.item.submenu.length&&r.showDropdown))},dependencies:[F.NgForOf,F.NgIf,Od,Rd,no],encapsulation:2})}return i})(),BC=(()=>{class i extends M.BaseComponentRegistry{constructor(){super()}initDefault(){this.register("default","default",OC)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const fU=function(i){return{item:i}};function pU(i,a){if(1&i&&n.\u0275\u0275element(0,"ndc-dynamic",1),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275property("ndcDynamicComponent",e.getType)("ndcDynamicInputs",n.\u0275\u0275pureFunction1(2,fU,e.item))}}let jd=(()=>{class i{registry;item;constructor(e){this.registry=e}get getType(){return this.registry.get("default","default")}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(BC))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-menu-item"]],inputs:{item:"item"},decls:1,vars:1,consts:[[3,"ndcDynamicComponent","ndcDynamicInputs",4,"ngIf"],[3,"ndcDynamicComponent","ndcDynamicInputs"]],template:function(t,r){1&t&&n.\u0275\u0275template(0,pU,1,4,"ndc-dynamic",0),2&t&&n.\u0275\u0275property("ngIf",r.getType)},dependencies:[F.NgIf,Pt,Bt],encapsulation:2})}return i})(),RC=(()=>{class i{route;active;constructor(){}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-base-home-menu-item"]],inputs:{route:"route",active:"active"},decls:4,vars:3,consts:[[1,"navbar-nav","home-nav"],[1,"nav-item"],[1,"home-nav-link",3,"routerLink"],["image","home",1,"home-icon"]],template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"ul",0)(1,"li",1)(2,"a",2),n.\u0275\u0275element(3,"scrm-image",3),n.\u0275\u0275elementEnd()()()),2&t&&(n.\u0275\u0275advance(1),n.\u0275\u0275classProp("active",r.active),n.\u0275\u0275advance(1),n.\u0275\u0275property("routerLink",r.route))},dependencies:[Rt.RouterLink,wn],encapsulation:2})}return i})(),jC=(()=>{class i extends M.BaseComponentRegistry{constructor(){super()}initDefault(){this.register("default","default",RC)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const mU=function(i,a){return{route:i,active:a}};function gU(i,a){if(1&i&&n.\u0275\u0275element(0,"ndc-dynamic",1),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275property("ndcDynamicComponent",e.getType)("ndcDynamicInputs",n.\u0275\u0275pureFunction2(2,mU,e.route,e.active))}}let kC=(()=>{class i{registry;route;active;constructor(e){this.registry=e}get getType(){return this.registry.get("default","default")}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(jC))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-home-menu-item"]],inputs:{route:"route",active:"active"},decls:1,vars:1,consts:[[3,"ndcDynamicComponent","ndcDynamicInputs",4,"ngIf"],[3,"ndcDynamicComponent","ndcDynamicInputs"]],template:function(t,r){1&t&&n.\u0275\u0275template(0,gU,1,5,"ndc-dynamic",0),2&t&&n.\u0275\u0275property("ngIf",r.getType)},dependencies:[F.NgIf,Pt,Bt],encapsulation:2})}return i})();function hU(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"span",3)(1,"a",4),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd()()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate1(" ",e.item.link.label," ")}}function vU(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"ul",5)(1,"li",6),n.\u0275\u0275element(2,"scrm-menu-item",7),n.\u0275\u0275elementEnd()()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(2),n.\u0275\u0275property("item",e.item)}}function _U(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"li",16),n.\u0275\u0275element(1,"scrm-menu-item-link",17),n.\u0275\u0275elementEnd()),2&i){const e=a.$implicit;n.\u0275\u0275advance(1),n.\u0275\u0275classMap("submenu-nav-link nav-link action-link"),n.\u0275\u0275property("icon",e.icon)("link",e.link)}}function yU(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275element(1,"scrm-sub-menu-recently-viewed",18)(2,"scrm-sub-menu-favorites",18),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(2).$implicit;n.\u0275\u0275advance(1),n.\u0275\u0275property("module",e.module),n.\u0275\u0275advance(1),n.\u0275\u0275property("module",e.module)}}function bU(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"ul",13),n.\u0275\u0275template(1,_U,2,4,"li",14),n.\u0275\u0275template(2,yU,3,2,"ng-container",15),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext().$implicit;n.\u0275\u0275classProp("rounded-0",e.submenu&&1===e.submenu.length),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",e.submenu),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e&&e.module)}}const CU=function(i,a){return{"sub-nav-link":!0,"nav-link":!0,"action-link":!0,"dropdown-item":i,"dropdown-toggle":a}};function MU(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"li",10),n.\u0275\u0275element(1,"scrm-menu-item-link",11),n.\u0275\u0275template(2,bU,3,4,"ul",12),n.\u0275\u0275elementEnd()),2&i){const e=a.$implicit;n.\u0275\u0275advance(1),n.\u0275\u0275classMap(n.\u0275\u0275pureFunction2(4,CU,e.submenu.length,e.submenu.length)),n.\u0275\u0275property("link",e.link),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.submenu.length)}}function SU(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"ul",8),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(e);const r=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(r.hideDropdown())}),n.\u0275\u0275template(1,MU,3,7,"li",9),n.\u0275\u0275elementEnd()}if(2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275property("ngbCollapse",e.subNavCollapse),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",e.item.submenu)}}let PC=(()=>{class i{item;subNavCollapse;showDropdown=!0;constructor(){}hideDropdown(){this.showDropdown=!1,setTimeout(()=>this.showDropdown=!0,0)}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-base-grouped-menu-item"]],inputs:{item:"item",subNavCollapse:"subNavCollapse"},decls:4,vars:3,consts:[["data-target",".navbar-collapse","data-toggle","collapse",4,"ngIf"],["class","navbar-nav grouped",4,"ngIf"],["aria-labelledby","navbarDropdownMenuLink","class","dropdown-menu main",3,"ngbCollapse","click",4,"ngIf"],["data-target",".navbar-collapse","data-toggle","collapse"],["data-toggle","dropdown",1,"top-nav-link","nav-link-grouped","dropdown-toggle","active"],[1,"navbar-nav","grouped"],[1,"top-nav","nav-item","dropdown","main-grouped","active"],[3,"item"],["aria-labelledby","navbarDropdownMenuLink",1,"dropdown-menu","main",3,"ngbCollapse","click"],["class","nav-item dropdown-submenu submenu",4,"ngFor","ngForOf"],[1,"nav-item","dropdown-submenu","submenu"],[3,"link"],["class","dropdown-menu submenu",3,"rounded-0",4,"ngIf"],[1,"dropdown-menu","submenu"],["class","nav-item",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"nav-item"],[3,"icon","link"],[3,"module"]],template:function(t,r){1&t&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,hU,3,1,"span",0),n.\u0275\u0275template(2,vU,3,1,"ul",1),n.\u0275\u0275template(3,SU,2,2,"ul",2),n.\u0275\u0275elementContainerEnd()),2&t&&(n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!r.item.isGroupedMenu),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.item.isGroupedMenu),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.showDropdown))},dependencies:[F.NgForOf,F.NgIf,pe.NgbCollapse,jd,Od,Rd,no],encapsulation:2})}return i})(),$C=(()=>{class i extends M.BaseComponentRegistry{constructor(){super()}initDefault(){this.register("default","default",PC)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const DU=function(i,a){return{item:i,subNavCollapse:a}};function wU(i,a){if(1&i&&n.\u0275\u0275element(0,"ndc-dynamic",1),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275property("ndcDynamicComponent",e.getType)("ndcDynamicInputs",n.\u0275\u0275pureFunction2(2,DU,e.item,e.subNavCollapse))}}let UC=(()=>{class i{registry;item;subNavCollapse;constructor(e){this.registry=e}get getType(){return this.registry.get("default","default")}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject($C))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-grouped-menu-item"]],inputs:{item:"item",subNavCollapse:"subNavCollapse"},decls:1,vars:1,consts:[[3,"ndcDynamicComponent","ndcDynamicInputs",4,"ngIf"],[3,"ndcDynamicComponent","ndcDynamicInputs"]],template:function(t,r){1&t&&n.\u0275\u0275template(0,wU,1,5,"ndc-dynamic",0),2&t&&n.\u0275\u0275property("ngIf",r.getType)},dependencies:[F.NgIf,Pt,Bt],encapsulation:2})}return i})();function EU(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",8),n.\u0275\u0275element(1,"scrm-menu-item-link",9),n.\u0275\u0275elementEnd()),2&i){const e=a.$implicit;n.\u0275\u0275advance(1),n.\u0275\u0275classMap("nav-link action-link"),n.\u0275\u0275property("link",e.link)}}function xU(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"div",6),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(e);const r=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(r.hideDropdown())}),n.\u0275\u0275template(1,EU,2,3,"div",7),n.\u0275\u0275elementEnd()}if(2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",e.items)}}function FU(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"ul",1)(1,"li",2)(2,"a",3),n.\u0275\u0275element(3,"scrm-label",4),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(4,xU,2,1,"div",5),n.\u0275\u0275elementEnd()()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(3),n.\u0275\u0275property("labelKey",e.labelKey),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.showDropdown)}}let VC=(()=>{class i{items;labelKey;showDropdown=!0;constructor(){}hideDropdown(){this.showDropdown=!1,setTimeout(()=>this.showDropdown=!0,0)}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-base-menu-items-list"]],inputs:{items:"items",labelKey:"labelKey"},decls:1,vars:1,consts:[["class","navbar-nav nav-collapsed-items",4,"ngIf"],[1,"navbar-nav","nav-collapsed-items"],[1,"top-nav","nav-item","dropdown","non-grouped"],[1,"nav-link-nongrouped","dropdown-toggle"],[3,"labelKey"],["aria-labelledby","navbarDropdownMenuLink","class","dropdown-menu more-menu submenu",3,"click",4,"ngIf"],["aria-labelledby","navbarDropdownMenuLink",1,"dropdown-menu","more-menu","submenu",3,"click"],["class","nav-item",4,"ngFor","ngForOf"],[1,"nav-item"],[3,"link"]],template:function(t,r){1&t&&n.\u0275\u0275template(0,FU,5,2,"ul",0),2&t&&n.\u0275\u0275property("ngIf",r.items&&r.items.length>0)},dependencies:[F.NgForOf,F.NgIf,zt,no],encapsulation:2})}return i})(),zC=(()=>{class i extends M.BaseComponentRegistry{constructor(){super()}initDefault(){this.register("default","default",VC)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const IU=function(i,a){return{items:i,labelKey:a}};function AU(i,a){if(1&i&&n.\u0275\u0275element(0,"ndc-dynamic",1),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275property("ndcDynamicComponent",e.getType)("ndcDynamicInputs",n.\u0275\u0275pureFunction2(2,IU,e.items,e.labelKey))}}let GC=(()=>{class i{registry;items;labelKey;constructor(e){this.registry=e}get getType(){return this.registry.get("default","default")}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(zC))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-menu-items-list"]],inputs:{items:"items",labelKey:"labelKey"},decls:1,vars:1,consts:[[3,"ndcDynamicComponent","ndcDynamicInputs",4,"ngIf"],[3,"ndcDynamicComponent","ndcDynamicInputs"]],template:function(t,r){1&t&&n.\u0275\u0275template(0,AU,1,5,"ndc-dynamic",0),2&t&&n.\u0275\u0275property("ngIf",r.getType)},dependencies:[F.NgIf,Pt,Bt],encapsulation:2})}return i})();function TU(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"div",4),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(e);const r=n.\u0275\u0275nextContext(3);return n.\u0275\u0275resetView(r.onClick&&r.onClick())}),n.\u0275\u0275elementStart(1,"a",5),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd()()}if(2&i){const e=a.$implicit,t=n.\u0275\u0275nextContext(3);n.\u0275\u0275advance(1),n.\u0275\u0275property("routerLink",t.buildRoute(e)),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",e.attributes.item_summary," ")}}function NU(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,TU,3,2,"div",3),n.\u0275\u0275pipe(2,"slice"),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",n.\u0275\u0275pipeBind3(2,1,e.records,0,e.maxDisplayed))}}function LU(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"h4",1),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(e);const r=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(r.toggleCollapse())}),n.\u0275\u0275element(2,"scrm-label",2),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(3,NU,3,5,"ng-container",0),n.\u0275\u0275elementContainerEnd()}if(2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(3),n.\u0275\u0275property("ngIf",!e.collapsed)}}let WC=(()=>{class i{navigation;nameMapper;configs;metadata;module;onClick;collapsible=!1;maxDisplayed=5;records;collapsed=!1;subs=[];constructor(e,t,r,o){this.navigation=e,this.nameMapper=t,this.configs=r,this.metadata=o}ngOnInit(){const e=this.configs.getConfigValue("ui")??{};this.maxDisplayed=parseInt(e.navigation_max_module_recently_viewed)??5,this.initMetadata$(),this.collapsed=!!this.collapsible}ngOnDestroy(){this.clear()}ngOnChanges(e){null!==(e?.module??null)&&(e?.module?.previousValue??"")!==(e?.module?.currentValue??"")&&(this.clear(),this.initMetadata$())}buildRoute(e){const r=this.nameMapper.toFrontend(e.attributes.module_name??"")??"";return this.navigation.getRecordRouterLink(r,e.attributes.item_id??"")}toggleCollapse(){this.collapsible&&(this.collapsed=!this.collapsed)}initMetadata$(){const e=this.metadata.allModuleMetadata$.pipe((0,v.map)(t=>t[this.module]??null));this.subs.push(e.subscribe(t=>{this.records=t?.recentlyViewed??null}))}clear(){this.records=null,this.subs.forEach(e=>e.unsubscribe())}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(Rn),n.\u0275\u0275directiveInject(Tn),n.\u0275\u0275directiveInject(vt),n.\u0275\u0275directiveInject(bt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-base-menu-recently-viewed"]],inputs:{module:"module",onClick:"onClick",collapsible:"collapsible"},features:[n.\u0275\u0275NgOnChangesFeature],decls:1,vars:1,consts:[[4,"ngIf"],[1,"recently-viewed-header","mt-0","pb-1","pl-2","pr-2",3,"click"],["labelKey","LBL_LAST_VIEWED"],["class","nav-item",3,"click",4,"ngFor","ngForOf"],[1,"nav-item",3,"click"],[1,"nav-link","action-link","pb-2","pt-2",3,"routerLink"]],template:function(t,r){1&t&&n.\u0275\u0275template(0,LU,4,1,"ng-container",0),2&t&&n.\u0275\u0275property("ngIf",r.records&&r.records.length)},dependencies:[F.NgForOf,F.NgIf,Rt.RouterLink,zt,F.SlicePipe],encapsulation:2})}return i})(),KC=(()=>{class i extends M.BaseComponentRegistry{constructor(){super()}initDefault(){this.register("default","default",WC)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const OU=function(i,a,e){return{module:i,onClick:a,collapsible:e}};function BU(i,a){if(1&i&&n.\u0275\u0275element(0,"ndc-dynamic",1),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275property("ndcDynamicComponent",e.getType)("ndcDynamicInputs",n.\u0275\u0275pureFunction3(2,OU,e.module,e.onClick,e.collapsible))}}let kd=(()=>{class i{registry;module;onClick;collapsible=!1;constructor(e){this.registry=e}get getType(){return this.registry.get("default","default")}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(KC))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-menu-recently-viewed"]],inputs:{module:"module",onClick:"onClick",collapsible:"collapsible"},decls:1,vars:1,consts:[[3,"ndcDynamicComponent","ndcDynamicInputs",4,"ngIf"],[3,"ndcDynamicComponent","ndcDynamicInputs"]],template:function(t,r){1&t&&n.\u0275\u0275template(0,BU,1,6,"ndc-dynamic",0),2&t&&n.\u0275\u0275property("ngIf",r.getType)},dependencies:[F.NgIf,Pt,Bt],encapsulation:2})}return i})();function RU(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"div",4),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(e);const r=n.\u0275\u0275nextContext(3);return n.\u0275\u0275resetView(r.onClick&&r.onClick())}),n.\u0275\u0275elementStart(1,"a",5),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd()()}if(2&i){const e=a.$implicit,t=n.\u0275\u0275nextContext(3);n.\u0275\u0275advance(1),n.\u0275\u0275property("routerLink",t.buildRoute(e)),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",e.attributes.parent_name," ")}}function jU(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,RU,3,2,"div",3),n.\u0275\u0275pipe(2,"slice"),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",n.\u0275\u0275pipeBind3(2,1,e.records,0,e.maxDisplayed))}}function kU(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"h4",1),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(e);const r=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(r.toggleCollapse())}),n.\u0275\u0275element(2,"scrm-label",2),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(3,jU,3,5,"ng-container",0),n.\u0275\u0275elementContainerEnd()}if(2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(3),n.\u0275\u0275property("ngIf",!e.collapsed)}}let HC=(()=>{class i extends Bd{navigation;nameMapper;configs;metadata;onClick;collapsible=!1;collapsed=!1;constructor(e,t,r,o){super(e,t,r,o),this.navigation=e,this.nameMapper=t,this.configs=r,this.metadata=o}ngOnInit(){super.ngOnInit(),this.collapsed=!!this.collapsible}toggleCollapse(){this.collapsible&&(this.collapsed=!this.collapsed)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(Rn),n.\u0275\u0275directiveInject(Tn),n.\u0275\u0275directiveInject(vt),n.\u0275\u0275directiveInject(bt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-base-menu-favorites"]],inputs:{onClick:"onClick",collapsible:"collapsible"},features:[n.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,consts:[[4,"ngIf"],[1,"favorite-header","mt-0","pb-1","pl-2","pr-2",3,"click"],["labelKey","LBL_FAVORITES"],["class","nav-item",3,"click",4,"ngFor","ngForOf"],[1,"nav-item",3,"click"],[1,"nav-link","action-link","pb-2","pt-2",3,"routerLink"]],template:function(t,r){1&t&&n.\u0275\u0275template(0,kU,4,1,"ng-container",0),2&t&&n.\u0275\u0275property("ngIf",r.records&&r.records.length)},dependencies:[F.NgForOf,F.NgIf,Rt.RouterLink,zt,F.SlicePipe],encapsulation:2})}return i})(),ZC=(()=>{class i extends M.BaseComponentRegistry{constructor(){super()}initDefault(){this.register("default","default",HC)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const PU=function(i,a,e){return{module:i,onClick:a,collapsible:e}};function $U(i,a){if(1&i&&n.\u0275\u0275element(0,"ndc-dynamic",1),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275property("ndcDynamicComponent",e.getType)("ndcDynamicInputs",n.\u0275\u0275pureFunction3(2,PU,e.module,e.onClick,e.collapsible))}}let Pd=(()=>{class i{registry;module;onClick;collapsible=!1;constructor(e){this.registry=e}get getType(){return this.registry.get("default","default")}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(ZC))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-menu-favorites"]],inputs:{module:"module",onClick:"onClick",collapsible:"collapsible"},decls:1,vars:1,consts:[[3,"ndcDynamicComponent","ndcDynamicInputs",4,"ngIf"],[3,"ndcDynamicComponent","ndcDynamicInputs"]],template:function(t,r){1&t&&n.\u0275\u0275template(0,$U,1,6,"ndc-dynamic",0),2&t&&n.\u0275\u0275property("ngIf",r.getType)},dependencies:[F.NgIf,Pt,Bt],encapsulation:2})}return i})();function UU(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"li",7),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(e);const r=n.\u0275\u0275nextContext(3);return n.\u0275\u0275resetView(r.onClose&&r.onClose())}),n.\u0275\u0275element(1,"scrm-menu-item-link",8),n.\u0275\u0275elementEnd()}if(2&i){const e=n.\u0275\u0275nextContext(2).$implicit;n.\u0275\u0275advance(1),n.\u0275\u0275classMap("mobile-nav-link dropdown-item action-link pl-5 pr-3 pt-2 pb-2"),n.\u0275\u0275property("icon",e.icon||"")("link",e.link)}}function VU(i,a){1&i&&(n.\u0275\u0275elementStart(0,"ngb-panel",5),n.\u0275\u0275template(1,UU,2,4,"ng-template",6),n.\u0275\u0275elementEnd()),2&i&&n.\u0275\u0275property("cardClass","mobile-nav-group-item disabled")("disabled",!0)}function zU(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"li",13),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(e);const r=n.\u0275\u0275nextContext(4);return n.\u0275\u0275resetView(r.onClose&&r.onClose())}),n.\u0275\u0275element(1,"scrm-menu-item-link",8),n.\u0275\u0275elementEnd()}if(2&i){const e=a.$implicit;n.\u0275\u0275advance(1),n.\u0275\u0275classMap("mobile-nav-link action-link pl-1 pr-3 pt-2 pb-2 w-100"),n.\u0275\u0275property("icon",e.icon||"")("link",e.link)}}function GU(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"li"),n.\u0275\u0275element(2,"scrm-menu-recently-viewed",14),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(3,"li"),n.\u0275\u0275element(4,"scrm-menu-favorites",14),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(3).$implicit,t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(2),n.\u0275\u0275property("collapsible",!0)("module",e.module)("onClick",t.onClose),n.\u0275\u0275advance(2),n.\u0275\u0275property("collapsible",!0)("module",e.module)("onClick",t.onClose)}}function WU(i,a){if(1&i&&(n.\u0275\u0275template(0,zU,2,4,"li",11),n.\u0275\u0275template(1,GU,5,6,"ng-container",12)),2&i){const e=n.\u0275\u0275nextContext(2).$implicit;n.\u0275\u0275property("ngForOf",e.submenu),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e&&e.module)}}function KU(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"ngb-panel",9),n.\u0275\u0275template(1,WU,2,2,"ng-template",10),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext().$implicit;n.\u0275\u0275property("title",e.link.label)}}function HU(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,VU,2,2,"ngb-panel",3),n.\u0275\u0275template(2,KU,2,1,"ngb-panel",4),n.\u0275\u0275elementContainerEnd()),2&i){const e=a.$implicit;n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!e.submenu||!e.submenu.length),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.submenu&&e.submenu.length)}}let qC=(()=>{class i{items;onClose;constructor(){}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-base-mobile-grouped-menu"]],inputs:{items:"items",onClose:"onClose"},decls:3,vars:2,consts:[[1,"mobile-menu-items"],[3,"closeOthers"],[4,"ngFor","ngForOf"],[3,"cardClass","disabled",4,"ngIf"],["cardClass","mobile-nav-group-item",3,"title",4,"ngIf"],[3,"cardClass","disabled"],["ngbPanelHeader",""],[1,"",3,"click"],[3,"icon","link"],["cardClass","mobile-nav-group-item",3,"title"],["ngbPanelContent",""],["class","ml-4",3,"click",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"ml-4",3,"click"],[3,"collapsible","module","onClick"]],template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"div",0)(1,"ngb-accordion",1),n.\u0275\u0275template(2,HU,3,2,"ng-container",2),n.\u0275\u0275elementEnd()()),2&t&&(n.\u0275\u0275advance(1),n.\u0275\u0275property("closeOthers",!0),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",r.items))},dependencies:[F.NgForOf,F.NgIf,pe.NgbAccordion,pe.NgbPanel,pe.NgbPanelContent,pe.NgbPanelHeader,kd,Pd,no],encapsulation:2})}return i})(),JC=(()=>{class i extends M.BaseComponentRegistry{constructor(){super()}initDefault(){this.register("default","default",qC)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const ZU=function(i,a){return{items:i,onClose:a}};function qU(i,a){if(1&i&&n.\u0275\u0275element(0,"ndc-dynamic",1),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275property("ndcDynamicComponent",e.getType)("ndcDynamicInputs",n.\u0275\u0275pureFunction2(2,ZU,e.items,e.onClose))}}let QC=(()=>{class i{registry;items;onClose;constructor(e){this.registry=e}get getType(){return this.registry.get("default","default")}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(JC))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-mobile-grouped-menu"]],inputs:{items:"items",onClose:"onClose"},decls:1,vars:1,consts:[[3,"ndcDynamicComponent","ndcDynamicInputs",4,"ngIf"],[3,"ndcDynamicComponent","ndcDynamicInputs"]],template:function(t,r){1&t&&n.\u0275\u0275template(0,qU,1,5,"ndc-dynamic",0),2&t&&n.\u0275\u0275property("ngIf",r.getType)},dependencies:[F.NgIf,Pt,Bt],encapsulation:2})}return i})();function JU(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"div",1)(2,"a",2),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(e);const r=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(r.onClose&&r.onClose())}),n.\u0275\u0275element(3,"scrm-menu-item-link",3),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementContainerEnd()}if(2&i){const e=a.$implicit;n.\u0275\u0275advance(3),n.\u0275\u0275classMap("mobile-nav-link dropdown-item action-link pl-3 pr-3 pt-2 pb-2"),n.\u0275\u0275property("icon",e.icon||"")("link",e.link)}}let XC=(()=>{class i{items;onClose;constructor(){}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-base-mobile-module-menu"]],inputs:{items:"items",onClose:"onClose"},decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],[1,"mobile-menu-items"],[1,"",3,"click"],[3,"icon","link"]],template:function(t,r){1&t&&n.\u0275\u0275template(0,JU,4,4,"ng-container",0),2&t&&n.\u0275\u0275property("ngForOf",r.items)},dependencies:[F.NgForOf,no],encapsulation:2})}return i})(),YC=(()=>{class i extends M.BaseComponentRegistry{constructor(){super()}initDefault(){this.register("default","default",XC)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const QU=function(i,a){return{items:i,onClose:a}};function XU(i,a){if(1&i&&n.\u0275\u0275element(0,"ndc-dynamic",1),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275property("ndcDynamicComponent",e.getType)("ndcDynamicInputs",n.\u0275\u0275pureFunction2(2,QU,e.items,e.onClose))}}let eM=(()=>{class i{registry;items;onClose;constructor(e){this.registry=e}get getType(){return this.registry.get("default","default")}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(YC))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-mobile-module-menu"]],inputs:{items:"items",onClose:"onClose"},decls:1,vars:1,consts:[[3,"ndcDynamicComponent","ndcDynamicInputs",4,"ngIf"],[3,"ndcDynamicComponent","ndcDynamicInputs"]],template:function(t,r){1&t&&n.\u0275\u0275template(0,XU,1,5,"ndc-dynamic",0),2&t&&n.\u0275\u0275property("ngIf",r.getType)},dependencies:[F.NgIf,Pt,Bt],encapsulation:2})}return i})();function YU(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"li",5),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(e);const r=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(r.navBackLink())}),n.\u0275\u0275element(2,"scrm-image",6),n.\u0275\u0275elementStart(3,"a",7),n.\u0275\u0275element(4,"scrm-label",8),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementContainerEnd()}}function eV(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"li",12),n.\u0275\u0275listener("click",function(r){n.\u0275\u0275restoreView(e);const o=n.\u0275\u0275nextContext(3);return n.\u0275\u0275resetView(o.changeSubNav(r,o.current.submenu,o.navigationType,o.current))}),n.\u0275\u0275elementStart(1,"a",13),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd(),n.\u0275\u0275element(3,"scrm-image",15),n.\u0275\u0275elementEnd()}if(2&i){const e=n.\u0275\u0275nextContext(3);n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(e.current.link.label)}}function tV(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"li",12),n.\u0275\u0275listener("click",function(r){const s=n.\u0275\u0275restoreView(e).$implicit,c=n.\u0275\u0275nextContext(3);return n.\u0275\u0275resetView(c.changeSubNav(r,s.submenu,c.navigationType,s))}),n.\u0275\u0275elementStart(1,"a",13),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd(),n.\u0275\u0275element(3,"scrm-image",15),n.\u0275\u0275elementEnd()}if(2&i){const e=a.$implicit;n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(e.link.label)}}function nV(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"div",9),n.\u0275\u0275template(2,eV,4,1,"li",10),n.\u0275\u0275template(3,tV,4,1,"li",11),n.\u0275\u0275elementContainerStart(4),n.\u0275\u0275elementStart(5,"li",12),n.\u0275\u0275listener("click",function(r){n.\u0275\u0275restoreView(e);const o=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(o.changeSubNav(r,o.all,"gm",null))}),n.\u0275\u0275elementStart(6,"a",13),n.\u0275\u0275element(7,"scrm-label",14),n.\u0275\u0275elementEnd(),n.\u0275\u0275element(8,"scrm-image",15),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd(),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()}if(2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",e.isAdminNavbar),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",e.mainItems)}}function iV(i,a){if(1&i&&n.\u0275\u0275element(0,"scrm-mobile-grouped-menu",17),2&i){const e=n.\u0275\u0275nextContext(4);n.\u0275\u0275property("items",null==e.current?null:e.current.submenu)("onClose",e.onClose)}}function rV(i,a){if(1&i&&n.\u0275\u0275element(0,"scrm-mobile-module-menu",17),2&i){const e=n.\u0275\u0275nextContext(4);n.\u0275\u0275property("items",e.submenu)("onClose",e.onClose)}}function oV(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"div",9)(2,"li",18),n.\u0275\u0275element(3,"scrm-menu-recently-viewed",19),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(4,"li",18),n.\u0275\u0275element(5,"scrm-menu-favorites",19),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(4);n.\u0275\u0275advance(3),n.\u0275\u0275property("collapsible",!0)("module",e.subNavItem.module)("onClick",e.onClose),n.\u0275\u0275advance(2),n.\u0275\u0275property("collapsible",!0)("module",e.subNavItem.module)("onClick",e.onClose)}}function aV(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,iV,1,2,"scrm-mobile-grouped-menu",16),n.\u0275\u0275template(2,rV,1,2,"scrm-mobile-module-menu",16),n.\u0275\u0275template(3,oV,6,6,"ng-container",0),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(3);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.isAdminNavbar&&e.isAdminNavbarClicked),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!e.isAdminNavbarClicked),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.subNavItem&&e.subNavItem.module)}}function sV(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275element(1,"scrm-mobile-grouped-menu",17),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(3);n.\u0275\u0275advance(1),n.\u0275\u0275property("items",e.submenu)("onClose",e.onClose)}}function cV(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,aV,4,3,"ng-container",0),n.\u0275\u0275template(2,sV,2,2,"ng-container",0),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf","gm"!==e.subNavigationType),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf","gm"===e.subNavigationType)}}function lV(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,nV,9,2,"ng-container",0),n.\u0275\u0275template(2,cV,3,2,"ng-container",0),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.mainNavLink),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.mobileSubNav)}}let tM=(()=>{class i{current;items;all;onClose;navigationType="";mainItems;submenu=[];subNavItem;subNavigationType="mm";backLink=!1;mobileSubNav=!1;mainNavLink=!0;isAdminNavbar=!1;isAdminNavbarClicked=!1;constructor(){}ngOnInit(){this.mainItems=this.items,"gm"!==this.navigationType&&this.current&&(this.isAdminNavbar=this.current.isGroupedMenu,this.current.isGroupedMenu||(this.mainItems=[this.current,...this.items]))}changeSubNav(e,t,r,o){this.mobileSubNav=!this.mobileSubNav,this.backLink=!this.backLink,this.mainNavLink=!this.mainNavLink,this.subNavItem=o,this.submenu=t,this.subNavigationType=r,o.isGroupedMenu?(this.isAdminNavbarClicked=!0,this.mainItems=this.items):(this.isAdminNavbarClicked=!1,this.isAdminNavbar=!1)}navBackLink(){this.mobileSubNav=!this.mobileSubNav,this.backLink=!this.backLink,this.mainNavLink=!this.mainNavLink}getItems(){}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-base-mobile-menu"]],inputs:{current:"current",items:"items",all:"all",onClose:"onClose",navigationType:"navigationType"},decls:7,vars:2,consts:[[4,"ngIf"],[1,"mobile-nav-close","clicable","pl-3","pr-3","pt-2","pb-2","w-100",3,"click"],["image","cross_bold",1,"sicon","mobile-nav-close"],[1,"nav-close-text"],["labelKey","LBL_CLOSE_MENU"],[1,"d-flex","align-items-center","mobile-back-row",3,"click"],["image","arrow_left_filled",1,"sicon-xs","mobile-nav-arrow","pl-3","pr-3"],[1,"mobile-back-link","pl-1","pr-3","pt-2","pb-2"],["labelKey","LBL_BACK"],[1,"mobile-menu-items"],["class"," d-flex align-items-center",3,"click",4,"ngIf"],["class"," d-flex align-items-center",3,"click",4,"ngFor","ngForOf"],[1,"d-flex","align-items-center",3,"click"],[1,"flex-grow-1","mobile-nav-link","pl-3","pr-3","pt-2","pb-2"],["labelKey","LBL_MORE"],["image","arrow_right_filled",1,"sicon-xs","mobile-nav-arrow","pl-3","pr-3"],[3,"items","onClose",4,"ngIf"],[3,"items","onClose"],[1,""],[3,"collapsible","module","onClick"]],template:function(t,r){1&t&&(n.\u0275\u0275template(0,YU,5,0,"ng-container",0),n.\u0275\u0275template(1,lV,3,2,"ng-container",0),n.\u0275\u0275elementStart(2,"li")(3,"a",1),n.\u0275\u0275listener("click",function(){return r.onClose&&r.onClose()}),n.\u0275\u0275element(4,"scrm-image",2),n.\u0275\u0275elementStart(5,"span",3),n.\u0275\u0275element(6,"scrm-label",4),n.\u0275\u0275elementEnd()()()),2&t&&(n.\u0275\u0275property("ngIf",r.backLink),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.mainItems&&r.mainItems.length))},dependencies:[F.NgForOf,F.NgIf,wn,zt,kd,Pd,QC,eM],encapsulation:2})}return i})(),nM=(()=>{class i extends M.BaseComponentRegistry{constructor(){super()}initDefault(){this.register("default","default",tM)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const uV=function(i,a,e,t,r){return{current:i,items:a,all:e,onClose:t,navigationType:r}};function dV(i,a){if(1&i&&n.\u0275\u0275element(0,"ndc-dynamic",1),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275property("ndcDynamicComponent",e.getType)("ndcDynamicInputs",n.\u0275\u0275pureFunction5(2,uV,e.current,e.items,e.all,e.onClose,e.navigationType))}}let iM=(()=>{class i{registry;current;items;all;onClose;navigationType="";constructor(e){this.registry=e}get getType(){return this.registry.get("default","default")}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(nM))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-mobile-menu"]],inputs:{current:"current",items:"items",all:"all",onClose:"onClose",navigationType:"navigationType"},decls:1,vars:1,consts:[[3,"ndcDynamicComponent","ndcDynamicInputs",4,"ngIf"],[3,"ndcDynamicComponent","ndcDynamicInputs"]],template:function(t,r){1&t&&n.\u0275\u0275template(0,dV,1,8,"ndc-dynamic",0),2&t&&n.\u0275\u0275property("ngIf",r.getType)},dependencies:[F.NgIf,Pt,Bt],encapsulation:2})}return i})();const fV=["mobileGlobalLinkTitle"];function pV(i,a){1&i&&(n.\u0275\u0275elementStart(0,"nav",5)(1,"div",6)(2,"ul",7)(3,"li",8),n.\u0275\u0275text(4,"\xa0 "),n.\u0275\u0275elementEnd()()()())}function mV(i,a){1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"nav",9)(2,"div",10)(3,"ul",7)(4,"li",11),n.\u0275\u0275element(5,"scrm-logo-ui"),n.\u0275\u0275elementEnd()()()(),n.\u0275\u0275elementContainerEnd())}function gV(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275element(1,"scrm-mobile-menu",27),n.\u0275\u0275elementContainerEnd()),2&i){n.\u0275\u0275nextContext();const e=n.\u0275\u0275reference(3),t=n.\u0275\u0275nextContext(2).ngIf,r=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("all",r.navbar.all.modules)("current",r.navbar.current)("items",r.navbar.menu)("navigationType",t.userPreferences.navigation_paradigm||"")("onClose",r.getCloseCallBack(e))}}function hV(i,a){1&i&&n.\u0275\u0275elementContainer(0)}function vV(i,a){1&i&&n.\u0275\u0275element(0,"hr")}function _V(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"a",29),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(3,vV,1,0,"hr",3),n.\u0275\u0275elementContainerEnd()),2&i){const e=a.$implicit,t=a.first,r=a.last;n.\u0275\u0275advance(1),n.\u0275\u0275propertyInterpolate("href",e.link.url,n.\u0275\u0275sanitizeUrl),n.\u0275\u0275propertyInterpolate("target",e.link.target),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1("",e.link.label," "),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!0===r||!0===t)}}function yV(i,a){if(1&i&&n.\u0275\u0275template(0,_V,4,4,"ng-container",28),2&i){const e=n.\u0275\u0275nextContext(4);n.\u0275\u0275property("ngForOf",e.navbar.globalActions)}}function bV(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"ul",12)(2,"div",13,14)(4,"button",15),n.\u0275\u0275element(5,"scrm-image",16),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(6,"div",17),n.\u0275\u0275template(7,gV,2,5,"ng-container",3),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(8,"div",18),n.\u0275\u0275template(9,hV,1,0,"ng-container",19),n.\u0275\u0275elementStart(10,"div",20)(11,"li",21),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(e);const r=n.\u0275\u0275reference(3);return n.\u0275\u0275resetView(r.close())}),n.\u0275\u0275elementStart(12,"a",22,23),n.\u0275\u0275element(14,"scrm-image",24),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(15,"div",25)(16,"span",26),n.\u0275\u0275text(17),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(18,yV,1,1,"ng-template",2),n.\u0275\u0275element(19,"scrm-logout-ui"),n.\u0275\u0275elementEnd()()()()(),n.\u0275\u0275elementContainerEnd()}if(2&i){const e=n.\u0275\u0275reference(13);n.\u0275\u0275nextContext(2);const t=n.\u0275\u0275reference(4),r=n.\u0275\u0275nextContext();n.\u0275\u0275advance(2),n.\u0275\u0275property("autoClose",!1),n.\u0275\u0275advance(4),n.\u0275\u0275property("@mobileNavFade",void 0),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.navbar&&r.navbar.menu&&r.navbar.menu.length),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngTemplateOutlet",t),n.\u0275\u0275advance(6),n.\u0275\u0275styleProp("min-width",e.offsetWidth,"px"),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate2("",r.navbar.currentUser.firstName," ",r.navbar.currentUser.lastName,""),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.navbar.globalActions)}}function CV(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"li",39),n.\u0275\u0275element(2,"scrm-grouped-menu-item",40),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(5);n.\u0275\u0275advance(2),n.\u0275\u0275property("item",e.navbar.current)("subNavCollapse",e.subNavCollapse)}}function MV(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"li",41),n.\u0275\u0275element(1,"scrm-menu-item",42),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext(5);n.\u0275\u0275advance(1),n.\u0275\u0275property("item",e.navbar.current)}}function SV(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"li",39),n.\u0275\u0275element(1,"scrm-grouped-menu-item",40),n.\u0275\u0275elementEnd()),2&i){const e=a.$implicit,t=n.\u0275\u0275nextContext(5);n.\u0275\u0275advance(1),n.\u0275\u0275property("item",e)("subNavCollapse",t.subNavCollapse)}}function DV(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"ul",35),n.\u0275\u0275template(2,CV,3,2,"ng-container",3),n.\u0275\u0275template(3,MV,2,1,"li",36),n.\u0275\u0275template(4,SV,2,2,"li",37),n.\u0275\u0275elementEnd(),n.\u0275\u0275element(5,"scrm-menu-items-list",38),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(4);n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",e.navbar.current&&e.navbar.current.isGroupedMenu),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.navbar.current&&!e.navbar.current.isGroupedMenu),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",e.navbar.menu),n.\u0275\u0275advance(1),n.\u0275\u0275property("items",e.navbar.all.modules)}}function wV(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"li",41),n.\u0275\u0275element(1,"scrm-menu-item",42),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext(5);n.\u0275\u0275advance(1),n.\u0275\u0275property("item",e.navbar.current)}}function EV(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"li",39),n.\u0275\u0275element(2,"scrm-grouped-menu-item",40),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(5);n.\u0275\u0275advance(2),n.\u0275\u0275property("item",e.navbar.current)("subNavCollapse",e.subNavCollapse)}}function xV(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"li",45),n.\u0275\u0275element(1,"scrm-menu-item",42),n.\u0275\u0275elementEnd()),2&i){const e=a.$implicit;n.\u0275\u0275advance(1),n.\u0275\u0275property("item",e)}}function FV(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"ul",7),n.\u0275\u0275template(2,wV,2,1,"li",36),n.\u0275\u0275template(3,EV,3,2,"ng-container",3),n.\u0275\u0275template(4,xV,2,1,"li",43),n.\u0275\u0275elementEnd(),n.\u0275\u0275element(5,"scrm-menu-items-list",44),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(4);n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",e.navbar.current&&!e.navbar.current.isGroupedMenu),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",(null==e.navbar.current?null:e.navbar.current.submenu)&&e.navbar.current.isGroupedMenu),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",e.navbar.menu),n.\u0275\u0275advance(1),n.\u0275\u0275property("items",e.navbar.all.modules)}}function IV(i,a){1&i&&n.\u0275\u0275elementContainer(0)}function AV(i,a){1&i&&n.\u0275\u0275element(0,"hr")}function TV(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"a",29),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(3,AV,1,0,"hr",3),n.\u0275\u0275elementContainerEnd()),2&i){const e=a.$implicit,t=a.first,r=a.last;n.\u0275\u0275advance(1),n.\u0275\u0275propertyInterpolate("href",e.link.url,n.\u0275\u0275sanitizeUrl),n.\u0275\u0275propertyInterpolate("target",e.link.target),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1("",e.link.label," "),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!0===r||!0===t)}}function NV(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,TV,4,4,"ng-container",28),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(4);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",e.navbar.globalActions)}}function LV(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"nav",30)(2,"div",31),n.\u0275\u0275element(3,"scrm-home-menu-item",32),n.\u0275\u0275template(4,DV,6,4,"ng-container",3),n.\u0275\u0275template(5,FV,6,4,"ng-container",3),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(6,IV,1,0,"ng-container",19),n.\u0275\u0275elementStart(7,"div",20)(8,"ul",7)(9,"li",33)(10,"a",22),n.\u0275\u0275element(11,"scrm-image",24),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(12,"div",34)(13,"span",26),n.\u0275\u0275text(14),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(15,NV,2,1,"ng-container",3),n.\u0275\u0275element(16,"scrm-logout-ui"),n.\u0275\u0275elementEnd()()()()(),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(2).ngIf,t=n.\u0275\u0275reference(4),r=n.\u0275\u0275nextContext();n.\u0275\u0275advance(2),n.\u0275\u0275property("ngbCollapse",r.mainNavCollapse),n.\u0275\u0275advance(1),n.\u0275\u0275property("active",e.appState.module&&"home"===e.appState.module)("route",r.getHomePage()),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf","gm"==e.userPreferences.navigation_paradigm),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf","gm"!=e.userPreferences.navigation_paradigm),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngTemplateOutlet",t),n.\u0275\u0275advance(8),n.\u0275\u0275textInterpolate2("",r.navbar.currentUser.firstName," ",r.navbar.currentUser.lastName,""),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.navbar.globalActions)}}function OV(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,mV,6,0,"ng-container",3),n.\u0275\u0275template(2,bV,20,9,"ng-container",3),n.\u0275\u0275template(3,LV,17,9,"ng-container",3),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!e.isUserLoggedIn),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.isUserLoggedIn&&e.mobileNavbar),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.isUserLoggedIn&&!e.mobileNavbar)}}function BV(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"a",57),n.\u0275\u0275element(2,"scrm-label",58),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext().$implicit,t=n.\u0275\u0275nextContext(4);let r;n.\u0275\u0275advance(1),n.\u0275\u0275property("routerLink",e.url)("queryParams",null!==(r=null==e?null:e.params)&&void 0!==r?r:null),n.\u0275\u0275advance(1),n.\u0275\u0275property("labelKey",e.labelKey)("module",t.navbar.current.module)}}function RV(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"a",59),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(e);const r=n.\u0275\u0275nextContext().$implicit,o=n.\u0275\u0275nextContext(4);return n.\u0275\u0275resetView(o.handleProcess(r))}),n.\u0275\u0275element(2,"scrm-label",58),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()}if(2&i){const e=n.\u0275\u0275nextContext().$implicit,t=n.\u0275\u0275nextContext(4);n.\u0275\u0275advance(2),n.\u0275\u0275property("labelKey",e.labelKey)("module",t.navbar.current.module)}}function jV(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"li",56),n.\u0275\u0275template(1,BV,3,4,"ng-container",3),n.\u0275\u0275template(2,RV,3,2,"ng-container",3),n.\u0275\u0275elementEnd()),2&i){const e=a.$implicit;n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!e.process),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.process)}}function kV(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"li",53),n.\u0275\u0275element(2,"scrm-label",54),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(3,jV,3,2,"li",55),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(3);n.\u0275\u0275advance(2),n.\u0275\u0275property("module",e.navbar.current.module),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",e.currentQuickActions)}}function PV(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"a",57),n.\u0275\u0275element(2,"scrm-label",58),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext().$implicit;let t;n.\u0275\u0275advance(1),n.\u0275\u0275property("routerLink",e.url)("queryParams",null!==(t=null==e?null:e.params)&&void 0!==t?t:null),n.\u0275\u0275advance(1),n.\u0275\u0275property("labelKey",e.labelKey)("module",e.module)}}function $V(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"a",59),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(e);const r=n.\u0275\u0275nextContext().$implicit,o=n.\u0275\u0275nextContext(4);return n.\u0275\u0275resetView(o.handleProcess(r))}),n.\u0275\u0275element(2,"scrm-label",58),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()}if(2&i){const e=n.\u0275\u0275nextContext().$implicit;n.\u0275\u0275advance(2),n.\u0275\u0275property("labelKey",e.labelKey)("module",e.module)}}function UV(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"li",56),n.\u0275\u0275template(1,PV,3,4,"ng-container",3),n.\u0275\u0275template(2,$V,3,2,"ng-container",3),n.\u0275\u0275elementEnd()),2&i){const e=a.$implicit;n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!e.process),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.process)}}const rM=function(){return[]};function VV(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"li",53),n.\u0275\u0275element(2,"scrm-label",60),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(3,UV,3,2,"li",55),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(3);let t;n.\u0275\u0275advance(3),n.\u0275\u0275property("ngForOf",null!==(t=null==e||null==e.navigation?null:e.navigation.quickActions)&&void 0!==t?t:n.\u0275\u0275pureFunction0(1,rM))}}function zV(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275text(1),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(2).ngIf;n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(e)}}function GV(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"span",66),n.\u0275\u0275template(1,zV,2,1,"ng-container",3),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext().ngIf;n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e>0)}}function WV(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,GV,2,1,"span",65),n.\u0275\u0275elementContainerEnd()),2&i){const e=a.ngIf;let t;n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",null!==(t=e)&&void 0!==t&&t)}}function KV(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"div",61)(1,"a",62),n.\u0275\u0275listener("mouseenter",function(){n.\u0275\u0275restoreView(e);const r=n.\u0275\u0275nextContext(3);return n.\u0275\u0275resetView(r.markAsRead())}),n.\u0275\u0275element(2,"scrm-image",63),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(3,WV,2,1,"ng-container",3),n.\u0275\u0275pipe(4,"async"),n.\u0275\u0275elementStart(5,"div",64),n.\u0275\u0275element(6,"scrm-notifications"),n.\u0275\u0275elementEnd()()}if(2&i){const e=n.\u0275\u0275nextContext(3);n.\u0275\u0275advance(3),n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(4,1,e.notificationCount$))}}function HV(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",46)(1,"div",47)(2,"a",48),n.\u0275\u0275element(3,"scrm-image",49),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(4,"ul",50),n.\u0275\u0275template(5,kV,4,2,"ng-container",3),n.\u0275\u0275template(6,VV,4,2,"ng-container",3),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(7,"div",51),n.\u0275\u0275element(8,"scrm-search-bar"),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(9,KV,7,3,"div",52),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext().ngIf,t=n.\u0275\u0275nextContext();let r,o;n.\u0275\u0275advance(4),n.\u0275\u0275classProp("dropdown-menu-right",!t.mobileNavbar),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",(null!==(r=null==t.navbar||null==t.navbar.current?null:t.navbar.current.module)&&void 0!==r?r:"")&&t.currentQuickActions.length),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",(null!==(o=null==t||null==t.navigation?null:t.navigation.quickActions)&&void 0!==o?o:n.\u0275\u0275pureFunction0(5,rM)).length),n.\u0275\u0275advance(3),n.\u0275\u0275property("ngIf",t.notificationsEnabled&&t.checkAppStrings(e.appStrings)&&t.arePreferencesInitialized(e.userPreferences))}}function ZV(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",1),n.\u0275\u0275template(1,pV,5,0,"ng-template",2),n.\u0275\u0275template(2,OV,4,3,"ng-container",3),n.\u0275\u0275template(3,HV,10,6,"ng-template",null,4,n.\u0275\u0275templateRefExtractor),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!e.loaded),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.loaded)}}let oM=(()=>{class i{navigationStore;languageStore;userPreferenceStore;systemConfigStore;appState;authService;moduleNavigation;screenSize;asyncActionService;notificationStore;mobileGlobalLinkTitle;static instances=[];loaded=!0;isUserLoggedIn;mainNavCollapse=!0;subNavCollapse=!0;mobileNavbar=!1;mobileSubNav=!1;backLink=!1;mainNavLink=!0;submenu=[];moduleNameMapper;actionNameMapper;routeConverter;navbar;maxTabs=8;screen=qn.Medium;notificationsEnabled=!1;subs=[];navigation;currentQuickActions;languages$;userPreferences$;currentUser$;appState$;navigation$;dropdownLength;notificationCount$;vm$;constructor(e,t,r,o,s,c,l,u,d,f){this.navigationStore=e,this.languageStore=t,this.userPreferenceStore=r,this.systemConfigStore=o,this.appState=s,this.authService=c,this.moduleNavigation=l,this.screenSize=u,this.asyncActionService=d,this.notificationStore=f;const p=o??{configs$:(0,S.of)({}),getConfig:()=>null};this.moduleNameMapper=new Tn(p),this.actionNameMapper=new Co(p),this.routeConverter=new to(this.moduleNameMapper,this.actionNameMapper,p),this.languages$=t?.vm$??(0,S.of)({appStrings:{},modStrings:{},appListStrings:{}}),this.userPreferences$=r?.userPreferences$??(0,S.of)({}),this.currentUser$=c?.currentUser$??(0,S.of)(null),this.appState$=s?.vm$??(0,S.of)({module:null}),this.navigation$=e?.vm$??(0,S.of)({modules:[]}),this.notificationCount$=f?.notificationsUnreadTotal$??(0,S.of)(0),this.vm$=this.navigation$.pipe((0,S.combineLatestWith)(this.userPreferences$,this.currentUser$,this.appState$,this.screenSize.screenSize$,this.languages$),(0,v.map)(([m,h,g,b,_,D])=>(_&&(this.screen=_),m&&m.modules&&(this.navigation=m),this.calculateMaxTabs(m),this.getModuleQuickActions(b?.module),this.navbar&&(this.navbar.resetMenu(),(0,M.ready)([D?.appStrings,D?.modStrings,D?.appListStrings,h,g])&&this.navbar.build(m,g,this.maxTabs)),{navigation:m,userPreferences:h,appState:b,appStrings:D?.appStrings||{},appListStrings:D?.appListStrings||{}})))}onResize(e){this.mobileNavbar=e.target.innerWidth<=768}ngOnInit(){const e=new fC(this.routeConverter,this.moduleNavigation,this.userPreferenceStore,this.languageStore,this.appState);this.setNavbar(e),this.authService.isUserLoggedIn.subscribe(t=>{this.isUserLoggedIn=t}),window.dispatchEvent(new Event("resize")),this.notificationCount$=this.notificationStore?.notificationsUnreadTotal$??(0,S.of)(0),this.subs.push((this.notificationStore?.notificationsEnabled$??(0,S.of)(!1)).subscribe(t=>{this.notificationsEnabled=t}))}ngOnDestroy(){this.authService.isUserLoggedIn.unsubscribe(),this.subs.forEach(e=>e.unsubscribe())}checkAppStrings(e){return e&&Object.keys(e).length>0}arePreferencesInitialized(e){return e&&Object.keys(e).length}markAsRead(){this.notificationStore?.markNotificationsAsRead()}ngAfterViewInit(){this.mobileGlobalLinkTitle?.nativeElement?.offsetWidt&&(this.dropdownLength=this.mobileGlobalLinkTitle.nativeElement.offsetWidt)}changeSubNav(e,t){this.mobileSubNav=!this.mobileSubNav,this.backLink=!this.backLink,this.mainNavLink=!this.mainNavLink,this.submenu=t}navBackLink(){this.mobileSubNav=!this.mobileSubNav,this.backLink=!this.backLink,this.mainNavLink=!this.mainNavLink}getHomePage(){return this.systemConfigStore.getHomePage()}getCloseCallBack(e){return()=>e.close()}setNavbar(e){this.navbar=e,this.loaded=!0}isLoaded(){return this.loaded}calculateMaxTabs(e){const t=this.systemConfigStore?.getConfigValue?.("navigation_tab_limits");if(this.screen&&t){let r=t[this.screen];(!r||e?.maxTabs&&e.maxTabs<r)&&(r=e?.maxTabs),r&&(this.maxTabs=r)}}getModuleQuickActions(e){const t=this?.navigation?.modules[e]??null,r=t?.menu??[];(null===t||!r.length)&&(this.currentQuickActions=[]);const o=[];r.forEach(s=>{if(!s.url||!s.quickAction)return;const c=s?.url??"";o.push({...s,url:c.replace("/#/","/")})}),this.currentQuickActions=o}handleProcess(e){if(!e.process)return;const t=e.process;this.asyncActionService.run(t,{action:t,module:e.module}).pipe((0,v.take)(1)).subscribe()}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(Li),n.\u0275\u0275directiveInject($e),n.\u0275\u0275directiveInject(qt),n.\u0275\u0275directiveInject(vt),n.\u0275\u0275directiveInject(Xt),n.\u0275\u0275directiveInject(oi),n.\u0275\u0275directiveInject(Rn),n.\u0275\u0275directiveInject(hi),n.\u0275\u0275directiveInject(Yt),n.\u0275\u0275directiveInject(wa))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-base-navbar"]],viewQuery:function(t,r){if(1&t&&n.\u0275\u0275viewQuery(fV,5),2&t){let o;n.\u0275\u0275queryRefresh(o=n.\u0275\u0275loadQuery())&&(r.mobileGlobalLinkTitle=o.first)}},hostBindings:function(t,r){1&t&&n.\u0275\u0275listener("resize",function(s){return r.onResize(s)},!1,n.\u0275\u0275resolveWindow)},decls:2,vars:3,consts:[["class","top-panel fixed-top",4,"ngIf"],[1,"top-panel","fixed-top"],[3,"ngIf"],[4,"ngIf"],["actionIcons",""],[1,"navbar","navbar-expand-lg"],[1,"navbar-collapse","collapse","order-4","order-md-0","collapsenav"],[1,"navbar-nav"],[1,"top-nav","nav-item"],[1,"navbar","ml-0","pl-0"],[1,"navbar-collapse"],[1,"pl-0"],[1,"navbar","mobile-nav-block","mobilenavbar"],["ngbDropdown","",1,"position-static",3,"autoClose"],["myDrop","ngbDropdown"],["aria-controls","navbar","aria-expanded","false","aria-label","Toggle navigation","ngbDropdownToggle","","type","button",1,"navbar-toggler"],["image","hamburger",1,"responsive-menu-toggler"],["ngbDropdownMenu","",1,"mobile-nav-dropdown","w-100"],[1,"d-flex","align-items-center"],[4,"ngTemplateOutlet"],["ngbDropdown","",1,"global-links"],[1,"global-link-item",3,"click"],["ngbDropdownToggle","",1,"nav-link","primary-global-link","dropdown-toggle"],["mobileGlobalLinkTitle",""],["image","user",1,"global-action-icon","sicon-2x"],["aria-labelledby","navbarDropdownMenuLink","ngbDropdownMenu","",1,"dropdown-menu","global-links-dropdown","border","shadow-sm-2"],[1,"global-user-name"],[3,"all","current","items","navigationType","onClose"],[4,"ngFor","ngForOf"],["ngbDropdownItem","",1,"dropdown-item","global-links-sublink",3,"href","target"],[1,"navbar","navbar-expand-md","navbar-1"],[1,"navbar-collapse","collapse","collapsenav",3,"ngbCollapse"],[3,"active","route"],[1,"global-link-item"],["aria-labelledby","navbarDropdownMenuLink","ngbDropdownMenu","",1,"dropdown-menu","global-links-dropdown","border","shadow-sm-2","dropdown-menu-right"],[1,"navbar-nav","grouped"],["class","top-nav nav-item dropdown non-grouped active",4,"ngIf"],["class","top-nav nav-item dropdown main-grouped",4,"ngFor","ngForOf"],["labelKey","LBL_TABGROUP_ALL",3,"items"],[1,"top-nav","nav-item","dropdown","main-grouped"],[3,"item","subNavCollapse"],[1,"top-nav","nav-item","dropdown","non-grouped","active"],[3,"item"],["class","top-nav nav-item dropdown non-grouped",4,"ngFor","ngForOf"],["labelKey","LBL_MORE",3,"items"],[1,"top-nav","nav-item","dropdown","non-grouped"],[1,"action-group","navbar-action-group"],[1,"action-new","dropdown"],["type","button","aria-label","Quick Create",1,"action-link","primary-global-link"],["image","plus",1,"action-btn-icon"],[1,"dropdown-menu","border","shadow-sm-2"],[1,"d-flex","align-items-center","mx-1"],["class","action-alert dropdown",4,"ngIf"],[1,"new-list-item-header","font-weight-bold"],["labelKey","LBL_MODULE_NAME",3,"module"],["class","new-list-item",4,"ngFor","ngForOf"],[1,"new-list-item"],[1,"d-flex","align-items-center",3,"routerLink","queryParams"],[3,"labelKey","module"],[1,"d-flex","align-items-center",3,"click"],["labelKey","LBL_QUICK_ACTIONS"],[1,"action-alert","dropdown"],["type","button","aria-label","Toggle Alerts",1,"action-link","primary-global-link",3,"mouseenter"],["image","alert",1,"action-btn-icon"],[1,"dropdown-menu","border","shadow-sm-2","dropdown-menu-right"],["class","badge badge-position rounded-pill bg-danger text-white",4,"ngIf"],[1,"badge","badge-position","rounded-pill","bg-danger","text-white"]],template:function(t,r){1&t&&(n.\u0275\u0275template(0,ZV,5,2,"div",0),n.\u0275\u0275pipe(1,"async")),2&t&&n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(1,1,r.vm$))},dependencies:[F.NgForOf,F.NgIf,F.NgTemplateOutlet,el,cC,pe.NgbCollapse,pe.NgbDropdown,pe.NgbDropdownToggle,pe.NgbDropdownMenu,pe.NgbDropdownItem,Rt.RouterLink,wn,zt,wC,xC,jd,kC,UC,GC,iM,F.AsyncPipe],encapsulation:2,data:{animation:[(0,Wt.trigger)("mobileNavFade",[(0,Wt.transition)(":enter",(0,Wt.useAnimation)(pc.fadeIn,{params:{timing:.5,delay:0}}))])]}})}return i})(),aM=(()=>{class i extends M.BaseComponentRegistry{constructor(){super()}initDefault(){this.register("default","default",oM)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),qV=(()=>{class i{registry;constructor(e){this.registry=e}get getType(){return this.registry.get("default","default")}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(aM))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-navbar-ui"]],decls:1,vars:1,consts:[[3,"ndcDynamicComponent"]],template:function(t,r){1&t&&n.\u0275\u0275element(0,"ndc-dynamic",0),2&t&&n.\u0275\u0275property("ndcDynamicComponent",r.getType)},dependencies:[Bt],encapsulation:2})}return i})();function JV(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"span",4),n.\u0275\u0275element(1,"scrm-action-group-menu",5),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext(3);n.\u0275\u0275advance(1),n.\u0275\u0275property("buttonClass",e.config.buttonClass)("config",e.config.actions)}}function QV(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div")(1,"scrm-field-grid",2),n.\u0275\u0275template(2,JV,2,2,"span",3),n.\u0275\u0275elementEnd()()),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275classMapInterpolate1("record-grid ",e.config&&e.config.klass||"",""),n.\u0275\u0275advance(1),n.\u0275\u0275property("actions",!!e.config.actions)("appendActions",e.config&&e.config.appendActions||!1)("colClass",e.config&&e.config.colClass)("fieldMode",e.mode)("fields",e.fields)("inputClass",e.config&&e.config.inputClass)("labelClass",e.config&&e.config.labelClass)("labelDisplay",e.config&&e.config.labelDisplay||"top")("maxColumns",e.maxColumns)("rowClass",e.config&&e.config.rowClass)("sizeMap",e.sizeMap)("colAlignItems",e.config.colAlignItems),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.config.actions)}}function XV(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,QV,3,16,"div",1),n.\u0275\u0275pipe(2,"async"),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(2,1,e.vm$))}}let $d=(()=>{class i{config;gridButtons=[];mode="detail";maxColumns=4;sizeMap={handset:1,tablet:2,web:3,wide:4};fields=[];special=[];vm$;constructor(){}ngOnInit(){if(!this.config)return;const e=this.config;this.vm$=e.record$.pipe((0,S.combineLatestWith)(e.mode$,e.fields$,e.maxColumns$,e.sizeMap$),(0,v.map)(([t,r,o,s,c])=>(this.mode=r,this.maxColumns=s,this.sizeMap=c,this.fields=this.getFields(t,o),{record:t,mode:r,fields:o,maxColumns:s})))}getFields(e,t){if(!e||!t||!e.fields)return[];const r=[];return t.forEach(o=>{e.fields[o]&&r.push(e.fields[o])}),r}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-record-grid"]],inputs:{config:"config"},decls:1,vars:1,consts:[[4,"ngIf"],[3,"class",4,"ngIf"],[3,"actions","appendActions","colClass","fieldMode","fields","inputClass","labelClass","labelDisplay","maxColumns","rowClass","sizeMap","colAlignItems"],["class","float-right","field-grid-actions","",4,"ngIf"],["field-grid-actions","",1,"float-right"],[3,"buttonClass","config"]],template:function(t,r){1&t&&n.\u0275\u0275template(0,XV,3,3,"ng-container",0),2&t&&n.\u0275\u0275property("ngIf",r.config)},dependencies:[F.NgIf,gd,xr,F.AsyncPipe],encapsulation:2})}return i})(),ps=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,wo,Ir]})}return i})(),sM=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,cn,Jn,Ut,Ir,_o]})}return i})(),nl=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,cn,eo,wo,Zr,Ut,ps,hd,sM]})}return i})(),Ud=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,cn,eo,wo,Zr,Ut,ps,cn,nl,Tr,Ir]})}return i})(),cM=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Jn,Lr,Ut,Ud,nl]})}return i})(),lM=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,De.FormsModule,Mn,Ut,De.ReactiveFormsModule]})}return i})(),YV=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,tl,lC,pe.NgbModule,Rt.RouterModule,Mn,gt,Ut,De.FormsModule,cM,lM]})}return i})();function e6(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"button",7),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(e);const r=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(r.first())}),n.\u0275\u0275element(1,"scrm-image",8),n.\u0275\u0275elementEnd()}}function t6(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"button",9),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(e);const r=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(r.previous())}),n.\u0275\u0275element(1,"scrm-image",10),n.\u0275\u0275elementEnd()}}function n6(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"button",11),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(e);const r=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(r.next())}),n.\u0275\u0275element(1,"scrm-image",12),n.\u0275\u0275elementEnd()}}function i6(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"button",13),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(e);const r=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(r.last())}),n.\u0275\u0275element(1,"scrm-image",14),n.\u0275\u0275elementEnd()}}const r6=function(i,a){return{"hide-pagination-count":i,"centre-pagination":a}};function o6(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",1),n.\u0275\u0275template(1,e6,2,0,"button",2),n.\u0275\u0275template(2,t6,2,0,"button",3),n.\u0275\u0275elementStart(3,"span",4),n.\u0275\u0275text(4),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(5,n6,2,0,"button",5),n.\u0275\u0275template(6,i6,2,0,"button",6),n.\u0275\u0275elementEnd()),2&i){const e=a.ngIf,t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.allowPagination),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.allowPagination),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction2(9,r6,t.displayResponsiveTable,!t.allowPagination)),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate4(" (",e.pageCount.pageFirst," - ",e.pageCount.pageLast," ",e.appStrings.LBL_LIST_OF||""," ",e.pageCount.total,") "),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.allowPagination),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.allowPagination)}}let Vd=(()=>{class i{languageStore;allowPagination=!0;state;displayResponsiveTable;appStrings$;vm$=null;constructor(e){this.languageStore=e,this.appStrings$=this.languageStore?.appStrings$??(0,S.of)({})}ngOnInit(){const e=this.state.getPaginationCount();this.vm$=this.appStrings$.pipe((0,S.combineLatestWith)(e),(0,v.map)(([t,r])=>({appStrings:t,pageCount:r})))}first(){this.state.changePage(M.PageSelection.FIRST)}previous(){this.state.changePage(M.PageSelection.PREVIOUS)}next(){this.state.changePage(M.PageSelection.NEXT)}last(){this.state.changePage(M.PageSelection.LAST)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject($e))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-pagination"]],inputs:{allowPagination:"allowPagination",state:"state"},decls:2,vars:3,consts:[["class","bulk-action float-right",4,"ngIf"],[1,"bulk-action","float-right"],["class","pagination-button pagination-first","aria-label","Navigate to first page",3,"click",4,"ngIf"],["class","pagination-button pagination-previous","aria-label","Previous page",3,"click",4,"ngIf"],[1,"pagination-count",3,"ngClass"],["class","pagination-button pagination-next","aria-label","Navigate to last page",3,"click",4,"ngIf"],["class","pagination-button pagination-last","aria-label","Next page",3,"click",4,"ngIf"],["aria-label","Navigate to first page",1,"pagination-button","pagination-first",3,"click"],["image","paginate_first",1,"sicon-2x","pagination-icons"],["aria-label","Previous page",1,"pagination-button","pagination-previous",3,"click"],["image","paginate_previous",1,"sicon-2x","pagination-icons"],["aria-label","Navigate to last page",1,"pagination-button","pagination-next",3,"click"],["image","paginate_next",1,"sicon-2x","pagination-icons"],["aria-label","Next page",1,"pagination-button","pagination-last",3,"click"],["image","paginate_last",1,"sicon-2x","pagination-icons"]],template:function(t,r){1&t&&(n.\u0275\u0275template(0,o6,7,12,"div",0),n.\u0275\u0275pipe(1,"async")),2&t&&n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(1,1,r.vm$))},dependencies:[F.NgClass,F.NgIf,wn,F.AsyncPipe],encapsulation:2})}return i})(),zd=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Mn]})}return i})();class uM extends M.ActionHandler{shouldDisplay(a){return!0}}let dM=(()=>{class i extends uM{key="displayType";modes=["edit","detail","list","create","massupdate","filter"];constructor(){super()}run(e,t){const r=e.record;if(!r||!e.field)return!0;const s=t.params&&t.params.activeOnFields||{},c=Object.keys(s),l=t.params&&t.params.activeOnAttributes||{},u=Object.keys(l);return!c.length&&!u.length||this.isActive(c,r,s,u,l)}isActive(e,t,r,o,s){let c=!0;return(0,ie.isEmpty)(r)||(c=this.areFieldsActive(e,t,r)),(0,ie.isEmpty)(s)||(c=c&&this.areAttributesActive(o,t,s)),c}areAttributesActive(e,t,r){return e.every(o=>{const c=t.fields&&t.fields[o]||null,l=r[o]&&Object.keys(r[o]);if(c&&l&&l.length)return l.some(u=>{const d=r[o][u],f=c.attributes&&c.attributes[u];if(d&&d.length&&f)return this.isValueActive(f,d)})})}areFieldsActive(e,t,r){return e.every(o=>{const c=t.fields&&t.fields[o]||null,l=r[o];return!(c&&l&&l.length)||this.isValueActive(c,l)})}isValueActive(e,t){let r=!1;return e.valueList&&e.valueList.length?(e.valueList.some(o=>t.some(s=>{if(s===o)return r=!0,!0})),r):((0,M.isVoid)(e.value)||t.some(o=>{o===e.value&&(r=!0)}),r)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),il=(()=>{class i extends vi{constructor(e){super(),e.modes.forEach(t=>this.actions[t][e.key]=e)}runLogic(e,t,r,o,s){let c=!0;const l=Object.values(r.meta.displayLogic).filter(m=>{const h=m.modes??[];return!(!h.length||!h.includes(s))});if(!l||!l.length)return c;let u=r.meta.display??"show",d="hide";"hide"===u&&(d="show");const f={panel:r,record:o,field:t,module:o.module};l.some(m=>{const h=this.buildActionData(m,f);return this.actions[s][m.key].run(h,m)})&&(u=d),c="show"===u,r.displayState.next(c)}buildActionData(e,t){return{field:t.field,record:t&&t.record||null,panel:t.panel||null}}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(dM))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function a6(i,a){1&i&&n.\u0275\u0275projection(0)}function s6(i,a){1&i&&n.\u0275\u0275projection(0,1)}const c6=[[["","popup-content",""]],[["","popup-title",""]]],l6=["[popup-content]","[popup-title]"];let fM=(()=>{class i{icon;klass="line-action-item line-action float-right";buttonConfig=(0,n.signal)({});constructor(){}ngOnInit(){this.buttonConfig.update(()=>this.getButtonConfig())}getButtonConfig(){return{icon:this.icon,klass:this.klass}}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-popup-button"]],inputs:{icon:"icon",klass:"klass"},ngContentSelectors:l6,decls:5,vars:6,consts:[["popContent",""],["popTitle",""],[3,"config","autoClose","ngbPopover","popoverTitle","popoverClass","placement"]],template:function(t,r){if(1&t&&(n.\u0275\u0275projectionDef(c6),n.\u0275\u0275template(0,a6,1,0,"ng-template",null,0,n.\u0275\u0275templateRefExtractor),n.\u0275\u0275template(2,s6,1,0,"ng-template",null,1,n.\u0275\u0275templateRefExtractor),n.\u0275\u0275element(4,"scrm-button",2)),2&t){const o=n.\u0275\u0275reference(1),s=n.\u0275\u0275reference(3);n.\u0275\u0275advance(4),n.\u0275\u0275property("config",r.buttonConfig())("autoClose","outside")("ngbPopover",o)("popoverTitle",s)("popoverClass","popover-wrapper")("placement","right")}},dependencies:[Vn,pe.NgbPopover],encapsulation:2})}return i})(),pM=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,cn,pe.NgbPopoverModule]})}return i})();function u6(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",4)(1,"div",5),n.\u0275\u0275element(2,"scrm-label",6),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(3,"div",7),n.\u0275\u0275element(4,"scrm-field",8),n.\u0275\u0275elementEnd()()),2&i){const e=a.$implicit,t=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(2),n.\u0275\u0275property("labelKey",e.label)("module",t.record.module),n.\u0275\u0275advance(2),n.\u0275\u0275property("mode","list")("field",t.getField(e,t.record))("type",e.type)("record",t.record)}}function d6(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",2),n.\u0275\u0275template(1,u6,5,6,"div",3),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",e.columns)}}let mM=(()=>{class i{fieldManager;record;columns;constructor(e){this.fieldManager=e}getField(e,t){return e&&t?this.fieldManager.addField(t,e):null}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(di))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-record-details-popup-button"]],inputs:{record:"record",columns:"columns"},decls:2,vars:2,consts:[[3,"icon"],["popup-content","","class","container container-popover scroll-thin",4,"ngIf"],["popup-content","",1,"container","container-popover","scroll-thin"],["class","row py-1",4,"ngFor","ngForOf"],[1,"row","py-1"],[1,"col","font-weight-bold","text-muted"],[3,"labelKey","module"],[1,"col"],[3,"mode","field","type","record"]],template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"scrm-popup-button",0),n.\u0275\u0275template(1,d6,2,1,"div",1),n.\u0275\u0275elementEnd()),2&t&&(n.\u0275\u0275property("icon","dots-vertical"),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.columns))},dependencies:[F.NgForOf,F.NgIf,fM,lr,zt],encapsulation:2,changeDetection:0})}return i})(),gM=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,pM,Jn,Ut]})}return i})(),hM=(()=>{class i{transform(e){return(0,S.of)(e)}static \u0275fac=function(t){return new(t||i)};static \u0275pipe=n.\u0275\u0275definePipe({name:"toObservable",type:i,pure:!0})}return i})();function f6(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",5)(1,"div",6)(2,"scrm-panel",7),n.\u0275\u0275pipe(3,"toObservable"),n.\u0275\u0275elementStart(4,"div",8),n.\u0275\u0275element(5,"scrm-field-layout",9),n.\u0275\u0275elementEnd()()()()),2&i){const e=a.$implicit,t=n.\u0275\u0275nextContext(3);n.\u0275\u0275advance(2),n.\u0275\u0275property("title",e.label)("isCollapsed$",n.\u0275\u0275pipeBind1(3,6,e.isCollapsed)),n.\u0275\u0275advance(2),n.\u0275\u0275classMapInterpolate1("panel-",e.key,""),n.\u0275\u0275advance(1),n.\u0275\u0275property("dataSource",t.getLayoutDataSource(e))}}function p6(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",3),n.\u0275\u0275template(1,f6,6,8,"div",4),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",e.panels)}}function m6(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div"),n.\u0275\u0275element(1,"scrm-field-layout",9),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext(3).$implicit,t=n.\u0275\u0275nextContext(3);n.\u0275\u0275classMapInterpolate1("tab-",e.key,""),n.\u0275\u0275advance(1),n.\u0275\u0275property("dataSource",t.getLayoutDataSource(e))}}function g6(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"li",16)(1,"a",17),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(3,m6,2,4,"ng-template",18),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext(2),r=e.$implicit;n.\u0275\u0275property("ngbNavItem",e.index+1),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(r.label)}}function h6(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,g6,4,2,"li",15),n.\u0275\u0275elementContainerEnd()),2&i){const e=a.ngIf;n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!!e)}}function v6(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,h6,2,1,"ng-container",0),n.\u0275\u0275pipe(2,"async"),n.\u0275\u0275elementContainerEnd()),2&i){const e=a.$implicit;n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(2,1,e.display$))}}function _6(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",6)(1,"scrm-panel",7),n.\u0275\u0275pipe(2,"toObservable"),n.\u0275\u0275elementStart(3,"div",8),n.\u0275\u0275element(4,"scrm-field-layout",9),n.\u0275\u0275elementEnd()()()),2&i){const e=n.\u0275\u0275nextContext(3).$implicit,t=n.\u0275\u0275nextContext(5);n.\u0275\u0275advance(1),n.\u0275\u0275property("title",e.label)("isCollapsed$",n.\u0275\u0275pipeBind1(2,6,e.isCollapsed)),n.\u0275\u0275advance(2),n.\u0275\u0275classMapInterpolate1("panel-",e.key,""),n.\u0275\u0275advance(1),n.\u0275\u0275property("dataSource",t.getLayoutDataSource(e))}}function y6(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",20),n.\u0275\u0275template(1,_6,5,8,"div",21),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext(3).index,t=n.\u0275\u0275nextContext(4);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e==t.active-1)}}function b6(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,y6,2,1,"div",19),n.\u0275\u0275elementContainerEnd()),2&i){const e=a.ngIf;n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!!e)}}function C6(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div"),n.\u0275\u0275template(1,b6,2,1,"ng-container",0),n.\u0275\u0275pipe(2,"async"),n.\u0275\u0275elementEnd()),2&i){const e=a.$implicit;n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(2,1,e.display$))}}function M6(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,C6,3,3,"div",13),n.\u0275\u0275elementContainerEnd()),2&i){const e=a.$implicit;n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",e.subPanels)}}function S6(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,M6,2,1,"ng-container",13),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(3);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",e.panels)}}function D6(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"div",10)(1,"ul",11,12),n.\u0275\u0275listener("activeIdChange",function(r){n.\u0275\u0275restoreView(e);const o=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(o.active=r)}),n.\u0275\u0275template(3,v6,3,3,"ng-container",13),n.\u0275\u0275elementEnd(),n.\u0275\u0275element(4,"div",14),n.\u0275\u0275template(5,S6,2,1,"ng-container",0),n.\u0275\u0275elementEnd()}if(2&i){const e=n.\u0275\u0275reference(2),t=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("activeId",t.active),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngForOf",t.panels),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngbNavOutlet",e),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.panelsInPrevTab&&t.panelsInPrevTab.length)}}function w6(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,p6,2,1,"div",1),n.\u0275\u0275template(2,D6,6,4,"div",2),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.config&&"panels"===e.config.layout),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.config&&"tabs"===e.config.layout)}}let Gd=(()=>{class i{language;dataSource;config={};panels;panelsInPrevTab=[];active=1;record;fields;subs=[];constructor(e){this.language=e}ngOnInit(){this.dataSource?(this.subs.push(this.dataSource.getDisplayConfig().subscribe(e=>{this.config={...e}})),this.subs.push(this.dataSource.getPanels().subscribe(e=>{e?(this.panels=[...e],"panels"===this?.config?.layout?this.updatePanelCollapseState():this.updatePanelsInTabs()):this.panels=[]})),this.subs.push(this.dataSource.getRecord().subscribe(e=>{this.record={...e},this.fields=e.fields}))):this.subs.push(S.EMPTY.subscribe())}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}updatePanelsInTabs(){let e=[],t="";const r=this.buildPanelMap(),o=this.mapTabDefs();Object.keys(o).forEach(s=>{if((0,M.isTrue)(o[s].newTab))e=[...e,r[s]],t=s;else{const l=o[t],u=r[t];this.panelsInPrevTab.includes(u)||this.panelsInPrevTab.push(u);const d=r[s];(0,M.isTrue)(l?.newTab)&&this.panelsInPrevTab.length>0&&this.addToPrevTab(d)}}),this.panels=e}addToPrevTab(e){const t=this.panelsInPrevTab.length-1;(this.panelsInPrevTab[t]?.subPanels??null)||(this.panelsInPrevTab[t].subPanels=[]),this.panelsInPrevTab[t].subPanels.push(e)}updatePanelCollapseState(){const e=this.buildPanelMap();this.panels.forEach(t=>{const r=t.key.toUpperCase();e[r]&&(t.isCollapsed=e[r].isCollapsed)})}buildPanelMap(){const e={};return(this.panels||[]).forEach(t=>{let r=!1;t.label=t?.label?.toUpperCase()??"";const o=t?.key?.toUpperCase()??"";"collapsed"===t?.meta?.panelDefault&&(r=!0),t.isCollapsed=r,e[o]=t}),e}mapTabDefs(){const e={};return Object.keys(this?.config?.tabDefs??{}).forEach(t=>{e[t.toUpperCase()]=this?.config?.tabDefs[t]}),e}getLayoutDataSource(e){return{inlineEdit:!0,getConfig:()=>this.dataSource.getDisplayConfig().pipe((0,v.map)(t=>({mode:t.mode,maxColumns:t.maxColumns}))),getLayout:()=>(0,S.of)(e).pipe((0,v.shareReplay)(1)),getFields:()=>this.dataSource.getRecord().pipe((0,v.map)(t=>t.fields)),getRecord:()=>this.dataSource.getRecord(),getEditAction:()=>this.dataSource.getEditAction()}}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject($e))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-record-content"]],inputs:{dataSource:"dataSource"},decls:1,vars:1,consts:[[4,"ngIf"],["class","record-content panel-layout container-fluid pl-0 pr-0",4,"ngIf"],["class","record-content tabs-layout container-fluid pl-0 pr-0",4,"ngIf"],[1,"record-content","panel-layout","container-fluid","pl-0","pr-0"],["class","row no-gutters mb-3",4,"ngFor","ngForOf"],[1,"row","no-gutters","mb-3"],[1,"col"],["mode","collapsible",3,"title","isCollapsed$"],["panel-body",""],[3,"dataSource"],[1,"record-content","tabs-layout","container-fluid","pl-0","pr-0"],["ngbNav","",1,"nav-tabs",3,"activeId","activeIdChange"],["nav","ngbNav"],[4,"ngFor","ngForOf"],[1,"p-2","pt-3","rounded-right","rounded-bottom",3,"ngbNavOutlet"],["class","tab",3,"ngbNavItem",4,"ngIf"],[1,"tab",3,"ngbNavItem"],["ngbNavLink","",1,"tab-link"],["ngbNavContent",""],["class","row no-gutters mt-3",4,"ngIf"],[1,"row","no-gutters","mt-3"],["class","col",4,"ngIf"]],template:function(t,r){1&t&&n.\u0275\u0275template(0,w6,3,2,"ng-container",0),2&t&&n.\u0275\u0275property("ngIf",r.dataSource)},dependencies:[F.NgForOf,F.NgIf,Ea,pe.NgbNavContent,pe.NgbNav,pe.NgbNavItem,pe.NgbNavItemRole,pe.NgbNavLink,pe.NgbNavLinkBase,pe.NgbNavOutlet,$1,F.AsyncPipe,hM],encapsulation:2})}return i})(),vM=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule]})}return i})(),Wd=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,eo,pe.NgbModule,hd,vM]})}return i})(),_M=(()=>{class i{constructor(){}ngOnInit(){}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-record-content-skeleton"]],decls:138,vars:0,consts:[[1,"record-content","tabs-layout","container-fluid","pl-0","pr-0","record-content-skeleton"],[1,"nav-tabs","nav"],[1,"tab","nav-item"],["href","",1,"tab-link","nav-link","active","pl-5","pr-5","h-100","box-loading"],["href","",1,"tab-link","nav-link","pl-5","pr-5","h-100","box-loading"],[1,"p-2","pt-3","rounded-right","rounded-bottom","tab-content"],[1,"tab-pane","fade","active","show"],[1,""],[1,"detail","field-layout"],[1,"form-row","align-items-center","pt-1","pb-1"],[1,"field-column-bordered","col","form-group","m-0","pl-3","pb-2","pr-3"],[1,"label-container"],[1,"col-form-label-sm","mb-0","pb-3","pl-5","pr-5","h-100","rounded","box-loading"],[1,"d-flex"],[1,"flex-grow-1","text-break","rounded","box-loading","skeleton-field-content"],["type","button",1,"record-action-button"],["image","pencil"],[1,"field-separation","mt-2"],[1,"col","form-group","m-0","pl-3","pb-2","pr-3"]],template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"div",0)(1,"ul",1)(2,"li",2),n.\u0275\u0275element(3,"a",3),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(4,"li",2),n.\u0275\u0275element(5,"a",4),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(6,"li",2),n.\u0275\u0275element(7,"a",4),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(8,"div",5)(9,"div",6)(10,"div",7)(11,"form",8)(12,"div",9)(13,"div",10)(14,"div",11)(15,"strong"),n.\u0275\u0275element(16,"label",12),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(17,"div",13),n.\u0275\u0275element(18,"div",14),n.\u0275\u0275elementStart(19,"div")(20,"button",15),n.\u0275\u0275element(21,"scrm-image",16),n.\u0275\u0275elementEnd()()(),n.\u0275\u0275element(22,"div",17),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(23,"div",18)(24,"div",11)(25,"strong"),n.\u0275\u0275element(26,"label",12),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(27,"div",13),n.\u0275\u0275element(28,"div",14),n.\u0275\u0275elementStart(29,"div")(30,"button",15),n.\u0275\u0275element(31,"scrm-image",16),n.\u0275\u0275elementEnd()()(),n.\u0275\u0275element(32,"div",17),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(33,"div",9)(34,"div",10)(35,"div",11)(36,"strong"),n.\u0275\u0275element(37,"label",12),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(38,"div",13),n.\u0275\u0275element(39,"div",14),n.\u0275\u0275elementStart(40,"div")(41,"button",15),n.\u0275\u0275element(42,"scrm-image",16),n.\u0275\u0275elementEnd()()(),n.\u0275\u0275element(43,"div",17),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(44,"div",18)(45,"div",11)(46,"strong"),n.\u0275\u0275element(47,"label",12),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(48,"div",13),n.\u0275\u0275element(49,"div",14),n.\u0275\u0275elementStart(50,"div")(51,"button",15),n.\u0275\u0275element(52,"scrm-image",16),n.\u0275\u0275elementEnd()()(),n.\u0275\u0275element(53,"div",17),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(54,"div",9)(55,"div",10)(56,"div",11)(57,"strong"),n.\u0275\u0275element(58,"label",12),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(59,"div",13),n.\u0275\u0275element(60,"div",14),n.\u0275\u0275elementStart(61,"div")(62,"button",15),n.\u0275\u0275element(63,"scrm-image",16),n.\u0275\u0275elementEnd()()(),n.\u0275\u0275element(64,"div",17),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(65,"div",18)(66,"div",11)(67,"strong"),n.\u0275\u0275element(68,"label",12),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(69,"div",13),n.\u0275\u0275element(70,"div",14),n.\u0275\u0275elementStart(71,"div")(72,"button",15),n.\u0275\u0275element(73,"scrm-image",16),n.\u0275\u0275elementEnd()()(),n.\u0275\u0275element(74,"div",17),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(75,"div",9)(76,"div",10)(77,"div",11)(78,"strong"),n.\u0275\u0275element(79,"label",12),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(80,"div",13),n.\u0275\u0275element(81,"div",14),n.\u0275\u0275elementStart(82,"div")(83,"button",15),n.\u0275\u0275element(84,"scrm-image",16),n.\u0275\u0275elementEnd()()(),n.\u0275\u0275element(85,"div",17),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(86,"div",18)(87,"div",11)(88,"strong"),n.\u0275\u0275element(89,"label",12),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(90,"div",13),n.\u0275\u0275element(91,"div",14),n.\u0275\u0275elementStart(92,"div")(93,"button",15),n.\u0275\u0275element(94,"scrm-image",16),n.\u0275\u0275elementEnd()()(),n.\u0275\u0275element(95,"div",17),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(96,"div",9)(97,"div",10)(98,"div",11)(99,"strong"),n.\u0275\u0275element(100,"label",12),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(101,"div",13),n.\u0275\u0275element(102,"div",14),n.\u0275\u0275elementStart(103,"div")(104,"button",15),n.\u0275\u0275element(105,"scrm-image",16),n.\u0275\u0275elementEnd()()(),n.\u0275\u0275element(106,"div",17),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(107,"div",18)(108,"div",11)(109,"strong"),n.\u0275\u0275element(110,"label",12),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(111,"div",13),n.\u0275\u0275element(112,"div",14),n.\u0275\u0275elementStart(113,"div")(114,"button",15),n.\u0275\u0275element(115,"scrm-image",16),n.\u0275\u0275elementEnd()()(),n.\u0275\u0275element(116,"div",17),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(117,"div",9)(118,"div",10)(119,"div",11)(120,"strong"),n.\u0275\u0275element(121,"label",12),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(122,"div",13),n.\u0275\u0275element(123,"div",14),n.\u0275\u0275elementStart(124,"div")(125,"button",15),n.\u0275\u0275element(126,"scrm-image",16),n.\u0275\u0275elementEnd()()(),n.\u0275\u0275element(127,"div",17),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(128,"div",18)(129,"div",11)(130,"strong"),n.\u0275\u0275element(131,"label",12),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(132,"div",13),n.\u0275\u0275element(133,"div",14),n.\u0275\u0275elementStart(134,"div")(135,"button",15),n.\u0275\u0275element(136,"scrm-image",16),n.\u0275\u0275elementEnd()()(),n.\u0275\u0275element(137,"div",17),n.\u0275\u0275elementEnd()()()()()()())},dependencies:[wn],encapsulation:2})}return i})(),yM=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Mn]})}return i})();function E6(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"a",1),n.\u0275\u0275listener("click",function(){const o=n.\u0275\u0275restoreView(e).ngIf,s=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(s.changeSorting(o))}),n.\u0275\u0275element(2,"scrm-image",2),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()}if(2&i){const e=a.ngIf,t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(2),n.\u0275\u0275property("image",t.getStatusIcon(e))}}let bM=(()=>{class i{state;direction$;statusIcons={NONE:"sort",ASC:"sort_ascend",DESC:"sort_descend"};nextDirection={NONE:M.SortDirection.DESC,ASC:M.SortDirection.NONE,DESC:M.SortDirection.ASC};constructor(){}ngOnInit(){this.direction$=this.state.getSortDirection()}getStatusIcon(e){return this.statusIcons[e]}changeSorting(e){this.state.changeSortDirection(this.nextDirection[e])}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-sort-button"]],inputs:{state:"state"},decls:2,vars:3,consts:[[4,"ngIf"],[1,"btn","btn-sm","p-0","sort-button",3,"click"],[1,"sort-icon","sicon",3,"image"]],template:function(t,r){1&t&&(n.\u0275\u0275template(0,E6,3,1,"ng-container",0),n.\u0275\u0275pipe(1,"async")),2&t&&n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(1,1,r.direction$))},dependencies:[F.NgIf,wn,F.AsyncPipe],encapsulation:2})}return i})(),CM=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Mn]})}return i})(),Kd=(()=>{class i{appStateStore;languageStore;navigationStore;moduleNavigation;metadataStore;appState$;module$;language$;navigation$;appData$;metadata$;appData;metadata;constructor(e,t,r,o,s){this.appStateStore=e,this.languageStore=t,this.navigationStore=r,this.moduleNavigation=o,this.metadataStore=s,this.appState$=this.appStateStore.vm$,this.language$=this.languageStore.vm$,this.navigation$=this.navigationStore.vm$,this.module$=this.appState$.pipe((0,S.combineLatestWith)(this.navigation$),(0,v.map)(([c,l])=>this.moduleNavigation.getModuleInfo(c.module,l))),this.appData$=this.appState$.pipe((0,S.combineLatestWith)(this.module$,this.language$,this.navigation$),(0,v.map)(([c,l,u,d])=>(this.appData={appState:c,module:l,language:u,navigation:d},this.appData))),this.metadata$=s.metadata$.pipe((0,v.tap)(c=>{this.metadata=c}))}clear(){}clearAuthBased(){this.clear()}get appState(){return this.appData.appState?this.appData.appState:{}}get module(){return this.appData.module}get language(){return this.appData.language?this.appData.language:{appStrings:{},appListStrings:{},modStrings:{},languageKey:""}}get appStrings(){return this.language.appStrings}get appListStrings(){return this.language.appListStrings}get modStrings(){return this.language.modStrings}get navigation(){return this.appData.navigation}get searchMeta(){return this.metadata.search?this.metadata.search:{layout:{basic:{},advanced:{}}}}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Xt),n.\u0275\u0275inject($e),n.\u0275\u0275inject(Li),n.\u0275\u0275inject(Rn),n.\u0275\u0275inject(bt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),Hd=(()=>{class i extends Bc{apollo;constructor(e){super(e),this.apollo=e}get(e,t,r,o){return super.get(e,t,r,o)}mapRecord(e){if(!e)return e;e.key=e.id||e.attributes&&e.attributes.id||"";const t=e.attributes&&e.attributes&&e.attributes.contents||null;if(t){const r={...e};return r.criteria=t,r}return e}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(me.Apollo))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),MM=(()=>{class i extends Xu{listGQL;configs;preferences;language;message;auth;moduleNameMapper;moduleName="saved-search";filterFields={module:"search_module",user:"assigned_user_id"};constructor(e,t,r,o,s,c,l){super(e,t,r,o,s),this.listGQL=e,this.configs=t,this.preferences=r,this.language=o,this.message=s,this.auth=c,this.moduleNameMapper=l}init(e){if(!this.configs||!this.preferences)return(0,S.of)({records:[],pagination:null,criteria:null});const t=super.init(this.moduleName,!1);return this.initCriteria(e),t}load(e=!0){return super.load(e)}getFilters(){return this.records}addFilter(e){let t=!0;const o=[];this.records.forEach(s=>{if(s.id===e.id)return o.push(e),void(t=!1);o.push(s)}),t&&o.push(e),this.updateState({...this.internalState,records:o})}removeFilter(e){if(!e||!e.id)return;const r=[];this.records.forEach(o=>{o.id!==e.id&&r.push(o)}),this.updateState({...this.internalState,records:r})}initCriteria(e){const t=this.criteria;t.filters[this.filterFields.module]={field:this.filterFields.module,operator:"=",values:[this.moduleNameMapper.toLegacy(e)]},t.filters[this.filterFields.user]={field:this.filterFields.user,operator:"=",values:[this.auth.getCurrentUser().id]},this.updateSearchCriteria(t,!1)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Hd),n.\u0275\u0275inject(vt),n.\u0275\u0275inject(qt),n.\u0275\u0275inject($e),n.\u0275\u0275inject(dt),n.\u0275\u0275inject(oi),n.\u0275\u0275inject(Tn))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),rl=(()=>{class i{listGQL;configs;preferences;language;message;auth;moduleNameMapper;constructor(e,t,r,o,s,c,l){this.listGQL=e,this.configs=t,this.preferences=r,this.language=o,this.message=s,this.auth=c,this.moduleNameMapper=l}create(){return new MM(this.listGQL,this.configs,this.preferences,this.language,this.message,this.auth,this.moduleNameMapper)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Hd),n.\u0275\u0275inject(vt),n.\u0275\u0275inject(qt),n.\u0275\u0275inject($e),n.\u0275\u0275inject(dt),n.\u0275\u0275inject(oi),n.\u0275\u0275inject(Tn))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Fa=(()=>{class i{listStoreFactory;languageStore;statisticsStoreFactory;filterListStoreFactory;meta;preferences;show=!1;parentModule;parentId;parentRecord$;parentRecord;recordList;statistics;metadata$;listMetadata$;searchMetadata$;columns$;metadata;loading$;filterList;criteria$;showFilter=!1;filterApplied=!1;preferenceKey=null;metadataState;subs=[];constructor(e,t,r,o,s,c){this.listStoreFactory=e,this.languageStore=t,this.statisticsStoreFactory=r,this.filterListStoreFactory=o,this.meta=s,this.preferences=c,this.recordList=e.create(),this.filterList=this.filterListStoreFactory.create(),this.criteria$=this.recordList.criteria$,this.statistics={},this.metadataState=new S.BehaviorSubject({}),this.metadata$=this.metadataState.asObservable(),this.loading$=this.recordList.loading$}getTitle(){let e=this.languageStore.getFieldLabel(this.metadata.title_key,this.parentModule);if(!e){const t=this.languageStore.getAppListString("moduleList");e=t&&t[this.metadata.title_key]||""}return e}getIcon(){return this.metadata.icon}clear(){this.metadataState.unsubscribe(),this.metadataState=null,this.recordList.clear(),this.recordList=null,this.subs.forEach(e=>e.unsubscribe())}clearAuthBased(){this.recordList.clearAuthBased()}searchFilter(){this.filterApplied=!0,this.showFilter=!1}init(e,t,r,o=null){this.parentModule=e,this.parentId=t,this.metadata=r,this.metadataState.next(this.metadata);const s=this.meta.getMetadata(r.module).pipe((0,v.tap)(()=>{this.recordList.load().pipe((0,v.take)(1)).subscribe()}));this.searchMetadata$=s.pipe((0,v.map)(l=>l.search));const c=this.initSearchCriteria(this.parentModule,this.parentId,r);this.recordList.init(r.module,!1,"list_max_entries_per_subpanel",c),this.initStatistics(r,e,t),o&&(this.parentRecord$=o,this.parentRecord$.subscribe(l=>this.parentRecord=l))}setFilters(e,t=!0){this.recordList.setFilters(e,t,null)}isAnyFilterApplied(){return this.hasActiveFilter()||!this.areAllCurrentCriteriaFilterEmpty()}hasActiveFilter(){const e=this.recordList.criteria;if(e)return!1;const t=Object.keys(e)??[];if(!t||!t.length)return!1;if(t.length>1)return!0;const r=e[t[0]];return r.key&&""!==r.key&&"default"!==r.key}areAllCurrentCriteriaFilterEmpty(){return Object.keys(this.getFilters()??{}).every(e=>""===this.getFilters()[e].operator)}getFilters(){return this.recordList?.criteria?.filters??{}}load(e=!0){return this.recordList.load(e)}getStatistic(e){return this.statistics[e]?this.statistics[e]:null}resetFilters(e=!0){this.recordList.resetFilters(e)}clearFilter(){this.resetFilters(),this.filterApplied=!1,this.showFilter=!1}initSearchCriteria(e,t,r){const o=r?.sort_order??"desc",s=r?.sort_by??"";return{key:"default",module:"saved-search",attributes:{contents:""},criteria:{name:"default",filters:{},preset:{type:"subpanel",params:{subpanel:r?.name,parentModule:e,parentId:t}},sortOrder:o,orderBy:s}}}loadStatistics(e,t=!0){return this.statistics[e]?this.statistics[e].load(t):null}loadAllStatistics(e=!0){if(!this.statistics||!Object.keys(this.statistics).length)return null;const t=[];return Object.keys(this.statistics).forEach(r=>{this.statistics[r]&&t.push(this.loadStatistics(r,e))}),(0,S.forkJoin)(t)}shouldBatchStatistic(){const e=this.metadata||{};return!(e.insightWidget&&e.insightWidget.batch&&!1===e.insightWidget.batch)}setStatisticsLoading(e,t){this.statistics[e]&&this.statistics[e].setLoading(t)}setAllStatisticsLoading(e){!this.statistics||!Object.keys(this.statistics).length||Object.keys(this.statistics).forEach(t=>{this.statistics[t]&&this.setStatisticsLoading(t,e)})}setStatistics(e,t,r=!1){this.statistics[e]&&this.statistics[e].setStatistic(e,t,r)}getStatisticQuery(e){return this.statistics[e].getQuery()}getAllStatisticQuery(){if(!this.statistics||!Object.keys(this.statistics).length)return{};const e={};return Object.keys(this.statistics).forEach(t=>{this.statistics[t]&&(e[t]=this.getStatisticQuery(t))}),e}getWidgetLayout(){const e=this.metadata;if(!(e&&e.insightWidget&&e.insightWidget.options&&e.insightWidget.options.insightWidget))return{rows:[]};const t=(0,M.deepClone)(e.insightWidget.options.insightWidget);return(!t.rows||!t.rows.length)&&(t.rows={}),t}toggleFilter(){return this.showFilter=!this.showFilter}initStatistics(e,t,r){this.getWidgetLayout().rows.forEach(s=>{!s.cols||!s.cols.length||s.cols.forEach(c=>{!c.statistic||"string"!=typeof c.statistic||(this.initStatistic(c.statistic,e,t,r),c.store=this.statistics[c.statistic])})})}initStatistic(e,t,r,o){this.statistics[e]=this.statisticsStoreFactory.create(),this.statistics[e].init(t.module,{key:e,context:{module:r,id:o},params:{subpanel:t.name}},!1)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Gi),n.\u0275\u0275inject($e),n.\u0275\u0275inject(os),n.\u0275\u0275inject(rl),n.\u0275\u0275inject(bt),n.\u0275\u0275inject(qt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),Zd=(()=>{class i{listStoreFactory;languageStore;statisticsStoreFactory;filterListStoreFactory;meta;preferences;constructor(e,t,r,o,s,c){this.listStoreFactory=e,this.languageStore=t,this.statisticsStoreFactory=r,this.filterListStoreFactory=o,this.meta=s,this.preferences=c}create(){return new Fa(this.listStoreFactory,this.languageStore,this.statisticsStoreFactory,this.filterListStoreFactory,this.meta,this.preferences)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Gi),n.\u0275\u0275inject($e),n.\u0275\u0275inject(os),n.\u0275\u0275inject(rl),n.\u0275\u0275inject(bt),n.\u0275\u0275inject(qt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),qd=(()=>{class i{fetchGQL;constructor(e){this.fetchGQL=e}fetch(e,t){return this.fetchGQL.fetch(e,t)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(ur))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const SM={module:"",recordID:"",loading:!1,widgets:!1,showSidebarWidgets:!1,showTopWidget:!1,showSubpanels:!1,mode:"detail",params:{returnModule:"",returnId:"",returnAction:""}};let yi=(()=>{class i extends Kd{recordFetchGQL;recordSaveGQL;appStateStore;languageStore;navigationStore;moduleNavigation;metadataStore;localStorage;message;subpanelFactory;recordManager;statisticsBatch;recordStoreFactory;preferences;panelLogicManager;record$;stagingRecord$;loading$;widgets$;showSidebarWidgets$;showTopWidget$;showSubpanels$;mode$;subpanels$;viewContext$;subpanelReload$;panels=[];panels$;vm$;vm;data;recordStore;cache$=null;internalState=(0,M.deepClone)(SM);store=new S.BehaviorSubject(this.internalState);state$=this.store.asObservable();subpanels;subpanelsState;subpanelReloadSubject=new S.BehaviorSubject({});subpanelReloadSub=[];subs=[];fieldSubs=[];panelsSubject=new S.BehaviorSubject(this.panels);constructor(e,t,r,o,s,c,l,u,d,f,p,m,h,g,b){super(r,o,s,c,l),this.recordFetchGQL=e,this.recordSaveGQL=t,this.appStateStore=r,this.languageStore=o,this.navigationStore=s,this.moduleNavigation=c,this.metadataStore=l,this.localStorage=u,this.message=d,this.subpanelFactory=f,this.recordManager=p,this.statisticsBatch=m,this.recordStoreFactory=h,this.preferences=g,this.panelLogicManager=b,this.panels$=this.panelsSubject.asObservable(),this.recordStore=h.create(this.getViewFieldsObservable()),this.record$=this.recordStore.state$.pipe((0,v.distinctUntilChanged)()),this.stagingRecord$=this.recordStore.staging$.pipe((0,v.distinctUntilChanged)()),this.loading$=this.state$.pipe((0,v.map)(D=>D.loading)),this.widgets$=this.state$.pipe((0,v.map)(D=>D.widgets)),this.showSidebarWidgets$=this.state$.pipe((0,v.map)(D=>D.showSidebarWidgets)),this.showTopWidget$=this.state$.pipe((0,v.map)(D=>D.showTopWidget)),this.showSubpanels$=this.state$.pipe((0,v.map)(D=>D.showSubpanels)),this.mode$=this.state$.pipe((0,v.map)(D=>D.mode)),this.subpanelReload$=this.subpanelReloadSubject.asObservable();const _=this.record$.pipe((0,S.combineLatestWith)(this.loading$),(0,v.map)(([D,y])=>(this.data={record:D,loading:y},this.data)));this.vm$=_.pipe((0,S.combineLatestWith)(this.appData$,this.metadata$),(0,v.map)(([D,y,w])=>(this.vm={data:D,appData:y,metadata:w},this.vm))),this.subpanelsState=new S.BehaviorSubject({}),this.subpanels$=this.subpanelsState.asObservable(),this.viewContext$=this.record$.pipe((0,v.map)(()=>this.getViewContext())),this.initPanels()}get widgets(){return this.internalState.widgets}set widgets(e){this.updateState({...this.internalState,widgets:e})}get showSidebarWidgets(){return this.internalState.showSidebarWidgets}set showSidebarWidgets(e){this.savePreference(this.getModuleName(),"show-sidebar-widgets",e),this.updateState({...this.internalState,showSidebarWidgets:e})}get showTopWidget(){return this.internalState.showTopWidget}set showTopWidget(e){this.updateState({...this.internalState,showTopWidget:e})}get showSubpanels(){return this.internalState.showTopWidget}set showSubpanels(e){this.updateState({...this.internalState,showSubpanels:e})}get params(){return this.internalState.params||{}}set params(e){this.updateState({...this.internalState,params:e})}getModuleName(){return this.internalState.module}getRecordId(){return this.internalState.recordID}getViewContext(){return{module:this.getModuleName(),id:this.getRecordId(),record:this.getBaseRecord()}}getSubpanels(){return this.subpanels}destroy(){this.clear()}init(e,t,r="detail",o={}){return this.internalState.module=e,this.internalState.recordID=t,this.setMode(r),this.initSubpanels(e,t),this.calculateShowWidgets(),this.load().pipe((0,v.tap)(()=>{this.showTopWidget=!0,this.loadSubpanelStatistics(e),this.parseParams(o)}))}clear(){this.cache$=null,this.clearSubpanels(),this.subpanelsState.unsubscribe(),this.updateState((0,M.deepClone)(SM)),this.subs=this.safeUnsubscription(this.subs),this.fieldSubs=this.safeUnsubscription(this.fieldSubs)}getBaseRecord(){return this.internalState?this.recordStore.getBaseRecord():null}getMode(){return this.internalState?this.internalState.mode:null}setMode(e){this.updateState({...this.internalState,mode:e})}save(){return this.appStateStore.updateLoading(`${this.internalState.module}-record-save`,!0),this.updateState({...this.internalState,loading:!0}),this.recordStore.save().pipe((0,v.catchError)(()=>(this.message.addDangerMessageByKey("LBL_ERROR_SAVING"),(0,S.of)({}))),(0,v.finalize)(()=>{this.setMode("detail"),this.appStateStore.updateLoading(`${this.internalState.module}-record-save`,!1),this.updateState({...this.internalState,loading:!1})}))}load(e=!0){return this.updateState({...this.internalState,loading:!0}),this.recordStore.retrieveRecord(this.internalState.module,this.internalState.recordID,e).pipe((0,v.tap)(t=>{this.updateState({...this.internalState,recordID:t.id,module:t.module,loading:!1})}))}getSummaryTemplate(){return(((this.metadata||{}).recordView||{}).summaryTemplates||{})[this.getMode()]||""}initValidators(e){!e||!Object.keys(e?.fields).length||Object.keys(e.fields).forEach(t=>{const r=e.fields[t];if(!r?.formControl)return;this.resetValidators(r);const s=r?.validators??[],c=r?.asyncValidators??[];r?.formControl&&s.length&&r.formControl.setValidators(s),r?.formControl&&c.length&&r.formControl.setAsyncValidators(c)})}resetValidators(e){e?.formControl&&(e.formControl.clearValidators(),e.formControl.clearAsyncValidators())}resetValidatorsForAllFields(e){!e||!e?.fields?.length||Object.keys(e.fields).forEach(t=>{const r=e.fields[t];r?.formControl&&this.resetValidators(r)})}parseParams(e={}){if(!e)return;const t={...this.internalState.params};Object.keys(e).forEach(r=>{(0,M.isVoid)(t[r])||(t[r]=e[r])}),this.params=e}loadSubpanelStatistics(e){const t=this.subpanelsState.value;if(!t)return;const r={};Object.keys(t).forEach(o=>{const s=t[o],c=s.statistics;if(!c||!Object.keys(c).length)return;if(!1===s.shouldBatchStatistic())return void s.loadAllStatistics().pipe((0,v.take)(1)).subscribe();const l=s.getAllStatisticQuery();Object.keys(l).forEach(u=>{const d=this.buildStatKey(o,u);r[d]=l[u]}),s.setAllStatisticsLoading(!0)}),this.statisticsBatch.fetch(e,r).pipe((0,v.take)(1)).subscribe(o=>{Object.keys(t).forEach(s=>{const c=t[s],l=c.getAllStatisticQuery();Object.keys(l).forEach(u=>{const d=this.buildStatKey(s,u),f=o[d];f&&c.setStatistics(u,f,!0)}),c.setAllStatisticsLoading(!1)})})}buildStatKey(e,t){return(e=e.replace(/_/g,"-"))+"-"+t.replace(/_/g,"-")}updateState(e){this.store.next(this.internalState=e)}initSubpanels(e,t){this.showSubpanels=!0,this.metadataStore.subPanelMetadata$.subscribe(r=>{this.clearSubpanels(),Object.keys(r).forEach(o=>{this.subpanels[o]=this.subpanelFactory.create(),this.subpanels[o].init(e,t,r[o],this.record$)}),this.subpanelsState.next(this.subpanels),Object.keys(this.subpanels).forEach(o=>{this.subpanelReloadSub.push(this.subpanels[o].recordList.records$.pipe((0,v.tap)(()=>{const c={};c[o]=!0,this.subpanelReloadSubject.next(c)})).subscribe())})})}initPanels(){const e=(0,S.combineLatest)([this.metadataStore.recordViewMetadata$,this.stagingRecord$,this.languageStore.vm$]).subscribe(([t,r,o])=>{const s=[],c=r&&r.module||"";return this.safeUnsubscription(this.fieldSubs),t.panels.forEach(l=>{const d={label:l.label?l.label.toUpperCase():this.languageStore.getFieldLabel(l.key.toUpperCase(),c,o),key:l.key,rows:[]},f=t.templateMeta.tabDefs[l.key.toUpperCase()]??null;f&&(d.meta=f),l.rows.forEach(p=>{const m={cols:[]};p.cols.forEach(h=>{m.cols.push({...h})}),d.rows.push(m)}),d.displayState=new S.BehaviorSubject(f?.display??!0),d.display$=d.displayState.asObservable(),s.push(d),!(0,ie.isEmpty)(r?.fields)&&!(0,ie.isEmpty)(f?.displayLogic)&&Object.values(f.displayLogic).forEach(p=>{(0,ie.isEmpty)(p?.params?.fieldDependencies)||p.params.fieldDependencies.forEach(m=>{const h=r.fields[m]||null;(0,ie.isEmpty)(h)||this.fieldSubs.push(h.valueChanges$.subscribe(()=>{this.panelLogicManager.runLogic(p.key,h,d,r,this.getMode())}))})})}),this.panelsSubject.next(this.panels=s),s});this.subs.push(e)}clearSubpanels(){this.subpanels&&Object.keys(this.subpanels).forEach(e=>{this.subpanels[e].clear()}),this.subpanelReloadSub.length&&(this.subpanelReloadSub.forEach(e=>e.unsubscribe()),this.subpanelReloadSub=[]),this.subpanels={}}calculateShowWidgets(){let e=!1;const r=this.getRecordViewMetadata().sidebarWidgets||[];r&&r.length>0&&(e=!0);const o=this.loadPreference(this.getModuleName(),"show-sidebar-widgets")??null;this.showSidebarWidgets=null!==o?o:e,this.widgets=e}getRecordViewMetadata(){return(this.metadataStore.get()||{}).recordView||{}}getVardefs(){return this.getRecordViewMetadata().vardefs||{}}getViewFieldsObservable(){return this.metadataStore.recordViewMetadata$.pipe((0,v.map)(e=>{const t={};return e.panels.forEach(r=>{r.rows.forEach(o=>{o.cols.forEach(s=>{t[s.name??s.fieldDefinition.name??""]=s})})}),Object.keys(e.vardefs).forEach(r=>{const o=e.vardefs[r]??null;!o||(0,ie.isEmpty)(o)||t[r]||"relate"!=o.type&&(t[r]={name:r,vardefBased:!0,label:o.vname??"",type:o.type??"",display:o.display??"",fieldDefinition:o,metadata:o.metadata??{},logic:o.logic??{}})}),Object.values(t)}))}getPreferenceKey(e){return"recordview-"+e}savePreference(e,t,r){this.preferences.setUi(e,this.getPreferenceKey(t),r)}loadPreference(e,t){return this.preferences.getUi(e,this.getPreferenceKey(t))}safeUnsubscription(e){return e.forEach(t=>{t.closed||t.unsubscribe()}),[]}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Qr),n.\u0275\u0275inject(Xr),n.\u0275\u0275inject(Xt),n.\u0275\u0275inject($e),n.\u0275\u0275inject(Li),n.\u0275\u0275inject(Rn),n.\u0275\u0275inject(bt),n.\u0275\u0275inject(wr),n.\u0275\u0275inject(dt),n.\u0275\u0275inject(Zd),n.\u0275\u0275inject(_i),n.\u0275\u0275inject(qd),n.\u0275\u0275inject(Yr),n.\u0275\u0275inject(qt),n.\u0275\u0275inject(il))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})();function x6(i,a){1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"div",3)(2,"div",4),n.\u0275\u0275element(3,"div",5),n.\u0275\u0275elementStart(4,"div",6)(5,"div",7)(6,"div"),n.\u0275\u0275text(7,"Record Status Bar Component"),n.\u0275\u0275elementEnd()()()()(),n.\u0275\u0275elementContainerEnd())}function F6(i,a){1&i&&(n.\u0275\u0275elementStart(0,"div",8)(1,"div",9)(2,"div"),n.\u0275\u0275text(3,"Record Status Bar Component"),n.\u0275\u0275elementEnd()()())}let Jd=(()=>{class i{recordViewStore;moduleNavigation;displayResponsiveTable=!1;constructor(e,t){this.recordViewStore=e,this.moduleNavigation=t}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(yi),n.\u0275\u0275directiveInject(Rn))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-status-bar"]],decls:4,vars:2,consts:[[1,"record-view-header"],[4,"ngIf"],[3,"ngIf"],[1,"d-flex","flex-nowrap"],[1,"row"],[1,"w-100"],[1,"col"],[1,"order-2"],[1,"row","mr-0"],[1,"col-md-4"]],template:function(t,r){1&t&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"div",0),n.\u0275\u0275template(2,x6,8,0,"ng-container",1),n.\u0275\u0275template(3,F6,4,0,"ng-template",2),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()),2&t&&(n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",r.displayResponsiveTable),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!r.displayResponsiveTable))},dependencies:[F.NgIf],encapsulation:2})}return i})();const DM=new RegExp("^(\\d{4})-(0[1-9]|1[0-2])$"),wM=new RegExp("^(\\d{4})$");let I6=(()=>{class i{systemConfig;metadataStore;dataTypeFormatter;allowedProperties=["operator","target","values","start","end"];convertableProperties=["target","values","start","end"];constructor(e,t,r){this.systemConfig=e,this.metadataStore=t,this.dataTypeFormatter=r}buildUrlQueryBasedFilter(e,t,r){const o=this.metadataStore.get().recordView.vardefs,s=Object.entries(r).reduce((l,[u,d])=>{const[f,p]=this.cleanQueryParam([u,d]);return l[f]=p,l},{}),c=this.getQueryFilterCriteria(o,e,s);return(0,ie.isEmpty)(c.filters)?null:{key:"default",searchModule:e,module:"saved-search",criteria:c}}getQueryFilterCriteria(e,t,r){const o={name:"default",filters:{}},s=Object.keys(r),c=Object.values(e).filter(({name:f})=>s.some(p=>p.includes(f))),l=this.systemConfig.getConfigValue("listview_url_query_filter_mapping"),u=Object.entries(l);let d;u.push(["",{}]),d="basic_search"===r.searchFormTab?"basic":"advanced";for(const f of c){const p=f.name,m=[p,`${p}_${d}`];for(const[h,g]of u){if(!(0,ie.isEmpty)(o.filters[p]))break;for(const b of m){if(!(0,ie.isEmpty)(o.filters[p]))break;const _=this.buildSearchCriteriaFieldFilter(p,f.type,r,b,h,g);if(!(0,ie.isEmpty)(_)){try{this.convertableProperties.forEach(D=>{if(!_[D])return;let y;y=(0,ie.isArray)(_[D])?_[D].map(w=>this.toInternalFormat(f.type,w)):this.toInternalFormat(f.type,_[D]),_[D]=y})}catch{continue}o.filters[p]=_}}}}return o}buildSearchCriteriaFieldFilter(e,t,r,o,s,c){const l={field:e,fieldType:t,operator:"=",values:[]};if((0,ie.isEmpty)(s)||(0,ie.isEmpty)(c)){const p=this.getQueryParamValue(o,o,r);if((0,ie.isEmpty)(p)&&!(0,M.isEmptyString)(p))return null;const m=(0,ie.isArray)(p)?p:[p];return l.values=m,l.target=m[0],this.checkDateSpecialsOrReturn(l,l.target)}const u=this.getQueryParamValue(s,o,r,{forceSingleString:!0}),d=c[u]??Object.values(c).reduce((p,m)=>({...p,...m}),{})??{};if((0,ie.isEmpty)(d))return null;let f=!0;return l.operator=u,Object.entries(d).filter(([p,m])=>"string"==typeof m&&this.allowedProperties.includes(m)).forEach(([p,m])=>{const h=this.getQueryParamValue(p,o,r);if((0,ie.isEmpty)(h))return;f=!1;let g=h;"values"===m?((0,ie.isArray)(g)||(g=[g]),l.target=g[0]):"target"===m&&((0,ie.isArray)(g)&&(g=g[0]),l.values=[g]),l[m]=g,(0,ie.isArray)(g)||this.checkDateSpecialsOrReturn(l,g,{operator:u,key:m})}),f?null:this.checkForMissingOperator(l)}getQueryParamValue(e,t,r,{forceSingleString:o=!1}={}){let c=r[e.replace("{field}",t)??""];return c?(c=(0,ie.isArray)(c)?c.map(this.transform):this.transform(c),o&&(0,ie.isArray)(c)?c[0]??"":c):null}cleanQueryParam(e){let[t,r]=e;return 0===t.split("").reverse().join("").indexOf("][")&&"string"==typeof r&&(t=t.replace("[]",""),r=r.split(",")),[t,r]}checkDateSpecialsOrReturn(e,t,{operator:r="=",key:o="target"}={}){return t.match(DM)?this.overridesSearchCriteriaFieldFilter(e,t,{type:"month",operator:r,key:o}):t.match(wM)?this.overridesSearchCriteriaFieldFilter(e,t,{type:"year",operator:r,key:o}):e}overridesSearchCriteriaFieldFilter(e,t,{type:r="",operator:o="equal",key:s="target"}){let c,l;switch(r){case"year":c={year:1},l="yyyy";break;case"month":c={month:1},l="yyyy-MM";break;default:return e}const u=je.DateTime.fromFormat(t,l),d=u.plus(c).minus({day:1});if("target"!==s){switch(s){case"start":e.start=u.toFormat("yyyy-MM-dd");break;case"end":e.end=d.toFormat("yyyy-MM-dd")}return e}switch(e.operator=o,o){case"greater_than":case"greater_than_equals":e.start=u.toFormat("yyyy-MM-dd"),e.target=e.start,e.values=[e.target];break;case"less_than":case"less_than_equals":e.end=d.toFormat("yyyy-MM-dd"),e.target=e.end,e.values=[e.target];break;case"not_equal":e.start=u.toFormat("yyyy-MM-dd"),e.end=d.toFormat("yyyy-MM-dd"),e.target=t,e.values=[t];break;default:e.operator="between",e.start=u.toFormat("yyyy-MM-dd"),e.end=d.toFormat("yyyy-MM-dd"),e.target="",e.values=[]}return e}toInternalFormat(e,t){return t.match(wM)||t.match(DM)?t:this.dataTypeFormatter.toInternalFormat(e,t)}transform(e){return""===e?"__SuiteCRMEmptyString__":e}checkForMissingOperator(e){return!(0,ie.isEmpty)(e.start)&&!(0,ie.isEmpty)(e.end)&&(e.operator="between"),e}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(vt),n.\u0275\u0275inject(bt),n.\u0275\u0275inject(ut))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const Qd={key:"default",module:"saved-search",attributes:{contents:""},criteria:{name:"default",filters:{}}},EM={default:(0,M.deepClone)(Qd)},xM={module:"",widgets:!0,actionPanel:"",showSidebarWidgets:!1,recordPanelConfig:{},activeFilters:(0,M.deepClone)(EM),openFilter:(0,M.deepClone)(Qd)};let ni=(()=>{class i extends Kd{appStateStore;languageStore;navigationStore;moduleNavigation;metadataStore;localStorage;message;listStoreFactory;modalService;filterListStoreFactory;confirmation;preferences;route;listViewUrlQueryService;moduleName$;columns;columns$;lineActions$;tableActions$;records$;criteria$;context$;sort$;pagination$;selection$;selectedCount$;selectedStatus$;loading$;widgets$;showSidebarWidgets$;displayFilters$;actionPanel$;recordList;dataUpdate$;dataSetUpdate$;activeFilters$;openFilter$;filterList;vm$;vm;data;cache$=null;internalState=(0,M.deepClone)(xM);store=new S.BehaviorSubject(this.internalState);state$=this.store.asObservable();dataUpdateState;subs=[];constructor(e,t,r,o,s,c,l,u,d,f,p,m,h,g){super(e,t,r,o,s),this.appStateStore=e,this.languageStore=t,this.navigationStore=r,this.moduleNavigation=o,this.metadataStore=s,this.localStorage=c,this.message=l,this.listStoreFactory=u,this.modalService=d,this.filterListStoreFactory=f,this.confirmation=p,this.preferences=m,this.route=h,this.listViewUrlQueryService=g,this.recordList=this.listStoreFactory.create(),this.columns$=s.listViewColumns$,this.lineActions$=s.listViewLineActions$,this.tableActions$=s.listViewTableActions$,this.records$=this.recordList.records$,this.criteria$=this.recordList.criteria$,this.context$=this.recordList.criteria$.pipe((0,v.map)(()=>this.getViewContext())),this.sort$=this.recordList.sort$,this.pagination$=this.recordList.pagination$,this.selection$=this.recordList.selection$,this.selectedCount$=this.recordList.selectedCount$,this.selectedStatus$=this.recordList.selectedStatus$,this.loading$=this.recordList.loading$,this.moduleName$=this.state$.pipe((0,v.map)(_=>_.module),(0,v.distinctUntilChanged)()),this.widgets$=this.state$.pipe((0,v.map)(_=>_.widgets),(0,v.distinctUntilChanged)()),this.showSidebarWidgets$=this.state$.pipe((0,v.map)(_=>_.showSidebarWidgets)),this.displayFilters$=this.state$.pipe((0,v.map)(_=>"filters"===_.actionPanel),(0,v.distinctUntilChanged)()),this.actionPanel$=this.state$.pipe((0,v.map)(_=>_.actionPanel),(0,v.distinctUntilChanged)()),this.activeFilters$=this.state$.pipe((0,v.map)(_=>_.activeFilters),(0,v.distinctUntilChanged)()),this.openFilter$=this.state$.pipe((0,v.map)(_=>_.openFilter),(0,v.distinctUntilChanged)());const b=this.records$.pipe((0,S.combineLatestWith)(this.criteria$,this.pagination$,this.selection$,this.loading$),(0,v.map)(([_,D,y,w,E])=>(this.data={records:_,criteria:D,pagination:y,selection:w,loading:E},this.data)));this.vm$=b.pipe((0,S.combineLatestWith)(this.appData$,this.metadata$),(0,v.map)(([_,D,y])=>(this.vm={data:_,appData:D,metadata:y},this.vm))),this.columns=new S.BehaviorSubject([]),this.columns$=this.columns.asObservable(),this.initDataUpdateState(),this.initDataSetUpdatedState(),this.filterList=this.filterListStoreFactory.create()}get actionPanel(){return this.internalState.actionPanel}get showFilters(){return"filters"===this.internalState.actionPanel}set showFilters(e){this.updateState({...this.internalState,actionPanel:e?"filters":""})}get widgets(){return this.internalState.widgets}set widgets(e){this.updateState({...this.internalState,widgets:e})}get showSidebarWidgets(){return this.internalState.showSidebarWidgets}set showSidebarWidgets(e){this.savePreference(this.getModuleName(),"show-sidebar-widgets",e),this.updateState({...this.internalState,showSidebarWidgets:e})}get recordPanelConfig(){return this.internalState.recordPanelConfig}isRecordPanelOpen(){return"recordPanel"===this.internalState.actionPanel}openRecordPanel(e){this.updateState({...this.internalState,actionPanel:"recordPanel",recordPanelConfig:e})}closeRecordPanel(){this.updateState({...this.internalState,actionPanel:"",recordPanelConfig:{}})}getModuleName(){return this.internalState.module}getViewContext(){const e={module:this.getModuleName()};return e.criteria=this.recordList.criteria,e.sort=this.recordList.sort,e}destroy(){this.clear(),this.subs.forEach(e=>e.unsubscribe())}get activeFilters(){return(0,M.deepClone)(this.internalState.activeFilters)}clear(){this.cache$=null,this.updateState((0,M.deepClone)(xM)),this.recordList.clear()}clearAuthBased(){this.clear(),this.recordList.clearAuthBased()}init(e){this.internalState.module=e,this.recordList.init(e,!1),this.filterList.init(e),this.filterList.load(!1).pipe((0,v.take)(1)).subscribe(),this.calculateShowWidgets(),this.recordList.sort={orderBy:this?.metadata?.listView?.orderBy??"",sortOrder:this?.metadata?.listView?.sortOrder??"NONE"};const t=this.route?.snapshot?.queryParams??{};let r="";return"query"===((0,M.isTrue)(t.query)&&(r="query"),r)?this.loadQueryFilter(e,t):(this.loadCurrentFilter(e),this.loadCurrentSort(e)),this.loadCurrentDisplayedColumns(),this.load()}setOpenFilter(e){this.updateState({...this.internalState,openFilter:(0,M.deepClone)(e)})}toggleQuickFilter(e,t=!0){let r=this.getActiveQuickFilters();if(Object.keys(r).some(s=>s===e.key)){let{[e.key]:s,...c}=r;r=c}else r={},r[e.key]=e;(0,M.emptyObject)(r)?this.resetFilters(t):1!==Object.keys(r).length?(this.updateState({...this.internalState,activeFilters:(0,M.deepClone)(r)}),this.updateSearchCriteria(t)):this.setFilters(r)}setFilters(e,t=!0,r=null){const s=e[Object.keys(e).shift()];if(this.updateState({...this.internalState,activeFilters:(0,M.deepClone)(e),openFilter:(0,M.deepClone)(s)}),s.criteria){let c=s.criteria.orderBy??"",u=this.recordList.mapSortOrder(s.criteria.sortOrder??"");null!==r&&(c=r.orderBy,u=r.sortOrder),this.recordList.updateSorting(c,u,!1),this.updateSortLocalStorage()}this.updateSearchCriteria(t)}addSavedFilter(e){const t={...this.internalState},r=this.activeFilters;e.key&&r[e.key]&&(r[e.key]=e,t.activeFilters=r),t.openFilter=e,this.filterList.addFilter(e),this.updateState(t)}removeSavedFilter(e){if(!e||!e.key)return;this.filterList.removeFilter(e);const t={...this.internalState};t.openFilter&&t.openFilter.key===e.key&&this.resetFilters(!0)}resetFilters(e=!0){this.updateState({...this.internalState,activeFilters:(0,M.deepClone)(EM),openFilter:(0,M.deepClone)(Qd)}),this.recordList.clearSort(),this.updateSortLocalStorage(),this.updateSearchCriteria(e)}updateSearchCriteria(e=!0){const t={...this.internalState.activeFilters};let r=this.mergeCriteria(t);this.recordList.updateSearchCriteria(r,e),this.updateFilterLocalStorage()}updateFilterLocalStorage(){this.savePreference(this.internalState.module,"current-filters",this.internalState.activeFilters)}updateSortLocalStorage(){this.savePreference(this.internalState.module,"current-sort",this.recordList.sort)}updateDisplayedColumnsPreference(e){this.savePreference(this.internalState.module,"displayed-columns",e)}getDisplayedColumnsPreference(){const t=this.loadPreference(this.internalState.module,"displayed-columns");return(0,ie.isArray)(t)&&t&&t.length?t:null}triggerDataUpdate(){this.dataUpdateState.next(!0)}load(e=!0){const t=this.internalState.module;return this.savePreference(t,"current-filters",this.internalState.activeFilters),this.savePreference(t,"current-sort",this.recordList.sort),this.recordList.load(e)}updateState(e){this.store.next(this.internalState=e)}getActiveQuickFilters(){let{default:e,...t}=this.activeFilters,r={};return Object.keys(t).forEach(o=>{const s=t[o]??null;o&&s?.attributes?.quick_filter&&(r[o]=s)}),r}mergeCriteria(e){let t={};return(Object.keys(e??{})??[]).forEach(o=>{const c=(e[o]??null)?.criteria??null,l=Object.keys(c?.filters??{});if(null!==c&&(!l||l.length)){if((0,M.emptyObject)(t))return void(t=(0,M.deepClone)(c));l.forEach(u=>{const d=c?.filters[u]??null,f=t?.filters[u]??null;if(!d)return;const p=f?.operator??null;if(!f||!p)return void(t.filters[u]=(0,M.deepClone)(d));const m=d?.operator??null;m===p&&"="===m?f.values=(0,ie.union)(f.values??[],d.values??[]):delete t.filters[u]})}}),t}openColumnChooserDialog(){const e=this.modalService.open(L0,{ariaLabelledBy:"modal-basic-title",centered:!0,size:"lg",windowClass:"column-chooser-modal"}),t=this.columns.getValue().filter(function(o){return!o.hasOwnProperty("default")||o.hasOwnProperty("default")&&!0===o.default}),r=this.columns.getValue().filter(function(o){return o.hasOwnProperty("default")&&!1===o.default});e.componentInstance.displayed=t,e.componentInstance.hidden=r,e.result.then(o=>{if(!o.displayed||!o.hidden)return;let s=[];const c=o.displayed,l=o.hidden;c.forEach(function(d){d.default=!0}),l.forEach(function(d){d.default=!1}),s.push(...c,...l),this.columns.next(s);const u=c.map(d=>d.name);this.updateDisplayedColumnsPreference(u)})}calculateShowWidgets(){let e=!1;const o=((this.metadataStore.get()||{}).listView||{}).sidebarWidgets||[];o&&o.length>0&&(e=!0);const s=this.loadPreference(this.getModuleName(),"show-sidebar-widgets")??null;this.showSidebarWidgets=null!==s?s:e,this.widgets=e}getPreferenceKey(e){return"listview-"+e}savePreference(e,t,r){this.preferences.setUi(e,this.getPreferenceKey(t),r)}loadPreference(e,t){return this.preferences.getUi(e,this.getPreferenceKey(t))}loadCurrentFilter(e){const t=this.loadPreference(e,"current-filters")??{};if(!t||(0,M.emptyObject)(t))return;let r=this.loadPreference(e,"current-sort");!r&&(0,M.emptyObject)(r)&&(r=null),this.setFilters(t,!1,r)}loadQueryFilter(e,t){const r=t.orderBy??"",s=this.recordList.mapSortOrder(t.sortOrder??""),c=this.listViewUrlQueryService.buildUrlQueryBasedFilter(e,this.internalState.activeFilters.default,t);(0,ie.isEmpty)(c)||(this.updateState({...this.internalState,activeFilters:(0,M.deepClone)({default:c}),openFilter:(0,M.deepClone)(c)}),this.recordList.updateSorting(r,s,!1),this.recordList.updateSearchCriteria(c.criteria,!1))}loadCurrentSort(e){const t=this.loadPreference(e,"current-sort");!t||(0,M.emptyObject)(t)||(this.recordList.sort=t)}loadCurrentDisplayedColumns(){this.metadataStore.listViewColumns$.pipe((0,v.take)(1)).subscribe(e=>{const t=this.getDisplayedColumnsPreference();if(!t||!e)return void this.columns.next(e);const r={};t.forEach(l=>{r[l]=!0});const o={},s=[];e.forEach(l=>{l.default=r[l.name]??!1,l.default?o[l.name]=l:s.push(l)});const c=t.filter(l=>!!o[l]).map(l=>o[l]);this.columns.next([...c,...s])})}initDataUpdateState(){this.dataUpdateState=new S.BehaviorSubject(!0),this.dataUpdate$=this.dataUpdateState.asObservable()}initDataSetUpdatedState(){this.dataSetUpdate$=this.criteria$.pipe((0,S.combineLatestWith)(this.dataUpdate$),(0,v.map)(()=>!0))}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Xt),n.\u0275\u0275inject($e),n.\u0275\u0275inject(Li),n.\u0275\u0275inject(Rn),n.\u0275\u0275inject(bt),n.\u0275\u0275inject(wr),n.\u0275\u0275inject(dt),n.\u0275\u0275inject(Gi),n.\u0275\u0275inject(pe.NgbModal),n.\u0275\u0275inject(rl),n.\u0275\u0275inject(Nn),n.\u0275\u0275inject(qt),n.\u0275\u0275inject(Rt.ActivatedRoute),n.\u0275\u0275inject(I6))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})();function A6(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",1),n.\u0275\u0275element(1,"scrm-button-group",2),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("config$",e.config$)}}let T6=(()=>{class i{listStore;actionHandler;screenSize;systemConfigs;asyncActionService;configState=new S.BehaviorSubject({buttons:[]});config$=this.configState.asObservable();vm$=this.screenSize.screenSize$.pipe((0,v.map)(e=>(e&&(this.screen=e),this.configState.next(this.getButtonGroupConfig()),{screenSize:e})));screen=qn.Medium;defaultBreakpoint=3;breakpoint;constructor(e,t,r,o,s){this.listStore=e,this.actionHandler=t,this.screenSize=r,this.systemConfigs=o,this.asyncActionService=s}ngOnInit(){this.configState.next(this.getButtonGroupConfig())}getButtonGroupConfig(){const e=this.actions,t={buttonKlass:["action-button"],dropdownLabel:this.listStore.appStrings.LBL_MORE||"",buttons:[],dropdownOptions:{placement:["bottom-right"]},breakpoint:this.getBreakpoint()};return e.forEach(r=>{const o=this.getButtonConfig(r);o&&o.klass&&t.buttons.push(o)}),t}getBreakpoint(){const e=this.systemConfigs&&this.systemConfigs.getConfigValue("listview_actions_limits");return this.screen&&e&&e[this.screen]?(this.breakpoint=e[this.screen],this.breakpoint):this.breakpoint?this.breakpoint:this.defaultBreakpoint}get actions(){return this.listStore.vm.appData.module&&this.listStore.vm.appData.module.menu?this.listStore.vm.appData.module.menu.filter(e=>!("List"===e.name||"View"===e.name)):[]}getButtonConfig(e){if(!this.listStore.vm.appData.appState.module)return{};if(!this.listStore.vm.appData.language)return{};const t=this.listStore.vm.appData.appState.module;let o="";return e.actionLabelKey&&(o=e.actionLabelKey),{klass:"action-button",label:this.actionHandler.getActionLabel(t,e,this.listStore.vm.appData.language,o),onClick:()=>{e?.process?this.handleProcess(t,e?.process):this.actionHandler.navigate(e).then()}}}handleProcess(e,t){t&&this.asyncActionService.run(t,{action:t,module:e}).pipe((0,v.take)(1)).subscribe()}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(ni),n.\u0275\u0275directiveInject(Rn),n.\u0275\u0275directiveInject(hi),n.\u0275\u0275directiveInject(vt),n.\u0275\u0275directiveInject(Yt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-action-menu"]],decls:2,vars:3,consts:[["class","list-view-actions float-right",4,"ngIf"],[1,"list-view-actions","float-right"],[3,"config$"]],template:function(t,r){1&t&&(n.\u0275\u0275template(0,A6,2,1,"div",0),n.\u0275\u0275pipe(1,"async")),2&t&&n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(1,1,r.vm$))},dependencies:[F.NgIf,mo,F.AsyncPipe],encapsulation:2})}return i})(),Xd=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,yo,cn,Ke.AngularSvgIconModule,Fr]})}return i})(),ms=(()=>{class i{systemConfigStore;screenSize;store;quickFiltersConfigState=new S.BehaviorSubject({buttons:[]});enabledState=new S.BehaviorSubject(!1);screen=qn.Medium;defaultBreakpoint=5;breakpoint;breakdownSizes=[];subs=[];config$=this.quickFiltersConfigState.asObservable();enabled$=this.enabledState.asObservable();enabled=!1;breakdown$;constructor(e,t,r){this.systemConfigStore=e,this.screenSize=t,this.store=r,this.breakdownSizes=this.systemConfigStore.getUi("quick_filters_breakdown_screen_sizes");const o=this.systemConfigStore.getUi("displayed_quick_filters"),s=this.systemConfigStore.getUi("quick_filters_breakdown_threshold");this.breakdown$=this.screenSize.screenSize$.pipe((0,v.map)(c=>(o[c]??2)>(s[c]??2)||(0,M.isTrue)(this.breakdownSizes[c]??!1))),this.subs.push(this.screenSize.screenSize$.subscribe(c=>{c&&(this.screen=c),this.init()}))}init(){let e=this.store.filterList.getFilters()??[];if(e=e.filter(s=>s?.attributes?.quick_filter??!1),this.enabled=this.areConfigEnabled(),!e||e.length<1)return this.enabled=!1,void this.enabledState.next(!1);this.enabledState.next(this.enabled);const t={buttonKlass:["settings-button btn btn-outline-main"],dropdownLabel:this.store.appStrings.LBL_QUICK_FILTERS||"",breakpoint:this.getBreakpoint(),showAfterBreakpoint:!1,dropdownOptions:{placement:["bottom-right"],wrapperKlass:["dropdown-button-secondary","filter-action-group"]},buttons:[]},r=this.store.activeFilters;let o=!1;e.forEach(s=>{if(!s?.attributes?.quick_filter)return;const l=Object.keys(r).some(d=>d===s.key);o=o||l;const u={label:s.attributes.name,title:s.attributes.name,onClick:()=>{this.store.toggleQuickFilter(s)}};l&&(u.klass=["active"]),t.buttons.push(u)}),o&&(t.dropdownOptions.klass=["active"],t.dropdownOptions.icon="filter"),this.quickFiltersConfigState.next(t)}destroy(){this.subs.forEach(e=>e.unsubscribe()),this.subs=[],this.quickFiltersConfigState.unsubscribe()}getBreakpoint(){const e=this.systemConfigStore.getUi("displayed_quick_filters");return this.screen&&e&&e[this.screen]?(this.breakpoint=e[this.screen],this.breakpoint):this.breakpoint?this.breakpoint:this.defaultBreakpoint}areConfigEnabled(){const e=this.systemConfigStore.getUi("enable_quick_filters");return!(!this.screen||!e)&&(0,M.isTrue)(e[this.screen]??!1)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(vt),n.\u0275\u0275inject(hi),n.\u0275\u0275inject(ni))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})();function N6(i,a){if(1&i&&n.\u0275\u0275element(0,"scrm-button-group",10),2&i){const e=n.\u0275\u0275nextContext(3);n.\u0275\u0275property("config$",e.quickFilters.config$)("klass","quick-filter-button")}}function L6(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",5)(1,"div",6),n.\u0275\u0275element(2,"scrm-label",7),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(3,"div",8),n.\u0275\u0275template(4,N6,1,2,"scrm-button-group",9),n.\u0275\u0275elementEnd()()),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(4),n.\u0275\u0275property("ngIf",e.quickFilters.config$)}}function O6(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,L6,5,1,"div",4),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.showQuickFilters&&e.enableQuickFilters)}}function B6(i,a){if(1&i&&n.\u0275\u0275element(0,"scrm-button-group",11),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275property("config$",e.config$)}}let FM=(()=>{class i{listStore;modalService;screenSize;systemConfigStore;quickFilters;configState=new S.BehaviorSubject({buttons:[]});config$=this.configState.asObservable();showQuickFilters=!0;enableQuickFilters=!1;screen=qn.Medium;defaultBreakpoint=5;breakpoint;subs=[];constructor(e,t,r,o,s){this.listStore=e,this.modalService=t,this.screenSize=r,this.systemConfigStore=o,this.quickFilters=s}ngOnInit(){this.configState.next(this.getButtonGroupConfig());const e=this.listStore.widgets$.pipe((0,S.combineLatestWith)(this.listStore.displayFilters$,this.listStore.criteria$,this.screenSize.screenSize$,this.listStore.showSidebarWidgets$,this.listStore.filterList.records$));this.subs.push(e.subscribe(([t,r,o,s,c,l])=>{s&&(this.screen=s),this.configState.next(this.getButtonGroupConfig()),this.quickFilters.init()})),this.subs.push(this.quickFilters.breakdown$.subscribe(t=>{this.showQuickFilters=!(0,M.isTrue)(t)})),this.subs.push(this.quickFilters.enabled$.subscribe(t=>{this.enableQuickFilters=(0,M.isTrue)(t??!1)}))}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}getButtonGroupConfig(){const e=[{show:()=>this.checkFiltersDisplay(),button:this.getMyFiltersButton()},{show:()=>!0,button:this.getFilterButton()},{show:()=>this.listStore.widgets,button:this.getInsightsButton()}],t={buttonKlass:["settings-button"],dropdownLabel:this.listStore.appStrings.LBL_OPTIONS||"",breakpoint:this.getBreakpoint(),dropdownOptions:{placement:["bottom-right"],wrapperKlass:["dropdown-button-secondary"]},buttons:[]};return e.forEach(r=>{r.show?r.show()&&t.buttons.push(r.button):t.buttons.push(r.button)}),t}checkFiltersDisplay(){const e=this.listStore.filterList.getFilters()??[],t=this.quickFilters.getBreakpoint(),r=e.length,o=e.filter(s=>s.attributes.quick_filter).length;return r>0&&(o>t||r-o>0)}getFilters(){return this?.listStore?.recordList?.criteria?.filters??{}}getCurrentCriteria(){return this?.listStore?.recordList?.criteria??{}}hasActiveFilter(){const e=this.listStore.activeFilters;if(!e)return!1;const t=Object.keys(e)??[];if(!t||!t.length)return!1;if(t.length>1)return!0;const r=e[t[0]];return r.key&&""!==r.key&&"default"!==r.key}areAllCurrentCriteriaFilterEmpty(){return Object.keys(this.getFilters()??{}).every(e=>""===this.getFilters()[e].operator)}isAnyFilterApplied(){return this.hasActiveFilter()||!this.areAllCurrentCriteriaFilterEmpty()}getBreakpoint(){const e=this.systemConfigStore.getConfigValue("listview_settings_limits");return this.screen&&e&&e[this.screen]?(this.breakpoint=e[this.screen],this.breakpoint):this.breakpoint?this.breakpoint:this.defaultBreakpoint}getFilterButton(){const e={type:"grouped",items:[]},t={label:this.listStore.appStrings.LBL_FILTER||"",klass:{"filter-settings-button":!0,"btn btn-sm settings-button":!0,active:this.isAnyFilterApplied()},onClick:()=>{this.listStore.showFilters=!this.listStore.showFilters}};return this.isAnyFilterApplied()&&(t.icon="filter"),e.items.push(t),this.isAnyFilterApplied()&&e.items.push(this.getClearButton()),e}getMyFiltersButton(){const e=this.listStore.filterList.getFilters(),t={label:this.listStore.appStrings.LBL_SAVED_FILTER_SHORTCUT||"",klass:["dropdown-toggle"],wrapperKlass:["filter-action-group"],items:[],sections:{"quick-filters":{labelKey:"LBL_QUICK_FILTERS"},default:{labelKey:"LBL_SAVED_FILTER_SHORTCUT"}}},r=this.listStore.activeFilters;let o=!1,s=0;const c=this.quickFilters.getBreakpoint(),l=this.quickFilters.areConfigEnabled();return e.forEach(u=>{const d=(0,M.isTrue)(u?.attributes?.quick_filter??!1);if(l&&d&&s<c)return void s++;const f=Object.keys(r).some(m=>m===u.key);o=o||f;const p={label:u.attributes.name,section:d?"quick-filters":"default",onClick:()=>{if(this.listStore.showFilters=!1,f)this.listStore.resetFilters();else{this.listStore.setOpenFilter(u);const m={};m[u.key]=u,this.listStore.setFilters(m)}}};f&&(p.icon="filter",p.iconKlass="small",p.klass=["active"]),t.items.push(p)}),o&&(t.klass=["dropdown-toggle","active"]),t}getClearButton(){return{label:"x",titleKey:"LBL_CLEAR_FILTER",klass:{"btn btn-sm settings-button clear-filter-button btn-main-light":!0},onClick:()=>{this.listStore.showFilters=!1,this.listStore.resetFilters()}}}getInsightsButton(){return{label:this.listStore.appStrings.LBL_INSIGHTS||"",klass:{active:this.listStore.showSidebarWidgets},icon:"pie",onClick:()=>{this.listStore.showSidebarWidgets=!this.listStore.showSidebarWidgets}}}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(ni),n.\u0275\u0275directiveInject(pe.NgbModal),n.\u0275\u0275directiveInject(hi),n.\u0275\u0275directiveInject(vt),n.\u0275\u0275directiveInject(ms))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-settings-menu"]],decls:5,vars:4,consts:[[1,"list-view-settings","w-100","d-flex","justify-content-end"],[4,"ngIf"],[1,"text-nowrap"],["klass","d-flex align-items-center",3,"config$",4,"ngIf"],["class","d-flex align-items-baseline",4,"ngIf"],[1,"d-flex","align-items-baseline"],[1,"text-nowrap","text-muted","fs-70","pl-1","mr-2"],["labelKey","LBL_QUICK_FILTERS"],[1,"quick-filter-border","pr-xxl-1","mr-xxl-1"],[3,"config$","klass",4,"ngIf"],[3,"config$","klass"],["klass","d-flex align-items-center",3,"config$"]],template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"div",0),n.\u0275\u0275template(1,O6,2,1,"ng-container",1),n.\u0275\u0275pipe(2,"async"),n.\u0275\u0275elementStart(3,"div",2),n.\u0275\u0275template(4,B6,1,1,"scrm-button-group",3),n.\u0275\u0275elementEnd()()),2&t&&(n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(2,2,r.quickFilters.config$)),n.\u0275\u0275advance(3),n.\u0275\u0275property("ngIf",r.config$))},dependencies:[F.NgIf,mo,zt,F.AsyncPipe],encapsulation:2})}return i})(),Yd=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,O0,Mn,cn,Zr,pe.NgbModule,Fr,Ut]})}return i})(),ef=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,us,Xd,Yd,Ke.AngularSvgIconModule]})}return i})();function R6(i,a){if(1&i&&n.\u0275\u0275element(0,"scrm-bulk-action-menu",6),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275property("selectionSource",e.selection)("actionSource",e.bulkActions)}}function j6(i,a){if(1&i&&n.\u0275\u0275element(0,"scrm-pagination",7),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275property("allowPagination",e.isPaginationEnabled())("state",e.pagination)}}let IM=(()=>{class i{selection;bulkActions;pagination;tableActions;paginationType;isPaginationEnabled(){return"pagination"===this.paginationType}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-table-header"]],inputs:{selection:"selection",bulkActions:"bulkActions",pagination:"pagination",tableActions:"tableActions",paginationType:"paginationType"},decls:6,vars:3,consts:[[1,"list-view-tableactions","table-header"],[1,"row"],[3,"selectionSource","actionSource",4,"ngIf"],["buttonClass","btn table-action-button",3,"config"],[1,"col","mx-0","pl-0","table-pagination-wrapper"],[3,"allowPagination","state",4,"ngIf"],[3,"selectionSource","actionSource"],[3,"allowPagination","state"]],template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"div",0)(1,"div",1),n.\u0275\u0275template(2,R6,1,2,"scrm-bulk-action-menu",2),n.\u0275\u0275element(3,"scrm-action-group-menu",3),n.\u0275\u0275elementStart(4,"div",4),n.\u0275\u0275template(5,j6,1,2,"scrm-pagination",5),n.\u0275\u0275elementEnd()()()),2&t&&(n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",r.selection&&r.bulkActions),n.\u0275\u0275advance(1),n.\u0275\u0275property("config",r.tableActions),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",r.pagination))},dependencies:[F.NgIf,Vd,Tu,xr],encapsulation:2})}return i})();function k6(i,a){1&i&&n.\u0275\u0275element(0,"th",13)}function P6(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"td",14)(1,"label",15)(2,"input",16),n.\u0275\u0275listener("change",function(){const o=n.\u0275\u0275restoreView(e).$implicit,s=n.\u0275\u0275nextContext(3);return n.\u0275\u0275resetView(s.toggleSelection(o.id))}),n.\u0275\u0275elementEnd(),n.\u0275\u0275element(3,"span",17),n.\u0275\u0275elementEnd()()}if(2&i){const e=a.$implicit,t=n.\u0275\u0275nextContext(2).ngIf,r=n.\u0275\u0275nextContext();n.\u0275\u0275advance(2),n.\u0275\u0275property("checked",e.id&&t.selected[e.id]||r.allSelected(t.selectionStatus))("disabled",r.allSelected(t.selectionStatus))}}function $6(i,a){1&i&&(n.\u0275\u0275elementContainerStart(0,12),n.\u0275\u0275template(1,k6,1,0,"th",7),n.\u0275\u0275template(2,P6,4,2,"td",8),n.\u0275\u0275elementContainerEnd())}function U6(i,a){1&i&&n.\u0275\u0275element(0,"th",21)}function V6(i,a){if(1&i&&n.\u0275\u0275element(0,"scrm-record-details-popup-button",24),2&i){const e=n.\u0275\u0275nextContext().$implicit,t=n.\u0275\u0275nextContext(3);n.\u0275\u0275property("record",e)("columns",t.popoverColumns)}}function z6(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"td",22),n.\u0275\u0275template(1,V6,1,2,"scrm-record-details-popup-button",23),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext(3);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.popoverColumns.length)}}function G6(i,a){1&i&&(n.\u0275\u0275elementContainerStart(0,18),n.\u0275\u0275template(1,U6,1,0,"th",19),n.\u0275\u0275template(2,z6,2,1,"td",20),n.\u0275\u0275elementContainerEnd())}function W6(i,a){if(1&i&&n.\u0275\u0275element(0,"scrm-sort-button",31),2&i){const e=n.\u0275\u0275nextContext(2).$implicit,t=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("state",t.getFieldSort(e))}}function K6(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"th",28),n.\u0275\u0275element(1,"scrm-label",29),n.\u0275\u0275template(2,W6,1,1,"scrm-sort-button",30),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext().$implicit,t=n.\u0275\u0275nextContext(2);let r;n.\u0275\u0275classMap(null!==(r="primary-table-header column-"+(null==e?null:e.name))&&void 0!==r?r:""),n.\u0275\u0275advance(1),n.\u0275\u0275property("labelKey",e.label)("module",t.config.module||""),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.config.sort$&&e.sortable)}}function H6(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"td",14),n.\u0275\u0275element(1,"scrm-field",32),n.\u0275\u0275elementEnd()),2&i){const e=a.$implicit,t=n.\u0275\u0275nextContext().$implicit,r=n.\u0275\u0275nextContext(2);let o;n.\u0275\u0275classMap(null!==(o="column-"+(null==t?null:t.name))&&void 0!==o?o:""),n.\u0275\u0275advance(1),n.\u0275\u0275property("mode","list")("type",t.type)("field",r.getField(t,e))("record",e)}}function Z6(i,a){1&i&&(n.\u0275\u0275elementContainerStart(0,25),n.\u0275\u0275template(1,K6,3,5,"th",26),n.\u0275\u0275template(2,H6,2,6,"td",27),n.\u0275\u0275elementContainerEnd()),2&i&&n.\u0275\u0275property("cdkColumnDef",a.$implicit.name)}function q6(i,a){1&i&&n.\u0275\u0275element(0,"th",13)}function J6(i,a){if(1&i&&n.\u0275\u0275element(0,"scrm-line-action-menu",34),2&i){const e=n.\u0275\u0275nextContext().$implicit,t=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("config",t.config.lineActions)("record",e)}}function Q6(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"td",14),n.\u0275\u0275template(1,J6,1,2,"scrm-line-action-menu",33),n.\u0275\u0275elementEnd()),2&i){const e=a.$implicit,t=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e&&t.config.lineActions)}}function X6(i,a){1&i&&n.\u0275\u0275element(0,"tr",35)}function Y6(i,a){1&i&&n.\u0275\u0275element(0,"tr",36)}function e9(i,a){1&i&&(n.\u0275\u0275elementStart(0,"div")(1,"p",37),n.\u0275\u0275element(2,"scrm-label",38),n.\u0275\u0275elementEnd()())}function t9(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div"),n.\u0275\u0275element(1,"scrm-loading-spinner",39),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext().ngIf;n.\u0275\u0275classProp("m-5",!e.records||0===e.records.length),n.\u0275\u0275advance(1),n.\u0275\u0275property("overlay",!0)}}function n9(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"div",1)(2,"table",2),n.\u0275\u0275template(3,$6,3,0,"ng-container",3),n.\u0275\u0275template(4,G6,3,0,"ng-container",4),n.\u0275\u0275template(5,Z6,3,1,"ng-container",5),n.\u0275\u0275elementContainerStart(6,6),n.\u0275\u0275template(7,q6,1,0,"th",7),n.\u0275\u0275template(8,Q6,2,1,"td",8),n.\u0275\u0275elementContainerEnd(),n.\u0275\u0275template(9,X6,1,0,"tr",9),n.\u0275\u0275template(10,Y6,1,0,"tr",10),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(11,e9,3,0,"div",0),n.\u0275\u0275template(12,t9,2,3,"div",11),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()),2&i){const e=a.ngIf,t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(2),n.\u0275\u0275property("dataSource",t.config.dataSource)("trackBy",t.trackRecord),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.selection),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.popoverColumns&&t.popoverColumns.length),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",e.columns),n.\u0275\u0275advance(4),n.\u0275\u0275property("cdkHeaderRowDef",e.displayedColumns),n.\u0275\u0275advance(1),n.\u0275\u0275property("cdkRowDefColumns",e.displayedColumns),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!e.loading&&0===e.records.length),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.loading)}}let AM=(()=>{class i{fieldManager;loadingBufferFactory;config;maxColumns=4;popoverColumns;vm$;loadingBuffer;subs=[];constructor(e,t){this.fieldManager=e,this.loadingBufferFactory=t,this.loadingBuffer=this.loadingBufferFactory.create("table_loading_display_delay")}ngOnInit(){const e=this.config.selection$||(0,S.of)(null).pipe((0,v.shareReplay)(1));let t=this.initLoading();this.vm$=this.config.columns.pipe((0,S.combineLatestWith)(e,this.config.maxColumns$,this.config.dataSource.connect(null),t),(0,v.map)(([r,o,s,c,l])=>{const u=[];this.maxColumns=s;const d=this.buildDisplayColumns(r);return this.popoverColumns=this.buildHiddenColumns(r,d),o&&u.push("checkbox"),this.popoverColumns&&this.popoverColumns.length&&u.push("show-more"),u.push(...d),u.push("line-actions"),{columns:r,selection:o,selected:o&&o.selected||{},selectionStatus:o&&o.status||M.SelectionStatus.NONE,displayedColumns:u,records:c||[],loading:l}}))}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}toggleSelection(e){this.config.toggleRecordSelection(e)}allSelected(e){return e===M.SelectionStatus.ALL}buildDisplayColumns(e){let t=0,r=!1;const o=[],s=e.filter(function(c){return!c.hasOwnProperty("default")||c.hasOwnProperty("default")&&!0===c.default});for(;t<this.maxColumns&&t<s.length;)o.push(s[t].name),r=r||s[t].link,t++;if(!r&&this.maxColumns<s.length)for(t=this.maxColumns;t<s.length;t++)if(s[t].link){o.splice(-1,1),o.push(s[t].name);break}return o}buildHiddenColumns(e,t){const r=e.filter(function(c){return!c.hasOwnProperty("default")||c.hasOwnProperty("default")&&!0===c.default});let o=[];for(let c=0;c<r.length;c++)-1===t.indexOf(r[c].name)&&o.push(r[c].name);return r.filter(c=>o.includes(c.name))}getFieldSort(e){return{getSortDirection:()=>this.config.sort$.pipe((0,v.map)(t=>{let r=M.SortDirection.NONE;return t.orderBy===e.name&&(r=t.sortOrder),r})),changeSortDirection:t=>{this.config.updateSorting(e.name,t)}}}getField(e,t){return e&&t?this.fieldManager.addField(t,e):null}initLoading(){let e=(0,S.of)(!1).pipe((0,v.shareReplay)(1));return this.config.loading$&&(this.subs.push(this.config.loading$.subscribe(t=>{this.loadingBuffer.updateLoading(t)})),e=this.loadingBuffer.loading$),e}trackRecord(e,t){return t?.id??""}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(di),n.\u0275\u0275directiveInject(Fu))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-table-body"]],inputs:{config:"config"},decls:2,vars:3,consts:[[4,"ngIf"],[1,"position-relative","d-flex","flex-column"],["cdk-table","","aria-describedby","table-body",1,"list-view-table","striped-table","table",3,"dataSource","trackBy"],["cdkColumnDef","checkbox",4,"ngIf"],["cdkColumnDef","show-more",4,"ngIf"],[3,"cdkColumnDef",4,"ngFor","ngForOf"],["cdkColumnDef","line-actions"],["cdk-header-cell","","scope","col","class","primary-table-header",4,"cdkHeaderCellDef"],["cdk-cell","",4,"cdkCellDef"],["cdk-header-row","",4,"cdkHeaderRowDef"],["cdk-row","",4,"cdkRowDef","cdkRowDefColumns"],[3,"m-5",4,"ngIf"],["cdkColumnDef","checkbox"],["cdk-header-cell","","scope","col",1,"primary-table-header"],["cdk-cell",""],[1,"checkbox-container"],["type","checkbox","aria-hidden","true",3,"checked","disabled","change"],[1,"checkmark"],["cdkColumnDef","show-more"],["cdk-header-cell","","scope","col","class","primary-table-header show-more-column",4,"cdkHeaderCellDef"],["cdk-cell","","class","show-more-column",4,"cdkCellDef"],["cdk-header-cell","","scope","col",1,"primary-table-header","show-more-column"],["cdk-cell","",1,"show-more-column"],[3,"record","columns",4,"ngIf"],[3,"record","columns"],[3,"cdkColumnDef"],["cdk-header-cell","","scope","col",3,"class",4,"cdkHeaderCellDef"],["cdk-cell","",3,"class",4,"cdkCellDef"],["cdk-header-cell","","scope","col"],[3,"labelKey","module"],[3,"state",4,"ngIf"],[3,"state"],[3,"mode","type","field","record"],[3,"config","record",4,"ngIf"],[3,"config","record"],["cdk-header-row",""],["cdk-row",""],[1,"lead","text-center","pt-3"],["labelKey","MSG_LIST_VIEW_NO_RESULTS_BASIC"],[3,"overlay"]],template:function(t,r){1&t&&(n.\u0275\u0275template(0,n9,13,9,"ng-container",0),n.\u0275\u0275pipe(1,"async")),2&t&&n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(1,1,r.vm$))},dependencies:[F.NgForOf,F.NgIf,Vi.CdkTable,Vi.CdkRowDef,Vi.CdkCellDef,Vi.CdkHeaderCellDef,Vi.CdkColumnDef,Vi.CdkCell,Vi.CdkRow,Vi.CdkHeaderCell,Vi.CdkHeaderRow,Vi.CdkHeaderRowDef,lr,bM,iC,Ar,zt,mM,F.AsyncPipe],encapsulation:2})}return i})();function i9(i,a){if(1&i&&n.\u0275\u0275element(0,"scrm-bulk-action-menu",7),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275property("selectionSource",e.selection)("actionSource",e.bulkActions)}}function r9(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",8),n.\u0275\u0275element(1,"scrm-load-more",9),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("loadMoreButton",e.getLoadMoreButton())}}function o9(i,a){if(1&i&&n.\u0275\u0275element(0,"scrm-pagination",10),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275property("allowPagination",e.isPaginationEnabled())("state",e.pagination)}}let TM=(()=>{class i{selection;bulkActions;pagination;tableActions;paginationType;config;isPaginationEnabled(){return"pagination"===this.paginationType}getLoadMoreButton(){return{klass:"load-more",labelKey:"LBL_LOAD_MORE",onClick:()=>{this.config.loadMore()}}}allLoaded(){return this.config?.allLoaded()}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-table-footer"]],inputs:{selection:"selection",bulkActions:"bulkActions",pagination:"pagination",tableActions:"tableActions",paginationType:"paginationType",config:"config"},decls:7,vars:4,consts:[[1,"list-view-tableactions","table-footer"],[1,"row"],[3,"selectionSource","actionSource",4,"ngIf"],["buttonClass","btn table-action-button",3,"config"],["class","col mx-0 pl-0 load-more-style",4,"ngIf"],[1,"col","mx-0","pl-0","table-pagination-wrapper"],[3,"allowPagination","state",4,"ngIf"],[3,"selectionSource","actionSource"],[1,"col","mx-0","pl-0","load-more-style"],[3,"loadMoreButton"],[3,"allowPagination","state"]],template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"div",0)(1,"div",1),n.\u0275\u0275template(2,i9,1,2,"scrm-bulk-action-menu",2),n.\u0275\u0275element(3,"scrm-action-group-menu",3),n.\u0275\u0275template(4,r9,2,1,"div",4),n.\u0275\u0275elementStart(5,"div",5),n.\u0275\u0275template(6,o9,1,2,"scrm-pagination",6),n.\u0275\u0275elementEnd()()()),2&t&&(n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",r.selection&&r.bulkActions),n.\u0275\u0275advance(1),n.\u0275\u0275property("config",r.tableActions),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!r.isPaginationEnabled()&&!r.allLoaded()),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",r.pagination))},dependencies:[F.NgIf,Vd,Tu,oC,xr],encapsulation:2})}return i})();function a9(i,a){if(1&i&&n.\u0275\u0275element(0,"scrm-table-header",3),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275property("bulkActions",e.config.bulkActions)("paginationType",e.getPaginationType())("pagination",e.config.pagination)("selection",e.config.selection)("tableActions",null==e.config?null:e.config.tableActions)}}function s9(i,a){if(1&i&&n.\u0275\u0275element(0,"scrm-table-footer",4),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275property("bulkActions",e.config.bulkActions)("paginationType",e.getPaginationType())("pagination",e.config.pagination)("selection",e.config.selection)("tableActions",null==e.config?null:e.config.tableActions)("config",e.config)}}let ol=(()=>{class i{config;getPaginationType(){return this.config?.loadMore&&"load-more"===this.config?.paginationType?this.config.paginationType:"pagination"}showHeader(){return this.config.showHeader}showFooter(){return this.config.showFooter}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-table"]],inputs:{config:"config"},decls:4,vars:6,consts:[[3,"bulkActions","paginationType","pagination","selection","tableActions",4,"ngIf"],[3,"config"],[3,"bulkActions","paginationType","pagination","selection","tableActions","config",4,"ngIf"],[3,"bulkActions","paginationType","pagination","selection","tableActions"],[3,"bulkActions","paginationType","pagination","selection","tableActions","config"]],template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"div"),n.\u0275\u0275template(1,a9,1,5,"scrm-table-header",0),n.\u0275\u0275element(2,"scrm-table-body",1),n.\u0275\u0275template(3,s9,1,6,"scrm-table-footer",2),n.\u0275\u0275elementEnd()),2&t&&(n.\u0275\u0275classMap(r.config&&r.config.klass||""),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.showHeader()),n.\u0275\u0275advance(1),n.\u0275\u0275property("config",r.config),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.showFooter()))},dependencies:[F.NgIf,IM,AM,TM],encapsulation:2})}return i})(),NM=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,zd,Nu,Ke.AngularSvgIconModule,Ir]})}return i})(),LM=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Ke.AngularSvgIconModule,Vi.CdkTableModule,Jn,CM,rC,Tr,Ut,gM]})}return i})(),OM=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,zd,Nu,Ke.AngularSvgIconModule,aC,Ir]})}return i})(),al=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,NM,LM,OM,Ke.AngularSvgIconModule]})}return i})();class tf extends M.ActionHandler{checkRecordAccess(a,e=[]){const r=(a.record??{}).acls??[];return!(!r||!r.length)&&this.checkAccess(a.action??null,r,e)}}let BM=(()=>{class i extends tf{moduleNameMapper;router;key="create";modes=["list"];constructor(e,t){super(),this.moduleNameMapper=e,this.router=t}run(e,t=null){const r=t.params.create||{},o={};o.return_module=r.legacyModuleName,o.return_action=r.returnAction,o.return_id=e.record.id,o[r.mapping.moduleName]=r.legacyModuleName,o[r.mapping.name]=e.record.attributes.name,o[r.mapping.id]=e.record.id,this.router.navigate(["/"+r.module+"/"+r.action],{queryParams:o}).then()}shouldDisplay(e){return!0}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Tn),n.\u0275\u0275inject(Rt.Router))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),RM=(()=>{class i extends tf{key="async-process";modes=M.ALL_VIEW_MODES;constructor(){super()}run(e){}shouldDisplay(e){const t=e?.action?.acl??[];return!t.length||this.checkRecordAccess(e,t)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),sl=(()=>{class i extends vi{createRelated;async;constructor(e,t){super(),this.createRelated=e,this.async=t,e.modes.forEach(r=>this.actions[r][e.key]=e),t.modes.forEach(r=>this.actions[r][t.key]=t)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(BM),n.\u0275\u0275inject(RM))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),jM=(()=>{class i extends dr{actionManager;asyncActionService;message;confirmation;language;selectModalService;metadata;constructor(e,t,r,o,s,c,l){super(e,t,r,o,s,c,l),this.actionManager=e,this.asyncActionService=t,this.message=r,this.confirmation=o,this.language=s,this.selectModalService=c,this.metadata=l}buildActionData(e,t){return{record:t&&t.record||null,action:e}}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(sl),n.\u0275\u0275inject(Yt),n.\u0275\u0275inject(dt),n.\u0275\u0275inject(Nn),n.\u0275\u0275inject($e),n.\u0275\u0275inject(kn),n.\u0275\u0275inject(bt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),kM=(()=>{class i{buffer=new S.Subject;buffer$=this.buffer.asObservable();enabled=!0;subs=[];debounceTime=1e3;constructor(){}init(e=1e3){this.debounceTime=e,this.subs.push(this.buffer$.pipe((0,v.debounceTime)(this.debounceTime)).subscribe(()=>{this.enabled=!0}))}destroy(){this.subs.forEach(e=>e.unsubscribe())}debounce(e){e&&this.enabled&&(this.enabled=!1,e(),this.buffer.next(!0))}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),PM=(()=>{class i{metadata;processService;constructor(e,t){this.metadata=e,this.processService=t}build(e,t){return(0,M.deepClone)({module:"Favorite",type:"Favorite",attributes:{parent_id:t,parent_type:e}})}add(e,t){this.update(e,t,"add")}remove(e,t){this.update(e,t,"remove")}update(e,t,r){const s={favorite:t,action:r};setTimeout(()=>{this.processService.submit("update-favorite",s).pipe((0,v.take)(1)).subscribe(c=>{const l=c?.data?.favorite??null;null!==l?this.addFavoriteToMetadata(l,e):this.removeFavoriteFromMetadata(e,t)})},100)}addFavoriteToMetadata(e,t){const r={id:e?.id??"",module:e?.module??"",attributes:{...e?.attributes??{}}},o=e?.attributes?.parent_id??"",s=this.metadata.getModuleMeta(t),c=s?.favorites??null;if(c){let l=c.filter(u=>(u?.attributes?.parent_id??"")!==o);l.unshift(r),s.favorites=l}this.metadata.setModuleMetadata(t,s)}removeFavoriteFromMetadata(e,t){const r=this.metadata.getModuleMeta(e),o=r?.favorites??null,s=t?.attributes?.parent_id??null;!o||!o.length||!s||(r.favorites=o.filter(c=>(c?.attributes?.parent_id??"")!==s),this.metadata.setModuleMetadata(e,r))}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(bt),n.\u0275\u0275inject(ir))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function c9(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275element(1,"scrm-button",1),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("config",e.addButton)}}function l9(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275element(1,"scrm-button",1),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("config",e.removeButton)}}let $M=(()=>{class i{handler;record;addButton;removeButton;favorite=!1;debounceService;constructor(e){this.handler=e}ngOnInit(){this.record&&(this.debounceService=new kM,this.debounceService.init(),this.favorite=this?.record?.favorite??!1,this.addButton={klass:["btn btn-sm btn-outline-light favorite-star favorite-off"],onClick:()=>{this.debounceService.debounce(()=>{this.add()})},icon:"star"},this.removeButton={klass:["btn btn-sm btn-outline-light favorite-star favorite-on"],onClick:()=>{this.debounceService.debounce(()=>{this.remove()})},icon:"star"})}ngOnDestroy(){this.debounceService.destroy()}add(){this.record.favorite=!0,this.favorite=!0;const e=this.handler.build(this.record.module,this.record.id);this.handler.add(this.record.module,e)}remove(){this.record.favorite=!1,this.favorite=!1;const e=this.handler.build(this.record.module,this.record.id);this.handler.remove(this.record.module,e)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(PM))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-favorite-toggle"]],inputs:{record:"record"},decls:2,vars:2,consts:[[4,"ngIf"],[3,"config"]],template:function(t,r){1&t&&(n.\u0275\u0275template(0,c9,2,1,"ng-container",0),n.\u0275\u0275template(1,l9,2,1,"ng-container",0)),2&t&&(n.\u0275\u0275property("ngIf",!r.favorite),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.favorite))},dependencies:[F.NgIf,Vn],encapsulation:2})}return i})(),UM=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,cn]})}return i})();class nf extends M.ActionHandler{}let VM=(()=>{class i extends nf{message;key="save";modes=["edit"];constructor(e){super(),this.message=e}run(e){e.store.validate().pipe((0,v.take)(1)).subscribe(t=>{t?e.store.save().pipe((0,v.take)(1)).subscribe(r=>{e.listFilterStore.config.addSavedFilter(e.store.recordStore.extractBaseRecord(r)),e.listFilterStore.applyFilter(),this.message.addSuccessMessageByKey("LBL_SAVED_FILTER_SAVED")}):this.message.addWarningMessageByKey("LBL_VALIDATION_ERRORS")})}shouldDisplay(){return!0}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(dt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),zM=(()=>{class i extends nf{message;asyncActionService;key="delete";modes=["edit","detail"];constructor(e,t){super(),this.message=e,this.asyncActionService=t}run(e){const t=`record-${this.key}`,r=e.store.getBaseRecord()||{};r.id?(this.message.removeMessages(),this.asyncActionService.run(t,{action:t,module:r.module,id:r.id},"noop").pipe((0,v.take)(1)).subscribe(()=>{e.listFilterStore.config.removeSavedFilter(r)})):this.message.addWarningMessageByKey("LBL_FILTER_ID_NOT_DEFINED")}shouldDisplay(e){const t=e&&e.store;return!!(t&&t.recordStore.getBaseRecord()||{}).id}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(dt),n.\u0275\u0275inject(Yt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),rf=(()=>{class i extends vi{constructor(e,t){super(),e.modes.forEach(r=>this.actions[r][e.key]=e),t.modes.forEach(r=>this.actions[r][t.key]=t)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(VM),n.\u0275\u0275inject(zM))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const GM={id:"",type:"",module:"",attributes:{}};class WM extends Md{definitions$;recordSaveGQL;recordFetchGQL;message;recordManager;recordMappers;fieldManager;language;internalState=(0,M.deepClone)(GM);stagingState=(0,M.deepClone)(GM);store=new S.BehaviorSubject(this.internalState);staging=new S.BehaviorSubject(this.stagingState);searchFields={};listColumns=[];constructor(a,e,t,r,o,s,c,l){super(a,e,t,r,o,s),this.definitions$=a,this.recordSaveGQL=e,this.recordFetchGQL=t,this.message=r,this.recordManager=o,this.recordMappers=s,this.fieldManager=c,this.language=l,this.state$=this.store.asObservable().pipe((0,v.tap)(u=>{this.updateStaging(u)})),this.staging$=this.staging.asObservable()}getSearchFields(){return this.searchFields}setSearchFields(a){this.searchFields=a}getListColumns(){return this.listColumns}setListColumns(a){this.listColumns=a}getBaseRecord(){return this.stagingState?(this.mapStagingFields(),(0,M.deepClone)({id:this.stagingState.id,type:this.stagingState.type,module:this.stagingState.module,key:this.stagingState.key,searchModule:this.stagingState.searchModule,criteria:this.stagingState.criteria,attributes:this.stagingState.attributes})):null}extractBaseRecord(a){if(!a)return null;let e=a.criteria??{};return Array.isArray(e)&&!e.length&&(e={}),(0,M.deepClone)({id:a.id,type:a.type,module:a.module,key:a.key,searchModule:a.searchModule,criteria:e,attributes:a.attributes})}initRecord(a){a.attributes=a.attributes||{},a.attributes.search_module=a.searchModule;const e=a?.attributes?.contents?.filters??{};a.attributes.contents=a.attributes.contents||{filters:{}},a.attributes.contents.filters=Array.isArray(e)&&!e.length?{}:e,a.criteria=this.getCriteria(a),this.initCriteriaFields(a,this.getSearchFields()),a.module&&this.definitions&&this.definitions.length>0&&(a.fields=this.recordManager.initFields(a,this.definitions)),this.initOrderByOptions(a)}initOrderByOptions(a){if(!a.fields||!a.fields.orderBy)return;a.fields.orderBy.metadata=a.fields.orderBy.metadata||{};const e=[];this.getListColumns().forEach(t=>{if(!t.default||!0!==t.default)return;const o=this.language.getFieldLabel(t.label||t.fieldDefinition.vname||"",a.searchModule);e.push({value:t.fieldDefinition.name||t.name,label:o})}),a.fields.orderBy.metadata.options$=(0,S.of)(e).pipe((0,v.shareReplay)())}getCriteria(a){return a&&a.criteria?a.criteria.filters?Array.isArray(a.criteria.filters)&&!a.criteria.filters.length?{...a.criteria,filters:{}}:(0,M.deepClone)(a.criteria):{...a.criteria,filters:{}}:{filters:{}}}initCriteriaFields(a,e){a.criteriaFields=a.criteriaFields||{},a.criteriaFormGroup||(a.criteriaFormGroup=new De.UntypedFormGroup({})),e&&Object.keys(e).forEach(t=>{this.buildField(a,e[t])})}buildField(a,e){const r=e.type,o={name:e.name,label:e.label,vardefBased:e?.vardefBased??!1,readonly:e?.readonly??!1,display:e?.display??"",type:r,fieldDefinition:{}};e.fieldDefinition&&(o.fieldDefinition=e.fieldDefinition),("bool"===r||"boolean"===r)&&(o.fieldDefinition.options="dom_int_bool"),this.fieldManager.addFilterField(a,o,this.language)}}let af=(()=>{class i{recordFetchGQL;recordSaveGQL;message;recordManager;recordMappers;baseMapper;fieldManager;language;constructor(e,t,r,o,s,c,l,u){this.recordFetchGQL=e,this.recordSaveGQL=t,this.message=r,this.recordManager=o,this.recordMappers=s,this.baseMapper=c,this.fieldManager=l,this.language=u,s.register("default",c.getKey(),c)}create(e){return new WM(e,this.recordSaveGQL,this.recordFetchGQL,this.message,this.recordManager,this.recordMappers,this.fieldManager,this.language)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Qr),n.\u0275\u0275inject(Xr),n.\u0275\u0275inject(dt),n.\u0275\u0275inject(_i),n.\u0275\u0275inject(M.RecordMapperRegistry),n.\u0275\u0275inject(pa),n.\u0275\u0275inject(di),n.\u0275\u0275inject($e))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const KM={module:"",searchModule:"",recordID:"",loading:!1,mode:"detail"};let sf=(()=>{class i{appStateStore;meta;message;fieldManager;language;savedFilterStoreFactory;record$;stagingRecord$;loading$;mode$;meta$;metadataLoading$;vm$;vm;recordStore;searchCriteria;filter;cache$=null;internalState=(0,M.deepClone)(KM);store=new S.BehaviorSubject(this.internalState);state$=this.store.asObservable();subs=[];metadataLoadingState;constructor(e,t,r,o,s,c){this.appStateStore=e,this.meta=t,this.message=r,this.fieldManager=o,this.language=s,this.savedFilterStoreFactory=c,this.metadataLoadingState=new S.BehaviorSubject(!1),this.metadataLoading$=this.metadataLoadingState.asObservable(),this.meta$=this.meta.getMetadata("saved-search",["recordView"]).pipe((0,v.tap)(()=>this.metadataLoadingState.next(!1)),(0,v.map)(l=>{const u={...l.recordView};return u.actions=(u?.actions??[]).filter(d=>"cancel"!==d.key),u})),this.recordStore=c.create(this.getViewFields$()),this.record$=this.recordStore.state$.pipe((0,v.distinctUntilChanged)(),(0,v.map)(l=>l)),this.stagingRecord$=this.recordStore.staging$.pipe((0,v.distinctUntilChanged)(),(0,v.map)(l=>l)),this.loading$=this.state$.pipe((0,v.map)(l=>l.loading)),this.mode$=this.state$.pipe((0,v.map)(l=>l.mode)),this.vm$=this.stagingRecord$.pipe((0,S.combineLatestWith)(this.mode$),(0,v.map)(([l,u])=>(this.vm={record:l,mode:u},this.vm)))}getModuleName(){return this.internalState.module}getRecordId(){return this.internalState.recordID}getViewContext(){return{module:this.getModuleName(),id:this.getRecordId()}}destroy(){this.clear()}init(e,t="detail"){return this.internalState.module="saved-search",this.internalState.recordID=e,this.setMode(t),this.metadataLoadingState.next(!0),(0,S.forkJoin)([this.meta$,this.load()]).pipe((0,v.map)(([o,s])=>s))}initRecord(e,t,r,o,s="detail"){this.updateState({...this.internalState,recordID:t.id,module:"saved-search",searchModule:e,mode:s}),this.metadataLoadingState.next(!0),this.meta$.pipe((0,v.take)(1),(0,v.tap)(()=>{this.metadataLoadingState.next(!1),this.initStaging(e,t,r,o)})).subscribe()}initValidators(e){!e||!Object.keys(e?.fields).length||Object.keys(e.fields).forEach(t=>{const r=e.fields[t];if(!r?.formControl)return;this.resetValidators(r);const s=r?.validators??[],c=r?.asyncValidators??[];s.length&&r?.formControl?.setValidators(s),c.length&&r?.formControl?.setAsyncValidators(c)})}resetValidators(e){e?.formControl?.clearValidators(),e?.formControl?.clearAsyncValidators()}initStaging(e,t,r,o){const s=(0,M.deepClone)(this.recordStore.extractBaseRecord(t));s.searchModule=e,this.recordStore.setSearchFields(r),this.recordStore.setListColumns(o),this.recordStore.setStaging(s),this.initValidators(this.recordStore.getStaging())}clear(){this.cache$=null,this.updateState((0,M.deepClone)(KM)),this.metadataLoadingState.unsubscribe(),this.metadataLoadingState=null,this.recordStore.destroy(),this.recordStore=null}clearAuthBased(){this.clear()}getBaseRecord(){return this.recordStore.getBaseRecord()}getMode(){return this.internalState?this.internalState.mode:null}setMode(e){this.updateState({...this.internalState,mode:e})}save(){return this.appStateStore.updateLoading(`${this.internalState.module}-record-save`,!0),this.recordStore.save().pipe((0,v.catchError)(()=>(this.message.addDangerMessageByKey("LBL_ERROR_SAVING"),(0,S.of)({}))),(0,v.finalize)(()=>{this.appStateStore.updateLoading(`${this.internalState.module}-record-save`,!1)}))}validate(){return(0,S.forkJoin)([this.recordStore.validate(),this.validateCriteria()]).pipe((0,v.map)(([e,t])=>e&&t))}validateCriteria(){const t=this.recordStore.getStaging().criteriaFormGroup;return t.markAllAsTouched(),t.statusChanges.pipe((0,v.startWith)(t.status),(0,v.filter)(r=>"PENDING"!==r),(0,v.take)(1),(0,v.map)(r=>"VALID"===r))}load(e=!0){return this.appStateStore.updateLoading(`${this.internalState.module}-record-fetch`,!0),this.recordStore.retrieveRecord(this.internalState.module,this.internalState.recordID,e).pipe((0,v.tap)(t=>{this.appStateStore.updateLoading(`${this.internalState.module}-record-fetch`,!1),this.updateState({...this.internalState,recordID:t.id,module:t.module})}))}getViewFieldsKeys$(){return this.meta$.pipe((0,v.map)(e=>{const t=[];return e.panels.forEach(r=>{r.rows.forEach(o=>{o.cols.forEach(s=>{t.push(s.name)})})}),t}))}getViewFields$(){return this.meta$.pipe((0,v.map)(e=>{const t=[];return e.panels.forEach(r=>{r.rows.forEach(o=>{o.cols.forEach(s=>{t.push(s)})})}),t}))}updateState(e){this.store.next(this.internalState=e)}getMetadata(){return(this.meta.get()||{}).recordView||{}}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Xt),n.\u0275\u0275inject(bt),n.\u0275\u0275inject(dt),n.\u0275\u0275inject(di),n.\u0275\u0275inject($e),n.\u0275\u0275inject(af))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),HM=(()=>{class i extends Xr{apollo;constructor(e){super(e),this.apollo=e}save(e){return super.save(e)}mapToRecord(e){if(!e.data||!e.data.saveRecord||!e.data.saveRecord.record)return null;const t={id:e.data.saveRecord.record._id,type:e.data.saveRecord.record.type||"",module:e.data.saveRecord.record.module||"",attributes:e.data.saveRecord.record.attributes||null};t.key=t.id||t.attributes&&t.attributes.id||"";const r=t.attributes&&t.attributes.contents||null;return r&&(t.criteria=r),t}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(me.Apollo))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),ZM=(()=>{class i{getKey(){return"criteria"}map(e){const t=e;if(t.criteria){const o=t?.attributes?.contents??{};o.filters=(0,M.deepClone)(t?.criteria?.filters??{}),e.fields.name&&(o.name=e.fields.name.value,t.criteria.name=o.name),e.fields.orderBy&&(o.orderBy=e.fields.orderBy.value,t.criteria.orderBy=o.orderBy),e.fields.sortOrder&&(o.sortOrder=e.fields.sortOrder.value,t.criteria.sortOrder=o.sortOrder),e.attributes.search_module&&(o.searchModule=e.attributes.search_module,t.criteria.searchModule=o.searchModule),t.attributes.contents=o}let r=t.key||"";"default"===r&&(r=""),t.id=r,t.attributes.id=r}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),cf=(()=>{class i{recordFetchGQL;recordSaveGQL;appStateStore;languageStore;metadataStore;message;recordManager;fieldManager;recordMappers;baseMapper;savedSearchMapper;savedFilterStoreFactory;constructor(e,t,r,o,s,c,l,u,d,f,p){this.recordFetchGQL=e,this.recordSaveGQL=t,this.appStateStore=r,this.languageStore=o,this.metadataStore=s,this.message=c,this.recordManager=l,this.fieldManager=u,this.recordMappers=d,this.baseMapper=f,this.savedSearchMapper=p,this.savedFilterStoreFactory=new af(e,t,c,l,d,f,u,o),this.recordMappers.register("saved-search",this.savedSearchMapper.getKey(),this.savedSearchMapper)}create(){return new sf(this.appStateStore,this.metadataStore,this.message,this.fieldManager,this.languageStore,this.savedFilterStoreFactory)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Qr),n.\u0275\u0275inject(HM),n.\u0275\u0275inject(Xt),n.\u0275\u0275inject($e),n.\u0275\u0275inject(bt),n.\u0275\u0275inject(dt),n.\u0275\u0275inject(_i),n.\u0275\u0275inject(di),n.\u0275\u0275inject(M.RecordMapperRegistry),n.\u0275\u0275inject(pa),n.\u0275\u0275inject(ZM))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),lf=(()=>{class i{message;savedFilterStoreFactory;config;panelMode="closable";mode="filter";isCollapsed$;closeButton;myFilterButton;gridButtons=null;fields=[];special=[];vm$;filterStore;savedFilters=[];displayFields;collapse;searchFields;subs=[];constructor(e,t){this.message=e,this.savedFilterStoreFactory=t,this.filterStore=t.create()}init(e){this.config=e,this.initSearchFields(),this.initConfigUpdatesSubscription(),this.vm$=this.filterStore.stagingRecord$.pipe((0,v.map)(t=>[t]),(0,v.tap)(([t])=>{this.reset(),this.splitCriteriaFields(t),this.initDisplayFields(),"detail"!==this.filterStore.getMode()&&this.initGridButtons(),this.initHeaderButtons(),this.initMyFiltersButton(this.savedFilters)})),this.config.panelMode&&(this.panelMode=this.config.panelMode),this.collapse=new S.BehaviorSubject(!1),this.isCollapsed$=this.collapse.asObservable(),(0,M.isVoid)(this.config.isCollapsed)||this.collapse.next(this.config.isCollapsed),this.reset(),this.initGridButtons(),this.initHeaderButtons()}clear(){this.subs.forEach(e=>e.unsubscribe()),this.reset(),this.filterStore.clear(),this.filterStore=null,this.collapse.unsubscribe()}clearAuthBased(){this.clear()}reset(){this.fields=[],this.special=[]}applyFilter(){this.filterStore.validateCriteria().pipe((0,v.take)(1)).subscribe(e=>{if(e)return"collapsible"===this.config.panelMode&&this.config.collapseOnSearch&&this.collapse.next(!0),this.config.onSearch(),void this.config.updateFilter(this.filterStore.getBaseRecord());this.message.addWarningMessageByKey("LBL_VALIDATION_ERRORS")})}clearFilter(){this.config.resetFilter(!1)}initConfigUpdatesSubscription(){this.subs.push(this.config.filter$.pipe((0,S.combineLatestWith)(this.config.searchFields$),(0,v.tap)(([e,t])=>{this.reset();let r="edit";(e.readonly??!1)&&(r="detail",this.mode=r),this.filterStore.initRecord(this.config.module,e,t,this.config.listFields,r)})).subscribe()),this.subs.push(this.config.savedFilters$.pipe((0,v.map)(e=>[e]),(0,v.tap)(([e])=>{this.savedFilters=e,this.initMyFiltersButton(e)})).subscribe())}splitCriteriaFields(e){!e||!e.criteriaFields||Object.entries(e.criteriaFields).forEach(([t,r])=>{if((r.name||t).includes("_only"))this.special.push(r);else{if(r.vardefBased){const c=(e?.criteria?.filters??{})[t]??{};!(0,ie.isEmpty)(c?.operator)&&"none"===r.display&&(r.display="default")}this.fields.push(r)}})}initSearchFields(){this.subs.push(this.config.searchFields$.subscribe(e=>{this.searchFields=e}))}initDisplayFields(){(!this.searchFields||(0,M.emptyObject)(this.searchFields)||!this.fields)&&(this.displayFields=[]);const e=[];this.fields.forEach(t=>{"none"===t.display||"groupField"===t.source||(this.searchFields[t.name]||(t.readonly=!0),e.push(t))}),this.displayFields=e}initGridButtons(){this.gridButtons=[{labelKey:"LBL_CLEAR_BUTTON_LABEL",klass:["clear-filters-button","btn","btn-outline-danger","btn-sm"],onClick:this.clearFilter.bind(this)},{labelKey:"LBL_SEARCH_BUTTON_LABEL",klass:["filter-button","btn","btn-danger","btn-sm"],onClick:this.applyFilter.bind(this)}]}initHeaderButtons(){this.closeButton={onClick:()=>{this.config.onClose()}}}initMyFiltersButton(e){if(!e||e.length<1)return void(this.myFilterButton=null);const t={wrapperKlass:["filter-select"],labelKey:"LBL_SAVED_FILTER_SHORTCUT",klass:["btn","btn-outline-light","btn-sm"],items:[]},r=this.filterStore.getRecordId();e.forEach(o=>{const s={label:o.attributes.name,onClick:()=>{this.config.setOpenFilter(o)}};o.key===r&&(t.label=o.attributes.name,t.labelKey="",s.icon="filter",s.iconKlass="small",s.klass="active"),t.items.push(s)}),this.myFilterButton=t}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(dt),n.\u0275\u0275inject(cf))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),qM=(()=>{class i extends dr{store;listFilterStore;language;actionManager;asyncActionService;message;confirmation;selectModalService;metadata;constructor(e,t,r,o,s,c,l,u,d){super(o,s,c,l,r,u,d),this.store=e,this.listFilterStore=t,this.language=r,this.actionManager=o,this.asyncActionService=s,this.message=c,this.confirmation=l,this.selectModalService=u,this.metadata=d}getActions(e){return this.store.meta$.pipe((0,S.combineLatestWith)(this.store.mode$,this.store.stagingRecord$,this.language.vm$),(0,v.map)(([t,r])=>r&&t?this.parseModeActions(t.actions,r):[]))}buildActionData(e,t){return{store:this.store,listFilterStore:this.listFilterStore,action:e}}getMode(){return this.store.getMode()}getModuleName(e){return this.store.getModuleName()}reload(e,t,r){this.store.load(!1).pipe((0,v.take)(1)).subscribe()}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(sf),n.\u0275\u0275inject(lf),n.\u0275\u0275inject($e),n.\u0275\u0275inject(rf),n.\u0275\u0275inject(Yt),n.\u0275\u0275inject(dt),n.\u0275\u0275inject(Nn),n.\u0275\u0275inject(kn),n.\u0275\u0275inject(bt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),JM=(()=>{class i{language;actionManager;asyncActionService;message;confimation;selectModalService;metadata;constructor(e,t,r,o,s,c,l){this.language=e,this.actionManager=t,this.asyncActionService=r,this.message=o,this.confimation=s,this.selectModalService=c,this.metadata=l}create(e,t){return new qM(e,t,this.language,this.actionManager,this.asyncActionService,this.message,this.confimation,this.selectModalService,this.metadata)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject($e),n.\u0275\u0275inject(rf),n.\u0275\u0275inject(Yt),n.\u0275\u0275inject(dt),n.\u0275\u0275inject(Nn),n.\u0275\u0275inject(kn),n.\u0275\u0275inject(bt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),QM=(()=>{class i{message;savedFilterStoreFactory;constructor(e,t){this.message=e,this.savedFilterStoreFactory=t}create(){return new lf(this.message,this.savedFilterStoreFactory)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(dt),n.\u0275\u0275inject(cf))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function u9(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",6),n.\u0275\u0275element(1,"scrm-dropdown-button",7),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("config",e.store.myFilterButton)}}function d9(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",13),n.\u0275\u0275element(1,"input",14),n.\u0275\u0275elementStart(2,"label",15),n.\u0275\u0275element(3,"scrm-label",16),n.\u0275\u0275elementEnd()()),2&i){const e=a.$implicit;n.\u0275\u0275advance(1),n.\u0275\u0275property("value",e.value),n.\u0275\u0275advance(2),n.\u0275\u0275property("labelKey",e.labelKey)}}function f9(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",11),n.\u0275\u0275template(1,d9,4,2,"div",12),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext(3);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",e.store.special)}}function p9(i,a){1&i&&n.\u0275\u0275element(0,"scrm-button",7),2&i&&n.\u0275\u0275property("config",a.$implicit)}function m9(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",17),n.\u0275\u0275template(1,p9,1,1,"scrm-button",18),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext(3);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",e.store.gridButtons)}}function g9(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"scrm-field-grid",8),n.\u0275\u0275template(1,f9,2,1,"div",9),n.\u0275\u0275template(2,m9,2,1,"div",10),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext().ngIf,t=n.\u0275\u0275nextContext();n.\u0275\u0275property("actions",!0)("appendActions",!1)("fieldMode",t.store.mode)("fields",t.store.displayFields)("record",e)("special",t.store.special.length>0),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.store.special.length>0),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.store.gridButtons)}}function h9(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275element(1,"scrm-record-grid",7),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("config",e.gridConfig)}}function v9(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"scrm-panel",1),n.\u0275\u0275template(1,u9,2,1,"div",2),n.\u0275\u0275elementStart(2,"div",3),n.\u0275\u0275template(3,g9,3,8,"scrm-field-grid",4),n.\u0275\u0275template(4,h9,2,1,"ng-container",5),n.\u0275\u0275elementEnd()()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275propertyInterpolate1("klass","filter-panel m-0 ",e.config&&e.config.klass||"",""),n.\u0275\u0275property("showHeader",e.config.displayHeader)("close",e.store.closeButton)("isCollapsed$",e.store.isCollapsed$)("mode",e.store.panelMode)("titleKey","LBL_BASIC_FILTER"),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.store.myFilterButton),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",e.store.displayFields&&e.store.displayFields.length),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.config&&e.config.savedFilterEdit&&"detail"!==e.store.filterStore.getMode())}}let cl=(()=>{class i{storeFactory;actionAdapterFactory;config;vm$;store;filterActionsAdapter;gridConfig;constructor(e,t){this.storeFactory=e,this.actionAdapterFactory=t,this.store=e.create(),this.filterActionsAdapter=t.create(this.store.filterStore,this.store)}ngOnInit(){this.store.init(this.config),this.vm$=this.store.vm$.pipe((0,v.map)(([e])=>{const t={...e};return t.fields=e.criteriaFields,t})),this.gridConfig={record$:this.store.filterStore.stagingRecord$,mode$:this.store.filterStore.mode$,fields$:this.store.filterStore.getViewFieldsKeys$(),actions:this.filterActionsAdapter,appendActions:!0,klass:"mt-2 p-2 saved-search-container rounded",buttonClass:"btn btn-outline-danger btn-sm",labelDisplay:"inline",rowClass:{"align-items-start":!0,"align-items-center":!1},colAlignItems:"align-items-start",maxColumns$:(0,S.of)(4).pipe((0,v.shareReplay)(1)),sizeMap$:(0,S.of)({handset:1,tablet:2,web:4,wide:4}).pipe((0,v.shareReplay)(1))}}ngOnDestroy(){this.store.clear(),this.store=null}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(QM),n.\u0275\u0275directiveInject(JM))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-list-filter"]],inputs:{config:"config"},decls:2,vars:3,consts:[[3,"showHeader","close","isCollapsed$","mode","klass","titleKey",4,"ngIf"],[3,"showHeader","close","isCollapsed$","mode","klass","titleKey"],["panel-header-button","",4,"ngIf"],["panel-body","",1,"p-2","filter-body"],[3,"actions","appendActions","fieldMode","fields","record","special",4,"ngIf"],[4,"ngIf"],["panel-header-button",""],[3,"config"],[3,"actions","appendActions","fieldMode","fields","record","special"],["class","float-right mt-4","field-grid-special","",4,"ngIf"],["class","mt-4 align-self-end","field-grid-actions","",4,"ngIf"],["field-grid-special","",1,"float-right","mt-4"],["class","d-inline-block form-check mb-2 mr-sm-2",4,"ngFor","ngForOf"],[1,"d-inline-block","form-check","mb-2","mr-sm-2"],["type","checkbox",1,"form-check-input",3,"value"],[1,"form-check-label"],[3,"labelKey"],["field-grid-actions","",1,"mt-4","align-self-end"],[3,"config",4,"ngFor","ngForOf"]],template:function(t,r){1&t&&(n.\u0275\u0275template(0,v9,5,9,"scrm-panel",0),n.\u0275\u0275pipe(1,"async")),2&t&&n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(1,1,r.vm$))},dependencies:[F.NgForOf,F.NgIf,Vn,Ea,gd,gc,zt,$d,F.AsyncPipe],encapsulation:2})}return i})(),ll=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,cn,eo,wo,Zr,Ut,ps,cn]})}return i})(),_9=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,yo,al,Ut,Tr,ll,cn]})}return i})();function y9(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275element(1,"scrm-record-grid",4),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("config",e.getGridConfig())}}function b9(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"scrm-panel",1)(1,"div",2),n.\u0275\u0275template(2,y9,2,1,"ng-container",3),n.\u0275\u0275elementEnd()()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275propertyInterpolate1("klass","record-panel ",e.config&&e.config.klass||"",""),n.\u0275\u0275property("close",e.closeButton)("isCollapsed$",e.isCollapsed$)("mode",e.panelMode)("titleKey",e.config.title||""),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",e.config)}}n.\u0275\u0275setComponentScope(_a,[F.NgIf,da,ol,zt,Ar,cl,Vn],[F.AsyncPipe]);let XM=(()=>{class i{config;closeButton;panelMode="closable";isCollapsed$;vm$;collapse;constructor(){}ngOnInit(){this.vm$=this.config?.store?.vm$??(0,S.of)({}),this.initCloseButton(),this.config.panelMode&&(this.panelMode=this.config.panelMode),this.collapse=new S.BehaviorSubject(!1),this.isCollapsed$=this.collapse.asObservable(),(0,M.isVoid)(this.config.isCollapsed)||this.collapse.next(this.config.isCollapsed)}ngOnDestroy(){}getGridConfig(){return{record$:this.config?.store?.stagingRecord$??(0,S.of)(null),mode$:this.config?.store?.mode$??(0,S.of)("detail"),fields$:this.config?.store?.getViewFieldsKeys$?.()??(0,S.of)([]),actions:this.config?.actions??[],klass:"mt-2 rounded",buttonClass:"btn btn-outline-danger btn-sm",maxColumns$:(0,S.of)(4).pipe((0,v.shareReplay)(1)),sizeMap$:(0,S.of)({handset:1,tablet:2,web:3,wide:4}).pipe((0,v.shareReplay)(1))}}initCloseButton(){this.closeButton={onClick:()=>{this.config.onClose()}}}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-record-panel"]],inputs:{config:"config"},decls:2,vars:3,consts:[[3,"close","isCollapsed$","mode","titleKey","klass",4,"ngIf"],[3,"close","isCollapsed$","mode","titleKey","klass"],["panel-body","",1,"pl-2","pr-2"],[4,"ngIf"],[3,"config"]],template:function(t,r){1&t&&(n.\u0275\u0275template(0,b9,3,6,"scrm-panel",0),n.\u0275\u0275pipe(1,"async")),2&t&&n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(1,1,r.vm$))},dependencies:[F.NgIf,Ea,$d,F.AsyncPipe],encapsulation:2})}return i})();class YM extends M.ActionHandler{}let eS=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,cn,eo,wo,Zr,Ut,cn,ps]})}return i})(),uf=(()=>{class i extends Cd{appStateStore;meta;message;fieldManager;language;storeFactory;constructor(e,t,r,o,s,c){super(e,t,r,o,s,c),this.appStateStore=e,this.meta=t,this.message=r,this.fieldManager=o,this.language=s,this.storeFactory=c}getViewFields$(){return this.meta$.pipe((0,v.map)(e=>e.fields))}getViewFieldsKeys$(){return this.meta$.pipe((0,v.map)(e=>{if(!e.fields||!e.fields.length)return[];const t=[];return e.fields.forEach(r=>{t.push(r.name)}),t}))}initRecord(e,t="detail",r=!0){super.initRecord(e,t,r),this.setRecord(e)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Xt),n.\u0275\u0275inject(bt),n.\u0275\u0275inject(dt),n.\u0275\u0275inject(di),n.\u0275\u0275inject($e),n.\u0275\u0275inject(Yr))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),tS=(()=>{class i{recordFetchGQL;recordSaveGQL;appStateStore;languageStore;metadataStore;message;recordManager;fieldManager;recordStoreFactory;constructor(e,t,r,o,s,c,l,u,d){this.recordFetchGQL=e,this.recordSaveGQL=t,this.appStateStore=r,this.languageStore=o,this.metadataStore=s,this.message=c,this.recordManager=l,this.fieldManager=u,this.recordStoreFactory=d}create(){return new uf(this.appStateStore,this.metadataStore,this.message,this.fieldManager,this.languageStore,this.recordStoreFactory)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Qr),n.\u0275\u0275inject(Xr),n.\u0275\u0275inject(Xt),n.\u0275\u0275inject($e),n.\u0275\u0275inject(bt),n.\u0275\u0275inject(dt),n.\u0275\u0275inject(_i),n.\u0275\u0275inject(di),n.\u0275\u0275inject(Yr))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),io=(()=>{class i{config;context;context$;static \u0275fac=function(t){return new(t||i)};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["ng-component"]],inputs:{config:"config",context:"context",context$:"context$"},decls:0,vars:0,template:function(t,r){},encapsulation:2})}return i})();const C9={module:"",query:{},statistic:{id:"",data:{}},loading:!1};let df=(()=>{class i extends Yc{fetchGQL;cache$=null;internalState=(0,M.deepClone)(C9);store=new S.BehaviorSubject(this.internalState);constructor(e){super(e),this.fetchGQL=e,this.state$=this.store.asObservable(),this.statistic$=this.state$.pipe((0,v.map)(t=>t.statistic),(0,v.distinctUntilChanged)())}updateState(e){super.updateState(e)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(ur))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),nS=(()=>{class i{traverse(e,t,r){e.singleSeries&&e.singleSeries.forEach(o=>{t.visit(o,r)}),e.multiSeries&&e.multiSeries.forEach(o=>{o.series.forEach(s=>{t.visit(s,r)})})}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),iS=(()=>{class i{currencyService;preferences;constructor(e,t){this.currencyService=e,this.preferences=t}toUserFormat(e,t=null){const r=parseFloat(e);if(!isFinite(r))return e;const o=this.currencyService.getUserCurrency();return this.currencyService.baseToCurrency(o.id,r).toString()}toInternalFormat(e){const t=parseFloat(e);if(!isFinite(t))return e;const r=this.currencyService.getUserCurrency();return this.currencyService.currencyToBase(r.id,t).toString()}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Qa),n.\u0275\u0275inject(qt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),rS=(()=>{class i{currencyUnitConverter;map={};constructor(e){this.currencyUnitConverter=e,this.addUnitConverter("currency",e)}addUnitConverter(e,t){this.map[e]=t}toUserFormat(e,t,r){if(!e)return t;const o=this.map[e];return o?o.toUserFormat(t,r):t}toInternalFormat(e,t){if(!e)return t;const r=this.map[e];return r?r.toInternalFormat(t):t}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(iS))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),oS=(()=>{class i{converter;constructor(e){this.converter=e}visit(e,t){const r=t?.dataType??null,o=t?.direction??"user-unit";if(!r)return;const s=parseFloat(e.value.toString());if(isFinite(s)){if("user-unit"===o)return void(e.value=this.converter.toUserFormat(r,s.toString()));e.value=this.converter.toInternalFormat(r,s.toString())}}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(rS))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),ff=(()=>{class i{traverser;dataTypeMapper;registry={};constructor(e,t){this.traverser=e,this.dataTypeMapper=t,this.addMapper("data-type-unit-converter",t)}addMapper(e,t){this.registry[e]=t}map(e,t,r){const o=this?.registry[t]??null;o&&this.traverser.traverse(e,o,r)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(nS),n.\u0275\u0275inject(oS))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const M9={module:"",query:{},statistic:{id:"",data:{}},loading:!1};let aS=(()=>{class i extends df{fetchGQL;formatter;seriesMapper;internalState=(0,M.deepClone)(M9);store=new S.BehaviorSubject(this.internalState);defaultOptions={};constructor(e,t,r){super(e),this.fetchGQL=e,this.formatter=t,this.seriesMapper=r,this.state$=this.store.asObservable(),this.statistic$=this.state$.pipe((0,v.map)(o=>o.statistic),(0,v.distinctUntilChanged)()),this.loading$=this.state$.pipe((0,v.map)(o=>o.loading),(0,v.distinctUntilChanged)())}setDefaultOptions(e){this.defaultOptions=e}getDataSource(){return this.internalState.dataSource}addNewState(e){if(!e.metadata||!e.metadata.dataType)return;this.injectDefaultValues(e);const t=this.buildCharDataSource(e);this.updateState({...this.internalState,statistic:e,dataSource:t,loading:!1})}injectDefaultValues(e){e.metadata.chartOptions?Object.keys(this.defaultOptions).forEach(t=>{t in e.metadata.chartOptions||(e.metadata.chartOptions[t]=this.defaultOptions[t])}):e.metadata.chartOptions=(0,M.deepClone)(this.defaultOptions)}buildCharDataSource(e){const t=e.metadata.dataType||"";let r=null;const o=e.metadata&&e.metadata.digits||null;return null!==o&&(r={digits:o}),{options:e.metadata.chartOptions||{},getResults:()=>(0,S.of)(this.buildSeriesResult(e)).pipe((0,v.shareReplay)(1)),tickFormatting:s=>this.formatter.toUserFormat(t,s,r),tooltipFormatting:s=>this.formatter.toUserFormat(t,s,r)}}buildSeriesResult(e){const t=e.metadata.dataType||"",r={},o=e.data.singleSeries||null;o&&(r.singleSeries=o);const s=e.data.multiSeries||null;return s&&(r.multiSeries=s),this.seriesMapper.map(r,"data-type-unit-converter",{dataType:t}),r}updateState(e){super.updateState(e)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(ur),n.\u0275\u0275inject(ut),n.\u0275\u0275inject(ff))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),sS=(()=>{class i{fetchGQL;formatter;seriesMapper;constructor(e,t,r){this.fetchGQL=e,this.formatter=t,this.seriesMapper=r}create(){return new aS(this.fetchGQL,this.formatter,this.seriesMapper)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(ur),n.\u0275\u0275inject(ut),n.\u0275\u0275inject(ff))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function S9(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"option",18),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&i){const e=a.$implicit,t=n.\u0275\u0275nextContext(3);n.\u0275\u0275property("value",t.getKey(e)),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",t.language.getFieldLabel(e.labelKey)," ")}}function D9(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"div",13)(1,"div",14)(2,"form",15)(3,"select",16),n.\u0275\u0275listener("ngModelChange",function(){n.\u0275\u0275restoreView(e);const r=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(r.onChartSelect())})("ngModelChange",function(r){n.\u0275\u0275restoreView(e);const o=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(o.selectedChart=r)}),n.\u0275\u0275template(4,S9,2,2,"option",17),n.\u0275\u0275elementEnd()()()()}if(2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(3),n.\u0275\u0275property("ngModel",e.selectedChart),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",e.configuredCharts)}}function w9(i,a){if(1&i&&n.\u0275\u0275element(0,"scrm-chart",20),2&i){const e=n.\u0275\u0275nextContext(3);n.\u0275\u0275property("dataSource",e.dataSource)("type",e.chartType)}}function E9(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,w9,1,2,"scrm-chart",19),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.dataSource&&e.chartType)}}function x9(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",21),n.\u0275\u0275element(1,"scrm-loading-spinner",22),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275classProp("m-5",!e.dataSource),n.\u0275\u0275advance(1),n.\u0275\u0275property("overlay",!0)}}function F9(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"p",23),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",e.language.getFieldLabel(e.messageLabelKey)," ")}}function I9(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"scrm-widget-panel",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5),n.\u0275\u0275template(5,D9,5,2,"div",6),n.\u0275\u0275elementStart(6,"div",7)(7,"div",8)(8,"div",9),n.\u0275\u0275template(9,E9,2,1,"ng-container",10),n.\u0275\u0275template(10,x9,2,3,"div",11),n.\u0275\u0275template(11,F9,2,1,"p",12),n.\u0275\u0275elementEnd()()()()()()()()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275property("title",e.title),n.\u0275\u0275advance(5),n.\u0275\u0275property("ngIf",e.isConfigured&&e.chartOptions.toggle),n.\u0275\u0275advance(4),n.\u0275\u0275property("ngIf",e.selectedChart&&!e.loading),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.loading),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!(e.loading||e.isConfigured()&&e.dataSource))}}let cS=(()=>{class i extends io{language;factory;charts={};titleLabelKey="LBL_INSIGHTS";title="";messageLabelKey="LBL_CHART_NOT_FOUND";selectedChart="";chartType="";dataSource;vm$;loading$;appStrings$;loading=!0;subs=[];constructor(e,t){super(),this.language=e,this.factory=t,this.language=e??{appStrings$:(0,S.of)({})}}ngOnInit(){if(this.appStrings$=this.language?.appStrings$??(0,S.of)({}),!1===this.validateConfig())return;this.context$&&this.subs.push(this.context$.subscribe(r=>{this.context=r,Object.keys(this.charts).forEach(o=>{this.charts[o].store.context=r})}));const e=this.config.options,t=e.charts;e.defaultChart&&(this.selectedChart=e.defaultChart||""),this.setupCharts(t),this.setHeaderTitle(e),this.reloadSelectedChart(),this.setupLoading(),this.setupVM(),this.setupReload()}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}get configuredCharts(){return this.chartOptions.charts||[]}get chartOptions(){return this.config.options||{}}isConfigured(){return!(!this.config.options.charts||!this.config.options.charts.length)}getLabelKey(e){return e.statistic.metadata&&e.statistic.metadata.labelKey||this.charts[e.query.key].labelKey}getKey(e){return e.chartKey||e.statisticsType||""}validateConfig(){if(!this.context||!this.context.module)return this.messageLabelKey="LBL_BAD_CONFIG_BAD_CONTEXT",!1;if(!this.config)return this.messageLabelKey="LBL_BAD_CONFIG_NO_CONFIG",!1;const e=this.config.options;return!!(e&&e.charts&&e.charts.length)||(this.messageLabelKey="LBL_BAD_CONFIG_NO_STATISTICS_KEY",!1)}setupCharts(e){this.selectedChart="",e.forEach(t=>{const r=this.getKey(t);r&&(this.selectedChart||(this.selectedChart=r||"",this.chartType=t.chartType),this.buildChartInfo(r,t),this.initChartStore(r,t))})}buildChartInfo(e,t){this.charts[e]={key:e,labelKey:t.labelKey||"",chartType:t.chartType,statisticsType:t.statisticsType,store:this.factory.create(),reload:!0}}initChartStore(e,t){this.charts[e].store.init(this.context.module,{key:t.statisticsType,context:{...this.context}},!1),this.charts[e].store.setDefaultOptions(t.chartOptions)}setHeaderTitle(e){if(this.config.labelKey&&(this.titleLabelKey=this.config.labelKey),e.headerTitle){if(!this.charts||!this.charts[this.selectedChart]||!this.charts[this.selectedChart].labelKey)return;this.titleLabelKey=this.charts[this.selectedChart].labelKey}this.title=this.language.getFieldLabel(this.titleLabelKey)}onChartSelect(){this.dataSource=null,this.chartType=this.charts[this.selectedChart].chartType,this.reloadSelectedChart(!1)}setupVM(){const e=[];Object.keys(this.charts).forEach(r=>e.push(this.charts[r].store.state$));let t=(0,S.of)([]);if(e.length<1)t=(0,S.of)([]);else if(1===e.length)t=e[0].pipe((0,v.map)(r=>[r]));else{let o,r=null;[r,...o]=e,t=r.pipe((0,S.combineLatestWith)(o))}this.vm$=t.pipe((0,S.combineLatestWith)(this.language.appStrings$),(0,v.map)(([r,o])=>({statistics:this.mapChartData(r),appStrings:o})))}mapChartData(e){const t={};return e.forEach(r=>{r.query.key&&(t[r.query.key]=r,this.charts[r.query.key].labelKey=this.getLabelKey(r))}),t}setupReload(){this.config.reload$&&this.subs.push(this.config.reload$.subscribe(()=>{!0!==this.loading&&(this.loading=!0,Object.keys(this.charts).forEach(e=>{this.charts[e].reload=!0}),this.reloadSelectedChart())}))}setupLoading(){const e=[];Object.keys(this.charts).forEach(r=>e.push(this.charts[r].store.loading$));let t=(0,S.of)([]);if(e.length<1)t=(0,S.of)([]);else if(1===e.length)t=e[0].pipe((0,v.map)(r=>[r]));else{let o,r=null;[r,...o]=e,t=r.pipe((0,S.combineLatestWith)(o))}this.loading$=t.pipe((0,v.map)(r=>{if(!r||r.length<1)return this.loading=!1,!1;let o=!1;return r.forEach(s=>{o=o||s}),this.loading=o,o})),this.subs.push(this.loading$.subscribe())}reloadSelectedChart(e=!1){!this.charts||!this.charts[this.selectedChart]||!this.charts[this.selectedChart].store||this.charts[this.selectedChart].store.load(e=e&&!this.charts[this.selectedChart].reload).pipe((0,v.take)(1),(0,v.tap)(()=>{this.dataSource=this.charts[this.selectedChart]?.store?.getDataSource()??null,this.charts[this.selectedChart].reload=!1})).subscribe()}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject($e),n.\u0275\u0275directiveInject(sS))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["chart-sidebar-widget"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:2,vars:3,consts:[[3,"title",4,"ngIf"],[3,"title"],["widget-body",""],[1,"widget-background","chart-sidebar-widget"],[1,"mb-2","ml-1","mr-1"],[1,"container-fluid"],["class","row",4,"ngIf"],[1,"row","mt-3","chart-widget"],[1,"col","pl-0","pr-0","pb-1","pt-1","d-flex","justify-content-center"],[1,"flex-grow-1"],[4,"ngIf"],["class","chart-loading",3,"m-5",4,"ngIf"],["class","lead text-center pt-3",4,"ngIf"],[1,"row"],[1,"col","pr-2","pl-2"],[1,"login-form","mb-0","mt-2","w-100"],["name","chart",1,"m-0","w-100",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[3,"dataSource","type",4,"ngIf"],[3,"dataSource","type"],[1,"chart-loading"],[3,"overlay"],[1,"lead","text-center","pt-3"]],template:function(t,r){1&t&&(n.\u0275\u0275template(0,I9,12,5,"scrm-widget-panel",0),n.\u0275\u0275pipe(1,"async")),2&t&&n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(1,1,r.vm$))},dependencies:[F.NgForOf,F.NgIf,as,De.\u0275NgNoValidate,De.NgSelectOption,De.\u0275NgSelectMultipleOption,De.SelectControlValueAccessor,De.NgControlStatus,De.NgControlStatusGroup,De.NgModel,De.NgForm,A0,Ar,F.AsyncPipe],encapsulation:2})}return i})(),lS=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Lr,De.FormsModule,T0,Tr]})}return i})(),uS=(()=>{class i{listStoreFactory;recordList;viewContext;constructor(e){this.listStoreFactory=e,this.recordList=e.create()}clear(){this.recordList.clear(),this.recordList=null}clearAuthBased(){this.recordList.clearAuthBased()}init(e){this.recordList.init("history",!1,"list_max_entries_per_subpanel"),this.initViewContext(e)}load(e=!0){return this.recordList.load(e)}initSearchCriteria(e,t){this.recordList.criteria={preset:{type:"history-timeline",params:{parentModule:this.viewContext.module,parentId:this.viewContext.id,offset:e,limit:t}}}}initViewContext(e){this.viewContext=e}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Gi))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),pf=(()=>{class i{listStoreFactory;constructor(e){this.listStoreFactory=e}create(){return new uS(this.listStoreFactory)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Gi))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),mf=(()=>{class i{historyTimelineStoreFactory;loading=!1;cache=[];dataStream=new S.BehaviorSubject(this.cache);dataStream$=this.dataStream.asObservable();defaultPageSize=10;store;constructor(e){this.historyTimelineStoreFactory=e}init(e){this.store=this.historyTimelineStoreFactory.create(),this.store.init(e)}fetchTimelineEntries(e){if(!0!==this.loading)return!0===e&&(this.cache.length=0),this.store.initSearchCriteria(this.cache.length,this.defaultPageSize),this.loading=!0,this.store.load(!1).pipe((0,v.take)(1)).subscribe(t=>{this.loading=!1;const r=t.records;(0,M.emptyObject)(r)||Object.keys(r).forEach(o=>{this.cache.push(this.buildTimelineEntry(r[o]))}),this.dataStream.next([...this.cache])}),this.dataStream$}getActivityGridColor(e){return{calls:"yellow",tasks:"green",meetings:"blue",notes:"orange",audit:"purple",history:"purple"}[e]||"yellow"}buildTimelineEntry(e){const t=e.module;let r=e.attributes.module_name;"audit"===t&&(r="History");const s={module:t,icon:r,color:this.getActivityGridColor(e.module),title:{type:"varchar",value:e.attributes.name},user:{type:"varchar",value:e.attributes.assigned_user_name.user_name},date:{type:"datetime",value:e.attributes.date_end},record:e};return"audit"===t&&(s.description={type:"html",value:e.attributes.description}),s}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(pf))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),dS=(()=>{class i{historyTimelineStoreFactory;constructor(e){this.historyTimelineStoreFactory=e}create(){return new mf(this.historyTimelineStoreFactory)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(pf))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function A9(i,a){1&i&&(n.\u0275\u0275elementStart(0,"div",8),n.\u0275\u0275element(1,"scrm-loading-spinner",9),n.\u0275\u0275elementEnd()),2&i&&(n.\u0275\u0275advance(1),n.\u0275\u0275property("overlay",!0))}function T9(i,a){1&i&&n.\u0275\u0275element(0,"scrm-chart-message-area",10)}function N9(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"a",30),n.\u0275\u0275element(1,"scrm-field",27),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext(2).$implicit,t=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("routerLink",t.redirectLink(e.record.module,e.record.id)),n.\u0275\u0275advance(1),n.\u0275\u0275property("type",e.title.type)("field",e.title)("record",e.record)}}function L9(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"a"),n.\u0275\u0275element(1,"scrm-field",27),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext(2).$implicit;n.\u0275\u0275advance(1),n.\u0275\u0275property("type",e.title.type)("field",e.title)("record",e.record)}}function O9(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",31)(1,"small",26),n.\u0275\u0275element(2,"scrm-field",32),n.\u0275\u0275elementEnd()()),2&i){const e=n.\u0275\u0275nextContext(2).$implicit;n.\u0275\u0275advance(2),n.\u0275\u0275property("type",e.description.type)("field",e.description)("record",e.record)}}function B9(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div")(1,"div",12)(2,"div",13)(3,"div",14),n.\u0275\u0275element(4,"scrm-image",15),n.\u0275\u0275elementEnd()()(),n.\u0275\u0275elementStart(5,"div",12)(6,"div",16),n.\u0275\u0275element(7,"div",17),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(8,"div",18)(9,"div",19)(10,"div",20)(11,"p",21),n.\u0275\u0275template(12,N9,2,4,"a",22),n.\u0275\u0275template(13,L9,2,3,"a",23),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(14,O9,3,3,"div",24),n.\u0275\u0275elementStart(15,"div",25)(16,"small",26),n.\u0275\u0275element(17,"scrm-field",27),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(18,"div",28)(19,"small",29),n.\u0275\u0275element(20,"scrm-field",27),n.\u0275\u0275elementEnd()()()()()()),2&i){const e=n.\u0275\u0275nextContext().$implicit;n.\u0275\u0275classMapInterpolate1("d-flex flex-row m-2 history-timeline-entry entry-",e.color,""),n.\u0275\u0275advance(4),n.\u0275\u0275property("image",e.icon),n.\u0275\u0275advance(8),n.\u0275\u0275property("ngIf","audit"!==e.record.module),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf","audit"===e.record.module),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.description),n.\u0275\u0275advance(3),n.\u0275\u0275property("type",e.user.type)("field",e.user)("record",e.record),n.\u0275\u0275advance(3),n.\u0275\u0275property("type",e.date.type)("field",e.date)("record",e.record)}}function R9(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div"),n.\u0275\u0275template(1,B9,21,13,"div",11),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext().ngIf;n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.length>0)}}const j9=function(i){return[i]};function k9(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"div",2)(1,"div",3),n.\u0275\u0275template(2,A9,2,1,"div",4),n.\u0275\u0275elementStart(3,"cdk-virtual-scroll-viewport",5),n.\u0275\u0275listener("scroll",function(){n.\u0275\u0275restoreView(e);const r=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(r.onScroll())}),n.\u0275\u0275template(4,T9,1,0,"scrm-chart-message-area",6),n.\u0275\u0275template(5,R9,2,1,"div",7),n.\u0275\u0275elementEnd()()()}if(2&i){const e=a.ngIf,t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",null==t.adapter?null:t.adapter.loading),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction1(4,j9,e.length<=0?"history-timeline-viewport-no-data":"history-timeline-viewport")),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!(null!=t.adapter&&t.adapter.loading)&&e.length<=0),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",e)}}let fS=(()=>{class i extends io{historyTimelineAdapterFactory;languageStore;navigation;virtualScroll;adapter;subscription=new S.Subscription;constructor(e,t,r){super(),this.historyTimelineAdapterFactory=e,this.languageStore=t,this.navigation=r}ngOnInit(){this.adapter=this.historyTimelineAdapterFactory.create(),this.adapter.init(this.context)}ngAfterViewInit(){const e=[];e.push(this.config.reload$),e.push(this.config.subpanelReload$);const t=["history","activities"],o=e[0].pipe((0,S.combineLatestWith)(...e),(0,v.map)(([s,c={}])=>s||!!c&&t.some(l=>!!c[l]))).pipe((0,v.debounce)(()=>(0,S.timer)(1e3)));this.subscription.add(o.subscribe(s=>{s&&this.adapter.fetchTimelineEntries(!0)}))}ngOnDestroy(){this.subscription.unsubscribe()}getHeaderLabel(){return this.languageStore.getFieldLabel("LBL_QUICK_HISTORY")}onScroll(){if(!this.adapter)return;const e=this.virtualScroll.measureScrollOffset("bottom");0===(0,ie.floor)(e)&&this.adapter.fetchTimelineEntries(!1)}redirectLink(e,t){if("audit"!==e)return this.navigation.getRecordRouterLink(e,t)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(dS),n.\u0275\u0275directiveInject($e),n.\u0275\u0275directiveInject(Rn))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-history-timeline-widget"]],viewQuery:function(t,r){if(1&t&&n.\u0275\u0275viewQuery(jt.N7,5),2&t){let o;n.\u0275\u0275queryRefresh(o=n.\u0275\u0275loadQuery())&&(r.virtualScroll=o.first)}},features:[n.\u0275\u0275ProvidersFeature([mf]),n.\u0275\u0275InheritDefinitionFeature],decls:3,vars:4,consts:[[3,"title"],["widget-body","",4,"ngIf"],["widget-body",""],[1,"widget-background","history-timeline","p-2","pt-2"],["class","d-flex record-thread-loading justify-content-center",4,"ngIf"],["itemSize","100",1,"history-timeline-viewport",3,"ngClass","scroll"],["labelKey","LBL_NO_DATA",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"d-flex","record-thread-loading","justify-content-center"],[3,"overlay"],["labelKey","LBL_NO_DATA"],[3,"class",4,"ngIf"],[1,""],[1,"circle"],[1,"d-flex","justify-content-center","align-items-center","h-100","history-timeline-image"],[3,"image"],[1,"d-flex","justify-content-center","h-100"],[1,"connector","mt-3"],[1,"flex-grow-1"],[1,"card"],[1,"card-body","p-1","pr-2","pl-2"],[1,"card-title","text-break","history-timeline-entry-title"],[3,"routerLink",4,"ngIf"],[4,"ngIf"],["class","card-text history-timeline-entry-description",4,"ngIf"],[1,"card-text","history-timeline-entry-user","text-uppercase"],[1,"text-break"],["mode","list",3,"type","field","record"],[1,"card-text","text-break","history-timeline-entry-date"],[1,"font-italic"],[3,"routerLink"],[1,"card-text","history-timeline-entry-description"],["mode","detail",3,"type","field","record"]],template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"scrm-widget-panel",0),n.\u0275\u0275template(1,k9,6,6,"div",1),n.\u0275\u0275pipe(2,"async"),n.\u0275\u0275elementEnd()),2&t&&(n.\u0275\u0275property("title",r.getHeaderLabel()),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(2,2,null==r.adapter?null:r.adapter.dataStream$)))},dependencies:[F.NgClass,F.NgForOf,F.NgIf,jt.xd,jt.N7,wn,lr,as,Ar,la,Rt.RouterLink,F.AsyncPipe],encapsulation:2})}return i})(),pS=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,jt.Cl,Mn,Jn,Lr,Tr,Ut,ua,Rt.RouterModule]})}return i})();function P9(i,a){1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"div",3),n.\u0275\u0275element(2,"scrm-label",4),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd())}function $9(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275element(1,"scrm-record-thread",5),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("config",e.recordThreadConfig)}}let mS=(()=>{class i extends io{language;sytemConfig;panelMode="none";options;recordThreadConfig;filters$;presetFields$;subs=[];constructor(e,t){super(),this.language=e,this.sytemConfig=t}ngOnInit(){this.options=(this.config.options||{}).recordThread||null,this.options&&(this.initPanelMode(),this.initFilters$(),this.initPresetFields$(),this.context$&&this.context$.subscribe()&&this.subs.push(this.context$.subscribe(t=>{this.context=t})),this.recordThreadConfig=this.getConfig())}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}getHeaderLabel(){return this.getLabel(this.config.labelKey)||""}getLabel(e){return this.language.getFieldLabel(e,(this.context||{}).module||"")}getConfig(){const e={filters$:this.filters$,presetFields$:this.presetFields$,module:this.options.module,klass:this.options.class||"",maxListHeight:this.options.maxListHeight??350,direction:this.options.direction||"asc",create:!!this.options.create,itemConfig:{collapsible:this.options.item.collapsible||!1,collapseLimit:this.options.item.collapseLimit||null,klass:this.options.item.itemClass||"",dynamicClass:this.options.item.dynamicClass||[],metadata:{}},createConfig:{collapsible:!1,metadata:{}}};return this.setupItemMetadata(e.itemConfig.metadata,this.options.item.layout),this.setupItemMetadata(e.createConfig.metadata,this.options.create.layout),e}setupItemMetadata(e,t){t&&t.header&&(e.headerLayout=(0,M.deepClone)(t.header)),t&&t.body&&(e.bodyLayout=(0,M.deepClone)(t.body)),t&&t.actions&&(e.actions=(0,M.deepClone)(t.actions)),t&&t.fields&&(e.fields=(0,M.deepClone)(t.fields)),null!==(t?.collapseActions??null)&&(e.collapseActions=t?.collapseActions)}initPanelMode(){const t=this.sytemConfig.getConfigValue("ui")?.widget?.allowCollapse??null,r=this?.config?.allowCollapse??null;let o="none";null!==t&&((0,M.isTrue)(t)?o="collapsible":(0,M.isFalse)(t)&&(o="none")),null!==r&&((0,M.isTrue)(r)?o="collapsible":(0,M.isFalse)(r)&&(o="none")),this.panelMode=o}initFilters$(){if(!this.options||!this.options.filters||!this.context$)return;const e=this.options.filters.parentFilters||{};let t=(0,S.of)({}).pipe((0,v.shareReplay)());Object.keys(e).length>0&&(t=this.context$.pipe((0,v.filter)(r=>{const o=r&&r.record||{};return!(!o.attributes||!Object.keys(o.attributes).length)}))),this.filters$=t.pipe((0,v.map)(r=>{const o={filters:{}};return this.initParentFilters(r,o),o.filters={...o.filters,...this.options.filters.static||{}},this.options.filters.orderBy&&(o.orderBy=this.options.filters.orderBy),this.options.filters.sortOrder&&(o.sortOrder=this.options.filters.sortOrder),o}),(0,v.distinctUntilChanged)())}initPresetFields$(){!this.options||!this.options.create||!this.options.create.presetFields||!this.context$||(this.presetFields$=this.context$.pipe((0,v.map)(e=>({...this.initParentValues(e),...this.options.create.presetFields.static||{}})),(0,v.distinctUntilChanged)()))}initParentFilters(e,t){const r=this.options.filters.parentFilters||{};!e||!e.record||!r||Object.keys(r).forEach(o=>{const c=e.record.attributes[o]||"";c&&(t.filters[r[o]]={field:r,operator:"=",values:[c]})})}initParentValues(e){const t=this.options.create.presetFields.parentValues||{};if(!e||!e.record||!t)return;const r={};return Object.keys(t).forEach(o=>{const c=e.record.attributes[o]||"";c&&(r[t[o]]=c)}),r}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject($e),n.\u0275\u0275directiveInject(vt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-record-thread-sidebar-widget"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:4,vars:4,consts:[[3,"mode","title"],["widget-body","",1,"record-thread-sidebar-widget"],[4,"ngIf"],[1,"p-3","widget-message"],["labelKey","LBL_BAD_CONFIG"],[3,"config"]],template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"scrm-widget-panel",0)(1,"div",1),n.\u0275\u0275template(2,P9,3,0,"ng-container",2),n.\u0275\u0275template(3,$9,2,1,"ng-container",2),n.\u0275\u0275elementEnd()()),2&t&&(n.\u0275\u0275property("mode",r.panelMode)("title",r.getHeaderLabel()),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",!r.options),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.options))},dependencies:[F.NgIf,as,zt,Ld],encapsulation:2})}return i})(),U9=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Jn,Lr,Ut,Ud,nl]})}return i})(),gS=(()=>{class i extends io{language;options;subs=[];constructor(e){super(),this.language=e}ngOnInit(){this.options=(this.config.options||{}).sidebarStatistic||null,this.context$&&this.subs.push(this.context$.subscribe(t=>{this.context=t}))}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}getHeaderLabel(){return this.getLabel(this.config.labelKey)||""}getLabel(e){return this.language.getFieldLabel(e,(this.context||{}).module||"")}getGridConfig(){return{rowClass:"statistics-sidebar-widget-row",columnClass:"statistics-sidebar-widget-col",layout:this.options,widgetConfig:{reload$:this.config.reload$},queryArgs:{module:this.context.module,context:this.context,params:{}}}}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject($e))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-statistics-sidebar-widget"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:3,vars:2,consts:[[3,"title"],["widget-body","",1,"p-3"],[3,"config"]],template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"scrm-widget-panel",0)(1,"div",1),n.\u0275\u0275element(2,"scrm-grid-widget",2),n.\u0275\u0275elementEnd()()),2&t&&(n.\u0275\u0275property("title",r.getHeaderLabel()),n.\u0275\u0275advance(2),n.\u0275\u0275property("config",r.getGridConfig()))},dependencies:[as,Ed],encapsulation:2})}return i})(),hS=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Jn,qr,Lr,xd,Ut]})}return i})();const vS=[pS,lS,hS],gf={"history-timeline":fS,chart:cS,statistics:gS,"record-thread":mS};let _S=(()=>{class i extends M.BaseComponentRegistry{constructor(){super()}initDefault(){Object.keys(gf).forEach(e=>{this.register("default",e,gf[e])})}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function V9(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",2)(1,"div",3),n.\u0275\u0275element(2,"scrm-label",4),n.\u0275\u0275elementEnd()()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(2),n.\u0275\u0275property("labelKey",e.getErrorMessage())}}const z9=function(i,a,e){return{config:i,context:a,context$:e}};function G9(i,a){if(1&i&&n.\u0275\u0275element(0,"ndc-dynamic",5),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275property("ndcDynamicComponent",e.componentType)("ndcDynamicInputs",n.\u0275\u0275pureFunction3(2,z9,e.config,e.context,e.context$))}}let hf=(()=>{class i extends io{registry;type;constructor(e){super(),this.registry=e}get componentType(){return this.registry.get(this.context.module??"default",this.type)}getErrorMessage(){return this.type&&this.config?this.componentType?"LBL_BAD_CONFIG":"LBL_WIDGET_NOT_FOUND":"LBL_CONFIG_NO_CONFIG"}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(_S))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-sidebar-widget"]],inputs:{type:"type"},features:[n.\u0275\u0275InheritDefinitionFeature],decls:2,vars:2,consts:[["class","d-flex mb-4 mt-4 justify-content-center",4,"ngIf"],[3,"ndcDynamicComponent","ndcDynamicInputs",4,"ngIf"],[1,"d-flex","mb-4","mt-4","justify-content-center"],[1,"lead"],[3,"labelKey"],[3,"ndcDynamicComponent","ndcDynamicInputs"]],template:function(t,r){1&t&&(n.\u0275\u0275template(0,V9,3,1,"div",0),n.\u0275\u0275template(1,G9,1,6,"ndc-dynamic",1)),2&t&&(n.\u0275\u0275property("ngIf",!(r.type&&r.config&&r.componentType)),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.type&&r.config&&r.componentType))},dependencies:[F.NgIf,Pt,Bt,zt],encapsulation:2})}return i})(),vf=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,vS,gt,Ut]})}return i})(),yS=(()=>{class i extends dr{store;language;actionManager;asyncActionService;message;confirmation;selectModalService;metadata;constructor(e,t,r,o,s,c,l,u){super(r,o,s,c,t,l,u),this.store=e,this.language=t,this.actionManager=r,this.asyncActionService=o,this.message=s,this.confirmation=c,this.selectModalService=l,this.metadata=u}getActions(e){return this.store.metadata$.pipe((0,S.combineLatestWith)(this.language.vm$,this.store.criteria$),(0,v.map)(([t,r,o])=>t?this.parseModeActions(t.top_buttons,"list"):[]))}buildActionData(e,t){return{subpanelMeta:this.store?.metadata,module:e.module||this.store.metadata?.module,parentModule:this.store.parentModule,parentId:this.store.parentId,store:this.store,action:e}}getMode(){return"list"}getModuleName(e){return this.store?.metadata?.module}reload(e,t,r){this.store.load(!1).pipe((0,v.take)(1)).subscribe()}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Fa),n.\u0275\u0275inject($e),n.\u0275\u0275inject(cs),n.\u0275\u0275inject(Yt),n.\u0275\u0275inject(dt),n.\u0275\u0275inject(Nn),n.\u0275\u0275inject(kn),n.\u0275\u0275inject(bt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),bS=(()=>{class i{language;actionManager;asyncActionService;message;confimation;selectModalService;metadata;constructor(e,t,r,o,s,c,l){this.language=e,this.actionManager=t,this.asyncActionService=r,this.message=o,this.confimation=s,this.selectModalService=c,this.metadata=l}create(e){return new yS(e,this.language,this.actionManager,this.asyncActionService,this.message,this.confimation,this.selectModalService,this.metadata)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject($e),n.\u0275\u0275inject(cs),n.\u0275\u0275inject(Yt),n.\u0275\u0275inject(dt),n.\u0275\u0275inject(Nn),n.\u0275\u0275inject(kn),n.\u0275\u0275inject(bt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),CS=(()=>{class i{store;constructor(e){this.store=e}getConfig(){return{panelMode:"collapsible",collapseOnSearch:!0,savedFilterEdit:!1,module:this.store.recordList.getModule(),displayHeader:!1,filter$:this.store.recordList.openFilter$,savedFilters$:this.store.filterList.records$,searchFields$:this.store.searchMetadata$.pipe((0,v.map)(e=>{if(this.store.metadata.searchdefs)return this.store.metadata.searchdefs;if(!e)return{};let t="advanced";return e?.layout?.advanced||(t="basic"),e?.layout[t]})),listFields:[],onClose:()=>{},onSearch:()=>{this.store.searchFilter()},updateFilter:(e,t=!0)=>{const r={};r[e.key]=e,this.store.setFilters(r,t)},resetFilter:e=>{this.store.resetFilters(e)},addSavedFilter:e=>{},removeSavedFilter:e=>{},setOpenFilter:e=>{}}}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Fa))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),MS=(()=>{class i{create(e){return new CS(e)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();class SS extends M.ActionHandler{checkRecordAccess(a,e=[]){const r=(a.record??{}).acls??[];return!(!r||!r.length)&&this.checkAccess(a.action??null,r,e)}}let DS=(()=>{class i extends SS{key="async-process";modes=M.ALL_VIEW_MODES;constructor(){super()}run(e){}shouldDisplay(e){const t=e?.action?.acl??[];return!t.length||this.checkRecordAccess(e,t)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),_f=(()=>{class i extends vi{async;constructor(e){super(),this.async=e,e.modes.forEach(t=>this.actions[t][e.key]=e)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(DS))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),wS=(()=>{class i extends dr{store;actionManager;asyncActionService;message;confirmation;language;selectModalService;metadata;constructor(e,t,r,o,s,c,l,u){super(t,r,o,s,c,l,u),this.store=e,this.actionManager=t,this.asyncActionService=r,this.message=o,this.confirmation=s,this.language=c,this.selectModalService=l,this.metadata=u}getActions(e=null){return this.store.metadata$.pipe((0,v.map)(t=>t.lineActions)).pipe((0,S.combineLatestWith)((0,S.of)("list").pipe((0,v.shareReplay)())),(0,v.map)(([t,r])=>this.parseModeActions(t,r,e)))}buildActionData(e,t){return{record:t&&t.record||null,store:this.store,action:e}}getMode(){return"list"}getModuleName(e){return this.store.metadata.module}reload(e,t,r){this.store.load(!1).pipe((0,v.take)(1)).subscribe(),this.store.loadAllStatistics(!1).pipe((0,v.take)(1)).subscribe()}buildActionInput(e,t,r,o=null){const s=this.store.metadata,c=s.collection_list||null,l=o&&o.module||r;let u=s.get_subpanel_data;return c&&c[l]&&c[l].get_subpanel_data&&(u=c[l].get_subpanel_data),u&&e&&e.params&&e.params.linkFieldMapping&&Object.keys(e.params.linkFieldMapping).some(d=>{if(u.includes(d))return u=e.params.linkFieldMapping[d],!0}),{action:t,module:r,id:o&&o.record&&o.record.id||"",payload:{baseModule:this.store.parentModule,baseRecordId:this.store.parentId,linkField:u,recordModule:l,relateModule:this.store.metadata.module,relateRecordId:o&&o.record&&o.record.id||""}}}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Fa),n.\u0275\u0275inject(_f),n.\u0275\u0275inject(Yt),n.\u0275\u0275inject(dt),n.\u0275\u0275inject(Nn),n.\u0275\u0275inject($e),n.\u0275\u0275inject(kn),n.\u0275\u0275inject(bt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),yf=(()=>{class i{actionManager;asyncActionService;message;confirmation;language;selectModalService;metadata;constructor(e,t,r,o,s,c,l){this.actionManager=e,this.asyncActionService=t,this.message=r,this.confirmation=o,this.language=s,this.selectModalService=c,this.metadata=l}create(e){return new wS(e,this.actionManager,this.asyncActionService,this.message,this.confirmation,this.language,this.selectModalService,this.metadata)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(_f),n.\u0275\u0275inject(Yt),n.\u0275\u0275inject(dt),n.\u0275\u0275inject(Nn),n.\u0275\u0275inject($e),n.\u0275\u0275inject(kn),n.\u0275\u0275inject(bt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),bf=(()=>{class i{store;lineActionsAdapterFactory;preferences;systemConfigs;constructor(e,t,r,o){this.store=e,this.lineActionsAdapterFactory=t,this.preferences=r,this.systemConfigs=o}getTable(){return{showHeader:!1,showFooter:!0,module:this.store.metadata.headerModule,columns:this.getColumns(),lineActions:this.getLineActions(),sort$:this.store.recordList.sort$,maxColumns$:(0,S.of)(5),loading$:this.store.recordList.loading$,dataSource:this.store.recordList,pagination:this.store.recordList,toggleRecordSelection:e=>{this.store.recordList.toggleSelection(e)},updateSorting:(e,t)=>{this.store.recordList.updateSorting(e,t);const r=this.store.parentModule,o=this.store.recordList.getModule();this.preferences.setUi(r,o+"-subpanel-sort",{orderBy:e,sortOrder:t})},maxListHeight:this.preferences.getUserPreference("subpanel_max_height")??this.systemConfigs.getConfigValue("subpanel_max_height"),paginationType:this.preferences.getUserPreference("subpanel_pagination_type")??this.systemConfigs.getConfigValue("subpanel_pagination_type"),loadMore:()=>{const e=this.preferences.getUserPreference("list_max_entries_per_subpanel")??this.systemConfigs.getConfigValue("list_max_entries_per_subpanel"),t=this.store.recordList.getPagination(),o=Number(t.pageSize||0)+Number(e);this.store.recordList.setPageSize(o),this.store.recordList.updatePagination(t.current)},allLoaded:()=>{const e=this.store.recordList.getPagination();return!!e&&(Number(e.pageLast)>=Number(e.total)||Number(e.pageSize)>=Number(e.total))}}}getColumns(){return this.store.metadata$.pipe((0,v.map)(e=>e.columns))}getLineActions(){return this.lineActionsAdapterFactory.create(this.store)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Fa),n.\u0275\u0275inject(yf),n.\u0275\u0275inject(qt),n.\u0275\u0275inject(vt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),ES=(()=>{class i{lineActionsAdapterFactory;preferences;systemConfigs;constructor(e,t,r){this.lineActionsAdapterFactory=e,this.preferences=t,this.systemConfigs=r}create(e){return new bf(e,this.lineActionsAdapterFactory,this.preferences,this.systemConfigs)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(yf),n.\u0275\u0275inject(qt),n.\u0275\u0275inject(vt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function W9(i,a){if(1&i&&n.\u0275\u0275element(0,"scrm-list-filter",7),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275property("config",e.filterConfig)}}let xS=(()=>{class i{actionManager;languages;tableAdapterFactory;preferences;systemConfigs;filterAdapterFactory;actionAdapterFactory;store;maxColumns$;onClose;filterConfig;closeButton;adapter;config$;tableConfig;filterAdapter;actionsAdapter;constructor(e,t,r,o,s,c,l){this.actionManager=e,this.languages=t,this.tableAdapterFactory=r,this.preferences=o,this.systemConfigs=s,this.filterAdapterFactory=c,this.actionAdapterFactory=l}ngOnInit(){if(this.buildAdapters(),this.maxColumns$&&(this.tableConfig.maxColumns$=this.maxColumns$),this.store?.metadata?.max_height&&(this.tableConfig.maxListHeight=this.store.metadata.max_height),!this.tableConfig?.maxListHeight){const o=this.systemConfigs.getConfigValue("ui")??{};this.tableConfig.maxListHeight=o.subpanel_max_height}this.tableConfig.paginationType=this?.store?.metadata?.pagination_type??this.tableConfig.paginationType;const e=this.store.parentModule,t=this.store.recordList.getModule(),r=this.preferences.getUi(e,t+"-subpanel-sort");r&&this.store.recordList.updateSorting(r.orderBy,r.sortOrder),this.closeButton={onClick:()=>{this.onClose&&this.onClose()}}}getActionContext(){return{module:this.store?.metadata?.module??""}}buildAdapters(){this.adapter=this.tableAdapterFactory.create(this.store),this.tableConfig=this.adapter.getTable(),this.filterAdapter=this.filterAdapterFactory.create(this.store),this.filterConfig=this.filterAdapter.getConfig(),this.actionsAdapter=this.actionAdapterFactory.create(this.store)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(cs),n.\u0275\u0275directiveInject($e),n.\u0275\u0275directiveInject(ES),n.\u0275\u0275directiveInject(qt),n.\u0275\u0275directiveInject(vt),n.\u0275\u0275directiveInject(MS),n.\u0275\u0275directiveInject(bS))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-subpanel"]],inputs:{store:"store",maxColumns$:"maxColumns$",onClose:"onClose",filterConfig:"filterConfig"},features:[n.\u0275\u0275ProvidersFeature([bf])],decls:9,vars:9,consts:[["mode","closable","bodyPadding","0",3,"title","close","klass"],["panel-icon-area","",1,"subpanel-icon","pl-1"],[3,"image"],["panel-header-button",""],["buttonClass","btn btn-sm btn-outline-light",3,"config","actionContext","actionLimitConfig"],["panel-body",""],[3,"config",4,"ngIf"],[3,"config"]],template:function(t,r){if(1&t&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"scrm-panel",0)(2,"span",1),n.\u0275\u0275element(3,"scrm-image",2),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(4,"span",3),n.\u0275\u0275element(5,"scrm-action-group-menu",4),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(6,"div",5),n.\u0275\u0275template(7,W9,1,1,"scrm-list-filter",6),n.\u0275\u0275element(8,"scrm-table",7),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementContainerEnd()),2&t){let o;n.\u0275\u0275advance(1),n.\u0275\u0275property("title",r.store.getTitle())("close",r.closeButton)("klass",null!==(o="subpanel-"+(null==r.store||null==r.store.metadata?null:r.store.metadata.name))&&void 0!==o?o:""),n.\u0275\u0275advance(2),n.\u0275\u0275property("image",r.store.getIcon()),n.\u0275\u0275advance(2),n.\u0275\u0275property("config",r.actionsAdapter)("actionContext",r.getActionContext())("actionLimitConfig","subpanelview_actions_limits"),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",r.store.showFilter),n.\u0275\u0275advance(1),n.\u0275\u0275property("config",r.tableConfig)}},dependencies:[F.NgIf,wn,Ea,ol,cl,xr],encapsulation:2})}return i})(),ul=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,pe.NgbModule,Mn,eo,Rt.RouterModule,Fr,al,ll,Ir]})}return i})();function K9(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275element(1,"scrm-image",12),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("image",e.toggleIcon()),n.\u0275\u0275attribute("aria-expanded",!1)}}function H9(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275element(1,"scrm-image",12),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("image",e.toggleIcon()),n.\u0275\u0275attribute("aria-expanded",!0)}}const Z9=function(i){return{"sub-panel-banner-button-active":i}};function q9(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"div",16),n.\u0275\u0275listener("click",function(){const o=n.\u0275\u0275restoreView(e).$implicit,s=n.\u0275\u0275nextContext(3);return n.\u0275\u0275resetView(s.showSubpanel(o.key,o.value))}),n.\u0275\u0275element(1,"scrm-grid-widget",17),n.\u0275\u0275elementEnd()}if(2&i){const e=a.$implicit,t=n.\u0275\u0275nextContext(3);n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction1(2,Z9,!0===e.value.show)),n.\u0275\u0275advance(1),n.\u0275\u0275property("config",t.getGridConfig(e.value))}}function J9(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",13)(1,"div",14),n.\u0275\u0275template(2,q9,2,4,"div",15),n.\u0275\u0275pipe(3,"keyvalue"),n.\u0275\u0275elementEnd()()),2&i){const e=n.\u0275\u0275nextContext().ngIf;n.\u0275\u0275advance(2),n.\u0275\u0275property("ngForOf",n.\u0275\u0275pipeBind1(3,1,e.subpanels))}}function Q9(i,a){if(1&i&&n.\u0275\u0275element(0,"scrm-subpanel",19),2&i){const e=n.\u0275\u0275nextContext().ngIf,t=n.\u0275\u0275nextContext().$implicit,r=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("maxColumns$",r.maxColumns$)("store",e)("filterConfig",r.filterConfig)("onClose",r.getCloseCallBack(t,e))}}function X9(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,Q9,1,4,"scrm-subpanel",18),n.\u0275\u0275elementContainerEnd()),2&i){const e=a.ngIf;n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.show)}}function Y9(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,X9,2,1,"ng-container",0),n.\u0275\u0275elementContainerEnd()),2&i){const e=a.$implicit,t=n.\u0275\u0275nextContext().ngIf;n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.subpanels[e])}}function e7(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"div",1,2)(3,"div",3)(4,"div",4)(5,"a",5),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(e);const r=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(r.toggleSubPanels())}),n.\u0275\u0275elementStart(6,"div",6),n.\u0275\u0275element(7,"scrm-label",7),n.\u0275\u0275template(8,K9,2,2,"ng-container",0),n.\u0275\u0275template(9,H9,2,2,"ng-container",0),n.\u0275\u0275elementEnd()()(),n.\u0275\u0275elementStart(10,"div",8)(11,"div",9),n.\u0275\u0275template(12,J9,4,3,"ng-template"),n.\u0275\u0275elementEnd()()()(),n.\u0275\u0275elementStart(13,"div",10),n.\u0275\u0275template(14,Y9,2,1,"ng-container",11),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()}if(2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(3),n.\u0275\u0275property("collapsed",e.isCollapsed()),n.\u0275\u0275advance(5),n.\u0275\u0275property("ngIf",e.isCollapsed()),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!e.isCollapsed()),n.\u0275\u0275advance(5),n.\u0275\u0275property("ngForOf",e.openSubpanels)}}let FS=(()=>{class i{languageStore;maxColumnCalculator;localStorage;preferences;config;isCollapsed=(0,n.signal)(!1);toggleIcon=(0,n.signal)("arrow_down_filled");maxColumns$;languages$=(0,S.of)({});vm$;openSubpanels=[];filterConfig;constructor(e,t,r,o){this.languageStore=e,this.maxColumnCalculator=t,this.localStorage=r,this.preferences=o,this.languages$=e?.vm$??(0,S.of)({})}ngOnInit(){const e=this?.config?.parentModule??"default";this.setCollapsed((0,M.isTrue)(this.preferences.getUi(e,"subpanel-container-collapse")??!1)),this.openSubpanels=this.preferences.getUi(e,"subpanel-container-open-subpanels")??[];const t=this.config?.subpanels$??(0,S.of)({});this.vm$=t.pipe((0,v.map)(r=>({subpanels:r})),(0,v.tap)(r=>{!r||!Object.keys(r).length||!this.openSubpanels||this.openSubpanels.length<1||this.openSubpanels.forEach(o=>{const s=r.subpanels[o];!s||s.show||(s.show=!0,s.load().pipe((0,v.take)(1)).subscribe())})})),this.maxColumns$=this.getMaxColumns()}getMaxColumns(){return this.maxColumnCalculator.getMaxColumns(this.config?.sidebarActive$??(0,S.of)(!1))}toggleSubPanels(){this.setCollapsed(!this.isCollapsed()),this.preferences.setUi(this?.config?.parentModule??"default","subpanel-container-collapse",this.isCollapsed())}showSubpanel(e,t){t.show=!t.show,t.show?(this.openSubpanels.includes(e)||this.openSubpanels.push(e),t.load().pipe((0,v.take)(1)).subscribe()):this.openSubpanels=this.openSubpanels.filter(o=>o!=e),this.preferences.setUi(this?.config?.parentModule??"default","subpanel-container-open-subpanels",this.openSubpanels)}getCloseCallBack(e,t){return()=>this.showSubpanel(e,t)}getGridConfig(e){if(!e.metadata||!e.metadata.insightWidget)return{layout:null};const t=e.getWidgetLayout();return t.rows.forEach(r=>{!r.cols||!r.cols.length||r.cols.forEach(o=>{if(!o.statistic)return;const s=e.getStatistic(o.statistic);s&&(o.store=s)})}),{rowClass:"statistics-sidebar-widget-row",columnClass:"statistics-sidebar-widget-col",layout:t,widgetConfig:{},queryArgs:{module:e.metadata.name,context:{module:e.parentModule,id:e.parentId},params:{subpanel:e.metadata.name}}}}setCollapsed(e){this.isCollapsed.set(e),this.setToggleIcon()}setToggleIcon(){this.toggleIcon.set(this.isCollapsed()?"arrow_up_filled":"arrow_down_filled")}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject($e),n.\u0275\u0275directiveInject(Mo),n.\u0275\u0275directiveInject(wr),n.\u0275\u0275directiveInject(qt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-subpanel-container"]],inputs:{config:"config"},features:[n.\u0275\u0275ProvidersFeature([Mo])],decls:2,vars:3,consts:[[4,"ngIf"],["ngbAccordion","","activeIds","sub-panel-buttons",1,"sub-panel-banner"],["accordion","ngbAccordion"],["ngbAccordionItem","","id","sub-panel-buttons",1,"card",3,"collapsed"],["ngbAccordionHeader","",1,"card-header"],[1,"clickable",3,"click"],[1,"d-flex","align-items-center","justify-content-between"],["labelKey","LBL_SELECT_SUBPANEL_BANNER"],["ngbAccordionCollapse",""],["ngbAccordionBody",""],["id","sub-panels"],[4,"ngFor","ngForOf"],["aria-controls","collapseShowSubPanels",1,"float-right",3,"image"],["id","collapseShowSubPanels"],[1,"row","insight-panel"],["class","col-xs-6 col-sm-3 col-md-2 insight-panel-card border-insight",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"col-xs-6","col-sm-3","col-md-2","insight-panel-card","border-insight",3,"ngClass","click"],[3,"config"],["class","sub-panel",3,"maxColumns$","store","filterConfig","onClose",4,"ngIf"],[1,"sub-panel",3,"maxColumns$","store","filterConfig","onClose"]],template:function(t,r){1&t&&(n.\u0275\u0275template(0,e7,15,4,"ng-container",0),n.\u0275\u0275pipe(1,"async")),2&t&&n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(1,1,r.vm$))},dependencies:[F.NgClass,F.NgForOf,F.NgIf,pe.NgbAccordionDirective,pe.NgbAccordionItem,pe.NgbAccordionHeader,pe.NgbAccordionBody,pe.NgbAccordionCollapse,wn,xS,Ed,zt,F.AsyncPipe,F.KeyValuePipe],encapsulation:2})}return i})(),IS=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,pe.NgbModule,Mn,Rt.RouterModule,ul,qr,Jn,xd,Ut]})}return i})();function t7(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",4),n.\u0275\u0275text(1),n.\u0275\u0275pipe(2,"uppercase"),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext().ngIf,t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",n.\u0275\u0275pipeBind1(2,1,e.appStrings[t.messageLabelKey]||"")," ")}}function n7(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275text(1),n.\u0275\u0275pipe(2,"uppercase"),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(3).$implicit,t=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",n.\u0275\u0275pipeBind1(2,1,t.getLabel(e.value.labelKey)),": ")}}function i7(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275text(1),n.\u0275\u0275pipe(2,"uppercase"),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(3).$implicit,t=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",n.\u0275\u0275pipeBind1(2,1,t.getLabel(e.value.labelKey))," ")}}function r7(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",9),n.\u0275\u0275template(1,n7,3,3,"ng-container",6),n.\u0275\u0275template(2,i7,3,3,"ng-container",6),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext(2).$implicit,t=n.\u0275\u0275nextContext().ngIf,r=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!r.isValueEmpty(t.statistics[e.key])),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.isValueEmpty(t.statistics[e.key]))}}function o7(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,r7,3,2,"div",8),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext().$implicit,t=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.value.labelKey&&t.getLabel(e.value.labelKey))}}function a7(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275element(1,"scrm-field",12),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(3).$implicit,t=n.\u0275\u0275nextContext().ngIf;n.\u0275\u0275advance(1),n.\u0275\u0275property("type",t.statistics[e.key].field.type)("field",t.statistics[e.key].field)}}function s7(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",11),n.\u0275\u0275template(1,a7,2,2,"ng-container",6),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext(2).$implicit,t=n.\u0275\u0275nextContext().ngIf,r=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!r.isValueEmpty(t.statistics[e.key])||!0!==e.value.hideValueIfEmpty)}}function c7(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,s7,2,1,"div",10),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext().$implicit,t=n.\u0275\u0275nextContext().ngIf;n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!t.statistics[e.key].loading&&t.statistics[e.key].field)}}function l7(i,a){1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275text(1," - "),n.\u0275\u0275elementContainerEnd())}function u7(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",13),n.\u0275\u0275element(1,"scrm-inline-loading-spinner"),n.\u0275\u0275template(2,l7,2,0,"ng-container",6),n.\u0275\u0275elementEnd()),2&i){const e=a.ngIf,t=n.\u0275\u0275nextContext().$implicit,r=n.\u0275\u0275nextContext().ngIf;n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",!(e||t.key&&r.statistics[t.key]))}}function d7(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",15),n.\u0275\u0275text(1),n.\u0275\u0275pipe(2,"uppercase"),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext(2).$implicit,t=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",n.\u0275\u0275pipeBind1(2,1,t.getLabel(e.value.endLabelKey))," ")}}function f7(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,d7,3,3,"div",14),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext().$implicit,t=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.value.endLabelKey&&t.getLabel(e.value.endLabelKey))}}function p7(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"div",5),n.\u0275\u0275template(2,o7,2,1,"ng-container",6),n.\u0275\u0275template(3,c7,2,1,"ng-container",6),n.\u0275\u0275template(4,u7,3,1,"div",7),n.\u0275\u0275pipe(5,"async"),n.\u0275\u0275template(6,f7,2,1,"ng-container",6),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()),2&i){const e=a.$implicit,t=n.\u0275\u0275nextContext().ngIf,r=n.\u0275\u0275nextContext();n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",!r.shouldHide(t.statistics[e.key],e.value)),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.key&&t.statistics[e.key]&&!r.shouldHide(t.statistics[e.key],e.value)),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(5,4,e.value.store.loading$)),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",!r.shouldHide(t.statistics[e.key],e.value))}}function m7(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",1),n.\u0275\u0275template(1,t7,3,3,"div",2),n.\u0275\u0275template(2,p7,7,6,"ng-container",3),n.\u0275\u0275pipe(3,"keyvalue"),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.messageLabelKey),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",n.\u0275\u0275pipeBind1(3,2,e.statistics))}}let AS=(()=>{class i extends io{language;factory;statistics={};vm$;messageLabelKey;loading$;loading=!0;subs=[];constructor(e,t){super(),this.language=e,this.factory=t,this.language=e??{appStrings$:(0,S.of)({})}}ngOnInit(){if(!this.context||!this.context.module)return void(this.messageLabelKey="LBL_CONFIG_BAD_CONTEXT");if(!this.config)return void(this.messageLabelKey="LBL_CONFIG_NO_CONFIG");if(!this.config.options||!this.config.options.statistics||!this.config.options.statistics.length)return void(this.messageLabelKey="LBL_CONFIG_NO_STATISTICS_KEY");this.context$&&this.subs.push(this.context$.subscribe(o=>{this.context=o}));const e=[],t=[];this.config.options.statistics.forEach(o=>{o.type&&(this.statistics[o.type]={labelKey:o.labelKey||"",endLabelKey:o.endLabelKey||"",hideValueIfEmpty:o.hideValueIfEmpty||!1,type:o.type,store:this.factory.create()},this.statistics[o.type].store.init(this.context.module,{key:o.type,context:{...this.context}}).pipe((0,v.take)(1)).subscribe(),e.push(this.statistics[o.type].store.state$),t.push(this.statistics[o.type].store.loading$))});let r=null;if(e.length<1)r=(0,S.of)([]);else if(1===e.length)r=e[0].pipe((0,v.map)(o=>[o]));else{let s,o=null;[o,...s]=e,r=o.pipe((0,S.combineLatestWith)(s))}this.loading$=t[0].pipe((0,S.combineLatestWith)(...t),(0,v.map)(o=>{if(!o||o.length<1)return this.loading=!1,!1;let s=!0;return o.forEach(c=>{s=s&&c}),this.loading=s,s})),this.subs.push(this.loading$.subscribe()),this.vm$=r.pipe((0,S.combineLatestWith)(this.language?.appStrings$??(0,S.of)({})),(0,v.map)(([o,s])=>{const c={};return o.forEach(l=>{c[l.query.key]=l,this.statistics[l.query.key].labelKey=this.getMetadataEntry(l,"labelKey"),this.statistics[l.query.key].endLabelKey=this.getMetadataEntry(l,"endLabelKey")}),{statistics:c,appStrings:s}})),this.config.reload$&&this.subs.push(this.config.reload$.subscribe(()=>{!1===this.loading&&(this.loading=!0,this.config.options.statistics.forEach(o=>{o.type&&(!this.statistics[o.type]||!this.statistics[o.type].store||this.statistics[o.type].store.load(!1).pipe((0,v.take)(1)).subscribe())}))}))}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}shouldHide(e,t){return this.hasLoaded(e)&&this.isValueEmpty(e)&&!0===t.hideIfEmpty}hasLoaded(e){return!e.loading}isValueEmpty(e){const t=e?.statistic?.metadata?.emptyValueString??null;if(null!==t)return!0;const r=e?.field?.value??null;return!r&&t===r}getMetadataEntry(e,t){const r=e.statistic.metadata&&e.statistic.metadata[t];return null!==r&&typeof r<"u"?r:this.statistics[e.query.key][t]}getLabel(e){return this.language.getFieldLabel(e,(this.context||{}).module||"")}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject($e),n.\u0275\u0275directiveInject(os))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-statistics-top-widget"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:2,vars:3,consts:[["class","d-flex justify-content-center widget-bar rounded",4,"ngIf"],[1,"d-flex","justify-content-center","widget-bar","rounded"],["class","p-2 widget-bar-entry-message",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"p-2","widget-bar-entry-message"],[1,"d-flex","justify-content-center","align-items-baseline","widget-bar-entry","p-2"],[4,"ngIf"],["class","pl-1 pr-1 widget-bar-entry-loading",4,"ngIf"],["class","pr-1 widget-bar-entry-label",4,"ngIf"],[1,"pr-1","widget-bar-entry-label"],["class","pl-1 pr-1 widget-bar-entry-value",4,"ngIf"],[1,"pl-1","pr-1","widget-bar-entry-value"],["mode","list",3,"type","field"],[1,"pl-1","pr-1","widget-bar-entry-loading"],["class","pl-1 widget-bar-entry-end-label",4,"ngIf"],[1,"pl-1","widget-bar-entry-end-label"]],template:function(t,r){1&t&&(n.\u0275\u0275template(0,m7,4,4,"div",0),n.\u0275\u0275pipe(1,"async")),2&t&&n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(1,1,r.vm$))},dependencies:[F.NgForOf,F.NgIf,lr,vc,F.AsyncPipe,F.UpperCasePipe,F.KeyValuePipe],encapsulation:2})}return i})(),TS=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Jn,qr]})}return i})();const NS=[TS],LS={statistics:AS},g7=function(i,a){return{config:i,context:a}};function h7(i,a){if(1&i&&n.\u0275\u0275element(0,"ndc-dynamic",1),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275property("ndcDynamicComponent",e.componentType)("ndcDynamicInputs",n.\u0275\u0275pureFunction2(2,g7,e.config,e.context))}}let OS=(()=>{class i extends io{type;map=LS;inputs;component;get componentType(){return this.map[this.type]}ngOnInit(){this.component=this.componentType,this.inputs={config:this.config,context:this.context}}static \u0275fac=function(){let e;return function(r){return(e||(e=n.\u0275\u0275getInheritedFactory(i)))(r||i)}}();static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-top-widget"]],inputs:{type:"type"},features:[n.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,consts:[[3,"ndcDynamicComponent","ndcDynamicInputs",4,"ngIf"],[3,"ndcDynamicComponent","ndcDynamicInputs"]],template:function(t,r){1&t&&n.\u0275\u0275template(0,h7,1,5,"ndc-dynamic",0),2&t&&n.\u0275\u0275property("ngIf",r.type&&r.config)},dependencies:[F.NgIf,Pt,Bt],encapsulation:2})}return i})(),BS=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,NS,gt]})}return i})(),v7=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,gt]})}return i})(),RS=(()=>{class i{el;appStateStore;state;subscription;appLoading=!1;constructor(e,t){this.el=e,this.appStateStore=t}ngOnInit(){this.subscription=this.appStateStore.loading$.pipe((0,v.tap)(e=>{this.appLoading=e,this.updateComponent()})).subscribe(),this.updateComponent()}ngOnChanges(e){e.state&&this.updateComponent()}ngOnDestroy(){this.subscription.unsubscribe()}clickEvent(){this.updateComponent()}updateComponent(){const e=this.isLoading();this.setDisabledState(e)}isLoading(){let e=!1;return(!0===this.state||!0===this.appLoading)&&(e=!0),e}setDisabledState(e){this.el.nativeElement.disabled=e}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(n.ElementRef),n.\u0275\u0275directiveInject(Xt))};static \u0275dir=n.\u0275\u0275defineDirective({type:i,selectors:[["","scrm-button-loading",""]],hostBindings:function(t,r){1&t&&n.\u0275\u0275listener("click",function(){return r.clickEvent()})},inputs:{state:["scrm-button-loading","state"]},features:[n.\u0275\u0275NgOnChangesFeature]})}return i})(),jS=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule]})}return i})(),_7=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule]})}return i})(),y7=(()=>{class i extends zi{languages;typeFormatter;logic;logicDisplay;constructor(e,t,r,o){super(e,t,r,o),this.languages=e,this.typeFormatter=t,this.logic=r,this.logicDisplay=o}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject($e),n.\u0275\u0275directiveInject(ut),n.\u0275\u0275directiveInject(_t),n.\u0275\u0275directiveInject(yt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-dynamicenum-detail"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,template:function(t,r){1&t&&n.\u0275\u0275text(0),2&t&&n.\u0275\u0275textInterpolate1("\n",r.valueLabel,"\n")},encapsulation:2})}return i})(),b7=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,De.FormsModule]})}return i})();const C7=["tag"];let M7=(()=>{class i extends zi{languages;typeFormatter;logic;logicDisplay;tag;constructor(e,t,r,o){super(e,t,r,o),this.languages=e,this.typeFormatter=t,this.logic=r,this.logicDisplay=o}ngOnInit(){super.ngOnInit()}onAdd(e){if(e&&e.value)return this.field.value=e.value,this.field.formControl.setValue(e.value),void this.field.formControl.markAsDirty();this.field.value="",this.field.formControl.setValue(""),this.field.formControl.markAsDirty(),this.selectedValues=[]}onRemove(){this.field.value="",this.field.formControl.setValue(""),this.field.formControl.markAsDirty(),setTimeout(()=>{this.tag.focus(!0,!0),this.tag.dropdown.show()},200)}getPlaceholderLabel(){return this.languages.getAppString("LBL_SELECT_ITEM")||""}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject($e),n.\u0275\u0275directiveInject(ut),n.\u0275\u0275directiveInject(_t),n.\u0275\u0275directiveInject(yt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-dynamicenum-edit"]],viewQuery:function(t,r){if(1&t&&n.\u0275\u0275viewQuery(C7,5),2&t){let o;n.\u0275\u0275queryRefresh(o=n.\u0275\u0275loadQuery())&&(r.tag=o.first)}},features:[n.\u0275\u0275InheritDefinitionFeature],decls:3,vars:13,consts:[["maxItems","1",3,"ngModel","onlyFromAutocomplete","clearOnBlur","displayBy","identifyBy","placeholder","secondaryPlaceholder","inputClass","ngModelChange","onAdd","onRemove"],["tag",""],[3,"displayBy","identifyBy","showDropdownIfEmpty","keepOpen","autocompleteItems"]],template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"tag-input",0,1),n.\u0275\u0275listener("ngModelChange",function(s){return r.selectedValues=s})("onAdd",function(s){return r.onAdd(s)})("onRemove",function(){return r.onRemove()}),n.\u0275\u0275element(2,"tag-input-dropdown",2),n.\u0275\u0275elementEnd()),2&t&&(n.\u0275\u0275property("ngModel",r.selectedValues)("onlyFromAutocomplete",!0)("clearOnBlur",!0)("displayBy","label")("identifyBy","value")("placeholder",r.getPlaceholderLabel())("secondaryPlaceholder",r.getPlaceholderLabel())("inputClass",r.getInvalidClass()),n.\u0275\u0275advance(2),n.\u0275\u0275property("displayBy","label")("identifyBy","value")("showDropdownIfEmpty",!0)("keepOpen",!1)("autocompleteItems",r.options))},dependencies:[Un.TagInputComponent,Un.TagInputDropdown,De.NgControlStatus,De.NgModel],encapsulation:2})}return i})(),S7=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Un.TagInputModule,De.FormsModule]})}return i})(),D7=(()=>{class i extends _n{typeFormatter;logic;logicDisplay;constructor(e,t,r){super(e,t,r),this.typeFormatter=e,this.logic=t,this.logicDisplay=r}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(ut),n.\u0275\u0275directiveInject(_t),n.\u0275\u0275directiveInject(yt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-email-detail"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,template:function(t,r){1&t&&n.\u0275\u0275text(0),2&t&&n.\u0275\u0275textInterpolate1("\n",r.field.value,"\n")},encapsulation:2})}return i})(),w7=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule]})}return i})(),E7=(()=>{class i{sanitizer;constructor(e){this.sanitizer=e}transform(e){return this.sanitizer.sanitize(n.SecurityContext.HTML,e)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(e0.H7,16))};static \u0275pipe=n.\u0275\u0275definePipe({name:"htmlSanitize",type:i,pure:!0})}return i})(),x7=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule]})}return i})();class kS{}let F7=(()=>{class i{router;authService;asyncActionService;appState;routeConverter;language;notificationStore;constructor(e,t,r,o,s,c,l){this.router=e,this.authService=t,this.asyncActionService=r,this.appState=o,this.routeConverter=s,this.language=c,this.notificationStore=l}canActivate(e,t){return this.authorizeUser(e,t)}authorizeUser(e,t){return(0,S.forkJoin)([this.authorizeUserSession(e,t),this.authorizeUserACL(e)]).pipe((0,v.map)(([r,o])=>r instanceof Rt.UrlTree?r:(o instanceof Rt.UrlTree||r)&&o))}authorizeUserACL(e){const t=this.routeConverter.parseRouteURL(e.url),r=this.appState.getRouteUrl()??"";if(!t.module||"home"===t.module)return(0,S.of)(!0);const s=this.router.parseUrl(""),c="user-acl";return this.asyncActionService.run(c,{action:c,module:t.module,payload:{routeAction:t.action,record:t.record,routeURL:r,queryParams:e?.queryParams??[]}}).pipe((0,v.take)(1),(0,v.map)(u=>{if(u.data&&!0===u.data.result)return!0;if((0,M.isEmptyString)(r))return s;const d=this.router.parseUrl(this.router.url);return!!this.routeConverter.isClassicViewRoute(d)&&d}),(0,v.catchError)(()=>(0,S.of)(s)))}authorizeUserSession(e,t){if(this.authService.isUserLoggedIn.value&&!0!==e.data.checkSession)return(0,S.of)(!0);let r=this.authService.getSessionExpiredRoute();const o=this.authService.sessionExpiredRedirect(),s=this.router.parseUrl(r);return this.authService.fetchSessionStatus().pipe((0,v.take)(1),(0,v.map)(c=>{if(c&&!1===c.appStatus.installed)return this.router.parseUrl("install");if(c&&!0===c.active){const l=!!this.appState.getCurrentUser();return this.authService.setCurrentUser(c),l||this.language.appStrings$.pipe((0,v.filter)(u=>u&&!(0,M.emptyObject)(u)),(0,v.tap)(()=>{this.notificationStore.enableNotifications(),this.notificationStore.refreshNotifications()}),(0,v.take)(1)).subscribe(),!0}return this.appState.setPreLoginUrl(t.url),this.authService.resetState(),o?(this.authService.handleSessionExpiredRedirect(),!1):s}),(0,v.catchError)(()=>o?(this.authService.handleSessionExpiredRedirect(),(0,S.of)(!1)):(this.authService.logout("LBL_SESSION_EXPIRED",!1),(0,S.of)(s))),(0,v.tap)(c=>{!0===c&&this.authService.isUserLoggedIn.next(!0)}))}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Rt.Router),n.\u0275\u0275inject(oi),n.\u0275\u0275inject(Yt),n.\u0275\u0275inject(Xt),n.\u0275\u0275inject(to),n.\u0275\u0275inject($e),n.\u0275\u0275inject(wa))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),I7=(()=>{class i{intercept(e,t){return t.handle(e).pipe((0,v.catchError)(r=>(0,S.throwError)(r)))}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),A7=(()=>{class i{systemConfigStore;authService;router;routeConverter;asyncActionService;message;constructor(e,t,r,o,s,c){this.systemConfigStore=e,this.authService=t,this.router=r,this.routeConverter=o,this.asyncActionService=s,this.message=c}canActivate(e){return this.canActivateWebInstallation(e)}canActivateWebInstallation(e){const t=this.systemConfigStore.getHomePage(),r=this.router.parseUrl(t);return this.authService.fetchSessionStatus().pipe((0,v.take)(1),(0,v.map)(o=>o&&!0===o.appStatus.locked&&!0===o.appStatus.installed?(this.message.addDangerMessageByKey("LBL_DISABLED_TITLE_2"),!(!o||!1!==o.active)&&r):(o&&!0===o.active&&(this.authService.logout("",!1),this.authService.isUserLoggedIn.next(!1)),!0)),(0,v.catchError)(()=>(0,S.of)(!0)))}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(vt),n.\u0275\u0275inject(oi),n.\u0275\u0275inject(Rt.Router),n.\u0275\u0275inject(to),n.\u0275\u0275inject(Yt),n.\u0275\u0275inject(dt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),T7=(()=>{class i{router;authService;systemConfigStore;appStateStore;constructor(e,t,r,o){this.router=e,this.authService=t,this.systemConfigStore=r,this.appStateStore=o}canActivate(){const e=this.systemConfigStore.getHomePage(),t=this.router.parseUrl(e);return this.authService.isUserLoggedIn.value?t:this.authService.fetchSessionStatus().pipe((0,v.take)(1),(0,v.map)(r=>r&&!1===r.appStatus.installed?this.router.parseUrl("install"):!r||!0!==r.active||(this.authService.setCurrentUser(r),t)),(0,v.catchError)(()=>(0,S.of)(!0)))}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Rt.Router),n.\u0275\u0275inject(oi),n.\u0275\u0275inject(vt),n.\u0275\u0275inject(Xt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),N7=(()=>{class i{systemConfigStore;constructor(e){this.systemConfigStore=e}load(e){const t=this.systemConfigStore.getConfigValue("extensions"),r={};return Object.keys(t).forEach(o=>{if(!t[o])return;const s=t[o];!s.remoteEntry||!s.remoteName||!s.enabled||(0,M.isFalse)(s.enabled)||(r[o]=this.loadExtension(s,e))}),Object.keys(r).length<1?(0,S.of)({}):(0,S.forkJoin)(r)}loadExtension(e,t){return this.loadModule(()=>function Vk(i,a){return Mu.apply(this,arguments)}({type:"module",remoteEntry:e.remoteEntry,exposedModule:"./Module"}).then(o=>o.ExtensionModule),t)}isPromise(e){return!!e&&"function"==typeof e.then}wrapIntoObservable(e){return(0,S.isObservable)(e)?e:this.isPromise(e)?(0,S.from)(Promise.resolve(e)):(0,S.of)(e)}loadModule(e,t){return this.wrapIntoObservable(e()).pipe((0,v.map)(r=>(0,n.createNgModule)(r,t)))}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(vt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Cf=(()=>{class i{systemConfigStore;languageStore;navigationStore;userPreferenceStore;themeImagesStore;appState;moduleNameMapper;messageService;appMetadata;auth;constructor(e,t,r,o,s,c,l,u,d,f){this.systemConfigStore=e,this.languageStore=t,this.navigationStore=r,this.userPreferenceStore=o,this.themeImagesStore=s,this.appState=c,this.moduleNameMapper=l,this.messageService=u,this.appMetadata=d,this.auth=f}resolve(e){const t=this.calculateActiveModule(e);return this.appMetadata.load(t).pipe((0,v.tap)(()=>{this.auth.isLoggedIn()&&setTimeout(()=>{this.appMetadata.loadModuleMetadata(t).pipe((0,v.take)(1)).subscribe()},0)}))}sequentialLoad(e){const t={};if(this.isToLoadNavigation(e)&&(t.navigation=this.navigationStore.load()),this.isToLoadConfigs(e)){let o=this.systemConfigStore.load();if(this.isToLoadLanguageStrings(e)){const s=this.getLanguagesToLoad(e);o=o.pipe((0,v.map)(c=>{let l=c.default_language.value;const u=this.languageStore.getCurrentLanguage();return u&&(l=u),this.languageStore.load(l,s)}),(0,v.concatAll)(),(0,v.toArray)())}t.configs=o}return this.isToLoadUserPreferences(e)&&(t.preferences=this.userPreferenceStore.load()),(0,S.forkJoin)(t).pipe((0,v.map)(o=>{let s=null;return this.systemConfigStore.getConfigValue("default_theme")&&(s=this.systemConfigStore.getConfigValue("default_theme")),this.userPreferenceStore.getUserPreference("user_theme")&&(s=this.userPreferenceStore.getUserPreference("user_theme")),this.themeImagesStore.getTheme()&&(s=this.themeImagesStore.getTheme()),null!==s?this.themeImagesStore.load(s):o}),(0,v.concatAll)(),(0,v.toArray)(),(0,v.tap)(()=>this.appState.setLoaded(!0)))}getLanguagesToLoad(e){let t=this.languageStore.getAvailableStringsTypes();return this.isToLoadNavigation(e)?t:e.data&&e.data.load?(Array.isArray(e.data.load.languageStrings)&&(t=e.data.load.languageStrings),t):[]}isToLoadLanguageStrings(e){return!!this.isToLoadNavigation(e)||!(!e.data||!e.data.load)&&(Array.isArray(e.data.load.languageStrings)||!0===e.data.load.languageStrings)}isToLoadConfigs(e){return!e.data||!e.data.load||!1!==e.data.load.configs}isToLoadNavigation(e){return!e.data||!e.data.load||!1!==e.data.load.navigation}isToLoadUserPreferences(e){return!e.data||!e.data.load||!1!==e.data.load.preferences}addMetadataLoadErrorMessage(){let e=this.languageStore.getAppString("LBL_ERROR_FETCHING_METADATA");e||(e="Error occurred while fetching metadata"),this.messageService.addDangerMessage(e)}calculateActiveModule(e){let t=e.params.module;t||(t=e.data.module);const r=e?.url[0]?.path??"";!t&&""!==r&&(t=r);const o=this.getParentModuleMap()[t]||"",s=e.queryParams[o]||"";return s&&(t=this.moduleNameMapper.toFrontend(s)),t}getParentModuleMap(){return{"merge-records":"return_module",import:"import_module"}}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(vt),n.\u0275\u0275inject($e),n.\u0275\u0275inject(Li),n.\u0275\u0275inject(qt),n.\u0275\u0275inject(Kr),n.\u0275\u0275inject(Xt),n.\u0275\u0275inject(Tn),n.\u0275\u0275inject(dt),n.\u0275\u0275inject(Da),n.\u0275\u0275inject(oi))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),PS=(()=>{class i extends Cf{systemConfigStore;languageStore;navigationStore;userPreferenceStore;themeImagesStore;moduleNameMapper;appStateStore;metadataStore;messageService;routeConverter;appMetadata;auth;constructor(e,t,r,o,s,c,l,u,d,f,p,m){super(e,t,r,o,s,l,c,d,p,m),this.systemConfigStore=e,this.languageStore=t,this.navigationStore=r,this.userPreferenceStore=o,this.themeImagesStore=s,this.moduleNameMapper=c,this.appStateStore=l,this.metadataStore=u,this.messageService=d,this.routeConverter=f,this.appMetadata=p,this.auth=m}resolve(e){let t=e.params.module;return t||(t=e.data.module),super.resolve(e).pipe((0,v.concatMap)(()=>(0,S.forkJoin)([this.metadataStore.load(t,this.metadataStore.getMetadataTypes()),this.metadataStore.getMetadata("saved-search",["recordView"])])),(0,v.map)(r=>({metadata:r[0]??{},savedSearchMeta:r[1]??{}})),(0,v.tap)(()=>{if(t){const s=this.calculateActiveModule(e);this.appStateStore.setModule(s)}const o=this.routeConverter.parseRouteURL(e.url).action??"index";this.appStateStore.setView(o)},()=>{this.addMetadataLoadErrorMessage()}))}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(vt),n.\u0275\u0275inject($e),n.\u0275\u0275inject(Li),n.\u0275\u0275inject(qt),n.\u0275\u0275inject(Kr),n.\u0275\u0275inject(Tn),n.\u0275\u0275inject(Xt),n.\u0275\u0275inject(bt),n.\u0275\u0275inject(dt),n.\u0275\u0275inject(to),n.\u0275\u0275inject(Da),n.\u0275\u0275inject(oi))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Mf=(()=>{class i{metadata;processService;constructor(e,t){this.metadata=e,this.processService=t}onNavigationAdd(e,t){let r="detail";const o=t&&t.data||{};o.mode&&(r=o.mode);const s=t?.params?.record??null;if(s&&"create"!==r){const c=this.buildRecentlyViewed(e,s);this.addRecentlyViewed(e,c)}}buildRecentlyViewed(e,t,r="detailview"){return(0,M.deepClone)({module:"Tracker",type:"Tracker",attributes:{module_name:e??"",item_id:t??"",action:r??""}})}addRecentlyViewed(e,t){this.saveRecentlyViewed(e,t)}saveRecentlyViewed(e,t){const o={recentlyViewed:t};setTimeout(()=>{this.processService.submit("add-recently-viewed",o).pipe((0,v.take)(1)).subscribe(s=>{const c={id:t.id??"",module:t.module??"",attributes:{...t.attributes??{}}},l=s?.data?.tracker??null;if(null===l)return;c.attributes.item_summary=l.item_summary;const u=c?.attributes?.item_id??"",d=this.metadata.getModuleMeta(e),f=d?.recentlyViewed??null;if(f){let p=f.filter(m=>(m?.attributes?.item_id??"")!==u);p.unshift(c),d.recentlyViewed=p}this.metadata.setModuleMetadata(e,d)})},500)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(bt),n.\u0275\u0275inject(ir))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),L7=(()=>{class i extends PS{systemConfigStore;languageStore;navigationStore;metadataStore;userPreferenceStore;themeImagesStore;moduleNameMapper;actionNameMapper;appStateStore;messageService;routeConverter;router;appMetadata;auth;recentlyViewed;constructor(e,t,r,o,s,c,l,u,d,f,p,m,h,g,b){super(e,t,r,s,c,l,d,o,f,p,h,g),this.systemConfigStore=e,this.languageStore=t,this.navigationStore=r,this.metadataStore=o,this.userPreferenceStore=s,this.themeImagesStore=c,this.moduleNameMapper=l,this.actionNameMapper=u,this.appStateStore=d,this.messageService=f,this.routeConverter=p,this.router=m,this.appMetadata=h,this.auth=g,this.recentlyViewed=b}resolve(e){let t=e.params.module;return t||(t=e.data.module),super.resolve(e).pipe((0,v.concatMap)(()=>(0,S.forkJoin)([this.metadataStore.load(t,this.metadataStore.getMetadataTypes())])),(0,v.tap)(()=>{this.auth.isLoggedIn()&&this.recentlyViewed.onNavigationAdd(this.appStateStore.getModule(),e)}))}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(vt),n.\u0275\u0275inject($e),n.\u0275\u0275inject(Li),n.\u0275\u0275inject(bt),n.\u0275\u0275inject(qt),n.\u0275\u0275inject(Kr),n.\u0275\u0275inject(Tn),n.\u0275\u0275inject(Co),n.\u0275\u0275inject(Xt),n.\u0275\u0275inject(dt),n.\u0275\u0275inject(to),n.\u0275\u0275inject(Rt.Router),n.\u0275\u0275inject(Da),n.\u0275\u0275inject(oi),n.\u0275\u0275inject(Mf))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),$S=(()=>{class i{processService;appStateStore;processType="recover-password";constructor(e,t){this.processService=e,this.appStateStore=t}run(e,t){const r={username:e,useremail:t};return this.appStateStore.updateLoading("recover-password",!0,!1),this.processService.submit(this.processType,r).pipe((0,v.tap)(()=>this.appStateStore.updateLoading("recover-password",!1,!1)),(0,v.catchError)(o=>{throw this.appStateStore.updateLoading("recover-password",!1,!1),o}))}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(ir),n.\u0275\u0275inject(Xt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),O7=(()=>{class i{systemConfig;constructor(e,t){this.systemConfig=e,this.docElement=t}docElement;setSystemName(e){(!e||e.length<1)&&(e="SuiteCRM"),this.docElement.documentElement.childNodes.item(0).childNodes.forEach(r=>{"TITLE"===r.nodeName&&(r.textContent=e)})}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(vt),n.\u0275\u0275inject(F.DOCUMENT))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),B7=(()=>{class i{http;constructor(e){this.http=e}getAll(){return this.http.get("users")}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Dr.HttpClient))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),R7=(()=>{class i{fetchGQL;constructor(e){this.fetchGQL=e}create(){return new df(this.fetchGQL)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(ur))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),j7=(()=>{class i{fetchGQL;constructor(e){this.fetchGQL=e}create(){return new Yc(this.fetchGQL)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(ur))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function k7(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",9)(1,"a",10)(2,"div",11),n.\u0275\u0275element(3,"scrm-image",12)(4,"scrm-label",13),n.\u0275\u0275elementEnd()()()),2&i){const e=a.$implicit,t=a.first,r=n.\u0275\u0275nextContext(3);n.\u0275\u0275classProp("border-top",t),n.\u0275\u0275advance(1),n.\u0275\u0275property("queryParams",null==e?null:e.params)("routerLink",e.link)("title",r.language.getFieldLabel(e.descriptionKey,"administration")),n.\u0275\u0275advance(2),n.\u0275\u0275property("image",e.icon),n.\u0275\u0275advance(1),n.\u0275\u0275property("labelKey",e.titleKey)}}function P7(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,k7,5,7,"div",8),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",e.content.linkGroup)}}function $7(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",2)(1,"div",3)(2,"h5",4),n.\u0275\u0275element(3,"scrm-label",5),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(4,"div",6),n.\u0275\u0275template(5,P7,2,1,"ng-container",7),n.\u0275\u0275elementEnd()()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(2),n.\u0275\u0275property("title",e.language.getFieldLabel(e.content.descriptionLabelKey,"administration")),n.\u0275\u0275advance(1),n.\u0275\u0275property("labelKey",e.content.titleLabelKey),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",e.content.linkGroup)}}let US=(()=>{class i{language;content;constructor(e){this.language=e}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject($e))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-admin-card"]],inputs:{content:"content"},decls:2,vars:1,consts:[[1,"widget-panel","h-100","shadow-sm"],["class","card h-100 panel-card border-0",4,"ngIf"],[1,"card","h-100","panel-card","border-0"],[1,"card-header"],[1,"card-title","admin-card-title","m-0",3,"title"],["module","administration",3,"labelKey"],[1,"card-body","d-flex","flex-column","align-items-start"],[4,"ngIf"],["class","admin-card-link-box border-bottom w-100",3,"border-top",4,"ngFor","ngForOf"],[1,"admin-card-link-box","border-bottom","w-100"],["queryParamsHandling","merge",1,"card-link","admin-card-link",3,"queryParams","routerLink","title"],[1,"d-flex","admin-card-link-wrapper","align-items-center","w-100","p-1"],[1,"admin-card-icon","sicon-2x",3,"image"],["module","administration",1,"admin-card-label","pl-1","flex-grow-1",3,"labelKey"]],template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"div",0),n.\u0275\u0275template(1,$7,6,3,"div",1),n.\u0275\u0275elementEnd()),2&t&&(n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.content))},dependencies:[F.NgForOf,F.NgIf,Rt.RouterLink,zt,wn],encapsulation:2})}return i})(),VS=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Rt.RouterModule,Ut,Mn]})}return i})();function U7(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",3),n.\u0275\u0275element(1,"scrm-admin-card",4),n.\u0275\u0275elementEnd()),2&i){const e=a.$implicit;n.\u0275\u0275advance(1),n.\u0275\u0275property("content",e)}}let V7=(()=>{class i{adminMetaData;adminPanelData=[];constructor(e){this.adminMetaData=e}ngOnInit(){const e=this.adminMetaData.getAdminPanel();this.setData(e)}setData(e){e.forEach(({icon:t,titleLabelKey:r,descriptionLabelKey:o,linkGroup:s})=>{this.adminPanelData.push({icon:t,titleLabelKey:r,descriptionLabelKey:o,linkGroup:this.setLinkGroups(s)})})}setLinkGroups(e){let t=[],r=Object.keys(e);for(let o=0;o<r.length;o++){let c=Object.values(e[r[o]]);for(let l=0;l<c.length;l++)t.push(c[l])}return t}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(yd))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-admin-panel"]],decls:3,vars:1,consts:[[1,"admin-view","full-height-view","d-flex","align-items-center"],[1,"row","flex-grow-1"],["class","col-12 col-sm-6 col-lg-4 col-xl-3 mt-3 mb-3",4,"ngFor","ngForOf"],[1,"col-12","col-sm-6","col-lg-4","col-xl-3","mt-3","mb-3"],[3,"content"]],template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"div",0)(1,"div",1),n.\u0275\u0275template(2,U7,2,1,"div",2),n.\u0275\u0275elementEnd()()),2&t&&(n.\u0275\u0275advance(2),n.\u0275\u0275property("ngForOf",r.adminPanelData))},dependencies:[F.NgForOf,US],encapsulation:2})}return i})(),z7=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,VS]})}return i})();const G7=["dataContainer"];let W7=(()=>{class i{route;router;sanitizer;routeConverter;auth;ngZone;systemConfigs;dataContainer;wrapper;url;iframe=null;iframePageChangeHandler;iframeResizeHandler;constructor(e,t,r,o,s,c,l){this.route=e,this.router=t,this.sanitizer=r,this.routeConverter=o,this.auth=s,this.ngZone=c,this.systemConfigs=l}ngOnInit(){this.url=this.route.snapshot.data.legacyUrl}ngAfterViewInit(){this.initIframe()}ngOnDestroy(){this.cleanObservers(),this.iframe=null;const e=this.wrapper;this.wrapper.firstChild&&e.removeChild(e.firstChild),e.innerHTML="<iframe></iframe>",this.wrapper=null}cleanObservers(){this.iframeResizeHandler&&(this.iframeResizeHandler.destroy(),this.iframeResizeHandler=null),this.iframePageChangeHandler&&(this.iframePageChangeHandler.destroy(),this.iframePageChangeHandler=null)}initIframe(){this.wrapper=this.dataContainer.nativeElement,this.wrapper.firstChild&&this.wrapper.removeChild(this.wrapper.firstChild);const e=document.createElement("iframe");e.src=this.url,this.wrapper.appendChild(e),this.iframe=e,this.iframe.style.display="block",this.initObservers()}initObservers(){this.iframePageChangeHandler=this.buildIframePageChangeObserver(),this.iframeResizeHandler=this.buildIframeResizeHandlerHandler(),this.iframePageChangeHandler&&this.iframePageChangeHandler.init()}onPageChange(e){if(!1===this.shouldRedirect(e))return this.iframe.style.display="block",this.cleanObservers(),void this.initObservers();const t=this.routeConverter.toFrontEndRoute(e);"/users/login"!==t?this.ngZone.run(()=>this.router.navigateByUrl(t).then()).then():this.auth.logout("LBL_SESSION_EXPIRED")}onIFrameLoad(){this.iframe.contentWindow.document.body.style.overflow="hidden",this.iframeResizeHandler.init(this.iframe)}onIFrameUnload(){this.iframe.style.display="none",this.iframeResizeHandler.destroy()}buildIframePageChangeObserver(){return new Pu(this.iframe,this.onPageChange.bind(this),this.onIFrameLoad.bind(this),this.onIFrameUnload.bind(this))}buildIframeResizeHandlerHandler(){return new ku}shouldRedirect(e){if(e&&e.includes("/#/"))return!0;const t=this.routeConverter.parse(e);return!(!t||!t.module||!0===this.routeConverter.matchesActiveRoute(this.route,t))&&(!t.action||this.toExclude(t))}toExclude(e){const t=this.systemConfigs.getConfigValue("classicview_routing_exclusions");if(!t||0===Object.keys(t).length)return!0;if(t.any&&t.any.includes(e.action))return!1;if(!t[e.module])return!0;const r=t[e.module];return!(r&&r.includes(e.action))}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(Rt.ActivatedRoute),n.\u0275\u0275directiveInject(Rt.Router),n.\u0275\u0275directiveInject(e0.H7),n.\u0275\u0275directiveInject(to),n.\u0275\u0275directiveInject(oi),n.\u0275\u0275directiveInject(n.NgZone),n.\u0275\u0275directiveInject(vt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-classic-view-ui"]],viewQuery:function(t,r){if(1&t&&n.\u0275\u0275viewQuery(G7,7),2&t){let o;n.\u0275\u0275queryRefresh(o=n.\u0275\u0275loadQuery())&&(r.dataContainer=o.first)}},decls:3,vars:0,consts:[[1,"classic-view-container"],["dataContainer",""]],template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"div",0,1),n.\u0275\u0275element(2,"iframe"),n.\u0275\u0275elementEnd())},encapsulation:2})}return i})(),K7=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule]})}return i})(),H7=(()=>{class i extends Cf{systemConfigStore;languageStore;navigationStore;userPreferenceStore;themeImagesStore;moduleNameMapper;routeConverter;messageService;appStateStore;appMetadata;auth;recentlyViewed;metadataStore;constructor(e,t,r,o,s,c,l,u,d,f,p,m,h){super(e,t,r,o,s,d,c,u,f,p),this.systemConfigStore=e,this.languageStore=t,this.navigationStore=r,this.userPreferenceStore=o,this.themeImagesStore=s,this.moduleNameMapper=c,this.routeConverter=l,this.messageService=u,this.appStateStore=d,this.appMetadata=f,this.auth=p,this.recentlyViewed=m,this.metadataStore=h}resolve(e){const t=this.calculateActiveModule(e);return super.resolve(e).pipe((0,v.concatMap)(()=>(0,S.forkJoin)([this.metadataStore.load(t,this.metadataStore.getMetadataTypes())])),(0,v.map)(()=>this.routeConverter.toLegacy(e.params,e.queryParams)),(0,v.tap)(()=>{if(e.params.module){const s=this.calculateActiveModule(e);this.appStateStore.setModule(s)}const o=this.routeConverter.parseRouteURL(e.url).action??"index";this.appStateStore.setView(o),this.recentlyViewed.onNavigationAdd(this.appStateStore.getModule(),e)},()=>{this.addMetadataLoadErrorMessage()}))}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(vt),n.\u0275\u0275inject($e),n.\u0275\u0275inject(Li),n.\u0275\u0275inject(qt),n.\u0275\u0275inject(Kr),n.\u0275\u0275inject(Tn),n.\u0275\u0275inject(to),n.\u0275\u0275inject(dt),n.\u0275\u0275inject(Xt),n.\u0275\u0275inject(Da),n.\u0275\u0275inject(oi),n.\u0275\u0275inject(Mf),n.\u0275\u0275inject(bt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),dl=(()=>{class i extends yi{recordFetchGQL;recordSaveGQL;appStateStore;languageStore;navigationStore;moduleNavigation;metadataStore;localStorage;message;subpanelFactory;recordManager;statisticsBatch;auth;recordStoreFactory;preferences;panelLogicManager;constructor(e,t,r,o,s,c,l,u,d,f,p,m,h,g,b,_){super(e,t,r,o,s,c,l,u,d,f,p,m,g,b,_),this.recordFetchGQL=e,this.recordSaveGQL=t,this.appStateStore=r,this.languageStore=o,this.navigationStore=s,this.moduleNavigation=c,this.metadataStore=l,this.localStorage=u,this.message=d,this.subpanelFactory=f,this.recordManager=p,this.statisticsBatch=m,this.auth=h,this.recordStoreFactory=g,this.preferences=b,this.panelLogicManager=_}init(e,t,r="detail",o={}){return this.internalState.module=e,this.internalState.recordID=t,this.setMode(r),this.parseParams(o),this.calculateShowWidgets(),this.showTopWidget=!1,this.showSubpanels=!1,!this.params.isDuplicate&&!this.params.originalDuplicateId&&this.initRecord(o),this.load()}save(){return this.appStateStore.updateLoading(`${this.internalState.module}-record-save-new`,!0),this.recordStore.save().pipe((0,v.catchError)(()=>(this.message.addDangerMessageByKey("LBL_ERROR_SAVING"),(0,S.of)({}))),(0,v.finalize)(()=>{this.setMode("detail"),this.appStateStore.updateLoading(`${this.internalState.module}-record-save-new`,!1)}))}initRecord(e={}){const t=this.auth.getCurrentUser(),r={id:"",type:"",module:this.internalState.module,attributes:{assigned_user_id:t.id,assigned_user_name:{id:t.id,user_name:t.userName},relate_to:e?.return_relationship,relate_id:e?.parent_id}};this.recordManager.injectParamFields(e,r,this.getVardefs()),this.recordStore.init(r)}load(){return this.params.isDuplicate&&this.params.originalDuplicateId?(this.updateState({...this.internalState,loading:!0}),this.recordStore.retrieveRecord(this.internalState.module,this.params.originalDuplicateId,!1).pipe((0,v.tap)(e=>{e.id="",e.attributes.id="",e.attributes.date_entered="",this.recordManager.injectParamFields(this.params,e,this.getVardefs()),this.recordStore.setRecord(e),this.updateState({...this.internalState,module:e.module,loading:!1})}))):(0,S.of)(this.recordStore.getBaseRecord()).pipe((0,v.shareReplay)())}calculateShowWidgets(){this.showSidebarWidgets=!1,this.widgets=!1}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Qr),n.\u0275\u0275inject(Xr),n.\u0275\u0275inject(Xt),n.\u0275\u0275inject($e),n.\u0275\u0275inject(Li),n.\u0275\u0275inject(Rn),n.\u0275\u0275inject(bt),n.\u0275\u0275inject(wr),n.\u0275\u0275inject(dt),n.\u0275\u0275inject(Zd),n.\u0275\u0275inject(_i),n.\u0275\u0275inject(qd),n.\u0275\u0275inject(oi),n.\u0275\u0275inject(Yr),n.\u0275\u0275inject(qt),n.\u0275\u0275inject(il))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),gs=(()=>{class i{systemConfigStore;screenSize;store;swapSizes=[];subs=[];widgetSwap;widgetSwap$;constructor(e,t,r){this.systemConfigStore=e,this.screenSize=t,this.store=r,this.swapSizes=this.systemConfigStore.getUi("widget_swap_screen_sizes"),this.widgetSwap$=this.screenSize.screenSize$.pipe((0,v.map)(o=>{const s=(0,M.isTrue)(this.swapSizes[o]??!1);return(null===this.widgetSwap&&!0===s||this.widgetSwap!==s&&!0===s)&&(this.store.showSidebarWidgets=!1),this.widgetSwap=s,s}))}destroy(){this.subs.forEach(e=>e.unsubscribe()),this.subs=[]}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(vt),n.\u0275\u0275inject(hi),n.\u0275\u0275inject(yi))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),Sf=(()=>{class i{store;metadata;config$;constructor(e,t){this.store=e,this.metadata=t,this.config$=this.metadata.recordViewMetadata$.pipe((0,S.combineLatestWith)(this.store.showSidebarWidgets$),(0,v.map)(([r,o])=>(r.sidebarWidgets&&r.sidebarWidgets.length&&r.sidebarWidgets.forEach(s=>{s&&"data-update"===s.refreshOn&&(s.reload$=this.store.record$.pipe((0,v.map)(()=>!0))),s&&(s.subpanelReload$=this.store.subpanelReload$)}),{widgets:r.sidebarWidgets||[],show:o})))}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(yi),n.\u0275\u0275inject(bt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})();class fr extends M.ActionHandler{checkRecordAccess(a,e=[]){const r=a.store.recordStore.getBaseRecord().acls??[];return!(!r||!r.length)&&this.checkAccess(a.action??null,r,e)}navigateBack(a,e,t,r,o){let s=a.getReturnModule(e),c=a.getReturnAction(e),l=a.getReturnId(e);t!==l&&(s===r&&"record"===c&&l!==t||!s||!c||a.navigateBack(o,r,e))}}let zS=(()=>{class i extends fr{key="edit";modes=["detail"];constructor(){super()}run(e){e.store.setMode("edit")}shouldDisplay(e){return this.checkRecordAccess(e,["edit"])}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),GS=(()=>{class i extends fr{moduleNameMapper;router;key="create";modes=["detail"];constructor(e,t){super(),this.moduleNameMapper=e,this.router=t}run(e){const t=e.store,r=t.getBaseRecord(),o="/"+t.vm.appData.module.name+"/edit",s=this.moduleNameMapper.toLegacy(t.vm.appData.module.name);this.router.navigate([o],{queryParams:{return_module:s,return_action:"DetailView",return_record:r&&r.id||""}}).then()}shouldDisplay(e){return this.checkRecordAccess(e,["edit"])}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Tn),n.\u0275\u0275inject(Rt.Router))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),WS=(()=>{class i extends fr{key="toggle-widgets";modes=["detail","edit"];constructor(){super()}run(e){e.store.showSidebarWidgets=!e.store.showSidebarWidgets}shouldDisplay(e){return e.store.widgets}getStatus(e){return e.store.showSidebarWidgets?"active":""}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),KS=(()=>{class i extends fr{modalService;navigation;key="cancel";modes=["edit","detail"];constructor(e,t){super(),this.modalService=e,this.navigation=t}run(e){e.store.recordStore.isDirty()?this.showConfirmationModal(e):this.cancel(e)}shouldDisplay(){return!0}cancel(e){const t=e.store.params,r=e.store.getModuleName(),o=e.store.getRecordId(),s=e.store.getBaseRecord();this.navigateBack(this.navigation,t,o,r,s),e.store.recordStore.resetStaging(),e.store.setMode("detail")}showConfirmationModal(e){const t=this.modalService.open(ls);t.componentInstance.textKey="WARN_UNSAVED_CHANGES",t.componentInstance.buttons=[{labelKey:"LBL_CANCEL",klass:["btn-secondary"],onClick:r=>r.dismiss()},{labelKey:"LBL_PROCEED",klass:["btn-main"],onClick:r=>{this.cancel(e),r.close()}}]}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(pe.NgbModal),n.\u0275\u0275inject(Rn))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),HS=(()=>{class i extends fr{modalService;router;moduleNameMapper;actionNameMapper;key="cancelCreate";modes=["create"];constructor(e,t,r,o){super(),this.modalService=e,this.router=t,this.moduleNameMapper=r,this.actionNameMapper=o}run(e){e.store.recordStore.isDirty()?this.showConfirmationModal(e):this.cancel(e)}shouldDisplay(){return!0}cancel(e){const t=e.store;let r=t.getModuleName();t.params.return_module&&(r=this.moduleNameMapper.toFrontend(t.params.return_module));let o=t.params.return_action||"";const s=t.params.return_id||"";let c="/"+r;o&&(o=this.actionNameMapper.toFrontend(o),("record"!==o||s)&&(c+="/"+o)),s&&(c+="/"+s),this.router.navigate([c]).then()}showConfirmationModal(e){const t=this.modalService.open(ls);t.componentInstance.textKey="WARN_UNSAVED_CHANGES",t.componentInstance.buttons=[{labelKey:"LBL_CANCEL",klass:["btn-secondary"],onClick:r=>r.dismiss()},{labelKey:"LBL_OK",klass:["btn-main"],onClick:r=>{this.cancel(e),r.close()}}]}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(pe.NgbModal),n.\u0275\u0275inject(Rt.Router),n.\u0275\u0275inject(Tn),n.\u0275\u0275inject(Co))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),ZS=(()=>{class i extends fr{message;navigation;notificationStore;key="save";modes=["edit"];constructor(e,t,r){super(),this.message=e,this.navigation=t,this.notificationStore=r}run(e){Object.keys(e.store.recordStore.getStaging().fields).some(r=>e.store.recordStore.getStaging().fields[r].loading??!1)?this.message.addWarningMessageByKey("LBL_LOADING_IN_PROGRESS"):e.store.recordStore.validate().pipe((0,v.take)(1)).subscribe(r=>{r?e.store.save().pipe((0,v.take)(1)).subscribe(o=>{const s=e.store.params,c=e.store.getModuleName(),l=o.id;this.notificationStore.conditionalNotificationRefresh("edit"),this.navigateBack(this.navigation,s,l,c,o)}):this.message.addWarningMessageByKey("LBL_VALIDATION_ERRORS")})}shouldDisplay(e){return!0}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(dt),n.\u0275\u0275inject(Rn),n.\u0275\u0275inject(wa))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),qS=(()=>{class i extends fr{message;navigation;key="saveNew";modes=["create"];constructor(e,t){super(),this.message=e,this.navigation=t}run(e){e.store.recordStore.validate().pipe((0,v.take)(1)).subscribe(t=>{t?e.store.save().pipe((0,v.take)(1)).subscribe(r=>{const o=e.store,s=o.params,c=o.getModuleName();this.navigation.navigateBack(r,c,s)}):this.message.addWarningMessageByKey("LBL_VALIDATION_ERRORS")})}shouldDisplay(e){return!0}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(dt),n.\u0275\u0275inject(Rn))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),JS=(()=>{class i extends fr{key="async-process";modes=M.ALL_VIEW_MODES;constructor(){super()}run(e){}shouldDisplay(e){const t=e?.action?.acl??[];return!t.length||this.checkRecordAccess(e,t)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Z7=(()=>{class i extends fr{http;message;key="create-call-from-account";modes=M.ALL_VIEW_MODES;constructor(e,t){super(),this.http=e,this.message=t}run(e){const r=(e?.store?.recordStore?.getBaseRecord?.()??null)?.id??null;r?this.http.get(`/legacy/index.php?module=Accounts&action=createActionFromAccount&record=${r}&ajax=1`).subscribe({next:s=>{s&&s.success?(this.message.addSuccessMessageByKey("LBL_ACTION_CREATED_SUCCESS"),e?.store?.load?.(!1)?.subscribe?.()):this.message.addDangerMessageByKey("LBL_ERROR_PROCESSING_REQUEST")},error:()=>{this.message.addDangerMessageByKey("LBL_ERROR_PROCESSING_REQUEST")}}):this.message.addDangerMessageByKey("LBL_ERROR_PROCESSING_REQUEST")}shouldDisplay(e){return!!e?.store?.recordStore?.getBaseRecord?.()?.id}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Dr.HttpClient),n.\u0275\u0275inject(dt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),Df=(()=>{class i extends vi{edit;create;toggleWidgets;cancel;cancelCreate;save;saveNew;async;createCall;constructor(e,t,r,o,s,c,l,u,d){super(),this.edit=e,this.create=t,this.toggleWidgets=r,this.cancel=o,this.cancelCreate=s,this.save=c,this.saveNew=l,this.async=u,this.createCall=d,e.modes.forEach(f=>this.actions[f][e.key]=e),t.modes.forEach(f=>this.actions[f][t.key]=t),r.modes.forEach(f=>this.actions[f][r.key]=r),o.modes.forEach(f=>this.actions[f][o.key]=o),c.modes.forEach(f=>this.actions[f][c.key]=c),l.modes.forEach(f=>this.actions[f][l.key]=l),s.modes.forEach(f=>this.actions[f][s.key]=s),u.modes.forEach(f=>this.actions[f][u.key]=u),d.modes.forEach(f=>this.actions[f][d.key]=d)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(zS),n.\u0275\u0275inject(GS),n.\u0275\u0275inject(WS),n.\u0275\u0275inject(KS),n.\u0275\u0275inject(HS),n.\u0275\u0275inject(ZS),n.\u0275\u0275inject(qS),n.\u0275\u0275inject(JS),n.\u0275\u0275inject(Z7))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),wf=(()=>{class i{store;metadata;language;actions;logicManager;inlineEdit;fieldSubs=[];constructor(e,t,r,o,s){this.store=e,this.metadata=t,this.language=r,this.actions=o,this.logicManager=s}getEditAction(){const e={store:this.store};this.actions.run({key:"edit"},this.store.getMode(),e)}getDisplayConfig(){return this.metadata.recordViewMetadata$.pipe((0,S.combineLatestWith)(this.store.mode$),(0,v.map)(([e,t])=>({layout:this.getLayout(e),mode:t,maxColumns:e.templateMeta.maxColumns||2,tabDefs:e.templateMeta.tabDefs})))}getPanels(){return this.store.panels$}getRecord(){return this.store.stagingRecord$.pipe((0,S.combineLatestWith)(this.store.mode$),(0,v.map)(([e,t])=>("edit"===t||"create"===t?this.store.initValidators(e):this.store.resetValidatorsForAllFields(e),e.formGroup.enable(),e)))}getLayout(e){let t="panels";return e.templateMeta.useTabs&&(t="tabs"),t}clean(){this.fieldSubs.forEach(e=>e.unsubscribe())}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(yi),n.\u0275\u0275inject(bt),n.\u0275\u0275inject($e),n.\u0275\u0275inject(Df),n.\u0275\u0275inject(il))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),Ef=(()=>{class i{store;metadata;config$;constructor(e,t){this.store=e,this.metadata=t,this.config$=this.metadata.recordViewMetadata$.pipe((0,S.combineLatestWith)(this.store.showTopWidget$),(0,v.map)(([r,o])=>(r.topWidget&&"data-update"===r.topWidget.refreshOn&&(r.topWidget.reload$=this.store.record$.pipe((0,v.map)(()=>!0))),{widget:r.topWidget,show:o})))}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(yi),n.\u0275\u0275inject(bt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),xf=(()=>{class i{store;metadata;config$;constructor(e,t){this.store=e,this.metadata=t,this.config$=this.metadata.recordViewMetadata$.pipe((0,S.combineLatestWith)(this.store.widgets$),(0,v.map)(([r,o])=>(r.bottomWidgets&&r.bottomWidgets.length&&r.bottomWidgets.forEach(s=>{s&&"data-update"===s.refreshOn&&(s.reload$=this.store.record$.pipe((0,v.map)(()=>!0))),s&&(s.subpanelReload$=this.store.subpanelReload$)}),{widgets:r.bottomWidgets||[],show:o})))}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(yi),n.\u0275\u0275inject(bt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})();function q7(i,a){1&i&&(n.\u0275\u0275elementStart(0,"div",7)(1,"div",11)(2,"div",12),n.\u0275\u0275element(3,"div",13),n.\u0275\u0275elementEnd()()())}function J7(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",7)(1,"div",11),n.\u0275\u0275element(2,"scrm-top-widget",14),n.\u0275\u0275elementEnd()()),2&i){const e=n.\u0275\u0275nextContext(3).ngIf,t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(2),n.\u0275\u0275property("config",e.topWidgetConfig.widget)("context",t.getViewContext())("type",e.topWidgetConfig.widget.type)}}function Q7(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,J7,3,3,"div",6),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(2).ngIf,t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.topWidgetConfig.show&&t.hasTopWidgetMetadata(e.topWidgetConfig.widget))}}function X7(i,a){1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275element(1,"scrm-record-content-skeleton"),n.\u0275\u0275elementContainerEnd())}function Y7(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275element(1,"scrm-record-content",15),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(3);n.\u0275\u0275advance(1),n.\u0275\u0275property("dataSource",e.getContentAdapter())}}function ez(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",18),n.\u0275\u0275element(1,"scrm-sidebar-widget",19),n.\u0275\u0275elementEnd()),2&i){const e=a.$implicit,t=n.\u0275\u0275nextContext(4);n.\u0275\u0275advance(1),n.\u0275\u0275property("config",e)("context$",t.getViewContext$())("context",t.getViewContext())("type",e.type)}}function tz(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",16)(1,"div",8),n.\u0275\u0275template(2,ez,2,4,"div",17),n.\u0275\u0275elementEnd()()),2&i){const e=n.\u0275\u0275nextContext(2).ngIf;n.\u0275\u0275advance(2),n.\u0275\u0275property("ngForOf",e.bottomWidgetConfig.widgets)}}function nz(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",20)(1,"div",8),n.\u0275\u0275element(2,"scrm-subpanel-container",21),n.\u0275\u0275elementEnd()()),2&i){const e=n.\u0275\u0275nextContext(3);n.\u0275\u0275advance(2),n.\u0275\u0275property("config",e.getSubpanelsConfig())}}const iz=function(i){return{"col-lg-12":i}};function rz(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"div",4)(2,"div",5),n.\u0275\u0275template(3,q7,4,0,"div",6),n.\u0275\u0275template(4,Q7,2,1,"ng-container",3),n.\u0275\u0275elementStart(5,"div",7)(6,"div",8),n.\u0275\u0275template(7,X7,2,0,"ng-container",3),n.\u0275\u0275template(8,Y7,2,1,"ng-container",3),n.\u0275\u0275elementEnd()(),n.\u0275\u0275template(9,tz,3,1,"div",9),n.\u0275\u0275template(10,nz,3,1,"div",10),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext().ngIf,t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction1(7,iz,!t.sidebarWidgetConfig.show)),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",t.loading),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!t.loading),n.\u0275\u0275advance(3),n.\u0275\u0275property("ngIf",t.loading),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!t.loading),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.bottomWidgetConfig.show&&e.bottomWidgetConfig.widgets),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.showSubpanels)}}function oz(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",18),n.\u0275\u0275element(1,"scrm-sidebar-widget",24),n.\u0275\u0275elementEnd()),2&i){const e=a.$implicit,t=n.\u0275\u0275nextContext(4);n.\u0275\u0275advance(1),n.\u0275\u0275property("type",e.type)("context",t.getViewContext())("context$",t.getViewContext$())("config",e)}}function az(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",23),n.\u0275\u0275template(1,oz,2,4,"div",17),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext(3);n.\u0275\u0275classProp("mt-0",e.swapWidgets),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",e.sidebarWidgetConfig.widgets)}}function sz(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,az,2,3,"div",22),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.displayWidgets)}}function cz(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",1)(1,"div",2),n.\u0275\u0275template(2,rz,11,9,"ng-container",3),n.\u0275\u0275template(3,sz,2,1,"ng-container",3),n.\u0275\u0275elementEnd()()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",!e.swapWidgets||e.swapWidgets&&!e.displayWidgets),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!e.swapWidgets||e.swapWidgets&&e.displayWidgets)}}let Ff=(()=>{class i{recordViewStore;language;metadata;contentAdapter;topWidgetAdapter;sidebarWidgetAdapter;bottomWidgetAdapter;sidebarWidgetHandler;loading=!0;language$=(0,S.of)({});displayWidgets=!0;swapWidgets=!1;sidebarWidgetConfig;vm$;subs=[];constructor(e,t,r,o,s,c,l,u){this.recordViewStore=e,this.language=t,this.metadata=r,this.contentAdapter=o,this.topWidgetAdapter=s,this.sidebarWidgetAdapter=c,this.bottomWidgetAdapter=l,this.sidebarWidgetHandler=u,this.language$=t?.vm$??(0,S.of)({});const d=l?.config$??(0,S.of)({}),f=s?.config$??(0,S.of)({}),p=e?.showSubpanels$??(0,S.of)(!1);this.vm$=this.language$.pipe((0,S.combineLatestWith)(d,f,p),(0,v.map)(([m,h,g,b])=>({language:m,bottomWidgetConfig:h,topWidgetConfig:g,showSubpanels:b})))}ngOnInit(){this.subs.push(this.recordViewStore.loading$.subscribe(e=>{this.loading=e})),this.subs.push(this.sidebarWidgetAdapter.config$.subscribe(e=>{this.sidebarWidgetConfig=e,this.displayWidgets=this.sidebarWidgetConfig.show&&this.sidebarWidgetConfig.widgets})),this.subs.push(this.sidebarWidgetHandler.widgetSwap$.subscribe(e=>{this.swapWidgets=e}))}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe()),this.contentAdapter.clean()}getContentAdapter(){return this.contentAdapter}getSubpanelsConfig(){return{parentModule:this.recordViewStore.getModuleName(),subpanels$:this.recordViewStore.subpanels$,sidebarActive$:this.recordViewStore.widgets$}}getViewContext(){return this.recordViewStore.getViewContext()}getViewContext$(){return this.recordViewStore.viewContext$}hasTopWidgetMetadata(e){return!(!e||!e.type)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(yi),n.\u0275\u0275directiveInject($e),n.\u0275\u0275directiveInject(bt),n.\u0275\u0275directiveInject(wf),n.\u0275\u0275directiveInject(Ef),n.\u0275\u0275directiveInject(Sf),n.\u0275\u0275directiveInject(xf),n.\u0275\u0275directiveInject(gs))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-record-container"]],features:[n.\u0275\u0275ProvidersFeature([wf,Ef,Sf,xf])],decls:2,vars:3,consts:[["class","record-view-container view-container container-fluid pt-3 pb-3 small-font",4,"ngIf"],[1,"record-view-container","view-container","container-fluid","pt-3","pb-3","small-font"],[1,"row"],[4,"ngIf"],[1,"col-lg-9",3,"ngClass"],[1,"container-fluid","pl-0","pr-0"],["class","row no-gutters",4,"ngIf"],[1,"row","no-gutters"],[1,"col"],["class","row no-gutters mt-4",4,"ngIf"],["class","row no-gutters pt-1 pb-4",4,"ngIf"],[1,"col","pb-3"],[1,"d-flex","justify-content-center","widget-bar","rounded","pb-1","pt-3","box-loading"],[1,"d-flex","justify-content-center","align-items-baseline","widget-bar-entry","p-2"],[3,"config","context","type"],[3,"dataSource"],[1,"row","no-gutters","mt-4"],["class","mb-3",4,"ngFor","ngForOf"],[1,"mb-3"],[3,"config","context$","context","type"],[1,"row","no-gutters","pt-1","pb-4"],[3,"config"],["class","col-lg-3 record-widget-container pl-0",3,"mt-0",4,"ngIf"],[1,"col-lg-3","record-widget-container","pl-0"],[3,"type","context","context$","config"]],template:function(t,r){1&t&&(n.\u0275\u0275template(0,cz,4,2,"div",0),n.\u0275\u0275pipe(1,"async")),2&t&&n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(1,1,r.vm$))},dependencies:[F.NgClass,F.NgForOf,F.NgIf,FS,Gd,OS,hf,_M,F.AsyncPipe],encapsulation:2})}return i})(),QS=(()=>{class i extends kS{key="displayType";modes=["edit","detail","list","create","massupdate","filter"];constructor(){super()}runAll(e,t){let r=!0;const o=Object.values(e).filter(u=>{const d=u.modes??[];return!(!d.length||!d.includes(t.store.getMode()))});if(!o||!o.length)return r;let s=t?.action?.display??"show",c="hide";return"hide"===s&&(c="show"),o.some(u=>this.run(t,u))&&(s=c),r="show"===s,r}run(e,t){const r=e.store.recordStore.getStaging();if(!r||!t)return!0;const o=t.params&&t.params.activeOnFields||{},s=Object.keys(o),c=t.params&&t.params.activeOnAttributes||{},l=Object.keys(c);return!s.length&&!l.length||this.isActive(s,r,o,l,c)}isActive(e,t,r,o,s){let c=!0;return(0,ie.isEmpty)(r)||(c=this.areFieldsActive(e,t,r)),(0,ie.isEmpty)(s)||(c=c&&this.areAttributesActive(o,t,s)),c}areAttributesActive(e,t,r){return e.every(o=>{const c=t.fields&&t.fields[o]||null,l=r[o]&&Object.keys(r[o]);if(c&&l&&l.length)return l.some(u=>{const d=r[o][u],f=c.attributes&&c.attributes[u];if(d&&d.length&&f)return this.isValueActive(f,d)})})}areFieldsActive(e,t,r){return e.every(o=>{const c=t.fields&&t.fields[o]||null,l=r[o];return!(c&&l&&l.length)||this.isValueActive(c,l)})}isValueActive(e,t){let r=!1;return e.valueList&&e.valueList.length?(e.valueList.some(o=>t.some(s=>{if(s===o)return r=!0,!0})),r):((0,M.isVoid)(e.value)||t.some(o=>{o===e.value&&(r=!0)}),r)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),If=(()=>{class i extends dr{store;metadata;language;actionManager;asyncActionService;message;confirmation;selectModalService;displayTypeLogic;defaultActions={detail:[{key:"toggle-widgets",labelKey:"LBL_INSIGHTS",params:{expanded:!0},acl:[]}],edit:[{key:"toggle-widgets",labelKey:"LBL_INSIGHTS",params:{expanded:!0},acl:[]}]};constructor(e,t,r,o,s,c,l,u,d){super(o,s,c,l,r,u,t),this.store=e,this.metadata=t,this.language=r,this.actionManager=o,this.asyncActionService=s,this.message=c,this.confirmation=l,this.selectModalService=u,this.displayTypeLogic=d}getActions(e){return this.metadata.recordViewMetadata$.pipe((0,S.combineLatestWith)(this.store.mode$,this.store.record$,this.store.language$,this.store.widgets$,this.store.panels$),(0,v.map)(([t,r])=>r&&t?this.parseModeActions(t.actions,r,this.store.getViewContext()):[]))}buildActionData(e,t){return{store:this.store,action:e}}buildActionInput(e,t,r,o=null){const s=this.store.getBaseRecord();return this.message.removeMessages(),{action:t,module:s.module,id:s.id,params:e&&e.params||[]}}getMode(){return this.store.getMode()}getModuleName(e){return this.store.getModuleName()}reload(e,t,r){this.store.load(!1).pipe((0,v.take)(1)).subscribe()}shouldDisplay(e,t){const r=t?.action?.displayLogic??null;let o=!0;return r&&Object.keys(r).length&&(o=this.displayTypeLogic.runAll(r,t)),!!o&&e&&e.shouldDisplay(t)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(yi),n.\u0275\u0275inject(bt),n.\u0275\u0275inject($e),n.\u0275\u0275inject(Df),n.\u0275\u0275inject(Yt),n.\u0275\u0275inject(dt),n.\u0275\u0275inject(Nn),n.\u0275\u0275inject(kn),n.\u0275\u0275inject(QS))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})();function lz(i,a){if(1&i&&n.\u0275\u0275element(0,"scrm-dynamic-label",13),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("fields",e.record.fields)("labelKey",e.getSummaryTemplate())}}function uz(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",14),n.\u0275\u0275element(1,"scrm-favorite-toggle",15),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("record",e.record)}}function dz(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",16),n.\u0275\u0275element(1,"scrm-action-group-menu",17),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("config",e.actionsAdapter)}}function fz(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"div",3)(2,"div",4)(3,"div",5),n.\u0275\u0275element(4,"div",6),n.\u0275\u0275elementEnd(),n.\u0275\u0275element(5,"div",7),n.\u0275\u0275elementStart(6,"div",5)(7,"div",8)(8,"div",9),n.\u0275\u0275template(9,lz,1,2,"scrm-dynamic-label",10),n.\u0275\u0275template(10,uz,2,1,"div",11),n.\u0275\u0275elementEnd()()(),n.\u0275\u0275element(11,"div",7),n.\u0275\u0275elementStart(12,"div",5),n.\u0275\u0275template(13,dz,2,1,"div",12),n.\u0275\u0275elementEnd()()(),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(9),n.\u0275\u0275property("ngIf",e.record&&e.record.fields),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.record&&e.record.fields&&"create"!==e.mode),n.\u0275\u0275advance(3),n.\u0275\u0275property("ngIf",e.record)}}function pz(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",19)(1,"div",20),n.\u0275\u0275element(2,"scrm-module-title",21)(3,"div",22),n.\u0275\u0275elementEnd()()),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(2),n.\u0275\u0275property("title",e.moduleTitle)}}function mz(i,a){if(1&i&&n.\u0275\u0275element(0,"scrm-dynamic-label",28),2&i){const e=n.\u0275\u0275nextContext(3);n.\u0275\u0275property("fields",e.record.fields)("labelKey",e.getSummaryTemplate())}}function gz(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",14),n.\u0275\u0275element(1,"scrm-favorite-toggle",29),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext(3);n.\u0275\u0275advance(1),n.\u0275\u0275property("record",e.record)}}function hz(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",7),n.\u0275\u0275element(1,"scrm-action-group-menu",30),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext(3);n.\u0275\u0275advance(1),n.\u0275\u0275property("config",e.actionsAdapter)("actionContext",e.getActionContext(e.record))("klass",e.isScrolled?"record-view-actions-scrolled float-right":"record-view-actions float-right")}}function vz(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",19)(1,"div",23)(2,"div",23),n.\u0275\u0275template(3,mz,1,2,"scrm-dynamic-label",24),n.\u0275\u0275template(4,gz,2,1,"div",11),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(5,"div",25)(6,"div",26),n.\u0275\u0275template(7,hz,2,3,"div",27),n.\u0275\u0275elementEnd()()()),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngClass","col-md-5 d-flex align-items-center justify-content-center justify-content-sm-start"),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngClass",e.isScrolled?"record-view-name-scrolled d-flex align-items-center":"record-view-name d-flex align-items-center"),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.record&&e.record.fields),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.record&&e.record.fields&&"create"!==e.mode),n.\u0275\u0275advance(3),n.\u0275\u0275property("ngIf",e.record)}}function _z(i,a){if(1&i&&(n.\u0275\u0275template(0,pz,4,1,"div",18),n.\u0275\u0275template(1,vz,8,5,"div",18)),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275property("ngIf",e.loading),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!e.loading)}}let Af=(()=>{class i{actionsAdapter;recordViewStore;moduleNavigation;record;displayResponsiveTable=!1;mode="detail";loading=!0;isScrolled=!1;subs=[];onScroll(){const e=window.pageYOffset,t=5*parseFloat(getComputedStyle(document.documentElement).fontSize);if(e>t){if(e-t<10)return;this.isScrolled=!0}else{if(t-e<10)return;this.isScrolled=!1}}constructor(e,t,r){this.actionsAdapter=e,this.recordViewStore=t,this.moduleNavigation=r}ngOnInit(){this.mode=this.recordViewStore.getMode(),this.subs.push(this.recordViewStore.mode$.subscribe(e=>{this.mode=e})),this.subs.push(this.recordViewStore.record$.subscribe(e=>{this.record=e})),this.subs.push(this.recordViewStore.loading$.subscribe(e=>{this.loading=e}))}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}get moduleTitle(){return this.moduleNavigation.getModuleLabel(this.recordViewStore.vm.appData.module,this.recordViewStore.vm.appData.language.appListStrings)}getSummaryTemplate(){return this.recordViewStore.getSummaryTemplate()}getActionContext(e){return e?{module:e.module||"",record:e}:{}}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(If),n.\u0275\u0275directiveInject(yi),n.\u0275\u0275directiveInject(Rn))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-record-header"]],hostBindings:function(t,r){1&t&&n.\u0275\u0275listener("scroll",function(){return r.onScroll()},!1,n.\u0275\u0275resolveWindow)},features:[n.\u0275\u0275ProvidersFeature([If])],decls:4,vars:3,consts:[[1,"record-view-header",3,"ngClass"],[4,"ngIf"],[3,"ngIf"],[1,"d-flex","flex-nowrap"],[1,"row"],[1,"col"],[1,"order-3"],[1,"w-100"],[1,"order-2"],[1,"record-view-name","d-flex","align-items-center"],[3,"fields","labelKey",4,"ngIf"],["class","pl-1 d-flex align-items-top",4,"ngIf"],["class","order-1",4,"ngIf"],[3,"fields","labelKey"],[1,"pl-1","d-flex","align-items-top"],[3,"record"],[1,"order-1"],["klass","record-view-actions float-right",3,"config"],["class","row mr-0",4,"ngIf"],[1,"row","mr-0"],[1,"col-md-5","d-flex","align-items-center","justify-content-center","justify-content-sm-start"],[1,"record-view-title","title-font",3,"title"],[1,"record-view-name","pt-3","pb-3"],[3,"ngClass"],["class","d-inline-block h-100 lh-100",3,"fields","labelKey",4,"ngIf"],[1,"col-md-7","d-flex","align-items-center","justify-content-center","justify-content-sm-end"],[1,"row","mr-1","ml-1"],["class","w-100",4,"ngIf"],[1,"d-inline-block","h-100","lh-100",3,"fields","labelKey"],[1,"d-inline-block","h-100","lh-100",3,"record"],["buttonClass","settings-button",3,"config","actionContext","klass"]],template:function(t,r){1&t&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"div",0),n.\u0275\u0275template(2,fz,14,3,"ng-container",1),n.\u0275\u0275template(3,_z,2,2,"ng-template",2),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()),2&t&&(n.\u0275\u0275advance(1),n.\u0275\u0275property("ngClass",r.isScrolled?"record-view-header-scrolled shadow-md":""),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.displayResponsiveTable),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!r.displayResponsiveTable))},dependencies:[F.NgClass,F.NgIf,Id,vo,xr,$M],encapsulation:2})}return i})();function yz(i,a){1&i&&n.\u0275\u0275element(0,"scrm-status-bar")}function bz(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",1)(1,"div",2),n.\u0275\u0275element(2,"scrm-record-header"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(3,"div",3),n.\u0275\u0275element(4,"hr",4),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(5,yz,1,0,"scrm-status-bar",5),n.\u0275\u0275element(6,"scrm-record-container"),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(5),n.\u0275\u0275property("ngIf",e.showStatusBar)}}let Cz=(()=>{class i{appState;recordStore;route;recordSub;vm$=null;showStatusBar=!1;constructor(e,t,r){this.appState=e,this.recordStore=t,this.route=r}ngOnInit(){let e="detail";const t=this.route.snapshot&&this.route.snapshot.data||{};t.mode&&(e=t.mode);let r=this.route.snapshot&&this.route.snapshot.queryParams||{};r={...r};let o=this.route.snapshot.params.record;!0===t.duplicate&&(r.originalDuplicateId=o,r.isDuplicate=!0,o=""),this.recordSub=this.recordStore.init(this.appState.getModule(),o,e,r).subscribe(),this.vm$=this.recordStore.vm$}ngOnDestroy(){this.recordSub&&this.recordSub.unsubscribe(),this.recordStore.destroy()}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(Xt),n.\u0275\u0275directiveInject(dl),n.\u0275\u0275directiveInject(Rt.ActivatedRoute))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-create-record"]],features:[n.\u0275\u0275ProvidersFeature([dl,{provide:yi,useExisting:dl},gs])],decls:2,vars:3,consts:[["class","record-view",4,"ngIf"],[1,"record-view"],[1,"record-view-position-sticky"],[1,"record-view-hr-container"],[1,"record-view-hr"],[4,"ngIf"]],template:function(t,r){1&t&&(n.\u0275\u0275template(0,bz,7,1,"div",0),n.\u0275\u0275pipe(1,"async")),2&t&&n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(1,1,r.vm$))},dependencies:[F.NgIf,Ff,Af,Jd,F.AsyncPipe],encapsulation:2})}return i})(),Tf=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Lr,Ke.AngularSvgIconModule,IS,Wd,BS,vf,yM]})}return i})(),Nf=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,us,_o,Ir,UM]})}return i})();function Mz(i,a){1&i&&n.\u0275\u0275element(0,"scrm-status-bar")}function Sz(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",1)(1,"div",2),n.\u0275\u0275element(2,"scrm-record-header"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(3,"div",3),n.\u0275\u0275element(4,"hr",4),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(5,Mz,1,0,"scrm-status-bar",5),n.\u0275\u0275element(6,"scrm-record-container"),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(5),n.\u0275\u0275property("ngIf",e.showStatusBar)}}let Dz=(()=>{class i{appState;recordStore;route;sidebarWidgetHandler;recordSub;vm$=null;showStatusBar=!1;constructor(e,t,r,o){this.appState=e,this.recordStore=t,this.route=r,this.sidebarWidgetHandler=o}ngOnInit(){let e="detail";const t=this.route.snapshot&&this.route.snapshot.data||{};t.mode&&(e=t.mode);const r=this.route.snapshot&&this.route.snapshot.queryParams||{};this.recordSub=this.recordStore.init(this.appState.getModule(),this.route.snapshot.params.record,e,r).subscribe(),this.vm$=this.recordStore.vm$}ngOnDestroy(){this.recordSub&&this.recordSub.unsubscribe(),this.sidebarWidgetHandler.destroy(),this.recordStore.destroy()}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(Xt),n.\u0275\u0275directiveInject(yi),n.\u0275\u0275directiveInject(Rt.ActivatedRoute),n.\u0275\u0275directiveInject(gs))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-record"]],features:[n.\u0275\u0275ProvidersFeature([yi,gs])],decls:2,vars:3,consts:[["class","record-view",4,"ngIf"],[1,"record-view"],[1,"record-view-position-sticky"],[1,"record-view-hr-container"],[1,"record-view-hr"],[4,"ngIf"]],template:function(t,r){1&t&&(n.\u0275\u0275template(0,Sz,7,1,"div",0),n.\u0275\u0275pipe(1,"async")),2&t&&n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(1,1,r.vm$))},dependencies:[F.NgIf,Ff,Af,Jd,F.AsyncPipe],encapsulation:2})}return i})(),XS=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Jn,Tf,Nf,ef,ul]})}return i})(),wz=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Jn,XS,Tf,Nf,ef,ul]})}return i})();class YS extends M.ActionHandler{}let eD=(()=>{class i extends YS{message;asyncActionService;router;modalService;state;localStorage;key="install";modes=["edit"];constructor(e,t,r,o,s,c){super(),this.message=e,this.asyncActionService=t,this.router=r,this.modalService=o,this.state=s,this.localStorage=c}run(e){e.store.recordStore.validate().pipe((0,v.take)(1)).subscribe(t=>{if(t){const r=e.store.recordStore.getStaging();this.runInstall(r)}else this.message.addWarningMessageByKey("LBL_VALIDATION_ERRORS")})}shouldDisplay(){return!0}runInstall(e){const t=`suitecrm-app-${this.key}`;this.message.removeMessages(),this.asyncActionService.run(t,{action:t,module:e.module,id:e.id,payload:e.formGroup.value}).pipe((0,v.take)(1)).subscribe(o=>{3===o.data.statusCode&&this.openErrorModalDialog(o.data.errors),0===o.data.statusCode&&(this.state.clear(),this.localStorage.clear(),this.router.navigate(["/"],{}).then())})}openErrorModalDialog(e){this.modalService.open(Fd,{ariaLabelledBy:"modal-basic-title",centered:!0,size:"lg",windowClass:"custom-modal",modalDialogClass:"custom-modal"}).componentInstance.errors=e}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(dt),n.\u0275\u0275inject(Yt),n.\u0275\u0275inject(Rt.Router),n.\u0275\u0275inject(pe.NgbModal),n.\u0275\u0275inject(bd),n.\u0275\u0275inject(wr))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Lf=(()=>{class i extends vi{save;constructor(e){super(),this.save=e,e.modes.forEach(t=>this.actions[t][e.key]=e)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(eD))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const tD={loading:!1,mode:"detail",params:{returnModule:"",returnId:"",returnAction:""}};let Ia=(()=>{class i{recordFetchGQL;recordSaveGQL;message;recordManager;recordStoreFactory;language;record$;stagingRecord$;loading$;mode$;viewContext$;vm$;vm;recordStore;cache$=null;internalState=(0,M.deepClone)(tD);store=new S.BehaviorSubject(this.internalState);state$=this.store.asObservable();subs=[];constructor(e,t,r,o,s,c){this.recordFetchGQL=e,this.recordSaveGQL=t,this.message=r,this.recordManager=o,this.recordStoreFactory=s,this.language=c,this.recordStore=s.create(this.getViewFieldsObservable()),this.record$=this.recordStore.state$.pipe((0,v.distinctUntilChanged)()),this.stagingRecord$=this.recordStore.staging$.pipe((0,v.distinctUntilChanged)()),this.loading$=this.state$.pipe((0,v.map)(l=>l.loading)),this.mode$=this.state$.pipe((0,v.map)(l=>l.mode)),this.vm$=this.record$.pipe((0,S.combineLatestWith)(this.loading$),(0,v.map)(([l,u])=>(this.vm={record:l,loading:u},this.vm))),this.viewContext$=this.record$.pipe((0,v.map)(()=>this.getViewContext()))}get params(){return this.internalState.params||{}}set params(e){this.updateState({...this.internalState,params:e})}getViewContext(){return{record:this.getBaseRecord()}}getActions(){return(0,S.of)([])}init(e="edit",t={}){this.setMode(e),this.recordStore.init({id:"",module:"install",attributes:{}})}clear(){this.cache$=null,this.updateState((0,M.deepClone)(tD))}clearAuthBased(){this.clear()}getBaseRecord(){return this.internalState?this.recordStore.getBaseRecord():null}getMode(){return this.internalState?this.internalState.mode:null}setMode(e){this.updateState({...this.internalState,mode:e})}getLicenseText(){return this.language.getFieldLabel("SUITE8_LICENSE_CONTENT")}getMetadata(){return{actions:[],templateMeta:{maxColumns:2,useTabs:!0,tabDefs:{LBL_CONFIG:{newTab:!0,panelDefault:"expanded"}}},panels:[{key:"LBL_CONFIG",display$:(0,S.of)(!0).pipe((0,v.shareReplay)(1)),rows:[{cols:[{name:"site_host",label:"LBL_SITECFG_URL",type:"varchar",fieldDefinition:{name:"site_host",vname:"LBL_SITECFG_URL",type:"varchar",required:!0}},{name:"demoData",label:"LBL_DBCONF_DEMO_DATA",type:"enum",fieldDefinition:{name:"demoData",vname:"LBL_DBCONF_DEMO_DATA",type:"enum",options:"__no_options__",required:!0,metadata:{extraOptions:[{value:"yes",labelKey:"LBL_YES"},{value:"no",labelKey:"LBL_NO"}]}}}]},{cols:[{name:"db_config",label:"LBL_DBCONF_TITLE",type:"grouped-field",fieldDefinition:{name:"db_config",vname:"LBL_DBCONF_TITLE",type:"grouped-field",layout:["db_username","db_password","db_host","db_name","db_port"],display:"vertical",groupFields:{db_username:{name:"db_username",type:"varchar",vname:"LBL_DBCONF_SUITE_DB_USER",labelKey:"LBL_DBCONF_SUITE_DB_USER",label:"LBL_DBCONF_SUITE_DB_USER",showLabel:["*"],required:!0},db_password:{name:"db_password",type:"password",vname:"LBL_DBCONF_DB_PASSWORD",labelKey:"LBL_DBCONF_DB_PASSWORD",showLabel:["*"],required:!0},db_host:{name:"db_host",type:"varchar",vname:"LBL_DBCONF_HOST_NAME",labelKey:"LBL_DBCONF_HOST_NAME",showLabel:["*"],required:!0},db_name:{name:"db_name",type:"varchar",vname:"LBL_DBCONF_DB_NAME",labelKey:"LBL_DBCONF_DB_NAME",showLabel:["*"],required:!0},db_port:{name:"db_port",type:"varchar",vname:"LBL_DBCONF_DB_PORT",labelKey:"LBL_DBCONF_DB_PORT",showLabel:["*"],required:!1}},showLabel:{edit:["*"]}}},{name:"admin_config",label:"LBL_SITECFG_TITLE",type:"grouped-field",fieldDefinition:{name:"admin_config",vname:"LBL_SITECFG_TITLE",type:"grouped-field",layout:["site_username","site_password"],display:"vertical",groupFields:{site_username:{name:"site_username",type:"varchar",vname:"LBL_SITECFG_ADMIN_Name",labelKey:"LBL_SITECFG_ADMIN_Name",showLabel:["edit"],required:!0},site_password:{name:"site_password",type:"password",vname:"LBL_SITECFG_ADMIN_PASS",labelKey:"LBL_SITECFG_ADMIN_PASS",showLabel:["edit"],required:!0}},showLabel:{edit:["*"]}}}]}]}]}}getMetadata$(){return(0,S.of)(this.getMetadata())}getModuleName(){return"install"}parseParams(e={}){if(!e)return;const t={...this.internalState.params};Object.keys(e).forEach(r=>{(0,M.isVoid)(t[r])||(t[r]=e[r])}),this.params=e}updateState(e){this.store.next(this.internalState=e)}getIgnoreSystemChecksField(){return this.recordStore.getStaging().fields.sys_check_option}getViewFieldsObservable(){return this.getMetadata$().pipe((0,v.map)(e=>{const t=[];return e.panels.forEach(r=>{r.rows.forEach(o=>{o.cols.forEach(s=>{t.push(s)})})}),t.push({name:"sys_check_option",type:"boolean",fieldDefinition:{name:"sys_check_option",type:"boolean",vname:"LBL_SYS_CHECK_WARNING",labelKey:"LBL_SYS_CHECK_WARNING",showLabel:["edit"],required:!1,value:"false",default:"false"}}),t}))}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Qr),n.\u0275\u0275inject(Xr),n.\u0275\u0275inject(dt),n.\u0275\u0275inject(_i),n.\u0275\u0275inject(Yr),n.\u0275\u0275inject($e))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),Of=(()=>{class i extends dr{store;metadata;language;actionManager;asyncActionService;message;confirmation;selectModalService;defaultActions={detail:[],edit:[{key:"install",labelKey:"LBL_PROCEED",params:{expanded:!0},acl:[]}],create:[]};collapseButtons=!1;constructor(e,t,r,o,s,c,l,u){super(o,s,c,l,r,u,t),this.store=e,this.metadata=t,this.language=r,this.actionManager=o,this.asyncActionService=s,this.message=c,this.confirmation=l,this.selectModalService=u}getActions(e){return this.store.getActions().pipe((0,S.combineLatestWith)(this.store.mode$,this.store.stagingRecord$),(0,v.map)(([t,r])=>r?this.parseModeActions(t,r,this.store.getViewContext()):[]))}buildActionData(e,t){return{store:this.store}}buildActionInput(e,t,r,o=null){const s=this.store.getBaseRecord();return this.message.removeMessages(),{action:t,module:s.module,id:s.id,record:s}}getMode(){return this.store.getMode()}getModuleName(e){return this.store.getModuleName()}reload(e,t,r){}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Ia),n.\u0275\u0275inject(bt),n.\u0275\u0275inject($e),n.\u0275\u0275inject(Lf),n.\u0275\u0275inject(Yt),n.\u0275\u0275inject(dt),n.\u0275\u0275inject(Nn),n.\u0275\u0275inject(kn))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),Bf=(()=>{class i{store;metadata;language;actions;inlineEdit;constructor(e,t,r,o){this.store=e,this.metadata=t,this.language=r,this.actions=o}getEditAction(){}getDisplayConfig(){return this.store.getMetadata$().pipe((0,S.combineLatestWith)(this.store.mode$),(0,v.map)(([e,t])=>({layout:this.getLayout(e),mode:t,maxColumns:e.templateMeta.maxColumns||2,tabDefs:e.templateMeta.tabDefs})))}getPanels(){return this.store.getMetadata$().pipe((0,S.combineLatestWith)(this.store.stagingRecord$,this.language.vm$),(0,v.map)(([e,t,r])=>{const o=[],s=t&&t.module||"";return e.panels.forEach(c=>{const u={label:this.language.getFieldLabel(c.key.toUpperCase(),s,r),key:c.key,display$:c?.display$??(0,S.of)(!0).pipe((0,v.shareReplay)(1)),rows:[]};c.rows.forEach(d=>{const f={cols:[]};d.cols.forEach(p=>{f.cols.push({...p})}),u.rows.push(f)}),o.push(u)}),o}))}getRecord(){return this.store.stagingRecord$}getLayout(e){let t="panels";return e.templateMeta.useTabs&&(t="tabs"),t}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Ia),n.\u0275\u0275inject(bt),n.\u0275\u0275inject($e),n.\u0275\u0275inject(Lf))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),nD=(()=>{class i{metadata;contentAdapter;constructor(e,t){this.metadata=e,this.contentAdapter=t}getContentAdapter(){return this.contentAdapter}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(bt),n.\u0275\u0275directiveInject(Bf))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-install-container"]],features:[n.\u0275\u0275ProvidersFeature([Bf])],decls:4,vars:1,consts:[[1,"install-view-container","record-view-container","view-container","container-fluid","pt-3","pb-3","small-font"],[1,"row","no-gutters"],[1,"col"],[3,"dataSource"]],template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div",2),n.\u0275\u0275element(3,"scrm-record-content",3),n.\u0275\u0275elementEnd()()()),2&t&&(n.\u0275\u0275advance(3),n.\u0275\u0275property("dataSource",r.getContentAdapter()))},dependencies:[Gd],encapsulation:2})}return i})(),iD=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Ke.AngularSvgIconModule,Wd]})}return i})();function Ez(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),n.\u0275\u0275element(5,"scrm-label",5),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(6,"div",6),n.\u0275\u0275element(7,"scrm-label",7),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(8,"div",8)(9,"div",9)(10,"div",10)(11,"div",11)(12,"div",12)(13,"label",13),n.\u0275\u0275element(14,"scrm-label",14),n.\u0275\u0275elementEnd(),n.\u0275\u0275text(15,": "),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(16,"div",15)(17,"div",16),n.\u0275\u0275element(18,"scrm-field",17),n.\u0275\u0275elementEnd()()(),n.\u0275\u0275elementStart(19,"div"),n.\u0275\u0275element(20,"scrm-action-group-menu",18),n.\u0275\u0275elementEnd()()()()()(),n.\u0275\u0275elementContainerEnd()),2&i){const e=a.ngIf,t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(14),n.\u0275\u0275property("labelKey",t.store.getIgnoreSystemChecksField().definition.vname),n.\u0275\u0275advance(4),n.\u0275\u0275property("field",t.store.getIgnoreSystemChecksField())("mode","edit")("record",e.record)("type",t.store.getIgnoreSystemChecksField().type),n.\u0275\u0275advance(2),n.\u0275\u0275property("actionContext",t.getActionContext(e.record))("config",t.actionsAdapter)}}let rD=(()=>{class i{actionsAdapter;store;vm$;constructor(e,t){this.actionsAdapter=e,this.store=t,this.vm$=this.store?.record$?this.store.record$.pipe((0,v.map)(r=>({record:r}))):(0,S.of)({record:null})}getActionContext(e){return e?{module:e.module||"",record:e}:{}}getTitle(){}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(Of),n.\u0275\u0275directiveInject(Ia))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-install-header"]],features:[n.\u0275\u0275ProvidersFeature([Of])],decls:2,vars:3,consts:[[4,"ngIf"],[1,"install-view-header"],[1,"row","mr-0"],[1,"col-md-4","install-header-title-col"],[1,"install-view-title","record-view-name"],["labelKey","LBL_WELCOME","module","install"],[1,"install-view-subtitle","record-view-title"],["labelKey","LBL_INSTALL","module","install"],[1,"col-md-8","install-header-buttons-col"],[1,"row","mr-1","ml-1"],[1,"w-100","d-flex","justify-content-end","align-items-center"],[1,"w-100","install-header-options","d-flex","justify-content-end","align-items-center","pr-5"],[1,"label-container","pr-2"],[1,"m-0","small"],[3,"labelKey"],[1,"d-flex"],[1,"flex-grow-1","text-break"],[3,"field","mode","record","type"],["buttonClass","settings-button","klass","install-view-actions float-right",3,"actionContext","config"]],template:function(t,r){1&t&&(n.\u0275\u0275template(0,Ez,21,7,"ng-container",0),n.\u0275\u0275pipe(1,"async")),2&t&&n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(1,1,r.vm$))},dependencies:[F.NgIf,xr,zt,lr,F.AsyncPipe],encapsulation:2})}return i})(),oD=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,us,Ir,Ut,Jn]})}return i})();function xz(i,a){1&i&&(n.\u0275\u0275elementStart(0,"div",1),n.\u0275\u0275element(1,"scrm-install-header"),n.\u0275\u0275elementStart(2,"div",2),n.\u0275\u0275element(3,"hr",3),n.\u0275\u0275elementEnd(),n.\u0275\u0275element(4,"scrm-install-container"),n.\u0275\u0275elementEnd())}let Fz=(()=>{class i{store;route;vm$=null;showStatusBar=!1;constructor(e,t){this.store=e,this.route=t,this.vm$=this.store?.vm$??(0,S.of)({record:null,loading:!0})}ngOnInit(){let e="edit";const t=this.route.snapshot&&this.route.snapshot.data||{};t.mode&&(e=t.mode),this.store&&(this.store.init(e),this.vm$=this.store.vm$)}ngOnDestroy(){this.store?.clear()}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(Ia),n.\u0275\u0275directiveInject(Rt.ActivatedRoute))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-install-view"]],features:[n.\u0275\u0275ProvidersFeature([Ia])],decls:2,vars:3,consts:[["class","install-view",4,"ngIf"],[1,"install-view"],[1,"record-view-hr-container"],[1,"record-view-hr"]],template:function(t,r){1&t&&(n.\u0275\u0275template(0,xz,5,0,"div",0),n.\u0275\u0275pipe(1,"async")),2&t&&n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(1,1,r.vm$))},dependencies:[F.NgIf,rD,nD,F.AsyncPipe],encapsulation:2})}return i})(),Iz=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Jn,oD,iD]})}return i})();class Rf extends YM{}let aD=(()=>{class i extends Rf{message;asyncActionService;confirmation;asyncAction;key="bulk-action";modes=["detail","edit","list","create","massupdate"];constructor(e,t,r,o){super(),this.message=e,this.asyncActionService=t,this.confirmation=r,this.asyncAction=o}run(e){const t=e.action,r=e.listStore.recordList.selection,o=t&&t.params||{};if((0,M.isFalse)(o.allowAll)&&r.all)this.message.addDangerMessage(e.listStore.appStrings.LBL_SELECT_ALL_NOT_ALLOWED);else{if(o.min&&r.count<o.min){let s=e.listStore.appStrings.LBL_TOO_FEW_SELECTED;return s=s.replace("{min}",o.min),void this.message.addDangerMessage(s)}if(o.max&&r.count>o.max){let s=e.listStore.appStrings.LBL_TOO_MANY_SELECTED;return s=s.replace("{max}",o.max),void this.message.addDangerMessage(s)}this.runBulkAction(e)}}shouldDisplay(){return!0}runBulkAction(e){const t=`bulk-${e.action.params.bulkAction}`,r=this.buildActionInput(t,e);this.asyncAction.run(t,r).subscribe(o=>{this.handleProcessResult(o,e)})}buildActionInput(e,t){const r=[];t.listStore.metadata.listView.fields.forEach(c=>{r.push(c.name)});const o={action:e,module:t.listStore.getModuleName(),criteria:null,sort:null,ids:null,fields:r,payload:{panelRecord:t.store.recordStore.getBaseStaging()}},s=t.listStore.recordList.selection;return s.all&&s.count>t.listStore.recordList.records.length&&(o.criteria=t.listStore.recordList.criteria,o.sort=t.listStore.recordList.sort),s.all&&s.count<=t.listStore.recordList.records.length&&(o.ids=[],t.listStore.recordList.records.forEach(c=>{t.ids.push(c.id)})),s.all||(o.ids=Object.keys(s.selected)),o}handleProcessResult(e,t){e.data&&e.data.reload&&(t.listStore.recordList.clearSelection(),t.listStore.load(!1).pipe((0,v.take)(1)).subscribe()),e.data&&e.data.dataUpdated&&t.listStore.triggerDataUpdate(),t.listStore.closeRecordPanel()}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(dt),n.\u0275\u0275inject(Yt),n.\u0275\u0275inject(Nn),n.\u0275\u0275inject(Yt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),sD=(()=>{class i extends Rf{key="cancel";modes=["detail","edit","list","create","massupdate"];constructor(){super()}run(e){e.listStore.closeRecordPanel()}shouldDisplay(){return!0}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),jf=(()=>{class i extends vi{constructor(e,t){super(),e.modes.forEach(r=>this.actions[r][e.key]=e),t.modes.forEach(r=>this.actions[r][t.key]=t)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(aD),n.\u0275\u0275inject(sD))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),cD=(()=>{class i{store;message;confirmation;selectModalService;asyncAction;metadata;constructor(e,t,r,o,s,c){this.store=e,this.message=t,this.confirmation=r,this.selectModalService=o,this.asyncAction=s,this.metadata=c}getBulkActions(){return this.store.metadata$.pipe((0,v.map)(e=>e.listView.bulkActions))}executeBulkAction(e){const t=this.store.recordList.selection,r=this.store.metadata.listView.bulkActions[e],o=`bulk-${e}`;if(this.message.removeMessages(),(0,M.isFalse)(r.params.allowAll)&&t.all)return void this.message.addDangerMessage(this.store.appStrings.LBL_SELECT_ALL_NOT_ALLOWED);if(r.params.min&&t.count<r.params.min){let h=this.store.appStrings.LBL_TOO_FEW_SELECTED;return h=h.replace("{min}",r.params.min),void this.message.addDangerMessage(h)}if(r.params.max&&t.count>r.params.max){let h=this.store.appStrings.LBL_TOO_MANY_SELECTED;return h=h.replace("{max}",r.params.max),void this.message.addDangerMessage(h)}const s=[];this.store.metadata.listView.fields.forEach(h=>{s.push(h.name)});const c={action:o,module:this.store.getModuleName(),criteria:null,sort:null,ids:null,fields:s};t.all&&t.count>this.store.recordList.records.length&&(c.criteria=this.store.recordList.criteria,c.sort=this.store.recordList.sort),t.all&&t.count<=this.store.recordList.records.length&&(c.ids=[],this.store.recordList.records.forEach(h=>{c.ids.push(h.id)})),t.all||(c.ids=Object.keys(t.selected));const l=r&&r.params||{},u=l.displayConfirmation||!1,d=l.confirmationLabel||"",f=r.params&&r.params.selectModal,p=f&&f.module,m=r.params&&r.params.recordPanel;m?this.store.openRecordPanel(m):u?this.confirmation.showModal(d,()=>{p?this.showSelectModal(f.module,o,c):this.runBulkAction(o,c)}):p?this.showSelectModal(f.module,o,c):this.runBulkAction(o,c)}showSelectModal(e,t,r){this.selectModalService.showSelectModal(e,o=>{if(o){const{fields:s,formGroup:c,...l}=o;r.modalRecord=l}this.runBulkAction(t,r)})}runBulkAction(e,t){this.asyncAction.run(e,t).subscribe(r=>{this.handleProcessResult(r)})}handleProcessResult(e){e.data&&e.data.reload&&(this.store.recordList.clearSelection(),this.store.load(!1).pipe((0,v.take)(1)).subscribe()),e.data&&e.data.dataUpdated&&this.store.triggerDataUpdate(),this.reloadMetadata(this.store.getModuleName(),e)}reloadMetadata(e,t){const r=[];this.shouldReloadRecentlyViewed(t)&&r.push(this.metadata.typeKeys.recentlyViewed),this.shouldReloadFavorites(t)&&r.push(this.metadata.typeKeys.favorites),r&&r.length&&this.metadata.reloadModuleMetadata(e,r,!1).pipe((0,v.take)(1)).subscribe()}shouldReloadRecentlyViewed(e){return!(!e.data||!e.data.reloadRecentlyViewed)}shouldReloadFavorites(e){return!(!e.data||!e.data.reloadFavorites)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(ni),n.\u0275\u0275inject(dt),n.\u0275\u0275inject(Nn),n.\u0275\u0275inject(kn),n.\u0275\u0275inject(Yt),n.\u0275\u0275inject(bt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),lD=(()=>{class i{message;confirmation;selectModalService;asyncAction;metadata;constructor(e,t,r,o,s){this.message=e,this.confirmation=t,this.selectModalService=r,this.asyncAction=o,this.metadata=s}create(e){return new cD(e,this.message,this.confirmation,this.selectModalService,this.asyncAction,this.metadata)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(dt),n.\u0275\u0275inject(Nn),n.\u0275\u0275inject(kn),n.\u0275\u0275inject(Yt),n.\u0275\u0275inject(bt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),kf=(()=>{class i{store;constructor(e){this.store=e}getConfig(){return{savedFilterEdit:!0,displayHeader:!0,module:this.store.getModuleName(),filter$:this.store.openFilter$,savedFilters$:this.store.filterList.records$,searchFields$:this.store.metadata$.pipe((0,v.map)(e=>{if(!e||!e.search)return{};const t=e.search;let r="advanced";return t.layout.advanced||(r="basic"),t.layout[r]})),listFields:this.store.metadata.listView.fields,onClose:()=>{this.store.showFilters=!1},onSearch:()=>{this.store.showFilters=!1},updateFilter:(e,t=!0)=>{const r={};r[e.key]=e,this.store.setFilters(r,t)},resetFilter:e=>{this.store.resetFilters(e)},addSavedFilter:e=>{this.store.addSavedFilter(e)},removeSavedFilter:e=>{this.store.removeSavedFilter(e)},setOpenFilter:e=>{this.store.setOpenFilter(e)}}}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(ni))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),uD=(()=>{class i extends jM{store;actionManager;asyncActionService;message;confirmation;language;selectModalService;metadata;constructor(e,t,r,o,s,c,l,u){super(t,r,o,s,c,l,u),this.store=e,this.actionManager=t,this.asyncActionService=r,this.message=o,this.confirmation=s,this.language=c,this.selectModalService=l,this.metadata=u}getActions(e=null){return this.store.lineActions$.pipe((0,S.combineLatestWith)((0,S.of)("list").pipe((0,v.shareReplay)())),(0,v.map)(([t,r])=>this.parseModeActions(t,r,e)))}getModuleName(e){return this.store.getModuleName()}reload(e,t,r){this.store.recordList.clearSelection(),this.store.recordList.resetPagination()}getMode(){return"list"}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(ni),n.\u0275\u0275inject(sl),n.\u0275\u0275inject(Yt),n.\u0275\u0275inject(dt),n.\u0275\u0275inject(Nn),n.\u0275\u0275inject($e),n.\u0275\u0275inject(kn),n.\u0275\u0275inject(bt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})();class Pf extends M.ActionHandler{navigateBack(a,e,t,r,o){let s=a.getReturnModule(e),c=a.getReturnAction(e),l=a.getReturnId(e);t!==l&&(s===r&&"record"===c&&l!==t||!s||!c||a.navigateBack(o,r,e))}}let dD=(()=>{class i extends Pf{key="async-process";modes=M.ALL_VIEW_MODES;constructor(){super()}run(e){}shouldDisplay(e){return!0}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),fD=(()=>{class i extends Pf{key="select-columns";modes=["list"];constructor(){super()}run(e){e.store.openColumnChooserDialog()}shouldDisplay(e){return!0}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),$f=(()=>{class i extends vi{async;selectColumns;constructor(e,t){super(),this.async=e,this.selectColumns=t,t.modes.forEach(r=>this.actions[r][t.key]=t),e.modes.forEach(r=>this.actions[r][e.key]=e)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(dD),n.\u0275\u0275inject(fD))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),pD=(()=>{class i extends Ad{store;actionManager;asyncActionService;message;confirmation;language;selectModalService;metadata;constructor(e,t,r,o,s,c,l,u){super(t,r,o,s,c,l,u),this.store=e,this.actionManager=t,this.asyncActionService=r,this.message=o,this.confirmation=s,this.language=c,this.selectModalService=l,this.metadata=u}buildActionData(e,t){return{store:this.store,action:e}}getActionName(e){return`table-action-${e.key}`}buildActionInput(e,t,r,o=null){const s=this.store.recordList.selection,c=[];this.store.metadata.listView.fields.forEach(u=>{c.push(u.name)});const l={action:t,module:r,criteria:null,sort:null,ids:null,fields:c,params:e&&e.params||[]};return s.all&&s.count>this.store.recordList.records.length&&(l.criteria=this.store.recordList.criteria,l.sort=this.store.recordList.sort),s.all&&s.count<=this.store.recordList.records.length&&(l.ids=[],this.store.recordList.records.forEach(u=>{l.ids.push(u.id)})),s.all||(l.ids=Object.keys(s.selected)),l}getActions(e=null){return this.store.tableActions$.pipe((0,S.combineLatestWith)((0,S.of)("list").pipe((0,v.shareReplay)())),(0,v.map)(([t,r])=>this.parseModeActions(t,r,e)))}getModuleName(e){return this.store.getModuleName()}reload(e,t,r){this.store.recordList.clearSelection(),this.store.recordList.resetPagination()}getMode(){return"list"}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(ni),n.\u0275\u0275inject($f),n.\u0275\u0275inject(Yt),n.\u0275\u0275inject(dt),n.\u0275\u0275inject(Nn),n.\u0275\u0275inject($e),n.\u0275\u0275inject(kn),n.\u0275\u0275inject(bt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),mD=(()=>{class i{actionManager;asyncActionService;message;confirmation;language;selectModalService;metadata;constructor(e,t,r,o,s,c,l){this.actionManager=e,this.asyncActionService=t,this.message=r,this.confirmation=o,this.language=s,this.selectModalService=c,this.metadata=l}create(e){return new pD(e,this.actionManager,this.asyncActionService,this.message,this.confirmation,this.language,this.selectModalService,this.metadata)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject($f),n.\u0275\u0275inject(Yt),n.\u0275\u0275inject(dt),n.\u0275\u0275inject(Nn),n.\u0275\u0275inject($e),n.\u0275\u0275inject(kn),n.\u0275\u0275inject(bt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),gD=(()=>{class i extends dr{store;listStore;language;actionManager;asyncActionService;message;confirmation;selectModalService;metadata;collapseButtons=!1;constructor(e,t,r,o,s,c,l,u,d){super(o,s,c,l,r,u,d),this.store=e,this.listStore=t,this.language=r,this.actionManager=o,this.asyncActionService=s,this.message=c,this.confirmation=l,this.selectModalService=u,this.metadata=d}getActions(e){return this.store.meta$.pipe((0,S.combineLatestWith)(this.store.mode$,this.store.stagingRecord$,this.language.vm$),(0,v.map)(([t,r,o,s])=>r&&t?this.parseModeActions(t.actions,r):[]))}buildActionData(e,t){return{store:this.store,listStore:this.listStore,action:e}}getMode(){return this.store.getMode()}getModuleName(e){return this.store.getModuleName()}reload(e,t,r){this.listStore.load(!1).pipe((0,v.take)(1)).subscribe()}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(uf),n.\u0275\u0275inject(ni),n.\u0275\u0275inject($e),n.\u0275\u0275inject(jf),n.\u0275\u0275inject(Yt),n.\u0275\u0275inject(dt),n.\u0275\u0275inject(Nn),n.\u0275\u0275inject(kn),n.\u0275\u0275inject(bt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),hD=(()=>{class i{language;actionManager;asyncActionService;message;confirmation;selectModalService;metadata;constructor(e,t,r,o,s,c,l){this.language=e,this.actionManager=t,this.asyncActionService=r,this.message=o,this.confirmation=s,this.selectModalService=c,this.metadata=l}create(e,t){const r=new gD(e,t,this.language,this.actionManager,this.asyncActionService,this.message,this.confirmation,this.selectModalService,this.metadata),o=t?.recordPanelConfig?.collapseActions??null;return null!==o&&(r.collapseButtons=o),r}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject($e),n.\u0275\u0275inject(jf),n.\u0275\u0275inject(Yt),n.\u0275\u0275inject(dt),n.\u0275\u0275inject(Nn),n.\u0275\u0275inject(kn),n.\u0275\u0275inject(bt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Uf=(()=>{class i{store;recordPanelStoreFactory;actionAdapterFactory;recordManager;constructor(e,t,r,o){this.store=e,this.recordPanelStoreFactory=t,this.actionAdapterFactory=r,this.recordManager=o}getConfig(){const e=this.createStore();return{module:this.getModule(),title:this.store.recordPanelConfig&&this.store.recordPanelConfig.title||"",store:e,meta:this.store.recordPanelConfig,actions:this.createActionAdapter(e),onClose:()=>{this.store.closeRecordPanel()}}}getModule(){return this.store.recordPanelConfig.module||this.store.getModuleName()}getViewMode(){return this.store.recordPanelConfig.mode||"edit"}createStore(){const e=this.recordPanelStoreFactory.create(),t=this.recordManager.buildEmptyRecord(this.getModule());return e.setMetadata(this.store.recordPanelConfig),e.initRecord(t,this.getViewMode(),!1),e}createActionAdapter(e){return this.actionAdapterFactory.create(e,this.store)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(ni),n.\u0275\u0275inject(tS),n.\u0275\u0275inject(hD),n.\u0275\u0275inject(_i))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),Vf=(()=>{class i{store;metadata;metadata$=this.metadata?.listMetadata$??(0,S.of)({sidebarWidgets:[]});config$=this.metadata$.pipe((0,S.combineLatestWith)(this.store?.showSidebarWidgets$??(0,S.of)(!1),this.store?.widgets$??(0,S.of)([])),(0,v.map)(([e,t,r])=>(e.sidebarWidgets&&e.sidebarWidgets.length&&e.sidebarWidgets.forEach(o=>{o&&"data-update"===o.refreshOn?o.reload$=(this.store?.dataSetUpdate$??(0,S.of)(null)).pipe((0,v.map)(()=>!0)):o&&"data-reload"===o.refreshOn&&(o.reload$=(this.store?.records$??(0,S.of)([])).pipe((0,v.map)(()=>!0)))}),{widgets:e.sidebarWidgets||[],show:t,widgetsEnabled:r})));constructor(e,t){this.store=e,this.metadata=t}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(ni),n.\u0275\u0275inject(bt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),zf=(()=>{class i{store;metadata;actionManager;asyncActionService;message;confirmation;language;bulkActionsAdapterFactory;listviewTableActionsAdapterFactory;selectModalService;preferences;systemConfigs;constructor(e,t,r,o,s,c,l,u,d,f,p,m){this.store=e,this.metadata=t,this.actionManager=r,this.asyncActionService=o,this.message=s,this.confirmation=c,this.language=l,this.bulkActionsAdapterFactory=u,this.listviewTableActionsAdapterFactory=d,this.selectModalService=f,this.preferences=p,this.systemConfigs=m}getTable(){return{showHeader:!0,showFooter:!0,module:this.store.getModuleName(),columns:this.store.columns$,lineActions:this.getLineActionsDataSource(),selection$:this.store.selection$,sort$:this.store.sort$,maxColumns$:(0,S.of)(4),loading$:this.store.recordList.loading$,dataSource:this.store.recordList,selection:this.store.recordList,bulkActions:this.getBulkActionsDataSource(this.store),tableActions:this.getTableActions(this.store),pagination:this.store.recordList,paginationType:this.preferences.getUserPreference("listview_pagination_type")??this.systemConfigs.getConfigValue("listview_pagination_type"),toggleRecordSelection:e=>{this.store.recordList.toggleSelection(e)},updateSorting:(e,t)=>{this.store.recordList.updateSorting(e,t),this.store.updateSortLocalStorage()},maxListHeight:this.preferences.getUserPreference("listview_max_height")??this.systemConfigs.getConfigValue("listview_max_height"),loadMore:()=>{const e=this.preferences.getUserPreference("list_max_entries_per_page")??this.systemConfigs.getConfigValue("list_max_entries_per_page"),t=this.store.recordList.getPagination(),o=Number(t.pageSize||0)+Number(e);this.store.recordList.setPageSize(o),this.store.recordList.updatePagination(t.current)},allLoaded:()=>{const e=this.store.recordList.getPagination();return!!e&&(Number(e.pageLast)>=Number(e.total)||Number(e.pageSize)>=Number(e.total))}}}getLineActionsDataSource(){return new uD(this.store,this.actionManager,this.asyncActionService,this.message,this.confirmation,this.language,this.selectModalService,this.metadata)}getBulkActionsDataSource(e){return this.bulkActionsAdapterFactory.create(e)}getTableActions(e){return this.listviewTableActionsAdapterFactory.create(e)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(ni),n.\u0275\u0275inject(bt),n.\u0275\u0275inject(sl),n.\u0275\u0275inject(Yt),n.\u0275\u0275inject(dt),n.\u0275\u0275inject(Nn),n.\u0275\u0275inject($e),n.\u0275\u0275inject(lD),n.\u0275\u0275inject(mD),n.\u0275\u0275inject(kn),n.\u0275\u0275inject(qt),n.\u0275\u0275inject(vt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),fl=(()=>{class i{systemConfigStore;screenSize;store;swapSizes=[];subs=[];widgetSwap;widgetSwap$;constructor(e,t,r){this.systemConfigStore=e,this.screenSize=t,this.store=r,this.swapSizes=this.systemConfigStore.getUi("widget_swap_screen_sizes"),this.widgetSwap$=this.screenSize.screenSize$.pipe((0,v.map)(o=>{const s=(0,M.isTrue)(this.swapSizes[o]??!1);return(null===this.widgetSwap&&!0===s||this.widgetSwap!==s&&!0===s)&&(this.store.showSidebarWidgets=!1),this.widgetSwap=s,s}))}destroy(){this.subs.forEach(e=>e.unsubscribe()),this.subs=[]}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(vt),n.\u0275\u0275inject(hi),n.\u0275\u0275inject(ni))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})();const Az=function(i){return{"col-lg-12":i}};function Tz(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"div",3),n.\u0275\u0275element(2,"scrm-table",4),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction1(2,Az,!e.displayWidgets)),n.\u0275\u0275advance(1),n.\u0275\u0275property("config",e.tableConfig)}}function Nz(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",7),n.\u0275\u0275element(1,"scrm-sidebar-widget",8),n.\u0275\u0275elementEnd()),2&i){const e=a.$implicit,t=n.\u0275\u0275nextContext(3);n.\u0275\u0275advance(1),n.\u0275\u0275property("config",e)("context",t.getViewContext())("context$",t.store.context$)("type",e.type)}}function Lz(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"div",5),n.\u0275\u0275template(2,Nz,2,4,"div",6),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275styleProp("display",e.widgetDisplayType),n.\u0275\u0275classProp("mt-0",e.swapWidgets),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",e.sidebarWidgetConfig.widgets)}}function Oz(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,Lz,3,5,"ng-container",2),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!e.swapWidgets||e.swapWidgets&&e.displayWidgets)}}let vD=(()=>{class i{store;adapter;maxColumnCalculator;languageStore;sidebarWidgetAdapter;systemConfigs;sidebarWidgetHandler;screen=qn.Medium;maxColumns=5;tableConfig;displayWidgets=!0;swapWidgets=!1;sidebarWidgetConfig;widgetDisplayType="none";subs=[];constructor(e,t,r,o,s,c,l){this.store=e,this.adapter=t,this.maxColumnCalculator=r,this.languageStore=o,this.sidebarWidgetAdapter=s,this.systemConfigs=c,this.sidebarWidgetHandler=l}ngOnInit(){if(this.tableConfig=this.adapter.getTable(),this.tableConfig.maxColumns$=this.getMaxColumns(),this.store?.metadata?.listView?.maxHeight&&(this.tableConfig.maxListHeight=this.store.metadata.listView.maxHeight),!this.tableConfig?.maxListHeight){const e=this.systemConfigs.getConfigValue("ui");this.tableConfig.maxListHeight=e.listview_max_height}this.tableConfig.paginationType=this?.store?.metadata?.listView?.paginationType??this.tableConfig.paginationType,this.subs.push(this.sidebarWidgetAdapter.config$.subscribe(e=>{this.sidebarWidgetConfig=e,this.displayWidgets=this.store.widgets&&this.store.showSidebarWidgets,this.widgetDisplayType=this.getDisplay(!(!this.sidebarWidgetConfig.show||!this.sidebarWidgetConfig.widgets))})),this.subs.push(this.sidebarWidgetHandler.widgetSwap$.subscribe(e=>{this.swapWidgets=e}))}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe()),this.subs=[]}getMaxColumns(){return this.maxColumnCalculator.getMaxColumns(this.store.widgets$)}getDisplayWidgets(){return this.store.widgets&&this.store.showSidebarWidgets}getDisplay(e){let t="none";return e&&(t="block"),t}getViewContext(){return this.store.getViewContext()}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(ni),n.\u0275\u0275directiveInject(zf),n.\u0275\u0275directiveInject(Mo),n.\u0275\u0275directiveInject($e),n.\u0275\u0275directiveInject(Vf),n.\u0275\u0275directiveInject(vt),n.\u0275\u0275directiveInject(fl))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-list-container"]],features:[n.\u0275\u0275ProvidersFeature([zf,Mo,Vf])],decls:4,vars:2,consts:[[1,"list-view-container","container-fluid","pt-2"],[1,"row"],[4,"ngIf"],[1,"col-lg-9",3,"ngClass"],[3,"config"],[1,"col-lg-3","list-widget-container","pl-0"],["class","mb-3",4,"ngFor","ngForOf"],[1,"mb-3"],[3,"config","context","context$","type"]],template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"div",0)(1,"div",1),n.\u0275\u0275template(2,Tz,3,4,"ng-container",2),n.\u0275\u0275template(3,Oz,2,1,"ng-container",2),n.\u0275\u0275elementEnd()()),2&t&&(n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",!r.swapWidgets||r.swapWidgets&&!r.displayWidgets),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.sidebarWidgetConfig.widgetsEnabled))},dependencies:[F.NgClass,F.NgForOf,F.NgIf,ol,hf],encapsulation:2})}return i})(),_D=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,al,Lr,Ke.AngularSvgIconModule,vf]})}return i})();function Bz(i,a){if(1&i&&n.\u0275\u0275element(0,"scrm-button-group",15),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("config$",e.quickFilters.config$)("klass","quick-filter-button")}}function Rz(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",10)(1,"div",11),n.\u0275\u0275element(2,"scrm-label",12),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(3,"div",13),n.\u0275\u0275template(4,Bz,1,2,"scrm-button-group",14),n.\u0275\u0275elementEnd()()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(4),n.\u0275\u0275property("ngIf",e.quickFilters.config$)}}function jz(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",16)(1,"div",17)(2,"div",18),n.\u0275\u0275element(3,"scrm-list-filter",19),n.\u0275\u0275elementEnd()()()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(3),n.\u0275\u0275property("config",e.filterAdapter.getConfig())}}function kz(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",16)(1,"div",17)(2,"div",18),n.\u0275\u0275element(3,"scrm-record-panel",19),n.\u0275\u0275elementEnd()()()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(3),n.\u0275\u0275property("config",e.recordPanelConfig)}}let yD=(()=>{class i{filterAdapter;listStore;moduleNavigation;recordPanelAdapter;quickFilters;actionPanel="";recordPanelConfig;showQuickFilters=!1;enableQuickFilters=!1;subs=[];constructor(e,t,r,o,s){this.filterAdapter=e,this.listStore=t,this.moduleNavigation=r,this.recordPanelAdapter=o,this.quickFilters=s}get moduleTitle(){return this.moduleNavigation.getModuleLabel(this.listStore.vm.appData.module,this.listStore.vm.appData.language.appListStrings)}ngOnInit(){this.listStore.actionPanel$.subscribe(e=>{this.actionPanel=e,this.recordPanelConfig="recordPanel"===this.actionPanel?this.recordPanelAdapter.getConfig():null}),this.subs.push(this.quickFilters.breakdown$.subscribe(e=>{this.showQuickFilters=(0,M.isTrue)(e)})),this.subs.push(this.quickFilters.enabled$.subscribe(e=>{this.enableQuickFilters=(0,M.isTrue)(e??!1)}))}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe()),this.recordPanelConfig=null}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(kf),n.\u0275\u0275directiveInject(ni),n.\u0275\u0275directiveInject(Rn),n.\u0275\u0275directiveInject(Uf),n.\u0275\u0275directiveInject(ms))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-list-header"]],features:[n.\u0275\u0275ProvidersFeature([kf,Uf])],decls:13,vars:4,consts:[[1,"list-view-header"],[1,"row","align-items-start","mr-0"],[1,"col-md-4","d-flex","align-items-center","justify-content-center","justify-content-sm-start"],[1,"list-view-title",3,"title"],[1,"col-md-8"],[1,"row","justify-content-center","justify-content-sm-end","mr-0","ml-md-1"],["class","d-flex align-items-baseline w-100 justify-content-end pr-3",4,"ngIf"],[1,"list-view-hr-container"],[1,"list-view-hr"],["class","container-fluid pt-2 small-font",4,"ngIf"],[1,"d-flex","align-items-baseline","w-100","justify-content-end","pr-3"],[1,"text-nowrap","text-muted","fs-70","pl-1","mr-2"],["labelKey","LBL_QUICK_FILTERS"],[1,"quick-filter-border","pr-xxl-1","mr-xxl-1"],[3,"config$","klass",4,"ngIf"],[3,"config$","klass"],[1,"container-fluid","pt-2","small-font"],[1,"row"],[1,"col"],[3,"config"]],template:function(t,r){1&t&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"div",0)(2,"div",1)(3,"div",2),n.\u0275\u0275element(4,"scrm-module-title",3),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(5,"div",4)(6,"div",5),n.\u0275\u0275element(7,"scrm-settings-menu"),n.\u0275\u0275elementEnd()()(),n.\u0275\u0275template(8,Rz,5,1,"div",6),n.\u0275\u0275elementStart(9,"div",7),n.\u0275\u0275element(10,"hr",8),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(11,jz,4,1,"div",9),n.\u0275\u0275template(12,kz,4,1,"div",9),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()),2&t&&(n.\u0275\u0275advance(4),n.\u0275\u0275property("title",r.moduleTitle),n.\u0275\u0275advance(4),n.\u0275\u0275property("ngIf",r.showQuickFilters&&r.enableQuickFilters),n.\u0275\u0275advance(3),n.\u0275\u0275property("ngIf","filters"===r.actionPanel),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf","recordPanel"===r.actionPanel&&r.recordPanelConfig))},dependencies:[F.NgIf,Id,FM,cl,XM,mo,zt],encapsulation:2})}return i})(),bD=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,us,Xd,Yd,Ke.AngularSvgIconModule,ll,eS,Fr,Ut]})}return i})();function Pz(i,a){1&i&&(n.\u0275\u0275elementStart(0,"div",1),n.\u0275\u0275element(1,"scrm-list-header")(2,"scrm-list-container"),n.\u0275\u0275elementEnd())}let $z=(()=>{class i{appState;listStore;quickFilters;sidebarWidgetHandler;listSub;vm$=null;constructor(e,t,r,o){this.appState=e,this.listStore=t,this.quickFilters=r,this.sidebarWidgetHandler=o}ngOnInit(){this.listSub=this.listStore.init(this.appState.getModule()).subscribe(),this.vm$=this.listStore.vm$}ngOnDestroy(){this.listSub&&this.listSub.unsubscribe(),this.quickFilters.destroy(),this.sidebarWidgetHandler.destroy(),this.listStore.destroy()}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(Xt),n.\u0275\u0275directiveInject(ni),n.\u0275\u0275directiveInject(ms),n.\u0275\u0275directiveInject(fl))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-list"]],features:[n.\u0275\u0275ProvidersFeature([ni,ms,fl])],decls:2,vars:3,consts:[["class","list-view",4,"ngIf"],[1,"list-view"]],template:function(t,r){1&t&&(n.\u0275\u0275template(0,Pz,3,0,"div",0),n.\u0275\u0275pipe(1,"async")),2&t&&n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(1,1,r.vm$))},dependencies:[F.NgIf,yD,vD,F.AsyncPipe],encapsulation:2})}return i})(),Uz=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,bD,_D,Jn]})}return i})();function Vz(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"option",17),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&i){const e=a.$implicit,t=n.\u0275\u0275nextContext(3);let r;n.\u0275\u0275property("selected",(null!==(r=t.language)&&void 0!==r?r:"en_us")===e)("value",e),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",t.getEnabledLanguages()[e]," ")}}function zz(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"div",10)(1,"div",5)(2,"label",11),n.\u0275\u0275text(3),n.\u0275\u0275elementEnd()(),n.\u0275\u0275element(4,"div",12),n.\u0275\u0275elementStart(5,"div",5)(6,"div",13)(7,"select",14,15),n.\u0275\u0275listener("change",function(){n.\u0275\u0275restoreView(e);const r=n.\u0275\u0275reference(8),o=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(o.onLanguageSelect(r.value))}),n.\u0275\u0275template(9,Vz,2,3,"option",16),n.\u0275\u0275elementEnd()()()()}if(2&i){const e=n.\u0275\u0275nextContext().ngIf,t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(3),n.\u0275\u0275textInterpolate(e.appStrings.LBL_LANGUAGE),n.\u0275\u0275advance(6),n.\u0275\u0275property("ngForOf",t.getEnabledLanguagesKeys())}}function Gz(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",28),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext(2).ngIf;n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",e.appStrings.ERR_MISSING_REQUIRED_FIELDS," ")}}function Wz(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",28),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext(2).ngIf;n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",e.appStrings.ERR_MISSING_REQUIRED_FIELDS," ")}}function Kz(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"div",29)(1,"a",30),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(e);const r=n.\u0275\u0275nextContext(3);return n.\u0275\u0275resetView(r.flipCard())}),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd()()}if(2&i){const e=n.\u0275\u0275nextContext(2).ngIf;n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate1(" ",e.appStrings.LBL_LOGIN_FORGOT_PASSWORD," ")}}function Hz(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"div",18)(1,"div",13),n.\u0275\u0275element(2,"scrm-image",19),n.\u0275\u0275elementStart(3,"input",20,21),n.\u0275\u0275listener("ngModelChange",function(r){n.\u0275\u0275restoreView(e);const o=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(o.uname=r)}),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(5,Gz,2,1,"div",22),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(6,"div",13),n.\u0275\u0275element(7,"scrm-image",23),n.\u0275\u0275elementStart(8,"input",24,25),n.\u0275\u0275listener("ngModelChange",function(r){n.\u0275\u0275restoreView(e);const o=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(o.passw=r)}),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(10,Wz,2,1,"div",22),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(11,"button",26),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(e),n.\u0275\u0275nextContext();const r=n.\u0275\u0275reference(2),o=n.\u0275\u0275nextContext();return r.control.markAllAsTouched(),n.\u0275\u0275resetView(r.valid&&o.doLogin())}),n.\u0275\u0275text(12),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(13,Kz,3,1,"div",27),n.\u0275\u0275elementEnd()}if(2&i){const e=n.\u0275\u0275reference(4),t=n.\u0275\u0275reference(9),r=n.\u0275\u0275nextContext().ngIf,o=n.\u0275\u0275nextContext();n.\u0275\u0275property("@fade",void 0),n.\u0275\u0275advance(3),n.\u0275\u0275classProp("is-invalid",e.invalid&&e.touched),n.\u0275\u0275propertyInterpolate("placeholder",r.appStrings.LBL_USER_NAME),n.\u0275\u0275property("ngModel",o.uname),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",e.invalid&&e.touched),n.\u0275\u0275advance(3),n.\u0275\u0275classProp("is-invalid",t.invalid&&t.touched),n.\u0275\u0275propertyInterpolate("placeholder",r.appStrings.LBL_PASSWORD),n.\u0275\u0275property("ngModel",o.passw),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",t.invalid&&t.touched),n.\u0275\u0275advance(1),n.\u0275\u0275property("scrm-button-loading",o.loading),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",r.appStrings.LBL_LOGIN_BUTTON_LABEL," "),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.showForgotPassword)}}function Zz(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",28),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext(2).ngIf;n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",e.appStrings.ERR_MISSING_REQUIRED_FIELDS," ")}}function qz(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",28),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext(2).ngIf;n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",e.appStrings.ERR_MISSING_REQUIRED_FIELDS," ")}}function Jz(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"div",31)(1,"div",13),n.\u0275\u0275element(2,"scrm-image",19),n.\u0275\u0275elementStart(3,"input",20,21),n.\u0275\u0275listener("ngModelChange",function(r){n.\u0275\u0275restoreView(e);const o=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(o.uname=r)}),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(5,Zz,2,1,"div",22),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(6,"div",13),n.\u0275\u0275element(7,"scrm-image",32),n.\u0275\u0275elementStart(8,"input",33,34),n.\u0275\u0275listener("ngModelChange",function(r){n.\u0275\u0275restoreView(e);const o=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(o.email=r)}),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(10,qz,2,1,"div",22),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(11,"button",35),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(e),n.\u0275\u0275nextContext();const r=n.\u0275\u0275reference(2),o=n.\u0275\u0275nextContext();return r.control.markAllAsTouched(),n.\u0275\u0275resetView(r.valid&&o.recoverPassword())}),n.\u0275\u0275text(12),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(13,"div")(14,"a",36),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(e);const r=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(r.flipCard())}),n.\u0275\u0275text(15),n.\u0275\u0275elementEnd()()()}if(2&i){const e=n.\u0275\u0275reference(4),t=n.\u0275\u0275reference(9),r=n.\u0275\u0275nextContext().ngIf,o=n.\u0275\u0275nextContext();n.\u0275\u0275property("@fade",void 0),n.\u0275\u0275advance(3),n.\u0275\u0275classProp("is-invalid",e.invalid&&e.touched),n.\u0275\u0275propertyInterpolate("placeholder",r.appStrings.LBL_USER_NAME),n.\u0275\u0275property("ngModel",o.uname),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",e.invalid&&e.touched),n.\u0275\u0275advance(3),n.\u0275\u0275classProp("is-invalid",t.invalid&&t.touched),n.\u0275\u0275propertyInterpolate("placeholder",r.appStrings.LBL_EMAIL),n.\u0275\u0275property("ngModel",o.email),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",t.invalid&&t.touched),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate1(" ",r.appStrings.LBL_GENERATE_PASSWORD_BUTTON_TITLE," "),n.\u0275\u0275advance(3),n.\u0275\u0275textInterpolate1(" ",r.appStrings.LBL_BACK," ")}}function Qz(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",1)(1,"form",2,3)(3,"div",4)(4,"div",5),n.\u0275\u0275element(5,"scrm-logo-ui"),n.\u0275\u0275elementEnd()(),n.\u0275\u0275template(6,zz,10,2,"div",6),n.\u0275\u0275elementStart(7,"div",7),n.\u0275\u0275template(8,Hz,14,14,"div",8),n.\u0275\u0275template(9,Jz,16,13,"div",9),n.\u0275\u0275elementEnd()()()),2&i){const e=a.ngIf,t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(6),n.\u0275\u0275property("ngIf",e.showLanguages),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf","front"===t.cardState),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf","back"===t.cardState)}}let CD=(()=>{class i{router;auth;message;configs;languageStore;recoverPasswordService;appState;hidden=!0;loading=!1;error="";uname="";passw="";email="";cardState="front";systemConfigs$;appStrings$;language=null;vm$;constructor(e,t,r,o,s,c,l){this.router=e,this.auth=t,this.message=r,this.configs=o,this.languageStore=s,this.recoverPasswordService=c,this.appState=l,this.loading=!1,this.hidden=!1,this.language=null,this.systemConfigs$=o?.configs$??(0,S.of)({}),this.appStrings$=s?.appStrings$??(0,S.of)({}),this.vm$=this.systemConfigs$.pipe((0,S.combineLatestWith)(this.appStrings$),(0,v.map)(([u,d])=>{let f=!1,p=!1;return u.languages&&u.languages.items&&(f=Object.keys(u.languages.items).length>1),u.passwordsetting&&u.passwordsetting.items&&(p=[!0,"1","true"].includes(u.passwordsetting.items.forgotpasswordON)),{systemConfigs:u,appStrings:d,showLanguages:f,showForgotPassword:p}}))}ngOnInit(){this.setCurrentLanguage()}onLanguageSelect(e){e&&e!==this.language&&this.changeLanguage(e)}changeLanguage(e){this.language=e;let t=!1;this?.appState?.updateLoading&&(this.appState.updateLoading("change-language",!0),t=!0),this.languageStore.changeLanguage(e,!0).pipe((0,v.tap)(()=>{t&&this.appState.updateLoading("change-language",!1)})).subscribe()}getEnabledLanguages(){return this.languageStore.getEnabledLanguages()}getEnabledLanguagesKeys(){return Object.keys(this.languageStore.getEnabledLanguages()??{})??[]}flipCard(){this.cardState="front"===this.cardState?"back":"front"}doLogin(){this.loading=!0,this.auth.doLogin(this.uname,this.passw,this.onLoginSuccess.bind(this),this.onLoginError.bind(this))}recoverPassword(){this.recoverPasswordService.run(this.uname,this.email).subscribe(e=>{this.message.log("Recover Password Status: "+e.status);let t="addSuccessMessageByKey";"error"===e.status&&(t="addDangerMessageByKey"),e.messages&&e.messages.forEach(r=>{this.message[t](r)})},()=>{this.message.log("Recover Password failed"),this.message.addDangerMessageByKey("ERR_AJAX_LOAD_FAILURE")})}onLoginSuccess(e){this.loading=!1,this.message.log("Login success"),this.message.removeMessages(),this.languageStore.setSessionLanguage().pipe((0,v.catchError)(()=>(0,S.of)({}))).subscribe(()=>{if(e&&e.redirect)return void this.router.navigate([e.redirect]).then();if(this.appState.getPreLoginUrl())return void this.router.navigateByUrl(this.appState.getPreLoginUrl()).then(()=>{this.appState.setPreLoginUrl("")});const t=this.configs.getHomePage();this.router.navigate(["/"+t]).then()})}onLoginError(e){this.loading=!1,this.message.log("Login failed");let o=this.languageStore.getFieldLabel("LOGIN_INCORRECT");const s=e?.error?.error??"";"string"==typeof s&&s.includes("Too many failed login attempts, please try again in")&&(o=this.getTooManyFailedMessage("Too many failed login attempts, please try again later.")),o||(o="Login credentials incorrect, please try again."),this.message.addDangerMessage(o)}getTooManyFailedMessage(e){let t=this.languageStore.getFieldLabel("LOGIN_TOO_MANY_FAILED");return t||(t=e),t}setCurrentLanguage(){let e=this.languageStore.getSelectedLanguage()??"";const t=this.languageStore.getActiveLanguage();if(e||(e=t),this.languageStore.isLanguageEnabled(e)||(e=""),this.language&&e===this.language)return;const r=this.configs.getConfigValue("default_language")??"en_us";e||(e=r),this.languageStore.isLanguageEnabled(e)||(e=this.languageStore.getFirstLanguage()),this.language=e,this.changeLanguage(e)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(Rt.Router),n.\u0275\u0275directiveInject(oi),n.\u0275\u0275directiveInject(dt),n.\u0275\u0275directiveInject(vt),n.\u0275\u0275directiveInject($e),n.\u0275\u0275directiveInject($S),n.\u0275\u0275directiveInject(Xt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-login-ui"]],decls:2,vars:3,consts:[["class","login-view full-height-view d-flex align-items-center",4,"ngIf"],[1,"login-view","full-height-view","d-flex","align-items-center"],["name","login",1,"login-form"],["loginForm","ngForm"],[1,"form-row","form-group"],[1,"col"],["class","form-row",4,"ngIf"],[1,"form-row","fade-card"],["class","fade-card-front col",4,"ngIf"],["class","fade-card-back col",4,"ngIf"],[1,"form-row"],["for","languages",1,""],[1,"w-100"],[1,"inner-addon","left-addon"],["id","languages",3,"change"],["languageSelect",""],[3,"selected","value",4,"ngFor","ngForOf"],[3,"selected","value"],[1,"fade-card-front","col"],["image","login_user"],["type","text","name","username","aria-label","Username","required","",3,"ngModel","placeholder","ngModelChange"],["username","ngModel"],["class","invalid-feedback",4,"ngIf"],["image","login_password"],["type","password","name","password","aria-label","Password","required","",3,"ngModel","placeholder","ngModelChange"],["password","ngModel"],["id","login-button",1,"login-button",3,"scrm-button-loading","click"],["class","forgotten-password",4,"ngIf"],[1,"invalid-feedback"],[1,"forgotten-password"],[1,"forgotten-password-link",3,"click"],[1,"fade-card-back","col"],["image","email"],["type","email","name","email","aria-label","Email","required","",3,"ngModel","placeholder","ngModelChange"],["mail","ngModel"],["scrm-button-loading","",1,"submit-button","login-button",3,"click"],[1,"back-link","forgotten-password-link",3,"click"]],template:function(t,r){1&t&&(n.\u0275\u0275template(0,Qz,10,3,"div",0),n.\u0275\u0275pipe(1,"async")),2&t&&n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(1,1,r.vm$))},dependencies:[De.\u0275NgNoValidate,De.NgSelectOption,De.\u0275NgSelectMultipleOption,De.DefaultValueAccessor,De.NgControlStatus,De.NgControlStatusGroup,De.RequiredValidator,De.NgModel,De.NgForm,el,F.NgForOf,F.NgIf,wn,RS,F.AsyncPipe],encapsulation:2,data:{animation:[(0,Wt.trigger)("fade",[(0,Wt.transition)(":enter",(0,Wt.useAnimation)(pc.fadeIn,{params:{timing:.5,delay:0}}))])]}})}return i})();const MD=[{path:"",component:CD}];let Xz=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[De.FormsModule,tl,Rt.RouterModule.forChild(MD),F.CommonModule,Ke.AngularSvgIconModule,Mn,jS]})}return i})(),Yz=(()=>{class i{configs;constructor(e){this.configs=e}getLoginURL(){return"./"}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(vt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-logout"]],decls:11,vars:1,consts:[[1,"logged-out-view","full-height-view","d-flex","flex-column","align-items-center","justify-content-center"],[1,"logo-row","full-height-view-row"],[1,"mt-3","mb-1","page-title","full-height-view-row"],["labelKey","LBL_LOGGED_OUT_MESSAGE"],[1,"page-subtitle","full-height-view-row"],["labelKey","LBL_LOGIN_AGAIN"],[1,"text-lowercase",3,"href"],["labelKey","LBL_CLICK_HERE"]],template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"div",0)(1,"div",1),n.\u0275\u0275element(2,"scrm-logo-ui"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(3,"div",2)(4,"h2"),n.\u0275\u0275element(5,"scrm-label",3),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(6,"div",4)(7,"h5"),n.\u0275\u0275element(8,"scrm-label",5),n.\u0275\u0275elementStart(9,"a",6),n.\u0275\u0275element(10,"scrm-label",7),n.\u0275\u0275elementEnd()()()()),2&t&&(n.\u0275\u0275advance(9),n.\u0275\u0275property("href",r.getLoginURL(),n.\u0275\u0275sanitizeUrl))},dependencies:[zt,el],encapsulation:2})}return i})(),eG=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Ut,tl]})}return i})()},9388:(we,oe,L)=>{L.d(oe,{Is:()=>de,vT:()=>V});var n=L(2611),M=L(4187);const S=new n.InjectionToken("cdk-dir-doc",{providedIn:"root",factory:function v(){return(0,n.inject)(M.DOCUMENT)}}),z=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let de=(()=>{class U{constructor(k){this.value="ltr",this.change=new n.EventEmitter,k&&(this.value=function K(U){const I=U?.toLowerCase()||"";return"auto"===I&&typeof navigator<"u"&&navigator?.language?z.test(navigator.language)?"rtl":"ltr":"rtl"===I?"rtl":"ltr"}((k.body?k.body.dir:null)||(k.documentElement?k.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}static#e=this.\u0275fac=function($){return new($||U)(n.\u0275\u0275inject(S,8))};static#t=this.\u0275prov=n.\u0275\u0275defineInjectable({token:U,factory:U.\u0275fac,providedIn:"root"})}return U})(),V=(()=>{class U{static#e=this.\u0275fac=function($){return new($||U)};static#t=this.\u0275mod=n.\u0275\u0275defineNgModule({type:U});static#n=this.\u0275inj=n.\u0275\u0275defineInjector({})}return U})()},2495:(we,oe,L)=>{L.d(oe,{Eq:()=>z,Ig:()=>M,fI:()=>de,su:()=>S});var n=L(2611);function M(V){return null!=V&&"false"!=`${V}`}function S(V,U=0){return function v(V){return!isNaN(parseFloat(V))&&!isNaN(Number(V))}(V)?Number(V):U}function z(V){return Array.isArray(V)?V:[V]}function de(V){return V instanceof n.ElementRef?V.nativeElement:V}},2831:(we,oe,L)=>{L.d(oe,{Mq:()=>G,_i:()=>X,i$:()=>I,kV:()=>F,sA:()=>pe,t4:()=>v});var n=L(2611),M=L(4187);let S;try{S=typeof Intl<"u"&&Intl.v8BreakIterator}catch{S=!1}let V,k,$,ie,v=(()=>{class je{constructor(ke){this._platformId=ke,this.isBrowser=this._platformId?(0,M.isPlatformBrowser)(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!S)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static#e=this.\u0275fac=function(Be){return new(Be||je)(n.\u0275\u0275inject(n.PLATFORM_ID))};static#t=this.\u0275prov=n.\u0275\u0275defineInjectable({token:je,factory:je.\u0275fac,providedIn:"root"})}return je})();function I(je){return function U(){if(null==V&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>V=!0}))}finally{V=V||!1}return V}()?je:!!je.capture}function G(){if(null==$){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return $=!1,$;if("scrollBehavior"in document.documentElement.style)$=!0;else{const je=Element.prototype.scrollTo;$=!!je&&!/\{\s*\[native code\]\s*\}/.test(je.toString())}}return $}function X(){if("object"!=typeof document||!document)return 0;if(null==k){const je=document.createElement("div"),lt=je.style;je.dir="rtl",lt.width="1px",lt.overflow="auto",lt.visibility="hidden",lt.pointerEvents="none",lt.position="absolute";const ke=document.createElement("div"),Be=ke.style;Be.width="2px",Be.height="1px",je.appendChild(ke),document.body.appendChild(je),k=0,0===je.scrollLeft&&(je.scrollLeft=1,k=0===je.scrollLeft?1:2),je.remove()}return k}function F(je){if(function me(){if(null==ie){const je=typeof document<"u"?document.head:null;ie=!(!je||!je.createShadowRoot&&!je.attachShadow)}return ie}()){const lt=je.getRootNode?je.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&lt instanceof ShadowRoot)return lt}return null}function pe(je){return je.composedPath?je.composedPath()[0]:je.target}},6672:(we,oe,L)=>{L.d(oe,{Cl:()=>en,N7:()=>lt,ZD:()=>Ye,mF:()=>X,rL:()=>F,xd:()=>$});var n=L(2495),M=L(2611),S=L(8303),v=L(8103),z=L(2831),K=L(4187),de=L(9388);const ae=["contentWrapper"],V=["*"],U=new M.InjectionToken("VIRTUAL_SCROLL_STRATEGY");class I{constructor(It,re,Me){this._scrolledIndexChange=new S.Subject,this.scrolledIndexChange=this._scrolledIndexChange.pipe((0,v.distinctUntilChanged)()),this._viewport=null,this._itemSize=It,this._minBufferPx=re,this._maxBufferPx=Me}attach(It){this._viewport=It,this._updateTotalContentSize(),this._updateRenderedRange()}detach(){this._scrolledIndexChange.complete(),this._viewport=null}updateItemAndBufferSize(It,re,Me){this._itemSize=It,this._minBufferPx=re,this._maxBufferPx=Me,this._updateTotalContentSize(),this._updateRenderedRange()}onContentScrolled(){this._updateRenderedRange()}onDataLengthChanged(){this._updateTotalContentSize(),this._updateRenderedRange()}onContentRendered(){}onRenderedOffsetChanged(){}scrollToIndex(It,re){this._viewport&&this._viewport.scrollToOffset(It*this._itemSize,re)}_updateTotalContentSize(){this._viewport&&this._viewport.setTotalContentSize(this._viewport.getDataLength()*this._itemSize)}_updateRenderedRange(){if(!this._viewport)return;const It=this._viewport.getRenderedRange(),re={start:It.start,end:It.end},Me=this._viewport.getViewportSize(),He=this._viewport.getDataLength();let tt=this._viewport.measureScrollOffset(),wt=this._itemSize>0?tt/this._itemSize:0;if(re.end>He){const Vt=Math.ceil(Me/this._itemSize),Bt=Math.max(0,Math.min(wt,He-Vt));wt!=Bt&&(wt=Bt,tt=Bt*this._itemSize,re.start=Math.floor(wt)),re.end=Math.max(0,Math.min(He,re.start+Vt))}const Pt=tt-re.start*this._itemSize;if(Pt<this._minBufferPx&&0!=re.start){const Vt=Math.ceil((this._maxBufferPx-Pt)/this._itemSize);re.start=Math.max(0,re.start-Vt),re.end=Math.min(He,Math.ceil(wt+(Me+this._minBufferPx)/this._itemSize))}else{const Vt=re.end*this._itemSize-(tt+Me);if(Vt<this._minBufferPx&&re.end!=He){const Bt=Math.ceil((this._maxBufferPx-Vt)/this._itemSize);Bt>0&&(re.end=Math.min(He,re.end+Bt),re.start=Math.max(0,Math.floor(wt-this._minBufferPx/this._itemSize)))}}this._viewport.setRenderedRange(re),this._viewport.setRenderedContentOffset(this._itemSize*re.start),this._scrolledIndexChange.next(Math.floor(wt))}}function k(Qe){return Qe._scrollStrategy}let $=(()=>{class Qe{constructor(){this._itemSize=20,this._minBufferPx=100,this._maxBufferPx=200,this._scrollStrategy=new I(this.itemSize,this.minBufferPx,this.maxBufferPx)}get itemSize(){return this._itemSize}set itemSize(re){this._itemSize=(0,n.su)(re)}get minBufferPx(){return this._minBufferPx}set minBufferPx(re){this._minBufferPx=(0,n.su)(re)}get maxBufferPx(){return this._maxBufferPx}set maxBufferPx(re){this._maxBufferPx=(0,n.su)(re)}ngOnChanges(){this._scrollStrategy.updateItemAndBufferSize(this.itemSize,this.minBufferPx,this.maxBufferPx)}static#e=this.\u0275fac=function(Me){return new(Me||Qe)};static#t=this.\u0275dir=M.\u0275\u0275defineDirective({type:Qe,selectors:[["cdk-virtual-scroll-viewport","itemSize",""]],inputs:{itemSize:"itemSize",minBufferPx:"minBufferPx",maxBufferPx:"maxBufferPx"},standalone:!0,features:[M.\u0275\u0275ProvidersFeature([{provide:U,useFactory:k,deps:[(0,M.forwardRef)(()=>Qe)]}]),M.\u0275\u0275NgOnChangesFeature]})}return Qe})(),X=(()=>{class Qe{constructor(re,Me,He){this._ngZone=re,this._platform=Me,this._scrolled=new S.Subject,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=He}register(re){this.scrollContainers.has(re)||this.scrollContainers.set(re,re.elementScrolled().subscribe(()=>this._scrolled.next(re)))}deregister(re){const Me=this.scrollContainers.get(re);Me&&(Me.unsubscribe(),this.scrollContainers.delete(re))}scrolled(re=20){return this._platform.isBrowser?new S.Observable(Me=>{this._globalSubscription||this._addGlobalListener();const He=re>0?this._scrolled.pipe((0,v.auditTime)(re)).subscribe(Me):this._scrolled.subscribe(Me);return this._scrolledCount++,()=>{He.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):(0,S.of)()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((re,Me)=>this.deregister(Me)),this._scrolled.complete()}ancestorScrolled(re,Me){const He=this.getAncestorScrollContainers(re);return this.scrolled(Me).pipe((0,v.filter)(tt=>!tt||He.indexOf(tt)>-1))}getAncestorScrollContainers(re){const Me=[];return this.scrollContainers.forEach((He,tt)=>{this._scrollableContainsElement(tt,re)&&Me.push(tt)}),Me}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(re,Me){let He=(0,n.fI)(Me),tt=re.getElementRef().nativeElement;do{if(He==tt)return!0}while(He=He.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{const re=this._getWindow();return(0,S.fromEvent)(re.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}static#e=this.\u0275fac=function(Me){return new(Me||Qe)(M.\u0275\u0275inject(M.NgZone),M.\u0275\u0275inject(z.t4),M.\u0275\u0275inject(K.DOCUMENT,8))};static#t=this.\u0275prov=M.\u0275\u0275defineInjectable({token:Qe,factory:Qe.\u0275fac,providedIn:"root"})}return Qe})(),ie=(()=>{class Qe{constructor(re,Me,He,tt){this.elementRef=re,this.scrollDispatcher=Me,this.ngZone=He,this.dir=tt,this._destroyed=new S.Subject,this._elementScrolled=new S.Observable(wt=>this.ngZone.runOutsideAngular(()=>(0,S.fromEvent)(this.elementRef.nativeElement,"scroll").pipe((0,v.takeUntil)(this._destroyed)).subscribe(wt)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(re){const Me=this.elementRef.nativeElement,He=this.dir&&"rtl"==this.dir.value;null==re.left&&(re.left=He?re.end:re.start),null==re.right&&(re.right=He?re.start:re.end),null!=re.bottom&&(re.top=Me.scrollHeight-Me.clientHeight-re.bottom),He&&0!=(0,z._i)()?(null!=re.left&&(re.right=Me.scrollWidth-Me.clientWidth-re.left),2==(0,z._i)()?re.left=re.right:1==(0,z._i)()&&(re.left=re.right?-re.right:re.right)):null!=re.right&&(re.left=Me.scrollWidth-Me.clientWidth-re.right),this._applyScrollToOptions(re)}_applyScrollToOptions(re){const Me=this.elementRef.nativeElement;(0,z.Mq)()?Me.scrollTo(re):(null!=re.top&&(Me.scrollTop=re.top),null!=re.left&&(Me.scrollLeft=re.left))}measureScrollOffset(re){const Me="left",tt=this.elementRef.nativeElement;if("top"==re)return tt.scrollTop;if("bottom"==re)return tt.scrollHeight-tt.clientHeight-tt.scrollTop;const wt=this.dir&&"rtl"==this.dir.value;return"start"==re?re=wt?"right":Me:"end"==re&&(re=wt?Me:"right"),wt&&2==(0,z._i)()?re==Me?tt.scrollWidth-tt.clientWidth-tt.scrollLeft:tt.scrollLeft:wt&&1==(0,z._i)()?re==Me?tt.scrollLeft+tt.scrollWidth-tt.clientWidth:-tt.scrollLeft:re==Me?tt.scrollLeft:tt.scrollWidth-tt.clientWidth-tt.scrollLeft}static#e=this.\u0275fac=function(Me){return new(Me||Qe)(M.\u0275\u0275directiveInject(M.ElementRef),M.\u0275\u0275directiveInject(X),M.\u0275\u0275directiveInject(M.NgZone),M.\u0275\u0275directiveInject(de.Is,8))};static#t=this.\u0275dir=M.\u0275\u0275defineDirective({type:Qe,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]],standalone:!0})}return Qe})(),F=(()=>{class Qe{constructor(re,Me,He){this._platform=re,this._change=new S.Subject,this._changeListener=tt=>{this._change.next(tt)},this._document=He,Me.runOutsideAngular(()=>{if(re.isBrowser){const tt=this._getWindow();tt.addEventListener("resize",this._changeListener),tt.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const re=this._getWindow();re.removeEventListener("resize",this._changeListener),re.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const re={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),re}getViewportRect(){const re=this.getViewportScrollPosition(),{width:Me,height:He}=this.getViewportSize();return{top:re.top,left:re.left,bottom:re.top+He,right:re.left+Me,height:He,width:Me}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const re=this._document,Me=this._getWindow(),He=re.documentElement,tt=He.getBoundingClientRect();return{top:-tt.top||re.body.scrollTop||Me.scrollY||He.scrollTop||0,left:-tt.left||re.body.scrollLeft||Me.scrollX||He.scrollLeft||0}}change(re=20){return re>0?this._change.pipe((0,v.auditTime)(re)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const re=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:re.innerWidth,height:re.innerHeight}:{width:0,height:0}}static#e=this.\u0275fac=function(Me){return new(Me||Qe)(M.\u0275\u0275inject(z.t4),M.\u0275\u0275inject(M.NgZone),M.\u0275\u0275inject(K.DOCUMENT,8))};static#t=this.\u0275prov=M.\u0275\u0275defineInjectable({token:Qe,factory:Qe.\u0275fac,providedIn:"root"})}return Qe})();const Ke=new M.InjectionToken("VIRTUAL_SCROLLABLE");let pe=(()=>{class Qe extends ie{constructor(re,Me,He,tt){super(re,Me,He,tt)}measureViewportSize(re){const Me=this.elementRef.nativeElement;return"horizontal"===re?Me.clientWidth:Me.clientHeight}static#e=this.\u0275fac=function(Me){return new(Me||Qe)(M.\u0275\u0275directiveInject(M.ElementRef),M.\u0275\u0275directiveInject(X),M.\u0275\u0275directiveInject(M.NgZone),M.\u0275\u0275directiveInject(de.Is,8))};static#t=this.\u0275dir=M.\u0275\u0275defineDirective({type:Qe,features:[M.\u0275\u0275InheritDefinitionFeature]})}return Qe})();const je=typeof requestAnimationFrame<"u"?S.animationFrameScheduler:S.asapScheduler;let lt=(()=>{class Qe extends pe{get orientation(){return this._orientation}set orientation(re){this._orientation!==re&&(this._orientation=re,this._calculateSpacerSize())}get appendOnly(){return this._appendOnly}set appendOnly(re){this._appendOnly=(0,n.Ig)(re)}constructor(re,Me,He,tt,wt,Pt,Vt,Bt){super(re,Pt,He,wt),this.elementRef=re,this._changeDetectorRef=Me,this._scrollStrategy=tt,this.scrollable=Bt,this._platform=(0,M.inject)(z.t4),this._detachedSubject=new S.Subject,this._renderedRangeSubject=new S.Subject,this._orientation="vertical",this._appendOnly=!1,this.scrolledIndexChange=new S.Observable(gt=>this._scrollStrategy.scrolledIndexChange.subscribe(St=>Promise.resolve().then(()=>this.ngZone.run(()=>gt.next(St))))),this.renderedRangeStream=this._renderedRangeSubject,this._totalContentSize=0,this._totalContentWidth="",this._totalContentHeight="",this._renderedRange={start:0,end:0},this._dataLength=0,this._viewportSize=0,this._renderedContentOffset=0,this._renderedContentOffsetNeedsRewrite=!1,this._isChangeDetectionPending=!1,this._runAfterChangeDetection=[],this._viewportChanges=S.Subscription.EMPTY,this._viewportChanges=Vt.change().subscribe(()=>{this.checkViewportSize()}),this.scrollable||(this.elementRef.nativeElement.classList.add("cdk-virtual-scrollable"),this.scrollable=this)}ngOnInit(){this._platform.isBrowser&&(this.scrollable===this&&super.ngOnInit(),this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._measureViewportSize(),this._scrollStrategy.attach(this),this.scrollable.elementScrolled().pipe((0,v.startWith)(null),(0,v.auditTime)(0,je),(0,v.takeUntil)(this._destroyed)).subscribe(()=>this._scrollStrategy.onContentScrolled()),this._markChangeDetectionNeeded()})))}ngOnDestroy(){this.detach(),this._scrollStrategy.detach(),this._renderedRangeSubject.complete(),this._detachedSubject.complete(),this._viewportChanges.unsubscribe(),super.ngOnDestroy()}attach(re){this.ngZone.runOutsideAngular(()=>{this._forOf=re,this._forOf.dataStream.pipe((0,v.takeUntil)(this._detachedSubject)).subscribe(Me=>{const He=Me.length;He!==this._dataLength&&(this._dataLength=He,this._scrollStrategy.onDataLengthChanged()),this._doChangeDetection()})})}detach(){this._forOf=null,this._detachedSubject.next()}getDataLength(){return this._dataLength}getViewportSize(){return this._viewportSize}getRenderedRange(){return this._renderedRange}measureBoundingClientRectWithScrollOffset(re){return this.getElementRef().nativeElement.getBoundingClientRect()[re]}setTotalContentSize(re){this._totalContentSize!==re&&(this._totalContentSize=re,this._calculateSpacerSize(),this._markChangeDetectionNeeded())}setRenderedRange(re){(function et(Qe,It){return Qe.start==It.start&&Qe.end==It.end})(this._renderedRange,re)||(this.appendOnly&&(re={start:0,end:Math.max(this._renderedRange.end,re.end)}),this._renderedRangeSubject.next(this._renderedRange=re),this._markChangeDetectionNeeded(()=>this._scrollStrategy.onContentRendered()))}getOffsetToRenderedContentStart(){return this._renderedContentOffsetNeedsRewrite?null:this._renderedContentOffset}setRenderedContentOffset(re,Me="to-start"){re=this.appendOnly&&"to-start"===Me?0:re;const tt="horizontal"==this.orientation,wt=tt?"X":"Y";let Vt=`translate${wt}(${Number((tt&&this.dir&&"rtl"==this.dir.value?-1:1)*re)}px)`;this._renderedContentOffset=re,"to-end"===Me&&(Vt+=` translate${wt}(-100%)`,this._renderedContentOffsetNeedsRewrite=!0),this._renderedContentTransform!=Vt&&(this._renderedContentTransform=Vt,this._markChangeDetectionNeeded(()=>{this._renderedContentOffsetNeedsRewrite?(this._renderedContentOffset-=this.measureRenderedContentSize(),this._renderedContentOffsetNeedsRewrite=!1,this.setRenderedContentOffset(this._renderedContentOffset)):this._scrollStrategy.onRenderedOffsetChanged()}))}scrollToOffset(re,Me="auto"){const He={behavior:Me};"horizontal"===this.orientation?He.start=re:He.top=re,this.scrollable.scrollTo(He)}scrollToIndex(re,Me="auto"){this._scrollStrategy.scrollToIndex(re,Me)}measureScrollOffset(re){let Me;return Me=this.scrollable==this?He=>super.measureScrollOffset(He):He=>this.scrollable.measureScrollOffset(He),Math.max(0,Me(re??("horizontal"===this.orientation?"start":"top"))-this.measureViewportOffset())}measureViewportOffset(re){let Me;const wt="rtl"==this.dir?.value;Me="start"==re?wt?"right":"left":"end"==re?wt?"left":"right":re||("horizontal"===this.orientation?"left":"top");const Pt=this.scrollable.measureBoundingClientRectWithScrollOffset(Me);return this.elementRef.nativeElement.getBoundingClientRect()[Me]-Pt}measureRenderedContentSize(){const re=this._contentWrapper.nativeElement;return"horizontal"===this.orientation?re.offsetWidth:re.offsetHeight}measureRangeSize(re){return this._forOf?this._forOf.measureRangeSize(re,this.orientation):0}checkViewportSize(){this._measureViewportSize(),this._scrollStrategy.onDataLengthChanged()}_measureViewportSize(){this._viewportSize=this.scrollable.measureViewportSize(this.orientation)}_markChangeDetectionNeeded(re){re&&this._runAfterChangeDetection.push(re),this._isChangeDetectionPending||(this._isChangeDetectionPending=!0,this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._doChangeDetection()})))}_doChangeDetection(){this._isChangeDetectionPending=!1,this._contentWrapper.nativeElement.style.transform=this._renderedContentTransform,this.ngZone.run(()=>this._changeDetectorRef.markForCheck());const re=this._runAfterChangeDetection;this._runAfterChangeDetection=[];for(const Me of re)Me()}_calculateSpacerSize(){this._totalContentHeight="horizontal"===this.orientation?"":`${this._totalContentSize}px`,this._totalContentWidth="horizontal"===this.orientation?`${this._totalContentSize}px`:""}static#e=this.\u0275fac=function(Me){return new(Me||Qe)(M.\u0275\u0275directiveInject(M.ElementRef),M.\u0275\u0275directiveInject(M.ChangeDetectorRef),M.\u0275\u0275directiveInject(M.NgZone),M.\u0275\u0275directiveInject(U,8),M.\u0275\u0275directiveInject(de.Is,8),M.\u0275\u0275directiveInject(X),M.\u0275\u0275directiveInject(F),M.\u0275\u0275directiveInject(Ke,8))};static#t=this.\u0275cmp=M.\u0275\u0275defineComponent({type:Qe,selectors:[["cdk-virtual-scroll-viewport"]],viewQuery:function(Me,He){if(1&Me&&M.\u0275\u0275viewQuery(ae,7),2&Me){let tt;M.\u0275\u0275queryRefresh(tt=M.\u0275\u0275loadQuery())&&(He._contentWrapper=tt.first)}},hostAttrs:[1,"cdk-virtual-scroll-viewport"],hostVars:4,hostBindings:function(Me,He){2&Me&&M.\u0275\u0275classProp("cdk-virtual-scroll-orientation-horizontal","horizontal"===He.orientation)("cdk-virtual-scroll-orientation-vertical","horizontal"!==He.orientation)},inputs:{orientation:"orientation",appendOnly:"appendOnly"},outputs:{scrolledIndexChange:"scrolledIndexChange"},standalone:!0,features:[M.\u0275\u0275ProvidersFeature([{provide:ie,useFactory:(re,Me)=>re||Me,deps:[[new M.Optional,new M.Inject(Ke)],Qe]}]),M.\u0275\u0275InheritDefinitionFeature,M.\u0275\u0275StandaloneFeature],ngContentSelectors:V,decls:4,vars:4,consts:[[1,"cdk-virtual-scroll-content-wrapper"],["contentWrapper",""],[1,"cdk-virtual-scroll-spacer"]],template:function(Me,He){1&Me&&(M.\u0275\u0275projectionDef(),M.\u0275\u0275elementStart(0,"div",0,1),M.\u0275\u0275projection(2),M.\u0275\u0275elementEnd(),M.\u0275\u0275element(3,"div",2)),2&Me&&(M.\u0275\u0275advance(3),M.\u0275\u0275styleProp("width",He._totalContentWidth)("height",He._totalContentHeight))},styles:["cdk-virtual-scroll-viewport{display:block;position:relative;transform:translateZ(0)}.cdk-virtual-scrollable{overflow:auto;will-change:scroll-position;contain:strict;-webkit-overflow-scrolling:touch}.cdk-virtual-scroll-content-wrapper{position:absolute;top:0;left:0;contain:content}[dir=rtl] .cdk-virtual-scroll-content-wrapper{right:0;left:auto}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper{min-height:100%}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-left:0;padding-right:0;margin-left:0;margin-right:0;border-left-width:0;border-right-width:0;outline:none}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper{min-width:100%}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-top:0;padding-bottom:0;margin-top:0;margin-bottom:0;border-top-width:0;border-bottom-width:0;outline:none}.cdk-virtual-scroll-spacer{height:1px;transform-origin:0 0;flex:0 0 auto}[dir=rtl] .cdk-virtual-scroll-spacer{transform-origin:100% 0}"],encapsulation:2,changeDetection:0})}return Qe})(),Ye=(()=>{class Qe{static#e=this.\u0275fac=function(Me){return new(Me||Qe)};static#t=this.\u0275mod=M.\u0275\u0275defineNgModule({type:Qe});static#n=this.\u0275inj=M.\u0275\u0275defineInjector({})}return Qe})(),en=(()=>{class Qe{static#e=this.\u0275fac=function(Me){return new(Me||Qe)};static#t=this.\u0275mod=M.\u0275\u0275defineNgModule({type:Qe});static#n=this.\u0275inj=M.\u0275\u0275defineInjector({imports:[de.vT,Ye,de.vT,Ye]})}return Qe})()},6593:(we,oe,L)=>{L.d(oe,{Dx:()=>xi,H7:()=>nn,b2:()=>ii,q6:()=>jn,se:()=>ot});var n=L(2611),M=L(4187);L(3984);class v extends M.\u0275DomAdapter{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class z extends v{static makeCurrent(){(0,M.\u0275setRootDomAdapter)(new z)}onAndCancel(_e,te,ue){return _e.addEventListener(te,ue),()=>{_e.removeEventListener(te,ue)}}dispatchEvent(_e,te){_e.dispatchEvent(te)}remove(_e){_e.parentNode&&_e.parentNode.removeChild(_e)}createElement(_e,te){return(te=te||this.getDefaultDocument()).createElement(_e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(_e){return _e.nodeType===Node.ELEMENT_NODE}isShadowRoot(_e){return _e instanceof DocumentFragment}getGlobalEventTarget(_e,te){return"window"===te?window:"document"===te?_e:"body"===te?_e.body:null}getBaseHref(_e){const te=function de(){return K=K||document.querySelector("base"),K?K.getAttribute("href"):null}();return null==te?null:function V(Ee){ae=ae||document.createElement("a"),ae.setAttribute("href",Ee);const _e=ae.pathname;return"/"===_e.charAt(0)?_e:`/${_e}`}(te)}resetBaseElement(){K=null}getUserAgent(){return window.navigator.userAgent}getCookie(_e){return(0,M.\u0275parseCookieValue)(document.cookie,_e)}}let ae,K=null,I=(()=>{class Ee{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(ue){return new(ue||Ee)};static#t=this.\u0275prov=n.\u0275\u0275defineInjectable({token:Ee,factory:Ee.\u0275fac})}return Ee})();const k=new n.InjectionToken("EventManagerPlugins");let $=(()=>{class Ee{constructor(te,ue){this._zone=ue,this._eventNameToPlugin=new Map,te.forEach(Ae=>{Ae.manager=this}),this._plugins=te.slice().reverse()}addEventListener(te,ue,Ae){return this._findPluginFor(ue).addEventListener(te,ue,Ae)}getZone(){return this._zone}_findPluginFor(te){let ue=this._eventNameToPlugin.get(te);if(ue)return ue;if(ue=this._plugins.find(mt=>mt.supports(te)),!ue)throw new n.\u0275RuntimeError(5101,!1);return this._eventNameToPlugin.set(te,ue),ue}static#e=this.\u0275fac=function(ue){return new(ue||Ee)(n.\u0275\u0275inject(k),n.\u0275\u0275inject(n.NgZone))};static#t=this.\u0275prov=n.\u0275\u0275defineInjectable({token:Ee,factory:Ee.\u0275fac})}return Ee})();class G{constructor(_e){this._doc=_e}}const X="ng-app-id";let ie=(()=>{class Ee{constructor(te,ue,Ae,mt={}){this.doc=te,this.appId=ue,this.nonce=Ae,this.platformId=mt,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=(0,M.isPlatformServer)(mt),this.resetHostNodes()}addStyles(te){for(const ue of te)1===this.changeUsageCount(ue,1)&&this.onStyleAdded(ue)}removeStyles(te){for(const ue of te)this.changeUsageCount(ue,-1)<=0&&this.onStyleRemoved(ue)}ngOnDestroy(){const te=this.styleNodesInDOM;te&&(te.forEach(ue=>ue.remove()),te.clear());for(const ue of this.getAllStyles())this.onStyleRemoved(ue);this.resetHostNodes()}addHost(te){this.hostNodes.add(te);for(const ue of this.getAllStyles())this.addStyleToHost(te,ue)}removeHost(te){this.hostNodes.delete(te)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(te){for(const ue of this.hostNodes)this.addStyleToHost(ue,te)}onStyleRemoved(te){const ue=this.styleRef;ue.get(te)?.elements?.forEach(Ae=>Ae.remove()),ue.delete(te)}collectServerRenderedStyles(){const te=this.doc.head?.querySelectorAll(`style[${X}="${this.appId}"]`);if(te?.length){const ue=new Map;return te.forEach(Ae=>{null!=Ae.textContent&&ue.set(Ae.textContent,Ae)}),ue}return null}changeUsageCount(te,ue){const Ae=this.styleRef;if(Ae.has(te)){const mt=Ae.get(te);return mt.usage+=ue,mt.usage}return Ae.set(te,{usage:ue,elements:[]}),ue}getStyleElement(te,ue){const Ae=this.styleNodesInDOM,mt=Ae?.get(ue);if(mt?.parentNode===te)return Ae.delete(ue),mt.removeAttribute(X),mt;{const Tt=this.doc.createElement("style");return this.nonce&&Tt.setAttribute("nonce",this.nonce),Tt.textContent=ue,this.platformIsServer&&Tt.setAttribute(X,this.appId),Tt}}addStyleToHost(te,ue){const Ae=this.getStyleElement(te,ue);te.appendChild(Ae);const mt=this.styleRef,Tt=mt.get(ue)?.elements;Tt?Tt.push(Ae):mt.set(ue,{elements:[Ae],usage:1})}resetHostNodes(){const te=this.hostNodes;te.clear(),te.add(this.doc.head)}static#e=this.\u0275fac=function(ue){return new(ue||Ee)(n.\u0275\u0275inject(M.DOCUMENT),n.\u0275\u0275inject(n.APP_ID),n.\u0275\u0275inject(n.CSP_NONCE,8),n.\u0275\u0275inject(n.PLATFORM_ID))};static#t=this.\u0275prov=n.\u0275\u0275defineInjectable({token:Ee,factory:Ee.\u0275fac})}return Ee})();const me={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},F=/%COMP%/g,lt=new n.InjectionToken("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function nt(Ee,_e){return _e.map(te=>te.replace(F,Ee))}let ot=(()=>{class Ee{constructor(te,ue,Ae,mt,Tt,gn,pn,Xn=null){this.eventManager=te,this.sharedStylesHost=ue,this.appId=Ae,this.removeStylesOnCompDestory=mt,this.doc=Tt,this.platformId=gn,this.ngZone=pn,this.nonce=Xn,this.rendererByCompId=new Map,this.platformIsServer=(0,M.isPlatformServer)(gn),this.defaultRenderer=new Ye(te,Tt,pn,this.platformIsServer)}createRenderer(te,ue){if(!te||!ue)return this.defaultRenderer;this.platformIsServer&&ue.encapsulation===n.ViewEncapsulation.ShadowDom&&(ue={...ue,encapsulation:n.ViewEncapsulation.Emulated});const Ae=this.getOrCreateRenderer(te,ue);return Ae instanceof He?Ae.applyToHost(te):Ae instanceof Me&&Ae.applyStyles(),Ae}getOrCreateRenderer(te,ue){const Ae=this.rendererByCompId;let mt=Ae.get(ue.id);if(!mt){const Tt=this.doc,gn=this.ngZone,pn=this.eventManager,Xn=this.sharedStylesHost,qi=this.removeStylesOnCompDestory,Ji=this.platformIsServer;switch(ue.encapsulation){case n.ViewEncapsulation.Emulated:mt=new He(pn,Xn,ue,this.appId,qi,Tt,gn,Ji);break;case n.ViewEncapsulation.ShadowDom:return new re(pn,Xn,te,ue,Tt,gn,this.nonce,Ji);default:mt=new Me(pn,Xn,ue,qi,Tt,gn,Ji)}mt.onDestroy=()=>Ae.delete(ue.id),Ae.set(ue.id,mt)}return mt}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(ue){return new(ue||Ee)(n.\u0275\u0275inject($),n.\u0275\u0275inject(ie),n.\u0275\u0275inject(n.APP_ID),n.\u0275\u0275inject(lt),n.\u0275\u0275inject(M.DOCUMENT),n.\u0275\u0275inject(n.PLATFORM_ID),n.\u0275\u0275inject(n.NgZone),n.\u0275\u0275inject(n.CSP_NONCE))};static#t=this.\u0275prov=n.\u0275\u0275defineInjectable({token:Ee,factory:Ee.\u0275fac})}return Ee})();class Ye{constructor(_e,te,ue,Ae){this.eventManager=_e,this.doc=te,this.ngZone=ue,this.platformIsServer=Ae,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(_e,te){return te?this.doc.createElementNS(me[te]||te,_e):this.doc.createElement(_e)}createComment(_e){return this.doc.createComment(_e)}createText(_e){return this.doc.createTextNode(_e)}appendChild(_e,te){(It(_e)?_e.content:_e).appendChild(te)}insertBefore(_e,te,ue){_e&&(It(_e)?_e.content:_e).insertBefore(te,ue)}removeChild(_e,te){_e&&_e.removeChild(te)}selectRootElement(_e,te){let ue="string"==typeof _e?this.doc.querySelector(_e):_e;if(!ue)throw new n.\u0275RuntimeError(5104,!1);return te||(ue.textContent=""),ue}parentNode(_e){return _e.parentNode}nextSibling(_e){return _e.nextSibling}setAttribute(_e,te,ue,Ae){if(Ae){te=Ae+":"+te;const mt=me[Ae];mt?_e.setAttributeNS(mt,te,ue):_e.setAttribute(te,ue)}else _e.setAttribute(te,ue)}removeAttribute(_e,te,ue){if(ue){const Ae=me[ue];Ae?_e.removeAttributeNS(Ae,te):_e.removeAttribute(`${ue}:${te}`)}else _e.removeAttribute(te)}addClass(_e,te){_e.classList.add(te)}removeClass(_e,te){_e.classList.remove(te)}setStyle(_e,te,ue,Ae){Ae&(n.RendererStyleFlags2.DashCase|n.RendererStyleFlags2.Important)?_e.style.setProperty(te,ue,Ae&n.RendererStyleFlags2.Important?"important":""):_e.style[te]=ue}removeStyle(_e,te,ue){ue&n.RendererStyleFlags2.DashCase?_e.style.removeProperty(te):_e.style[te]=""}setProperty(_e,te,ue){_e[te]=ue}setValue(_e,te){_e.nodeValue=te}listen(_e,te,ue){if("string"==typeof _e&&!(_e=(0,M.\u0275getDOM)().getGlobalEventTarget(this.doc,_e)))throw new Error(`Unsupported event target ${_e} for event ${te}`);return this.eventManager.addEventListener(_e,te,this.decoratePreventDefault(ue))}decoratePreventDefault(_e){return te=>{if("__ngUnwrap__"===te)return _e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>_e(te)):_e(te))&&te.preventDefault()}}}function It(Ee){return"TEMPLATE"===Ee.tagName&&void 0!==Ee.content}class re extends Ye{constructor(_e,te,ue,Ae,mt,Tt,gn,pn){super(_e,mt,Tt,pn),this.sharedStylesHost=te,this.hostEl=ue,this.shadowRoot=ue.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Xn=nt(Ae.id,Ae.styles);for(const qi of Xn){const Ji=document.createElement("style");gn&&Ji.setAttribute("nonce",gn),Ji.textContent=qi,this.shadowRoot.appendChild(Ji)}}nodeOrShadowRoot(_e){return _e===this.hostEl?this.shadowRoot:_e}appendChild(_e,te){return super.appendChild(this.nodeOrShadowRoot(_e),te)}insertBefore(_e,te,ue){return super.insertBefore(this.nodeOrShadowRoot(_e),te,ue)}removeChild(_e,te){return super.removeChild(this.nodeOrShadowRoot(_e),te)}parentNode(_e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(_e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Me extends Ye{constructor(_e,te,ue,Ae,mt,Tt,gn,pn){super(_e,mt,Tt,gn),this.sharedStylesHost=te,this.removeStylesOnCompDestory=Ae,this.rendererUsageCount=0,this.styles=pn?nt(pn,ue.styles):ue.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class He extends Me{constructor(_e,te,ue,Ae,mt,Tt,gn,pn){const Xn=Ae+"-"+ue.id;super(_e,te,ue,mt,Tt,gn,pn,Xn),this.contentAttr=function ke(Ee){return"_ngcontent-%COMP%".replace(F,Ee)}(Xn),this.hostAttr=function Be(Ee){return"_nghost-%COMP%".replace(F,Ee)}(Xn)}applyToHost(_e){this.applyStyles(),this.setAttribute(_e,this.hostAttr,"")}createElement(_e,te){const ue=super.createElement(_e,te);return super.setAttribute(ue,this.contentAttr,""),ue}}let tt=(()=>{class Ee extends G{constructor(te){super(te)}supports(te){return!0}addEventListener(te,ue,Ae){return te.addEventListener(ue,Ae,!1),()=>this.removeEventListener(te,ue,Ae)}removeEventListener(te,ue,Ae){return te.removeEventListener(ue,Ae)}static#e=this.\u0275fac=function(ue){return new(ue||Ee)(n.\u0275\u0275inject(M.DOCUMENT))};static#t=this.\u0275prov=n.\u0275\u0275defineInjectable({token:Ee,factory:Ee.\u0275fac})}return Ee})();const wt=["alt","control","meta","shift"],Pt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Vt={alt:Ee=>Ee.altKey,control:Ee=>Ee.ctrlKey,meta:Ee=>Ee.metaKey,shift:Ee=>Ee.shiftKey};let Bt=(()=>{class Ee extends G{constructor(te){super(te)}supports(te){return null!=Ee.parseEventName(te)}addEventListener(te,ue,Ae){const mt=Ee.parseEventName(ue),Tt=Ee.eventCallback(mt.fullKey,Ae,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,M.\u0275getDOM)().onAndCancel(te,mt.domEventName,Tt))}static parseEventName(te){const ue=te.toLowerCase().split("."),Ae=ue.shift();if(0===ue.length||"keydown"!==Ae&&"keyup"!==Ae)return null;const mt=Ee._normalizeKey(ue.pop());let Tt="",gn=ue.indexOf("code");if(gn>-1&&(ue.splice(gn,1),Tt="code."),wt.forEach(Xn=>{const qi=ue.indexOf(Xn);qi>-1&&(ue.splice(qi,1),Tt+=Xn+".")}),Tt+=mt,0!=ue.length||0===mt.length)return null;const pn={};return pn.domEventName=Ae,pn.fullKey=Tt,pn}static matchEventFullKeyCode(te,ue){let Ae=Pt[te.key]||te.key,mt="";return ue.indexOf("code.")>-1&&(Ae=te.code,mt="code."),!(null==Ae||!Ae)&&(Ae=Ae.toLowerCase()," "===Ae?Ae="space":"."===Ae&&(Ae="dot"),wt.forEach(Tt=>{Tt!==Ae&&(0,Vt[Tt])(te)&&(mt+=Tt+".")}),mt+=Ae,mt===ue)}static eventCallback(te,ue,Ae){return mt=>{Ee.matchEventFullKeyCode(mt,te)&&Ae.runGuarded(()=>ue(mt))}}static _normalizeKey(te){return"esc"===te?"escape":te}static#e=this.\u0275fac=function(ue){return new(ue||Ee)(n.\u0275\u0275inject(M.DOCUMENT))};static#t=this.\u0275prov=n.\u0275\u0275defineInjectable({token:Ee,factory:Ee.\u0275fac})}return Ee})();const jn="main"==L.j?(0,n.createPlatformFactory)(n.platformCore,"browser",[{provide:n.PLATFORM_ID,useValue:M.\u0275PLATFORM_BROWSER_ID},{provide:n.PLATFORM_INITIALIZER,useValue:function At(){z.makeCurrent()},multi:!0},{provide:M.DOCUMENT,useFactory:function ln(){return(0,n.\u0275setDocument)(document),document},deps:[]}]):null,En=new n.InjectionToken(""),jt=[{provide:n.\u0275TESTABILITY_GETTER,useClass:class U{addToWindow(_e){n.\u0275global.getAngularTestability=(ue,Ae=!0)=>{const mt=_e.findTestabilityInTree(ue,Ae);if(null==mt)throw new n.\u0275RuntimeError(5103,!1);return mt},n.\u0275global.getAllAngularTestabilities=()=>_e.getAllTestabilities(),n.\u0275global.getAllAngularRootElements=()=>_e.getAllRootElements(),n.\u0275global.frameworkStabilizers||(n.\u0275global.frameworkStabilizers=[]),n.\u0275global.frameworkStabilizers.push(ue=>{const Ae=n.\u0275global.getAllAngularTestabilities();let mt=Ae.length,Tt=!1;const gn=function(pn){Tt=Tt||pn,mt--,0==mt&&ue(Tt)};Ae.forEach(function(pn){pn.whenStable(gn)})})}findTestabilityInTree(_e,te,ue){return null==te?null:_e.getTestability(te)??(ue?(0,M.\u0275getDOM)().isShadowRoot(te)?this.findTestabilityInTree(_e,te.host,!0):this.findTestabilityInTree(_e,te.parentElement,!0):null)}},deps:[]},{provide:n.\u0275TESTABILITY,useClass:n.Testability,deps:[n.NgZone,n.TestabilityRegistry,n.\u0275TESTABILITY_GETTER]},{provide:n.Testability,useClass:n.Testability,deps:[n.NgZone,n.TestabilityRegistry,n.\u0275TESTABILITY_GETTER]}],Sn=[{provide:n.\u0275INJECTOR_SCOPE,useValue:"root"},{provide:n.ErrorHandler,useFactory:function Fn(){return new n.ErrorHandler},deps:[]},{provide:k,useClass:tt,multi:!0,deps:[M.DOCUMENT,n.NgZone,n.PLATFORM_ID]},{provide:k,useClass:Bt,multi:!0,deps:[M.DOCUMENT]},ot,ie,$,{provide:n.RendererFactory2,useExisting:ot},{provide:M.XhrFactory,useClass:I,deps:[]},[]];let ii="main"==L.j?(()=>{class Ee{constructor(te){}static withServerTransition(te){return{ngModule:Ee,providers:[{provide:n.APP_ID,useValue:te.appId}]}}static#e=this.\u0275fac=function(ue){return new(ue||Ee)(n.\u0275\u0275inject(En,12))};static#t=this.\u0275mod=n.\u0275\u0275defineNgModule({type:Ee});static#n=this.\u0275inj=n.\u0275\u0275defineInjector({providers:[...Sn,...jt],imports:[M.CommonModule,n.ApplicationModule]})}return Ee})():null,xi=(()=>{class Ee{constructor(te){this._doc=te}getTitle(){return this._doc.title}setTitle(te){this._doc.title=te||""}static#e=this.\u0275fac=function(ue){return new(ue||Ee)(n.\u0275\u0275inject(M.DOCUMENT))};static#t=this.\u0275prov=n.\u0275\u0275defineInjectable({token:Ee,factory:function(ue){let Ae=null;return Ae=ue?new ue:function Kn(){return new xi((0,n.\u0275\u0275inject)(M.DOCUMENT))}(),Ae},providedIn:"root"})}return Ee})();typeof window<"u"&&window;let nn=(()=>{class Ee{static#e=this.\u0275fac=function(ue){return new(ue||Ee)};static#t=this.\u0275prov=n.\u0275\u0275defineInjectable({token:Ee,factory:function(ue){let Ae=null;return Ae=ue?new(ue||Ee):n.\u0275\u0275inject(In),Ae},providedIn:"root"})}return Ee})(),In=(()=>{class Ee extends nn{constructor(te){super(),this._doc=te}sanitize(te,ue){if(null==ue)return null;switch(te){case n.SecurityContext.NONE:return ue;case n.SecurityContext.HTML:return(0,n.\u0275allowSanitizationBypassAndThrow)(ue,"HTML")?(0,n.\u0275unwrapSafeValue)(ue):(0,n.\u0275_sanitizeHtml)(this._doc,String(ue)).toString();case n.SecurityContext.STYLE:return(0,n.\u0275allowSanitizationBypassAndThrow)(ue,"Style")?(0,n.\u0275unwrapSafeValue)(ue):ue;case n.SecurityContext.SCRIPT:if((0,n.\u0275allowSanitizationBypassAndThrow)(ue,"Script"))return(0,n.\u0275unwrapSafeValue)(ue);throw new n.\u0275RuntimeError(5200,!1);case n.SecurityContext.URL:return(0,n.\u0275allowSanitizationBypassAndThrow)(ue,"URL")?(0,n.\u0275unwrapSafeValue)(ue):(0,n.\u0275_sanitizeUrl)(String(ue));case n.SecurityContext.RESOURCE_URL:if((0,n.\u0275allowSanitizationBypassAndThrow)(ue,"ResourceURL"))return(0,n.\u0275unwrapSafeValue)(ue);throw new n.\u0275RuntimeError(5201,!1);default:throw new n.\u0275RuntimeError(5202,!1)}}bypassSecurityTrustHtml(te){return(0,n.\u0275bypassSanitizationTrustHtml)(te)}bypassSecurityTrustStyle(te){return(0,n.\u0275bypassSanitizationTrustStyle)(te)}bypassSecurityTrustScript(te){return(0,n.\u0275bypassSanitizationTrustScript)(te)}bypassSecurityTrustUrl(te){return(0,n.\u0275bypassSanitizationTrustUrl)(te)}bypassSecurityTrustResourceUrl(te){return(0,n.\u0275bypassSanitizationTrustResourceUrl)(te)}static#e=this.\u0275fac=function(ue){return new(ue||Ee)(n.\u0275\u0275inject(M.DOCUMENT))};static#t=this.\u0275prov=n.\u0275\u0275defineInjectable({token:Ee,factory:function(ue){let Ae=null;return Ae=ue?new ue:function fn(Ee){return new In(Ee.get(M.DOCUMENT))}(n.\u0275\u0275inject(n.Injector)),Ae},providedIn:"root"})}return Ee})()},293:(we,oe,L)=>{L.d(oe,{Z:()=>z});var n=L(2675),M=L(7856);function v(K){this.__wrapped__=K,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}(v.prototype=(0,n.Z)(M.Z.prototype)).constructor=v;const z=v},7066:(we,oe,L)=>{L.d(oe,{Z:()=>me});var S=L(8418);const z=function v(F,Ke){for(var pe=F.length;pe--;)if((0,S.Z)(F[pe][0],Ke))return pe;return-1};var de=Array.prototype.splice;function ie(F){var Ke=-1,pe=null==F?0:F.length;for(this.clear();++Ke<pe;){var et=F[Ke];this.set(et[0],et[1])}}ie.prototype.clear=function n(){this.__data__=[],this.size=0},ie.prototype.delete=function ae(F){var Ke=this.__data__,pe=z(Ke,F);return!(pe<0||(pe==Ke.length-1?Ke.pop():de.call(Ke,pe,1),--this.size,0))},ie.prototype.get=function U(F){var Ke=this.__data__,pe=z(Ke,F);return pe<0?void 0:Ke[pe][1]},ie.prototype.has=function k(F){return z(this.__data__,F)>-1},ie.prototype.set=function G(F,Ke){var pe=this.__data__,et=z(pe,F);return et<0?(++this.size,pe.push([F,Ke])):pe[et][1]=Ke,this};const me=ie},3934:(we,oe,L)=>{L.d(oe,{Z:()=>v});var n=L(2675),M=L(7856);function S(z,K){this.__wrapped__=z,this.__actions__=[],this.__chain__=!!K,this.__index__=0,this.__values__=void 0}(S.prototype=(0,n.Z)(M.Z.prototype)).constructor=S;const v=S},2847:(we,oe,L)=>{L.d(oe,{Z:()=>v});var n=L(9218),M=L(4131);const v=(0,n.Z)(M.Z,"Map")},8410:(we,oe,L)=>{L.d(oe,{Z:()=>Bt});const S=(0,L(9218).Z)(Object,"create");var U=Object.prototype.hasOwnProperty;var G=Object.prototype.hasOwnProperty;function pe(gt){var St=-1,yn=null==gt?0:gt.length;for(this.clear();++St<yn;){var Ct=gt[St];this.set(Ct[0],Ct[1])}}pe.prototype.clear=function v(){this.__data__=S?S(null):{},this.size=0},pe.prototype.delete=function K(gt){var St=this.has(gt)&&delete this.__data__[gt];return this.size-=St?1:0,St},pe.prototype.get=function I(gt){var St=this.__data__;if(S){var yn=St[gt];return"__lodash_hash_undefined__"===yn?void 0:yn}return U.call(St,gt)?St[gt]:void 0},pe.prototype.has=function X(gt){var St=this.__data__;return S?void 0!==St[gt]:G.call(St,gt)},pe.prototype.set=function F(gt,St){var yn=this.__data__;return this.size+=this.has(gt)?0:1,yn[gt]=S&&void 0===St?"__lodash_hash_undefined__":St,this};const et=pe;var je=L(7066),lt=L(2847);const en=function Ye(gt,St){var yn=gt.__data__;return function nt(gt){var St=typeof gt;return"string"==St||"number"==St||"symbol"==St||"boolean"==St?"__proto__"!==gt:null===gt}(St)?yn["string"==typeof St?"string":"hash"]:yn.map};function Vt(gt){var St=-1,yn=null==gt?0:gt.length;for(this.clear();++St<yn;){var Ct=gt[St];this.set(Ct[0],Ct[1])}}Vt.prototype.clear=function ke(){this.size=0,this.__data__={hash:new et,map:new(lt.Z||je.Z),string:new et}},Vt.prototype.delete=function Qe(gt){var St=en(this,gt).delete(gt);return this.size-=St?1:0,St},Vt.prototype.get=function re(gt){return en(this,gt).get(gt)},Vt.prototype.has=function He(gt){return en(this,gt).has(gt)},Vt.prototype.set=function wt(gt,St){var yn=en(this,gt),Ct=yn.size;return yn.set(gt,St),this.size+=yn.size==Ct?0:1,this};const Bt=Vt},6875:(we,oe,L)=>{L.d(oe,{Z:()=>S});const S=L(4131).Z.Symbol},7385:(we,oe,L)=>{L.d(oe,{Z:()=>v});var n=L(9218),M=L(4131);const v=(0,n.Z)(M.Z,"WeakMap")},3888:(we,oe,L)=>{L.d(oe,{Z:()=>M});const M=function n(S,v,z){switch(z.length){case 0:return S.call(v);case 1:return S.call(v,z[0]);case 2:return S.call(v,z[0],z[1]);case 3:return S.call(v,z[0],z[1],z[2])}return S.apply(v,z)}},4899:(we,oe,L)=>{L.d(oe,{Z:()=>M});const M=function n(S,v){for(var z=-1,K=null==S?0:S.length;++z<K&&!1!==v(S[z],z,S););return S}},3041:(we,oe,L)=>{L.d(oe,{Z:()=>S});var n=L(5496);const S=function M(v,z){return!(null==v||!v.length)&&(0,n.Z)(v,z,0)>-1}},1668:(we,oe,L)=>{L.d(oe,{Z:()=>U});var n=L(1292),M=L(5727),S=L(9977),v=L(9509),z=L(9229),K=L(7227),ae=Object.prototype.hasOwnProperty;const U=function V(I,k){var $=(0,S.Z)(I),G=!$&&(0,M.Z)(I),X=!$&&!G&&(0,v.Z)(I),ie=!$&&!G&&!X&&(0,K.Z)(I),me=$||G||X||ie,F=me?(0,n.Z)(I.length,String):[],Ke=F.length;for(var pe in I)(k||ae.call(I,pe))&&(!me||!("length"==pe||X&&("offset"==pe||"parent"==pe)||ie&&("buffer"==pe||"byteLength"==pe||"byteOffset"==pe)||(0,z.Z)(pe,Ke)))&&F.push(pe);return F}},2720:(we,oe,L)=>{L.d(oe,{Z:()=>M});const M=function n(S,v){for(var z=-1,K=null==S?0:S.length,de=Array(K);++z<K;)de[z]=v(S[z],z,S);return de}},4416:(we,oe,L)=>{L.d(oe,{Z:()=>K});var n=L(6041),M=L(8418),v=Object.prototype.hasOwnProperty;const K=function z(de,ae,V){var U=de[ae];(!v.call(de,ae)||!(0,M.Z)(U,V)||void 0===V&&!(ae in de))&&(0,n.Z)(de,ae,V)}},6041:(we,oe,L)=>{L.d(oe,{Z:()=>S});var n=L(5753);const S=function M(v,z,K){"__proto__"==z&&n.Z?(0,n.Z)(v,z,{configurable:!0,enumerable:!0,value:K,writable:!0}):v[z]=K}},2675:(we,oe,L)=>{L.d(oe,{Z:()=>v});var n=L(5829),M=Object.create;const v=function(){function z(){}return function(K){if(!(0,n.Z)(K))return{};if(M)return M(K);z.prototype=K;var de=new z;return z.prototype=void 0,de}}()},8568:(we,oe,L)=>{L.d(oe,{Z:()=>M});const M=function n(S,v,z,K){for(var de=S.length,ae=z+(K?1:-1);K?ae--:++ae<de;)if(v(S[ae],ae,S))return ae;return-1}},4818:(we,oe,L)=>{L.d(oe,{Z:()=>v});var n=L(1892),M=L(7801);const v=function S(z,K){for(var de=0,ae=(K=(0,n.Z)(K,z)).length;null!=z&&de<ae;)z=z[(0,M.Z)(K[de++])];return de&&de==ae?z:void 0}},3844:(we,oe,L)=>{L.d(oe,{Z:()=>ie});var n=L(6875),M=Object.prototype,S=M.hasOwnProperty,v=M.toString,z=n.Z?n.Z.toStringTag:void 0;var V=Object.prototype.toString;var G=n.Z?n.Z.toStringTag:void 0;const ie=function X(me){return null==me?void 0===me?"[object Undefined]":"[object Null]":G&&G in Object(me)?function K(me){var F=S.call(me,z),Ke=me[z];try{me[z]=void 0;var pe=!0}catch{}var et=v.call(me);return pe&&(F?me[z]=Ke:delete me[z]),et}(me):function U(me){return V.call(me)}(me)}},5496:(we,oe,L)=>{L.d(oe,{Z:()=>K});var n=L(8568),M=L(7090);const K=function z(de,ae,V){return ae==ae?function S(de,ae,V){for(var U=V-1,I=de.length;++U<I;)if(de[U]===ae)return U;return-1}(de,ae,V):(0,n.Z)(de,M.Z,V)}},7090:(we,oe,L)=>{L.d(oe,{Z:()=>M});const M=function n(S){return S!=S}},1915:(we,oe,L)=>{L.d(oe,{Z:()=>ie});var me,n=L(4842),M=L(6006),S=(me=/[^.]+$/.exec(M.Z&&M.Z.keys&&M.Z.keys.IE_PROTO||""))?"Symbol(src)_1."+me:"";var K=L(5829),de=L(8594),V=/^\[object .+?Constructor\]$/,G=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const ie=function X(me){return!(!(0,K.Z)(me)||function v(me){return!!S&&S in me}(me))&&((0,n.Z)(me)?G:V).test((0,de.Z)(me))}},7856:(we,oe,L)=>{L.d(oe,{Z:()=>M});const M=function n(){}},2447:(we,oe,L)=>{L.d(oe,{Z:()=>z});var n=L(1974),M=L(7657),S=L(7956);const z=function v(K,de){return(0,S.Z)((0,M.Z)(K,de,n.Z),K+"")}},5985:(we,oe,L)=>{L.d(oe,{Z:()=>de});var n=L(4416),M=L(1892),S=L(9229),v=L(5829),z=L(7801);const de=function K(ae,V,U,I){if(!(0,v.Z)(ae))return ae;for(var k=-1,$=(V=(0,M.Z)(V,ae)).length,G=$-1,X=ae;null!=X&&++k<$;){var ie=(0,z.Z)(V[k]),me=U;if("__proto__"===ie||"constructor"===ie||"prototype"===ie)return ae;if(k!=G){var F=X[ie];void 0===(me=I?I(F,ie,X):void 0)&&(me=(0,v.Z)(F)?F:(0,S.Z)(V[k+1])?[]:{})}(0,n.Z)(X,ie,me),X=X[ie]}return ae}},9553:(we,oe,L)=>{L.d(oe,{Z:()=>v});var n=L(1974),M=L(801);const v=M.Z?function(z,K){return M.Z.set(z,K),z}:n.Z},1292:(we,oe,L)=>{L.d(oe,{Z:()=>M});const M=function n(S,v){for(var z=-1,K=Array(S);++z<S;)K[z]=v(z);return K}},6066:(we,oe,L)=>{L.d(oe,{Z:()=>V});var n=L(6875),M=L(2720),S=L(9977),v=L(7106),K=n.Z?n.Z.prototype:void 0,de=K?K.toString:void 0;const V=function ae(U){if("string"==typeof U)return U;if((0,S.Z)(U))return(0,M.Z)(U,ae)+"";if((0,v.Z)(U))return de?de.call(U):"";var I=U+"";return"0"==I&&1/U==-1/0?"-0":I}},4689:(we,oe,L)=>{L.d(oe,{Z:()=>v});var n=L(3121),M=/^\s+/;const v=function S(z){return z&&z.slice(0,(0,n.Z)(z)+1).replace(M,"")}},8733:(we,oe,L)=>{L.d(oe,{Z:()=>M});const M=function n(S){return function(v){return S(v)}}},1892:(we,oe,L)=>{L.d(oe,{Z:()=>K});var n=L(9977),M=L(6331),S=L(7546),v=L(5902);const K=function z(de,ae){return(0,n.Z)(de)?de:(0,M.Z)(de,ae)?[de]:(0,S.Z)((0,v.Z)(de))}},8195:(we,oe,L)=>{L.d(oe,{Z:()=>S});var n=Math.max;const S=function M(v,z,K,de){for(var ae=-1,V=v.length,U=K.length,I=-1,k=z.length,$=n(V-U,0),G=Array(k+$),X=!de;++I<k;)G[I]=z[I];for(;++ae<U;)(X||ae<V)&&(G[K[ae]]=v[ae]);for(;$--;)G[I++]=v[ae++];return G}},5815:(we,oe,L)=>{L.d(oe,{Z:()=>S});var n=Math.max;const S=function M(v,z,K,de){for(var ae=-1,V=v.length,U=-1,I=K.length,k=-1,$=z.length,G=n(V-I,0),X=Array(G+$),ie=!de;++ae<G;)X[ae]=v[ae];for(var me=ae;++k<$;)X[me+k]=z[k];for(;++U<I;)(ie||ae<V)&&(X[me+K[U]]=v[ae++]);return X}},2307:(we,oe,L)=>{L.d(oe,{Z:()=>M});const M=function n(S,v){var z=-1,K=S.length;for(v||(v=Array(K));++z<K;)v[z]=S[z];return v}},6006:(we,oe,L)=>{L.d(oe,{Z:()=>S});const S=L(4131).Z["__core-js_shared__"]},6187:(we,oe,L)=>{L.d(oe,{Z:()=>v});var n=L(2675),M=L(5829);const v=function S(z){return function(){var K=arguments;switch(K.length){case 0:return new z;case 1:return new z(K[0]);case 2:return new z(K[0],K[1]);case 3:return new z(K[0],K[1],K[2]);case 4:return new z(K[0],K[1],K[2],K[3]);case 5:return new z(K[0],K[1],K[2],K[3],K[4]);case 6:return new z(K[0],K[1],K[2],K[3],K[4],K[5]);case 7:return new z(K[0],K[1],K[2],K[3],K[4],K[5],K[6])}var de=(0,n.Z)(z.prototype),ae=z.apply(de,K);return(0,M.Z)(ae)?ae:de}}},5662:(we,oe,L)=>{L.d(oe,{Z:()=>je});var n=L(8195),M=L(5815);var z=L(6187),K=L(1167),de=L(7500),ae=L(2307),V=L(9229),U=Math.min;var $=L(1966),G=L(4131);const je=function et(lt,ke,Be,nt,ot,Ye,en,Qe,It,re){var Me=128&ke,He=1&ke,tt=2&ke,wt=24&ke,Pt=512&ke,Vt=tt?void 0:(0,z.Z)(lt);return function Bt(){for(var gt=arguments.length,St=Array(gt),yn=gt;yn--;)St[yn]=arguments[yn];if(wt)var Ct=(0,de.Z)(Bt),At=function S(lt,ke){for(var Be=lt.length,nt=0;Be--;)lt[Be]===ke&&++nt;return nt}(St,Ct);if(nt&&(St=(0,n.Z)(St,nt,ot,wt)),Ye&&(St=(0,M.Z)(St,Ye,en,wt)),gt-=At,wt&&gt<re){var Fn=(0,$.Z)(St,Ct);return(0,K.Z)(lt,ke,et,Bt.placeholder,Be,St,Fn,Qe,It,re-gt)}var ln=He?Be:this,on=tt?ln[lt]:lt;return gt=St.length,Qe?St=function I(lt,ke){for(var Be=lt.length,nt=U(ke.length,Be),ot=(0,ae.Z)(lt);nt--;){var Ye=ke[nt];lt[nt]=(0,V.Z)(Ye,Be)?ot[Ye]:void 0}return lt}(St,Qe):Pt&&gt>1&&St.reverse(),Me&&It<gt&&(St.length=It),this&&this!==G.Z&&this instanceof Bt&&(on=Vt||(0,z.Z)(on)),on.apply(ln,St)}}},1167:(we,oe,L)=>{L.d(oe,{Z:()=>I});var n=L(4118),M=L(7778),S=L(8473);const I=function U(k,$,G,X,ie,me,F,Ke,pe,et){var je=8&$;$|=je?32:64,4&($&=~(je?64:32))||($&=-4);var ot=[k,$,ie,je?me:void 0,je?F:void 0,je?void 0:me,je?void 0:F,Ke,pe,et],Ye=G.apply(void 0,ot);return(0,n.Z)(k)&&(0,M.Z)(Ye,ot),Ye.placeholder=X,(0,S.Z)(Ye,k,$)}},9774:(we,oe,L)=>{L.d(oe,{Z:()=>yn});var n=L(9553),M=L(6187),S=L(4131);var de=L(3888),ae=L(5662),V=L(1167),U=L(7500),I=L(1966);var me=L(3557),F=L(8195),Ke=L(5815),pe="__lodash_placeholder__",ot=Math.min;var Qe=L(7778),It=L(8473),re=L(827),gt=Math.max;const yn=function St(Ct,At,Fn,ln,on,jn,En,jt){var Sn=2&At;if(!Sn&&"function"!=typeof Ct)throw new TypeError("Expected a function");var ii=ln?ln.length:0;if(ii||(At&=-97,ln=on=void 0),En=void 0===En?En:gt((0,re.Z)(En),0),jt=void 0===jt?jt:(0,re.Z)(jt),ii-=on?on.length:0,64&At){var Ki=ln,Hi=on;ln=on=void 0}var Zi=Sn?void 0:(0,me.Z)(Ct),Kn=[Ct,At,Fn,ln,on,Ki,Hi,jn,En,jt];if(Zi&&function Ye(Ct,At){var Fn=Ct[1],ln=At[1],on=Fn|ln;if(!(on<131||128==ln&&8==Fn||128==ln&&256==Fn&&Ct[7].length<=At[8]||384==ln&&At[7].length<=At[8]&&8==Fn))return Ct;1&ln&&(Ct[2]=At[2],on|=1&Fn?0:4);var jt=At[3];if(jt){var Sn=Ct[3];Ct[3]=Sn?(0,F.Z)(Sn,jt,At[4]):jt,Ct[4]=Sn?(0,I.Z)(Ct[3],pe):At[4]}(jt=At[5])&&(Ct[5]=(Sn=Ct[5])?(0,Ke.Z)(Sn,jt,At[6]):jt,Ct[6]=Sn?(0,I.Z)(Ct[5],pe):At[6]),(jt=At[7])&&(Ct[7]=jt),128&ln&&(Ct[8]=null==Ct[8]?At[8]:ot(Ct[8],At[8])),null==Ct[9]&&(Ct[9]=At[9]),Ct[0]=At[0],Ct[1]=on}(Kn,Zi),Ct=Kn[0],At=Kn[1],Fn=Kn[2],ln=Kn[3],on=Kn[4],!(jt=Kn[9]=void 0===Kn[9]?Sn?0:Ct.length:gt(Kn[9]-ii,0))&&24&At&&(At&=-25),At&&1!=At)xi=8==At||16==At?function k(Ct,At,Fn){var ln=(0,M.Z)(Ct);return function on(){for(var jn=arguments.length,En=Array(jn),jt=jn,Sn=(0,U.Z)(on);jt--;)En[jt]=arguments[jt];var ii=jn<3&&En[0]!==Sn&&En[jn-1]!==Sn?[]:(0,I.Z)(En,Sn);return(jn-=ii.length)<Fn?(0,V.Z)(Ct,At,ae.Z,on.placeholder,void 0,En,ii,void 0,void 0,Fn-jn):(0,de.Z)(this&&this!==S.Z&&this instanceof on?ln:Ct,this,En)}}(Ct,At,jt):32!=At&&33!=At||on.length?ae.Z.apply(void 0,Kn):function X(Ct,At,Fn,ln){var on=1&At,jn=(0,M.Z)(Ct);return function En(){for(var jt=-1,Sn=arguments.length,ii=-1,Ki=ln.length,Hi=Array(Ki+Sn),Zi=this&&this!==S.Z&&this instanceof En?jn:Ct;++ii<Ki;)Hi[ii]=ln[ii];for(;Sn--;)Hi[ii++]=arguments[++jt];return(0,de.Z)(Zi,on?Fn:this,Hi)}}(Ct,At,Fn,ln);else var xi=function z(Ct,At,Fn){var ln=1&At,on=(0,M.Z)(Ct);return function jn(){return(this&&this!==S.Z&&this instanceof jn?on:Ct).apply(ln?Fn:this,arguments)}}(Ct,At,Fn);return(0,It.Z)((Zi?n.Z:Qe.Z)(xi,Kn),Ct,At)}},5753:(we,oe,L)=>{L.d(oe,{Z:()=>S});var n=L(9218);const S=function(){try{var v=(0,n.Z)(Object,"defineProperty");return v({},"",{}),v}catch{}}()},7806:(we,oe,L)=>{L.d(oe,{Z:()=>M});const M="object"==typeof global&&global&&global.Object===Object&&global},3557:(we,oe,L)=>{L.d(oe,{Z:()=>v});var n=L(801),M=L(320);const v=n.Z?function(z){return n.Z.get(z)}:M.Z},6034:(we,oe,L)=>{L.d(oe,{Z:()=>z});var n=L(1767),S=Object.prototype.hasOwnProperty;const z=function v(K){for(var de=K.name+"",ae=n.Z[de],V=S.call(n.Z,de)?ae.length:0;V--;){var U=ae[V],I=U.func;if(null==I||I==K)return U.name}return de}},7500:(we,oe,L)=>{L.d(oe,{Z:()=>M});const M=function n(S){return S.placeholder}},9218:(we,oe,L)=>{L.d(oe,{Z:()=>z});var n=L(1915);const z=function v(K,de){var ae=function M(K,de){return K?.[de]}(K,de);return(0,n.Z)(ae)?ae:void 0}},9229:(we,oe,L)=>{L.d(oe,{Z:()=>v});var M=/^(?:0|[1-9]\d*)$/;const v=function S(z,K){var de=typeof z;return!!(K=K??9007199254740991)&&("number"==de||"symbol"!=de&&M.test(z))&&z>-1&&z%1==0&&z<K}},1799:(we,oe,L)=>{L.d(oe,{Z:()=>K});var n=L(8418),M=L(6247),S=L(9229),v=L(5829);const K=function z(de,ae,V){if(!(0,v.Z)(V))return!1;var U=typeof ae;return!!("number"==U?(0,M.Z)(V)&&(0,S.Z)(ae,V.length):"string"==U&&ae in V)&&(0,n.Z)(V[ae],de)}},6331:(we,oe,L)=>{L.d(oe,{Z:()=>K});var n=L(9977),M=L(7106),S=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,v=/^\w*$/;const K=function z(de,ae){if((0,n.Z)(de))return!1;var V=typeof de;return!("number"!=V&&"symbol"!=V&&"boolean"!=V&&null!=de&&!(0,M.Z)(de))||v.test(de)||!S.test(de)||null!=ae&&de in Object(ae)}},4118:(we,oe,L)=>{L.d(oe,{Z:()=>K});var n=L(293),M=L(3557),S=L(6034),v=L(4142);const K=function z(de){var ae=(0,S.Z)(de),V=v.Z[ae];if("function"!=typeof V||!(ae in n.Z.prototype))return!1;if(de===V)return!0;var U=(0,M.Z)(V);return!!U&&de===U[0]}},3834:(we,oe,L)=>{L.d(oe,{Z:()=>S});var n=Object.prototype;const S=function M(v){var z=v&&v.constructor;return v===("function"==typeof z&&z.prototype||n)}},801:(we,oe,L)=>{L.d(oe,{Z:()=>S});var n=L(7385);const S=n.Z&&new n.Z},5527:(we,oe,L)=>{L.d(oe,{Z:()=>de});var n=L(7806),M="object"==typeof exports&&exports&&!exports.nodeType&&exports,S=M&&"object"==typeof module&&module&&!module.nodeType&&module,z=S&&S.exports===M&&n.Z.process;const de=function(){try{return S&&S.require&&S.require("util").types||z&&z.binding&&z.binding("util")}catch{}}()},7657:(we,oe,L)=>{L.d(oe,{Z:()=>v});var n=L(3888),M=Math.max;const v=function S(z,K,de){return K=M(void 0===K?z.length-1:K,0),function(){for(var ae=arguments,V=-1,U=M(ae.length-K,0),I=Array(U);++V<U;)I[V]=ae[K+V];V=-1;for(var k=Array(K+1);++V<K;)k[V]=ae[V];return k[K]=de(I),(0,n.Z)(z,this,k)}}},1767:(we,oe,L)=>{L.d(oe,{Z:()=>M});const M={}},1966:(we,oe,L)=>{L.d(oe,{Z:()=>S});var n="__lodash_placeholder__";const S=function M(v,z){for(var K=-1,de=v.length,ae=0,V=[];++K<de;){var U=v[K];(U===z||U===n)&&(v[K]=n,V[ae++]=K)}return V}},4131:(we,oe,L)=>{L.d(oe,{Z:()=>v});var n=L(7806),M="object"==typeof self&&self&&self.Object===Object&&self;const v=n.Z||M||Function("return this")()},7778:(we,oe,L)=>{L.d(oe,{Z:()=>v});var n=L(9553);const v=(0,L(4408).Z)(n.Z)},7956:(we,oe,L)=>{L.d(oe,{Z:()=>ae});var n=L(410),M=L(5753),S=L(1974);const z=M.Z?function(V,U){return(0,M.Z)(V,"toString",{configurable:!0,enumerable:!1,value:(0,n.Z)(U),writable:!0})}:S.Z,ae=(0,L(4408).Z)(z)},8473:(we,oe,L)=>{L.d(oe,{Z:()=>ke});var n=/\{\n\/\* \[wrapped with (.+)\] \*/,M=/,? & /;var z=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;var ae=L(7956),V=L(4899),U=L(3041),pe=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]];const ke=function lt(Be,nt,ot){var Ye=nt+"";return(0,ae.Z)(Be,function K(Be,nt){var ot=nt.length;if(!ot)return Be;var Ye=ot-1;return nt[Ye]=(ot>1?"& ":"")+nt[Ye],nt=nt.join(ot>2?", ":" "),Be.replace(z,"{\n/* [wrapped with "+nt+"] */\n")}(Ye,function et(Be,nt){return(0,V.Z)(pe,function(ot){var Ye="_."+ot[0];nt&ot[1]&&!(0,U.Z)(Be,Ye)&&Be.push(Ye)}),Be.sort()}(function S(Be){var nt=Be.match(n);return nt?nt[1].split(M):[]}(Ye),ot)))}},4408:(we,oe,L)=>{L.d(oe,{Z:()=>z});var S=Date.now;const z=function v(K){var de=0,ae=0;return function(){var V=S(),U=16-(V-ae);if(ae=V,U>0){if(++de>=800)return arguments[0]}else de=0;return K.apply(void 0,arguments)}}},7546:(we,oe,L)=>{L.d(oe,{Z:()=>ae});var n=L(4961),z=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,K=/\\(\\)?/g;const ae=function S(V){var U=(0,n.Z)(V,function(k){return 500===I.size&&I.clear(),k}),I=U.cache;return U}(function(V){var U=[];return 46===V.charCodeAt(0)&&U.push(""),V.replace(z,function(I,k,$,G){U.push($?G.replace(K,"$1"):k||I)}),U})},7801:(we,oe,L)=>{L.d(oe,{Z:()=>v});var n=L(7106);const v=function S(z){if("string"==typeof z||(0,n.Z)(z))return z;var K=z+"";return"0"==K&&1/z==-1/0?"-0":K}},8594:(we,oe,L)=>{L.d(oe,{Z:()=>v});var M=Function.prototype.toString;const v=function S(z){if(null!=z){try{return M.call(z)}catch{}try{return z+""}catch{}}return""}},3121:(we,oe,L)=>{L.d(oe,{Z:()=>S});var n=/\s/;const S=function M(v){for(var z=v.length;z--&&n.test(v.charAt(z)););return z}},92:(we,oe,L)=>{L.d(oe,{Z:()=>z});var n=L(293),M=L(3934),S=L(2307);const z=function v(K){if(K instanceof n.Z)return K.clone();var de=new M.Z(K.__wrapped__,K.__chain__);return de.__actions__=(0,S.Z)(K.__actions__),de.__index__=K.__index__,de.__values__=K.__values__,de}},410:(we,oe,L)=>{L.d(oe,{Z:()=>M});const M=function n(S){return function(){return S}}},8123:(we,oe,L)=>{L.d(oe,{Z:()=>ae});var n=L(2447),M=L(8418),S=L(1799),v=L(2851),z=Object.prototype,K=z.hasOwnProperty;const ae=(0,n.Z)(function(V,U){V=Object(V);var I=-1,k=U.length,$=k>2?U[2]:void 0;for($&&(0,S.Z)(U[0],U[1],$)&&(k=1);++I<k;)for(var G=U[I],X=(0,v.Z)(G),ie=-1,me=X.length;++ie<me;){var F=X[ie],Ke=V[F];(void 0===Ke||(0,M.Z)(Ke,z[F])&&!K.call(V,F))&&(V[F]=G[F])}return V})},8418:(we,oe,L)=>{L.d(oe,{Z:()=>M});const M=function n(S,v){return S===v||S!=S&&v!=v}},3068:(we,oe,L)=>{L.d(oe,{Z:()=>S});var n=L(4818);const S=function M(v,z,K){var de=null==v?void 0:(0,n.Z)(v,z);return void 0===de?K:de}},1974:(we,oe,L)=>{L.d(oe,{Z:()=>M});const M=function n(S){return S}},5727:(we,oe,L)=>{L.d(oe,{Z:()=>U});var n=L(3844),M=L(1196);const z=function v(I){return(0,M.Z)(I)&&"[object Arguments]"==(0,n.Z)(I)};var K=Object.prototype,de=K.hasOwnProperty,ae=K.propertyIsEnumerable;const U=z(function(){return arguments}())?z:function(I){return(0,M.Z)(I)&&de.call(I,"callee")&&!ae.call(I,"callee")}},9977:(we,oe,L)=>{L.d(oe,{Z:()=>M});const M=Array.isArray},6247:(we,oe,L)=>{L.d(oe,{Z:()=>v});var n=L(4842),M=L(4018);const v=function S(z){return null!=z&&(0,M.Z)(z.length)&&!(0,n.Z)(z)}},9509:(we,oe,L)=>{L.d(oe,{Z:()=>V});var n=L(4131),M=L(7950),S="object"==typeof exports&&exports&&!exports.nodeType&&exports,v=S&&"object"==typeof module&&module&&!module.nodeType&&module,K=v&&v.exports===S?n.Z.Buffer:void 0;const V=(K?K.isBuffer:void 0)||M.Z},4842:(we,oe,L)=>{L.d(oe,{Z:()=>ae});var n=L(3844),M=L(5829);const ae=function de(V){if(!(0,M.Z)(V))return!1;var U=(0,n.Z)(V);return"[object Function]"==U||"[object GeneratorFunction]"==U||"[object AsyncFunction]"==U||"[object Proxy]"==U}},4018:(we,oe,L)=>{L.d(oe,{Z:()=>S});const S=function M(v){return"number"==typeof v&&v>-1&&v%1==0&&v<=9007199254740991}},5829:(we,oe,L)=>{L.d(oe,{Z:()=>M});const M=function n(S){var v=typeof S;return null!=S&&("object"==v||"function"==v)}},1196:(we,oe,L)=>{L.d(oe,{Z:()=>M});const M=function n(S){return null!=S&&"object"==typeof S}},7106:(we,oe,L)=>{L.d(oe,{Z:()=>z});var n=L(3844),M=L(1196);const z=function v(K){return"symbol"==typeof K||(0,M.Z)(K)&&"[object Symbol]"==(0,n.Z)(K)}},7227:(we,oe,L)=>{L.d(oe,{Z:()=>tt});var n=L(3844),M=L(4018),S=L(1196),Ye={};Ye["[object Float32Array]"]=Ye["[object Float64Array]"]=Ye["[object Int8Array]"]=Ye["[object Int16Array]"]=Ye["[object Int32Array]"]=Ye["[object Uint8Array]"]=Ye["[object Uint8ClampedArray]"]=Ye["[object Uint16Array]"]=Ye["[object Uint32Array]"]=!0,Ye["[object Arguments]"]=Ye["[object Array]"]=Ye["[object ArrayBuffer]"]=Ye["[object Boolean]"]=Ye["[object DataView]"]=Ye["[object Date]"]=Ye["[object Error]"]=Ye["[object Function]"]=Ye["[object Map]"]=Ye["[object Number]"]=Ye["[object Object]"]=Ye["[object RegExp]"]=Ye["[object Set]"]=Ye["[object String]"]=Ye["[object WeakMap]"]=!1;var It=L(8733),re=L(5527),Me=re.Z&&re.Z.isTypedArray;const tt=Me?(0,It.Z)(Me):function en(wt){return(0,S.Z)(wt)&&(0,M.Z)(wt.length)&&!!Ye[(0,n.Z)(wt)]}},2851:(we,oe,L)=>{L.d(oe,{Z:()=>k});var n=L(1668),M=L(5829),S=L(3834);var de=Object.prototype.hasOwnProperty;const V=function ae($){if(!(0,M.Z)($))return function v($){var G=[];if(null!=$)for(var X in Object($))G.push(X);return G}($);var G=(0,S.Z)($),X=[];for(var ie in $)"constructor"==ie&&(G||!de.call($,ie))||X.push(ie);return X};var U=L(6247);const k=function I($){return(0,U.Z)($)?(0,n.Z)($,!0):V($)}},4961:(we,oe,L)=>{L.d(oe,{Z:()=>v});var n=L(8410);function S(z,K){if("function"!=typeof z||null!=K&&"function"!=typeof K)throw new TypeError("Expected a function");var de=function(){var ae=arguments,V=K?K.apply(this,ae):ae[0],U=de.cache;if(U.has(V))return U.get(V);var I=z.apply(this,ae);return de.cache=U.set(V,I)||U,I};return de.cache=new(S.Cache||n.Z),de}S.Cache=n.Z;const v=S},320:(we,oe,L)=>{L.d(oe,{Z:()=>M});const M=function n(){}},9812:(we,oe,L)=>{L.d(oe,{Z:()=>de});var n=L(2447),M=L(9774),S=L(7500),v=L(1966),K=(0,n.Z)(function(ae,V){var U=(0,v.Z)(V,(0,S.Z)(K));return(0,M.Z)(ae,32,void 0,V,U)});K.placeholder={};const de=K},8176:(we,oe,L)=>{L.d(oe,{Z:()=>S});var n=L(5985);const S=function M(v,z,K){return null==v?v:(0,n.Z)(v,z,K)}},7950:(we,oe,L)=>{L.d(oe,{Z:()=>M});const M=function n(){return!1}},5932:(we,oe,L)=>{L.d(oe,{Z:()=>z});var n=L(9585),M=1/0;const z=function v(K){return K?(K=(0,n.Z)(K))===M||K===-M?17976931348623157e292*(K<0?-1:1):K==K?K:0:0===K?K:0}},827:(we,oe,L)=>{L.d(oe,{Z:()=>S});var n=L(5932);const S=function M(v){var z=(0,n.Z)(v),K=z%1;return z==z?K?z-K:z:0}},9585:(we,oe,L)=>{L.d(oe,{Z:()=>U});var n=L(4689),M=L(5829),S=L(7106),z=/^[-+]0x[0-9a-f]+$/i,K=/^0b[01]+$/i,de=/^0o[0-7]+$/i,ae=parseInt;const U=function V(I){if("number"==typeof I)return I;if((0,S.Z)(I))return NaN;if((0,M.Z)(I)){var k="function"==typeof I.valueOf?I.valueOf():I;I=(0,M.Z)(k)?k+"":k}if("string"!=typeof I)return 0===I?I:+I;I=(0,n.Z)(I);var $=K.test(I);return $||de.test(I)?ae(I.slice(2),$?2:8):z.test(I)?NaN:+I}},5902:(we,oe,L)=>{L.d(oe,{Z:()=>S});var n=L(6066);const S=function M(v){return null==v?"":(0,n.Z)(v)}},4142:(we,oe,L)=>{L.d(oe,{Z:()=>U});var n=L(293),M=L(3934),S=L(7856),v=L(9977),z=L(1196),K=L(92),ae=Object.prototype.hasOwnProperty;function V(I){if((0,z.Z)(I)&&!(0,v.Z)(I)&&!(I instanceof n.Z)){if(I instanceof M.Z)return I;if(ae.call(I,"__wrapped__"))return(0,K.Z)(I)}return new M.Z(I)}(V.prototype=S.Z.prototype).constructor=V;const U=V},5861:(we,oe,L)=>{function n(S,v,z,K,de,ae,V){try{var U=S[ae](V),I=U.value}catch(k){return void z(k)}U.done?v(I):Promise.resolve(I).then(K,de)}function M(S){return function(){var v=this,z=arguments;return new Promise(function(K,de){var ae=S.apply(v,z);function V(I){n(ae,K,de,V,U,"next",I)}function U(I){n(ae,K,de,V,U,"throw",I)}V(void 0)})}}L.d(oe,{Z:()=>M})}}]);