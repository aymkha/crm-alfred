(self.webpackChunkshell=self.webpackChunkshell||[]).push([["dist_core_fesm2022_core_mjs-_79190"],{1241:function(Me,re){var n;!function(M){"use strict";var S=Math.cosh||function(T){return Math.abs(T)<1e-9?1-T:.5*(Math.exp(T)+Math.exp(-T))},v=Math.sinh||function(T){return Math.abs(T)<1e-9?T:.5*(Math.exp(T)-Math.exp(-T))},le=function(){throw SyntaxError("Invalid Param")};function se(T,k){var $=Math.abs(T),W=Math.abs(k);return 0===T?Math.log(W):0===k?Math.log($):$<3e3&&W<3e3?.5*Math.log(T*T+k*k):(T/=2,k/=2,.5*Math.log(T*T+k*k)+Math.LN2)}function U(T,k){if(!(this instanceof U))return new U(T,k);var $=function(T,k){var $={re:0,im:0};if(null==T)$.re=$.im=0;else if(void 0!==k)$.re=T,$.im=k;else switch(typeof T){case"object":if("im"in T&&"re"in T)$.re=T.re,$.im=T.im;else if("abs"in T&&"arg"in T){if(!Number.isFinite(T.abs)&&Number.isFinite(T.arg))return U.INFINITY;$.re=T.abs*Math.cos(T.arg),$.im=T.abs*Math.sin(T.arg)}else if("r"in T&&"phi"in T){if(!Number.isFinite(T.r)&&Number.isFinite(T.phi))return U.INFINITY;$.re=T.r*Math.cos(T.phi),$.im=T.r*Math.sin(T.phi)}else 2===T.length?($.re=T[0],$.im=T[1]):le();break;case"string":$.im=$.re=0;var W=T.match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g),X=1,ne=0;null===W&&le();for(var fe=0;fe<W.length;fe++){var F=W[fe];" "===F||"\t"===F||"\n"===F||("+"===F?X++:"-"===F?ne++:"i"===F||"I"===F?(X+ne===0&&le()," "===W[fe+1]||isNaN(W[fe+1])?$.im+=parseFloat((ne%2?"-":"")+"1"):($.im+=parseFloat((ne%2?"-":"")+W[fe+1]),fe++),X=ne=0):((X+ne===0||isNaN(F))&&le(),"i"===W[fe+1]||"I"===W[fe+1]?($.im+=parseFloat((ne%2?"-":"")+F),fe++):$.re+=parseFloat((ne%2?"-":"")+F),X=ne=0))}X+ne>0&&le();break;case"number":$.im=0,$.re=T;break;default:le()}return isNaN($.re)||isNaN($.im),$}(T,k);this.re=$.re,this.im=$.im}U.prototype={re:0,im:0,sign:function(){var T=this.abs();return new U(this.re/T,this.im/T)},add:function(T,k){var $=new U(T,k);return this.isInfinite()&&$.isInfinite()?U.NAN:this.isInfinite()||$.isInfinite()?U.INFINITY:new U(this.re+$.re,this.im+$.im)},sub:function(T,k){var $=new U(T,k);return this.isInfinite()&&$.isInfinite()?U.NAN:this.isInfinite()||$.isInfinite()?U.INFINITY:new U(this.re-$.re,this.im-$.im)},mul:function(T,k){var $=new U(T,k);return this.isInfinite()&&$.isZero()||this.isZero()&&$.isInfinite()?U.NAN:this.isInfinite()||$.isInfinite()?U.INFINITY:0===$.im&&0===this.im?new U(this.re*$.re,0):new U(this.re*$.re-this.im*$.im,this.re*$.im+this.im*$.re)},div:function(T,k){var $=new U(T,k);if(this.isZero()&&$.isZero()||this.isInfinite()&&$.isInfinite())return U.NAN;if(this.isInfinite()||$.isZero())return U.INFINITY;if(this.isZero()||$.isInfinite())return U.ZERO;T=this.re,k=this.im;var ne,fe,W=$.re,X=$.im;return 0===X?new U(T/W,k/W):Math.abs(W)<Math.abs(X)?new U((T*(fe=W/X)+k)/(ne=W*fe+X),(k*fe-T)/ne):new U((T+k*(fe=X/W))/(ne=X*fe+W),(k-T*fe)/ne)},pow:function(T,k){var $=new U(T,k);if(T=this.re,k=this.im,$.isZero())return U.ONE;if(0===$.im){if(0===k&&T>0)return new U(Math.pow(T,$.re),0);if(0===T)switch(($.re%4+4)%4){case 0:return new U(Math.pow(k,$.re),0);case 1:return new U(0,Math.pow(k,$.re));case 2:return new U(-Math.pow(k,$.re),0);case 3:return new U(0,-Math.pow(k,$.re))}}if(0===T&&0===k&&$.re>0&&$.im>=0)return U.ZERO;var W=Math.atan2(k,T),X=se(T,k);return T=Math.exp($.re*X-$.im*W),k=$.im*X+$.re*W,new U(T*Math.cos(k),T*Math.sin(k))},sqrt:function(){var W,X,T=this.re,k=this.im,$=this.abs();if(T>=0){if(0===k)return new U(Math.sqrt(T),0);W=.5*Math.sqrt(2*($+T))}else W=Math.abs(k)/Math.sqrt(2*($-T));return X=T<=0?.5*Math.sqrt(2*($-T)):Math.abs(k)/Math.sqrt(2*($+T)),new U(W,k<0?-X:X)},exp:function(){var T=Math.exp(this.re);return new U(T*Math.cos(this.im),T*Math.sin(this.im))},expm1:function(){var T=this.re,k=this.im;return new U(Math.expm1(T)*Math.cos(k)+function(T){var k=Math.PI/4;if(-k>T||T>k)return Math.cos(T)-1;var $=T*T;return $*($*($*($*($*($*($*($/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-.5)}(k),Math.exp(T)*Math.sin(k))},log:function(){var T=this.re,k=this.im;return new U(se(T,k),Math.atan2(k,T))},abs:function(){return T=this.re,k=this.im,$=Math.abs(T),W=Math.abs(k),$<3e3&&W<3e3?Math.sqrt($*$+W*W):($<W?($=W,W=T/k):W=k/T,$*Math.sqrt(1+W*W));var T,k,$,W},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){var T=this.re,k=this.im;return new U(Math.sin(T)*S(k),Math.cos(T)*v(k))},cos:function(){var T=this.re,k=this.im;return new U(Math.cos(T)*S(k),-Math.sin(T)*v(k))},tan:function(){var T=2*this.re,k=2*this.im,$=Math.cos(T)+S(k);return new U(Math.sin(T)/$,v(k)/$)},cot:function(){var T=2*this.re,k=2*this.im,$=Math.cos(T)-S(k);return new U(-Math.sin(T)/$,v(k)/$)},sec:function(){var T=this.re,k=this.im,$=.5*S(2*k)+.5*Math.cos(2*T);return new U(Math.cos(T)*S(k)/$,Math.sin(T)*v(k)/$)},csc:function(){var T=this.re,k=this.im,$=.5*S(2*k)-.5*Math.cos(2*T);return new U(Math.sin(T)*S(k)/$,-Math.cos(T)*v(k)/$)},asin:function(){var T=this.re,k=this.im,$=new U(k*k-T*T+1,-2*T*k).sqrt(),W=new U($.re-k,$.im+T).log();return new U(W.im,-W.re)},acos:function(){var T=this.re,k=this.im,$=new U(k*k-T*T+1,-2*T*k).sqrt(),W=new U($.re-k,$.im+T).log();return new U(Math.PI/2-W.im,W.re)},atan:function(){var T=this.re,k=this.im;if(0===T){if(1===k)return new U(0,1/0);if(-1===k)return new U(0,-1/0)}var $=T*T+(1-k)*(1-k),W=new U((1-k*k-T*T)/$,-2*T/$).log();return new U(-.5*W.im,.5*W.re)},acot:function(){var T=this.re,k=this.im;if(0===k)return new U(Math.atan2(1,T),0);var $=T*T+k*k;return 0!==$?new U(T/$,-k/$).atan():new U(0!==T?T/0:0,0!==k?-k/0:0).atan()},asec:function(){var T=this.re,k=this.im;if(0===T&&0===k)return new U(0,1/0);var $=T*T+k*k;return 0!==$?new U(T/$,-k/$).acos():new U(0!==T?T/0:0,0!==k?-k/0:0).acos()},acsc:function(){var T=this.re,k=this.im;if(0===T&&0===k)return new U(Math.PI/2,1/0);var $=T*T+k*k;return 0!==$?new U(T/$,-k/$).asin():new U(0!==T?T/0:0,0!==k?-k/0:0).asin()},sinh:function(){var T=this.re,k=this.im;return new U(v(T)*Math.cos(k),S(T)*Math.sin(k))},cosh:function(){var T=this.re,k=this.im;return new U(S(T)*Math.cos(k),v(T)*Math.sin(k))},tanh:function(){var T=2*this.re,k=2*this.im,$=S(T)+Math.cos(k);return new U(v(T)/$,Math.sin(k)/$)},coth:function(){var T=2*this.re,k=2*this.im,$=S(T)-Math.cos(k);return new U(v(T)/$,-Math.sin(k)/$)},csch:function(){var T=this.re,k=this.im,$=Math.cos(2*k)-S(2*T);return new U(-2*v(T)*Math.cos(k)/$,2*S(T)*Math.sin(k)/$)},sech:function(){var T=this.re,k=this.im,$=Math.cos(2*k)+S(2*T);return new U(2*S(T)*Math.cos(k)/$,-2*v(T)*Math.sin(k)/$)},asinh:function(){var T=this.im;this.im=-this.re,this.re=T;var k=this.asin();return this.re=-this.im,this.im=T,T=k.re,k.re=-k.im,k.im=T,k},acosh:function(){var T=this.acos();if(T.im<=0){var k=T.re;T.re=-T.im,T.im=k}else k=T.im,T.im=-T.re,T.re=k;return T},atanh:function(){var T=this.re,k=this.im,$=T>1&&0===k,W=1-T,X=1+T,ne=W*W+k*k,fe=0!==ne?new U((X*W-k*k)/ne,(k*W+X*k)/ne):new U(-1!==T?T/0:0,0!==k?k/0:0),F=fe.re;return fe.re=se(fe.re,fe.im)/2,fe.im=Math.atan2(fe.im,F)/2,$&&(fe.im=-fe.im),fe},acoth:function(){var T=this.re,k=this.im;if(0===T&&0===k)return new U(0,Math.PI/2);var $=T*T+k*k;return 0!==$?new U(T/$,-k/$).atanh():new U(0!==T?T/0:0,0!==k?-k/0:0).atanh()},acsch:function(){var T=this.re,k=this.im;if(0===k)return new U(0!==T?Math.log(T+Math.sqrt(T*T+1)):1/0,0);var $=T*T+k*k;return 0!==$?new U(T/$,-k/$).asinh():new U(0!==T?T/0:0,0!==k?-k/0:0).asinh()},asech:function(){var T=this.re,k=this.im;if(this.isZero())return U.INFINITY;var $=T*T+k*k;return 0!==$?new U(T/$,-k/$).acosh():new U(0!==T?T/0:0,0!==k?-k/0:0).acosh()},inverse:function(){if(this.isZero())return U.INFINITY;if(this.isInfinite())return U.ZERO;var T=this.re,k=this.im,$=T*T+k*k;return new U(T/$,-k/$)},conjugate:function(){return new U(this.re,-this.im)},neg:function(){return new U(-this.re,-this.im)},ceil:function(T){return T=Math.pow(10,T||0),new U(Math.ceil(this.re*T)/T,Math.ceil(this.im*T)/T)},floor:function(T){return T=Math.pow(10,T||0),new U(Math.floor(this.re*T)/T,Math.floor(this.im*T)/T)},round:function(T){return T=Math.pow(10,T||0),new U(Math.round(this.re*T)/T,Math.round(this.im*T)/T)},equals:function(T,k){var $=new U(T,k);return Math.abs($.re-this.re)<=U.EPSILON&&Math.abs($.im-this.im)<=U.EPSILON},clone:function(){return new U(this.re,this.im)},toString:function(){var T=this.re,k=this.im,$="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(T)<U.EPSILON&&(T=0),Math.abs(k)<U.EPSILON&&(k=0),0===k?$+T:(0!==T?($+=T,$+=" ",k<0?(k=-k,$+="-"):$+="+",$+=" "):k<0&&(k=-k,$+="-"),1!==k&&($+=k),$+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return 0===this.im?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return 0===this.im&&0===this.re},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!(this.isNaN()||this.isFinite())}},U.ZERO=new U(0,0),U.ONE=new U(1,0),U.I=new U(0,1),U.PI=new U(Math.PI,0),U.E=new U(Math.E,0),U.INFINITY=new U(1/0,1/0),U.NAN=new U(NaN,NaN),U.EPSILON=1e-15,void 0!==(n=function(){return U}.apply(re,[]))&&(Me.exports=n)}()},8170:Me=>{Me.exports=function re(L,n){"use strict";var W,X,M=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,S=/(^[ ]*|[ ]*$)/g,v=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,z=/^0x[0-9a-f]+$/i,q=/^0/,le=function(F){return re.insensitive&&(""+F).toLowerCase()||""+F},se=le(L).replace(S,"")||"",V=le(n).replace(S,"")||"",U=se.replace(M,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),T=V.replace(M,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),k=parseInt(se.match(z),16)||1!==U.length&&se.match(v)&&Date.parse(se),$=parseInt(V.match(z),16)||k&&V.match(v)&&Date.parse(V)||null;if($){if(k<$)return-1;if(k>$)return 1}for(var ne=0,fe=Math.max(U.length,T.length);ne<fe;ne++){if(W=!(U[ne]||"").match(q)&&parseFloat(U[ne])||U[ne]||0,X=!(T[ne]||"").match(q)&&parseFloat(T[ne])||T[ne]||0,isNaN(W)!==isNaN(X))return isNaN(W)?1:-1;if(typeof W!=typeof X&&(W+="",X+=""),W<X)return-1;if(W>X)return 1}return 0}},7780:function(Me){!function(re){"use strict";var n={s:1,n:0,d:1};function M(W,X){if(isNaN(W=parseInt(W,10)))throw k();return W*X}function S(W,X){if(0===X)throw T();var ne=Object.create(U.prototype);ne.s=W<0?-1:1;var fe=V(W=W<0?-W:W,X);return ne.n=W/fe,ne.d=X/fe,ne}function v(W){for(var X={},ne=W,fe=2,F=4;F<=ne;){for(;ne%fe==0;)ne/=fe,X[fe]=(X[fe]||0)+1;F+=1+2*fe++}return ne!==W?ne>1&&(X[ne]=(X[ne]||0)+1):X[W]=(X[W]||0)+1,X}var z=function(W,X){var Zt,ne=0,fe=1,F=1,Ve=0,de=0,Ze=0,Le=1,at=1,Be=0,Ae=1,Ye=1,st=1,qe=1e7;if(null!=W)if(void 0!==X){if(F=(ne=W)*(fe=X),ne%1!=0||fe%1!=0)throw $()}else switch(typeof W){case"object":if("d"in W&&"n"in W)ne=W.n,fe=W.d,"s"in W&&(ne*=W.s);else{if(!(0 in W))throw k();ne=W[0],1 in W&&(fe=W[1])}F=ne*fe;break;case"number":if(W<0&&(F=W,W=-W),W%1==0)ne=W;else if(W>0){for(W>=1&&(W/=at=Math.pow(10,Math.floor(1+Math.log(W)/Math.LN10)));Ae<=qe&&st<=qe;){if(W===(Zt=(Be+Ye)/(Ae+st))){Ae+st<=qe?(ne=Be+Ye,fe=Ae+st):st>Ae?(ne=Ye,fe=st):(ne=Be,fe=Ae);break}W>Zt?(Be+=Ye,Ae+=st):(Ye+=Be,st+=Ae),Ae>qe?(ne=Ye,fe=st):(ne=Be,fe=Ae)}ne*=at}else(isNaN(W)||isNaN(X))&&(fe=ne=NaN);break;case"string":if(null===(Ae=W.match(/\d+|./g)))throw k();if("-"===Ae[Be]?(F=-1,Be++):"+"===Ae[Be]&&Be++,Ae.length===Be+1?de=M(Ae[Be++],F):"."===Ae[Be+1]||"."===Ae[Be]?("."!==Ae[Be]&&(Ve=M(Ae[Be++],F)),(1+ ++Be===Ae.length||"("===Ae[Be+1]&&")"===Ae[Be+3]||"'"===Ae[Be+1]&&"'"===Ae[Be+3])&&(de=M(Ae[Be],F),Le=Math.pow(10,Ae[Be].length),Be++),("("===Ae[Be]&&")"===Ae[Be+2]||"'"===Ae[Be]&&"'"===Ae[Be+2])&&(Ze=M(Ae[Be+1],F),at=Math.pow(10,Ae[Be+1].length)-1,Be+=3)):"/"===Ae[Be+1]||":"===Ae[Be+1]?(de=M(Ae[Be],F),Le=M(Ae[Be+2],1),Be+=3):"/"===Ae[Be+3]&&" "===Ae[Be+1]&&(Ve=M(Ae[Be],F),de=M(Ae[Be+2],F),Le=M(Ae[Be+4],1),Be+=5),Ae.length<=Be){F=ne=Ze+(fe=Le*at)*Ve+at*de;break}default:throw k()}if(0===fe)throw T();n.s=F<0?-1:1,n.n=Math.abs(ne),n.d=Math.abs(fe)};function V(W,X){if(!W)return X;if(!X)return W;for(;;){if(!(W%=X))return X;if(!(X%=W))return W}}function U(W,X){if(z(W,X),!(this instanceof U))return S(n.s*n.n,n.d);W=V(n.d,n.n),this.s=n.s,this.n=n.n/W,this.d=n.d/W}var T=function(){return new Error("Division by Zero")},k=function(){return new Error("Invalid argument")},$=function(){return new Error("Parameters must be integer")};U.prototype={s:1,n:0,d:1,abs:function(){return S(this.n,this.d)},neg:function(){return S(-this.s*this.n,this.d)},add:function(W,X){return z(W,X),S(this.s*this.n*n.d+n.s*this.d*n.n,this.d*n.d)},sub:function(W,X){return z(W,X),S(this.s*this.n*n.d-n.s*this.d*n.n,this.d*n.d)},mul:function(W,X){return z(W,X),S(this.s*n.s*this.n*n.n,this.d*n.d)},div:function(W,X){return z(W,X),S(this.s*n.s*this.n*n.d,this.d*n.n)},clone:function(){return S(this.s*this.n,this.d)},mod:function(W,X){if(isNaN(this.n)||isNaN(this.d))return new U(NaN);if(void 0===W)return S(this.s*this.n%this.d,1);if(z(W,X),0===n.n&&0===this.d)throw T();return S(this.s*(n.d*this.n)%(n.n*this.d),n.d*this.d)},gcd:function(W,X){return z(W,X),S(V(n.n,this.n)*V(n.d,this.d),n.d*this.d)},lcm:function(W,X){return z(W,X),0===n.n&&0===this.n?S(0,1):S(n.n*this.n,V(n.n,this.n)*V(n.d,this.d))},ceil:function(W){return W=Math.pow(10,W||0),isNaN(this.n)||isNaN(this.d)?new U(NaN):S(Math.ceil(W*this.s*this.n/this.d),W)},floor:function(W){return W=Math.pow(10,W||0),isNaN(this.n)||isNaN(this.d)?new U(NaN):S(Math.floor(W*this.s*this.n/this.d),W)},round:function(W){return W=Math.pow(10,W||0),isNaN(this.n)||isNaN(this.d)?new U(NaN):S(Math.round(W*this.s*this.n/this.d),W)},inverse:function(){return S(this.s*this.d,this.n)},pow:function(W,X){if(z(W,X),1===n.d)return n.s<0?S(Math.pow(this.s*this.d,n.n),Math.pow(this.n,n.n)):S(Math.pow(this.s*this.n,n.n),Math.pow(this.d,n.n));if(this.s<0)return null;var ne=v(this.n),fe=v(this.d),F=1,Ve=1;for(var de in ne)if("1"!==de){if("0"===de){F=0;break}if(ne[de]*=n.n,ne[de]%n.d!=0)return null;ne[de]/=n.d,F*=Math.pow(de,ne[de])}for(var de in fe)if("1"!==de){if(fe[de]*=n.n,fe[de]%n.d!=0)return null;fe[de]/=n.d,Ve*=Math.pow(de,fe[de])}return n.s<0?S(Ve,F):S(F,Ve)},equals:function(W,X){return z(W,X),this.s*this.n*n.d==n.s*n.n*this.d},compare:function(W,X){z(W,X);var ne=this.s*this.n*n.d-n.s*n.n*this.d;return(0<ne)-(ne<0)},simplify:function(W){if(isNaN(this.n)||isNaN(this.d))return this;W=W||.001;for(var X=this.abs(),ne=X.toContinued(),fe=1;fe<ne.length;fe++){for(var F=S(ne[fe-1],1),Ve=fe-2;Ve>=0;Ve--)F=F.inverse().add(ne[Ve]);if(Math.abs(F.sub(X).valueOf())<W)return F.mul(this.s)}return this},divisible:function(W,X){return z(W,X),!(!(n.n*this.d)||this.n*n.d%(n.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(W){var X,ne="",fe=this.n,F=this.d;return this.s<0&&(ne+="-"),1===F?ne+=fe:(W&&(X=Math.floor(fe/F))>0&&(ne+=X,ne+=" ",fe%=F),ne+=fe,ne+="/",ne+=F),ne},toLatex:function(W){var X,ne="",fe=this.n,F=this.d;return this.s<0&&(ne+="-"),1===F?ne+=fe:(W&&(X=Math.floor(fe/F))>0&&(ne+=X,fe%=F),ne+="\\frac{",ne+=fe,ne+="}{",ne+=F,ne+="}"),ne},toContinued:function(){var W,X=this.n,ne=this.d,fe=[];if(isNaN(X)||isNaN(ne))return fe;do{fe.push(Math.floor(X/ne)),W=X%ne,X=ne,ne=W}while(1!==X);return fe},toString:function(W){var X=this.n,ne=this.d;if(isNaN(X)||isNaN(ne))return"NaN";W=W||15;var fe=function le(W,X){for(;X%2==0;X/=2);for(;X%5==0;X/=5);if(1===X)return 0;for(var ne=10%X,fe=1;1!==ne;fe++)if(ne=10*ne%X,fe>2e3)return 0;return fe}(0,ne),F=function se(W,X,ne){for(var fe=1,F=function q(W,X,ne){for(var fe=1;X>0;W=W*W%ne,X>>=1)1&X&&(fe=fe*W%ne);return fe}(10,ne,X),Ve=0;Ve<300;Ve++){if(fe===F)return Ve;fe=10*fe%X,F=10*F%X}return 0}(0,ne,fe),Ve=this.s<0?"-":"";if(Ve+=X/ne|0,X%=ne,(X*=10)&&(Ve+="."),fe){for(var de=F;de--;)Ve+=X/ne|0,X%=ne,X*=10;for(Ve+="(",de=fe;de--;)Ve+=X/ne|0,X%=ne,X*=10;Ve+=")"}else for(de=W;X&&de--;)Ve+=X/ne|0,X%=ne,X*=10;return Ve}},Object.defineProperty(U,"__esModule",{value:!0}),U.default=U,U.Fraction=U,Me.exports=U}()},9128:(Me,re,L)=>{var n=L(9864),M=L(3919),S=L(3263),v=L(5353),z=L(3358),q=L(3789),le=L(2508);le.alea=n,le.xor128=M,le.xorwow=S,le.xorshift7=v,le.xor4096=z,le.tychei=q,Me.exports=le},9864:function(Me,re,L){var n;!function(M,S,v){function z(V){var U=this,T=function se(){var V=4022871197;return function(T){T=String(T);for(var k=0;k<T.length;k++){var $=.02519603282416938*(V+=T.charCodeAt(k));$-=V=$>>>0,V=($*=V)>>>0,V+=4294967296*($-=V)}return 2.3283064365386963e-10*(V>>>0)}}();U.next=function(){var k=2091639*U.s0+2.3283064365386963e-10*U.c;return U.s0=U.s1,U.s1=U.s2,U.s2=k-(U.c=0|k)},U.c=1,U.s0=T(" "),U.s1=T(" "),U.s2=T(" "),U.s0-=T(V),U.s0<0&&(U.s0+=1),U.s1-=T(V),U.s1<0&&(U.s1+=1),U.s2-=T(V),U.s2<0&&(U.s2+=1),T=null}function q(V,U){return U.c=V.c,U.s0=V.s0,U.s1=V.s1,U.s2=V.s2,U}function le(V,U){var T=new z(V),k=U&&U.state,$=T.next;return $.int32=function(){return 4294967296*T.next()|0},$.double=function(){return $()+11102230246251565e-32*(2097152*$()|0)},$.quick=$,k&&("object"==typeof k&&q(k,T),$.state=function(){return q(T,{})}),$}S&&S.exports?S.exports=le:L.amdD&&L.amdO?void 0!==(n=function(){return le}.call(re,L,re,S))&&(S.exports=n):this.alea=le}(0,Me=L.nmd(Me))},3789:function(Me,re,L){var n;!function(M,S,v){function z(se){var V=this,U="";V.next=function(){var k=V.b,$=V.c,W=V.d,X=V.a;return k=k<<25^k>>>7^$,$=$-W|0,W=W<<24^W>>>8^X,X=X-k|0,V.b=k=k<<20^k>>>12^$,V.c=$=$-W|0,V.d=W<<16^$>>>16^X,V.a=X-k|0},V.a=0,V.b=0,V.c=-1640531527,V.d=1367130551,se===Math.floor(se)?(V.a=se/4294967296|0,V.b=0|se):U+=se;for(var T=0;T<U.length+20;T++)V.b^=0|U.charCodeAt(T),V.next()}function q(se,V){return V.a=se.a,V.b=se.b,V.c=se.c,V.d=se.d,V}function le(se,V){var U=new z(se),T=V&&V.state,k=function(){return(U.next()>>>0)/4294967296};return k.double=function(){do{var X=((U.next()>>>11)+(U.next()>>>0)/4294967296)/(1<<21)}while(0===X);return X},k.int32=U.next,k.quick=k,T&&("object"==typeof T&&q(T,U),k.state=function(){return q(U,{})}),k}S&&S.exports?S.exports=le:L.amdD&&L.amdO?void 0!==(n=function(){return le}.call(re,L,re,S))&&(S.exports=n):this.tychei=le}(0,Me=L.nmd(Me))},3919:function(Me,re,L){var n;!function(M,S,v){function z(se){var V=this,U="";V.x=0,V.y=0,V.z=0,V.w=0,V.next=function(){var k=V.x^V.x<<11;return V.x=V.y,V.y=V.z,V.z=V.w,V.w^=V.w>>>19^k^k>>>8},se===(0|se)?V.x=se:U+=se;for(var T=0;T<U.length+64;T++)V.x^=0|U.charCodeAt(T),V.next()}function q(se,V){return V.x=se.x,V.y=se.y,V.z=se.z,V.w=se.w,V}function le(se,V){var U=new z(se),T=V&&V.state,k=function(){return(U.next()>>>0)/4294967296};return k.double=function(){do{var X=((U.next()>>>11)+(U.next()>>>0)/4294967296)/(1<<21)}while(0===X);return X},k.int32=U.next,k.quick=k,T&&("object"==typeof T&&q(T,U),k.state=function(){return q(U,{})}),k}S&&S.exports?S.exports=le:L.amdD&&L.amdO?void 0!==(n=function(){return le}.call(re,L,re,S))&&(S.exports=n):this.xor128=le}(0,Me=L.nmd(Me))},3358:function(Me,re,L){var n;!function(M,S,v){function z(se){var V=this;V.next=function(){var W,X,T=V.w,k=V.X,$=V.i;return V.w=T=T+1640531527|0,X=k[$+34&127],W=k[$=$+1&127],X^=X<<13,W^=W<<17,X=k[$]=(X^=X>>>15)^(W^=W>>>12),V.i=$,X+(T^T>>>16)|0},function U(T,k){var $,W,X,ne,fe,F=[],Ve=128;for(k===(0|k)?(W=k,k=null):(k+="\0",W=0,Ve=Math.max(Ve,k.length)),X=0,ne=-32;ne<Ve;++ne)k&&(W^=k.charCodeAt((ne+32)%k.length)),0===ne&&(fe=W),W^=W<<10,W^=W>>>15,W^=W<<4,W^=W>>>13,ne>=0&&(X=0==($=F[127&ne]^=W+(fe=fe+1640531527|0))?X+1:0);for(X>=128&&(F[127&(k&&k.length||0)]=-1),X=127,ne=512;ne>0;--ne)W=F[X+34&127],$=F[X=X+1&127],W^=W<<13,$^=$<<17,F[X]=(W^=W>>>15)^($^=$>>>12);T.w=fe,T.X=F,T.i=X}(V,se)}function q(se,V){return V.i=se.i,V.w=se.w,V.X=se.X.slice(),V}function le(se,V){null==se&&(se=+new Date);var U=new z(se),T=V&&V.state,k=function(){return(U.next()>>>0)/4294967296};return k.double=function(){do{var X=((U.next()>>>11)+(U.next()>>>0)/4294967296)/(1<<21)}while(0===X);return X},k.int32=U.next,k.quick=k,T&&(T.X&&q(T,U),k.state=function(){return q(U,{})}),k}S&&S.exports?S.exports=le:L.amdD&&L.amdO?void 0!==(n=function(){return le}.call(re,L,re,S))&&(S.exports=n):this.xor4096=le}(0,Me=L.nmd(Me))},5353:function(Me,re,L){var n;!function(M,S,v){function z(se){var V=this;V.next=function(){var $,W,T=V.x,k=V.i;return $=T[k],W=($^=$>>>7)^$<<24,W^=($=T[k+1&7])^$>>>10,W^=($=T[k+3&7])^$>>>3,W^=($=T[k+4&7])^$<<7,$=T[k+7&7],T[k]=W^=($^=$<<13)^$<<9,V.i=k+1&7,W},function U(T,k){var $,X=[];if(k===(0|k))X[0]=k;else for(k=""+k,$=0;$<k.length;++$)X[7&$]=X[7&$]<<15^k.charCodeAt($)+X[$+1&7]<<13;for(;X.length<8;)X.push(0);for($=0;$<8&&0===X[$];++$);for(8==$&&(X[7]=-1),T.x=X,T.i=0,$=256;$>0;--$)T.next()}(V,se)}function q(se,V){return V.x=se.x.slice(),V.i=se.i,V}function le(se,V){null==se&&(se=+new Date);var U=new z(se),T=V&&V.state,k=function(){return(U.next()>>>0)/4294967296};return k.double=function(){do{var X=((U.next()>>>11)+(U.next()>>>0)/4294967296)/(1<<21)}while(0===X);return X},k.int32=U.next,k.quick=k,T&&(T.x&&q(T,U),k.state=function(){return q(U,{})}),k}S&&S.exports?S.exports=le:L.amdD&&L.amdO?void 0!==(n=function(){return le}.call(re,L,re,S))&&(S.exports=n):this.xorshift7=le}(0,Me=L.nmd(Me))},3263:function(Me,re,L){var n;!function(M,S,v){function z(se){var V=this,U="";V.next=function(){var k=V.x^V.x>>>2;return V.x=V.y,V.y=V.z,V.z=V.w,V.w=V.v,(V.d=V.d+362437|0)+(V.v=V.v^V.v<<4^k^k<<1)|0},V.x=0,V.y=0,V.z=0,V.w=0,V.v=0,se===(0|se)?V.x=se:U+=se;for(var T=0;T<U.length+64;T++)V.x^=0|U.charCodeAt(T),T==U.length&&(V.d=V.x<<10^V.x>>>4),V.next()}function q(se,V){return V.x=se.x,V.y=se.y,V.z=se.z,V.w=se.w,V.v=se.v,V.d=se.d,V}function le(se,V){var U=new z(se),T=V&&V.state,k=function(){return(U.next()>>>0)/4294967296};return k.double=function(){do{var X=((U.next()>>>11)+(U.next()>>>0)/4294967296)/(1<<21)}while(0===X);return X},k.int32=U.next,k.quick=k,T&&("object"==typeof T&&q(T,U),k.state=function(){return q(U,{})}),k}S&&S.exports?S.exports=le:L.amdD&&L.amdO?void 0!==(n=function(){return le}.call(re,L,re,S))&&(S.exports=n):this.xorwow=le}(0,Me=L.nmd(Me))},2508:function(Me,re,L){var n;!function(M,S,v){var $,z=256,V=v.pow(z,6),U=v.pow(2,52),T=2*U,k=z-1;function W(Ze,Le,at){var Be=[],Ae=F(fe((Le=1==Le?{entropy:!0}:Le||{}).entropy?[Ze,de(S)]:Ze??function Ve(){try{var Ze;return $&&(Ze=$.randomBytes)?Ze=Ze(z):(Ze=new Uint8Array(z),(M.crypto||M.msCrypto).getRandomValues(Ze)),de(Ze)}catch{var Le=M.navigator,at=Le&&Le.plugins;return[+new Date,M,at,M.screen,de(S)]}}(),3),Be),Ye=new X(Be),st=function(){for(var qe=Ye.g(6),Zt=V,Ke=0;qe<U;)qe=(qe+Ke)*z,Zt*=z,Ke=Ye.g(1);for(;qe>=T;)qe/=2,Zt/=2,Ke>>>=1;return(qe+Ke)/Zt};return st.int32=function(){return 0|Ye.g(4)},st.quick=function(){return Ye.g(4)/4294967296},st.double=st,F(de(Ye.S),S),(Le.pass||at||function(qe,Zt,Ke,Et){return Et&&(Et.S&&ne(Et,Ye),qe.state=function(){return ne(Ye,{})}),Ke?(v.random=qe,Zt):qe})(st,Ae,"global"in Le?Le.global:this==v,Le.state)}function X(Ze){var Le,at=Ze.length,Be=this,Ae=0,Ye=Be.i=Be.j=0,st=Be.S=[];for(at||(Ze=[at++]);Ae<z;)st[Ae]=Ae++;for(Ae=0;Ae<z;Ae++)st[Ae]=st[Ye=k&Ye+Ze[Ae%at]+(Le=st[Ae])],st[Ye]=Le;(Be.g=function(qe){for(var Zt,Ke=0,Et=Be.i,ie=Be.j,ye=Be.S;qe--;)Zt=ye[Et=k&Et+1],Ke=Ke*z+ye[k&(ye[Et]=ye[ie=k&ie+Zt])+(ye[ie]=Zt)];return Be.i=Et,Be.j=ie,Ke})(z)}function ne(Ze,Le){return Le.i=Ze.i,Le.j=Ze.j,Le.S=Ze.S.slice(),Le}function fe(Ze,Le){var Ae,at=[],Be=typeof Ze;if(Le&&"object"==Be)for(Ae in Ze)try{at.push(fe(Ze[Ae],Le-1))}catch{}return at.length?at:"string"==Be?Ze:Ze+"\0"}function F(Ze,Le){for(var Be,at=Ze+"",Ae=0;Ae<at.length;)Le[k&Ae]=k&(Be^=19*Le[k&Ae])+at.charCodeAt(Ae++);return de(Le)}function de(Ze){return String.fromCharCode.apply(0,Ze)}if(F(v.random(),S),Me.exports){Me.exports=W;try{$=L(5042)}catch{}}else void 0!==(n=function(){return W}.call(re,L,re,Me))&&(Me.exports=n)}(typeof self<"u"?self:this,[],Math)},5042:()=>{},9634:function(Me){Me.exports=function(){"use strict";function re(){return!0}function L(){return!1}function n(){}const M="Argument is not a typed-function.";return function S(){function z(ee){return"object"==typeof ee&&null!==ee&&ee.constructor===Object}const q=[{name:"number",test:function(ee){return"number"==typeof ee}},{name:"string",test:function(ee){return"string"==typeof ee}},{name:"boolean",test:function(ee){return"boolean"==typeof ee}},{name:"Function",test:function(ee){return"function"==typeof ee}},{name:"Array",test:Array.isArray},{name:"Date",test:function(ee){return ee instanceof Date}},{name:"RegExp",test:function(ee){return ee instanceof RegExp}},{name:"Object",test:z},{name:"null",test:function(ee){return null===ee}},{name:"undefined",test:function(ee){return void 0===ee}}],le={name:"any",test:re,isAny:!0};let se,V,U=0,T={createCount:0};function k(ee){const ge=se.get(ee);if(ge)return ge;let be='Unknown type "'+ee+'"';const Ie=ee.toLowerCase();let Re;for(Re of V)if(Re.toLowerCase()===Ie){be+='. Did you mean "'+Re+'" ?';break}throw new TypeError(be)}function $(ee){let ge=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"any";const be=ge?k(ge).index:V.length,Ie=[];for(let Te=0;Te<ee.length;++Te){if(!ee[Te]||"string"!=typeof ee[Te].name||"function"!=typeof ee[Te].test)throw new TypeError("Object with properties {name: string, test: function} expected");const Qe=ee[Te].name;if(se.has(Qe))throw new TypeError('Duplicate type name "'+Qe+'"');Ie.push(Qe),se.set(Qe,{name:Qe,test:ee[Te].test,isAny:ee[Te].isAny,index:be+Te,conversionsTo:[]})}const Re=V.slice(be);V=V.slice(0,be).concat(Ie).concat(Re);for(let Te=be+Ie.length;Te<V.length;++Te)se.get(V[Te]).index=Te}function W(){se=new Map,V=[],U=0,$([le],!1)}function ne(ee){const ge=V.filter(be=>{const Ie=se.get(be);return!Ie.isAny&&Ie.test(ee)});return ge.length?ge:["any"]}function fe(ee){return ee&&"function"==typeof ee&&"_typedFunctionData"in ee}function F(ee,ge,be){if(!fe(ee))throw new TypeError(M);const Ie=be&&be.exact,Te=Ae(Array.isArray(ge)?ge.join(","):ge),Qe=Ze(Te);if(!Ie||Qe in ee.signatures){const tn=ee._typedFunctionData.signatureMap.get(Qe);if(tn)return tn}const Ue=Te.length;let Xe,$e;if(Ie){let tn;for(tn in Xe=[],ee.signatures)Xe.push(ee._typedFunctionData.signatureMap.get(tn))}else Xe=ee._typedFunctionData.signatures;for(let tn=0;tn<Ue;++tn){const ln=Te[tn],In=[];let Zn;for(Zn of Xe){const Gn=Zt(Zn.params,tn);if(Gn&&(!ln.restParam||Gn.restParam)){if(!Gn.hasAny){const gi=Be(Gn);if(ln.types.some(hi=>!gi.has(hi.name)))continue}In.push(Zn)}}if(Xe=In,0===Xe.length)break}for($e of Xe)if($e.params.length<=Ue)return $e;throw new TypeError("Signature not found (signature: "+(ee.name||"unnamed")+"("+Ze(Te,", ")+"))")}function Ze(ee){let ge=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",";return ee.map(be=>be.name).join(ge)}function Le(ee){const ge=0===ee.indexOf("..."),Ie=(ge?ee.length>3?ee.slice(3):"any":ee).split("|").map(Ue=>k(Ue.trim()));let Re=!1,Te=ge?"...":"";return{types:Ie.map(function(Ue){return Re=Ue.isAny||Re,Te+=Ue.name+"|",{name:Ue.name,typeIndex:Ue.index,test:Ue.test,isAny:Ue.isAny,conversion:null,conversionIndex:-1}}),name:Te.slice(0,-1),hasAny:Re,hasConversion:!1,restParam:ge}}function at(ee){const be=function kt(ee){if(0===ee.length)return[];const ge=ee.map(k);ee.length>1&&ge.sort((Re,Te)=>Re.index-Te.index);let be=ge[0].conversionsTo;if(1===ee.length)return be;be=be.concat([]);const Ie=new Set(ee);for(let Re=1;Re<ge.length;++Re){let Te;for(Te of ge[Re].conversionsTo)Ie.has(Te.from)||(be.push(Te),Ie.add(Te.from))}return be}(ee.types.map(Qe=>Qe.name));let Ie=ee.hasAny,Re=ee.name;const Te=be.map(function(Qe){const Ue=k(Qe.from);return Ie=Ue.isAny||Ie,Re+="|"+Qe.from,{name:Qe.from,typeIndex:Ue.index,test:Ue.test,isAny:Ue.isAny,conversion:Qe,conversionIndex:Qe.index}});return{types:ee.types.concat(Te),name:Re,hasAny:Ie,hasConversion:Te.length>0,restParam:ee.restParam}}function Be(ee){return ee.typeSet||(ee.typeSet=new Set,ee.types.forEach(ge=>ee.typeSet.add(ge.name))),ee.typeSet}function Ae(ee){const ge=[];if("string"!=typeof ee)throw new TypeError("Signatures must be strings");const be=ee.trim();if(""===be)return ge;const Ie=be.split(",");for(let Re=0;Re<Ie.length;++Re){const Te=Le(Ie[Re].trim());if(Te.restParam&&Re!==Ie.length-1)throw new SyntaxError('Unexpected rest parameter "'+Ie[Re]+'": only allowed for the last parameter');if(0===Te.types.length)return null;ge.push(Te)}return ge}function Ye(ee){const ge=Lt(ee);return!!ge&&ge.restParam}function st(ee){if(!ee||0===ee.types.length)return re;if(1===ee.types.length)return k(ee.types[0].name).test;if(2===ee.types.length){const ge=k(ee.types[0].name).test,be=k(ee.types[1].name).test;return function(Re){return ge(Re)||be(Re)}}{const ge=ee.types.map(function(be){return k(be.name).test});return function(Ie){for(let Re=0;Re<ge.length;Re++)if(ge[Re](Ie))return!0;return!1}}}function qe(ee){let ge,be,Ie;if(Ye(ee)){ge=bn(ee).map(st);const Re=ge.length,Te=st(Lt(ee)),Qe=function(Ue){for(let Xe=Re;Xe<Ue.length;Xe++)if(!Te(Ue[Xe]))return!1;return!0};return function(Xe){for(let $e=0;$e<ge.length;$e++)if(!ge[$e](Xe[$e]))return!1;return Qe(Xe)&&Xe.length>=Re+1}}return 0===ee.length?function(Te){return 0===Te.length}:1===ee.length?(be=st(ee[0]),function(Te){return be(Te[0])&&1===Te.length}):2===ee.length?(be=st(ee[0]),Ie=st(ee[1]),function(Te){return be(Te[0])&&Ie(Te[1])&&2===Te.length}):(ge=ee.map(st),function(Te){for(let Qe=0;Qe<ge.length;Qe++)if(!ge[Qe](Te[Qe]))return!1;return Te.length===ge.length})}function Zt(ee,ge){return ge<ee.length?ee[ge]:Ye(ee)?Lt(ee):null}function Ke(ee,ge){const be=Zt(ee,ge);return be?Be(be):new Set}function Et(ee){return null==ee.conversion}function ie(ee,ge){const be=new Set;return ee.forEach(Ie=>{const Re=Ke(Ie.params,ge);let Te;for(Te of Re)be.add(Te)}),be.has("any")?["any"]:Array.from(be)}function ye(ee,ge,be){let Ie,Re;const Te=ee||"unnamed";let Ue,Qe=be;for(Ue=0;Ue<ge.length;Ue++){const ln=[];if(Qe.forEach(In=>{const Gn=st(Zt(In.params,Ue));(Ue<In.params.length||Ye(In.params))&&Gn(ge[Ue])&&ln.push(In)}),0===ln.length){if(Re=ie(Qe,Ue),Re.length>0){const In=ne(ge[Ue]);return Ie=new TypeError("Unexpected type of argument in function "+Te+" (expected: "+Re.join(" or ")+", actual: "+In.join(" | ")+", index: "+Ue+")"),Ie.data={category:"wrongType",fn:Te,index:Ue,actual:In,expected:Re},Ie}}else Qe=ln}const Xe=Qe.map(function(ln){return Ye(ln.params)?1/0:ln.params.length});if(ge.length<Math.min.apply(null,Xe))return Re=ie(Qe,Ue),Ie=new TypeError("Too few arguments in function "+Te+" (expected: "+Re.join(" or ")+", index: "+ge.length+")"),Ie.data={category:"tooFewArgs",fn:Te,index:ge.length,expected:Re},Ie;const $e=Math.max.apply(null,Xe);if(ge.length>$e)return Ie=new TypeError("Too many arguments in function "+Te+" (expected: "+$e+", actual: "+ge.length+")"),Ie.data={category:"tooManyArgs",fn:Te,index:ge.length,expectedLength:$e},Ie;const tn=[];for(let ln=0;ln<ge.length;++ln)tn.push(ne(ge[ln]).join("|"));return Ie=new TypeError('Arguments of type "'+tn.join(", ")+'" do not match any of the defined signatures of function '+Te+"."),Ie.data={category:"mismatch",actual:tn},Ie}function ze(ee){let ge=V.length+1;for(let be=0;be<ee.types.length;be++)Et(ee.types[be])&&(ge=Math.min(ge,ee.types[be].typeIndex));return ge}function Je(ee){let ge=U+1;for(let be=0;be<ee.types.length;be++)Et(ee.types[be])||(ge=Math.min(ge,ee.types[be].conversionIndex));return ge}function Mt(ee,ge){if(ee.hasAny){if(!ge.hasAny)return 1}else if(ge.hasAny)return-1;if(ee.restParam){if(!ge.restParam)return 1}else if(ge.restParam)return-1;if(ee.hasConversion){if(!ge.hasConversion)return 1}else if(ge.hasConversion)return-1;const be=ze(ee)-ze(ge);if(be<0)return-1;if(be>0)return 1;const Ie=Je(ee)-Je(ge);return Ie<0?-1:Ie>0?1:0}function Bt(ee,ge){const be=ee.params,Ie=ge.params,Re=Lt(be),Te=Lt(Ie),Qe=Ye(be),Ue=Ye(Ie);if(Qe&&Re.hasAny){if(!Ue||!Te.hasAny)return 1}else if(Ue&&Te.hasAny)return-1;let tn,Xe=0,$e=0;for(tn of be)tn.hasAny&&++Xe,tn.hasConversion&&++$e;let ln=0,In=0;for(tn of Ie)tn.hasAny&&++ln,tn.hasConversion&&++In;if(Xe!==ln)return Xe-ln;if(Qe&&Re.hasConversion){if(!Ue||!Te.hasConversion)return 1}else if(Ue&&Te.hasConversion)return-1;if($e!==In)return $e-In;if(Qe){if(!Ue)return 1}else if(Ue)return-1;const Zn=(be.length-Ie.length)*(Qe?-1:1);if(0!==Zn)return Zn;const Gn=[];let hi,gi=0;for(let zr=0;zr<be.length;++zr){const ga=Mt(be[zr],Ie[zr]);Gn.push(ga),gi+=ga}if(0!==gi)return gi;for(hi of Gn)if(0!==hi)return hi;return 0}function It(ee,ge){let be=ge;if(ee.some(Re=>Re.hasConversion)){const Re=Ye(ee),Te=ee.map(lt);be=function(){const Ue=[],Xe=Re?arguments.length-1:arguments.length;for(let $e=0;$e<Xe;$e++)Ue[$e]=Te[$e](arguments[$e]);return Re&&(Ue[Xe]=arguments[Xe].map(Te[Xe])),ge.apply(this,Ue)}}let Ie=be;if(Ye(ee)){const Re=ee.length-1;Ie=function(){return be.apply(this,Cn(arguments,0,Re).concat([Cn(arguments,Re)]))}}return Ie}function lt(ee){let ge,be,Ie,Re;const Te=[],Qe=[];switch(ee.types.forEach(function(Ue){Ue.conversion&&(Te.push(k(Ue.conversion.from).test),Qe.push(Ue.conversion.convert))}),Qe.length){case 0:return function(Xe){return Xe};case 1:return ge=Te[0],Ie=Qe[0],function(Xe){return ge(Xe)?Ie(Xe):Xe};case 2:return ge=Te[0],be=Te[1],Ie=Qe[0],Re=Qe[1],function(Xe){return ge(Xe)?Ie(Xe):be(Xe)?Re(Xe):Xe};default:return function(Xe){for(let $e=0;$e<Qe.length;$e++)if(Te[$e](Xe))return Qe[$e](Xe);return Xe}}}function vt(ee){return function ge(be,Ie,Re){if(Ie<be.length){const Te=be[Ie];let Qe=[];if(Te.restParam){const Ue=Te.types.filter(Et);Ue.length<Te.types.length&&Qe.push({types:Ue,name:"..."+Ue.map(Xe=>Xe.name).join("|"),hasAny:Ue.some(Xe=>Xe.isAny),hasConversion:!1,restParam:!0}),Qe.push(Te)}else Qe=Te.types.map(function(Ue){return{types:[Ue],name:Ue.name,hasAny:Ue.isAny,hasConversion:Ue.conversion,restParam:!1}});return function qi(ee,ge){return Array.prototype.concat.apply([],ee.map(ge))}(Qe,function(Ue){return ge(be,Ie+1,Re.concat([Ue]))})}return[Re]}(ee,0,[])}function hn(ee,ge){const be=Math.max(ee.length,ge.length);for(let Ue=0;Ue<be;Ue++){const Xe=Ke(ee,Ue),$e=Ke(ge,Ue);let ln,tn=!1;for(ln of $e)if(Xe.has(ln)){tn=!0;break}if(!tn)return!1}const Ie=ee.length,Re=ge.length,Te=Ye(ee),Qe=Ye(ge);return Te?Qe?Ie===Re:Re>=Ie:Qe?Ie>=Re:Ie===Re}function xt(ee,ge,be){const Ie=[];let Re;for(Re of ee){let Te=be[Re];if("number"!=typeof Te)throw new TypeError('No definition for referenced signature "'+Re+'"');if(Te=ge[Te],"function"!=typeof Te)return!1;Ie.push(Te)}return Ie}function xn(ee,ge,be){const Ie=function ht(ee){return ee.map(ge=>fo(ge)?Wn(ge.referToSelf.callback):Qi(ge)?Ji(ge.referTo.references,ge.referTo.callback):ge)}(ee),Re=new Array(Ie.length).fill(!1);let Te=!0;for(;Te;){Te=!1;let Qe=!0;for(let Ue=0;Ue<Ie.length;++Ue){if(Re[Ue])continue;const Xe=Ie[Ue];if(fo(Xe))Ie[Ue]=Xe.referToSelf.callback(be),Ie[Ue].referToSelf=Xe.referToSelf,Re[Ue]=!0,Qe=!1;else if(Qi(Xe)){const $e=xt(Xe.referTo.references,Ie,ge);$e?(Ie[Ue]=Xe.referTo.callback.apply(this,$e),Ie[Ue].referTo=Xe.referTo,Re[Ue]=!0,Qe=!1):Te=!0}}if(Qe&&Te)throw new SyntaxError("Circular reference detected in resolving typed.referTo")}return Ie}function on(ee,ge){if(T.createCount++,0===Object.keys(ge).length)throw new SyntaxError("No signatures provided");T.warnAgainstDeprecatedThis&&function rn(ee){const ge=/\bthis(\(|\.signatures\b)/;Object.keys(ee).forEach(be=>{if(ge.test(ee[be].toString()))throw new SyntaxError("Using `this` to self-reference a function is deprecated since typed-function@3. Use typed.referTo and typed.referToSelf instead.")})}(ge);const be=[],Ie=[],Re={},Te=[];let Qe;for(Qe in ge){if(!Object.prototype.hasOwnProperty.call(ge,Qe))continue;const Yt=Ae(Qe);if(!Yt)continue;be.forEach(function(go){if(hn(go,Yt))throw new TypeError('Conflicting signatures "'+Ze(go)+'" and "'+Ze(Yt)+'".')}),be.push(Yt);const qn=Ie.length;Ie.push(ge[Qe]);const cp=Yt.map(at);let mo;for(mo of vt(cp)){const go=Ze(mo);Te.push({params:mo,name:go,fn:qn}),mo.every(lp=>!lp.hasConversion)&&(Re[go]=qn)}}Te.sort(Bt);const Ue=xn(Ie,Re,po);let Xe;for(Xe in Re)Object.prototype.hasOwnProperty.call(Re,Xe)&&(Re[Xe]=Ue[Re[Xe]]);const $e=[],tn=new Map;for(Xe of Te)tn.has(Xe.name)||(Xe.fn=Ue[Xe.fn],$e.push(Xe),tn.set(Xe.name,Xe));const ln=$e[0]&&$e[0].params.length<=2&&!Ye($e[0].params),In=$e[1]&&$e[1].params.length<=2&&!Ye($e[1].params),Zn=$e[2]&&$e[2].params.length<=2&&!Ye($e[2].params),Gn=$e[3]&&$e[3].params.length<=2&&!Ye($e[3].params),gi=$e[4]&&$e[4].params.length<=2&&!Ye($e[4].params),hi=$e[5]&&$e[5].params.length<=2&&!Ye($e[5].params),zr=ln&&In&&Zn&&Gn&&gi&&hi;for(let Yt=0;Yt<$e.length;++Yt)$e[Yt].test=qe($e[Yt].params);const ga=ln?st($e[0].params[0]):L,Bf=In?st($e[1].params[0]):L,Of=Zn?st($e[2].params[0]):L,Rf=Gn?st($e[3].params[0]):L,jf=gi?st($e[4].params[0]):L,kf=hi?st($e[5].params[0]):L,Pf=ln?st($e[0].params[1]):L,$f=In?st($e[1].params[1]):L,Uf=Zn?st($e[2].params[1]):L,Vf=Gn?st($e[3].params[1]):L,zf=gi?st($e[4].params[1]):L,Wf=hi?st($e[5].params[1]):L;for(let Yt=0;Yt<$e.length;++Yt)$e[Yt].implementation=It($e[Yt].params,$e[Yt].fn);const Gf=ln?$e[0].implementation:n,Kf=In?$e[1].implementation:n,Hf=Zn?$e[2].implementation:n,Zf=Gn?$e[3].implementation:n,qf=gi?$e[4].implementation:n,Jf=hi?$e[5].implementation:n,Qf=ln?$e[0].params.length:-1,Xf=In?$e[1].params.length:-1,Yf=Zn?$e[2].params.length:-1,ep=Gn?$e[3].params.length:-1,tp=gi?$e[4].params.length:-1,np=hi?$e[5].params.length:-1,ip=zr?6:0,rp=$e.length,op=$e.map(Yt=>Yt.test),ap=$e.map(Yt=>Yt.implementation),sp=function(){for(let qn=ip;qn<rp;qn++)if(op[qn](arguments))return ap[qn].apply(this,arguments);return T.onMismatch(ee,arguments,$e)};function po(Yt,qn){return arguments.length===Qf&&ga(Yt)&&Pf(qn)?Gf.apply(this,arguments):arguments.length===Xf&&Bf(Yt)&&$f(qn)?Kf.apply(this,arguments):arguments.length===Yf&&Of(Yt)&&Uf(qn)?Hf.apply(this,arguments):arguments.length===ep&&Rf(Yt)&&Vf(qn)?Zf.apply(this,arguments):arguments.length===tp&&jf(Yt)&&zf(qn)?qf.apply(this,arguments):arguments.length===np&&kf(Yt)&&Wf(qn)?Jf.apply(this,arguments):sp.apply(this,arguments)}try{Object.defineProperty(po,"name",{value:ee})}catch{}return po.signatures=Re,po._typedFunctionData={signatures:$e,signatureMap:tn},po}function Bn(ee,ge,be){throw ye(ee,ge,be)}function bn(ee){return Cn(ee,0,ee.length-1)}function Lt(ee){return ee[ee.length-1]}function Cn(ee,ge,be){return Array.prototype.slice.call(ee,ge,be)}function Ji(ee,ge){return{referTo:{references:ee,callback:ge}}}function Wn(ee){if("function"!=typeof ee)throw new TypeError("Callback function expected as first argument");return{referToSelf:{callback:ee}}}function Qi(ee){return ee&&"object"==typeof ee.referTo&&Array.isArray(ee.referTo.references)&&"function"==typeof ee.referTo.callback}function fo(ee){return ee&&"object"==typeof ee.referToSelf&&"function"==typeof ee.referToSelf.callback}function Jc(ee,ge){if(!ee)return ge;if(ge&&ge!==ee){const be=new Error("Function names do not match (expected: "+ee+", actual: "+ge+")");throw be.data={actual:ge,expected:ee},be}return ee}function Tf(ee){let ge;for(const be in ee)Object.prototype.hasOwnProperty.call(ee,be)&&(fe(ee[be])||"string"==typeof ee[be].signature)&&(ge=Jc(ge,ee[be].name));return ge}function Nf(ee,ge){let be;for(be in ge)if(Object.prototype.hasOwnProperty.call(ge,be)){if(be in ee&&ge[be]!==ee[be]){const Ie=new Error('Signature "'+be+'" is defined twice');throw Ie.data={signature:be,sourceFunction:ge[be],destFunction:ee[be]},Ie}ee[be]=ge[be]}}W(),$(q);const Lf=T;function Qc(ee){if(!ee||"string"!=typeof ee.from||"string"!=typeof ee.to||"function"!=typeof ee.convert)throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");if(ee.to===ee.from)throw new SyntaxError('Illegal to define conversion from "'+ee.from+'" to itself.')}return T=function(ee){const ge="string"==typeof ee;let Ie=ge?ee:"";const Re={};for(let Te=ge?1:0;Te<arguments.length;++Te){const Qe=arguments[Te];let Xe,Ue={};if("function"==typeof Qe?(Xe=Qe.name,"string"==typeof Qe.signature?Ue[Qe.signature]=Qe:fe(Qe)&&(Ue=Qe.signatures)):z(Qe)&&(Ue=Qe,ge||(Xe=Tf(Qe))),0===Object.keys(Ue).length){const $e=new TypeError("Argument to 'typed' at index "+Te+" is not a (typed) function, nor an object with signatures as keys and functions as values.");throw $e.data={index:Te,argument:Qe},$e}ge||(Ie=Jc(Ie,Xe)),Nf(Re,Ue)}return on(Ie||"",Re)},T.create=S,T.createCount=Lf.createCount,T.onMismatch=Bn,T.throwMismatchError=Bn,T.createError=ye,T.clear=W,T.clearConversions=function X(){let ee;for(ee of V)se.get(ee).conversionsTo=[];U=0},T.addTypes=$,T._findType=k,T.referTo=function yr(){const ee=bn(arguments).map(be=>Ze(Ae(be))),ge=Lt(arguments);if("function"!=typeof ge)throw new TypeError("Callback function expected as last argument");return Ji(ee,ge)},T.referToSelf=Wn,T.convert=function de(ee,ge){const be=k(ge);if(be.test(ee))return ee;const Ie=be.conversionsTo;if(0===Ie.length)throw new Error("There are no conversions to "+ge+" defined.");for(let Re=0;Re<Ie.length;Re++)if(k(Ie[Re].from).test(ee))return Ie[Re].convert(ee);throw new Error("Cannot convert "+ee+" to "+ge)},T.findSignature=F,T.find=function Ve(ee,ge,be){return F(ee,ge,be).implementation},T.isTypedFunction=fe,T.warnAgainstDeprecatedThis=!0,T.addType=function(ee,ge){let be="any";!1!==ge&&se.has("Object")&&(be="Object"),T.addTypes([ee],be)},T.addConversion=function(ee){Qc(ee);const ge=k(ee.to);if(!ge.conversionsTo.every(function(be){return be.from!==ee.from}))throw new Error('There is already a conversion from "'+ee.from+'" to "'+ge.name+'"');ge.conversionsTo.push({from:ee.from,convert:ee.convert,index:U++})},T.addConversions=function(ee){ee.forEach(T.addConversion)},T.removeConversion=function(ee){Qc(ee);const ge=k(ee.to),be=function ti(ee,ge){for(let be=0;be<ee.length;be++)if(ge(ee[be]))return ee[be]}(ge.conversionsTo,Re=>Re.from===ee.from);if(!be)throw new Error("Attempt to remove nonexistent conversion from "+ee.from+" to "+ee.to);if(be.convert!==ee.convert)throw new Error("Conversion to remove does not match existing conversion");const Ie=ge.conversionsTo.indexOf(be);ge.conversionsTo.splice(Ie,1)},T.resolve=function(ee,ge){if(!fe(ee))throw new TypeError(M);const be=ee._typedFunctionData.signatures;for(let Ie=0;Ie<be.length;++Ie)if(be[Ie].test(ge))return be[Ie];return null},T}()}()},2823:(Me,re,L)=>{L.r(re),L.d(re,{ActionGroupMenuComponent:()=>ur,ActionGroupMenuModule:()=>fr,ActionLogicHandler:()=>kS,ActionMenuComponent:()=>TV,ActionMenuModule:()=>Od,ActionNameMapper:()=>ao,ActiveFieldsChecker:()=>Jo,AdminCardComponent:()=>US,AdminCardModule:()=>VS,AdminMetadataStore:()=>nd,AdminPanelComponent:()=>V7,AdminPanelModule:()=>z7,AppMetadataStore:()=>ca,AppStateStore:()=>Gt,AsyncActionHandler:()=>ja,AsyncActionService:()=>Kt,AsyncProcessLineAction:()=>RM,AsyncProcessRecordAction:()=>JS,AsyncProcessRecordThreadItemAction:()=>vC,AsyncProcessRecordThreadListAction:()=>mC,AsyncProcessSubpanelAction:()=>eC,AsyncProcessSubpanelLineAction:()=>DS,AsyncProcessTableAction:()=>dD,AttributeBuilder:()=>qu,AuthGuard:()=>F7,AuthService:()=>Hn,BaseActionManager:()=>si,BaseActionsAdapter:()=>pd,BaseBooleanComponent:()=>Iu,BaseChartComponent:()=>tc,BaseChartModule:()=>WP,BaseComposite:()=>B1,BaseDateComponent:()=>Su,BaseDateTimeComponent:()=>ka,BaseEnumComponent:()=>Ti,BaseFavoritesComponent:()=>_d,BaseFieldComponent:()=>cn,BaseFieldGridComponent:()=>_u,BaseFieldModule:()=>_7,BaseFieldRegistry:()=>pi,BaseGroupedMenuItemComponent:()=>PC,BaseHomeMenuItemComponent:()=>RC,BaseLineActionsAdapter:()=>jM,BaseLineItemsComponent:()=>j1,BaseMenuFavoritesComponent:()=>HC,BaseMenuItemComponent:()=>BC,BaseMenuItemLinkComponent:()=>FC,BaseMenuItemsListComponent:()=>VC,BaseMenuRecentlyViewedComponent:()=>GC,BaseMetadataResolver:()=>nf,BaseMobileGroupedMenuComponent:()=>qC,BaseMobileMenuComponent:()=>tM,BaseMobileModuleMenuComponent:()=>XC,BaseModuleResolver:()=>PS,BaseMultiEnumComponent:()=>ic,BaseNameComponent:()=>ab,BaseNavbarComponent:()=>oM,BaseNumberComponent:()=>sc,BaseRecordActionsAdapter:()=>Zi,BaseRecordContainerStore:()=>rd,BaseRecordResolver:()=>L7,BaseRelateComponent:()=>ju,BaseRouteService:()=>W1,BaseSaveRecordMapper:()=>Qo,BaseSubMenuFavoritesComponent:()=>NC,BaseSubMenuRecentlyViewedComponent:()=>AC,BaseWidgetComponent:()=>Vr,BaseWidgetModule:()=>v7,BooleanDetailFieldComponent:()=>ea,BooleanDetailFieldModule:()=>Pb,BooleanEditFieldComponent:()=>Sc,BooleanEditFieldModule:()=>jb,BooleanFilterFieldComponent:()=>hc,BooleanFilterFieldModule:()=>Sb,BottomWidgetAdapter:()=>uf,BulkActionMenuComponent:()=>mu,BulkActionMenuModule:()=>gu,BulkActionsAdapter:()=>cD,BulkActionsAdapterFactory:()=>lD,ButtonComponent:()=>Nn,ButtonGroupComponent:()=>Yr,ButtonGroupModule:()=>dr,ButtonLoadingDirective:()=>RS,ButtonLoadingUiModule:()=>jS,ButtonModule:()=>Xt,ButtonUtils:()=>C0,CancelCreateAction:()=>HS,CancelRecordPanelAction:()=>sD,ChangelogAsyncAction:()=>eb,ChartComponent:()=>A0,ChartDataStore:()=>aS,ChartDataStoreFactory:()=>sS,ChartMessageAreaComponent:()=>Ho,ChartMessageAreaModule:()=>Zo,ChartModule:()=>T0,ChartRegistry:()=>I0,ChartSidebarWidgetComponent:()=>cS,ChartSidebarWidgetModule:()=>lS,ClassicModalComponent:()=>Y0,ClassicModalModule:()=>Q8,ClassicViewResolver:()=>H7,ClassicViewUiComponent:()=>G7,ClassicViewUiModule:()=>K7,CloseButtonComponent:()=>vu,CloseButtonModule:()=>Oa,CollectionGQL:()=>uu,ColumnChooserComponent:()=>L0,ColumnChooserModule:()=>B0,CompositeComponent:()=>oa,CompositeModule:()=>O1,ConditionOperatorActionHandler:()=>oo,ConditionOperatorManager:()=>yu,ConfirmationModalService:()=>yn,CreateRecordComponent:()=>bz,CreateRecordModule:()=>Dz,CreateRelatedLineAction:()=>OM,CreateViewStore:()=>Zc,CurrencyDetailFieldComponent:()=>cc,CurrencyDetailFieldModule:()=>db,CurrencyFormatter:()=>fu,CurrencyService:()=>Ra,CurrencyUnitConverter:()=>iS,CurrencyValidator:()=>p1,DataTypeFormatter:()=>it,DataTypeSeriesMapper:()=>oS,DataTypeUnitConverter:()=>rS,DateAdapter:()=>Fu,DateDetailFieldComponent:()=>ac,DateDetailFieldModule:()=>cb,DateEditFieldComponent:()=>lc,DateEditFieldModule:()=>Lb,DateFilterFieldComponent:()=>uc,DateFilterFieldModule:()=>Wb,DateFormatter:()=>Nr,DateParserFormatter:()=>Eu,DateTimeDetailFieldComponent:()=>dc,DateTimeDetailFieldModule:()=>pb,DateTimeEditFieldComponent:()=>xu,DateTimeEditFieldModule:()=>fb,DateTimeFilterFieldComponent:()=>mb,DateTimeFilterFieldModule:()=>gb,DateTimeModel:()=>Gi,DateTimeValidator:()=>v1,DateValidator:()=>g1,DatetimeFormatter:()=>lr,DisplayTypeAction:()=>rb,DisplayTypeBackendAction:()=>nb,DropdownButtonComponent:()=>Xs,DropdownButtonModule:()=>Lr,DropdownEnumDetailFieldComponent:()=>xc,DropdownEnumDetailFieldModule:()=>Hb,DropdownEnumEditFieldComponent:()=>Uu,DropdownEnumEditFieldModule:()=>Kb,DropdownSubmenuComponent:()=>g0,DropdownSubmenuModule:()=>y0,DuplicateEmailValidator:()=>A1,DynamicEnumDetailFieldComponent:()=>y7,DynamicEnumDetailFieldModule:()=>b7,DynamicEnumEditFieldComponent:()=>M7,DynamicEnumEditFieldModule:()=>S7,DynamicFieldComponent:()=>Ua,DynamicFieldModule:()=>Va,DynamicLabelComponent:()=>no,DynamicLabelModule:()=>io,DynamicLabelService:()=>Ys,EmailDetailFieldsComponent:()=>D7,EmailDetailFieldsModule:()=>w7,EmailFormatter:()=>_1,EmailListFieldsComponent:()=>mc,EmailListFieldsModule:()=>hb,EmailPrimarySelectAction:()=>V0,EmailValidator:()=>b1,EntityGQL:()=>zo,EntityMutationGQL:()=>c0,EnumDetailFieldComponent:()=>Or,EnumDetailFieldModule:()=>ob,EnumEditFieldComponent:()=>Pa,EnumEditFieldModule:()=>vb,ErrorInterceptor:()=>I7,ExportAsyncAction:()=>Q0,ExtensionLoader:()=>N7,FavoriteToggleComponent:()=>$M,FavoriteToggleModule:()=>UM,FavoritesService:()=>PM,FieldBuilder:()=>za,FieldComponent:()=>Ki,FieldGridComponent:()=>Xu,FieldGridModule:()=>uo,FieldLayoutComponent:()=>$1,FieldLayoutModule:()=>Yu,FieldLogicActionHandler:()=>Wi,FieldLogicDisplayActionHandler:()=>ib,FieldLogicDisplayManager:()=>pt,FieldLogicDisplayTypeAction:()=>U0,FieldLogicManager:()=>ft,FieldManager:()=>ei,FieldModule:()=>Pn,FieldRegistry:()=>Ac,FileDetailFieldComponent:()=>Tu,FileDetailFieldModule:()=>bb,FilterAdapter:()=>Cf,FilterAttributeBuilder:()=>N1,FilterFieldBuilder:()=>Ju,FilterListStore:()=>MM,FilterListStoreFactory:()=>Uc,FiltersListGQL:()=>Ad,FloatDetailFieldComponent:()=>gc,FloatDetailFieldModule:()=>Cb,FloatValidator:()=>M1,FooterUiComponent:()=>n8,FooterUiModule:()=>i8,FormControlUtils:()=>eo,FormatCurrencyModule:()=>ub,FormatCurrencyPipe:()=>lb,FormatNumberModule:()=>Lu,FormatNumberPipe:()=>Nu,FullNameDetailFieldsComponent:()=>oc,FullNameDetailFieldsModule:()=>sb,FullPageSpinnerComponent:()=>r8,FullPageSpinnerModule:()=>o8,GlobalSearch:()=>xC,GreaterThanAction:()=>O0,GridWidgetComponent:()=>ld,GridWidgetModule:()=>ud,GroupFieldBuilder:()=>T1,GroupFieldComponent:()=>ra,GroupFieldModule:()=>c1,GroupedButtonComponent:()=>v0,GroupedButtonModule:()=>b0,GroupedMenuItemComponent:()=>UC,GroupedMenuItemRegistry:()=>$C,HistorySidebarWidgetComponent:()=>fS,HistorySidebarWidgetModule:()=>pS,HistoryTimelineAdapter:()=>qd,HistoryTimelineAdapterFactory:()=>dS,HistoryTimelineStore:()=>uS,HistoryTimelineStoreFactory:()=>Zd,HomeMenuItemComponent:()=>kC,HomeMenuItemRegistry:()=>jC,HtmlDetailFieldComponent:()=>Jb,HtmlDetailFieldModule:()=>Qb,HtmlSanitizeModule:()=>E7,HtmlSanitizePipe:()=>x7,IconDetailFieldComponent:()=>$a,IconListFieldModule:()=>n1,IframePageChangeObserver:()=>Mu,IframeResizeHandlerHandler:()=>Cu,ImageComponent:()=>mn,ImageModule:()=>fn,ImmediateDebounce:()=>kM,InlineLoadingSpinnerComponent:()=>ec,InlineLoadingSpinnerModule:()=>Br,InstallAction:()=>eD,InstallActionManager:()=>hf,InstallActionsAdapter:()=>vf,InstallAuthGuard:()=>A7,InstallContainerComponent:()=>nD,InstallContainerModule:()=>iD,InstallContentAdapter:()=>_f,InstallErrorModalComponent:()=>dd,InstallErrorModalModule:()=>$8,InstallHeaderComponent:()=>rD,InstallHeaderModule:()=>oD,InstallViewActionHandler:()=>YS,InstallViewComponent:()=>Ez,InstallViewModule:()=>Fz,InstallViewStore:()=>pa,IntDetailFieldComponent:()=>wc,IntDetailFieldModule:()=>Vb,IntValidator:()=>D1,IsEmptyAction:()=>k0,IsEqualAction:()=>P0,LabelComponent:()=>Ot,LabelModule:()=>Nt,LanguageStore:()=>Oe,LegacyEntrypointLinkBuilder:()=>yb,LessThanAction:()=>R0,LineActionActionHandler:()=>kd,LineActionActionManager:()=>Wc,LineActionMenuComponent:()=>iC,LineActionModule:()=>rC,LineActionsAdapter:()=>uD,LineChartComponent:()=>x0,LineChartModule:()=>E0,LineItemBuilder:()=>L1,LineItemsComponent:()=>k1,LineItemsModule:()=>P1,LinkModel:()=>Y8,LinkRouteAsyncActionService:()=>s1,LinkTarget:()=>Ja,ListComponent:()=>Pz,ListContainerComponent:()=>vD,ListContainerModule:()=>_D,ListFilterComponent:()=>Gc,ListFilterModule:()=>Kc,ListFilterStore:()=>Wd,ListFilterStoreFactory:()=>QM,ListGQL:()=>_c,ListHeaderComponent:()=>yD,ListHeaderModule:()=>bD,ListModule:()=>$z,ListViewRecordPanelActionAdapterFactory:()=>hD,ListViewRecordPanelActionHandler:()=>yf,ListViewRecordPanelActionsAdapter:()=>gD,ListViewSidebarWidgetAdapter:()=>wf,ListViewSidebarWidgetService:()=>qc,ListViewStore:()=>zn,ListViewTableActionsAdapter:()=>pD,ListviewTableActionsAdapterFactory:()=>mD,LoadMoreComponent:()=>oC,LoadMoreModule:()=>aC,LoadingBuffer:()=>f0,LoadingBufferFactory:()=>du,LoadingSpinnerComponent:()=>pr,LoadingSpinnerModule:()=>mr,LocalStorageService:()=>cr,LoginAuthGuard:()=>T7,LoginUiComponent:()=>CD,LoginUiModule:()=>Qz,LoginUiRoutes:()=>MD,LogoAbstract:()=>sC,LogoUiComponent:()=>jc,LogoUiModule:()=>kc,LogoutComponent:()=>Xz,LogoutModule:()=>Yz,LogoutUiComponent:()=>cC,LogoutUiModule:()=>lC,MaxColumnsCalculator:()=>so,MenuFavoritesComponent:()=>Md,MenuFavoritesRegistry:()=>ZC,MenuItemComponent:()=>bd,MenuItemLinkComponent:()=>Ur,MenuItemLinkRegistry:()=>IC,MenuItemRegistry:()=>OC,MenuItemsListComponent:()=>WC,MenuItemsListRegistry:()=>zC,MenuRecentlyViewedComponent:()=>Cd,MenuRecentlyViewedRegistry:()=>KC,MessageModalComponent:()=>Za,MessageModalModule:()=>X8,MessageService:()=>ct,MessageUiComponent:()=>q8,MessageUiModule:()=>J8,MetadataStore:()=>mt,MinimiseButtonComponent:()=>J1,MinimiseButtonModule:()=>Q1,MobileGroupedMenuComponent:()=>QC,MobileGroupedMenuRegistry:()=>JC,MobileMenuComponent:()=>iM,MobileMenuRegistry:()=>nM,MobileModuleMenuComponent:()=>eM,MobileModuleMenuRegistry:()=>YC,ModalButtonGroupComponent:()=>uC,ModalButtonGroupModule:()=>dC,ModalComponent:()=>qo,ModalModule:()=>ro,ModalRecordFilterAdapter:()=>Db,ModalRecordListTableAdapter:()=>wb,ModuleNameMapper:()=>_n,ModuleNavigation:()=>wn,ModuleTitleComponent:()=>fd,ModuleTitleModule:()=>qa,MultiEnumDetailFieldComponent:()=>fc,MultiEnumDetailFieldModule:()=>_b,MultiEnumEditFieldComponent:()=>Dc,MultiEnumEditFieldModule:()=>Ub,MultiEnumFilterFieldComponent:()=>rc,MultiEnumFilterFieldModule:()=>Bb,NavbarAbstract:()=>fC,NavbarRegistry:()=>aM,NavbarUiComponent:()=>q6,NavbarUiModule:()=>Y6,NavigationStore:()=>Ci,NoopAsyncAction:()=>X0,NotEmptyAction:()=>j0,NotEqualAction:()=>$0,NotificationStore:()=>la,NotificationsComponent:()=>wC,NotificationsModule:()=>cM,NotificationsService:()=>sd,NumberFormatter:()=>to,PaginationComponent:()=>wd,PaginationModule:()=>xd,PanelComponent:()=>ua,PanelLogicActionHandler:()=>uM,PanelLogicDisplayTypeAction:()=>dM,PanelLogicManager:()=>$c,PanelModule:()=>Pr,PasswordDetailFieldComponent:()=>Fc,PasswordDetailFieldModule:()=>Xb,PasswordEditFieldComponent:()=>zu,PasswordEditFieldModule:()=>Yb,PhoneDetailFieldComponent:()=>nc,PhoneDetailFieldModule:()=>Nb,PhoneFormatter:()=>pu,PhoneValidator:()=>x1,PieGridChartComponent:()=>M0,PieGridChartModule:()=>w0,PopupButtonComponent:()=>fM,PopupButtonModule:()=>pM,PrimaryEmailValidator:()=>F1,ProcessService:()=>$i,QuickFiltersService:()=>Ya,RadioEnumDetailFieldComponent:()=>Ec,RadioEnumDetailFieldModule:()=>Zb,RadioEnumEditFieldComponent:()=>Vu,RadioEnumEditFieldModule:()=>qb,RangeValidator:()=>d1,RecentlyViewedService:()=>rf,RecordActionDisplayTypeLogic:()=>QS,RecordActionHandler:()=>vr,RecordActionManager:()=>sf,RecordActionsAdapter:()=>ff,RecordCancelAction:()=>KS,RecordComponent:()=>Sz,RecordContainerComponent:()=>df,RecordContainerModule:()=>mf,RecordContentAdapter:()=>cf,RecordContentComponent:()=>Ed,RecordContentModule:()=>Fd,RecordContentSkeletonComponent:()=>_M,RecordContentSkeletonModule:()=>yM,RecordCreateAction:()=>WS,RecordDetailsPopupButtonComponent:()=>mM,RecordDetailsPopupButtonModule:()=>gM,RecordEditAction:()=>zS,RecordFetchGQL:()=>Rr,RecordFlexboxComponent:()=>SC,RecordFlexboxModule:()=>sM,RecordGridComponent:()=>Sd,RecordGridModule:()=>Xa,RecordHeaderComponent:()=>pf,RecordHeaderModule:()=>gf,RecordListModalComponent:()=>na,RecordListModalModule:()=>_9,RecordListModalStore:()=>Fb,RecordListModalStoreFactory:()=>Ib,RecordListStore:()=>Ou,RecordListStoreFactory:()=>Ni,RecordManager:()=>ci,RecordModule:()=>XS,RecordPanelActionHandler:()=>YM,RecordPanelActionManager:()=>bf,RecordPanelAdapter:()=>Df,RecordPanelComponent:()=>XM,RecordPanelModule:()=>eS,RecordPanelStore:()=>Gd,RecordPanelStoreFactory:()=>tS,RecordSaveAction:()=>ZS,RecordSaveGQL:()=>jr,RecordSaveNewAction:()=>qS,RecordStore:()=>od,RecordStoreFactory:()=>kr,RecordStoreList:()=>G1,RecordThreadComponent:()=>hd,RecordThreadItemActionHandler:()=>Qa,RecordThreadItemActionManager:()=>gd,RecordThreadItemActionsAdapter:()=>CC,RecordThreadItemActionsAdapterFactory:()=>MC,RecordThreadItemCancelAction:()=>_C,RecordThreadItemComponent:()=>DC,RecordThreadItemEditAction:()=>yC,RecordThreadItemModule:()=>Pc,RecordThreadItemSaveAction:()=>bC,RecordThreadItemStore:()=>ad,RecordThreadItemStoreFactory:()=>Lc,RecordThreadListActionHandler:()=>pC,RecordThreadListActionManager:()=>md,RecordThreadListActionsAdapter:()=>gC,RecordThreadListActionsAdapterFactory:()=>hC,RecordThreadModule:()=>Dd,RecordThreadSidebarWidgetComponent:()=>mS,RecordThreadSidebarWidgetModule:()=>U9,RecordThreadStore:()=>Bc,RecordThreadStoreFactory:()=>Oc,RecordToggleWidgetsAction:()=>GS,RecordViewSidebarWidgetService:()=>es,RecordViewStore:()=>li,RecoverPasswordService:()=>$S,RedirectAsyncAction:()=>J0,RelateDetailFieldComponent:()=>vc,RelateDetailFieldsModule:()=>Ob,RelateEditFieldComponent:()=>ku,RelateEditFieldModule:()=>Ab,RelateFilterFieldComponent:()=>Pu,RelateFilterFieldModule:()=>Rb,RelateService:()=>ia,RequiredAction:()=>G0,RequiredValidator:()=>bu,RouteConverter:()=>$r,RunBulkActionRecordPanelAction:()=>aD,SaveFilterStoreFactory:()=>zd,SavedFilterActionAdapterFactory:()=>JM,SavedFilterActionHandler:()=>Pd,SavedFilterActionManager:()=>$d,SavedFilterActionsAdapter:()=>qM,SavedFilterDeleteAction:()=>zM,SavedFilterRecordStore:()=>GM,SavedFilterRecordStoreFactory:()=>Ud,SavedFilterSaveAction:()=>VM,SavedFilterSaveGQL:()=>HM,SavedFilterStore:()=>Vd,SavedSearchRecordMapper:()=>ZM,ScreenSize:()=>kn,ScreenSizeObserverService:()=>ai,SearchBarComponent:()=>EC,SearchBarModule:()=>lM,SelectColumnsTableAction:()=>fD,SelectModalService:()=>En,SeriesMapper:()=>Hd,SeriesStatisticsStore:()=>Kd,SeriesStatisticsStoreFactory:()=>R7,SeriesTraverser:()=>nS,SettingsMenuComponent:()=>FM,SettingsMenuModule:()=>Rd,SidebarWidgetAdapter:()=>af,SidebarWidgetComponent:()=>Qd,SidebarWidgetModule:()=>Xd,SidebarWidgetRegistry:()=>_S,SingleValueStatisticsStore:()=>q1,SingleValueStatisticsStoreFactory:()=>Wa,SortButtonComponent:()=>bM,SortButtonModule:()=>CM,StandardFieldRegistry:()=>Ic,StateManager:()=>id,StatisticsBatch:()=>Nd,StatisticsFetchGQL:()=>Hi,StatisticsSidebarWidgetComponent:()=>gS,StatisticsSidebarWidgetModule:()=>hS,StatisticsStore:()=>Rc,StatisticsStoreFactory:()=>j7,StatisticsTopWidgetComponent:()=>AS,StatisticsTopWidgetModule:()=>TS,StatusBarComponent:()=>Ld,StatusBarModule:()=>jd,SubMenuFavoritesComponent:()=>yd,SubMenuFavoritesRegistry:()=>LC,SubMenuRecentlyViewedComponent:()=>vd,SubMenuRecentlyViewedRegistry:()=>TC,SubpanelActionAdapterFactory:()=>bS,SubpanelActionHandler:()=>da,SubpanelActionManager:()=>Ha,SubpanelActionsAdapter:()=>yS,SubpanelClearFilterAction:()=>nC,SubpanelComponent:()=>ES,SubpanelContainerComponent:()=>FS,SubpanelContainerModule:()=>IS,SubpanelCreateAction:()=>X1,SubpanelFilterAdapter:()=>CS,SubpanelFilterAdapterFactory:()=>MS,SubpanelLineActionHandler:()=>SS,SubpanelLineActionManager:()=>Yd,SubpanelLineActionsAdapter:()=>wS,SubpanelLineActionsAdapterFactory:()=>ef,SubpanelModule:()=>Hc,SubpanelSelectAction:()=>Y1,SubpanelShowFilterAction:()=>tC,SubpanelStore:()=>fa,SubpanelStoreFactory:()=>Td,SubpanelTableAdapter:()=>tf,SubpanelTableAdapterFactory:()=>xS,SystemConfigStore:()=>dt,SystemNameService:()=>B7,TableActionHandler:()=>Mf,TableActionManager:()=>Sf,TableAdapter:()=>xf,TableBodyComponent:()=>AM,TableBodyModule:()=>LM,TableComponent:()=>Vc,TableFooterComponent:()=>TM,TableFooterModule:()=>BM,TableHeaderComponent:()=>IM,TableHeaderModule:()=>NM,TableModule:()=>zc,TextDetailFieldComponent:()=>Du,TextDetailFieldModule:()=>Tb,TextEditFieldComponent:()=>$u,TextEditFieldModule:()=>Gb,TextListFieldComponent:()=>Ku,TextListFieldModule:()=>r1,ThemeImagesStore:()=>Tr,TinymceDetailFieldComponent:()=>Wu,TinymceDetailFieldModule:()=>e1,TinymceEditFieldComponent:()=>Gu,TinymceEditFieldModule:()=>t1,ToObservableModule:()=>vM,ToObservablePipe:()=>hM,TopWidgetAdapter:()=>lf,TopWidgetComponent:()=>BS,TopWidgetModule:()=>OS,UpdateBaseCurrencyAction:()=>K0,UpdateCurrencyAction:()=>H0,UpdateFlexRelateModuleAction:()=>q0,UpdateValueAction:()=>Z0,UpdateValueBackendAction:()=>tb,UrlDetailFieldComponent:()=>Yo,UrlDetailFieldModule:()=>$b,UserPreferenceStore:()=>Vt,UserService:()=>O7,ValidationManager:()=>lo,VarcharDetailFieldComponent:()=>Xo,VarcharDetailFieldModule:()=>zb,VarcharEditFieldComponent:()=>wu,VarcharEditFieldModule:()=>kb,VarcharFilterFieldComponent:()=>Au,VarcharFilterFieldModule:()=>Mb,VerticalBarChartComponent:()=>S0,VerticalBarChartModule:()=>D0,ViewStore:()=>Id,WidgetPanelComponent:()=>Ga,WidgetPanelModule:()=>hr,alertTypes:()=>Ka,baseFieldComponents:()=>a1,baseFieldModules:()=>o1,baseViewFieldsMap:()=>Hu,booleanRequiredValidator:()=>W0,chartModules:()=>F0,chartTypeMap:()=>hu,componentTypeMap:()=>Jd,currencyValidator:()=>f1,dateTimeValidator:()=>h1,dateValidator:()=>m1,duplicateEmailValidator:()=>I1,emailValidator:()=>y1,fieldComponents:()=>v5,fieldModules:()=>R1,floatValidator:()=>C1,intValidator:()=>S1,maxValidator:()=>u1,minValidator:()=>l1,phoneValidator:()=>w1,primaryEmailValidator:()=>E1,requiredValidator:()=>z0,sidebarWidgetModules:()=>vS,topWidgetComponentTypeMap:()=>LS,topWidgetModules:()=>NS,viewFieldsMap:()=>Qu});var n=L(2611),M=L(1320),S=L(8303),v=L(8103),z=L(2495),q=L(2831);const se=new Set;let V,U=(()=>{class i{constructor(e,t){this._platform=e,this._nonce=t,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):k}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&function T(i,a){if(!se.has(i))try{V||(V=document.createElement("style"),a&&(V.nonce=a),V.setAttribute("type","text/css"),document.head.appendChild(V)),V.sheet&&(V.sheet.insertRule(`@media ${i} {body{ }}`,0),se.add(i))}catch(e){console.error(e)}}(e,this._nonce),this._matchMedia(e)}static#e=this.\u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(q.t4),n.\u0275\u0275inject(n.CSP_NONCE,8))};static#t=this.\u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function k(i){return{matches:"all"===i||""===i,media:i,addListener:()=>{},removeListener:()=>{}}}let $=(()=>{class i{constructor(e,t){this._mediaMatcher=e,this._zone=t,this._queries=new Map,this._destroySubject=new S.Subject}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return W((0,z.Eq)(e)).some(r=>this._registerQuery(r).mql.matches)}observe(e){const r=W((0,z.Eq)(e)).map(s=>this._registerQuery(s).observable);let o=(0,S.combineLatest)(r);return o=(0,S.concat)(o.pipe((0,v.take)(1)),o.pipe((0,v.skip)(1),(0,v.debounceTime)(0))),o.pipe((0,v.map)(s=>{const c={matches:!1,breakpoints:{}};return s.forEach(({matches:l,query:u})=>{c.matches=c.matches||l,c.breakpoints[u]=l}),c}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);const t=this._mediaMatcher.matchMedia(e),o={observable:new S.Observable(s=>{const c=l=>this._zone.run(()=>s.next(l));return t.addListener(c),()=>{t.removeListener(c)}}).pipe((0,v.startWith)(t),(0,v.map)(({matches:s})=>({query:e,matches:s})),(0,v.takeUntil)(this._destroySubject)),mql:t};return this._queries.set(e,o),o}static#e=this.\u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(U),n.\u0275\u0275inject(n.NgZone))};static#t=this.\u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function W(i){return i.map(a=>a.split(",")).reduce((a,e)=>a.concat(e)).map(a=>a.trim())}var ne=L(9298),fe=L(8592),F=L(4187),Ve=L(7109),de=L(3821),Ze=L(3068),Le=L(5248),at=L(9812),Be=L(9002);const Ye=new n.InjectionToken("EventArgument",{providedIn:"root",factory:function Ae(){return"$event"}}),qe=new n.InjectionToken("IoEventContext"),Zt=new n.InjectionToken("IoEventContextProvider"),Ke=new n.InjectionToken("DynamicComponentInjector");let Et=(()=>{class i{constructor(){this.trackOutputChanges=!1}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),ie=(()=>{class i{constructor(e,t,r,o,s,c,l,u){if(this.injector=e,this.differs=t,this.cfr=r,this.options=o,this.compInjector=s,this.eventArgument=c,this.cdr=l,this.eventContextProvider=u,this.lastComponentInst=null,this.lastChangedInputs=new Set,this.inputsDiffer=this.differs.find({}).create(),this.compFactory=null,this.outputsShouldDisconnect$=new S.Subject,this.inputs={},this.outputs={},this.outputsChanged=()=>!1,this.options.trackOutputChanges){const d=this.differs.find({}).create();this.outputsChanged=f=>!!d.diff(f)}}get compRef(){return this.compInjector.componentRef}get componentInst(){return this.compRef?this.compRef.instance:null}get componentInstChanged(){return this.lastComponentInst!==this.componentInst&&(this.lastComponentInst=this.componentInst,!0)}ngOnDestroy(){this.disconnectOutputs()}update(e,t){if(!this.compRef)return void this.disconnectOutputs();const r=this.updateIO(e,t),o=this.componentInstChanged,s=this.getInputsChanges(o),c=this.outputsChanged(this.outputs);s&&this.updateChangedInputs(s),(o||s)&&this.updateInputs(o||!this.lastChangedInputs.size),(o||c||r.outputsChanged)&&this.bindOutputs()}updateIO(e,t){e||(e={}),t||(t={});const r=this.inputs!==e,o=this.outputs!==t;return this.inputs=e,this.outputs=t,{inputsChanged:r,outputsChanged:o}}updateInputs(e=!1){e&&this.updateCompFactory();const t=this.compRef,r=this.inputs;if(!r||!t)return;const o=this.lastChangedInputs.size?s=>this.lastChangedInputs.has(s):()=>!0;Object.keys(r).filter(o).forEach(s=>t.setInput(s,r[s]))}bindOutputs(){this.disconnectOutputs();const e=this.componentInst;let t=this.outputs;!t||!e||(t=this.resolveOutputs(t),Object.keys(t).filter(r=>e[r]).forEach(r=>e[r].pipe((0,v.takeUntil)(this.outputsShouldDisconnect$)).subscribe(o=>(this.cdr.markForCheck(),t[r](o)))))}disconnectOutputs(){this.outputsShouldDisconnect$.next()}getInputsChanges(e){return e&&this.inputsDiffer.diff({}),this.inputsDiffer.diff(this.inputs)}updateChangedInputs(e){this.lastChangedInputs.clear();const t=r=>this.lastChangedInputs.add(r.key);e.forEachAddedItem(t),e.forEachChangedItem(t),e.forEachRemovedItem(t)}resolveCompFactory(){if(!this.compRef)return null;try{try{return this.cfr.resolveComponentFactory(this.compRef.componentType)}catch{return this.cfr.resolveComponentFactory(this.compRef.instance.constructor)}}catch{return null}}updateCompFactory(){this.compFactory=this.resolveCompFactory()}resolveOutputs(e){return this.updateOutputsEventContext(),e=this.processOutputs(e),this.compFactory?this.remapIO(e,this.compFactory.outputs):e}updateOutputsEventContext(){if(this.eventContextProvider){const e=n.Injector.create({name:"EventContext",parent:this.injector,providers:[this.eventContextProvider]});this.outputsEventContext=e.get(qe)}else this.outputsEventContext=this.injector.get(qe,null)}processOutputs(e){const t={};return Object.keys(e).forEach(r=>{const o=e[r];let s;s="function"==typeof o?o:o&&this.processOutputArgs(o),this.outputsEventContext&&s&&(s=s.bind(this.outputsEventContext)),t[r]=s}),t}processOutputArgs(e){const t=this.eventArgument,r="args"in e?e.args||[]:[t],o=r.indexOf(t),s=e.handler;return-1===o?function(){return s.apply(this,r)}:function(c){const l=[...r];return l[o]=c,s.apply(this,l)}}remapIO(e,t){const r={};return Object.keys(e).forEach(o=>{const s=this.findPropByTplInMapping(o,t)||o;r[s]=e[o]}),r}findPropByTplInMapping(e,t){for(const r of t)if(r.templateName===e)return r.propName;return null}}return i.\u0275fac=function(e){return new(e||i)(n.\u0275\u0275inject(n.Injector),n.\u0275\u0275inject(n.KeyValueDiffers),n.\u0275\u0275inject(n.ComponentFactoryResolver),n.\u0275\u0275inject(Et),n.\u0275\u0275inject(Ke),n.\u0275\u0275inject(Ye),n.\u0275\u0275inject(n.ChangeDetectorRef),n.\u0275\u0275inject(Zt,8))},i.\u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac}),i})(),Mt=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=n.\u0275\u0275defineNgModule({type:i}),i.\u0275inj=n.\u0275\u0275defineInjector({}),i})(),Bt=(()=>{class i{constructor(e){this.ioService=e}ngDoCheck(){this.ioService.update(this.ndcDynamicInputs,this.ndcDynamicOutputs)}}return i.\u0275fac=function(e){return new(e||i)(n.\u0275\u0275directiveInject(ie))},i.\u0275dir=n.\u0275\u0275defineDirective({type:i,selectors:[["","ndcDynamicInputs",""],["","ndcDynamicOutputs",""]],inputs:{ndcDynamicInputs:"ndcDynamicInputs",ndcDynamicOutputs:"ndcDynamicOutputs"},exportAs:["ndcDynamicIo"],standalone:!0,features:[n.\u0275\u0275ProvidersFeature([ie])]}),i})(),kt=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=n.\u0275\u0275defineNgModule({type:i}),i.\u0275inj=n.\u0275\u0275defineInjector({imports:[Mt]}),i})(),It=(()=>{class i{constructor(e){this.vcr=e,this.ndcDynamicCreated=new n.EventEmitter,this.componentRef=null}ngOnChanges(e){i.UpdateOnInputs.some(t=>e.hasOwnProperty(t))&&this.createDynamicComponent()}createDynamicComponent(){this.vcr.clear(),this.componentRef=null,this.ndcDynamicComponent&&(this.componentRef=this.vcr.createComponent(this.ndcDynamicComponent,{index:0,injector:this._resolveInjector(),projectableNodes:this.ndcDynamicContent,ngModuleRef:this.ndcDynamicNgModuleRef,environmentInjector:this.ndcDynamicEnvironmentInjector}),this.ndcDynamicCreated.emit(this.componentRef))}_resolveInjector(){let e=this.ndcDynamicInjector||this.vcr.injector;return this.ndcDynamicProviders&&(e=n.Injector.create({providers:this.ndcDynamicProviders,parent:e})),e}}return i.UpdateOnInputs=["ndcDynamicComponent","ndcDynamicInjector","ndcDynamicProviders","ndcDynamicContent","ndcDynamicNgModuleRef","ndcDynamicEnvironmentInjector"],i.\u0275fac=function(e){return new(e||i)(n.\u0275\u0275directiveInject(n.ViewContainerRef))},i.\u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["ndc-dynamic"]],inputs:{ndcDynamicComponent:"ndcDynamicComponent",ndcDynamicInjector:"ndcDynamicInjector",ndcDynamicProviders:"ndcDynamicProviders",ndcDynamicContent:"ndcDynamicContent",ndcDynamicNgModuleRef:"ndcDynamicNgModuleRef",ndcDynamicEnvironmentInjector:"ndcDynamicEnvironmentInjector"},outputs:{ndcDynamicCreated:"ndcDynamicCreated"},standalone:!0,features:[n.\u0275\u0275ProvidersFeature([{provide:Ke,useExisting:i}]),n.\u0275\u0275NgOnChangesFeature,n.\u0275\u0275StandaloneFeature],decls:0,vars:0,template:function(e,t){},encapsulation:2}),i})(),lt=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=n.\u0275\u0275defineNgModule({type:i}),i.\u0275inj=n.\u0275\u0275defineInjector({imports:[kt,It,kt]}),i})();new n.InjectionToken("ReflectRef",{providedIn:"root",factory:()=>window.Reflect});var Lt=L(6672),xD=L(6478),pp=L(9388);function Xc(i,a,e){for(let t in a)if(a.hasOwnProperty(t)){const r=a[t];r?i.setProperty(t,r,e?.has(t)?"important":""):i.removeProperty(t)}return i}function ho(i,a){const e=a?"":"none";Xc(i.style,{"touch-action":a?"":"none","-webkit-user-drag":a?"":"none","-webkit-tap-highlight-color":a?"":"transparent","user-select":e,"-ms-user-select":e,"-webkit-user-select":e,"-moz-user-select":e})}function mp(i,a,e){Xc(i.style,{position:a?"":"fixed",top:a?"":"0",opacity:a?"":"0",left:a?"":"-999em"},e)}function ts(i,a){return a&&"none"!=a?i+" "+a:i}function gp(i){const a=i.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(i)*a}function Yc(i,a){return i.getPropertyValue(a).split(",").map(t=>t.trim())}function el(i){const a=i.getBoundingClientRect();return{top:a.top,right:a.right,bottom:a.bottom,left:a.left,width:a.width,height:a.height,x:a.x,y:a.y}}function tl(i,a,e){const{top:t,bottom:r,left:o,right:s}=i;return e>=t&&e<=r&&a>=o&&a<=s}function ha(i,a,e){i.top+=a,i.bottom=i.top+i.height,i.left+=e,i.right=i.left+i.width}function hp(i,a,e,t){const{top:r,right:o,bottom:s,left:c,width:l,height:u}=i,d=l*a,f=u*a;return t>r-f&&t<s+f&&e>c-d&&e<o+d}class vp{constructor(a){this._document=a,this.positions=new Map}clear(){this.positions.clear()}cache(a){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),a.forEach(e=>{this.positions.set(e,{scrollPosition:{top:e.scrollTop,left:e.scrollLeft},clientRect:el(e)})})}handleScroll(a){const e=(0,q.sA)(a),t=this.positions.get(e);if(!t)return null;const r=t.scrollPosition;let o,s;if(e===this._document){const u=this.getViewportScrollPosition();o=u.top,s=u.left}else o=e.scrollTop,s=e.scrollLeft;const c=r.top-o,l=r.left-s;return this.positions.forEach((u,d)=>{u.clientRect&&e!==d&&e.contains(d)&&ha(u.clientRect,c,l)}),r.top=o,r.left=s,{top:c,left:l}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}}function _p(i){const a=i.cloneNode(!0),e=a.querySelectorAll("[id]"),t=i.nodeName.toLowerCase();a.removeAttribute("id");for(let r=0;r<e.length;r++)e[r].removeAttribute("id");return"canvas"===t?Cp(i,a):("input"===t||"select"===t||"textarea"===t)&&bp(i,a),yp("canvas",i,a,Cp),yp("input, textarea, select",i,a,bp),a}function yp(i,a,e,t){const r=a.querySelectorAll(i);if(r.length){const o=e.querySelectorAll(i);for(let s=0;s<r.length;s++)t(r[s],o[s])}}let kD=0;function bp(i,a){"file"!==a.type&&(a.value=i.value),"radio"===a.type&&a.name&&(a.name=`mat-clone-${a.name}-${kD++}`)}function Cp(i,a){const e=a.getContext("2d");if(e)try{e.drawImage(i,0,0)}catch{}}const Mp=(0,q.i$)({passive:!0}),ns=(0,q.i$)({passive:!1}),nl=new Set(["position"]);class $D{get disabled(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)}set disabled(a){const e=(0,z.Ig)(a);e!==this._disabled&&(this._disabled=e,this._toggleNativeDragInteractions(),this._handles.forEach(t=>ho(t,e)))}constructor(a,e,t,r,o,s){this._config=e,this._document=t,this._ngZone=r,this._viewportRuler=o,this._dragDropRegistry=s,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._hasStartedDragging=!1,this._moveEvents=new S.Subject,this._pointerMoveSubscription=S.Subscription.EMPTY,this._pointerUpSubscription=S.Subscription.EMPTY,this._scrollSubscription=S.Subscription.EMPTY,this._resizeSubscription=S.Subscription.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new S.Subject,this.started=new S.Subject,this.released=new S.Subject,this.ended=new S.Subject,this.entered=new S.Subject,this.exited=new S.Subject,this.dropped=new S.Subject,this.moved=this._moveEvents,this._pointerDown=c=>{if(this.beforeStarted.next(),this._handles.length){const l=this._getTargetHandle(c);l&&!this._disabledHandles.has(l)&&!this.disabled&&this._initializeDragSequence(l,c)}else this.disabled||this._initializeDragSequence(this._rootElement,c)},this._pointerMove=c=>{const l=this._getPointerPositionOnPage(c);if(!this._hasStartedDragging){if(Math.abs(l.x-this._pickupPositionOnPage.x)+Math.abs(l.y-this._pickupPositionOnPage.y)>=this._config.dragStartThreshold){const m=Date.now()>=this._dragStartTime+this._getDragStartDelay(c),h=this._dropContainer;if(!m)return void this._endDragSequence(c);(!h||!h.isDragging()&&!h.isReceiving())&&(c.preventDefault(),this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence(c)))}return}c.preventDefault();const u=this._getConstrainedPointerPosition(l);if(this._hasMoved=!0,this._lastKnownPointerPosition=l,this._updatePointerDirectionDelta(u),this._dropContainer)this._updateActiveDropContainer(u,l);else{const d=this.constrainPosition?this._initialClientRect:this._pickupPositionOnPage,f=this._activeTransform;f.x=u.x-d.x+this._passiveTransform.x,f.y=u.y-d.y+this._passiveTransform.y,this._applyRootElementTransform(f.x,f.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:u,event:c,distance:this._getDragDistance(u),delta:this._pointerDirectionDelta})})},this._pointerUp=c=>{this._endDragSequence(c)},this._nativeDragStart=c=>{if(this._handles.length){const l=this._getTargetHandle(c);l&&!this._disabledHandles.has(l)&&!this.disabled&&c.preventDefault()}else this.disabled||c.preventDefault()},this.withRootElement(a).withParent(e.parentDragRef||null),this._parentPositions=new vp(t),s.registerDragItem(this)}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(a){this._handles=a.map(t=>(0,z.fI)(t)),this._handles.forEach(t=>ho(t,this.disabled)),this._toggleNativeDragInteractions();const e=new Set;return this._disabledHandles.forEach(t=>{this._handles.indexOf(t)>-1&&e.add(t)}),this._disabledHandles=e,this}withPreviewTemplate(a){return this._previewTemplate=a,this}withPlaceholderTemplate(a){return this._placeholderTemplate=a,this}withRootElement(a){const e=(0,z.fI)(a);return e!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{e.addEventListener("mousedown",this._pointerDown,ns),e.addEventListener("touchstart",this._pointerDown,Mp),e.addEventListener("dragstart",this._nativeDragStart,ns)}),this._initialTransform=void 0,this._rootElement=e),typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(a){return this._boundaryElement=a?(0,z.fI)(a):null,this._resizeSubscription.unsubscribe(),a&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(a){return this._parentDragRef=a,this}dispose(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&this._rootElement?.remove(),this._anchor?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(a){!this._disabledHandles.has(a)&&this._handles.indexOf(a)>-1&&(this._disabledHandles.add(a),ho(a,!0))}enableHandle(a){this._disabledHandles.has(a)&&(this._disabledHandles.delete(a),ho(a,this.disabled))}withDirection(a){return this._direction=a,this}_withDropContainer(a){this._dropContainer=a}getFreeDragPosition(){const a=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:a.x,y:a.y}}setFreeDragPosition(a){return this._activeTransform={x:0,y:0},this._passiveTransform.x=a.x,this._passiveTransform.y=a.y,this._dropContainer||this._applyRootElementTransform(a.x,a.y),this}withPreviewContainer(a){return this._previewContainer=a,this}_sortFromLastPointerPosition(){const a=this._lastKnownPointerPosition;a&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(a),a)}_removeSubscriptions(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}_destroyPreview(){this._preview?.remove(),this._previewRef?.destroy(),this._preview=this._previewRef=null}_destroyPlaceholder(){this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(a){if(this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging))if(this.released.next({source:this,event:a}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(a),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;const e=this._getPointerPositionOnPage(a);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(e),dropPoint:e,event:a})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(a){va(a)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();const e=this._dropContainer;if(e){const t=this._rootElement,r=t.parentNode,o=this._placeholder=this._createPlaceholderElement(),s=this._anchor=this._anchor||this._document.createComment(""),c=this._getShadowRoot();r.insertBefore(s,t),this._initialTransform=t.style.transform||"",this._preview=this._createPreviewElement(),mp(t,!1,nl),this._document.body.appendChild(r.replaceChild(o,t)),this._getPreviewInsertionPoint(r,c).appendChild(this._preview),this.started.next({source:this,event:a}),e.start(),this._initialContainer=e,this._initialIndex=e.getItemIndex(this)}else this.started.next({source:this,event:a}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(e?e.getScrollableParents():[])}_initializeDragSequence(a,e){this._parentDragRef&&e.stopPropagation();const t=this.isDragging(),r=va(e),o=!r&&0!==e.button,s=this._rootElement,c=(0,q.sA)(e),l=!r&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now(),u=r?function OD(i){const a=i.touches&&i.touches[0]||i.changedTouches&&i.changedTouches[0];return!(!a||-1!==a.identifier||null!=a.radiusX&&1!==a.radiusX||null!=a.radiusY&&1!==a.radiusY)}(e):function BD(i){return 0===i.buttons||0===i.detail}(e);if(c&&c.draggable&&"mousedown"===e.type&&e.preventDefault(),t||o||l||u)return;if(this._handles.length){const p=s.style;this._rootElementTapHighlight=p.webkitTapHighlightColor||"",p.webkitTapHighlightColor="transparent"}this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._initialClientRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(p=>this._updateOnScroll(p)),this._boundaryElement&&(this._boundaryRect=el(this._boundaryElement));const d=this._previewTemplate;this._pickupPositionInElement=d&&d.template&&!d.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialClientRect,a,e);const f=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(e);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:f.x,y:f.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,e)}_cleanupDragArtifacts(a){mp(this._rootElement,!0,nl),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._initialClientRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{const e=this._dropContainer,t=e.getItemIndex(this),r=this._getPointerPositionOnPage(a),o=this._getDragDistance(r),s=e._isOverContainer(r.x,r.y);this.ended.next({source:this,distance:o,dropPoint:r,event:a}),this.dropped.next({item:this,currentIndex:t,previousIndex:this._initialIndex,container:e,previousContainer:this._initialContainer,isPointerOverContainer:s,distance:o,dropPoint:r,event:a}),e.drop(this,t,this._initialIndex,this._initialContainer,s,o,r,a),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:a,y:e},{x:t,y:r}){let o=this._initialContainer._getSiblingContainerFromPosition(this,a,e);!o&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(a,e)&&(o=this._initialContainer),o&&o!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=o,this._dropContainer.enter(this,a,e,o===this._initialContainer&&o.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:o,currentIndex:o.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(t,r),this._dropContainer._sortItem(this,a,e,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(a,e):this._applyPreviewTransform(a-this._pickupPositionInElement.x,e-this._pickupPositionInElement.y))}_createPreviewElement(){const a=this._previewTemplate,e=this.previewClass,t=a?a.template:null;let r;if(t&&a){const o=a.matchSize?this._initialClientRect:null,s=a.viewContainer.createEmbeddedView(t,a.context);s.detectChanges(),r=Dp(s,this._document),this._previewRef=s,a.matchSize?wp(r,o):r.style.transform=is(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else r=_p(this._rootElement),wp(r,this._initialClientRect),this._initialTransform&&(r.style.transform=this._initialTransform);return Xc(r.style,{"pointer-events":"none",margin:"0",position:"fixed",top:"0",left:"0","z-index":`${this._config.zIndex||1e3}`},nl),ho(r,!1),r.classList.add("cdk-drag-preview"),r.setAttribute("dir",this._direction),e&&(Array.isArray(e)?e.forEach(o=>r.classList.add(o)):r.classList.add(e)),r}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();const a=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._applyPreviewTransform(a.left,a.top);const e=function jD(i){const a=getComputedStyle(i),e=Yc(a,"transition-property"),t=e.find(c=>"transform"===c||"all"===c);if(!t)return 0;const r=e.indexOf(t),o=Yc(a,"transition-duration"),s=Yc(a,"transition-delay");return gp(o[r])+gp(s[r])}(this._preview);return 0===e?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(t=>{const r=s=>{(!s||(0,q.sA)(s)===this._preview&&"transform"===s.propertyName)&&(this._preview?.removeEventListener("transitionend",r),t(),clearTimeout(o))},o=setTimeout(r,1.5*e);this._preview.addEventListener("transitionend",r)}))}_createPlaceholderElement(){const a=this._placeholderTemplate,e=a?a.template:null;let t;return e?(this._placeholderRef=a.viewContainer.createEmbeddedView(e,a.context),this._placeholderRef.detectChanges(),t=Dp(this._placeholderRef,this._document)):t=_p(this._rootElement),t.style.pointerEvents="none",t.classList.add("cdk-drag-placeholder"),t}_getPointerPositionInElement(a,e,t){const r=e===this._rootElement?null:e,o=r?r.getBoundingClientRect():a,s=va(t)?t.targetTouches[0]:t,c=this._getViewportScrollPosition();return{x:o.left-a.left+(s.pageX-o.left-c.left),y:o.top-a.top+(s.pageY-o.top-c.top)}}_getPointerPositionOnPage(a){const e=this._getViewportScrollPosition(),t=va(a)?a.touches[0]||a.changedTouches[0]||{pageX:0,pageY:0}:a,r=t.pageX-e.left,o=t.pageY-e.top;if(this._ownerSVGElement){const s=this._ownerSVGElement.getScreenCTM();if(s){const c=this._ownerSVGElement.createSVGPoint();return c.x=r,c.y=o,c.matrixTransform(s.inverse())}}return{x:r,y:o}}_getConstrainedPointerPosition(a){const e=this._dropContainer?this._dropContainer.lockAxis:null;let{x:t,y:r}=this.constrainPosition?this.constrainPosition(a,this,this._initialClientRect,this._pickupPositionInElement):a;if("x"===this.lockAxis||"x"===e?r=this._pickupPositionOnPage.y-(this.constrainPosition?this._pickupPositionInElement.y:0):("y"===this.lockAxis||"y"===e)&&(t=this._pickupPositionOnPage.x-(this.constrainPosition?this._pickupPositionInElement.x:0)),this._boundaryRect){const{x:o,y:s}=this.constrainPosition?{x:0,y:0}:this._pickupPositionInElement,c=this._boundaryRect,{width:l,height:u}=this._getPreviewRect(),d=c.top+s,f=c.bottom-(u-s);t=Sp(t,c.left+o,c.right-(l-o)),r=Sp(r,d,f)}return{x:t,y:r}}_updatePointerDirectionDelta(a){const{x:e,y:t}=a,r=this._pointerDirectionDelta,o=this._pointerPositionAtLastDirectionChange,s=Math.abs(e-o.x),c=Math.abs(t-o.y);return s>this._config.pointerDirectionChangeThreshold&&(r.x=e>o.x?1:-1,o.x=e),c>this._config.pointerDirectionChangeThreshold&&(r.y=t>o.y?1:-1,o.y=t),r}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;const a=this._handles.length>0||!this.isDragging();a!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=a,ho(this._rootElement,a))}_removeRootElementListeners(a){a.removeEventListener("mousedown",this._pointerDown,ns),a.removeEventListener("touchstart",this._pointerDown,Mp),a.removeEventListener("dragstart",this._nativeDragStart,ns)}_applyRootElementTransform(a,e){const t=is(a,e),r=this._rootElement.style;null==this._initialTransform&&(this._initialTransform=r.transform&&"none"!=r.transform?r.transform:""),r.transform=ts(t,this._initialTransform)}_applyPreviewTransform(a,e){const t=this._previewTemplate?.template?void 0:this._initialTransform,r=is(a,e);this._preview.style.transform=ts(r,t)}_getDragDistance(a){const e=this._pickupPositionOnPage;return e?{x:a.x-e.x,y:a.y-e.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:a,y:e}=this._passiveTransform;if(0===a&&0===e||this.isDragging()||!this._boundaryElement)return;const t=this._rootElement.getBoundingClientRect(),r=this._boundaryElement.getBoundingClientRect();if(0===r.width&&0===r.height||0===t.width&&0===t.height)return;const o=r.left-t.left,s=t.right-r.right,c=r.top-t.top,l=t.bottom-r.bottom;r.width>t.width?(o>0&&(a+=o),s>0&&(a-=s)):a=0,r.height>t.height?(c>0&&(e+=c),l>0&&(e-=l)):e=0,(a!==this._passiveTransform.x||e!==this._passiveTransform.y)&&this.setFreeDragPosition({y:e,x:a})}_getDragStartDelay(a){const e=this.dragStartDelay;return"number"==typeof e?e:va(a)?e.touch:e?e.mouse:0}_updateOnScroll(a){const e=this._parentPositions.handleScroll(a);if(e){const t=(0,q.sA)(a);this._boundaryRect&&t!==this._boundaryElement&&t.contains(this._boundaryElement)&&ha(this._boundaryRect,e.top,e.left),this._pickupPositionOnPage.x+=e.left,this._pickupPositionOnPage.y+=e.top,this._dropContainer||(this._activeTransform.x-=e.left,this._activeTransform.y-=e.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return void 0===this._cachedShadowRoot&&(this._cachedShadowRoot=(0,q.kV)(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(a,e){const t=this._previewContainer||"global";if("parent"===t)return a;if("global"===t){const r=this._document;return e||r.fullscreenElement||r.webkitFullscreenElement||r.mozFullScreenElement||r.msFullscreenElement||r.body}return(0,z.fI)(t)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialClientRect),this._previewRect}_getTargetHandle(a){return this._handles.find(e=>a.target&&(a.target===e||e.contains(a.target)))}}function is(i,a){return`translate3d(${Math.round(i)}px, ${Math.round(a)}px, 0)`}function Sp(i,a,e){return Math.max(a,Math.min(e,i))}function va(i){return"t"===i.type[0]}function Dp(i,a){const e=i.rootNodes;if(1===e.length&&e[0].nodeType===a.ELEMENT_NODE)return e[0];const t=a.createElement("div");return e.forEach(r=>t.appendChild(r)),t}function wp(i,a){i.style.width=`${a.width}px`,i.style.height=`${a.height}px`,i.style.transform=is(a.left,a.top)}function xp(i,a,e){const t=_a(a,i.length-1),r=_a(e,i.length-1);if(t===r)return;const o=i[t],s=r<t?-1:1;for(let c=t;c!==r;c+=s)i[c]=i[c+s];i[r]=o}function _a(i,a){return Math.max(0,Math.min(a,i))}class VD{constructor(a,e){this._element=a,this._dragDropRegistry=e,this._itemPositions=[],this.orientation="vertical",this._previousSwap={drag:null,delta:0,overlaps:!1}}start(a){this.withItems(a)}sort(a,e,t,r){const o=this._itemPositions,s=this._getItemIndexFromPointerPosition(a,e,t,r);if(-1===s&&o.length>0)return null;const c="horizontal"===this.orientation,l=o.findIndex(b=>b.drag===a),u=o[s],f=u.clientRect,p=l>s?1:-1,m=this._getItemOffsetPx(o[l].clientRect,f,p),h=this._getSiblingOffsetPx(l,o,p),g=o.slice();return xp(o,l,s),o.forEach((b,_)=>{if(g[_]===b)return;const D=b.drag===a,y=D?m:h,w=D?a.getPlaceholderElement():b.drag.getRootElement();b.offset+=y,c?(w.style.transform=ts(`translate3d(${Math.round(b.offset)}px, 0, 0)`,b.initialTransform),ha(b.clientRect,0,y)):(w.style.transform=ts(`translate3d(0, ${Math.round(b.offset)}px, 0)`,b.initialTransform),ha(b.clientRect,y,0))}),this._previousSwap.overlaps=tl(f,e,t),this._previousSwap.drag=u.drag,this._previousSwap.delta=c?r.x:r.y,{previousIndex:l,currentIndex:s}}enter(a,e,t,r){const o=null==r||r<0?this._getItemIndexFromPointerPosition(a,e,t):r,s=this._activeDraggables,c=s.indexOf(a),l=a.getPlaceholderElement();let u=s[o];if(u===a&&(u=s[o+1]),!u&&(null==o||-1===o||o<s.length-1)&&this._shouldEnterAsFirstChild(e,t)&&(u=s[0]),c>-1&&s.splice(c,1),u&&!this._dragDropRegistry.isDragging(u)){const d=u.getRootElement();d.parentElement.insertBefore(l,d),s.splice(o,0,a)}else(0,z.fI)(this._element).appendChild(l),s.push(a);l.style.transform="",this._cacheItemPositions()}withItems(a){this._activeDraggables=a.slice(),this._cacheItemPositions()}withSortPredicate(a){this._sortPredicate=a}reset(){this._activeDraggables.forEach(a=>{const e=a.getRootElement();if(e){const t=this._itemPositions.find(r=>r.drag===a)?.initialTransform;e.style.transform=t||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(a){return("horizontal"===this.orientation&&"rtl"===this.direction?this._itemPositions.slice().reverse():this._itemPositions).findIndex(t=>t.drag===a)}updateOnScroll(a,e){this._itemPositions.forEach(({clientRect:t})=>{ha(t,a,e)}),this._itemPositions.forEach(({drag:t})=>{this._dragDropRegistry.isDragging(t)&&t._sortFromLastPointerPosition()})}_cacheItemPositions(){const a="horizontal"===this.orientation;this._itemPositions=this._activeDraggables.map(e=>{const t=e.getVisibleElement();return{drag:e,offset:0,initialTransform:t.style.transform||"",clientRect:el(t)}}).sort((e,t)=>a?e.clientRect.left-t.clientRect.left:e.clientRect.top-t.clientRect.top)}_getItemOffsetPx(a,e,t){const r="horizontal"===this.orientation;let o=r?e.left-a.left:e.top-a.top;return-1===t&&(o+=r?e.width-a.width:e.height-a.height),o}_getSiblingOffsetPx(a,e,t){const r="horizontal"===this.orientation,o=e[a].clientRect,s=e[a+-1*t];let c=o[r?"width":"height"]*t;if(s){const l=r?"left":"top",u=r?"right":"bottom";-1===t?c-=s.clientRect[l]-o[u]:c+=o[l]-s.clientRect[u]}return c}_shouldEnterAsFirstChild(a,e){if(!this._activeDraggables.length)return!1;const t=this._itemPositions,r="horizontal"===this.orientation;if(t[0].drag!==this._activeDraggables[0]){const s=t[t.length-1].clientRect;return r?a>=s.right:e>=s.bottom}{const s=t[0].clientRect;return r?a<=s.left:e<=s.top}}_getItemIndexFromPointerPosition(a,e,t,r){const o="horizontal"===this.orientation,s=this._itemPositions.findIndex(({drag:c,clientRect:l})=>c!==a&&((!r||c!==this._previousSwap.drag||!this._previousSwap.overlaps||(o?r.x:r.y)!==this._previousSwap.delta)&&(o?e>=Math.floor(l.left)&&e<Math.floor(l.right):t>=Math.floor(l.top)&&t<Math.floor(l.bottom))));return-1!==s&&this._sortPredicate(s,a)?s:-1}}class zD{constructor(a,e,t,r,o){this._dragDropRegistry=e,this._ngZone=r,this._viewportRuler=o,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.beforeStarted=new S.Subject,this.entered=new S.Subject,this.exited=new S.Subject,this.dropped=new S.Subject,this.sorted=new S.Subject,this.receivingStarted=new S.Subject,this.receivingStopped=new S.Subject,this._isDragging=!1,this._draggables=[],this._siblings=[],this._activeSiblings=new Set,this._viewportScrollSubscription=S.Subscription.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new S.Subject,this._cachedShadowRoot=null,this._startScrollInterval=()=>{this._stopScrolling(),(0,S.interval)(0,S.animationFrameScheduler).pipe((0,v.takeUntil)(this._stopScrollTimers)).subscribe(()=>{const s=this._scrollNode,c=this.autoScrollStep;1===this._verticalScrollDirection?s.scrollBy(0,-c):2===this._verticalScrollDirection&&s.scrollBy(0,c),1===this._horizontalScrollDirection?s.scrollBy(-c,0):2===this._horizontalScrollDirection&&s.scrollBy(c,0)})},this.element=(0,z.fI)(a),this._document=t,this.withScrollableParents([this.element]),e.registerDropContainer(this),this._parentPositions=new vp(t),this._sortStrategy=new VD(this.element,e),this._sortStrategy.withSortPredicate((s,c)=>this.sortPredicate(s,c,this))}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this.receivingStarted.complete(),this.receivingStopped.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(a,e,t,r){this._draggingStarted(),null==r&&this.sortingDisabled&&(r=this._draggables.indexOf(a)),this._sortStrategy.enter(a,e,t,r),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:a,container:this,currentIndex:this.getItemIndex(a)})}exit(a){this._reset(),this.exited.next({item:a,container:this})}drop(a,e,t,r,o,s,c,l={}){this._reset(),this.dropped.next({item:a,currentIndex:e,previousIndex:t,container:this,previousContainer:r,isPointerOverContainer:o,distance:s,dropPoint:c,event:l})}withItems(a){const e=this._draggables;return this._draggables=a,a.forEach(t=>t._withDropContainer(this)),this.isDragging()&&(e.filter(r=>r.isDragging()).every(r=>-1===a.indexOf(r))?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(a){return this._sortStrategy.direction=a,this}connectedTo(a){return this._siblings=a.slice(),this}withOrientation(a){return this._sortStrategy.orientation=a,this}withScrollableParents(a){const e=(0,z.fI)(this.element);return this._scrollableElements=-1===a.indexOf(e)?[e,...a]:a.slice(),this}getScrollableParents(){return this._scrollableElements}getItemIndex(a){return this._isDragging?this._sortStrategy.getItemIndex(a):this._draggables.indexOf(a)}isReceiving(){return this._activeSiblings.size>0}_sortItem(a,e,t,r){if(this.sortingDisabled||!this._clientRect||!hp(this._clientRect,.05,e,t))return;const o=this._sortStrategy.sort(a,e,t,r);o&&this.sorted.next({previousIndex:o.previousIndex,currentIndex:o.currentIndex,container:this,item:a})}_startScrollingIfNecessary(a,e){if(this.autoScrollDisabled)return;let t,r=0,o=0;if(this._parentPositions.positions.forEach((s,c)=>{c===this._document||!s.clientRect||t||hp(s.clientRect,.05,a,e)&&([r,o]=function WD(i,a,e,t){const r=Ip(a,t),o=Ap(a,e);let s=0,c=0;if(r){const l=i.scrollTop;1===r?l>0&&(s=1):i.scrollHeight-l>i.clientHeight&&(s=2)}if(o){const l=i.scrollLeft;1===o?l>0&&(c=1):i.scrollWidth-l>i.clientWidth&&(c=2)}return[s,c]}(c,s.clientRect,a,e),(r||o)&&(t=c))}),!r&&!o){const{width:s,height:c}=this._viewportRuler.getViewportSize(),l={width:s,height:c,top:0,right:s,bottom:c,left:0};r=Ip(l,e),o=Ap(l,a),t=window}t&&(r!==this._verticalScrollDirection||o!==this._horizontalScrollDirection||t!==this._scrollNode)&&(this._verticalScrollDirection=r,this._horizontalScrollDirection=o,this._scrollNode=t,(r||o)&&t?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){const a=(0,z.fI)(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=a.msScrollSnapType||a.scrollSnapType||"",a.scrollSnapType=a.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){const a=(0,z.fI)(this.element);this._parentPositions.cache(this._scrollableElements),this._clientRect=this._parentPositions.positions.get(a).clientRect}_reset(){this._isDragging=!1;const a=(0,z.fI)(this.element).style;a.scrollSnapType=a.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(e=>e._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_isOverContainer(a,e){return null!=this._clientRect&&tl(this._clientRect,a,e)}_getSiblingContainerFromPosition(a,e,t){return this._siblings.find(r=>r._canReceive(a,e,t))}_canReceive(a,e,t){if(!this._clientRect||!tl(this._clientRect,e,t)||!this.enterPredicate(a,this))return!1;const r=this._getShadowRoot().elementFromPoint(e,t);if(!r)return!1;const o=(0,z.fI)(this.element);return r===o||o.contains(r)}_startReceiving(a,e){const t=this._activeSiblings;!t.has(a)&&e.every(r=>this.enterPredicate(r,this)||this._draggables.indexOf(r)>-1)&&(t.add(a),this._cacheParentPositions(),this._listenToScrollEvents(),this.receivingStarted.next({initiator:a,receiver:this,items:e}))}_stopReceiving(a){this._activeSiblings.delete(a),this._viewportScrollSubscription.unsubscribe(),this.receivingStopped.next({initiator:a,receiver:this})}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(a=>{if(this.isDragging()){const e=this._parentPositions.handleScroll(a);e&&this._sortStrategy.updateOnScroll(e.top,e.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){const a=(0,q.kV)((0,z.fI)(this.element));this._cachedShadowRoot=a||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){const a=this._sortStrategy.getActiveItemsSnapshot().filter(e=>e.isDragging());this._siblings.forEach(e=>e._startReceiving(this,a))}}function Ip(i,a){const{top:e,bottom:t,height:r}=i,o=.05*r;return a>=e-o&&a<=e+o?1:a>=t-o&&a<=t+o?2:0}function Ap(i,a){const{left:e,right:t,width:r}=i,o=.05*r;return a>=e-o&&a<=e+o?1:a>=t-o&&a<=t+o?2:0}const rs=(0,q.i$)({passive:!1,capture:!0});let GD=(()=>{class i{constructor(e,t){this._ngZone=e,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=[],this._globalListeners=new Map,this._draggingPredicate=r=>r.isDragging(),this.pointerMove=new S.Subject,this.pointerUp=new S.Subject,this.scroll=new S.Subject,this._preventDefaultWhileDragging=r=>{this._activeDragInstances.length>0&&r.preventDefault()},this._persistentTouchmoveListener=r=>{this._activeDragInstances.length>0&&(this._activeDragInstances.some(this._draggingPredicate)&&r.preventDefault(),this.pointerMove.next(r))},this._document=t}registerDropContainer(e){this._dropInstances.has(e)||this._dropInstances.add(e)}registerDragItem(e){this._dragInstances.add(e),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._persistentTouchmoveListener,rs)})}removeDropContainer(e){this._dropInstances.delete(e)}removeDragItem(e){this._dragInstances.delete(e),this.stopDragging(e),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,rs)}startDragging(e,t){if(!(this._activeDragInstances.indexOf(e)>-1)&&(this._activeDragInstances.push(e),1===this._activeDragInstances.length)){const r=t.type.startsWith("touch");this._globalListeners.set(r?"touchend":"mouseup",{handler:o=>this.pointerUp.next(o),options:!0}).set("scroll",{handler:o=>this.scroll.next(o),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:rs}),r||this._globalListeners.set("mousemove",{handler:o=>this.pointerMove.next(o),options:rs}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((o,s)=>{this._document.addEventListener(s,o.handler,o.options)})})}}stopDragging(e){const t=this._activeDragInstances.indexOf(e);t>-1&&(this._activeDragInstances.splice(t,1),0===this._activeDragInstances.length&&this._clearGlobalListeners())}isDragging(e){return this._activeDragInstances.indexOf(e)>-1}scrolled(e){const t=[this.scroll];return e&&e!==this._document&&t.push(new S.Observable(r=>this._ngZone.runOutsideAngular(()=>{const s=c=>{this._activeDragInstances.length&&r.next(c)};return e.addEventListener("scroll",s,!0),()=>{e.removeEventListener("scroll",s,!0)}}))),(0,S.merge)(...t)}ngOnDestroy(){this._dragInstances.forEach(e=>this.removeDragItem(e)),this._dropInstances.forEach(e=>this.removeDropContainer(e)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((e,t)=>{this._document.removeEventListener(t,e.handler,e.options)}),this._globalListeners.clear()}static#e=this.\u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(n.NgZone),n.\u0275\u0275inject(F.DOCUMENT))};static#t=this.\u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const KD={dragStartThreshold:5,pointerDirectionChangeThreshold:5};let il=(()=>{class i{constructor(e,t,r,o){this._document=e,this._ngZone=t,this._viewportRuler=r,this._dragDropRegistry=o}createDrag(e,t=KD){return new $D(e,t,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(e){return new zD(e,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}static#e=this.\u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(F.DOCUMENT),n.\u0275\u0275inject(n.NgZone),n.\u0275\u0275inject(Lt.rL),n.\u0275\u0275inject(GD))};static#t=this.\u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const rl=new n.InjectionToken("CDK_DRAG_PARENT"),ol=new n.InjectionToken("CdkDragHandle"),Tp=new n.InjectionToken("CdkDragPlaceholder"),Np=new n.InjectionToken("CdkDragPreview"),Lp=new n.InjectionToken("CDK_DRAG_CONFIG"),Bp=new n.InjectionToken("CdkDropList");let Op=(()=>{class i{static#e=this._dragInstances=[];get disabled(){return this._disabled||this.dropContainer&&this.dropContainer.disabled}set disabled(e){this._disabled=(0,z.Ig)(e),this._dragRef.disabled=this._disabled}constructor(e,t,r,o,s,c,l,u,d,f,p){this.element=e,this.dropContainer=t,this._ngZone=o,this._viewContainerRef=s,this._dir=l,this._changeDetectorRef=d,this._selfHandle=f,this._parentDrag=p,this._destroyed=new S.Subject,this.started=new n.EventEmitter,this.released=new n.EventEmitter,this.ended=new n.EventEmitter,this.entered=new n.EventEmitter,this.exited=new n.EventEmitter,this.dropped=new n.EventEmitter,this.moved=new S.Observable(m=>{const h=this._dragRef.moved.pipe((0,v.map)(g=>({source:this,pointerPosition:g.pointerPosition,event:g.event,delta:g.delta,distance:g.distance}))).subscribe(m);return()=>{h.unsubscribe()}}),this._dragRef=u.createDrag(e,{dragStartThreshold:c&&null!=c.dragStartThreshold?c.dragStartThreshold:5,pointerDirectionChangeThreshold:c&&null!=c.pointerDirectionChangeThreshold?c.pointerDirectionChangeThreshold:5,zIndex:c?.zIndex}),this._dragRef.data=this,i._dragInstances.push(this),c&&this._assignDefaults(c),t&&(this._dragRef._withDropContainer(t._dropListRef),t.addItem(this)),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}setFreeDragPosition(e){this._dragRef.setFreeDragPosition(e)}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe((0,v.take)(1),(0,v.takeUntil)(this._destroyed)).subscribe(()=>{this._updateRootElement(),this._setupHandlesListener(),this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)})})}ngOnChanges(e){const t=e.rootElementSelector,r=e.freeDragPosition;t&&!t.firstChange&&this._updateRootElement(),r&&!r.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this);const e=i._dragInstances.indexOf(this);e>-1&&i._dragInstances.splice(e,1),this._ngZone.runOutsideAngular(()=>{this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_updateRootElement(){const e=this.element.nativeElement;let t=e;this.rootElementSelector&&(t=void 0!==e.closest?e.closest(this.rootElementSelector):e.parentElement?.closest(this.rootElementSelector)),this._dragRef.withRootElement(t||e)}_getBoundaryElement(){const e=this.boundaryElement;return e?"string"==typeof e?this.element.nativeElement.closest(e):(0,z.fI)(e):null}_syncInputs(e){e.beforeStarted.subscribe(()=>{if(!e.isDragging()){const t=this._dir,r=this.dragStartDelay,o=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,s=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;e.disabled=this.disabled,e.lockAxis=this.lockAxis,e.dragStartDelay="object"==typeof r&&r?r:(0,z.su)(r),e.constrainPosition=this.constrainPosition,e.previewClass=this.previewClass,e.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(o).withPreviewTemplate(s).withPreviewContainer(this.previewContainer||"global"),t&&e.withDirection(t.value)}}),e.beforeStarted.pipe((0,v.take)(1)).subscribe(()=>{if(this._parentDrag)return void e.withParent(this._parentDrag._dragRef);let t=this.element.nativeElement.parentElement;for(;t;){if(t.classList.contains("cdk-drag")){e.withParent(i._dragInstances.find(r=>r.element.nativeElement===t)?._dragRef||null);break}t=t.parentElement}})}_handleEvents(e){e.started.subscribe(t=>{this.started.emit({source:this,event:t.event}),this._changeDetectorRef.markForCheck()}),e.released.subscribe(t=>{this.released.emit({source:this,event:t.event})}),e.ended.subscribe(t=>{this.ended.emit({source:this,distance:t.distance,dropPoint:t.dropPoint,event:t.event}),this._changeDetectorRef.markForCheck()}),e.entered.subscribe(t=>{this.entered.emit({container:t.container.data,item:this,currentIndex:t.currentIndex})}),e.exited.subscribe(t=>{this.exited.emit({container:t.container.data,item:this})}),e.dropped.subscribe(t=>{this.dropped.emit({previousIndex:t.previousIndex,currentIndex:t.currentIndex,previousContainer:t.previousContainer.data,container:t.container.data,isPointerOverContainer:t.isPointerOverContainer,item:this,distance:t.distance,dropPoint:t.dropPoint,event:t.event})})}_assignDefaults(e){const{lockAxis:t,dragStartDelay:r,constrainPosition:o,previewClass:s,boundaryElement:c,draggingDisabled:l,rootElementSelector:u,previewContainer:d}=e;this.disabled=l??!1,this.dragStartDelay=r||0,t&&(this.lockAxis=t),o&&(this.constrainPosition=o),s&&(this.previewClass=s),c&&(this.boundaryElement=c),u&&(this.rootElementSelector=u),d&&(this.previewContainer=d)}_setupHandlesListener(){this._handles.changes.pipe((0,v.startWith)(this._handles),(0,v.tap)(e=>{const t=e.filter(r=>r._parentDrag===this).map(r=>r.element);this._selfHandle&&this.rootElementSelector&&t.push(this.element),this._dragRef.withHandles(t)}),(0,v.switchMap)(e=>(0,S.merge)(...e.map(t=>t._stateChanges.pipe((0,v.startWith)(t))))),(0,v.takeUntil)(this._destroyed)).subscribe(e=>{const t=this._dragRef,r=e.element.nativeElement;e.disabled?t.disableHandle(r):t.enableHandle(r)})}static#t=this.\u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(n.ElementRef),n.\u0275\u0275directiveInject(Bp,12),n.\u0275\u0275directiveInject(F.DOCUMENT),n.\u0275\u0275directiveInject(n.NgZone),n.\u0275\u0275directiveInject(n.ViewContainerRef),n.\u0275\u0275directiveInject(Lp,8),n.\u0275\u0275directiveInject(pp.Is,8),n.\u0275\u0275directiveInject(il),n.\u0275\u0275directiveInject(n.ChangeDetectorRef),n.\u0275\u0275directiveInject(ol,10),n.\u0275\u0275directiveInject(rl,12))};static#n=this.\u0275dir=n.\u0275\u0275defineDirective({type:i,selectors:[["","cdkDrag",""]],contentQueries:function(t,r,o){if(1&t&&(n.\u0275\u0275contentQuery(o,Np,5),n.\u0275\u0275contentQuery(o,Tp,5),n.\u0275\u0275contentQuery(o,ol,5)),2&t){let s;n.\u0275\u0275queryRefresh(s=n.\u0275\u0275loadQuery())&&(r._previewTemplate=s.first),n.\u0275\u0275queryRefresh(s=n.\u0275\u0275loadQuery())&&(r._placeholderTemplate=s.first),n.\u0275\u0275queryRefresh(s=n.\u0275\u0275loadQuery())&&(r._handles=s)}},hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(t,r){2&t&&n.\u0275\u0275classProp("cdk-drag-disabled",r.disabled)("cdk-drag-dragging",r._dragRef.isDragging())},inputs:{data:["cdkDragData","data"],lockAxis:["cdkDragLockAxis","lockAxis"],rootElementSelector:["cdkDragRootElement","rootElementSelector"],boundaryElement:["cdkDragBoundary","boundaryElement"],dragStartDelay:["cdkDragStartDelay","dragStartDelay"],freeDragPosition:["cdkDragFreeDragPosition","freeDragPosition"],disabled:["cdkDragDisabled","disabled"],constrainPosition:["cdkDragConstrainPosition","constrainPosition"],previewClass:["cdkDragPreviewClass","previewClass"],previewContainer:["cdkDragPreviewContainer","previewContainer"]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],standalone:!0,features:[n.\u0275\u0275ProvidersFeature([{provide:rl,useExisting:i}]),n.\u0275\u0275NgOnChangesFeature]})}return i})();const al=new n.InjectionToken("CdkDropListGroup");let XD=0,Rp=(()=>{class i{static#e=this._dropLists=[];get disabled(){return this._disabled||!!this._group&&this._group.disabled}set disabled(e){this._dropListRef.disabled=this._disabled=(0,z.Ig)(e)}constructor(e,t,r,o,s,c,l){this.element=e,this._changeDetectorRef=r,this._scrollDispatcher=o,this._dir=s,this._group=c,this._destroyed=new S.Subject,this.connectedTo=[],this.id="cdk-drop-list-"+XD++,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.dropped=new n.EventEmitter,this.entered=new n.EventEmitter,this.exited=new n.EventEmitter,this.sorted=new n.EventEmitter,this._unsortedItems=new Set,this._dropListRef=t.createDropList(e),this._dropListRef.data=this,l&&this._assignDefaults(l),this._dropListRef.enterPredicate=(u,d)=>this.enterPredicate(u.data,d.data),this._dropListRef.sortPredicate=(u,d,f)=>this.sortPredicate(u,d.data,f.data),this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),i._dropLists.push(this),c&&c._items.add(this)}addItem(e){this._unsortedItems.add(e),this._dropListRef.isDragging()&&this._syncItemsWithRef()}removeItem(e){this._unsortedItems.delete(e),this._dropListRef.isDragging()&&this._syncItemsWithRef()}getSortedItems(){return Array.from(this._unsortedItems).sort((e,t)=>e._dragRef.getVisibleElement().compareDocumentPosition(t._dragRef.getVisibleElement())&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)}ngOnDestroy(){const e=i._dropLists.indexOf(this);e>-1&&i._dropLists.splice(e,1),this._group&&this._group._items.delete(this),this._unsortedItems.clear(),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}_setupInputSyncSubscription(e){this._dir&&this._dir.change.pipe((0,v.startWith)(this._dir.value),(0,v.takeUntil)(this._destroyed)).subscribe(t=>e.withDirection(t)),e.beforeStarted.subscribe(()=>{const t=(0,z.Eq)(this.connectedTo).map(r=>"string"==typeof r?i._dropLists.find(s=>s.id===r):r);if(this._group&&this._group._items.forEach(r=>{-1===t.indexOf(r)&&t.push(r)}),!this._scrollableParentsResolved){const r=this._scrollDispatcher.getAncestorScrollContainers(this.element).map(o=>o.getElementRef().nativeElement);this._dropListRef.withScrollableParents(r),this._scrollableParentsResolved=!0}e.disabled=this.disabled,e.lockAxis=this.lockAxis,e.sortingDisabled=(0,z.Ig)(this.sortingDisabled),e.autoScrollDisabled=(0,z.Ig)(this.autoScrollDisabled),e.autoScrollStep=(0,z.su)(this.autoScrollStep,2),e.connectedTo(t.filter(r=>r&&r!==this).map(r=>r._dropListRef)).withOrientation(this.orientation)})}_handleEvents(e){e.beforeStarted.subscribe(()=>{this._syncItemsWithRef(),this._changeDetectorRef.markForCheck()}),e.entered.subscribe(t=>{this.entered.emit({container:this,item:t.item.data,currentIndex:t.currentIndex})}),e.exited.subscribe(t=>{this.exited.emit({container:this,item:t.item.data}),this._changeDetectorRef.markForCheck()}),e.sorted.subscribe(t=>{this.sorted.emit({previousIndex:t.previousIndex,currentIndex:t.currentIndex,container:this,item:t.item.data})}),e.dropped.subscribe(t=>{this.dropped.emit({previousIndex:t.previousIndex,currentIndex:t.currentIndex,previousContainer:t.previousContainer.data,container:t.container.data,item:t.item.data,isPointerOverContainer:t.isPointerOverContainer,distance:t.distance,dropPoint:t.dropPoint,event:t.event}),this._changeDetectorRef.markForCheck()}),(0,S.merge)(e.receivingStarted,e.receivingStopped).subscribe(()=>this._changeDetectorRef.markForCheck())}_assignDefaults(e){const{lockAxis:t,draggingDisabled:r,sortingDisabled:o,listAutoScrollDisabled:s,listOrientation:c}=e;this.disabled=r??!1,this.sortingDisabled=o??!1,this.autoScrollDisabled=s??!1,this.orientation=c||"vertical",t&&(this.lockAxis=t)}_syncItemsWithRef(){this._dropListRef.withItems(this.getSortedItems().map(e=>e._dragRef))}static#t=this.\u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(n.ElementRef),n.\u0275\u0275directiveInject(il),n.\u0275\u0275directiveInject(n.ChangeDetectorRef),n.\u0275\u0275directiveInject(Lt.mF),n.\u0275\u0275directiveInject(pp.Is,8),n.\u0275\u0275directiveInject(al,12),n.\u0275\u0275directiveInject(Lp,8))};static#n=this.\u0275dir=n.\u0275\u0275defineDirective({type:i,selectors:[["","cdkDropList",""],["cdk-drop-list"]],hostAttrs:[1,"cdk-drop-list"],hostVars:7,hostBindings:function(t,r){2&t&&(n.\u0275\u0275attribute("id",r.id),n.\u0275\u0275classProp("cdk-drop-list-disabled",r.disabled)("cdk-drop-list-dragging",r._dropListRef.isDragging())("cdk-drop-list-receiving",r._dropListRef.isReceiving()))},inputs:{connectedTo:["cdkDropListConnectedTo","connectedTo"],data:["cdkDropListData","data"],orientation:["cdkDropListOrientation","orientation"],id:"id",lockAxis:["cdkDropListLockAxis","lockAxis"],disabled:["cdkDropListDisabled","disabled"],sortingDisabled:["cdkDropListSortingDisabled","sortingDisabled"],enterPredicate:["cdkDropListEnterPredicate","enterPredicate"],sortPredicate:["cdkDropListSortPredicate","sortPredicate"],autoScrollDisabled:["cdkDropListAutoScrollDisabled","autoScrollDisabled"],autoScrollStep:["cdkDropListAutoScrollStep","autoScrollStep"]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],standalone:!0,features:[n.\u0275\u0275ProvidersFeature([{provide:al,useValue:void 0},{provide:Bp,useExisting:i}])]})}return i})(),jp=(()=>{class i{static#e=this.\u0275fac=function(t){return new(t||i)};static#t=this.\u0275mod=n.\u0275\u0275defineNgModule({type:i});static#n=this.\u0275inj=n.\u0275\u0275defineInjector({providers:[il],imports:[Lt.ZD]})}return i})();function Xi(){return Xi=Object.assign?Object.assign.bind():function(i){for(var a=1;a<arguments.length;a++){var e=arguments[a];for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(i[t]=e[t])}return i},Xi.apply(this,arguments)}var kp={epsilon:1e-12,matrix:"Matrix",number:"number",precision:64,predictable:!1,randomSeed:null},Ee=function(a){if(a)throw new Error("The global config is readonly. \nPlease create a mathjs instance if you want to change the default configuration. \nExample:\n\n  import { create, all } from 'mathjs';\n  const mathjs = create(all);\n  mathjs.config({ number: 'BigNumber' });\n");return Object.freeze(kp)};Xi(Ee,kp,{MATRIX_OPTIONS:["Matrix","Array"],NUMBER_OPTIONS:["number","BigNumber","Fraction"]});var $p,Yi,vo=9e15,br=1e9,ll="0123456789abcdef",os="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",as="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",ul={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-vo,maxE:vo,crypto:!1},St=!0,ss="[DecimalError] ",Cr=ss+"Invalid argument: ",Up=ss+"Precision limit exceeded",Vp=ss+"crypto unavailable",zp="[object Decimal]",Kn=Math.floor,On=Math.pow,ew=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,tw=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,nw=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,Wp=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Mi=1e7,_t=7,rw=os.length-1,dl=as.length-1,Ne={toStringTag:zp};function $n(i){var a,e,t,r=i.length-1,o="",s=i[0];if(r>0){for(o+=s,a=1;a<r;a++)(e=_t-(t=i[a]+"").length)&&(o+=Mr(e)),o+=t;(e=_t-(t=(s=i[a])+"").length)&&(o+=Mr(e))}else if(0===s)return"0";for(;s%10==0;)s/=10;return o+s}function ni(i,a,e){if(i!==~~i||i<a||i>e)throw Error(Cr+i)}function ya(i,a,e,t){var r,o,s,c;for(o=i[0];o>=10;o/=10)--a;return--a<0?(a+=_t,r=0):(r=Math.ceil((a+1)/_t),a%=_t),o=On(10,_t-a),c=i[r]%o|0,null==t?a<3?(0==a?c=c/100|0:1==a&&(c=c/10|0),s=e<4&&99999==c||e>3&&49999==c||5e4==c||0==c):s=(e<4&&c+1==o||e>3&&c+1==o/2)&&(i[r+1]/o/100|0)==On(10,a-2)-1||(c==o/2||0==c)&&0==(i[r+1]/o/100|0):a<4?(0==a?c=c/1e3|0:1==a?c=c/100|0:2==a&&(c=c/10|0),s=(t||e<4)&&9999==c||!t&&e>3&&4999==c):s=((t||e<4)&&c+1==o||!t&&e>3&&c+1==o/2)&&(i[r+1]/o/1e3|0)==On(10,a-3)-1,s}function cs(i,a,e){for(var t,o,r=[0],s=0,c=i.length;s<c;){for(o=r.length;o--;)r[o]*=a;for(r[0]+=ll.indexOf(i.charAt(s++)),t=0;t<r.length;t++)r[t]>e-1&&(void 0===r[t+1]&&(r[t+1]=0),r[t+1]+=r[t]/e|0,r[t]%=e)}return r.reverse()}Ne.absoluteValue=Ne.abs=function(){var i=new this.constructor(this);return i.s<0&&(i.s=1),gt(i)},Ne.ceil=function(){return gt(new this.constructor(this),this.e+1,2)},Ne.clampedTo=Ne.clamp=function(i,a){var t=this,r=t.constructor;if(i=new r(i),a=new r(a),!i.s||!a.s)return new r(NaN);if(i.gt(a))throw Error(Cr+a);return t.cmp(i)<0?i:t.cmp(a)>0?a:new r(t)},Ne.comparedTo=Ne.cmp=function(i){var a,e,t,r,o=this,s=o.d,c=(i=new o.constructor(i)).d,l=o.s,u=i.s;if(!s||!c)return l&&u?l!==u?l:s===c?0:!s^l<0?1:-1:NaN;if(!s[0]||!c[0])return s[0]?l:c[0]?-u:0;if(l!==u)return l;if(o.e!==i.e)return o.e>i.e^l<0?1:-1;for(a=0,e=(t=s.length)<(r=c.length)?t:r;a<e;++a)if(s[a]!==c[a])return s[a]>c[a]^l<0?1:-1;return t===r?0:t>r^l<0?1:-1},Ne.cosine=Ne.cos=function(){var i,a,e=this,t=e.constructor;return e.d?e.d[0]?(a=t.rounding,t.precision=(i=t.precision)+Math.max(e.e,e.sd())+_t,t.rounding=1,e=function ow(i,a){var e,t,r;if(a.isZero())return a;(t=a.d.length)<32?r=(1/ds(4,e=Math.ceil(t/3))).toString():(e=16,r="2.3283064365386962890625e-10"),i.precision+=e,a=_o(i,1,a.times(r),new i(1));for(var o=e;o--;){var s=a.times(a);a=s.times(s).minus(s).times(8).plus(1)}return i.precision-=e,a}(t,Jp(t,e)),t.precision=i,t.rounding=a,gt(2==Yi||3==Yi?e.neg():e,i,a,!0)):new t(1):new t(NaN)},Ne.cubeRoot=Ne.cbrt=function(){var i,a,e,t,r,o,s,c,l,u,d=this,f=d.constructor;if(!d.isFinite()||d.isZero())return new f(d);for(St=!1,(o=d.s*On(d.s*d,1/3))&&Math.abs(o)!=1/0?t=new f(o.toString()):(e=$n(d.d),(o=((i=d.e)-e.length+1)%3)&&(e+=1==o||-2==o?"0":"00"),o=On(e,1/3),i=Kn((i+1)/3)-(i%3==(i<0?-1:2)),(t=new f(e=o==1/0?"5e"+i:(e=o.toExponential()).slice(0,e.indexOf("e")+1)+i)).s=d.s),s=(i=f.precision)+3;;)if(u=(l=(c=t).times(c).times(c)).plus(d),t=un(u.plus(d).times(c),u.plus(l),s+2,1),$n(c.d).slice(0,s)===(e=$n(t.d)).slice(0,s)){if("9999"!=(e=e.slice(s-3,s+1))&&(r||"4999"!=e)){(!+e||!+e.slice(1)&&"5"==e.charAt(0))&&(gt(t,i+1,1),a=!t.times(t).times(t).eq(d));break}if(!r&&(gt(c,i+1,0),c.times(c).times(c).eq(d))){t=c;break}s+=4,r=1}return St=!0,gt(t,i,f.rounding,a)},Ne.decimalPlaces=Ne.dp=function(){var i,a=this.d,e=NaN;if(a){if(e=((i=a.length-1)-Kn(this.e/_t))*_t,i=a[i])for(;i%10==0;i/=10)e--;e<0&&(e=0)}return e},Ne.dividedBy=Ne.div=function(i){return un(this,new this.constructor(i))},Ne.dividedToIntegerBy=Ne.divToInt=function(i){var e=this.constructor;return gt(un(this,new e(i),0,1,1),e.precision,e.rounding)},Ne.equals=Ne.eq=function(i){return 0===this.cmp(i)},Ne.floor=function(){return gt(new this.constructor(this),this.e+1,3)},Ne.greaterThan=Ne.gt=function(i){return this.cmp(i)>0},Ne.greaterThanOrEqualTo=Ne.gte=function(i){var a=this.cmp(i);return 1==a||0===a},Ne.hyperbolicCosine=Ne.cosh=function(){var i,a,e,t,r,o=this,s=o.constructor,c=new s(1);if(!o.isFinite())return new s(o.s?1/0:NaN);if(o.isZero())return c;t=s.rounding,s.precision=(e=s.precision)+Math.max(o.e,o.sd())+4,s.rounding=1,(r=o.d.length)<32?a=(1/ds(4,i=Math.ceil(r/3))).toString():(i=16,a="2.3283064365386962890625e-10"),o=_o(s,1,o.times(a),new s(1),!0);for(var l,u=i,d=new s(8);u--;)l=o.times(o),o=c.minus(l.times(d.minus(l.times(d))));return gt(o,s.precision=e,s.rounding=t,!0)},Ne.hyperbolicSine=Ne.sinh=function(){var i,a,e,t,r=this,o=r.constructor;if(!r.isFinite()||r.isZero())return new o(r);if(e=o.rounding,o.precision=(a=o.precision)+Math.max(r.e,r.sd())+4,o.rounding=1,(t=r.d.length)<3)r=_o(o,2,r,r,!0);else{i=1.4*Math.sqrt(t),r=_o(o,2,r=r.times(1/ds(5,i=i>16?16:0|i)),r,!0);for(var s,c=new o(5),l=new o(16),u=new o(20);i--;)s=r.times(r),r=r.times(c.plus(s.times(l.times(s).plus(u))))}return o.precision=a,o.rounding=e,gt(r,a,e,!0)},Ne.hyperbolicTangent=Ne.tanh=function(){var i,a,e=this,t=e.constructor;return e.isFinite()?e.isZero()?new t(e):(a=t.rounding,t.precision=(i=t.precision)+7,t.rounding=1,un(e.sinh(),e.cosh(),t.precision=i,t.rounding=a)):new t(e.s)},Ne.inverseCosine=Ne.acos=function(){var i,a=this,e=a.constructor,t=a.abs().cmp(1),r=e.precision,o=e.rounding;return-1!==t?0===t?a.isNeg()?Si(e,r,o):new e(0):new e(NaN):a.isZero()?Si(e,r+4,o).times(.5):(e.precision=r+6,e.rounding=1,a=a.asin(),i=Si(e,r+4,o).times(.5),e.precision=r,e.rounding=o,i.minus(a))},Ne.inverseHyperbolicCosine=Ne.acosh=function(){var i,a,e=this,t=e.constructor;return e.lte(1)?new t(e.eq(1)?0:NaN):e.isFinite()?(a=t.rounding,t.precision=(i=t.precision)+Math.max(Math.abs(e.e),e.sd())+4,t.rounding=1,St=!1,e=e.times(e).minus(1).sqrt().plus(e),St=!0,t.precision=i,t.rounding=a,e.ln()):new t(e)},Ne.inverseHyperbolicSine=Ne.asinh=function(){var i,a,e=this,t=e.constructor;return!e.isFinite()||e.isZero()?new t(e):(a=t.rounding,t.precision=(i=t.precision)+2*Math.max(Math.abs(e.e),e.sd())+6,t.rounding=1,St=!1,e=e.times(e).plus(1).sqrt().plus(e),St=!0,t.precision=i,t.rounding=a,e.ln())},Ne.inverseHyperbolicTangent=Ne.atanh=function(){var i,a,e,t,r=this,o=r.constructor;return r.isFinite()?r.e>=0?new o(r.abs().eq(1)?r.s/0:r.isZero()?r:NaN):(i=o.precision,a=o.rounding,t=r.sd(),Math.max(t,i)<2*-r.e-1?gt(new o(r),i,a,!0):(o.precision=e=t-r.e,r=un(r.plus(1),new o(1).minus(r),e+i,1),o.precision=i+4,o.rounding=1,r=r.ln(),o.precision=i,o.rounding=a,r.times(.5))):new o(NaN)},Ne.inverseSine=Ne.asin=function(){var i,a,e,t,r=this,o=r.constructor;return r.isZero()?new o(r):(a=r.abs().cmp(1),e=o.precision,t=o.rounding,-1!==a?0===a?((i=Si(o,e+4,t).times(.5)).s=r.s,i):new o(NaN):(o.precision=e+6,o.rounding=1,r=r.div(new o(1).minus(r.times(r)).sqrt().plus(1)).atan(),o.precision=e,o.rounding=t,r.times(2)))},Ne.inverseTangent=Ne.atan=function(){var i,a,e,t,r,o,s,c,l,u=this,d=u.constructor,f=d.precision,p=d.rounding;if(u.isFinite()){if(u.isZero())return new d(u);if(u.abs().eq(1)&&f+4<=dl)return(s=Si(d,f+4,p).times(.25)).s=u.s,s}else{if(!u.s)return new d(NaN);if(f+4<=dl)return(s=Si(d,f+4,p).times(.5)).s=u.s,s}for(d.precision=c=f+10,d.rounding=1,i=e=Math.min(28,c/_t+2|0);i;--i)u=u.div(u.times(u).plus(1).sqrt().plus(1));for(St=!1,a=Math.ceil(c/_t),t=1,l=u.times(u),s=new d(u),r=u;-1!==i;)if(r=r.times(l),o=s.minus(r.div(t+=2)),r=r.times(l),void 0!==(s=o.plus(r.div(t+=2))).d[a])for(i=a;s.d[i]===o.d[i]&&i--;);return e&&(s=s.times(2<<e-1)),St=!0,gt(s,d.precision=f,d.rounding=p,!0)},Ne.isFinite=function(){return!!this.d},Ne.isInteger=Ne.isInt=function(){return!!this.d&&Kn(this.e/_t)>this.d.length-2},Ne.isNaN=function(){return!this.s},Ne.isNegative=Ne.isNeg=function(){return this.s<0},Ne.isPositive=Ne.isPos=function(){return this.s>0},Ne.isZero=function(){return!!this.d&&0===this.d[0]},Ne.lessThan=Ne.lt=function(i){return this.cmp(i)<0},Ne.lessThanOrEqualTo=Ne.lte=function(i){return this.cmp(i)<1},Ne.logarithm=Ne.log=function(i){var a,e,t,r,o,s,c,l,u=this,d=u.constructor,f=d.precision,p=d.rounding;if(null==i)i=new d(10),a=!0;else{if(e=(i=new d(i)).d,i.s<0||!e||!e[0]||i.eq(1))return new d(NaN);a=i.eq(10)}if(e=u.d,u.s<0||!e||!e[0]||u.eq(1))return new d(e&&!e[0]?-1/0:1!=u.s?NaN:e?0:1/0);if(a)if(e.length>1)o=!0;else{for(r=e[0];r%10==0;)r/=10;o=1!==r}if(St=!1,s=Sr(u,c=f+5),t=a?us(d,c+10):Sr(i,c),ya((l=un(s,t,c,1)).d,r=f,p))do{if(s=Sr(u,c+=10),t=a?us(d,c+10):Sr(i,c),l=un(s,t,c,1),!o){+$n(l.d).slice(r+1,r+15)+1==1e14&&(l=gt(l,f+1,0));break}}while(ya(l.d,r+=10,p));return St=!0,gt(l,f,p)},Ne.minus=Ne.sub=function(i){var a,e,t,r,o,s,c,l,u,d,f,p,m=this,h=m.constructor;if(i=new h(i),!m.d||!i.d)return m.s&&i.s?m.d?i.s=-i.s:i=new h(i.d||m.s!==i.s?m:NaN):i=new h(NaN),i;if(m.s!=i.s)return i.s=-i.s,m.plus(i);if(p=i.d,c=h.precision,l=h.rounding,!(u=m.d)[0]||!p[0]){if(p[0])i.s=-i.s;else{if(!u[0])return new h(3===l?-0:0);i=new h(m)}return St?gt(i,c,l):i}if(e=Kn(i.e/_t),d=Kn(m.e/_t),u=u.slice(),o=d-e){for((f=o<0)?(a=u,o=-o,s=p.length):(a=p,e=d,s=u.length),o>(t=Math.max(Math.ceil(c/_t),s)+2)&&(o=t,a.length=1),a.reverse(),t=o;t--;)a.push(0);a.reverse()}else{for((f=(t=u.length)<(s=p.length))&&(s=t),t=0;t<s;t++)if(u[t]!=p[t]){f=u[t]<p[t];break}o=0}for(f&&(a=u,u=p,p=a,i.s=-i.s),t=p.length-(s=u.length);t>0;--t)u[s++]=0;for(t=p.length;t>o;){if(u[--t]<p[t]){for(r=t;r&&0===u[--r];)u[r]=Mi-1;--u[r],u[t]+=Mi}u[t]-=p[t]}for(;0===u[--s];)u.pop();for(;0===u[0];u.shift())--e;return u[0]?(i.d=u,i.e=ls(u,e),St?gt(i,c,l):i):new h(3===l?-0:0)},Ne.modulo=Ne.mod=function(i){var a,e=this,t=e.constructor;return i=new t(i),!e.d||!i.s||i.d&&!i.d[0]?new t(NaN):!i.d||e.d&&!e.d[0]?gt(new t(e),t.precision,t.rounding):(St=!1,9==t.modulo?(a=un(e,i.abs(),0,3,1)).s*=i.s:a=un(e,i,0,t.modulo,1),a=a.times(i),St=!0,e.minus(a))},Ne.naturalExponential=Ne.exp=function(){return fl(this)},Ne.naturalLogarithm=Ne.ln=function(){return Sr(this)},Ne.negated=Ne.neg=function(){var i=new this.constructor(this);return i.s=-i.s,gt(i)},Ne.plus=Ne.add=function(i){var a,e,t,r,o,s,c,l,u,d,f=this,p=f.constructor;if(i=new p(i),!f.d||!i.d)return f.s&&i.s?f.d||(i=new p(i.d||f.s===i.s?f:NaN)):i=new p(NaN),i;if(f.s!=i.s)return i.s=-i.s,f.minus(i);if(d=i.d,c=p.precision,l=p.rounding,!(u=f.d)[0]||!d[0])return d[0]||(i=new p(f)),St?gt(i,c,l):i;if(o=Kn(f.e/_t),t=Kn(i.e/_t),u=u.slice(),r=o-t){for(r<0?(e=u,r=-r,s=d.length):(e=d,t=o,s=u.length),r>(s=(o=Math.ceil(c/_t))>s?o+1:s+1)&&(r=s,e.length=1),e.reverse();r--;)e.push(0);e.reverse()}for((s=u.length)-(r=d.length)<0&&(r=s,e=d,d=u,u=e),a=0;r;)a=(u[--r]=u[r]+d[r]+a)/Mi|0,u[r]%=Mi;for(a&&(u.unshift(a),++t),s=u.length;0==u[--s];)u.pop();return i.d=u,i.e=ls(u,t),St?gt(i,c,l):i},Ne.precision=Ne.sd=function(i){var a,e=this;if(void 0!==i&&i!==!!i&&1!==i&&0!==i)throw Error(Cr+i);return e.d?(a=Gp(e.d),i&&e.e+1>a&&(a=e.e+1)):a=NaN,a},Ne.round=function(){var i=this,a=i.constructor;return gt(new a(i),i.e+1,a.rounding)},Ne.sine=Ne.sin=function(){var i,a,e=this,t=e.constructor;return e.isFinite()?e.isZero()?new t(e):(a=t.rounding,t.precision=(i=t.precision)+Math.max(e.e,e.sd())+_t,t.rounding=1,e=function sw(i,a){var e,t=a.d.length;if(t<3)return a.isZero()?a:_o(i,2,a,a);e=1.4*Math.sqrt(t),a=_o(i,2,a=a.times(1/ds(5,e=e>16?16:0|e)),a);for(var r,o=new i(5),s=new i(16),c=new i(20);e--;)r=a.times(a),a=a.times(o.plus(r.times(s.times(r).minus(c))));return a}(t,Jp(t,e)),t.precision=i,t.rounding=a,gt(Yi>2?e.neg():e,i,a,!0)):new t(NaN)},Ne.squareRoot=Ne.sqrt=function(){var i,a,e,t,r,o,s=this,c=s.d,l=s.e,u=s.s,d=s.constructor;if(1!==u||!c||!c[0])return new d(!u||u<0&&(!c||c[0])?NaN:c?s:1/0);for(St=!1,0==(u=Math.sqrt(+s))||u==1/0?(((a=$n(c)).length+l)%2==0&&(a+="0"),u=Math.sqrt(a),l=Kn((l+1)/2)-(l<0||l%2),t=new d(a=u==1/0?"5e"+l:(a=u.toExponential()).slice(0,a.indexOf("e")+1)+l)):t=new d(u.toString()),e=(l=d.precision)+3;;)if(t=(o=t).plus(un(s,o,e+2,1)).times(.5),$n(o.d).slice(0,e)===(a=$n(t.d)).slice(0,e)){if("9999"!=(a=a.slice(e-3,e+1))&&(r||"4999"!=a)){(!+a||!+a.slice(1)&&"5"==a.charAt(0))&&(gt(t,l+1,1),i=!t.times(t).eq(s));break}if(!r&&(gt(o,l+1,0),o.times(o).eq(s))){t=o;break}e+=4,r=1}return St=!0,gt(t,l,d.rounding,i)},Ne.tangent=Ne.tan=function(){var i,a,e=this,t=e.constructor;return e.isFinite()?e.isZero()?new t(e):(a=t.rounding,t.precision=(i=t.precision)+10,t.rounding=1,(e=e.sin()).s=1,e=un(e,new t(1).minus(e.times(e)).sqrt(),i+10,0),t.precision=i,t.rounding=a,gt(2==Yi||4==Yi?e.neg():e,i,a,!0)):new t(NaN)},Ne.times=Ne.mul=function(i){var a,e,t,r,o,s,c,l,u,d=this,f=d.constructor,p=d.d,m=(i=new f(i)).d;if(i.s*=d.s,!(p&&p[0]&&m&&m[0]))return new f(!i.s||p&&!p[0]&&!m||m&&!m[0]&&!p?NaN:p&&m?0*i.s:i.s/0);for(e=Kn(d.e/_t)+Kn(i.e/_t),(l=p.length)<(u=m.length)&&(o=p,p=m,m=o,s=l,l=u,u=s),o=[],t=s=l+u;t--;)o.push(0);for(t=u;--t>=0;){for(a=0,r=l+t;r>t;)c=o[r]+m[t]*p[r-t-1]+a,o[r--]=c%Mi|0,a=c/Mi|0;o[r]=(o[r]+a)%Mi|0}for(;!o[--s];)o.pop();return a?++e:o.shift(),i.d=o,i.e=ls(o,e),St?gt(i,f.precision,f.rounding):i},Ne.toBinary=function(i,a){return ml(this,2,i,a)},Ne.toDecimalPlaces=Ne.toDP=function(i,a){var e=this,t=e.constructor;return e=new t(e),void 0===i?e:(ni(i,0,br),void 0===a?a=t.rounding:ni(a,0,8),gt(e,i+e.e+1,a))},Ne.toExponential=function(i,a){var e,t=this,r=t.constructor;return void 0===i?e=Bi(t,!0):(ni(i,0,br),void 0===a?a=r.rounding:ni(a,0,8),e=Bi(t=gt(new r(t),i+1,a),!0,i+1)),t.isNeg()&&!t.isZero()?"-"+e:e},Ne.toFixed=function(i,a){var e,t,r=this,o=r.constructor;return void 0===i?e=Bi(r):(ni(i,0,br),void 0===a?a=o.rounding:ni(a,0,8),e=Bi(t=gt(new o(r),i+r.e+1,a),!1,i+t.e+1)),r.isNeg()&&!r.isZero()?"-"+e:e},Ne.toFraction=function(i){var a,e,t,r,o,s,c,l,u,d,f,p,m=this,h=m.d,g=m.constructor;if(!h)return new g(m);if(u=e=new g(1),t=l=new g(0),o=(a=new g(t)).e=Gp(h)-m.e-1,a.d[0]=On(10,(s=o%_t)<0?_t+s:s),null==i)i=o>0?a:u;else{if(!(c=new g(i)).isInt()||c.lt(u))throw Error(Cr+c);i=c.gt(a)?o>0?a:u:c}for(St=!1,c=new g($n(h)),d=g.precision,g.precision=o=h.length*_t*2;f=un(c,a,0,1,1),1!=(r=e.plus(f.times(t))).cmp(i);)e=t,t=r,u=l.plus(f.times(r=u)),l=r,a=c.minus(f.times(r=a)),c=r;return r=un(i.minus(e),t,0,1,1),l=l.plus(r.times(u)),e=e.plus(r.times(t)),l.s=u.s=m.s,p=un(u,t,o,1).minus(m).abs().cmp(un(l,e,o,1).minus(m).abs())<1?[u,t]:[l,e],g.precision=d,St=!0,p},Ne.toHexadecimal=Ne.toHex=function(i,a){return ml(this,16,i,a)},Ne.toNearest=function(i,a){var e=this,t=e.constructor;if(e=new t(e),null==i){if(!e.d)return e;i=new t(1),a=t.rounding}else{if(i=new t(i),void 0===a?a=t.rounding:ni(a,0,8),!e.d)return i.s?e:i;if(!i.d)return i.s&&(i.s=e.s),i}return i.d[0]?(St=!1,e=un(e,i,0,a,1).times(i),St=!0,gt(e)):(i.s=e.s,e=i),e},Ne.toNumber=function(){return+this},Ne.toOctal=function(i,a){return ml(this,8,i,a)},Ne.toPower=Ne.pow=function(i){var a,e,t,r,o,s,c=this,l=c.constructor,u=+(i=new l(i));if(!(c.d&&i.d&&c.d[0]&&i.d[0]))return new l(On(+c,u));if((c=new l(c)).eq(1))return c;if(t=l.precision,o=l.rounding,i.eq(1))return gt(c,t,o);if((a=Kn(i.e/_t))>=i.d.length-1&&(e=u<0?-u:u)<=9007199254740991)return r=Kp(l,c,e,t),i.s<0?new l(1).div(r):gt(r,t,o);if((s=c.s)<0){if(a<i.d.length-1)return new l(NaN);if(1&i.d[a]||(s=1),0==c.e&&1==c.d[0]&&1==c.d.length)return c.s=s,c}return(a=0!=(e=On(+c,u))&&isFinite(e)?new l(e+"").e:Kn(u*(Math.log("0."+$n(c.d))/Math.LN10+c.e+1)))>l.maxE+1||a<l.minE-1?new l(a>0?s/0:0):(St=!1,l.rounding=c.s=1,e=Math.min(12,(a+"").length),(r=fl(i.times(Sr(c,t+e)),t)).d&&ya((r=gt(r,t+5,1)).d,t,o)&&+$n((r=gt(fl(i.times(Sr(c,(a=t+10)+e)),a),a+5,1)).d).slice(t+1,t+15)+1==1e14&&(r=gt(r,t+1,0)),r.s=s,St=!0,l.rounding=o,gt(r,t,o))},Ne.toPrecision=function(i,a){var e,t=this,r=t.constructor;return void 0===i?e=Bi(t,t.e<=r.toExpNeg||t.e>=r.toExpPos):(ni(i,1,br),void 0===a?a=r.rounding:ni(a,0,8),e=Bi(t=gt(new r(t),i,a),i<=t.e||t.e<=r.toExpNeg,i)),t.isNeg()&&!t.isZero()?"-"+e:e},Ne.toSignificantDigits=Ne.toSD=function(i,a){var t=this.constructor;return void 0===i?(i=t.precision,a=t.rounding):(ni(i,1,br),void 0===a?a=t.rounding:ni(a,0,8)),gt(new t(this),i,a)},Ne.toString=function(){var i=this,a=i.constructor,e=Bi(i,i.e<=a.toExpNeg||i.e>=a.toExpPos);return i.isNeg()&&!i.isZero()?"-"+e:e},Ne.truncated=Ne.trunc=function(){return gt(new this.constructor(this),this.e+1,1)},Ne.valueOf=Ne.toJSON=function(){var i=this,a=i.constructor,e=Bi(i,i.e<=a.toExpNeg||i.e>=a.toExpPos);return i.isNeg()?"-"+e:e};var un=function(){function i(t,r,o){var s,c=0,l=t.length;for(t=t.slice();l--;)t[l]=(s=t[l]*r+c)%o|0,c=s/o|0;return c&&t.unshift(c),t}function a(t,r,o,s){var c,l;if(o!=s)l=o>s?1:-1;else for(c=l=0;c<o;c++)if(t[c]!=r[c]){l=t[c]>r[c]?1:-1;break}return l}function e(t,r,o,s){for(var c=0;o--;)t[o]-=c,t[o]=(c=t[o]<r[o]?1:0)*s+t[o]-r[o];for(;!t[0]&&t.length>1;)t.shift()}return function(t,r,o,s,c,l){var u,d,f,p,m,h,g,b,_,D,y,w,x,C,I,N,B,E,j,P,G=t.constructor,Q=t.s==r.s?1:-1,Y=t.d,J=r.d;if(!(Y&&Y[0]&&J&&J[0]))return new G(t.s&&r.s&&(Y?!J||Y[0]!=J[0]:J)?Y&&0==Y[0]||!J?0*Q:Q/0:NaN);for(l?(m=1,d=t.e-r.e):(l=Mi,d=Kn(t.e/(m=_t))-Kn(r.e/m)),j=J.length,B=Y.length,D=(_=new G(Q)).d=[],f=0;J[f]==(Y[f]||0);f++);if(J[f]>(Y[f]||0)&&d--,null==o?(C=o=G.precision,s=G.rounding):C=c?o+(t.e-r.e)+1:o,C<0)D.push(1),h=!0;else{if(C=C/m+2|0,f=0,1==j){for(p=0,J=J[0],C++;(f<B||p)&&C--;f++)D[f]=(I=p*l+(Y[f]||0))/J|0,p=I%J|0;h=p||f<B}else{for((p=l/(J[0]+1)|0)>1&&(J=i(J,p,l),Y=i(Y,p,l),j=J.length,B=Y.length),N=j,w=(y=Y.slice(0,j)).length;w<j;)y[w++]=0;(P=J.slice()).unshift(0),E=J[0],J[1]>=l/2&&++E;do{p=0,(u=a(J,y,j,w))<0?(x=y[0],j!=w&&(x=x*l+(y[1]||0)),(p=x/E|0)>1?(p>=l&&(p=l-1),1==(u=a(g=i(J,p,l),y,b=g.length,w=y.length))&&(p--,e(g,j<b?P:J,b,l))):(0==p&&(u=p=1),g=J.slice()),(b=g.length)<w&&g.unshift(0),e(y,g,w,l),-1==u&&(u=a(J,y,j,w=y.length))<1&&(p++,e(y,j<w?P:J,w,l)),w=y.length):0===u&&(p++,y=[0]),D[f++]=p,u&&y[0]?y[w++]=Y[N]||0:(y=[Y[N]],w=1)}while((N++<B||void 0!==y[0])&&C--);h=void 0!==y[0]}D[0]||D.shift()}if(1==m)_.e=d,$p=h;else{for(f=1,p=D[0];p>=10;p/=10)f++;_.e=f+d*m-1,gt(_,c?o+_.e+1:o,s,h)}return _}}();function gt(i,a,e,t){var r,o,s,c,l,u,d,f,p,m=i.constructor;e:if(null!=a){if(!(f=i.d))return i;for(r=1,c=f[0];c>=10;c/=10)r++;if((o=a-r)<0)o+=_t,l=(d=f[p=0])/On(10,r-(s=a)-1)%10|0;else if((p=Math.ceil((o+1)/_t))>=(c=f.length)){if(!t)break e;for(;c++<=p;)f.push(0);d=l=0,r=1,s=(o%=_t)-_t+1}else{for(d=c=f[p],r=1;c>=10;c/=10)r++;l=(s=(o%=_t)-_t+r)<0?0:d/On(10,r-s-1)%10|0}if(t=t||a<0||void 0!==f[p+1]||(s<0?d:d%On(10,r-s-1)),u=e<4?(l||t)&&(0==e||e==(i.s<0?3:2)):l>5||5==l&&(4==e||t||6==e&&(o>0?s>0?d/On(10,r-s):0:f[p-1])%10&1||e==(i.s<0?8:7)),a<1||!f[0])return f.length=0,u?(f[0]=On(10,(_t-(a-=i.e+1)%_t)%_t),i.e=-a||0):f[0]=i.e=0,i;if(0==o?(f.length=p,c=1,p--):(f.length=p+1,c=On(10,_t-o),f[p]=s>0?(d/On(10,r-s)%On(10,s)|0)*c:0),u)for(;;){if(0==p){for(o=1,s=f[0];s>=10;s/=10)o++;for(s=f[0]+=c,c=1;s>=10;s/=10)c++;o!=c&&(i.e++,f[0]==Mi&&(f[0]=1));break}if(f[p]+=c,f[p]!=Mi)break;f[p--]=0,c=1}for(o=f.length;0===f[--o];)f.pop()}return St&&(i.e>m.maxE?(i.d=null,i.e=NaN):i.e<m.minE&&(i.e=0,i.d=[0])),i}function Bi(i,a,e){if(!i.isFinite())return qp(i);var t,r=i.e,o=$n(i.d),s=o.length;return a?(e&&(t=e-s)>0?o=o.charAt(0)+"."+o.slice(1)+Mr(t):s>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(i.e<0?"e":"e+")+i.e):r<0?(o="0."+Mr(-r-1)+o,e&&(t=e-s)>0&&(o+=Mr(t))):r>=s?(o+=Mr(r+1-s),e&&(t=e-r-1)>0&&(o=o+"."+Mr(t))):((t=r+1)<s&&(o=o.slice(0,t)+"."+o.slice(t)),e&&(t=e-s)>0&&(r+1===s&&(o+="."),o+=Mr(t))),o}function ls(i,a){var e=i[0];for(a*=_t;e>=10;e/=10)a++;return a}function us(i,a,e){if(a>rw)throw St=!0,e&&(i.precision=e),Error(Up);return gt(new i(os),a,1,!0)}function Si(i,a,e){if(a>dl)throw Error(Up);return gt(new i(as),a,e,!0)}function Gp(i){var a=i.length-1,e=a*_t+1;if(a=i[a]){for(;a%10==0;a/=10)e--;for(a=i[0];a>=10;a/=10)e++}return e}function Mr(i){for(var a="";i--;)a+="0";return a}function Kp(i,a,e,t){var r,o=new i(1),s=Math.ceil(t/_t+4);for(St=!1;;){if(e%2&&Qp((o=o.times(a)).d,s)&&(r=!0),0===(e=Kn(e/2))){e=o.d.length-1,r&&0===o.d[e]&&++o.d[e];break}Qp((a=a.times(a)).d,s)}return St=!0,o}function Hp(i){return 1&i.d[i.d.length-1]}function Zp(i,a,e){for(var t,r=new i(a[0]),o=0;++o<a.length;){if(!(t=new i(a[o])).s){r=t;break}r[e](t)&&(r=t)}return r}function fl(i,a){var e,t,r,o,s,c,l,u=0,d=0,f=0,p=i.constructor,m=p.rounding,h=p.precision;if(!i.d||!i.d[0]||i.e>17)return new p(i.d?i.d[0]?i.s<0?0:1/0:1:i.s?i.s<0?0:i:NaN);for(null==a?(St=!1,l=h):l=a,c=new p(.03125);i.e>-2;)i=i.times(c),f+=5;for(l+=t=Math.log(On(2,f))/Math.LN10*2+5|0,e=o=s=new p(1),p.precision=l;;){if(o=gt(o.times(i),l,1),e=e.times(++d),$n((c=s.plus(un(o,e,l,1))).d).slice(0,l)===$n(s.d).slice(0,l)){for(r=f;r--;)s=gt(s.times(s),l,1);if(null!=a)return p.precision=h,s;if(!(u<3&&ya(s.d,l-t,m,u)))return gt(s,p.precision=h,m,St=!0);p.precision=l+=10,e=o=c=new p(1),d=0,u++}s=c}}function Sr(i,a){var e,t,r,o,s,c,l,u,d,f,p,m=1,g=i,b=g.d,_=g.constructor,D=_.rounding,y=_.precision;if(g.s<0||!b||!b[0]||!g.e&&1==b[0]&&1==b.length)return new _(b&&!b[0]?-1/0:1!=g.s?NaN:b?0:g);if(null==a?(St=!1,d=y):d=a,_.precision=d+=10,t=(e=$n(b)).charAt(0),!(Math.abs(o=g.e)<15e14))return u=us(_,d+2,y).times(o+""),g=Sr(new _(t+"."+e.slice(1)),d-10).plus(u),_.precision=y,null==a?gt(g,y,D,St=!0):g;for(;t<7&&1!=t||1==t&&e.charAt(1)>3;)t=(e=$n((g=g.times(i)).d)).charAt(0),m++;for(o=g.e,t>1?(g=new _("0."+e),o++):g=new _(t+"."+e.slice(1)),f=g,l=s=g=un(g.minus(1),g.plus(1),d,1),p=gt(g.times(g),d,1),r=3;;){if(s=gt(s.times(p),d,1),$n((u=l.plus(un(s,new _(r),d,1))).d).slice(0,d)===$n(l.d).slice(0,d)){if(l=l.times(2),0!==o&&(l=l.plus(us(_,d+2,y).times(o+""))),l=un(l,new _(m),d,1),null!=a)return _.precision=y,l;if(!ya(l.d,d-10,D,c))return gt(l,_.precision=y,D,St=!0);_.precision=d+=10,u=s=g=un(f.minus(1),f.plus(1),d,1),p=gt(g.times(g),d,1),r=c=1}l=u,r+=2}}function qp(i){return String(i.s*i.s/0)}function pl(i,a){var e,t,r;for((e=a.indexOf("."))>-1&&(a=a.replace(".","")),(t=a.search(/e/i))>0?(e<0&&(e=t),e+=+a.slice(t+1),a=a.substring(0,t)):e<0&&(e=a.length),t=0;48===a.charCodeAt(t);t++);for(r=a.length;48===a.charCodeAt(r-1);--r);if(a=a.slice(t,r)){if(r-=t,i.e=e=e-t-1,i.d=[],t=(e+1)%_t,e<0&&(t+=_t),t<r){for(t&&i.d.push(+a.slice(0,t)),r-=_t;t<r;)i.d.push(+a.slice(t,t+=_t));a=a.slice(t),t=_t-a.length}else t-=r;for(;t--;)a+="0";i.d.push(+a),St&&(i.e>i.constructor.maxE?(i.d=null,i.e=NaN):i.e<i.constructor.minE&&(i.e=0,i.d=[0]))}else i.e=0,i.d=[0];return i}function _o(i,a,e,t,r){var o,s,c,l,d=i.precision,f=Math.ceil(d/_t);for(St=!1,l=e.times(e),c=new i(t);;){if(s=un(c.times(l),new i(a++*a++),d,1),c=r?t.plus(s):t.minus(s),t=un(s.times(l),new i(a++*a++),d,1),void 0!==(s=c.plus(t)).d[f]){for(o=f;s.d[o]===c.d[o]&&o--;);if(-1==o)break}o=c,c=t,t=s,s=o}return St=!0,s.d.length=f+1,s}function ds(i,a){for(var e=i;--a;)e*=i;return e}function Jp(i,a){var e,t=a.s<0,r=Si(i,i.precision,1),o=r.times(.5);if((a=a.abs()).lte(o))return Yi=t?4:1,a;if((e=a.divToInt(r)).isZero())Yi=t?3:2;else{if((a=a.minus(e.times(r))).lte(o))return Yi=Hp(e)?t?2:3:t?4:1,a;Yi=Hp(e)?t?1:4:t?3:2}return a.minus(r).abs()}function ml(i,a,e,t){var r,o,s,c,l,u,d,f,p,m=i.constructor,h=void 0!==e;if(h?(ni(e,1,br),void 0===t?t=m.rounding:ni(t,0,8)):(e=m.precision,t=m.rounding),i.isFinite()){for(h?(r=2,16==a?e=4*e-3:8==a&&(e=3*e-2)):r=a,(s=(d=Bi(i)).indexOf("."))>=0&&(d=d.replace(".",""),(p=new m(1)).e=d.length-s,p.d=cs(Bi(p),10,r),p.e=p.d.length),o=l=(f=cs(d,10,r)).length;0==f[--l];)f.pop();if(f[0]){if(s<0?o--:((i=new m(i)).d=f,i.e=o,f=(i=un(i,p,e,t,0,r)).d,o=i.e,u=$p),s=f[e],c=r/2,u=u||void 0!==f[e+1],u=t<4?(void 0!==s||u)&&(0===t||t===(i.s<0?3:2)):s>c||s===c&&(4===t||u||6===t&&1&f[e-1]||t===(i.s<0?8:7)),f.length=e,u)for(;++f[--e]>r-1;)f[e]=0,e||(++o,f.unshift(1));for(l=f.length;!f[l-1];--l);for(s=0,d="";s<l;s++)d+=ll.charAt(f[s]);if(h){if(l>1)if(16==a||8==a){for(s=16==a?4:3,--l;l%s;l++)d+="0";for(l=(f=cs(d,r,a)).length;!f[l-1];--l);for(s=1,d="1.";s<l;s++)d+=ll.charAt(f[s])}else d=d.charAt(0)+"."+d.slice(1);d=d+(o<0?"p":"p+")+o}else if(o<0){for(;++o;)d="0"+d;d="0."+d}else if(++o>l)for(o-=l;o--;)d+="0";else o<l&&(d=d.slice(0,o)+"."+d.slice(o))}else d=h?"0p+0":"0";d=(16==a?"0x":2==a?"0b":8==a?"0o":"")+d}else d=qp(i);return i.s<0?"-"+d:d}function Qp(i,a){if(i.length>a)return i.length=a,!0}function cw(i){return new this(i).abs()}function lw(i){return new this(i).acos()}function uw(i){return new this(i).acosh()}function dw(i,a){return new this(i).plus(a)}function fw(i){return new this(i).asin()}function pw(i){return new this(i).asinh()}function mw(i){return new this(i).atan()}function gw(i){return new this(i).atanh()}function hw(i,a){i=new this(i),a=new this(a);var e,t=this.precision,r=this.rounding,o=t+4;return i.s&&a.s?i.d||a.d?!a.d||i.isZero()?(e=a.s<0?Si(this,t,r):new this(0)).s=i.s:!i.d||a.isZero()?(e=Si(this,o,1).times(.5)).s=i.s:a.s<0?(this.precision=o,this.rounding=1,e=this.atan(un(i,a,o,1)),a=Si(this,o,1),this.precision=t,this.rounding=r,e=i.s<0?e.minus(a):e.plus(a)):e=this.atan(un(i,a,o,1)):(e=Si(this,o,1).times(a.s>0?.25:.75)).s=i.s:e=new this(NaN),e}function vw(i){return new this(i).cbrt()}function _w(i){return gt(i=new this(i),i.e+1,2)}function yw(i,a,e){return new this(i).clamp(a,e)}function bw(i){if(!i||"object"!=typeof i)throw Error(ss+"Object expected");var a,e,t,r=!0===i.defaults,o=["precision",1,br,"rounding",0,8,"toExpNeg",-vo,0,"toExpPos",0,vo,"maxE",0,vo,"minE",-vo,0,"modulo",0,9];for(a=0;a<o.length;a+=3)if(e=o[a],r&&(this[e]=ul[e]),void 0!==(t=i[e])){if(!(Kn(t)===t&&t>=o[a+1]&&t<=o[a+2]))throw Error(Cr+e+": "+t);this[e]=t}if(e="crypto",r&&(this[e]=ul[e]),void 0!==(t=i[e])){if(!0!==t&&!1!==t&&0!==t&&1!==t)throw Error(Cr+e+": "+t);if(t){if(!(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes)))throw Error(Vp);this[e]=!0}else this[e]=!1}return this}function Cw(i){return new this(i).cos()}function Mw(i){return new this(i).cosh()}function Sw(i,a){return new this(i).div(a)}function Dw(i){return new this(i).exp()}function ww(i){return gt(i=new this(i),i.e+1,3)}function xw(){var i,a,e=new this(0);for(St=!1,i=0;i<arguments.length;)if((a=new this(arguments[i++])).d)e.d&&(e=e.plus(a.times(a)));else{if(a.s)return St=!0,new this(1/0);e=a}return St=!0,e.sqrt()}function Yp(i){return i instanceof ba||i&&i.toStringTag===zp||!1}function Ew(i){return new this(i).ln()}function Fw(i,a){return new this(i).log(a)}function Iw(i){return new this(i).log(2)}function Aw(i){return new this(i).log(10)}function Tw(){return Zp(this,arguments,"lt")}function Nw(){return Zp(this,arguments,"gt")}function Lw(i,a){return new this(i).mod(a)}function Bw(i,a){return new this(i).mul(a)}function Ow(i,a){return new this(i).pow(a)}function Rw(i){var a,e,t,r,o=0,s=new this(1),c=[];if(void 0===i?i=this.precision:ni(i,1,br),t=Math.ceil(i/_t),this.crypto)if(crypto.getRandomValues)for(a=crypto.getRandomValues(new Uint32Array(t));o<t;)(r=a[o])>=429e7?a[o]=crypto.getRandomValues(new Uint32Array(1))[0]:c[o++]=r%1e7;else{if(!crypto.randomBytes)throw Error(Vp);for(a=crypto.randomBytes(t*=4);o<t;)(r=a[o]+(a[o+1]<<8)+(a[o+2]<<16)+((127&a[o+3])<<24))>=214e7?crypto.randomBytes(4).copy(a,o):(c.push(r%1e7),o+=4);o=t/4}else for(;o<t;)c[o++]=1e7*Math.random()|0;for(t=c[--o],i%=_t,t&&i&&(r=On(10,_t-i),c[o]=(t/r|0)*r);0===c[o];o--)c.pop();if(o<0)e=0,c=[0];else{for(e=-1;0===c[0];e-=_t)c.shift();for(t=1,r=c[0];r>=10;r/=10)t++;t<_t&&(e-=_t-t)}return s.e=e,s.d=c,s}function jw(i){return gt(i=new this(i),i.e+1,this.rounding)}function kw(i){return(i=new this(i)).d?i.d[0]?i.s:0*i.s:i.s||NaN}function Pw(i){return new this(i).sin()}function $w(i){return new this(i).sinh()}function Uw(i){return new this(i).sqrt()}function Vw(i,a){return new this(i).sub(a)}function zw(){var i=0,a=arguments,e=new this(a[i]);for(St=!1;e.s&&++i<a.length;)e=e.plus(a[i]);return St=!0,gt(e,this.precision,this.rounding)}function Ww(i){return new this(i).tan()}function Gw(i){return new this(i).tanh()}function Kw(i){return gt(i=new this(i),i.e+1,1)}Ne[Symbol.for("nodejs.util.inspect.custom")]=Ne.toString,Ne[Symbol.toStringTag]="Decimal";var ba=Ne.constructor=function Xp(i){var a,e,t;function r(o){var s,c,l,u=this;if(!(u instanceof r))return new r(o);if(u.constructor=r,Yp(o))return u.s=o.s,void(St?!o.d||o.e>r.maxE?(u.e=NaN,u.d=null):o.e<r.minE?(u.e=0,u.d=[0]):(u.e=o.e,u.d=o.d.slice()):(u.e=o.e,u.d=o.d?o.d.slice():o.d));if("number"==(l=typeof o)){if(0===o)return u.s=1/o<0?-1:1,u.e=0,void(u.d=[0]);if(o<0?(o=-o,u.s=-1):u.s=1,o===~~o&&o<1e7){for(s=0,c=o;c>=10;c/=10)s++;return void(St?s>r.maxE?(u.e=NaN,u.d=null):s<r.minE?(u.e=0,u.d=[0]):(u.e=s,u.d=[o]):(u.e=s,u.d=[o]))}return 0*o!=0?(o||(u.s=NaN),u.e=NaN,void(u.d=null)):pl(u,o.toString())}if("string"!==l)throw Error(Cr+o);return 45===(c=o.charCodeAt(0))?(o=o.slice(1),u.s=-1):(43===c&&(o=o.slice(1)),u.s=1),Wp.test(o)?pl(u,o):function aw(i,a){var e,t,r,o,s,c,l,u,d;if(a.indexOf("_")>-1){if(a=a.replace(/(\d)_(?=\d)/g,"$1"),Wp.test(a))return pl(i,a)}else if("Infinity"===a||"NaN"===a)return+a||(i.s=NaN),i.e=NaN,i.d=null,i;if(tw.test(a))e=16,a=a.toLowerCase();else if(ew.test(a))e=2;else{if(!nw.test(a))throw Error(Cr+a);e=8}for((o=a.search(/p/i))>0?(l=+a.slice(o+1),a=a.substring(2,o)):a=a.slice(2),o=a.indexOf("."),t=i.constructor,(s=o>=0)&&(o=(c=(a=a.replace(".","")).length)-o,r=Kp(t,new t(e),o,2*o)),o=d=(u=cs(a,e,Mi)).length-1;0===u[o];--o)u.pop();return o<0?new t(0*i.s):(i.e=ls(u,d),i.d=u,St=!1,s&&(i=un(i,r,4*c)),l&&(i=i.times(Math.abs(l)<54?On(2,l):ba.pow(2,l))),St=!0,i)}(u,o)}if(r.prototype=Ne,r.ROUND_UP=0,r.ROUND_DOWN=1,r.ROUND_CEIL=2,r.ROUND_FLOOR=3,r.ROUND_HALF_UP=4,r.ROUND_HALF_DOWN=5,r.ROUND_HALF_EVEN=6,r.ROUND_HALF_CEIL=7,r.ROUND_HALF_FLOOR=8,r.EUCLID=9,r.config=r.set=bw,r.clone=Xp,r.isDecimal=Yp,r.abs=cw,r.acos=lw,r.acosh=uw,r.add=dw,r.asin=fw,r.asinh=pw,r.atan=mw,r.atanh=gw,r.atan2=hw,r.cbrt=vw,r.ceil=_w,r.clamp=yw,r.cos=Cw,r.cosh=Mw,r.div=Sw,r.exp=Dw,r.floor=ww,r.hypot=xw,r.ln=Ew,r.log=Fw,r.log10=Aw,r.log2=Iw,r.max=Tw,r.min=Nw,r.mod=Lw,r.mul=Bw,r.pow=Ow,r.random=Rw,r.round=jw,r.sign=kw,r.sin=Pw,r.sinh=$w,r.sqrt=Uw,r.sub=Vw,r.sum=zw,r.tan=Ww,r.tanh=Gw,r.trunc=Kw,void 0===i&&(i={}),i&&!0!==i.defaults)for(t=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],a=0;a<t.length;)i.hasOwnProperty(e=t[a++])||(i[e]=this[e]);return r.config(i),r}(ul);os=new ba(os),as=new ba(as);const fs=ba;function zt(i){return"number"==typeof i}function Ht(i){return!(!i||"object"!=typeof i||"function"!=typeof i.constructor)&&(!0===i.isBigNumber&&"object"==typeof i.constructor.prototype&&!0===i.constructor.prototype.isBigNumber||"function"==typeof i.constructor.isDecimal&&!0===i.constructor.isDecimal(i))}function Dr(i){return i&&"object"==typeof i&&!0===Object.getPrototypeOf(i).isComplex||!1}function ps(i){return i&&"object"==typeof i&&!0===Object.getPrototypeOf(i).isFraction||!1}function Di(i){return i&&!0===i.constructor.prototype.isUnit||!1}function Jn(i){return"string"==typeof i}var Jt=Array.isArray;function yt(i){return i&&!0===i.constructor.prototype.isMatrix||!1}function yo(i){return Array.isArray(i)||yt(i)}function ms(i){return i&&i.isDenseMatrix&&!0===i.constructor.prototype.isMatrix||!1}function Wr(i){return i&&i.isSparseMatrix&&!0===i.constructor.prototype.isMatrix||!1}function em(i){return i&&!0===i.constructor.prototype.isRange||!1}function gs(i){return i&&!0===i.constructor.prototype.isIndex||!1}function Hw(i){return"boolean"==typeof i}function Zw(i){return i&&!0===i.constructor.prototype.isResultSet||!1}function qw(i){return i&&!0===i.constructor.prototype.isHelp||!1}function Jw(i){return"function"==typeof i}function Qw(i){return i instanceof Date}function Xw(i){return i instanceof RegExp}function tm(i){return!(!i||"object"!=typeof i||i.constructor!==Object||Dr(i)||ps(i))}function Yw(i){return null===i}function ex(i){return void 0===i}function tx(i){return i&&!0===i.isAccessorNode&&!0===i.constructor.prototype.isNode||!1}function nx(i){return i&&!0===i.isArrayNode&&!0===i.constructor.prototype.isNode||!1}function ix(i){return i&&!0===i.isAssignmentNode&&!0===i.constructor.prototype.isNode||!1}function rx(i){return i&&!0===i.isBlockNode&&!0===i.constructor.prototype.isNode||!1}function ox(i){return i&&!0===i.isConditionalNode&&!0===i.constructor.prototype.isNode||!1}function gl(i){return i&&!0===i.isConstantNode&&!0===i.constructor.prototype.isNode||!1}function ax(i){return i&&!0===i.isFunctionAssignmentNode&&!0===i.constructor.prototype.isNode||!1}function sx(i){return i&&!0===i.isFunctionNode&&!0===i.constructor.prototype.isNode||!1}function cx(i){return i&&!0===i.isIndexNode&&!0===i.constructor.prototype.isNode||!1}function lx(i){return i&&!0===i.isNode&&!0===i.constructor.prototype.isNode||!1}function ux(i){return i&&!0===i.isObjectNode&&!0===i.constructor.prototype.isNode||!1}function nm(i){return i&&!0===i.isOperatorNode&&!0===i.constructor.prototype.isNode||!1}function dx(i){return i&&!0===i.isParenthesisNode&&!0===i.constructor.prototype.isNode||!1}function fx(i){return i&&!0===i.isRangeNode&&!0===i.constructor.prototype.isNode||!1}function px(i){return i&&!0===i.isRelationalNode&&!0===i.constructor.prototype.isNode||!1}function mx(i){return i&&!0===i.isSymbolNode&&!0===i.constructor.prototype.isNode||!1}function gx(i){return i&&!0===i.constructor.prototype.isChain||!1}function Mn(i){var a=typeof i;return"object"===a?null===i?"null":Ht(i)?"BigNumber":i.constructor&&i.constructor.name?i.constructor.name:"Object":a}function bt(i){var a=typeof i;if("number"===a||"string"===a||"boolean"===a||null==i)return i;if("function"==typeof i.clone)return i.clone();if(Array.isArray(i))return i.map(function(e){return bt(e)});if(i instanceof Date)return new Date(i.valueOf());if(Ht(i))return i;if(tm(i))return function hx(i,a){var e={};for(var t in i)en(i,t)&&(e[t]=a(i[t]));return e}(i,bt);throw new TypeError("Cannot clone: unknown type of value (value: ".concat(i,")"))}function bo(i,a){var e,t,r;if(Array.isArray(i)){if(!Array.isArray(a)||i.length!==a.length)return!1;for(t=0,r=i.length;t<r;t++)if(!bo(i[t],a[t]))return!1;return!0}if("function"==typeof i)return i===a;if(i instanceof Object){if(Array.isArray(a)||!(a instanceof Object))return!1;for(e in i)if(!(e in a)||!bo(i[e],a[e]))return!1;for(e in a)if(!(e in i))return!1;return!0}return i===a}function en(i,a){return i&&Object.hasOwnProperty.call(i,a)}function H(i,a,e,t){function r(o){var s=function yx(i,a){for(var e={},t=0;t<a.length;t++){var r=a[t],o=i[r];void 0!==o&&(e[r]=o)}return e}(o,a.map(Sx));return function Cx(i,a,e){var t=a.filter(o=>!function Mx(i){return i&&"?"===i[0]}(o)).every(o=>void 0!==e[o]);if(!t){var r=a.filter(o=>void 0===e[o]);throw new Error('Cannot create function "'.concat(i,'", ')+"some dependencies are missing: ".concat(r.map(o=>'"'.concat(o,'"')).join(", "),"."))}}(i,a,o),e(s)}return r.isFactory=!0,r.fn=i,r.dependencies=a.slice().sort(),t&&(r.meta=t),r}function Sx(i){return i&&"?"===i[0]?i.slice(1):i}var xx=H("BigNumber",["?on","config"],i=>{var{on:a,config:e}=i,t=fs.clone({precision:e.precision,modulo:fs.EUCLID});return t.prototype=Object.create(t.prototype),t.prototype.type="BigNumber",t.prototype.isBigNumber=!0,t.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},t.fromJSON=function(r){return new t(r.value)},a&&a("config",function(r,o){r.precision!==o.precision&&t.config({precision:r.precision})}),t},{isClass:!0}),Un=L(1241);function ut(i){return"boolean"==typeof i||!!isFinite(i)&&i===Math.round(i)}Math,Math,Math,Math,Math,Math;function vl(i,a,e){var r={2:"0b",8:"0o",16:"0x"}[a],o="";if(e){if(e<1)throw new Error("size must be in greater than 0");if(!ut(e))throw new Error("size must be an integer");if(i>2**(e-1)-1||i<-(2**(e-1)))throw new Error("Value must be in range [-2^".concat(e-1,", 2^").concat(e-1,"-1]"));if(!ut(i))throw new Error("Value must be an integer");i<0&&(i+=2**e),o="i".concat(e)}var s="";return i<0&&(i=-i,s="-"),"".concat(s).concat(r).concat(i.toString(a)).concat(o)}function Gr(i,a){if("function"==typeof a)return a(i);if(i===1/0)return"Infinity";if(i===-1/0)return"-Infinity";if(isNaN(i))return"NaN";var t,r,e="auto";if(a&&(a.notation&&(e=a.notation),zt(a)?t=a:zt(a.precision)&&(t=a.precision),a.wordSize&&"number"!=typeof(r=a.wordSize)))throw new Error('Option "wordSize" must be a number');switch(e){case"fixed":return lm(i,t);case"exponential":return um(i,t);case"engineering":return function Tx(i,a){if(isNaN(i)||!isFinite(i))return String(i);var t=vs(hs(i),a),r=t.exponent,o=t.coefficients,s=r%3==0?r:r<0?r-3-r%3:r-r%3;if(zt(a))for(;a>o.length||r-s+1>o.length;)o.push(0);else for(var c=Math.abs(r-s)-(o.length-1),l=0;l<c;l++)o.push(0);for(var u=Math.abs(r-s),d=1;u>0;)d++,u--;var f=o.slice(d).join(""),p=zt(a)&&f.length||f.match(/[1-9]/)?"."+f:"",m=o.slice(0,d).join("")+p+"e"+(r>=0?"+":"")+s.toString();return t.sign+m}(i,t);case"bin":return vl(i,2,r);case"oct":return vl(i,8,r);case"hex":return vl(i,16,r);case"auto":return function Nx(i,a,e){if(isNaN(i)||!isFinite(i))return String(i);var t=e&&void 0!==e.lowerExp?e.lowerExp:-3,r=e&&void 0!==e.upperExp?e.upperExp:5,o=hs(i),s=a?vs(o,a):o;if(s.exponent<t||s.exponent>=r)return um(i,a);var c=s.coefficients,l=s.exponent;c.length<a&&(c=c.concat(Co(a-c.length))),c=c.concat(Co(l-c.length+1+(c.length<a?a-c.length:0)));var u=l>0?l:0;return u<(c=Co(-l).concat(c)).length-1&&c.splice(u+1,0,"."),s.sign+c.join("")}(i,t,a&&a).replace(/((\.\d*?)(0+))($|e)/,function(){var o=arguments[2],s=arguments[4];return"."!==o?o+s:s});default:throw new Error('Unknown notation "'+e+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function hs(i){var a=String(i).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!a)throw new SyntaxError("Invalid number "+i);var e=a[1],t=a[2],r=parseFloat(a[4]||"0"),o=t.indexOf(".");r+=-1!==o?o-1:t.length-1;var s=t.replace(".","").replace(/^0*/,function(c){return r-=c.length,""}).replace(/0*$/,"").split("").map(function(c){return parseInt(c)});return 0===s.length&&(s.push(0),r++),{sign:e,coefficients:s,exponent:r}}function lm(i,a){if(isNaN(i)||!isFinite(i))return String(i);var e=hs(i),t="number"==typeof a?vs(e,e.exponent+1+a):e,r=t.coefficients,o=t.exponent+1,s=o+(a||0);return r.length<s&&(r=r.concat(Co(s-r.length))),o<0&&(r=Co(1-o).concat(r),o=1),o<r.length&&r.splice(o,0,0===o?"0.":"."),t.sign+r.join("")}function um(i,a){if(isNaN(i)||!isFinite(i))return String(i);var e=hs(i),t=a?vs(e,a):e,r=t.coefficients,o=t.exponent;r.length<a&&(r=r.concat(Co(a-r.length)));var s=r.shift();return t.sign+s+(r.length>0?"."+r.join(""):"")+"e"+(o>=0?"+":"")+o}function vs(i,a){for(var e={sign:i.sign,coefficients:i.coefficients,exponent:i.exponent},t=e.coefficients;a<=0;)t.unshift(0),e.exponent++,a++;if(t.length>a&&t.splice(a,t.length-a)[0]>=5){var o=a-1;for(t[o]++;10===t[o];)t.pop(),0===o&&(t.unshift(0),e.exponent++,o++),t[--o]++}return e}function Co(i){for(var a=[],e=0;e<i;e++)a.push(0);return a}var Bx=Number.EPSILON||2220446049250313e-31;function di(i,a,e){if(null==e)return i===a;if(i===a)return!0;if(isNaN(i)||isNaN(a))return!1;if(isFinite(i)&&isFinite(a)){var t=Math.abs(i-a);return t<Bx||t<=Math.max(Math.abs(i),Math.abs(a))*e}return!1}Math,Math,Math,Math,Math;Math;var Vx=H("Complex",[],()=>(Object.defineProperty(Un,"name",{value:"Complex"}),Un.prototype.constructor=Un,Un.prototype.type="Complex",Un.prototype.isComplex=!0,Un.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},Un.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},Un.prototype.format=function(i){var e=this.im,t=this.re,r=Gr(this.re,i),o=Gr(this.im,i),s=zt(i)?i:i?i.precision:null;if(null!==s){var c=Math.pow(10,-s);Math.abs(t/e)<c&&(t=0),Math.abs(e/t)<c&&(e=0)}return 0===e?r:0===t?1===e?"i":-1===e?"-i":o+"i":e<0?-1===e?r+" - i":r+" - "+o.substring(1)+"i":1===e?r+" + i":r+" + "+o+"i"},Un.fromPolar=function(i){switch(arguments.length){case 1:var a=arguments[0];if("object"==typeof a)return Un(a);throw new TypeError("Input has to be an object with r and phi keys.");case 2:var e=arguments[0],t=arguments[1];if(zt(e)){if(Di(t)&&t.hasBase("ANGLE")&&(t=t.toNumber("rad")),zt(t))return new Un({r:e,phi:t});throw new TypeError("Phi is not a number nor an angle unit.")}throw new TypeError("Radius r is not a number.");default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},Un.prototype.valueOf=Un.prototype.toString,Un.fromJSON=function(i){return new Un(i)},Un.compare=function(i,a){return i.re>a.re?1:i.re<a.re?-1:i.im>a.im?1:i.im<a.im?-1:0},Un),{isClass:!0});function Wx(i){var a=0,e=1,t=Object.create(null),r=Object.create(null),o=0,s=function(l){var u=r[l];if(u&&(delete t[u],delete r[l],--a,e===u)){if(!a)return o=0,void(e=1);for(;!Object.prototype.hasOwnProperty.call(t,++e););}};return i=Math.abs(i),{hit:function(l){var u=r[l],d=++o;if(t[d]=l,r[l]=d,!u)return++a<=i?void 0:(s(l=t[e]),l);if(delete t[u],e===u)for(;!Object.prototype.hasOwnProperty.call(t,++e););},delete:s,clear:function(){a=o=0,e=1,t=Object.create(null),r=Object.create(null)}}}function Ca(i){var{hasher:a,limit:e}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=e??Number.POSITIVE_INFINITY,a=a??JSON.stringify,function t(){"object"!=typeof t.cache&&(t.cache={values:new Map,lru:Wx(e||Number.POSITIVE_INFINITY)});for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];var s=a(r);if(t.cache.values.has(s))return t.cache.lru.hit(s),t.cache.values.get(s);var c=i.apply(i,r);return t.cache.values.set(s,c),t.cache.values.delete(t.cache.lru.hit(s)),c}}function pm(i){return Object.keys(i.signatures||{}).reduce(function(a,e){var t=(e.match(/,/g)||[]).length+1;return Math.max(a,t)},-1)}Ca(function(i){return new i(1).exp()},{hasher:_s}),Ca(function(i){return new i(1).plus(new i(5).sqrt()).div(2)},{hasher:_s});var _l=Ca(function(i){return i.acos(-1)},{hasher:_s});function _s(i){return i[0].precision}function ys(i,a){return H(i,["config","BigNumber"],t=>{var{config:r,BigNumber:o}=t;return"BigNumber"===r.number?new o(a):a})}Ca(function(i){return _l(i).times(2)},{hasher:_s}),Math,Math,Math,ys("fineStructure",.0072973525693),ys("weakMixingAngle",.2229),ys("efimovFactor",22.7),ys("sackurTetrode",-1.16487052358);var er=L(7780),pF=H("Fraction",[],()=>(Object.defineProperty(er,"name",{value:"Fraction"}),er.prototype.constructor=er,er.prototype.type="Fraction",er.prototype.isFraction=!0,er.prototype.toJSON=function(){return{mathjs:"Fraction",n:this.s*this.n,d:this.d}},er.fromJSON=function(i){return new er(i)},er),{isClass:!0}),hF=H("Matrix",[],()=>{function i(){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator")}return i.prototype.type="Matrix",i.prototype.isMatrix=!0,i.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},i.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},i.prototype.create=function(a,e){throw new Error("Cannot invoke create on a Matrix interface")},i.prototype.subset=function(a,e,t){throw new Error("Cannot invoke subset on a Matrix interface")},i.prototype.get=function(a){throw new Error("Cannot invoke get on a Matrix interface")},i.prototype.set=function(a,e,t){throw new Error("Cannot invoke set on a Matrix interface")},i.prototype.resize=function(a,e){throw new Error("Cannot invoke resize on a Matrix interface")},i.prototype.reshape=function(a,e){throw new Error("Cannot invoke reshape on a Matrix interface")},i.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},i.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},i.prototype.map=function(a,e){throw new Error("Cannot invoke map on a Matrix interface")},i.prototype.forEach=function(a){throw new Error("Cannot invoke forEach on a Matrix interface")},i.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},i.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},i.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},i.prototype.format=function(a){throw new Error("Cannot invoke format on a Matrix interface")},i.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},i},{isClass:!0});function yl(i,a,e){var r=new(0,i.constructor)(2),o="";if(e){if(e<1)throw new Error("size must be in greater than 0");if(!ut(e))throw new Error("size must be an integer");if(i.greaterThan(r.pow(e-1).sub(1))||i.lessThan(r.pow(e-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(e-1,", 2^").concat(e-1,"-1]"));if(!i.isInteger())throw new Error("Value must be an integer");i.lessThan(0)&&(i=i.add(r.pow(e))),o="i".concat(e)}switch(a){case 2:return"".concat(i.toBinary()).concat(o);case 8:return"".concat(i.toOctal()).concat(o);case 16:return"".concat(i.toHexadecimal()).concat(o);default:throw new Error("Base ".concat(a," not supported "))}}function mm(i,a){return void 0!==a?i.toExponential(a-1):i.toExponential()}function Rt(i,a){var e=function EF(i,a){return"number"==typeof i?Gr(i,a):Ht(i)?function SF(i,a){if("function"==typeof a)return a(i);if(!i.isFinite())return i.isNaN()?"NaN":i.gt(0)?"Infinity":"-Infinity";var t,r,e="auto";if(void 0!==a&&(a.notation&&(e=a.notation),"number"==typeof a?t=a:void 0!==a.precision&&(t=a.precision),a.wordSize&&"number"!=typeof(r=a.wordSize)))throw new Error('Option "wordSize" must be a number');switch(e){case"fixed":return function wF(i,a){return i.toFixed(a)}(i,t);case"exponential":return mm(i,t);case"engineering":return function DF(i,a){var e=i.e,t=e%3==0?e:e<0?e-3-e%3:e-e%3,o=i.mul(Math.pow(10,-t)).toPrecision(a);return-1!==o.indexOf("e")&&(o=new(0,i.constructor)(o).toFixed()),o+"e"+(e>=0?"+":"")+t.toString()}(i,t);case"bin":return yl(i,2,r);case"oct":return yl(i,8,r);case"hex":return yl(i,16,r);case"auto":var o=a&&void 0!==a.lowerExp?a.lowerExp:-3,s=a&&void 0!==a.upperExp?a.upperExp:5;if(i.isZero())return"0";var l=i.toSignificantDigits(t),u=l.e;return(u>=o&&u<s?l.toFixed():mm(i,t)).replace(/((\.\d*?)(0+))($|e)/,function(){var d=arguments[2],f=arguments[4];return"."!==d?d+f:f});default:throw new Error('Unknown notation "'+e+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}(i,a):function FF(i){return i&&"object"==typeof i&&"number"==typeof i.s&&"number"==typeof i.n&&"number"==typeof i.d||!1}(i)?a&&"decimal"===a.fraction?i.toString():i.s*i.n+"/"+i.d:Array.isArray(i)?vm(i,a):Jn(i)?gm(i):"function"==typeof i?i.syntax?String(i.syntax):"function":i&&"object"==typeof i?"function"==typeof i.format?i.format(a):i&&i.toString(a)!=={}.toString()?i.toString(a):"{"+Object.keys(i).map(t=>gm(t)+": "+Rt(i[t],a)).join(", ")+"}":String(i)}(i,a);return a&&"object"==typeof a&&"truncate"in a&&e.length>a.truncate?e.substring(0,a.truncate-3)+"...":e}function gm(i){for(var a=String(i),e="",t=0;t<a.length;){var r=a.charAt(t);e+=r in hm?hm[r]:r,t++}return'"'+e+'"'}var hm={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t"};function vm(i,a){if(Array.isArray(i)){for(var e="[",t=i.length,r=0;r<t;r++)0!==r&&(e+=", "),e+=vm(i[r],a);return e+"]"}return Rt(i,a)}function At(i,a,e){if(!(this instanceof At))throw new SyntaxError("Constructor must be called with the new operator");this.actual=i,this.expected=a,this.relation=e,this.message="Dimension mismatch ("+(Array.isArray(i)?"["+i.join(", ")+"]":i)+" "+(this.relation||"!=")+" "+(Array.isArray(a)?"["+a.join(", ")+"]":a)+")",this.stack=(new Error).stack}function Oi(i,a,e){if(!(this instanceof Oi))throw new SyntaxError("Constructor must be called with the new operator");this.index=i,arguments.length<3?(this.min=0,this.max=a):(this.min=a,this.max=e),this.message=void 0!==this.min&&this.index<this.min?"Index out of range ("+this.index+" < "+this.min+")":void 0!==this.max&&this.index>=this.max?"Index out of range ("+this.index+" > "+(this.max-1)+")":"Index out of range ("+this.index+")",this.stack=(new Error).stack}function wt(i){for(var a=[];Array.isArray(i);)a.push(i.length),i=i[0];return a}function _m(i,a,e){var t,r=i.length;if(r!==a[e])throw new At(r,a[e]);if(e<a.length-1){var o=e+1;for(t=0;t<r;t++){if(!Array.isArray(i[t]))throw new At(a.length-1,a.length,"<");_m(i[t],a,o)}}else for(t=0;t<r;t++)if(Array.isArray(i[t]))throw new At(a.length+1,a.length,">")}function ym(i,a){if(0===a.length){if(Array.isArray(i))throw new At(i.length,0)}else _m(i,a,0)}function nn(i,a){if(void 0!==i){if(!zt(i)||!ut(i))throw new TypeError("Index must be an integer (value: "+i+")");if(i<0||"number"==typeof a&&i>=a)throw new Oi(i,a)}}function So(i,a,e){if(!Array.isArray(a))throw new TypeError("Array expected");if(0===a.length)throw new Error("Resizing to scalar is not supported");return a.forEach(function(r){if(!zt(r)||!ut(r)||r<0)throw new TypeError("Invalid size, must contain positive integers (size: "+Rt(a)+")")}),(zt(i)||Ht(i))&&(i=[i]),Cl(i,a,0,void 0!==e?e:0),i}function Cl(i,a,e,t){var r,o,c=a[e],l=Math.min(i.length,c);if(i.length=c,e<a.length-1){var u=e+1;for(r=0;r<l;r++)o=i[r],Array.isArray(o)||(i[r]=o=[o]),Cl(o,a,u,t);for(r=l;r<c;r++)i[r]=o=[],Cl(o,a,u,t)}else{for(r=0;r<l;r++)for(;Array.isArray(i[r]);)i[r]=i[r][0];for(r=l;r<c;r++)i[r]=t}}function Ml(i,a){var e=function Wt(i){if(!Array.isArray(i))return i;var a=[];return i.forEach(function e(t){Array.isArray(t)?t.forEach(e):a.push(t)}),a}(i),t=e.length;if(!Array.isArray(i)||!Array.isArray(a))throw new TypeError("Array expected");if(0===a.length)throw new At(0,t,"!=");var r=bm(a=Sl(a,t));if(t!==r)throw new At(r,t,"!=");try{return function IF(i,a){for(var t,e=i,r=a.length-1;r>0;r--){var o=a[r];t=[];for(var s=e.length/o,c=0;c<s;c++)t.push(e.slice(c*o,(c+1)*o));e=t}return e}(e,a)}catch(o){throw o instanceof At?new At(r,t,"!="):o}}function Sl(i,a){var e=bm(i),t=i.slice(),o=i.indexOf(-1);if(i.indexOf(-1,o+1)>=0)throw new Error("More than one wildcard in sizes");if(o>=0){if(a%e!=0)throw new Error("Could not replace wildcard, since "+a+" is no multiple of "+-e);t[o]=-a/e}return t}function bm(i){return i.reduce((a,e)=>a*e,1)}function Mm(i,a,e,t){var r=t||wt(i);if(e)for(var o=0;o<e;o++)i=[i],r.unshift(1);for(i=Sm(i,a,0);r.length<a;)r.push(1);return i}function Sm(i,a,e){var t,r;if(Array.isArray(i)){var o=e+1;for(t=0,r=i.length;t<r;t++)i[t]=Sm(i[t],a,o)}else for(var s=e;s<a;s++)i=[i];return i}function Ma(i,a){for(var e,t=0,r=0;r<i.length;r++){var o=i[r],s=Array.isArray(o);if(0===r&&s&&(t=o.length),s&&o.length!==t)return;var c=s?Ma(o,a):a(o);if(void 0===e)e=c;else if(e!==c)return"mixed"}return e}function wm(i,a,e,t){if(t<e){if(i.length!==a.length)throw new At(i.length,a.length);for(var r=[],o=0;o<i.length;o++)r[o]=wm(i[o],a[o],e,t+1);return r}return i.concat(a)}function xm(){var i=Array.prototype.slice.call(arguments,0,-1),a=Array.prototype.slice.call(arguments,-1);if(1===i.length)return i[0];if(i.length>1)return i.slice(1).reduce(function(e,t){return wm(e,t,a,0)},i[0]);throw new Error("Wrong number of arguments in function concat")}function Ss(i,a){for(var e=a.length,t=i.length,r=0;r<t;r++){var o=e-t+r;if(i[r]<a[o]&&i[r]>1||i[r]>a[o])throw new Error("shape missmatch: missmatch is found in arg with shape (".concat(i,") not possible to broadcast dimension ").concat(t," with size ").concat(i[r]," to size ").concat(a[o]))}}function Dl(i,a){var e=wt(i);if(bo(e,a))return i;Ss(e,a);var t=function Em(){for(var i=arguments.length,a=new Array(i),e=0;e<i;e++)a[e]=arguments[e];for(var t=a.map(p=>p.length),r=Math.max(...t),o=new Array(r).fill(null),s=0;s<a.length;s++)for(var c=a[s],l=t[s],u=0;u<l;u++){var d=r-l+u;c[u]>o[d]&&(o[d]=c[u])}for(var f=0;f<a.length;f++)Ss(a[f],o);return o}(e,a),r=t.length,o=[...Array(r-e.length).fill(1),...e],s=function LF(i){return Xi([],i)}(i);e.length<r&&(e=wt(s=Ml(s,o)));for(var c=0;c<r;c++)e[c]<t[c]&&(e=wt(s=NF(s,t[c],c)));return s}function NF(i,a,e){return xm(...Array(a).fill(i),e)}(At.prototype=new RangeError).constructor=RangeError,At.prototype.name="DimensionError",At.prototype.isDimensionError=!0,(Oi.prototype=new RangeError).constructor=RangeError,Oi.prototype.name="IndexError",Oi.prototype.isIndexError=!0;var RF=H("DenseMatrix",["Matrix"],i=>{var{Matrix:a}=i;function e(d,f){if(!(this instanceof e))throw new SyntaxError("Constructor must be called with the new operator");if(f&&!Jn(f))throw new Error("Invalid datatype: "+f);if(yt(d))"DenseMatrix"===d.type?(this._data=bt(d._data),this._size=bt(d._size),this._datatype=f||d._datatype):(this._data=d.toArray(),this._size=d.size(),this._datatype=f||d._datatype);else if(d&&Jt(d.data)&&Jt(d.size))this._data=d.data,this._size=d.size,ym(this._data,this._size),this._datatype=f||d.datatype;else if(Jt(d))this._data=u(d),this._size=wt(this._data),ym(this._data,this._size),this._datatype=f;else{if(d)throw new TypeError("Unsupported type of data ("+Mn(d)+")");this._data=[],this._size=[0],this._datatype=f}}function r(d,f,p,m){var h=m===p-1,g=f.dimension(m);return h?g.map(function(b){return nn(b,d.length),d[b]}).valueOf():g.map(function(b){return nn(b,d.length),r(d[b],f,p,m+1)}).valueOf()}function s(d,f,p,m,h){var g=h===m-1;f.dimension(h).forEach(g?function(_,D){nn(_),d[_]=p[D[0]]}:function(_,D){nn(_),s(d[_],f,p[D[0]],m,h+1)})}function c(d,f,p){if(0===f.length){for(var m=d._data;Jt(m);)m=m[0];return m}return d._size=f.slice(0),d._data=So(d._data,d._size,p),d}function l(d,f,p){for(var m=d._size.slice(0),h=!1;m.length<f.length;)m.push(0),h=!0;for(var g=0,b=f.length;g<b;g++)f[g]>m[g]&&(m[g]=f[g],h=!0);h&&c(d,m,p)}function u(d){return yt(d)?u(d.valueOf()):Jt(d)?d.map(u):d}return(e.prototype=new a).createDenseMatrix=function(d,f){return new e(d,f)},Object.defineProperty(e,"name",{value:"DenseMatrix"}),e.prototype.constructor=e,e.prototype.type="DenseMatrix",e.prototype.isDenseMatrix=!0,e.prototype.getDataType=function(){return Ma(this._data,Mn)},e.prototype.storage=function(){return"dense"},e.prototype.datatype=function(){return this._datatype},e.prototype.create=function(d,f){return new e(d,f)},e.prototype.subset=function(d,f,p){switch(arguments.length){case 1:return function t(d,f){if(!gs(f))throw new TypeError("Invalid index");if(f.isScalar())return d.get(f.min());var m=f.size();if(m.length!==d._size.length)throw new At(m.length,d._size.length);for(var h=f.min(),g=f.max(),b=0,_=d._size.length;b<_;b++)nn(h[b],d._size[b]),nn(g[b],d._size[b]);return new e(r(d._data,f,m.length,0),d._datatype)}(this,d);case 2:case 3:return function o(d,f,p,m){if(!f||!0!==f.isIndex)throw new TypeError("Invalid index");var b,h=f.size(),g=f.isScalar();if(yt(p)?(b=p.size(),p=p.valueOf()):b=wt(p),g){if(0!==b.length)throw new TypeError("Scalar expected");d.set(f.min(),p,m)}else{if(!bo(b,h))try{b=wt(p=Dl(0===b.length?[p]:p,h))}catch{}if(h.length<d._size.length)throw new At(h.length,d._size.length,"<");if(b.length<h.length){for(var _=0,D=0;1===h[_]&&1===b[_];)_++;for(;1===h[_];)D++,_++;p=Mm(p,h.length,D,b)}if(!bo(h,b))throw new At(h,b,">");l(d,f.max().map(function(C){return C+1}),m),s(d._data,f,p,h.length,0)}return d}(this,d,f,p);default:throw new SyntaxError("Wrong number of arguments")}},e.prototype.get=function(d){if(!Jt(d))throw new TypeError("Array expected");if(d.length!==this._size.length)throw new At(d.length,this._size.length);for(var f=0;f<d.length;f++)nn(d[f],this._size[f]);for(var p=this._data,m=0,h=d.length;m<h;m++){var g=d[m];nn(g,p.length),p=p[g]}return p},e.prototype.set=function(d,f,p){if(!Jt(d))throw new TypeError("Array expected");if(d.length<this._size.length)throw new At(d.length,this._size.length,"<");var m,h,g;l(this,d.map(function(D){return D+1}),p);var _=this._data;for(m=0,h=d.length-1;m<h;m++)nn(g=d[m],_.length),_=_[g];return nn(g=d[d.length-1],_.length),_[g]=f,this},e.prototype.resize=function(d,f,p){if(!yo(d))throw new TypeError("Array or Matrix expected");var m=d.valueOf().map(g=>Array.isArray(g)&&1===g.length?g[0]:g);return c(p?this.clone():this,m,f)},e.prototype.reshape=function(d,f){var p=f?this.clone():this;p._data=Ml(p._data,d);var m=p._size.reduce((h,g)=>h*g);return p._size=Sl(d,m),p},e.prototype.clone=function(){return new e({data:bt(this._data),size:bt(this._size),datatype:this._datatype})},e.prototype.size=function(){return this._size.slice(0)},e.prototype.map=function(d){var f=this,p=pm(d),h=function b(_,D){return Jt(_)?_.map(function(y,w){return b(y,D.concat(w))}):1===p?d(_):2===p?d(_,D):d(_,D,f)}(this._data,[]);return new e(h,void 0!==this._datatype?Ma(h,Mn):void 0)},e.prototype.forEach=function(d){var f=this;!function m(h,g){Jt(h)?h.forEach(function(b,_){m(b,g.concat(_))}):d(h,g,f)}(this._data,[])},e.prototype[Symbol.iterator]=function*(){yield*function*f(p,m){if(Jt(p))for(var h=0;h<p.length;h++)yield*f(p[h],m.concat(h));else yield{value:p,index:m}}(this._data,[])},e.prototype.rows=function(){var d=[];if(2!==this.size().length)throw new TypeError("Rows can only be returned for a 2D matrix.");var p=this._data;for(var m of p)d.push(new e([m],this._datatype));return d},e.prototype.columns=function(){var d=this,f=[],p=this.size();if(2!==p.length)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var m=this._data,h=function(_){var D=m.map(y=>[y[_]]);f.push(new e(D,d._datatype))},g=0;g<p[1];g++)h(g);return f},e.prototype.toArray=function(){return bt(this._data)},e.prototype.valueOf=function(){return this._data},e.prototype.format=function(d){return Rt(this._data,d)},e.prototype.toString=function(){return Rt(this._data)},e.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},e.prototype.diagonal=function(d){if(d){if(Ht(d)&&(d=d.toNumber()),!zt(d)||!ut(d))throw new TypeError("The parameter k must be an integer number")}else d=0;for(var f=d>0?d:0,p=d<0?-d:0,g=Math.min(this._size[0]-p,this._size[1]-f),b=[],_=0;_<g;_++)b[_]=this._data[_+p][_+f];return new e({data:b,size:[g],datatype:this._datatype})},e.diagonal=function(d,f,p,m){if(!Jt(d))throw new TypeError("Array expected, size parameter");if(2!==d.length)throw new Error("Only two dimensions matrix are supported");if(d=d.map(function(I){if(Ht(I)&&(I=I.toNumber()),!zt(I)||!ut(I)||I<1)throw new Error("Size values must be positive integers");return I}),p){if(Ht(p)&&(p=p.toNumber()),!zt(p)||!ut(p))throw new TypeError("The parameter k must be an integer number")}else p=0;var y,h=p>0?p:0,g=p<0?-p:0,b=d[0],_=d[1],D=Math.min(b-g,_-h);if(Jt(f)){if(f.length!==D)throw new Error("Invalid value array length");y=function(N){return f[N]}}else if(yt(f)){var w=f.size();if(1!==w.length||w[0]!==D)throw new Error("Invalid matrix length");y=function(N){return f.get([N])}}else y=function(){return f};m||(m=Ht(y(0))?y(0).mul(0):0);var x=[];if(d.length>0){x=So(x,d,m);for(var C=0;C<D;C++)x[C+g][C+h]=y(C)}return new e({data:x,size:[b,_]})},e.fromJSON=function(d){return new e(d)},e.prototype.swapRows=function(d,f){if(!(zt(d)&&ut(d)&&zt(f)&&ut(f)))throw new Error("Row index must be positive integers");if(2!==this._size.length)throw new Error("Only two dimensional matrix is supported");return nn(d,this._size[0]),nn(f,this._size[0]),e._swapRows(d,f,this._data),this},e._swapRows=function(d,f,p){var m=p[d];p[d]=p[f],p[f]=m},e},{isClass:!0}),wo=L(9634);function Fm(i,a){if(Nm(i)&&Am(i,a))return i[a];throw"function"==typeof i[a]&&function Tm(i,a){return!(null==i||"function"!=typeof i[a]||en(i,a)&&Object.getPrototypeOf&&a in Object.getPrototypeOf(i)||!en(VF,a)&&(a in Object.prototype||a in Function.prototype))}(i,a)?new Error('Cannot access method "'+a+'" as a property'):new Error('No access to property "'+a+'"')}function Am(i,a){return!(!i||"object"!=typeof i||!en(UF,a)&&(a in Object.prototype||a in Function.prototype))}function Nm(i){return"object"==typeof i&&i&&i.constructor===Object}var UF={length:!0,name:!0},VF={toString:!0,valueOf:!0,toLocaleString:!0};class wl{constructor(a){this.wrappedObject=a}keys(){return Object.keys(this.wrappedObject)}get(a){return Fm(this.wrappedObject,a)}set(a,e){return function Im(i,a,e){if(Nm(i)&&Am(i,a))return i[a]=e,e;throw new Error('No access to property "'+a+'"')}(this.wrappedObject,a,e),this}has(a){return function $F(i,a){return a in i}(this.wrappedObject,a)}}function xl(i){return!!i&&(i instanceof Map||i instanceof wl||"function"==typeof i.set&&"function"==typeof i.get&&"function"==typeof i.keys&&"function"==typeof i.has)}var Lm=function(){return Lm=wo.create,wo},GF=H("typed",["?BigNumber","?Complex","?DenseMatrix","?Fraction"],function(a){var{BigNumber:e,Complex:t,DenseMatrix:r,Fraction:o}=a,s=Lm();return s.clear(),s.addTypes([{name:"number",test:zt},{name:"Complex",test:Dr},{name:"BigNumber",test:Ht},{name:"Fraction",test:ps},{name:"Unit",test:Di},{name:"identifier",test:c=>Jn&&/^(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])*$/.test(c)},{name:"string",test:Jn},{name:"Chain",test:gx},{name:"Array",test:Jt},{name:"Matrix",test:yt},{name:"DenseMatrix",test:ms},{name:"SparseMatrix",test:Wr},{name:"Range",test:em},{name:"Index",test:gs},{name:"boolean",test:Hw},{name:"ResultSet",test:Zw},{name:"Help",test:qw},{name:"function",test:Jw},{name:"Date",test:Qw},{name:"RegExp",test:Xw},{name:"null",test:Yw},{name:"undefined",test:ex},{name:"AccessorNode",test:tx},{name:"ArrayNode",test:nx},{name:"AssignmentNode",test:ix},{name:"BlockNode",test:rx},{name:"ConditionalNode",test:ox},{name:"ConstantNode",test:gl},{name:"FunctionNode",test:sx},{name:"FunctionAssignmentNode",test:ax},{name:"IndexNode",test:cx},{name:"Node",test:lx},{name:"ObjectNode",test:ux},{name:"OperatorNode",test:nm},{name:"ParenthesisNode",test:dx},{name:"RangeNode",test:fx},{name:"RelationalNode",test:px},{name:"SymbolNode",test:mx},{name:"Map",test:xl},{name:"Object",test:tm}]),s.addConversions([{from:"number",to:"BigNumber",convert:function(l){if(e||El(l),function Lx(i){return i.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}(l)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+l+"). Use function bignumber(x) to convert to BigNumber.");return new e(l)}},{from:"number",to:"Complex",convert:function(l){return t||Ds(l),new t(l,0)}},{from:"BigNumber",to:"Complex",convert:function(l){return t||Ds(l),new t(l.toNumber(),0)}},{from:"Fraction",to:"BigNumber",convert:function(l){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(l){return t||Ds(l),new t(l.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(l){o||Fl(l);var u=new o(l);if(u.valueOf()!==l)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+l+"). Use function fraction(x) to convert to Fraction.");return u}},{from:"string",to:"number",convert:function(l){var u=Number(l);if(isNaN(u))throw new Error('Cannot convert "'+l+'" to a number');return u}},{from:"string",to:"BigNumber",convert:function(l){e||El(l);try{return new e(l)}catch{throw new Error('Cannot convert "'+l+'" to BigNumber')}}},{from:"string",to:"Fraction",convert:function(l){o||Fl(l);try{return new o(l)}catch{throw new Error('Cannot convert "'+l+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(l){t||Ds(l);try{return new t(l)}catch{throw new Error('Cannot convert "'+l+'" to Complex')}}},{from:"boolean",to:"number",convert:function(l){return+l}},{from:"boolean",to:"BigNumber",convert:function(l){return e||El(l),new e(+l)}},{from:"boolean",to:"Fraction",convert:function(l){return o||Fl(l),new o(+l)}},{from:"boolean",to:"string",convert:function(l){return String(l)}},{from:"Array",to:"Matrix",convert:function(l){return r||function KF(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}(),new r(l)}},{from:"Matrix",to:"Array",convert:function(l){return l.valueOf()}}]),s.onMismatch=(c,l,u)=>{var d=s.createError(c,l,u);if(["wrongType","mismatch"].includes(d.data.category)&&1===l.length&&yo(l[0])&&u.some(p=>!p.params.includes(","))){var f=new TypeError("Function '".concat(c,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(c,")'."));throw f.data=d.data,f}throw d},s.onMismatch=(c,l,u)=>{var d=s.createError(c,l,u);if(["wrongType","mismatch"].includes(d.data.category)&&1===l.length&&yo(l[0])&&u.some(p=>!p.params.includes(","))){var f=new TypeError("Function '".concat(c,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(c,")'."));throw f.data=d.data,f}throw d},s});function El(i){throw new Error("Cannot convert value ".concat(i," into a BigNumber: no class 'BigNumber' provided"))}function Ds(i){throw new Error("Cannot convert value ".concat(i," into a Complex number: no class 'Complex' provided"))}function Fl(i){throw new Error("Cannot convert value ".concat(i," into a Fraction, no class 'Fraction' provided."))}function Pt(i,a,e){return i&&"function"==typeof i.map?i.map(function(t){return Pt(t,a,e)}):a(i)}var ii="number",nr="number, number";function Rm(i){return Math.abs(i)}function jm(i,a){return i+a}function km(i,a){return i-a}function Pm(i,a){return i*a}function $m(i){return-i}function Xm(i){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!ut(a)||a<0||a>15)throw new Error("Number of decimals in function round must be an integer from 0 to 15 inclusive");return parseFloat(lm(i,a))}Rm.signature=ii,jm.signature=nr,km.signature=nr,Pm.signature=nr,$m.signature=ii;var iI=H("abs",["typed"],i=>{var{typed:a}=i;return a("abs",{number:Rm,"Complex | BigNumber | Fraction | Unit":e=>e.abs(),"Array | Matrix":a.referToSelf(e=>t=>Pt(t,e,!0))})});var bg="addScalar",CI=H(bg,["typed"],i=>{var{typed:a}=i;return a(bg,{"number, number":jm,"Complex, Complex":function(t,r){return t.add(r)},"BigNumber, BigNumber":function(t,r){return t.plus(r)},"Fraction, Fraction":function(t,r){return t.add(r)},"Unit, Unit":a.referToSelf(e=>(t,r)=>{if(null==t.value)throw new Error("Parameter x contains a unit with undefined value");if(null==r.value)throw new Error("Parameter y contains a unit with undefined value");if(!t.equalBase(r))throw new Error("Units do not match");var o=t.clone();return o.value=a.find(e,[o.valueType(),r.valueType()])(o.value,r.value),o.fixPrefix=!1,o})})}),RI=H("bignumber",["typed","BigNumber"],i=>{var{typed:a,BigNumber:e}=i;return a("bignumber",{"":function(){return new e(0)},number:function(r){return new e(r+"")},string:function(r){var o=r.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);if(o){var s=o[2],c=e(o[1]),l=new e(2).pow(Number(s));if(c.gt(l.sub(1)))throw new SyntaxError('String "'.concat(r,'" is out of range'));var u=new e(2).pow(Number(s)-1);return c.gte(u)?c.sub(l):c}return new e(r)},BigNumber:function(r){return r},Unit:a.referToSelf(t=>r=>{var o=r.clone();return o.value=t(r.value),o}),Fraction:function(r){return new e(r.n).div(r.d).times(r.s)},null:function(r){return new e(0)},"Array | Matrix":a.referToSelf(t=>r=>Pt(r,t))})});var tA=H("conj",["typed"],i=>{var{typed:a}=i;return a("conj",{"number | BigNumber | Fraction":e=>e,Complex:e=>e.conjugate(),"Array | Matrix":a.referToSelf(e=>t=>Pt(t,e))})});var Io=H("compareUnits",["typed"],i=>{var{typed:a}=i;return{"Unit, Unit":a.referToSelf(e=>(t,r)=>{if(!t.equalBase(r))throw new Error("Cannot compare units with different base");return a.find(e,[t.valueType(),r.valueType()])(t.value,r.value)})}}),Fs="equalScalar",fA=H(Fs,["typed","config"],i=>{var{typed:a,config:e}=i,t=Io({typed:a});return a(Fs,{"boolean, boolean":function(o,s){return o===s},"number, number":function(o,s){return di(o,s,e.epsilon)},"BigNumber, BigNumber":function(o,s){return o.eq(s)||function Ri(i,a,e){if(null==e)return i.eq(a);if(i.eq(a))return!0;if(i.isNaN()||a.isNaN())return!1;if(i.isFinite()&&a.isFinite()){var t=i.minus(a).abs();if(t.isZero())return!0;var r=i.constructor.max(i.abs(),a.abs());return t.lte(r.times(e))}return!1}(o,s,e.epsilon)},"Fraction, Fraction":function(o,s){return o.equals(s)},"Complex, Complex":function(o,s){return function uA(i,a,e){return di(i.re,a.re,e)&&di(i.im,a.im,e)}(o,s,e.epsilon)}},t)});H(Fs,["typed","config"],i=>{var{typed:a,config:e}=i;return a(Fs,{"number, number":function(r,o){return di(r,o,e.epsilon)}})}),Math.pow(2,53),H("hex",["typed","format"],i=>{var{typed:a,format:e}=i;return a("hex",{"number | BigNumber":function(r){return e(r,{notation:"hex"})},"number | BigNumber, number":function(r,o){return e(r,{notation:"hex",wordSize:o})}})});var wa="number";function Yg(i){return 0===i}Yg.signature=wa;var GA=H("isZero",["typed"],i=>{var{typed:a}=i;return a("isZero",{number:Yg,BigNumber:function(t){return t.isZero()},Complex:function(t){return 0===t.re&&0===t.im},Fraction:function(t){return 1===t.d&&0===t.n},Unit:a.referToSelf(e=>t=>a.find(e,t.valueType())(t.value)),"Array | Matrix":a.referToSelf(e=>t=>Pt(t,e))})});var a2=H("multiplyScalar",["typed"],i=>{var{typed:a}=i;return a("multiplyScalar",{"number, number":Pm,"Complex, Complex":function(t,r){return t.mul(r)},"BigNumber, BigNumber":function(t,r){return t.times(r)},"Fraction, Fraction":function(t,r){return t.mul(r)},"number | Fraction | BigNumber | Complex, Unit":(e,t)=>t.multiply(e),"Unit, number | Fraction | BigNumber | Complex | Unit":(e,t)=>e.multiply(t)})});var m2=H("number",["typed"],i=>{var{typed:a}=i,e=a("number",{"":function(){return 0},number:function(r){return r},string:function(r){if("NaN"===r)return NaN;var o=function f2(i){var a=i.match(/(0[box])([0-9a-fA-F]*)\.([0-9a-fA-F]*)/);return a?{input:i,radix:{"0b":2,"0o":8,"0x":16}[a[1]],integerPart:a[2],fractionalPart:a[3]}:null}(r);if(o)return function p2(i){for(var a=parseInt(i.integerPart,i.radix),e=0,t=0;t<i.fractionalPart.length;t++)e+=parseInt(i.fractionalPart[t],i.radix)/Math.pow(i.radix,t+1);var o=a+e;if(isNaN(o))throw new SyntaxError('String "'+i.input+'" is no valid number');return o}(o);var s=0,c=r.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);c&&(s=Number(c[2]),r=c[1]);var l=Number(r);if(isNaN(l))throw new SyntaxError('String "'+r+'" is no valid number');if(c){if(l>2**s-1)throw new SyntaxError('String "'.concat(r,'" is out of range'));l>=2**(s-1)&&(l-=2**s)}return l},BigNumber:function(r){return r.toNumber()},Fraction:function(r){return r.valueOf()},Unit:a.referToSelf(t=>r=>{var o=r.clone();return o.value=t(r.value),o}),null:function(r){return 0},"Unit, string | Unit":function(r,o){return r.toNumber(o)},"Array | Matrix":a.referToSelf(t=>r=>Pt(r,t))});return e.fromJSON=function(t){return parseFloat(t.value)},e});H("oct",["typed","format"],i=>{var{typed:a,format:e}=i;return a("oct",{"number | BigNumber":function(r){return e(r,{notation:"oct"})},"number | BigNumber, number":function(r,o){return e(r,{notation:"oct",wordSize:o})}})}),L(9128);Date.now();var O2=H("SparseMatrix",["typed","equalScalar","Matrix"],i=>{var{typed:a,equalScalar:e,Matrix:t}=i;function r(g,b){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(b&&!Jn(b))throw new Error("Invalid datatype: "+b);if(yt(g))!function o(g,b,_){"SparseMatrix"===b.type?(g._values=b._values?bt(b._values):void 0,g._index=bt(b._index),g._ptr=bt(b._ptr),g._size=bt(b._size),g._datatype=_||b._datatype):s(g,b.valueOf(),_||b._datatype)}(this,g,b);else if(g&&Jt(g.index)&&Jt(g.ptr)&&Jt(g.size))this._values=g.values,this._index=g.index,this._ptr=g.ptr,this._size=g.size,this._datatype=b||g.datatype;else if(Jt(g))s(this,g,b);else{if(g)throw new TypeError("Unsupported type of data ("+Mn(g)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=b}}function s(g,b,_){g._values=[],g._index=[],g._ptr=[],g._datatype=_;var D=b.length,y=0,w=e,x=0;if(Jn(_)&&(w=a.find(e,[_,_])||e,x=a.convert(0,_)),D>0){var C=0;do{g._ptr.push(g._index.length);for(var I=0;I<D;I++){var N=b[I];if(Jt(N)){if(0===C&&y<N.length&&(y=N.length),C<N.length){var B=N[C];w(B,x)||(g._values.push(B),g._index.push(I))}}else 0===C&&y<1&&(y=1),w(N,x)||(g._values.push(N),g._index.push(I))}C++}while(C<y)}g._ptr.push(g._index.length),g._size=[D,y]}function u(g,b,_,D){if(_-b==0)return _;for(var y=b;y<_;y++)if(D[y]===g)return y;return b}function f(g,b,_,D,y,w,x){y.splice(g,0,D),w.splice(g,0,b);for(var C=_+1;C<x.length;C++)x[C]++}function p(g,b,_,D){var y=D||0,w=e,x=0;Jn(g._datatype)&&(w=a.find(e,[g._datatype,g._datatype])||e,x=a.convert(0,g._datatype),y=a.convert(y,g._datatype));var B,E,j,C=!w(y,x),I=g._size[0],N=g._size[1];if(_>N){for(E=N;E<_;E++)if(g._ptr[E]=g._values.length,C)for(B=0;B<I;B++)g._values.push(y),g._index.push(B);g._ptr[_]=g._values.length}else _<N&&(g._ptr.splice(_+1,N-_),g._values.splice(g._ptr[_],g._values.length),g._index.splice(g._ptr[_],g._index.length));if(N=_,b>I){if(C){var P=0;for(E=0;E<N;E++){g._ptr[E]=g._ptr[E]+P,j=g._ptr[E+1]+P;var G=0;for(B=I;B<b;B++,G++)g._values.splice(j+G,0,y),g._index.splice(j+G,0,B),P++}g._ptr[N]=g._values.length}}else if(b<I){var Q=0;for(E=0;E<N;E++){g._ptr[E]=g._ptr[E]-Q;var J=g._ptr[E+1]-Q;for(j=g._ptr[E];j<J;j++)(B=g._index[j])>b-1&&(g._values.splice(j,1),g._index.splice(j,1),Q++)}g._ptr[E]=g._values.length}return g._size[0]=b,g._size[1]=_,g}function h(g,b,_,D,y){var I,N,w=D[0],x=D[1],C=[];for(I=0;I<w;I++)for(C[I]=[],N=0;N<x;N++)C[I][N]=0;for(N=0;N<x;N++)for(var E=_[N+1],j=_[N];j<E;j++)C[I=b[j]][N]=g?y?bt(g[j]):g[j]:1;return C}return(r.prototype=new t).createSparseMatrix=function(g,b){return new r(g,b)},Object.defineProperty(r,"name",{value:"SparseMatrix"}),r.prototype.constructor=r,r.prototype.type="SparseMatrix",r.prototype.isSparseMatrix=!0,r.prototype.getDataType=function(){return Ma(this._values,Mn)},r.prototype.storage=function(){return"sparse"},r.prototype.datatype=function(){return this._datatype},r.prototype.create=function(g,b){return new r(g,b)},r.prototype.density=function(){var g=this._size[0],b=this._size[1];return 0!==g&&0!==b?this._index.length/(g*b):0},r.prototype.subset=function(g,b,_){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return function c(g,b){if(!gs(b))throw new TypeError("Invalid index");if(b.isScalar())return g.get(b.min());var D=b.size();if(D.length!==g._size.length)throw new At(D.length,g._size.length);var y,w,x,C,I=b.min(),N=b.max();for(y=0,w=g._size.length;y<w;y++)nn(I[y],g._size[y]),nn(N[y],g._size[y]);var B=g._values,E=g._index,j=g._ptr,P=b.dimension(0),G=b.dimension(1),Q=[],Y=[];P.forEach(function(R,oe){Y[R]=oe[0],Q[R]=!0});var J=B?[]:void 0,O=[],ue=[];return G.forEach(function(R){for(ue.push(O.length),x=j[R],C=j[R+1];x<C;x++)!0===Q[y=E[x]]&&(O.push(Y[y]),J&&J.push(B[x]))}),ue.push(O.length),new r({values:J,index:O,ptr:ue,size:D,datatype:g._datatype})}(this,g);case 2:case 3:return function l(g,b,_,D){if(!b||!0!==b.isIndex)throw new TypeError("Invalid index");var x,y=b.size(),w=b.isScalar();if(yt(_)?(x=_.size(),_=_.toArray()):x=wt(_),w){if(0!==x.length)throw new TypeError("Scalar expected");g.set(b.min(),_,D)}else{if(1!==y.length&&2!==y.length)throw new At(y.length,g._size.length,"<");if(x.length<y.length){for(var C=0,I=0;1===y[C]&&1===x[C];)C++;for(;1===y[C];)I++,C++;_=Mm(_,y.length,I,x)}if(!bo(y,x))throw new At(y,x,">");if(1===y.length)b.dimension(0).forEach(function(j,P){nn(j),g.set([j,0],_[P[0]],D)});else{var B=b.dimension(0),E=b.dimension(1);B.forEach(function(j,P){nn(j),E.forEach(function(G,Q){nn(G),g.set([j,G],_[P[0]][Q[0]],D)})})}}return g}(this,g,b,_);default:throw new SyntaxError("Wrong number of arguments")}},r.prototype.get=function(g){if(!Jt(g))throw new TypeError("Array expected");if(g.length!==this._size.length)throw new At(g.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var b=g[0],_=g[1];nn(b,this._size[0]),nn(_,this._size[1]);var D=u(b,this._ptr[_],this._ptr[_+1],this._index);return D<this._ptr[_+1]&&this._index[D]===b?this._values[D]:0},r.prototype.set=function(g,b,_){if(!Jt(g))throw new TypeError("Array expected");if(g.length!==this._size.length)throw new At(g.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var D=g[0],y=g[1],w=this._size[0],x=this._size[1],C=e,I=0;Jn(this._datatype)&&(C=a.find(e,[this._datatype,this._datatype])||e,I=a.convert(0,this._datatype)),(D>w-1||y>x-1)&&(p(this,Math.max(D+1,w),Math.max(y+1,x),_),w=this._size[0],x=this._size[1]),nn(D,w),nn(y,x);var N=u(D,this._ptr[y],this._ptr[y+1],this._index);return N<this._ptr[y+1]&&this._index[N]===D?C(b,I)?function d(g,b,_,D,y){_.splice(g,1),D.splice(g,1);for(var w=b+1;w<y.length;w++)y[w]--}(N,y,this._values,this._index,this._ptr):this._values[N]=b:C(b,I)||f(N,D,y,b,this._values,this._index,this._ptr),this},r.prototype.resize=function(g,b,_){if(!yo(g))throw new TypeError("Array or Matrix expected");var D=g.valueOf().map(w=>Array.isArray(w)&&1===w.length?w[0]:w);if(2!==D.length)throw new Error("Only two dimensions matrix are supported");return D.forEach(function(w){if(!zt(w)||!ut(w)||w<0)throw new TypeError("Invalid size, must contain positive integers (size: "+Rt(D)+")")}),p(_?this.clone():this,D[0],D[1],b)},r.prototype.reshape=function(g,b){if(!Jt(g))throw new TypeError("Array expected");if(2!==g.length)throw new Error("Sparse matrices can only be reshaped in two dimensions");g.forEach(function(R){if(!zt(R)||!ut(R)||R<=-2||0===R)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+Rt(g)+")")});var _=this._size[0]*this._size[1];if(_!==(g=Sl(g,_))[0]*g[1])throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var y=b?this.clone():this;if(this._size[0]===g[0]&&this._size[1]===g[1])return y;for(var w=[],x=0;x<y._ptr.length;x++)for(var C=0;C<y._ptr[x+1]-y._ptr[x];C++)w.push(x);for(var I=y._values.slice(),N=y._index.slice(),B=0;B<y._index.length;B++){var P=N[B]*y._size[1]+w[B];w[B]=P%g[1],N[B]=Math.floor(P/g[1])}y._values.length=0,y._index.length=0,y._ptr.length=g[1]+1,y._size=g.slice();for(var G=0;G<y._ptr.length;G++)y._ptr[G]=0;for(var Q=0;Q<I.length;Q++){var Y=N[Q],J=w[Q],O=I[Q];f(u(Y,y._ptr[J],y._ptr[J+1],y._index),Y,J,O,y._values,y._index,y._ptr)}return y},r.prototype.clone=function(){return new r({values:this._values?bt(this._values):void 0,index:bt(this._index),ptr:bt(this._ptr),size:bt(this._size),datatype:this._datatype})},r.prototype.size=function(){return this._size.slice(0)},r.prototype.map=function(g,b){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var _=this,D=this._size[0],y=this._size[1],w=pm(g);return function m(g,b,_,D,y,w,x){var C=[],I=[],N=[],B=e,E=0;Jn(g._datatype)&&(B=a.find(e,[g._datatype,g._datatype])||e,E=a.convert(0,g._datatype));for(var j=function(ce,pe,Se){ce=w(ce,pe,Se),B(ce,E)||(C.push(ce),I.push(pe))},P=D;P<=y;P++){N.push(C.length);var G=g._ptr[P],Q=g._ptr[P+1];if(x)for(var Y=G;Y<Q;Y++){var J=g._index[Y];J>=b&&J<=_&&j(g._values[Y],J-b,P-D)}else{for(var O={},ue=G;ue<Q;ue++)O[g._index[ue]]=g._values[ue];for(var oe=b;oe<=_;oe++)j(oe in O?O[oe]:0,oe-b,P-D)}}return N.push(C.length),new r({values:C,index:I,ptr:N,size:[_-b+1,y-D+1]})}(this,0,D-1,0,y-1,function(I,N,B){return 1===w?g(I):2===w?g(I,[N,B]):g(I,[N,B],_)},b)},r.prototype.forEach=function(g,b){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var D=this._size[0],y=this._size[1],w=0;w<y;w++){var x=this._ptr[w],C=this._ptr[w+1];if(b)for(var I=x;I<C;I++)g(this._values[I],[this._index[I],w],this);else{for(var B={},E=x;E<C;E++)B[this._index[E]]=this._values[E];for(var P=0;P<D;P++)g(P in B?B[P]:0,[P,w],this)}}},r.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var g=this._size[1],b=0;b<g;b++)for(var D=this._ptr[b+1],y=this._ptr[b];y<D;y++){var w=this._index[y];yield{value:this._values[y],index:[w,b]}}},r.prototype.toArray=function(){return h(this._values,this._index,this._ptr,this._size,!0)},r.prototype.valueOf=function(){return h(this._values,this._index,this._ptr,this._size,!1)},r.prototype.format=function(g){for(var b=this._size[0],_=this._size[1],D=this.density(),y="Sparse Matrix ["+Rt(b,g)+" x "+Rt(_,g)+"] density: "+Rt(D,g)+"\n",w=0;w<_;w++)for(var C=this._ptr[w+1],I=this._ptr[w];I<C;I++)y+="\n    ("+Rt(this._index[I],g)+", "+Rt(w,g)+") ==> "+(this._values?Rt(this._values[I],g):"X");return y},r.prototype.toString=function(){return Rt(this.toArray())},r.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},r.prototype.diagonal=function(g){if(g){if(Ht(g)&&(g=g.toNumber()),!zt(g)||!ut(g))throw new TypeError("The parameter k must be an integer number")}else g=0;var b=g>0?g:0,_=g<0?-g:0,y=this._size[1],w=Math.min(this._size[0]-_,y-b),x=[],C=[],I=[];I[0]=0;for(var N=b;N<y&&x.length<w;N++)for(var E=this._ptr[N+1],j=this._ptr[N];j<E;j++){var P=this._index[j];if(P===N-b+_){x.push(this._values[j]),C[x.length-1]=P-_;break}}return I.push(x.length),new r({values:x,index:C,ptr:I,size:[w,1]})},r.fromJSON=function(g){return new r(g)},r.diagonal=function(g,b,_,D,y){if(!Jt(g))throw new TypeError("Array expected, size parameter");if(2!==g.length)throw new Error("Only two dimensions matrix are supported");if(g=g.map(function(R){if(Ht(R)&&(R=R.toNumber()),!zt(R)||!ut(R)||R<1)throw new Error("Size values must be positive integers");return R}),_){if(Ht(_)&&(_=_.toNumber()),!zt(_)||!ut(_))throw new TypeError("The parameter k must be an integer number")}else _=0;var w=e,x=0;Jn(y)&&(w=a.find(e,[y,y])||e,x=a.convert(0,y));var j,C=_>0?_:0,I=_<0?-_:0,N=g[0],B=g[1],E=Math.min(N-I,B-C);if(Jt(b)){if(b.length!==E)throw new Error("Invalid value array length");j=function(oe){return b[oe]}}else if(yt(b)){var P=b.size();if(1!==P.length||P[0]!==E)throw new Error("Invalid matrix length");j=function(oe){return b.get([oe])}}else j=function(){return b};for(var G=[],Q=[],Y=[],J=0;J<B;J++){Y.push(G.length);var O=J-C;if(O>=0&&O<E){var ue=j(O);w(ue,x)||(Q.push(O+I),G.push(ue))}}return Y.push(G.length),new r({values:G,index:Q,ptr:Y,size:[N,B]})},r.prototype.swapRows=function(g,b){if(!(zt(g)&&ut(g)&&zt(b)&&ut(b)))throw new Error("Row index must be positive integers");if(2!==this._size.length)throw new Error("Only two dimensional matrix is supported");return nn(g,this._size[0]),nn(b,this._size[0]),r._swapRows(g,b,this._size[1],this._values,this._index,this._ptr),this},r._forEachRow=function(g,b,_,D,y){for(var x=D[g+1],C=D[g];C<x;C++)y(_[C],b[C])},r._swapRows=function(g,b,_,D,y,w){for(var x=0;x<_;x++){var C=w[x],I=w[x+1],N=u(g,C,I,y),B=u(b,C,I,y);if(N<I&&B<I&&y[N]===g&&y[B]===b){if(D){var E=D[N];D[N]=D[B],D[B]=E}}else if(N<I&&y[N]===g&&(B>=I||y[B]!==b)){var j=D?D[N]:void 0;y.splice(B,0,b),D&&D.splice(B,0,j),y.splice(B<=N?N+1:N,1),D&&D.splice(B<=N?N+1:N,1)}else if(B<I&&y[B]===b&&(N>=I||y[N]!==g)){var P=D?D[B]:void 0;y.splice(N,0,g),D&&D.splice(N,0,P),y.splice(N<=B?B+1:B,1),D&&D.splice(N<=B?B+1:B,1)}}},r},{isClass:!0}),Ih="subtractScalar",z2=H(Ih,["typed"],i=>{var{typed:a}=i;return a(Ih,{"number, number":km,"Complex, Complex":function(t,r){return t.sub(r)},"BigNumber, BigNumber":function(t,r){return t.minus(r)},"Fraction, Fraction":function(t,r){return t.sub(r)},"Unit, Unit":a.referToSelf(e=>(t,r)=>{if(null==t.value)throw new Error("Parameter x contains a unit with undefined value");if(null==r.value)throw new Error("Parameter y contains a unit with undefined value");if(!t.equalBase(r))throw new Error("Units do not match");var o=t.clone();return o.value=a.find(e,[o.valueType(),r.valueType()])(o.value,r.value),o.fixPrefix=!1,o})})});H("bin",["typed","format"],i=>{var{typed:a,format:e}=i;return a("bin",{"number | BigNumber":function(r){return e(r,{notation:"bin"})},"number | BigNumber, number":function(r,o){return e(r,{notation:"bin",wordSize:o})}})});var Zh="unaryMinus",IT=H(Zh,["typed"],i=>{var{typed:a}=i;return a(Zh,{number:$m,"Complex | BigNumber | Fraction":e=>e.neg(),Unit:a.referToSelf(e=>t=>{var r=t.clone();return r.value=a.find(e,r.valueType())(t.value),r}),"Array | Matrix":a.referToSelf(e=>t=>Pt(t,e,!0))})}),RT=H("fraction",["typed","Fraction"],i=>{var{typed:a,Fraction:e}=i;return a("fraction",{number:function(r){if(!isFinite(r)||isNaN(r))throw new Error(r+" cannot be represented as a fraction");return new e(r)},string:function(r){return new e(r)},"number, number":function(r,o){return new e(r,o)},null:function(r){return new e(0)},BigNumber:function(r){return new e(r.toString())},Fraction:function(r){return r},Unit:a.referToSelf(t=>r=>{var o=r.clone();return o.value=t(r.value),o}),Object:function(r){return new e(r)},"Array | Matrix":a.referToSelf(t=>r=>Pt(r,t))})}),$T=H("matrix",["typed","Matrix","DenseMatrix","SparseMatrix"],i=>{var{typed:a,DenseMatrix:t,SparseMatrix:r}=i;return a("matrix",{"":function(){return o([])},string:function(c){return o([],c)},"string, string":function(c,l){return o([],c,l)},Array:function(c){return o(c)},Matrix:function(c){return o(c,c.storage())},"Array | Matrix, string":o,"Array | Matrix, string, string":o});function o(s,c,l){if("dense"===c||"default"===c||void 0===c)return new t(s,l);if("sparse"===c)return new r(s,l);throw new TypeError("Unknown matrix type "+JSON.stringify(c)+".")}});function tv(){throw new Error('No "bignumber" implementation available')}function GT(){throw new Error('No "fraction" implementation available')}var ZT=H("numeric",["number","?bignumber","?fraction"],i=>{var{number:a,bignumber:e,fraction:t}=i,r={string:!0,number:!0,BigNumber:!0,Fraction:!0},o={number:s=>a(s),BigNumber:e?s=>e(s):tv,Fraction:t?s=>t(s):GT};return function(c){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"number";if(void 0!==(arguments.length>2?arguments[2]:void 0))throw new SyntaxError("numeric() takes one or two arguments");var d=Mn(c);if(!(d in r))throw new TypeError("Cannot convert "+c+' of type "'+d+'"; valid input types are '+Object.keys(r).join(", "));if(!(l in o))throw new TypeError("Cannot convert "+c+' to type "'+l+'"; valid output types are '+Object.keys(o).join(", "));return l===d?c:o[l](c)}}),eN=H("size",["typed","config","?matrix"],i=>{var{typed:a,config:e,matrix:t}=i;return a("size",{Matrix:function(o){return o.create(o.size())},Array:wt,string:function(o){return"Array"===e.matrix?[o.length]:t([o.length])},"number | Complex | BigNumber | Unit | boolean | null":function(o){return"Array"===e.matrix?[]:t?t([]):function nv(){throw new Error('No "matrix" implementation available')}()}})}),cN=H("zeros",["typed","config","matrix","BigNumber"],i=>{var{typed:a,config:e,matrix:t,BigNumber:r}=i;return a("zeros",{"":function(){return"Array"===e.matrix?o([]):o([],"default")},"...number | BigNumber | string":function(u){if("string"==typeof u[u.length-1]){var f=u.pop();return o(u,f)}return"Array"===e.matrix?o(u):o(u,"default")},Array:o,Matrix:function(u){var d=u.storage();return o(u.valueOf(),d)},"Array | Matrix, string":function(u,d){return o(u.valueOf(),d)}});function o(l,u){var d=function s(l){var u=!1;return l.forEach(function(d,f,p){Ht(d)&&(u=!0,p[f]=d.toNumber())}),u}(l),f=d?new r(0):0;if(function c(l){l.forEach(function(u){if("number"!=typeof u||!ut(u)||u<0)throw new Error("Parameters in function zeros must be positive integers")})}(l),u){var p=t(u);return l.length>0?p.resize(l,f):p}var m=[];return l.length>0?So(m,l,f):m}}),hv="divideScalar",MN=H(hv,["typed","numeric"],i=>{var{typed:a}=i;return a(hv,{"number, number":function(r,o){return r/o},"Complex, Complex":function(r,o){return r.div(o)},"BigNumber, BigNumber":function(r,o){return r.div(o)},"Fraction, Fraction":function(r,o){return r.div(o)},"Unit, number | Complex | Fraction | BigNumber | Unit":(t,r)=>t.divide(r),"number | Fraction | Complex | BigNumber, Unit":(t,r)=>r.divideInto(t)})}),Vn=H("matAlgo11xS0s",["typed","equalScalar"],i=>{var{typed:a,equalScalar:e}=i;return function(r,o,s,c){var l=r._values,u=r._index,d=r._ptr,f=r._size,p=r._datatype;if(!l)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var g,m=f[0],h=f[1],b=e,_=0,D=s;"string"==typeof p&&(b=a.find(e,[g=p,g]),_=a.convert(0,g),o=a.convert(o,g),D=a.find(s,[g,g]));for(var y=[],w=[],x=[],C=0;C<h;C++){x[C]=w.length;for(var N=d[C+1],B=d[C];B<N;B++){var E=u[B],j=c?D(o,l[B]):D(l[B],o);b(j,_)||(w.push(E),y.push(j))}}return x[h]=w.length,r.createSparseMatrix({values:y,index:w,ptr:x,size:[m,h],datatype:g})}}),Rn=H("matAlgo12xSfs",["typed","DenseMatrix"],i=>{var{typed:a,DenseMatrix:e}=i;return function(r,o,s,c){var l=r._values,u=r._index,d=r._ptr,f=r._size,p=r._datatype;if(!l)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var g,m=f[0],h=f[1],b=s;"string"==typeof p&&(o=a.convert(o,g=p),b=a.find(s,[g,g]));for(var _=[],D=[],y=[],w=0;w<h;w++){for(var x=w+1,I=d[w+1],N=d[w];N<I;N++){var B=u[N];D[B]=l[N],y[B]=x}for(var E=0;E<m;E++)0===w&&(_[E]=[]),_[E][w]=y[E]===x?c?b(o,D[E]):b(D[E],o):c?b(o,0):b(0,o)}return new e({data:_,size:[m,h],datatype:g})}}),xi=H("matAlgo14xDs",["typed"],i=>{var{typed:a}=i;return function(r,o,s,c){var f,l=r._data,u=r._size,d=r._datatype,p=s;"string"==typeof d&&(o=a.convert(o,f=d),p=a.find(s,[f,f]));var m=u.length>0?e(p,0,u,u[0],l,o,c):[];return r.createDenseMatrix({data:m,size:bt(u),datatype:f})};function e(t,r,o,s,c,l,u){var d=[];if(r===o.length-1)for(var f=0;f<s;f++)d[f]=u?t(l,c[f]):t(c[f],l);else for(var p=0;p<s;p++)d[p]=e(t,r+1,o,o[r+1],c[p],l,u);return d}}),bv=(H("equal",["typed","equalScalar"],i=>{var{typed:a,equalScalar:e}=i;return a("equal",{"any, any":function(r,o){return null===r?null===o:null===o?null===r:void 0===r?void 0===o:void 0===o?void 0===r:e(r,o)}})}),"identity"),YN=H(bv,["typed","config","matrix","BigNumber","DenseMatrix","SparseMatrix"],i=>{var{typed:a,config:e,matrix:t,BigNumber:r,DenseMatrix:o,SparseMatrix:s}=i;return a(bv,{"":function(){return"Matrix"===e.matrix?t([]):[]},string:function(d){return t(d)},"number | BigNumber":function(d){return l(d,d,"Matrix"===e.matrix?"dense":void 0)},"number | BigNumber, string":function(d,f){return l(d,d,f)},"number | BigNumber, number | BigNumber":function(d,f){return l(d,f,"Matrix"===e.matrix?"dense":void 0)},"number | BigNumber, number | BigNumber, string":function(d,f,p){return l(d,f,p)},Array:function(d){return c(d)},"Array, string":function(d,f){return c(d,f)},Matrix:function(d){return c(d.valueOf(),d.storage())},"Matrix, string":function(d,f){return c(d.valueOf(),f)}});function c(u,d){switch(u.length){case 0:return d?t(d):[];case 1:return l(u[0],u[0],d);case 2:return l(u[0],u[1],d);default:throw new Error("Vector containing two values expected")}}function l(u,d,f){var p=Ht(u)||Ht(d)?r:null;if(Ht(u)&&(u=u.toNumber()),Ht(d)&&(d=d.toNumber()),!ut(u)||u<1)throw new Error("Parameters in function identity must be positive integers");if(!ut(d)||d<1)throw new Error("Parameters in function identity must be positive integers");var m=p?new r(1):1,h=p?new p(0):0,g=[u,d];if(f){if("sparse"===f)return s.diagonal(g,m,0,h);if("dense"===f)return o.diagonal(g,m,0,h);throw new TypeError('Unknown matrix type "'.concat(f,'"'))}for(var b=So([],g,h),_=u<d?u:d,D=0;D<_;D++)b[D][D]=m;return b}});function Hr(i,a,e,t){if(!(this instanceof Hr))throw new SyntaxError("Constructor must be called with the new operator");this.fn=i,this.count=a,this.min=e,this.max=t,this.message="Wrong number of arguments in function "+i+" ("+a+" provided, "+e+(null!=t?"-"+t:"")+" expected)",this.stack=(new Error).stack}(Hr.prototype=new Error).constructor=Error,Hr.prototype.name="ArgumentsError",Hr.prototype.isArgumentsError=!0;var Lo="Number of decimals in function round must be an integer",NL=H("round",["typed","matrix","equalScalar","zeros","BigNumber","DenseMatrix"],i=>{var{typed:a,matrix:e,equalScalar:t,zeros:r,BigNumber:o,DenseMatrix:s}=i,c=Vn({typed:a,equalScalar:t}),l=Rn({typed:a,DenseMatrix:s}),u=xi({typed:a});return a("round",{number:Xm,"number, number":Xm,"number, BigNumber":function(f,p){if(!p.isInteger())throw new TypeError(Lo);return new o(f).toDecimalPlaces(p.toNumber())},Complex:function(f){return f.round()},"Complex, number":function(f,p){if(p%1)throw new TypeError(Lo);return f.round(p)},"Complex, BigNumber":function(f,p){if(!p.isInteger())throw new TypeError(Lo);var m=p.toNumber();return f.round(m)},BigNumber:function(f){return f.toDecimalPlaces(0)},"BigNumber, BigNumber":function(f,p){if(!p.isInteger())throw new TypeError(Lo);return f.toDecimalPlaces(p.toNumber())},Fraction:function(f){return f.round()},"Fraction, number":function(f,p){if(p%1)throw new TypeError(Lo);return f.round(p)},"Fraction, BigNumber":function(f,p){if(!p.isInteger())throw new TypeError(Lo);return f.round(p.toNumber())},"Array | Matrix":a.referToSelf(d=>f=>Pt(f,d,!0)),"SparseMatrix, number | BigNumber":a.referToSelf(d=>(f,p)=>c(f,p,d,!1)),"DenseMatrix, number | BigNumber":a.referToSelf(d=>(f,p)=>u(f,p,d,!1)),"Array, number | BigNumber":a.referToSelf(d=>(f,p)=>u(e(f),p,d,!1).valueOf()),"number | Complex | BigNumber | Fraction, SparseMatrix":a.referToSelf(d=>(f,p)=>t(f,0)?r(p.size(),p.storage()):l(p,f,d,!0)),"number | Complex | BigNumber | Fraction, DenseMatrix":a.referToSelf(d=>(f,p)=>t(f,0)?r(p.size(),p.storage()):u(p,f,d,!0)),"number | Complex | BigNumber | Fraction, Array":a.referToSelf(d=>(f,p)=>u(e(p),f,d,!0).valueOf())})}),js="unequal";H(js,["typed","equalScalar"],i=>{var{typed:a,equalScalar:e}=i;return a(js,{"any, any":function(r,o){return null===r?null!==o:null===o?null!==r:void 0===r?void 0!==o:void 0===o?void 0!==r:!e(r,o)}})});var SB=H("dot",["typed","addScalar","multiplyScalar","conj","size"],i=>{var{typed:a,addScalar:e,multiplyScalar:t,conj:r,size:o}=i;return a("dot",{"Array | DenseMatrix, Array | DenseMatrix":function c(d,f){var p=s(d,f),m=yt(d)?d._data:d,h=yt(d)?d._datatype:void 0,g=yt(f)?f._data:f,b=yt(f)?f._datatype:void 0,_=2===u(d).length,D=2===u(f).length,y=e,w=t;if(h&&b&&h===b&&"string"==typeof h){var x=h;y=a.find(e,[x,x]),w=a.find(t,[x,x])}if(!_&&!D){for(var C=w(r(m[0]),g[0]),I=1;I<p;I++)C=y(C,w(r(m[I]),g[I]));return C}if(!_&&D){for(var N=w(r(m[0]),g[0][0]),B=1;B<p;B++)N=y(N,w(r(m[B]),g[B][0]));return N}if(_&&!D){for(var E=w(r(m[0][0]),g[0]),j=1;j<p;j++)E=y(E,w(r(m[j][0]),g[j]));return E}if(_&&D){for(var P=w(r(m[0][0]),g[0][0]),G=1;G<p;G++)P=y(P,w(r(m[G][0]),g[G][0]));return P}},"SparseMatrix, SparseMatrix":function l(d,f){s(d,f);for(var p=d._index,m=d._values,h=f._index,g=f._values,b=0,_=e,D=t,y=0,w=0;y<p.length&&w<h.length;){var x=p[y],C=h[w];x<C?y++:x>C?w++:x===C&&(b=_(b,D(m[y],g[w])),y++,w++)}return b}});function s(d,f){var h,g,p=u(d),m=u(f);if(1===p.length)h=p[0];else{if(2!==p.length||1!==p[1])throw new RangeError("Expected a column vector, instead got a matrix of size ("+p.join(", ")+")");h=p[0]}if(1===m.length)g=m[0];else{if(2!==m.length||1!==m[1])throw new RangeError("Expected a column vector, instead got a matrix of size ("+m.join(", ")+")");g=m[0]}if(h!==g)throw new RangeError("Vectors must have equal length ("+h+" != "+g+")");if(0===h)throw new RangeError("Cannot calculate the dot product of empty vectors");return h}function u(d){return yt(d)?d.size():o(d)}}),kl="number | BigNumber | Fraction | Matrix | Array";"".concat(kl,", ").concat(kl,", ...").concat(kl);var n_="multiply",XB=H(n_,["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],i=>{var{typed:a,matrix:e,addScalar:t,multiplyScalar:r,equalScalar:o,dot:s}=i,c=Vn({typed:a,equalScalar:o}),l=xi({typed:a});function u(x,C){switch(x.length){case 1:switch(C.length){case 1:if(x[0]!==C[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(x[0]!==C[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+x[0]+") must match Matrix rows ("+C[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+C.length+" dimensions)")}break;case 2:switch(C.length){case 1:if(x[1]!==C[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+x[1]+") must match Vector length ("+C[0]+")");break;case 2:if(x[1]!==C[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+x[1]+") must match Matrix B rows ("+C[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+C.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+x.length+" dimensions)")}}var m=a("_multiplyMatrixVector",{"DenseMatrix, any":function g(x,C){var Q,I=x._data,N=x._size,B=x._datatype,E=C._data,j=C._datatype,P=N[0],G=N[1],Y=t,J=r;B&&j&&B===j&&"string"==typeof B&&(Y=a.find(t,[Q=B,Q]),J=a.find(r,[Q,Q]));for(var O=[],ue=0;ue<P;ue++){for(var R=I[ue],oe=J(R[0],E[0]),me=1;me<G;me++)oe=Y(oe,J(R[me],E[me]));O[ue]=oe}return x.createDenseMatrix({data:O,size:[P],datatype:Q})},"SparseMatrix, any":function D(x,C){var I=x._values,N=x._index,B=x._ptr,E=x._datatype;if(!I)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var ue,j=C._data,P=C._datatype,G=x._size[0],Q=C._size[0],Y=[],J=[],O=[],R=t,oe=r,me=o,we=0;E&&P&&E===P&&"string"==typeof E&&(R=a.find(t,[ue=E,ue]),oe=a.find(r,[ue,ue]),me=a.find(o,[ue,ue]),we=a.convert(0,ue));var ce=[],pe=[];O[0]=0;for(var Se=0;Se<Q;Se++){var ve=j[Se];if(!me(ve,we))for(var je=B[Se+1],We=B[Se];We<je;We++){var De=N[We];pe[De]?ce[De]=R(ce[De],oe(ve,I[We])):(pe[De]=!0,J.push(De),ce[De]=oe(ve,I[We]))}}for(var rt=J.length,et=0;et<rt;et++)Y[et]=ce[J[et]];return O[1]=J.length,x.createSparseMatrix({values:Y,index:J,ptr:O,size:[G,1],datatype:ue})}}),h=a("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":function b(x,C){var J,I=x._data,N=x._size,B=x._datatype,E=C._data,P=C._datatype,G=N[0],Q=N[1],Y=C._size[1],O=t,ue=r;B&&P&&B===P&&"string"==typeof B&&(O=a.find(t,[J=B,J]),ue=a.find(r,[J,J]));for(var R=[],oe=0;oe<G;oe++){var me=I[oe];R[oe]=[];for(var we=0;we<Y;we++){for(var ce=ue(me[0],E[0][we]),pe=1;pe<Q;pe++)ce=O(ce,ue(me[pe],E[pe][we]));R[oe][we]=ce}}return x.createDenseMatrix({data:R,size:[G,Y],datatype:J})},"DenseMatrix, SparseMatrix":function _(x,C){var I=x._data,N=x._size,B=x._datatype,E=C._values,j=C._index,P=C._ptr,G=C._size,Q=C._datatype;if(!E)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var O,Y=N[0],J=G[1],ue=t,R=r,oe=o,me=0;B&&Q&&B===Q&&"string"==typeof B&&(ue=a.find(t,[O=B,O]),R=a.find(r,[O,O]),oe=a.find(o,[O,O]),me=a.convert(0,O));for(var we=[],ce=[],pe=[],Se=C.createSparseMatrix({values:we,index:ce,ptr:pe,size:[Y,J],datatype:O}),ve=0;ve<J;ve++){pe[ve]=ce.length;var xe=P[ve],je=P[ve+1];if(je>xe)for(var We=0,De=0;De<Y;De++){for(var rt=De+1,et=void 0,Ge=xe;Ge<je;Ge++){var ot=j[Ge];We!==rt?(et=R(I[De][ot],E[Ge]),We=rt):et=ue(et,R(I[De][ot],E[Ge]))}We===rt&&!oe(et,me)&&(ce.push(De),we.push(et))}}return pe[J]=ce.length,Se},"SparseMatrix, DenseMatrix":function y(x,C){var I=x._values,N=x._index,B=x._ptr,E=x._datatype;if(!I)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var J,j=C._data,P=C._datatype,G=x._size[0],Q=C._size[0],Y=C._size[1],O=t,ue=r,R=o,oe=0;E&&P&&E===P&&"string"==typeof E&&(O=a.find(t,[J=E,J]),ue=a.find(r,[J,J]),R=a.find(o,[J,J]),oe=a.convert(0,J));for(var me=[],we=[],ce=[],pe=x.createSparseMatrix({values:me,index:we,ptr:ce,size:[G,Y],datatype:J}),Se=[],ve=[],xe=0;xe<Y;xe++){ce[xe]=we.length;for(var je=xe+1,We=0;We<Q;We++){var De=j[We][xe];if(!R(De,oe))for(var et=B[We+1],Ge=B[We];Ge<et;Ge++){var ot=N[Ge];ve[ot]!==je?(ve[ot]=je,we.push(ot),Se[ot]=ue(De,I[Ge])):Se[ot]=O(Se[ot],ue(De,I[Ge]))}}for(var te=we.length,he=ce[xe];he<te;he++)me[he]=Se[we[he]]}return ce[Y]=we.length,pe},"SparseMatrix, SparseMatrix":function w(x,C){var ue,I=x._values,N=x._index,B=x._ptr,E=x._datatype,j=C._values,P=C._index,G=C._ptr,Q=C._datatype,Y=x._size[0],J=C._size[1],O=I&&j,R=t,oe=r;E&&Q&&E===Q&&"string"==typeof E&&(R=a.find(t,[ue=E,ue]),oe=a.find(r,[ue,ue]));for(var xe,We,De,et,Ge,ot,me=O?[]:void 0,we=[],ce=[],pe=x.createSparseMatrix({values:me,index:we,ptr:ce,size:[Y,J],datatype:ue}),Se=O?[]:void 0,ve=[],K=0;K<J;K++){ce[K]=we.length;var te=K+1;for(et=G[K+1],De=G[K];De<et;De++)if(ot=P[De],O)for(We=B[ot+1],xe=B[ot];xe<We;xe++)ve[Ge=N[xe]]!==te?(ve[Ge]=te,we.push(Ge),Se[Ge]=oe(j[De],I[xe])):Se[Ge]=R(Se[Ge],oe(j[De],I[xe]));else for(We=B[ot+1],xe=B[ot];xe<We;xe++)ve[Ge=N[xe]]!==te&&(ve[Ge]=te,we.push(Ge));if(O)for(var _e=we.length,Fe=ce[K];Fe<_e;Fe++)me[Fe]=Se[we[Fe]]}return ce[J]=we.length,pe}});return a(n_,r,{"Array, Array":a.referTo("Matrix, Matrix",x=>(C,I)=>{u(wt(C),wt(I));var N=x(e(C),e(I));return yt(N)?N.valueOf():N}),"Matrix, Matrix":function(C,I){var N=C.size(),B=I.size();return u(N,B),1===N.length?1===B.length?function d(x,C,I){if(0===I)throw new Error("Cannot multiply two empty vectors");return s(x,C)}(C,I,N[0]):function f(x,C){if("dense"!==C.storage())throw new Error("Support for SparseMatrix not implemented");return function p(x,C){var Y,I=x._data,B=x._datatype,E=C._data,P=C._datatype,G=x._size[0],Q=C._size[1],J=t,O=r;B&&P&&B===P&&"string"==typeof B&&(J=a.find(t,[Y=B,Y]),O=a.find(r,[Y,Y]));for(var ue=[],R=0;R<Q;R++){for(var oe=O(I[0],E[0][R]),me=1;me<G;me++)oe=J(oe,O(I[me],E[me][R]));ue[R]=oe}return x.createDenseMatrix({data:ue,size:[Q],datatype:Y})}(x,C)}(C,I):1===B.length?m(C,I):h(C,I)},"Matrix, Array":a.referTo("Matrix,Matrix",x=>(C,I)=>x(C,e(I))),"Array, Matrix":a.referToSelf(x=>(C,I)=>x(e(C,I.storage()),I)),"SparseMatrix, any":function(C,I){return c(C,I,r,!1)},"DenseMatrix, any":function(C,I){return l(C,I,r,!1)},"any, SparseMatrix":function(C,I){return c(I,C,r,!0)},"any, DenseMatrix":function(C,I){return l(I,C,r,!0)},"Array, any":function(C,I){return l(e(C),I,r,!1).valueOf()},"any, Array":function(C,I){return l(e(I),C,r,!0).valueOf()},"any, any":r,"any, any, ...any":a.referToSelf(x=>(C,I,N)=>{for(var B=x(C,I),E=0;E<N.length;E++)B=x(B,N[E]);return B})})});L(8170);var rR=H("det",["typed","matrix","subtractScalar","multiply","divideScalar","isZero","unaryMinus"],i=>{var{typed:a,matrix:e,subtractScalar:t,multiply:r,divideScalar:o,isZero:s,unaryMinus:c}=i;return a("det",{any:function(d){return bt(d)},"Array | Matrix":function(d){var f;switch((f=yt(d)?d.size():Array.isArray(d)?(d=e(d)).size():[]).length){case 0:return bt(d);case 1:if(1===f[0])return bt(d.valueOf()[0]);if(0===f[0])return 1;throw new RangeError("Matrix must be square (size: "+Rt(f)+")");case 2:var p=f[0],m=f[1];if(p===m)return function l(u,d,f){if(1===d)return bt(u[0][0]);if(2===d)return t(r(u[0][0],u[1][1]),r(u[1][0],u[0][1]));for(var p=!1,m=new Array(d).fill(0).map((I,N)=>N),h=0;h<d;h++){var g=m[h];if(s(u[g][h])){var b=void 0;for(b=h+1;b<d;b++)if(!s(u[m[b]][h])){g=m[b],m[b]=m[h],m[h]=g,p=!p;break}if(b===d)return u[g][h]}for(var _=u[g][h],D=0===h?1:u[m[h-1]][h-1],y=h+1;y<d;y++)for(var w=m[y],x=h+1;x<d;x++)u[w][x]=o(t(r(u[w][x],_),r(u[w][h],u[g][x])),D)}var C=u[m[d-1]][d-1];return p?c(C):C}(d.clone().valueOf(),p);if(0===m)return 1;throw new RangeError("Matrix must be square (size: "+Rt(f)+")");default:throw new RangeError("Matrix must be two dimensional (size: "+Rt(f)+")")}}})}),i3=H("inv",["typed","matrix","divideScalar","addScalar","multiply","unaryMinus","det","identity","abs"],i=>{var{typed:a,matrix:e,divideScalar:t,addScalar:r,multiply:o,unaryMinus:s,det:c,identity:l,abs:u}=i;return a("inv",{"Array | Matrix":function(p){var m=yt(p)?p.size():wt(p);switch(m.length){case 1:if(1===m[0])return yt(p)?e([t(1,p.valueOf()[0])]):[t(1,p[0])];throw new RangeError("Matrix must be square (size: "+Rt(m)+")");case 2:var h=m[0],g=m[1];if(h===g)return yt(p)?e(d(p.valueOf(),h,g),p.storage()):d(p,h,g);throw new RangeError("Matrix must be square (size: "+Rt(m)+")");default:throw new RangeError("Matrix must be two dimensional (size: "+Rt(m)+")")}},any:function(p){return t(1,p)}});function d(f,p,m){var h,g,b,_,D;if(1===p){if(0===(_=f[0][0]))throw Error("Cannot calculate inverse, determinant is zero");return[[t(1,_)]]}if(2===p){var y=c(f);if(0===y)throw Error("Cannot calculate inverse, determinant is zero");return[[t(f[1][1],y),t(s(f[0][1]),y)],[t(s(f[1][0]),y),t(f[0][0],y)]]}var w=f.concat();for(h=0;h<p;h++)w[h]=w[h].concat();for(var x=l(p).valueOf(),C=0;C<m;C++){var I=u(w[C][C]),N=C;for(h=C+1;h<p;)u(w[h][C])>I&&(I=u(w[h][C]),N=h),h++;if(0===I)throw Error("Cannot calculate inverse, determinant is zero");(h=N)!==C&&(D=w[C],w[C]=w[h],w[h]=D,D=x[C],x[C]=x[h],x[h]=D);var B=w[C],E=x[C];for(h=0;h<p;h++){var j=w[h],P=x[h];if(h!==C){if(0!==j[C]){for(b=t(s(j[C]),B[C]),g=C;g<m;g++)j[g]=r(j[g],o(b,B[g]));for(g=0;g<m;g++)P[g]=r(P[g],o(b,E[g]))}}else{for(b=B[C],g=C;g<m;g++)j[g]=t(j[g],b);for(g=0;g<m;g++)P[g]=t(P[g],b)}}}return x}}),O3=H("divide",["typed","matrix","multiply","equalScalar","divideScalar","inv"],i=>{var{typed:a,matrix:e,multiply:t,equalScalar:r,divideScalar:o,inv:s}=i,c=Vn({typed:a,equalScalar:r}),l=xi({typed:a});return a("divide",function im(i,a){for(var e in a)en(a,e)&&(i[e]=a[e]);return i}({"Array | Matrix, Array | Matrix":function(d,f){return t(d,s(f))},"DenseMatrix, any":function(d,f){return l(d,f,o,!1)},"SparseMatrix, any":function(d,f){return c(d,f,o,!1)},"Array, any":function(d,f){return l(e(d),f,o,!1).valueOf()},"any, Array | Matrix":function(d,f){return t(d,s(f))}},o.signatures))}),Pe=xx({config:Ee}),sn=Vx({}),Oo=pF({}),Wl=hF({}),Tt=RF({Matrix:Wl}),ae=GF({BigNumber:Pe,Complex:sn,DenseMatrix:Tt,Fraction:Oo}),ri=iI({typed:ae}),jn=CI({typed:ae}),Ro=RI({BigNumber:Pe,typed:ae}),jo=tA({typed:ae}),Ut=fA({config:Ee,typed:ae}),ko=GA({typed:ae}),An=a2({typed:ae}),qr=m2({typed:ae}),Fr=O2({Matrix:Wl,equalScalar:Ut,typed:ae}),Ei=z2({typed:ae}),ar=IT({typed:ae}),Ty=RT({Fraction:Oo,typed:ae}),He=$T({DenseMatrix:Tt,Matrix:Wl,SparseMatrix:Fr,typed:ae}),Aa=ZT({bignumber:Ro,fraction:Ty,number:qr}),oi=eN({matrix:He,config:Ee,typed:ae}),vi=cN({BigNumber:Pe,config:Ee,matrix:He,typed:ae}),Sn=MN({numeric:Aa,typed:ae}),Qr=YN({BigNumber:Pe,DenseMatrix:Tt,SparseMatrix:Fr,config:Ee,matrix:He,typed:ae}),$o=NL({BigNumber:Pe,DenseMatrix:Tt,equalScalar:Ut,matrix:He,typed:ae,zeros:vi}),dn=XB({addScalar:jn,dot:SB({addScalar:jn,conj:jo,multiplyScalar:An,size:oi,typed:ae}),equalScalar:Ut,matrix:He,multiplyScalar:An,typed:ae}),yi=O3({divideScalar:Sn,equalScalar:Ut,inv:i3({abs:ri,addScalar:jn,det:rR({divideScalar:Sn,isZero:ko,matrix:He,multiply:dn,subtractScalar:Ei,typed:ae,unaryMinus:ar}),divideScalar:Sn,identity:Qr,matrix:He,multiply:dn,typed:ae,unaryMinus:ar}),matrix:He,multiply:dn,typed:ae}),Ft=L(3510),jt=L(3656),Ce=L(2496),Tn=L(4462),Ar=L(3984);function Ak(i,a){}const Hs=()=>{const i=typeof window<"u"?window:void 0;return i&&i.tinymce?i.tinymce:null};let Tk=(()=>{class i{constructor(){this.onBeforePaste=new n.EventEmitter,this.onBlur=new n.EventEmitter,this.onClick=new n.EventEmitter,this.onContextMenu=new n.EventEmitter,this.onCopy=new n.EventEmitter,this.onCut=new n.EventEmitter,this.onDblclick=new n.EventEmitter,this.onDrag=new n.EventEmitter,this.onDragDrop=new n.EventEmitter,this.onDragEnd=new n.EventEmitter,this.onDragGesture=new n.EventEmitter,this.onDragOver=new n.EventEmitter,this.onDrop=new n.EventEmitter,this.onFocus=new n.EventEmitter,this.onFocusIn=new n.EventEmitter,this.onFocusOut=new n.EventEmitter,this.onKeyDown=new n.EventEmitter,this.onKeyPress=new n.EventEmitter,this.onKeyUp=new n.EventEmitter,this.onMouseDown=new n.EventEmitter,this.onMouseEnter=new n.EventEmitter,this.onMouseLeave=new n.EventEmitter,this.onMouseMove=new n.EventEmitter,this.onMouseOut=new n.EventEmitter,this.onMouseOver=new n.EventEmitter,this.onMouseUp=new n.EventEmitter,this.onPaste=new n.EventEmitter,this.onSelectionChange=new n.EventEmitter,this.onActivate=new n.EventEmitter,this.onAddUndo=new n.EventEmitter,this.onBeforeAddUndo=new n.EventEmitter,this.onBeforeExecCommand=new n.EventEmitter,this.onBeforeGetContent=new n.EventEmitter,this.onBeforeRenderUI=new n.EventEmitter,this.onBeforeSetContent=new n.EventEmitter,this.onChange=new n.EventEmitter,this.onClearUndos=new n.EventEmitter,this.onDeactivate=new n.EventEmitter,this.onDirty=new n.EventEmitter,this.onExecCommand=new n.EventEmitter,this.onGetContent=new n.EventEmitter,this.onHide=new n.EventEmitter,this.onInit=new n.EventEmitter,this.onInitNgModel=new n.EventEmitter,this.onLoadContent=new n.EventEmitter,this.onNodeChange=new n.EventEmitter,this.onPostProcess=new n.EventEmitter,this.onPostRender=new n.EventEmitter,this.onPreInit=new n.EventEmitter,this.onPreProcess=new n.EventEmitter,this.onProgressState=new n.EventEmitter,this.onRedo=new n.EventEmitter,this.onRemove=new n.EventEmitter,this.onReset=new n.EventEmitter,this.onResizeEditor=new n.EventEmitter,this.onSaveContent=new n.EventEmitter,this.onSetAttrib=new n.EventEmitter,this.onObjectResizeStart=new n.EventEmitter,this.onObjectResized=new n.EventEmitter,this.onObjectSelected=new n.EventEmitter,this.onSetContent=new n.EventEmitter,this.onShow=new n.EventEmitter,this.onSubmit=new n.EventEmitter,this.onUndo=new n.EventEmitter,this.onVisualAid=new n.EventEmitter}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=n.\u0275\u0275defineDirective({type:i,outputs:{onBeforePaste:"onBeforePaste",onBlur:"onBlur",onClick:"onClick",onContextMenu:"onContextMenu",onCopy:"onCopy",onCut:"onCut",onDblclick:"onDblclick",onDrag:"onDrag",onDragDrop:"onDragDrop",onDragEnd:"onDragEnd",onDragGesture:"onDragGesture",onDragOver:"onDragOver",onDrop:"onDrop",onFocus:"onFocus",onFocusIn:"onFocusIn",onFocusOut:"onFocusOut",onKeyDown:"onKeyDown",onKeyPress:"onKeyPress",onKeyUp:"onKeyUp",onMouseDown:"onMouseDown",onMouseEnter:"onMouseEnter",onMouseLeave:"onMouseLeave",onMouseMove:"onMouseMove",onMouseOut:"onMouseOut",onMouseOver:"onMouseOver",onMouseUp:"onMouseUp",onPaste:"onPaste",onSelectionChange:"onSelectionChange",onActivate:"onActivate",onAddUndo:"onAddUndo",onBeforeAddUndo:"onBeforeAddUndo",onBeforeExecCommand:"onBeforeExecCommand",onBeforeGetContent:"onBeforeGetContent",onBeforeRenderUI:"onBeforeRenderUI",onBeforeSetContent:"onBeforeSetContent",onChange:"onChange",onClearUndos:"onClearUndos",onDeactivate:"onDeactivate",onDirty:"onDirty",onExecCommand:"onExecCommand",onGetContent:"onGetContent",onHide:"onHide",onInit:"onInit",onInitNgModel:"onInitNgModel",onLoadContent:"onLoadContent",onNodeChange:"onNodeChange",onPostProcess:"onPostProcess",onPostRender:"onPostRender",onPreInit:"onPreInit",onPreProcess:"onPreProcess",onProgressState:"onProgressState",onRedo:"onRedo",onRemove:"onRemove",onReset:"onReset",onResizeEditor:"onResizeEditor",onSaveContent:"onSaveContent",onSetAttrib:"onSetAttrib",onObjectResizeStart:"onObjectResizeStart",onObjectResized:"onObjectResized",onObjectSelected:"onObjectSelected",onSetContent:"onSetContent",onShow:"onShow",onSubmit:"onSubmit",onUndo:"onUndo",onVisualAid:"onVisualAid"}}),i})();const Gy=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onResizeEditor","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],Zs=(i,a,e)=>(0,S.fromEvent)(i,a).pipe((0,v.takeUntil)(e)),Ky=(i,a)=>"string"==typeof i?i.split(",").map(e=>e.trim()):Array.isArray(i)?i:a;let Hy=0;const Zy=i=>typeof i<"u"&&"textarea"===i.tagName.toLowerCase(),qy=i=>typeof i>"u"||""===i?[]:Array.isArray(i)?i:i.split(" "),Ok=(i,a)=>qy(i).concat(qy(a)),Rk=()=>{},Jy=i=>null==i,jk=(()=>{let i={script$:null};return{load:(t,r)=>i.script$||(i.script$=(0,S.defer)(()=>{const o=t.createElement("script");return o.referrerPolicy="origin",o.type="application/javascript",o.src=r,t.head.appendChild(o),(0,S.fromEvent)(o,"load").pipe((0,v.take)(1),(0,v.mapTo)(void 0))}).pipe((0,v.shareReplay)({bufferSize:1,refCount:!0}))),reinitialize:()=>{i={script$:null}}}})(),Xl=new n.InjectionToken("TINYMCE_SCRIPT_SRC"),kk={provide:Ce.NG_VALUE_ACCESSOR,useExisting:(0,n.forwardRef)(()=>qs),multi:!0};let qs=(()=>{class i extends Tk{constructor(e,t,r,o){super(),this.platformId=r,this.tinymceScriptSrc=o,this.cloudChannel="6",this.apiKey="no-api-key",this.id="",this.modelEvents="change input undo redo",this.onTouchedCallback=Rk,this.destroy$=new S.Subject,this.initialise=()=>{const s={...this.init,selector:void 0,target:this._element,inline:this.inline,readonly:this.disabled,plugins:Ok(this.init&&this.init.plugins,this.plugins),toolbar:this.toolbar||this.init&&this.init.toolbar,setup:c=>{this._editor=c,Zs(c,"init",this.destroy$).subscribe(()=>{this.initEditor(c)}),((i,a,e)=>{(i=>{const a=Ky(i.ignoreEvents,[]);return Ky(i.allowedEvents,Gy).filter(t=>Gy.includes(t)&&!a.includes(t))})(i).forEach(r=>{const o=i[r];Zs(a,r.substring(2),e).subscribe(s=>{o.observers.length>0&&i.ngZone.run(()=>o.emit({event:s,editor:a}))})})})(this,c,this.destroy$),this.init&&"function"==typeof this.init.setup&&this.init.setup(c)}};Zy(this._element)&&(this._element.style.visibility=""),this.ngZone.runOutsideAngular(()=>{Hs().init(s)})},this._elementRef=e,this.ngZone=t}set disabled(e){this._disabled=e,this._editor&&this._editor.initialized&&("function"==typeof this._editor.mode?.set?this._editor.mode.set(e?"readonly":"design"):this._editor.setMode(e?"readonly":"design"))}get disabled(){return this._disabled}get editor(){return this._editor}writeValue(e){this._editor&&this._editor.initialized?this._editor.setContent(Jy(e)?"":e):this.initialValue=null===e?void 0:e}registerOnChange(e){this.onChangeCallback=e}registerOnTouched(e){this.onTouchedCallback=e}setDisabledState(e){this.disabled=e}ngAfterViewInit(){(0,F.isPlatformBrowser)(this.platformId)&&(this.id=this.id||(i=>{const e=(new Date).getTime(),t=Math.floor(1e9*Math.random());return Hy++,"tiny-angular_"+t+Hy+String(e)})(),this.inline=void 0!==this.inline?!1!==this.inline:!!this.init?.inline,this.createElement(),null!==Hs()?this.initialise():this._element&&this._element.ownerDocument&&jk.load(this._element.ownerDocument,this.getScriptSrc()).pipe((0,v.takeUntil)(this.destroy$)).subscribe(this.initialise))}ngOnDestroy(){this.destroy$.next(),null!==Hs()&&Hs().remove(this._editor)}createElement(){this._element=document.createElement(this.inline?"string"==typeof this.tagName?this.tagName:"div":"textarea"),this._element&&(document.getElementById(this.id)&&console.warn(`TinyMCE-Angular: an element with id [${this.id}] already exists. Editors with duplicate Id will not be able to mount`),this._element.id=this.id,Zy(this._element)&&(this._element.style.visibility="hidden"),this._elementRef.nativeElement.appendChild(this._element))}getScriptSrc(){return Jy(this.tinymceScriptSrc)?`https://cdn.tiny.cloud/1/${this.apiKey}/tinymce/${this.cloudChannel}/tinymce.min.js`:this.tinymceScriptSrc}initEditor(e){Zs(e,"blur",this.destroy$).subscribe(()=>{this.ngZone.run(()=>this.onTouchedCallback())}),Zs(e,this.modelEvents,this.destroy$).subscribe(()=>{this.ngZone.run(()=>this.emitOnChange(e))}),"string"==typeof this.initialValue&&this.ngZone.run(()=>{e.setContent(this.initialValue),e.getContent()!==this.initialValue&&this.emitOnChange(e),void 0!==this.onInitNgModel&&this.onInitNgModel.emit(e)})}emitOnChange(e){this.onChangeCallback&&this.onChangeCallback(e.getContent({format:this.outputFormat}))}}return i.\u0275fac=function(e){return new(e||i)(n.\u0275\u0275directiveInject(n.ElementRef),n.\u0275\u0275directiveInject(n.NgZone),n.\u0275\u0275directiveInject(n.PLATFORM_ID),n.\u0275\u0275directiveInject(Xl,8))},i.\u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["editor"]],inputs:{cloudChannel:"cloudChannel",apiKey:"apiKey",init:"init",id:"id",initialValue:"initialValue",outputFormat:"outputFormat",inline:"inline",tagName:"tagName",plugins:"plugins",toolbar:"toolbar",modelEvents:"modelEvents",allowedEvents:"allowedEvents",ignoreEvents:"ignoreEvents",disabled:"disabled"},standalone:!0,features:[n.\u0275\u0275ProvidersFeature([kk]),n.\u0275\u0275InheritDefinitionFeature,n.\u0275\u0275StandaloneFeature],decls:1,vars:0,template:function(e,t){1&e&&n.\u0275\u0275template(0,Ak,0,0,"ng-template")},dependencies:[F.CommonModule,Ce.FormsModule],styles:["[_nghost-%COMP%]{display:block}"]}),i})(),Xy=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=n.\u0275\u0275defineNgModule({type:i}),i.\u0275inj=n.\u0275\u0275defineInjector({imports:[qs]}),i})();var Na=L(8176),Yy=L(1196),Js=L(3080),Pk=L(8123),Ai=L(4463),e0=L(6593),Vo=L(5861);let Xr={};const La={},t0={};let n0=!1;function Yl(){return(Yl=(0,Vo.Z)(function*(i,a){return(yield La[i].get(a))()})).apply(this,arguments)}function r0(i,a){return eu.apply(this,arguments)}function eu(){return(eu=(0,Vo.Z)(function*(i,a){return t0[a]||(n0||(yield L.I("default"),n0=!0),yield i.init(L.S.default),t0[a]=!0),i})).apply(this,arguments)}function nu(){return nu=(0,Vo.Z)(function*(i,a){if("string"==typeof i)return yield o0(i,a);if("script"===i.type){const e=i;return yield o0(e.remoteEntry,e.remoteName)}"module"===i.type&&(yield function Uk(i){return iu.apply(this,arguments)}(i.remoteEntry))}),nu.apply(this,arguments)}function iu(){return(iu=(0,Vo.Z)(function*(i){return La[i]?Promise.resolve():yield import(i).then(a=>{r0(a,i),La[i]=a})})).apply(this,arguments)}function o0(i,a){return ru.apply(this,arguments)}function ru(){return(ru=(0,Vo.Z)(function*(i,a){return new Promise((e,t)=>{if(La[a])return void e();const r=document.createElement("script");r.src=i,r.onerror=t,r.onload=()=>{const o=window[a];r0(o,a),La[a]=o,e()},document.body.appendChild(r)})})).apply(this,arguments)}function ou(){return ou=(0,Vo.Z)(function*(i,a){let e,t,r,o;if(o="string"==typeof i?{type:"manifest",remoteName:i,exposedModule:a}:i,!o.type){const s=Object.keys(Xr).length>0;o.type=s?"manifest":"script"}if("manifest"===o.type){const s=Xr[o.remoteName];if(!s)throw new Error("Manifest does not contain "+o.remoteName);o={type:s.type,exposedModule:o.exposedModule,remoteEntry:s.remoteEntry,remoteName:"script"===s.type?o.remoteName:void 0},r=s.remoteEntry}else r=o.remoteEntry;return"script"===o.type?(e={type:"script",remoteEntry:o.remoteEntry,remoteName:o.remoteName},t=o.remoteName):"module"===o.type&&(e={type:"module",remoteEntry:o.remoteEntry},t=o.remoteEntry),r&&(yield function tu(i,a){return nu.apply(this,arguments)}(e)),yield function $k(i,a){return Yl.apply(this,arguments)}(t,o.exposedModule)}),ou.apply(this,arguments)}var kn=function(i){return i.XSmall="XSmall",i.Small="Small",i.Medium="Medium",i.Large="Large",i.XLarge="XLarge",i}(kn||{});let ai=(()=>{class i{breakpointObserver;screenSize=new S.BehaviorSubject(kn.Medium);screenSize$=this.screenSize.asObservable();constructor(e){this.breakpointObserver=e,this.initScreenSizeObservable()}initScreenSizeObservable(){(0,S.merge)(this.breakpointObserver.observe(["(max-width: 599.98px)"]).pipe((0,v.map)(e=>{if(e.matches)return kn.XSmall})),this.breakpointObserver.observe(["(min-width: 600px) and (max-width: 959.98px)"]).pipe((0,v.map)(e=>{if(e.matches)return kn.Small})),this.breakpointObserver.observe(["(min-width: 960px) and (max-width: 1279.98px)"]).pipe((0,v.map)(e=>{if(e.matches)return kn.Medium})),this.breakpointObserver.observe(["(min-width: 1280px) and (max-width: 1919.98px)"]).pipe((0,v.map)(e=>{if(e.matches)return kn.Large})),this.breakpointObserver.observe(["(min-width: 1920px)"]).pipe((0,v.map)(e=>{if(e.matches)return kn.XLarge}))).subscribe(e=>{e&&this.screenSize.next(e)})}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject($))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),zo=(()=>{class i{apollo;constructor(e){this.apollo=e}fetch(e,t,r){const s={query:fe.gql`
              query ${e}($id: ID!) {
                ${e}(id: $id) {
                  ${r.fields.join("\n")}
                }
              }
            `,variables:{id:t}};return this.apollo.query(s)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(fe.Apollo))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),cr=(()=>{class i{storageKey="scrm-session-storage";stickyStorageKey="scrm-sticky-session-storage";constructor(){}clear(){this.getLocalStorage().removeItem(this.storageKey);const e=this.getLocalStorage().getItem(this.stickyStorageKey);e&&this.getLocalStorage().setItem(this.storageKey,e)}set(e,t,r=!1){this.store(this.storageKey,e,t),r&&this.store(this.stickyStorageKey,e,t)}store(e,t,r){const o=this.getLocalStorage().getItem(e);let s={};o&&(s=JSON.parse(o)),s[t]=r,this.getLocalStorage().setItem(e,JSON.stringify(s))}get(e){const t=this.getLocalStorage().getItem(this.storageKey);let r={};return t&&(r=JSON.parse(t)),r[e]}getLocalStorage(){return localStorage}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),c0=(()=>{class i{apollo;constructor(e){this.apollo=e}create(e,t,r,o){const c={mutation:fe.gql`
                mutation create${t}($input: create${t}Input!) {
                  create${t}(input: $input) {
                    ${e} {
                      ${o.fields.join("\n")}
                    }
                    clientMutationId
                  }
                }
            `,variables:{input:r}};return this.apollo.mutate(c)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(fe.Apollo))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const Gk={id:null,_id:null,status:null,async:null,type:null,options:null,messages:[]};let $i=(()=>{class i{recordMutationGQL;graphqlName="process";coreName="Process";createFieldsMetadata={fields:["_id","status","async","type","messages","data"]};constructor(e){this.recordMutationGQL=e}submit(e,t){return this.create(e,t)}create(e,t){return this.recordMutationGQL.create(this.graphqlName,this.coreName,{type:e,options:t},this.createFieldsMetadata).pipe((0,v.map)(({data:o})=>{const s={...Gk};return o.createProcess&&o.createProcess.process?o.createProcess.process:s}))}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(c0))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),uu=(()=>{class i{apollo;constructor(e){this.apollo=e}fetchAll(e,t){const o={query:fe.gql`
                query ${e}{
                    ${e} {
                        edges {
                            node {
                                ${t.fields.join("\n")}
                            }
                        }
                    }
                }
            `};return this.apollo.query(o)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(fe.Apollo))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const l0={configs:{},loading:!1};let Ui=(0,M.deepClone)(l0),Wo=null,dt=(()=>{class i{collectionGQL;configs$;loading$;store=new S.BehaviorSubject(Ui);state$=this.store.asObservable();resourceName="systemConfigs";fieldsMetadata={fields:["id","_id","value","items"]};constructor(e){this.collectionGQL=e,this.configs$=this.state$.pipe((0,v.map)(t=>t.configs),(0,v.distinctUntilChanged)()),this.loading$=this.state$.pipe((0,v.map)(t=>t.loading))}getConfigValue(e){return Ui.configs&&Ui.configs[e]?null!==Ui.configs[e].value?Ui.configs[e].value:Ui.configs[e].items:null}getUi(e){return(this.getConfigValue("ui")??{})[e]??null}getHomePage(){let e="home";const t=this.getConfigValue("default_module");return t&&(e=t),e}clear(){Wo=null,this.updateState((0,M.deepClone)(l0))}clearAuthBased(){this.clear()}load(){return this.updateState({...Ui,loading:!0}),this.getSystemConfigs().pipe((0,v.tap)(e=>{this.updateState({...Ui,configs:e,loading:!1})}))}isCached(){return null!==Wo}set(e){Wo=(0,S.of)(e).pipe((0,v.shareReplay)(1)),this.updateState({...Ui,configs:e,loading:!1})}updateState(e){this.store.next(Ui=e)}getSystemConfigs(){return null==Wo&&(Wo=this.fetch().pipe((0,v.shareReplay)(1))),Wo}fetch(){return this.collectionGQL.fetchAll(this.resourceName,this.fieldsMetadata).pipe((0,v.map)(({data:e})=>{const t={};return e.systemConfigs&&e.systemConfigs.edges&&e.systemConfigs.edges.forEach(r=>{t[r.node._id]=r.node}),t}))}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(uu))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const u0={appStrings:{},appListStrings:{},modStrings:{},languageKey:"en_us",loaded:{},hasChanged:!1};let Dn=(0,M.deepClone)(u0);const d0={appStrings:{},appListStrings:{},modStrings:{}};let Vi={},zi=(0,M.deepClone)(d0),Oe=(()=>{class i{recordGQL;localStorage;processService;configs;appStrings$;appListStrings$;modStrings$;languageKey$;vm$;store=new S.BehaviorSubject(Dn);state$=this.store.asObservable();config={appStrings:{fetch:"fetchAppStrings",resourceName:"appStrings",metadata:{fields:["id","_id","items"]}},appListStrings:{fetch:"fetchAppListStrings",resourceName:"appListStrings",metadata:{fields:["id","_id","items"]}},modStrings:{fetch:"fetchModStrings",resourceName:"modStrings",metadata:{fields:["id","_id","items"]}}};constructor(e,t,r,o){this.recordGQL=e,this.localStorage=t,this.processService=r,this.configs=o,this.appStrings$=this.state$.pipe((0,v.map)(s=>s.appStrings),(0,v.distinctUntilChanged)()),this.appListStrings$=this.state$.pipe((0,v.map)(s=>s.appListStrings),(0,v.distinctUntilChanged)()),this.modStrings$=this.state$.pipe((0,v.map)(s=>s.modStrings),(0,v.distinctUntilChanged)()),this.languageKey$=this.state$.pipe((0,v.map)(s=>s.languageKey),(0,v.distinctUntilChanged)()),this.vm$=this.appStrings$.pipe((0,S.combineLatestWith)(this.appListStrings$,this.modStrings$,this.languageKey$),(0,v.map)(([s,c,l,u])=>({appStrings:s,appListStrings:c,modStrings:l,languageKey:u})))}clear(){Vi={},zi=(0,M.deepClone)(d0),this.updateState((0,M.deepClone)(u0))}clearAuthBased(){["modStrings","appListStrings"].forEach(t=>{Vi&&Vi[t]&&delete Vi[t]}),zi.modStrings={},zi.appListStrings={}}changeLanguage(e,t=!1){const r=[];return Object.keys(Vi).forEach(o=>Vi[o]&&r.push(o)),Dn.hasChanged=!0,this.load(e,r,t).pipe((0,v.tap)(()=>{this.localStorage.set("selected_language",e,!0)}))}getLanguageStrings(){return Dn?{appStrings:Dn.appStrings,appListStrings:Dn.appListStrings,modStrings:Dn.modStrings,languageKey:Dn.languageKey}:null}getAppString(e){return Dn.appStrings&&Dn.appStrings[e]?Dn.appStrings[e]:null}getAppListString(e){return Dn.appListStrings&&Dn.appListStrings[e]?Dn.appListStrings[e]:null}getModString(e){return Dn.modStrings&&Dn.modStrings[e]?Dn.modStrings[e]:null}getFieldLabel(e,t=null,r=null){let o=r;if(r||(o=this.getLanguageStrings()),!o||!o.modStrings||!e)return"";let s="";return t&&(s=o.modStrings[t]&&o.modStrings[t][e]),s||(s=o.appStrings&&o.appStrings[e]),s||""}getListLabel(e,t){if(!e||!t)return"";const r=this.getAppListString(e);return r&&r[t]||""}getAvailableStringsTypes(){return Object.keys(this.config)}hasLanguageChanged(){return Dn.hasChanged}getCurrentLanguage(){return this.localStorage.get("selected_language")||(Dn.languageKey??"en_us")}getActiveLanguage(){return Dn.languageKey??""}getSelectedLanguage(){return this.localStorage.get("selected_language")??""}isLanguageEnabled(e){if(!e)return!1;const t=this.configs.getConfigValue("languages")??{},r=this.getDisabledLanguages(),o=Object.keys(t);return!!o.length&&o.includes(e)&&!r.includes(e)}getDisabledLanguages(){const e=this.configs.getConfigValue("disabled_languages")??"";return(0,ne.isString)(e)&&""!==e?e.replace(" ","").split(","):[]}getEnabledLanguages(){const e=this.configs.getConfigValue("languages")??{},t=this.getDisabledLanguages(),r={};return Object.keys(e).filter(s=>!t.includes(s)).forEach(s=>{r[s]=e[s]}),r}getFirstLanguage(){const e=this.configs.getConfigValue("languages")??{};return Object.keys(e).sort()[0]??""}load(e,t,r=!1){const o=[];return t.forEach(s=>o.push(this.getStrings(e,s,r))),(0,S.forkJoin)(o).pipe((0,v.first)(),(0,v.tap)(s=>{const c={...Dn,languageKey:e};t.forEach((l,u)=>{c[l]=s[u],Vi[l]=!0}),this.updateState(c)}))}areAllCached(){let e=!0;return e=e&&!(0,M.emptyObject)(zi?.appStrings??{}),e=e&&!(0,M.emptyObject)(zi?.appListStrings??{}),e=e&&!(0,M.emptyObject)(zi?.modStrings??{}),e}set(e,t){const r={...Dn,languageKey:e};t.appStrings&&!(0,M.emptyObject)(t.appStrings)&&(zi.appStrings[e]=(0,S.of)(t.appStrings).pipe((0,v.shareReplay)(1)),r.appStrings=t.appStrings,Vi.appStrings=!0),t.appListStrings&&!(0,M.emptyObject)(t.appListStrings)&&(zi.appListStrings[e]=(0,S.of)(t.appListStrings).pipe((0,v.shareReplay)(1)),r.appListStrings=t.appListStrings,Vi.appListStrings=!0),t.modStrings&&!(0,M.emptyObject)(t.modStrings)&&(zi.modStrings[e]=(0,S.of)(t.modStrings).pipe((0,v.shareReplay)(1)),r.modStrings=t.modStrings,Vi.modStrings=!0),this.updateState(r)}setSessionLanguage(){return this.processService.submit("set-session-language",{language:Dn.languageKey}).pipe((0,v.take)(1))}updateState(e){this.store.next(Dn=e)}getStrings(e,t,r=!1){const o=zi[t];return o[e]&&!1===r||(o[e]=this[this.config[t].fetch](e).pipe((0,v.shareReplay)(1))),o[e]}fetchAppStrings(e){return this.recordGQL.fetch(this.config.appStrings.resourceName,`/api/app-strings/${e}`,this.config.appStrings.metadata).pipe((0,v.map)(({data:o})=>{let s={};return o.appStrings&&(s=o.appStrings.items),s}))}fetchAppListStrings(e){return this.recordGQL.fetch(this.config.appListStrings.resourceName,`/api/app-list-strings/${e}`,this.config.appListStrings.metadata).pipe((0,v.map)(({data:o})=>{let s={};return o.appListStrings&&(s=o.appListStrings.items),s}))}fetchModStrings(e){return this.recordGQL.fetch(this.config.modStrings.resourceName,`/api/mod-strings/${e}`,this.config.modStrings.metadata).pipe((0,v.map)(({data:o})=>{let s={};return o.modStrings&&(s=o.modStrings.items),s}))}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(zo),n.\u0275\u0275inject(cr),n.\u0275\u0275inject($i),n.\u0275\u0275inject(dt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),f0=(()=>{class i{config;delayConfigKey;loading$;loadingStore=new S.BehaviorSubject(!1);loadingBufferStore=new S.BehaviorSubject(!1);loadingBufferStore$;subs=[];buffered=!1;constructor(e,t="loading_display_delay"){this.config=e,this.delayConfigKey=t,this.loading$=this.loadingStore.asObservable();const r=e.getConfigValue("ui")??{},o=parseInt(r[t]??"")??1500;this.loadingBufferStore$=this.loadingBufferStore.asObservable().pipe((0,v.debounceTime)(o)),this.subs.push(this.loadingBufferStore$.subscribe(s=>{this.buffered&&this.loadingStore.next(s)}))}updateLoading(e){if(!0===e)return this.buffered=!0,void this.loadingBufferStore.next(e);this.buffered=!1,this.loadingStore.next(e),this.loadingBufferStore.next(e)}static \u0275fac=function(t){n.\u0275\u0275invalidFactory()};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),du=(()=>{class i{config;constructor(e){this.config=e}create(e="loading_display_delay"){return new f0(this.config,e)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(dt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const p0={loading:!1,initialAppLoading:!0,module:null,view:null,loaded:!1,routeUrl:null,preLoginUrl:null,currentUser:null,activeRequests:0};let pn=(0,M.deepClone)(p0),Gt=(()=>{class i{loadingBufferFactory;configs;loading$;module$;view$;initialAppLoading$;activeRequests$;vm$;store=new S.BehaviorSubject(pn);state$=this.store.asObservable();loadingQueue={};loadingBuffer;subs=[];constructor(e,t){this.loadingBufferFactory=e,this.configs=t,this.loading$=this.state$.pipe((0,v.map)(r=>r.loading),(0,v.distinctUntilChanged)()),this.module$=this.state$.pipe((0,v.map)(r=>r.module),(0,v.distinctUntilChanged)()),this.view$=this.state$.pipe((0,v.map)(r=>r.view),(0,v.distinctUntilChanged)()),this.initialAppLoading$=this.state$.pipe((0,v.map)(r=>r.initialAppLoading),(0,v.distinctUntilChanged)()),this.activeRequests$=this.state$.pipe((0,v.map)(r=>r.activeRequests),(0,v.distinctUntilChanged)()),this.vm$=this.loading$.pipe((0,S.combineLatestWith)(this.module$,this.view$,this.initialAppLoading$),(0,v.map)(([r,o,s,c])=>({loading:r,module:o,view:s,loaded:pn.loaded,initialAppLoading:c})))}clear(){this.loadingQueue={},this.updateState((0,M.deepClone)(p0)),this.subs.forEach(e=>e.unsubscribe())}clearAuthBased(){}init(){this.initLoadingBuffer()}isLoggedIn(){return!!pn.currentUser}getCurrentUser(){return pn.currentUser}setCurrentUser(e){(0,M.isVoid)(e)?this.onLogout():this.onLogin(),this.updateState({...pn,currentUser:e})}onLogin(){}onLogout(){this.updateState({...pn,preLoginUrl:null})}getActiveRequests(){return pn.activeRequests}addActiveRequest(){let e=pn.activeRequests;(0,M.isVoid)(e)&&(e=0),e++,this.updateState({...pn,activeRequests:e})}removeActiveRequest(){let e=pn.activeRequests;(0,M.isVoid)(e)?e=0:e--,e<0&&(e=0),this.updateState({...pn,activeRequests:e})}updateLoading(e,t,r=!0){if(this.initLoadingBuffer(),!0===t)return this.addToLoadingQueue(e),this.loadingBuffer.updateLoading(t),void(r||this.updateState({...pn,loading:t}));this.removeFromLoadingQueue(e),this.hasActiveLoading()&&(this.loadingBuffer.updateLoading(t),this.updateState({...pn,loading:t}))}updateInitialAppLoading(e){this.updateState({...pn,initialAppLoading:e})}isLoaded(){return pn.loaded}setLoaded(e){this.updateState({...pn,loaded:e})}setModule(e){this.updateState({...pn,module:e})}getModule(){return pn?.module??""}setView(e){this.updateState({...pn,view:e})}getView(){return pn.view}setRouteUrl(e){this.updateState({...pn,routeUrl:e})}getRouteUrl(){return pn.routeUrl}setPreLoginUrl(e){this.updateState({...pn,preLoginUrl:e})}getPreLoginUrl(){return pn.preLoginUrl??""}initLoadingBuffer(){this.loadingBuffer||(this.loadingBuffer=this.loadingBufferFactory.create(),this.subs.push(this.loadingBuffer.loading$.subscribe(e=>{this.updateState({...pn,loading:e})})))}hasActiveLoading(){return Object.keys(this.loadingQueue).length<1}removeFromLoadingQueue(e){this.loadingQueue[e]&&delete this.loadingQueue[e]}addToLoadingQueue(e){this.loadingQueue[e]=!0}updateState(e){this.store.next(pn=e)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(du),n.\u0275\u0275inject(dt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const m0={theme:null,images:{}};let Ba=(0,M.deepClone)(m0),Qs=null,Go=null,Tr=(()=>{class i{recordGQL;appStateStore;iconRegistry;images$;store=new S.BehaviorSubject(Ba);state$=this.store.asObservable();resourceName="themeImages";frontendName="theme-images";fieldsMetadata={fields:["id","_id","items"]};constructor(e,t,r){this.recordGQL=e,this.appStateStore=t,this.iconRegistry=r,this.images$=this.state$.pipe((0,v.map)(o=>o.images),(0,v.distinctUntilChanged)())}clear(){Qs=null,Go=null,this.updateState((0,M.deepClone)(m0))}clearAuthBased(){}changeTheme(e){this.appStateStore.updateLoading("change-theme",!0),this.load(e).pipe((0,v.tap)(()=>this.appStateStore.updateLoading("change-theme",!1))).subscribe()}getTheme(){return Ba.theme}load(e){return this.getThemeImages(e).pipe((0,v.tap)(t=>{this.updateState({...Ba,images:t,theme:e})}))}isCached(){return null!==Go}set(e,t){Qs=e,this.registerSvgs(t),Go=(0,S.of)(t).pipe((0,v.shareReplay)(1)),this.updateState({...Ba,images:t})}updateState(e){this.store.next(Ba=e)}getThemeImages(e){return(Qs!==e||null===Go)&&(Qs=e,Go=this.fetch(e).pipe((0,v.shareReplay)(1))),Go}registerSvgs(e){Object.keys(e).forEach(t=>{const r=e[t],o=r.content??"",s=r.name??"";""===o||""===s||this.iconRegistry.addSvg(s,o)})}fetch(e){return this.recordGQL.fetch(this.resourceName,`/api/${this.frontendName}/${e}`,this.fieldsMetadata).pipe((0,v.map)(({data:t})=>{let r={};if(t&&t.themeImages&&(r=t.themeImages.items),!(0,M.emptyObject)(r)){const o={};return this.registerSvgs(r),Object.keys(r).forEach(s=>{const{content:c,...l}=r[s]??{};o[s]=l}),o}return r}))}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(zo),n.\u0275\u0275inject(Gt),n.\u0275\u0275inject(Ve.SvgIconRegistryService))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function Kk(i,a){if(1&i&&n.\u0275\u0275element(0,"svg-icon",3),2&i){const e=n.\u0275\u0275nextContext().ngIf,t=n.\u0275\u0275nextContext();n.\u0275\u0275classMap(t.wrapperClass),n.\u0275\u0275propertyInterpolate("name",e.name),n.\u0275\u0275property("svgClass",t.klass||"")("title",t.title||"")}}function Hk(i,a){if(1&i&&n.\u0275\u0275element(0,"img",4),2&i){const e=n.\u0275\u0275nextContext().ngIf,t=n.\u0275\u0275nextContext();n.\u0275\u0275classMap(t.klass),n.\u0275\u0275propertyInterpolate("src",e.path,n.\u0275\u0275sanitizeUrl),n.\u0275\u0275property("title",t.title||"")}}function Zk(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,Kk,1,6,"svg-icon",1),n.\u0275\u0275template(2,Hk,1,5,"img",2),n.\u0275\u0275elementContainerEnd()),2&i){const e=a.ngIf;n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf","svg"===e.type),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf","svg"!==e.type)}}let mn=(()=>{class i{themeImagesStore;image;klass="";title="";wrapperClass="sicon";images$=(0,S.of)({});imageSig=(0,n.signal)({});subs=[];constructor(e){this.themeImagesStore=e,e?.images$&&(this.images$=e.images$)}ngOnInit(){this.subs=[],this.subs.push(this.images$.pipe((0,v.filter)(e=>null!==e),(0,v.map)(e=>({images:e})),(0,v.tap)(e=>this.getImage(e,this.image))).subscribe())}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe()),this.subs=[]}getImage(e,t){if(!e||!e.images||Object.keys(e.images).length<1)return null;this.imageSig.update(()=>e.images[t]),this.imageSig()||console.warn(`Image with name '${t}' not found`)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(Tr))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-image"]],inputs:{image:"image",klass:"klass",title:"title",wrapperClass:"wrapperClass"},decls:1,vars:1,consts:[[4,"ngIf"],[3,"svgClass","title","class","name",4,"ngIf"],["alt","",3,"src","class","title",4,"ngIf"],[3,"svgClass","title","name"],["alt","",3,"src","title"]],template:function(t,r){1&t&&n.\u0275\u0275template(0,Zk,3,2,"ng-container",0),2&t&&n.\u0275\u0275property("ngIf",r.imageSig())},dependencies:[F.NgIf,Ve.SvgIconComponent],encapsulation:2})}return i})();function qk(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275text(1),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",e.language.getFieldLabel(e.labelKey,e.module)," ")}}function Jk(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275text(1),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",e.language.getListLabel(e.listKey,e.labelKey)," ")}}function Qk(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,qk,2,1,"ng-container",0),n.\u0275\u0275template(2,Jk,2,1,"ng-container",0),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!e.listKey&&e.labelKey),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.listKey&&e.labelKey)}}let Ot=(()=>{class i{language;labelKey="";module=null;listKey=null;languages$;constructor(e){this.language=e,this.languages$=this.language?.vm$??(0,S.of)({appStrings:{},appListStrings:{},modStrings:{},languageKey:""})}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(Oe))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-label"]],inputs:{labelKey:"labelKey",module:"module",listKey:"listKey"},decls:2,vars:3,consts:[[4,"ngIf"]],template:function(t,r){1&t&&(n.\u0275\u0275template(0,Qk,3,2,"ng-container",0),n.\u0275\u0275pipe(1,"async")),2&t&&n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(1,1,r.languages$))},dependencies:[F.NgIf,F.AsyncPipe],encapsulation:2})}return i})();function Xk(i,a){if(1&i&&n.\u0275\u0275element(0,"scrm-image",4),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275property("image",e.config.icon)("klass",e.config.iconKlass||"")("title",e.language.getFieldLabel(e.config.titleKey||""))}}function Yk(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275text(1),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(e.config.label||"")}}function eP(i,a){if(1&i&&n.\u0275\u0275element(0,"scrm-label",5),2&i){const e=n.\u0275\u0275nextContext();let t;n.\u0275\u0275property("labelKey",e.config.labelKey)("module",null!==(t=e.config.labelModule)&&void 0!==t?t:"")}}const tP=["*"];let Nn=(()=>{class i{language;config;clickCallBack;clickBuffer=new S.Subject;clickBuffer$=this.clickBuffer.asObservable();subs=[];constructor(e){this.language=e}ngOnInit(){const e=this.config?.debounceClick??null;this.clickCallBack=this.config?.onClick??null;const t=this.getDebounceTime();e&&this.clickCallBack&&this.subs.push(this.clickBuffer$.pipe((0,v.debounceTime)(t)).subscribe(r=>{this.clickCallBack(r??null)}))}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}runClick(e){if(this.clickCallBack){if(this.config?.debounceClick&&this.clickCallBack)return void this.clickBuffer.next(e??null);this.clickCallBack(e??null)}}getDebounceTime(){let e=this.config?.clickDebounceTime??625;return isFinite(e)||(e=625),e}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(Oe))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-button"]],inputs:{config:"config"},ngContentSelectors:tP,decls:5,vars:5,consts:[["type","button",3,"ngClass","title","click"],[3,"image","klass","title",4,"ngIf"],[4,"ngIf"],[3,"labelKey","module",4,"ngIf"],[3,"image","klass","title"],[3,"labelKey","module"]],template:function(t,r){1&t&&(n.\u0275\u0275projectionDef(),n.\u0275\u0275elementStart(0,"button",0),n.\u0275\u0275listener("click",function(){return r.runClick()}),n.\u0275\u0275template(1,Xk,1,3,"scrm-image",1),n.\u0275\u0275template(2,Yk,2,1,"ng-container",2),n.\u0275\u0275template(3,eP,1,2,"scrm-label",3),n.\u0275\u0275projection(4),n.\u0275\u0275elementEnd()),2&t&&(n.\u0275\u0275property("ngClass",r.config.klass)("title",r.language.getFieldLabel(r.config.titleKey)||(null==r.config?null:r.config.title)||""),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.config.icon),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!r.config.labelKey),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.config.labelKey))},dependencies:[F.NgClass,F.NgIf,mn,Ot],encapsulation:2})}return i})();function nP(i,a){if(1&i&&n.\u0275\u0275element(0,"scrm-image",5),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275property("image",e.item.icon)}}function iP(i,a){if(1&i&&n.\u0275\u0275element(0,"scrm-image",5),2&i){const e=n.\u0275\u0275nextContext().$implicit;n.\u0275\u0275property("image",e.icon)}}function rP(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"li",9)(1,"a",10),n.\u0275\u0275listener("click",function(){const o=n.\u0275\u0275restoreView(e).$implicit,s=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(s.click(o))}),n.\u0275\u0275template(2,iP,1,1,"scrm-image",2),n.\u0275\u0275text(3),n.\u0275\u0275elementEnd()()}if(2&i){const e=a.$implicit;n.\u0275\u0275advance(1),n.\u0275\u0275property("ngClass",e&&e.klass),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.icon),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",e&&e.label," ")}}function oP(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",6)(1,"ul",7),n.\u0275\u0275template(2,rP,4,3,"li",8),n.\u0275\u0275elementEnd()()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275property("ngbCollapse",e.isCollapsed),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngForOf",e.item.items)}}const aP=["*"];let g0=(()=>{class i{item;itemClicked=new n.EventEmitter;isCollapsed=!0;constructor(){}ngOnInit(){}click(e){e&&e.onClick&&e.onClick(),this.itemClicked.emit(!0)}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-dropdown-submenu"]],inputs:{item:"item"},outputs:{itemClicked:"item-clicked"},ngContentSelectors:aP,decls:8,vars:3,consts:[[1,"dropdown-submenu-items-container"],[1,"dropdown-submenu-parent-button","dropdown-item","dropdown-toggle",3,"click"],[3,"image",4,"ngIf"],[3,"ngbCollapse",4,"ngIf"],[1,"dropdown-submenu-extra"],[3,"image"],[3,"ngbCollapse"],[1,"dropdown-submenu","pl-2","mb-1"],["class","dropdown-submenu-item dropdown-item",4,"ngFor","ngForOf"],[1,"dropdown-submenu-item","dropdown-item"],[1,"action-link","dropdown-submenu-item-link",3,"ngClass","click"]],template:function(t,r){1&t&&(n.\u0275\u0275projectionDef(),n.\u0275\u0275elementStart(0,"div")(1,"div",0)(2,"a",1),n.\u0275\u0275listener("click",function(){return r.isCollapsed=!r.isCollapsed}),n.\u0275\u0275template(3,nP,1,1,"scrm-image",2),n.\u0275\u0275text(4),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(5,oP,3,2,"div",3),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(6,"div",4),n.\u0275\u0275projection(7),n.\u0275\u0275elementEnd()()),2&t&&(n.\u0275\u0275advance(3),n.\u0275\u0275property("ngIf",r.item&&r.item.icon),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",r.item&&r.item.label," "),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.item&&r.item.items.length))},dependencies:[F.NgClass,F.NgForOf,F.NgIf,mn,de.NgbCollapse],encapsulation:2})}return i})();function sP(i,a){if(1&i&&n.\u0275\u0275element(0,"scrm-image",7),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275property("image",e.config.icon)("klass",e.config.iconKlass||"")}}function cP(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275text(1),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",e.config.label," ")}}function lP(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275element(1,"scrm-label",8),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("labelKey",e.config.labelKey)}}function uP(i,a){1&i&&n.\u0275\u0275elementContainer(0)}const h0=function(i){return{item:i}};function dP(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,uP,1,0,"ng-container",13),n.\u0275\u0275elementContainerEnd()),2&i){const e=a.$implicit;n.\u0275\u0275nextContext(3);const t=n.\u0275\u0275reference(10);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngTemplateOutlet",t)("ngTemplateOutletContext",n.\u0275\u0275pureFunction1(2,h0,e))}}function fP(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",10)(1,"div",11),n.\u0275\u0275element(2,"scrm-label",8),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(3,dP,2,4,"ng-container",12),n.\u0275\u0275elementEnd()),2&i){const e=a.$implicit,t=a.last,r=a.first;let o,s;n.\u0275\u0275classProp("section-split",!r)("last-section",t)("first-section",r),n.\u0275\u0275property("ngClass",null!==(o=e.klass)&&void 0!==o?o:""),n.\u0275\u0275advance(2),n.\u0275\u0275property("labelKey",null!==(s=null!==(s=e.labelKey)&&void 0!==s?s:e.label)&&void 0!==s?s:""),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",e.items)}}function pP(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,fP,4,9,"div",9),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",e.sections)}}function mP(i,a){1&i&&n.\u0275\u0275elementContainer(0)}function gP(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,mP,1,0,"ng-container",13),n.\u0275\u0275elementContainerEnd()),2&i){const e=a.$implicit;n.\u0275\u0275nextContext(2);const t=n.\u0275\u0275reference(10);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngTemplateOutlet",t)("ngTemplateOutletContext",n.\u0275\u0275pureFunction1(2,h0,e))}}function hP(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,gP,2,4,"ng-container",12),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",e.buttons)}}function vP(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div"),n.\u0275\u0275element(1,"scrm-image",7),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext(2).item;n.\u0275\u0275advance(1),n.\u0275\u0275property("image",e.icon)("klass",e.iconKlass||"")}}function _P(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275text(1),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(2).item;n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",e.label," ")}}function yP(i,a){if(1&i&&n.\u0275\u0275element(0,"scrm-label",18),2&i){const e=n.\u0275\u0275nextContext(3).item;let t;n.\u0275\u0275property("labelKey",e.labelKey)("module",null!==(t=e.labelModule)&&void 0!==t?t:"")}}function bP(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,yP,1,2,"scrm-label",17),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(2).item;n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e&&e.labelKey)}}function CP(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"a",14),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(e);const r=n.\u0275\u0275nextContext().item,o=n.\u0275\u0275nextContext(),s=n.\u0275\u0275reference(1);return n.\u0275\u0275resetView(r&&o.click(r.onClick,s))}),n.\u0275\u0275elementStart(2,"div",15),n.\u0275\u0275template(3,vP,2,2,"div",4),n.\u0275\u0275elementStart(4,"div",16),n.\u0275\u0275template(5,_P,2,1,"ng-container",4),n.\u0275\u0275template(6,bP,2,1,"ng-container",4),n.\u0275\u0275elementEnd()()(),n.\u0275\u0275elementContainerEnd()}if(2&i){const e=n.\u0275\u0275nextContext().item;n.\u0275\u0275advance(1),n.\u0275\u0275property("ngClass",e&&e.klass),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",e.icon),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",e&&e.label),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e&&!e.label&&e.labelKey)}}function MP(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"scrm-dropdown-submenu",19),n.\u0275\u0275listener("item-clicked",function(){n.\u0275\u0275restoreView(e);const r=n.\u0275\u0275nextContext(2),o=n.\u0275\u0275reference(1);return n.\u0275\u0275resetView(r.close(o))}),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()}if(2&i){const e=n.\u0275\u0275nextContext().item;n.\u0275\u0275advance(1),n.\u0275\u0275property("item",e)}}function SP(i,a){if(1&i&&(n.\u0275\u0275template(0,CP,7,4,"ng-container",4),n.\u0275\u0275template(1,MP,2,1,"ng-container",4)),2&i){const e=a.item,t=n.\u0275\u0275nextContext();n.\u0275\u0275property("ngIf",e&&!t.isDropdown(e)),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e&&t.isDropdown(e))}}let Xs=(()=>{class i{language;config;disabled=!1;autoClose=!0;buttons=[];sections=[];sectionsEnabled=!1;constructor(e){this.language=e}isDropdown(e){return!!e&&"items"in e}click(e,t){e(),t.close()}close(e){e.close()}ngOnInit(){if(this.config&&!this.config.placement&&(this.config.placement=["bottom-left","bottom-right","top-left","top-right"]),this.sections=[],(0,M.emptyObject)(this.config?.sections??{}))return this.buttons=[...this.config?.items??[]],void(this.sectionsEnabled=!1);this.sectionsEnabled=!0,this.preprocessItems(this.config?.items??[])}preprocessItems(e){const t=this.config?.sections??{},r={};!e||!e.length||(e.forEach(o=>{this.getSection(t,o?.section??"default",r).items.push(o)}),Object.keys(t).forEach(o=>{const s=r[o];s&&s.items&&s.items.length&&this.sections.push(s)}))}getSection(e,t,r){let s=r[t]??null;return null===s&&(s=(0,M.deepClone)(e[t]??{}),s.items=[],r[t]=s),s}getPlacement(){return this.config&&!this.config.placement?["bottom-left","bottom-right","top-left","top-right"]:this.config.placement}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(Oe))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-dropdown-button"]],inputs:{config:"config",disabled:"disabled",autoClose:"autoClose"},decls:11,vars:13,consts:[["ngbDropdown","",1,"d-inline-block","dropdown-button",3,"autoClose","placement","ngClass"],["dropDown","ngbDropdown"],["ngbDropdownToggle","",3,"disabled","ngClass","title"],[3,"image","klass",4,"ngIf"],[4,"ngIf"],["ngbDropdownMenu",""],["buttonTemplate",""],[3,"image","klass"],[3,"labelKey"],[3,"ngClass","section-split","last-section","first-section",4,"ngFor","ngForOf"],[3,"ngClass"],[1,"dropdown-menu-item-header"],[4,"ngFor","ngForOf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["ngbDropdownItem","",3,"ngClass","click"],[1,"d-flex","align-items-center"],[1,"dropdown-item-label","flex-grow-1"],[3,"labelKey","module",4,"ngIf"],[3,"labelKey","module"],[3,"item","item-clicked"]],template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"div",0,1)(2,"button",2),n.\u0275\u0275template(3,sP,1,2,"scrm-image",3),n.\u0275\u0275template(4,cP,2,1,"ng-container",4),n.\u0275\u0275template(5,lP,2,1,"ng-container",4),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(6,"div",5),n.\u0275\u0275template(7,pP,2,1,"ng-container",4),n.\u0275\u0275template(8,hP,2,1,"ng-container",4),n.\u0275\u0275elementEnd()(),n.\u0275\u0275template(9,SP,2,2,"ng-template",null,6,n.\u0275\u0275templateRefExtractor)),2&t&&(n.\u0275\u0275classProp("sectioned-dropdown-menu",r.sectionsEnabled),n.\u0275\u0275property("autoClose",r.autoClose)("placement",r.getPlacement())("ngClass",r.config.wrapperKlass),n.\u0275\u0275advance(2),n.\u0275\u0275property("disabled",r.disabled)("ngClass",r.config.klass)("title",r.language.getFieldLabel(r.config.titleKey)||""),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.config.icon),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.config.label),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!r.config.label&&r.config.labelKey),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",r.sectionsEnabled),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!r.sectionsEnabled))},dependencies:[F.NgClass,F.NgForOf,F.NgIf,F.NgTemplateOutlet,de.NgbDropdown,de.NgbDropdownToggle,de.NgbDropdownMenu,de.NgbDropdownItem,mn,g0,Ot],encapsulation:2,changeDetection:0})}return i})();function DP(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275element(1,"scrm-button",3),n.\u0275\u0275elementContainerEnd()),2&i){const e=a.$implicit;n.\u0275\u0275advance(1),n.\u0275\u0275property("config",e)}}function wP(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,DP,2,1,"ng-container",2),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",e.config.items)}}let v0=(()=>{class i{config;static \u0275fac=function(t){return new(t||i)};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-grouped-button"]],inputs:{config:"config"},decls:2,vars:2,consts:[["role","group",1,"btn-group","grouped-button",3,"ngClass"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"config"]],template:function(t,r){if(1&t&&(n.\u0275\u0275elementStart(0,"div",0),n.\u0275\u0275template(1,wP,2,1,"ng-container",1),n.\u0275\u0275elementEnd()),2&t){let o;n.\u0275\u0275property("ngClass",null!==(o=null==r.config?null:r.config.wrapperKlass)&&void 0!==o?o:""),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",null==r.config?null:r.config.items)}},dependencies:[F.NgClass,F.NgForOf,F.NgIf,Nn],encapsulation:2,changeDetection:0})}return i})();function xP(i,a){if(1&i&&n.\u0275\u0275element(0,"scrm-button",4),2&i){const e=n.\u0275\u0275nextContext().$implicit;n.\u0275\u0275property("config",e)}}function EP(i,a){if(1&i&&n.\u0275\u0275element(0,"scrm-dropdown-button",4),2&i){const e=n.\u0275\u0275nextContext().$implicit;n.\u0275\u0275property("config",e)}}function FP(i,a){if(1&i&&n.\u0275\u0275element(0,"scrm-grouped-button",4),2&i){const e=n.\u0275\u0275nextContext().$implicit;n.\u0275\u0275property("config",e)}}function IP(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,xP,1,1,"scrm-button",3),n.\u0275\u0275template(2,EP,1,1,"scrm-dropdown-button",3),n.\u0275\u0275template(3,FP,1,1,"scrm-grouped-button",3),n.\u0275\u0275elementContainerEnd()),2&i){const e=a.$implicit;let t,r,o;n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e&&!(null!==(t=null==e?null:e.items)&&void 0!==t&&t)),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e&&(null!==(r=null==e?null:e.items)&&void 0!==r?r:"")&&"dropdown"===(null!==(r=null==e?null:e.type)&&void 0!==r?r:"dropdown")),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e&&(null!==(o=null==e?null:e.items)&&void 0!==o?o:"")&&"grouped"===(null!==(o=null==e?null:e.type)&&void 0!==o?o:"dropdown"))}}function AP(i,a){if(1&i&&n.\u0275\u0275element(0,"scrm-dropdown-button",5),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("config",e.dropdownConfig)}}function TP(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div"),n.\u0275\u0275template(1,IP,4,3,"ng-container",1),n.\u0275\u0275template(2,AP,1,1,"scrm-dropdown-button",2),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275classMap(e.klass),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",e.buttons.expanded),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.buttons.collapsed.length)}}let Yr=(()=>{class i{config$;klass="";buttons={expanded:[],collapsed:[]};dropdownConfig;internalConfig;sub;constructor(){}ngOnInit(){this.sub=this.config$.subscribe(e=>{this.internalConfig={...e},this.splitButtons()})}ngOnDestroy(){this.sub.unsubscribe()}buildDropdownConfig(){let e=["button-group-button"];this.internalConfig.buttonKlass&&this.internalConfig.buttonKlass.length>0&&(e=e.concat(this.internalConfig.buttonKlass)),this?.internalConfig?.dropdownOptions?.klass&&(e=e.concat(this.internalConfig.dropdownOptions.klass));let t=["button-group-dropdown"];const r=this.internalConfig.dropdownOptions,o=r&&r.wrapperKlass;o&&o.length>0&&(t=t.concat(o)),this.dropdownConfig={label:this.internalConfig.dropdownLabel,klass:[...e],wrapperKlass:t,items:this.buttons.collapsed},this.internalConfig.dropdownOptions&&this.internalConfig.dropdownOptions.placement&&(this.dropdownConfig.placement=this.internalConfig.dropdownOptions.placement),this.internalConfig.dropdownOptions&&this.internalConfig.dropdownOptions.icon&&(this.dropdownConfig.icon=this.internalConfig.dropdownOptions.icon)}getBreakpoint(){return this.internalConfig.breakpoint||0===this.internalConfig.breakpoint?this.internalConfig.breakpoint:4}splitButtons(){if(this.buttons.expanded=[],this.buttons.collapsed=[],!this.internalConfig.buttons||this.internalConfig.buttons.length<1)return;let e=0;const t=this.internalConfig.showAfterBreakpoint??!0;this.internalConfig.buttons.forEach(r=>{if(r){if(e<this.getBreakpoint()){let o=["button-group-button"];this.internalConfig.buttonKlass&&this.internalConfig.buttonKlass.length>0&&(o=o.concat(this.internalConfig.buttonKlass));const s={...r};M.Button.appendClasses(s,[...o]),this.buttons.expanded.push(s)}else!0===t&&this.buttons.collapsed.push({...r});e++}}),this.buildDropdownConfig()}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-button-group"]],inputs:{config$:"config$",klass:"klass"},decls:1,vars:1,consts:[[3,"class",4,"ngIf"],[4,"ngFor","ngForOf"],["autoClose","outside",3,"config",4,"ngIf"],[3,"config",4,"ngIf"],[3,"config"],["autoClose","outside",3,"config"]],template:function(t,r){1&t&&n.\u0275\u0275template(0,TP,3,4,"div",0),2&t&&n.\u0275\u0275property("ngIf",r.config$)},dependencies:[F.NgForOf,F.NgIf,Nn,Xs,v0],encapsulation:2})}return i})();const _0={userPreferences:{},loading:!1};let bi=(0,M.deepClone)(_0),Ko=null,Vt=(()=>{class i{collectionGQL;config;processService;localStorage;store=new S.BehaviorSubject(bi);state$=this.store.asObservable();saveBufferStore=new S.BehaviorSubject(!1);saveBuffer$;subs=[];resourceName="userPreferences";fieldsMetadata={fields:["id","_id","value","items"]};userPreferences$=this.state$.pipe((0,v.map)(e=>e.userPreferences),(0,v.distinctUntilChanged)());loading$=this.state$.pipe((0,v.map)(e=>e.loading));constructor(e,t,r,o){this.collectionGQL=e,this.config=t,this.processService=r,this.localStorage=o;const c=(t.getConfigValue("ui")??{}).user_preferences_save_delay??5e3;this.saveBuffer$=this.saveBufferStore.asObservable().pipe((0,v.debounceTime)(c??5e3)),this.subs.push(this.saveBuffer$.subscribe(l=>{l&&this.saveUiPreferences()}))}clear(){Ko=null,this.updateState((0,M.deepClone)(_0)),this.subs.forEach(e=>e.unsubscribe())}clearAuthBased(){this.clear()}getUserPreference(e){return bi.userPreferences&&bi.userPreferences[e]?bi.userPreferences[e]:null}getUi(e,t){const r=e+"-"+t;return this.storageLoad(e,r)??(bi?.userPreferences?.ui??{})[r]??null}setUi(e,t,r){const o=e+"-"+t;this.storageSave(e,o,r);const s=bi?.userPreferences?.ui??{};s[o]=r,bi.userPreferences.ui=s,this.saveBufferStore.next(!0)}saveUiPreferences(){this.processService.submit("save-ui-user-preferences",{preferences:bi.userPreferences.ui}).pipe((0,v.take)(1)).subscribe()}storageSave(e,t,r){let o=this.localStorage.get(t);o||(o={}),o[e]=r,this.localStorage.set(t,o)}storageLoad(e,t){const r=this.localStorage.get(t);return r&&r[e]?r[e]:null}load(){return this.updateState({...bi,loading:!0}),this.getUserPreferences().pipe((0,v.tap)(e=>{this.updateState({...bi,userPreferences:e,loading:!1})}))}isCached(){return null!==Ko}set(e){Ko=(0,S.of)(e).pipe((0,v.shareReplay)(1)),this.updateState({...bi,userPreferences:e,loading:!1})}updateState(e){this.store.next(bi=e)}getUserPreferences(){return null==Ko&&(Ko=this.fetch().pipe((0,v.shareReplay)(1))),Ko}fetch(){return this.collectionGQL.fetchAll(this.resourceName,this.fieldsMetadata).pipe((0,v.map)(({data:e})=>{const t={};return e.userPreferences&&e.userPreferences.edges&&e.userPreferences.edges.forEach(r=>{r.node.items&&Object.keys(r.node.items).forEach(o=>{t[o]=r.node.items[o]})}),t}))}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(uu),n.\u0275\u0275inject(dt),n.\u0275\u0275inject($i),n.\u0275\u0275inject(cr))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),eo=(()=>{class i{getTrimmedInputValue(e){return"string"!=typeof e?e:e.trim()}isEmptyInputValue(e){return null==e||typeof e>"u"||""===e||0===e.length}isEmptyTrimmedInputValue(e){return this.isEmptyInputValue(this.getTrimmedInputValue(e))}isEmptyBooleanInputValue(e){return this.isEmptyInputValue(e)||"false"===e||!1===e||""===e}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),to=(()=>{class i{preferences;formUtils;locale;constructor(e,t,r){this.preferences=e,this.formUtils=t,this.locale=r}toUserFormat(e,t){if((0,M.isVoid)(e)||""===e)return"";if((0,M.isFalse)(t?.metadata?.format??!0))return e;const r=(0,F.formatNumber)(Number(e),this.locale);return this.replaceSeparators(r)}toInternalFormat(e){if(!e)return e;const t=this.getDecimalsSymbol()||".",r=this.getGroupSymbol()||",";let o=new RegExp(t,"g");"."===t&&(o=new RegExp("\\.","g"));let s=new RegExp(r,"g");return"."===r&&(s=new RegExp("\\.","g")),(e=(e=(e=e.replace(s,"group_separator")).replace(o,"decimal_separator")).replace(/decimal_separator/g,".")).replace(/group_separator/g,"")}getFloatUserFormatPattern(){const e=this.getGroupSymbol(),t=this.getDecimalsSymbol();let r="^(";return r+="(\\d{1,3}(\\"+e+"\\d{3})*(\\"+t+"\\d+)?)|",r+="\\d*|",r+="(\\d+(\\"+t+"\\d+)?)|",r+="(\\d+(\\.\\d+)?)",r+=")$",r}getIntUserFormatPattern(){let t="^(";return t+="(\\d{1,3}(\\"+this.getGroupSymbol()+"\\d{3})*)|",t+="\\d*",t+=")$",t}getGroupSymbol(){return this.preferences.getUserPreference("num_grp_sep")||","}getDecimalsSymbol(){return this.preferences.getUserPreference("dec_sep")||"."}replaceSeparators(e){if(!e)return e;e=(e=e.replace(/,/g,"group_separator")).replace(/\./g,"decimal_separator");const t=this.getDecimalsSymbol()||".",r=this.getGroupSymbol()||",";return(e=e.replace(/decimal_separator/g,t)).replace(/group_separator/g,r)}validateIntUserFormat(e){const t=this.formUtils.getTrimmedInputValue(e);if(this.formUtils.isEmptyInputValue(t)||new RegExp(this.getIntUserFormatPattern()).test(t))return!1}validateFloatUserFormat(e){const t=this.formUtils.getTrimmedInputValue(e);return!this.formUtils.isEmptyInputValue(t)&&!new RegExp(this.getFloatUserFormatPattern()).test(t)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Vt),n.\u0275\u0275inject(eo),n.\u0275\u0275inject(n.LOCALE_ID))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),fu=(()=>{class i{preferences;numberFormatter;locale;constructor(e,t,r){this.preferences=e,this.numberFormatter=t,this.locale=r}toUserFormat(e,t=null){if((0,M.isVoid)(e)||""===e)return"";const r=t&&t.symbol||this.getSymbol(),o=t&&t.code||this.getCode();let s=null;t&&null!==t.digits&&isFinite(t.digits)&&(s=t.digits);const c=this.getDigitsInfo(s);let l;return t&&"edit"===t.mode?(l=(0,F.formatNumber)(Number(e),this.locale,c),this.replaceSeparators(l)):(l=(0,F.formatCurrency)(Number(e),this.locale,r,o,c),this.replaceSeparators(l))}toInternalFormat(e){if(!e)return"";const t=e.replace(this.getSymbol(),"");return this.numberFormatter.toInternalFormat(t)}getCurrencyFormat(){return this.preferences.getUserPreference("currency")||this.getDefaultFormat()}getDefaultFormat(){return{iso4217:"USD",name:"US Dollars",symbol:"$"}}getCode(){return this.getCurrencyFormat().iso4217}getSymbol(){return this.getCurrencyFormat().symbol}getDigits(){return this.preferences.getUserPreference("default_currency_significant_digits")||2}getDigitsInfo(e){let t="1.2-2",r=this.getDigits();return null!==e&&isFinite(e)&&(r=e),null!==r&&isFinite(r)&&(t=r<1?"1.0-0":`1.${r}-${r}`),t}replaceSeparators(e){return this.numberFormatter.replaceSeparators(e)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Vt),n.\u0275\u0275inject(to),n.\u0275\u0275inject(n.LOCALE_ID))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),lr=(()=>{class i{preferences;formUtils;locale;format$;prefStore;constructor(e,t,r){this.preferences=e,this.formUtils=t,this.locale=r,this.prefStore=e??{userPreferences$:(0,S.of)({}),getUserPreference:()=>null};const o={date:this.getInternalDateFormat(),time:this.getInternalTimeFormat()};this.format$=(this.prefStore.userPreferences$??(0,S.of)(o)).pipe((0,v.map)(()=>({date:this.getDateFormat(),time:this.getTimeFormat()})))}getDateFormat(){const e=this.prefStore?.getUserPreference?.("date_format");return e||this.getInternalTimeFormat()}getTimeFormat(){const e=this.prefStore?.getUserPreference?.("time_format");if(e){let t=e;return t.includes("aaaaaa")&&(t=t.replace("aaaaaa","aaaaa'm'")),t}return this.getInternalTimeFormat()}getDateTimeFormat(){return this.getDateFormat()+" "+this.getTimeFormat()}getInternalDateFormat(){return"yyyy-MM-dd"}getInternalTimeFormat(){return"HH:mm:ss"}getInternalDateTimeFormat(){return this.getInternalDateFormat()+" "+this.getInternalTimeFormat()}getInternalFormat(){return this.getInternalDateTimeFormat()}getUserFormat(){return this.getDateTimeFormat()}toUserFormat(e,t){const r=t&&t.fromFormat||this.getInternalFormat();if(e){const o=this.toDateTime(e,r,{zone:"GMT"});return o.isValid?(0,F.formatDate)(o.toJSDate(),this.getUserFormat(),this.locale,this.userTimeZone()):e}return""}toInternalFormat(e,t){const r=t&&t.fromFormat||this.getUserFormat();if(e){let o=this.toDateTime(e,r,{zone:this.prefStore?.getUserPreference?.("timezone")});return(0,F.formatDate)(o.toJSDate(),this.getInternalFormat(),this.locale,"GMT")}return""}formatDateTime(e,t,r="",o=this.locale,s=""){const c=this.toDateTime(e,r);return c.isValid?(0,F.formatDate)(c.toJSDate(),t,o,s):e}toDateTime(e,t="",r){if(!e)return Le.DateTime.invalid("empty");if(t)return Le.DateTime.fromFormat(e,t,r);let o=this.fromUserFormat(e,r);return o.isValid||(o=this.fromInternalFormat(e,r)),o}userDateTimeFormatToStruct(e){if(!e)return null;const t=this.toDateTime(e,"",{zone:this.prefStore?.getUserPreference?.("timezone")});return t.isValid?{date:{day:t.day,month:t.month,year:t.year},time:{hour:t.hour,minute:t.minute,second:t.second}}:null}internalDateTimeFormatToStruct(e){if(!e)return null;const t=this.toDateTime(e,this.getInternalDateTimeFormat(),{zone:"GMT"}),r=t.setZone(this.prefStore?.getUserPreference?.("timezone")??"GMT");return t.isValid?{date:{day:r.day,month:r.month,year:r.year},time:{hour:r.hour,minute:r.minute,second:r.second}}:null}userDateFormatToStruct(e){if(!e)return null;const t=this.toDateTime(e,"",{zone:this.prefStore?.getUserPreference?.("timezone")});return t.isValid?{day:t.day,month:t.month,year:t.year}:null}dateFormatToStruct(e,t=""){if(!e)return null;const r=this.toDateTime(e,t);return r.isValid?{day:r.day,month:r.month,year:r.year}:null}userTimeFormatToStruct(e){if(!e)return null;const t=this.toDateTime(e,"",{zone:this.prefStore?.getUserPreference?.("timezone")});return t.isValid?{hour:t.hour,minute:t.minute,second:t.second}:null}fromUserFormat(e,t,r){e=(e=(e=(e=(e=this.toUserFormat(e,r)).toString()).replace("a","A")).replace("p","P")).replace("m","M");let o=this.getUserFormat();return o=o.replace("aaaaa'm'","a"),Le.DateTime.fromFormat(e,o,t)}fromInternalFormat(e,t){const r=this.getInternalFormat();return Le.DateTime.fromFormat(e.toString(),r,t)}validateUserFormat(e,t=""){const r=this.formUtils.getTrimmedInputValue(e);return!this.formUtils.isEmptyInputValue(r)&&!this.fromUserFormat(r,{},{fromFormat:t}).isValid}userTimeZone(){let e=this.prefStore?.getUserPreference?.("timezone")??"GMT";e||(e="GMT");const t=Le.DateTime.now().setZone(e).toMillis();return Le.IANAZone.create(e).formatOffset(t,"techie")}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Vt),n.\u0275\u0275inject(eo),n.\u0275\u0275inject(n.LOCALE_ID))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Nr=(()=>{class i extends lr{getInternalFormat(){return this.getInternalDateFormat()}getUserFormat(){return this.getDateFormat()}toInternalFormat(e,t){const r=t&&t.fromFormat||this.getUserFormat();if(e){let o=this.toDateTime(e,r);return(!o||!o.isValid)&&(o=this.toDateTime(e)),(0,F.formatDate)(o.toJSDate(),this.getInternalFormat(),this.locale)}return""}toUserFormat(e,t){const r=t&&t.fromFormat||this.getInternalFormat(),o=t&&t.toFormat||this.getUserFormat();if(e){const s=this.toDateTime(e,r);return s.isValid?(0,F.formatDate)(s.toJSDate(),o,this.locale):e}return""}static \u0275fac=function(){let e;return function(r){return(e||(e=n.\u0275\u0275getInheritedFactory(i)))(r||i)}}();static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),pu=(()=>{class i{formUtils;constructor(e){this.formUtils=e}toUserFormat(e){return e}toInternalFormat(e){return e}getUserFormatPattern(){return"^([\\+]?|00)((([(]{0,1}\\s*[0-9]{1,4}\\s*[)]{0,1})\\s*)*|([\\-\\s\\./0-9])*)+$"}validateUserFormat(e){const t=this.formUtils.getTrimmedInputValue(e);return!this.formUtils.isEmptyInputValue(t)&&!new RegExp(this.getUserFormatPattern()).test(t)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(eo))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),it=(()=>{class i{currencyFormatter;numberFormatter;dateFormatter;datetimeFormatter;phoneFormatter;map={};constructor(e,t,r,o,s){this.currencyFormatter=e,this.numberFormatter=t,this.dateFormatter=r,this.datetimeFormatter=o,this.phoneFormatter=s,this.map.int=t,this.map.float=t,this.map.date=r,this.map.datetime=o,this.map.currency=e,this.map.phone=s}toUserFormat(e,t,r){if(!e)return t;const o=this.map[e];return o?o.toUserFormat(t,r):t}toInternalFormat(e,t){if(!e)return t;const r=this.map[e];return r?r.toInternalFormat(t):t}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(fu),n.\u0275\u0275inject(to),n.\u0275\u0275inject(Nr),n.\u0275\u0275inject(lr),n.\u0275\u0275inject(pu))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Ys=(()=>{class i{typeFormatter;language;configs;preferences;valuePipes={};fieldPipes={};constructor(e,t,r,o){this.typeFormatter=e,this.language=t,this.configs=r,this.preferences=o,this.valuePipes.int=s=>this.valueTypeFormat("int",s),this.valuePipes.float=s=>this.valueTypeFormat("float",s),this.valuePipes.date=s=>this.valueTypeFormat("date",s),this.valuePipes.datetime=s=>this.valueTypeFormat("datetime",s),this.valuePipes.currency=s=>this.valueTypeFormat("currency",s),this.valuePipes.enum=(s,c=[])=>this.enumFormat(s,c),this.fieldPipes.int=s=>this.fieldTypeFormat("int",s),this.fieldPipes.float=s=>this.fieldTypeFormat("float",s),this.fieldPipes.date=s=>this.fieldTypeFormat("date",s),this.fieldPipes.datetime=s=>this.fieldTypeFormat("datetime",s),this.fieldPipes.currency=s=>this.fieldTypeFormat("currency",s),this.fieldPipes.phone=s=>this.fieldTypeFormat("phone",s),this.fieldPipes.enum=s=>this.enumFieldFormat(s),this.fieldPipes.dynamicenum=s=>this.enumFieldFormat(s),this.fieldPipes.multienum=s=>this.multiEnumFormat(s)}addValuePipe(e,t){this.valuePipes[e]=t}addFieldPipe(e,t){this.fieldPipes[e]=t}parse(e,t,r){if(!e)return e;const s=e.match(/({{[\s\S]+?}})/g);if(!s||s.length<1)return e;let c=e;const l=t&&t.module||"";return s.forEach(u=>{if(!c.includes(u))return;let d="",f=[],p="",m="context",h=[],g=""+u;g=g.replace("{{",""),g=g.replace("}}",""),g=g.trim();let b=g;if(g.includes("|")){const[D,y,...w]=g.split("|");if(d=y.trim(),y.trim().includes(":")){let[x,...C]=y.trim().split(":");d=x.trim(),f=C}g=D.trim(),b=D.trim()}g.includes(".")&&(h=g.split("."),m=h[0],g=h[1]);let _=t;if("fields"===m&&(_=r),"fields"===m){if(!_||!(g in _))return void(c=c.replace(u,p));const D=r[g];return D?h[2]&&"value"===h[2]&&D.type in this.fieldPipes?(p=this.fieldPipes[D.type](D),void(c=c.replace(u,p))):h[2]&&"label"===h[2]?(p=this.getFieldLabel(D.labelKey,l),void(c=c.replace(u,p))):(p=(0,Ze.Z)({fields:r},b,""),void(c=c.replace(u,p))):void(c=c.replace(u,""))}"config"!==m?"preferences"!==m?_&&g in _?(p=(0,Ze.Z)({context:t},b,""),d in this.valuePipes&&(p=this.valuePipes[d](p)),c=c.replace(u,p)):c=c.replace(u,p):c=this.parseObjectContext(g,c,u,d,f,D=>this.preferences.getUserPreference(D)):c=this.parseObjectContext(g,c,u,d,f,D=>this.configs.getConfigValue(D))}),c}valueTypeFormat(e,t){return this.typeFormatter.toUserFormat(e,t)}enumFormat(e,t){const r=t[0]??"";return r&&e?this.language.getListLabel(r,e):""}fieldTypeFormat(e,t){return this.typeFormatter.toUserFormat(e,t.value)}enumFieldFormat(e){return(0,M.isVoid)(e.definition.options)||(0,M.isVoid)(e.value)?"":this.language.getListLabel(e.definition.options,e.value)}multiEnumFormat(e){if((0,M.isVoid)(e.definition.options)||(0,M.isVoid)(e.valueList)||e.valueList.length<1)return"";const t=[];return e.valueList.forEach(r=>{(0,M.isVoid)(r)||t.push(this.language.getListLabel(e.definition.options,r))}),t.join(", ")}getFieldLabel(e,t=""){return(0,M.isVoid)(e)?"":this.language.getFieldLabel(e,t)}parseObjectContext(e,t,r,o,s,c){let l=e;if(e.includes(".")){let[d,...f]=e.split(".");l=d}let u=c(l);return e.includes(".")&&"object"==typeof u&&(u=(0,Ze.Z)({value:u},e,"")),u&&"object"!=typeof u?(o in this.valuePipes&&(u=this.valuePipes[o](u,s)),t.replace(r,u)):t.replace(r,"")}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(it),n.\u0275\u0275inject(Oe),n.\u0275\u0275inject(dt),n.\u0275\u0275inject(Vt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function NP(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"span",1),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(e.parsedLabel)}}let no=(()=>{class i{dynamicLabels;language;template="";labelKey="";context={};fields={};module=null;parsedLabel="";vm$;constructor(e,t){this.dynamicLabels=e,this.language=t}ngOnInit(){this.vm$=this.language.vm$.pipe((0,v.tap)(()=>{this.labelKey&&(this.template=this.language.getFieldLabel(this.labelKey,this.module)),this.parseLabel()}))}ngOnChanges(e){(e.template||e.context||e.labelKey||e.fields)&&this.parseLabel()}parseLabel(){this.parsedLabel=this.dynamicLabels.parse(this.template,this.context,this.fields)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(Ys),n.\u0275\u0275directiveInject(Oe))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-dynamic-label"]],inputs:{template:"template",labelKey:"labelKey",context:"context",fields:"fields",module:"module"},features:[n.\u0275\u0275NgOnChangesFeature],decls:2,vars:3,consts:[[4,"ngIf"],[1,"dynamic-label"]],template:function(t,r){1&t&&(n.\u0275\u0275template(0,NP,3,1,"ng-container",0),n.\u0275\u0275pipe(1,"async")),2&t&&n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(1,1,r.vm$))},dependencies:[F.NgIf,F.AsyncPipe],encapsulation:2})}return i})(),ec=(()=>{class i{klass="";constructor(){}ngOnInit(){}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-inline-loading-spinner"]],inputs:{klass:"klass"},decls:4,vars:3,consts:[[1,"bounce1"],[1,"bounce2"],[1,"bounce3"]],template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"div"),n.\u0275\u0275element(1,"div",0)(2,"div",1)(3,"div",2),n.\u0275\u0275elementEnd()),2&t&&n.\u0275\u0275classMapInterpolate1("inline-spinner ",r.klass,"")},styles:[".inline-spinner[_ngcontent-%COMP%]{text-align:center}.inline-spinner[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{border-radius:100%;display:inline-block;animation:_ngcontent-%COMP%_sk-bouncedelay 1.4s infinite ease-in-out both}.inline-spinner[_ngcontent-%COMP%]   .bounce1[_ngcontent-%COMP%]{animation-delay:-.32s}.inline-spinner[_ngcontent-%COMP%]   .bounce2[_ngcontent-%COMP%]{animation-delay:-.16s}@keyframes _ngcontent-%COMP%_sk-bouncedelay{0%,80%,to{transform:scale(0)}40%{transform:scale(1)}}"]})}return i})();function LP(i,a){if(1&i&&n.\u0275\u0275element(0,"scrm-button-group",2),2&i){const e=n.\u0275\u0275nextContext(3);n.\u0275\u0275property("config$",e.config$)("klass",e.buttonGroupClass)}}function BP(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,LP,1,2,"scrm-button-group",1),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.config$)}}function OP(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",6),n.\u0275\u0275element(1,"scrm-label",7),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext(3);n.\u0275\u0275advance(1),n.\u0275\u0275property("labelKey",e.confirmationLabel)}}const RP=function(){return{}};function jP(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",6),n.\u0275\u0275element(1,"scrm-dynamic-label",8),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext(3);let t,r;n.\u0275\u0275advance(1),n.\u0275\u0275property("labelKey",e.confirmationDynamicLabel)("module",null!==(t=null==e.actionContext?null:e.actionContext.module)&&void 0!==t?t:"")("fields",null!==(r=null==e.actionContext||null==e.actionContext.record?null:e.actionContext.record.fields)&&void 0!==r?r:n.\u0275\u0275pureFunction0(3,RP))}}function kP(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",9),n.\u0275\u0275element(1,"scrm-button",10),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext(3);n.\u0275\u0275advance(1),n.\u0275\u0275property("config",e.inlineCancelButton)}}function PP(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",9),n.\u0275\u0275element(1,"scrm-button",10),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext(3);n.\u0275\u0275advance(1),n.\u0275\u0275property("config",e.inlineConfirmButton)}}function $P(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"div",3),n.\u0275\u0275template(2,OP,2,1,"div",4),n.\u0275\u0275template(3,jP,2,4,"div",4),n.\u0275\u0275template(4,kP,2,1,"div",5),n.\u0275\u0275template(5,PP,2,1,"div",5),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",e.confirmationLabel),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.confirmationDynamicLabel&&!e.confirmationLabel),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.inlineCancelButton),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.inlineConfirmButton)}}function UP(i,a){1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275element(1,"scrm-inline-loading-spinner",11),n.\u0275\u0275elementContainerEnd())}function VP(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"div"),n.\u0275\u0275template(2,BP,2,1,"ng-container",0),n.\u0275\u0275template(3,$P,6,4,"ng-container",0),n.\u0275\u0275template(4,UP,2,0,"ng-container",0),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275classMapInterpolate1("",e.klass," float-right action-group-menu"),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!e.inlineConfirmationEnabled&&!e.loading),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.inlineConfirmationEnabled&&!e.loading),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.loading)}}let ur=(()=>{class i{languages;screenSize;systemConfigStore;klass="";buttonClass="btn btn-sm";buttonGroupClass="";actionContext;config;actionLimitConfig="recordview_actions_limits";configState=new S.BehaviorSubject({buttons:[]});config$=this.configState.asObservable();vm$;inlineConfirmationEnabled=!1;confirmationLabel="";confirmationDynamicLabel="";inlineCancelButton=null;inlineConfirmButton=null;loading=!1;buttonGroupDropdownClass="dropdown-button-secondary";subs;screen=kn.Medium;defaultBreakpoint=3;breakpoint;constructor(e,t,r){this.languages=e,this.screenSize=t,this.systemConfigStore=r}ngOnInit(){const e=this.config?.getActions?.()??(0,S.of)([]),t=this.screenSize?.screenSize$??(0,S.of)(kn.Medium),r=this.languages?.vm$??(0,S.of)({});this.vm$=e.pipe((0,S.combineLatestWith)(t,r),(0,v.map)(([o,s,c])=>(s&&(this.screen=s),this.configState.next(this.getButtonGroupConfig(o)),{actions:o,screenSize:s,languages:c})))}isXSmallScreen(){return this.screen===kn.XSmall}getButtonGroupConfig(e){const t=[],r=[];e.forEach(l=>{const u=this.buildButton(l);l.params&&l.params.expanded?t.push(u):r.push(u)});let s=e.length;!0===(this.config?.collapseButtons??!0)&&(s=this.getBreakpoint(),t.length<s&&(s=t.length));const c=t.concat(r);return{buttonKlass:[this.buttonClass],dropdownLabel:this.languages.getAppString("LBL_ACTIONS")||"",breakpoint:s,dropdownOptions:{placement:["bottom-right"],wrapperKlass:[this.buttonGroupDropdownClass]},buttons:c}}getBreakpoint(){const e=this.systemConfigStore.getConfigValue(this.actionLimitConfig);return this.screen&&e&&e[this.screen]?(this.breakpoint=e[this.screen],this.breakpoint):this.breakpoint?this.breakpoint:this.defaultBreakpoint}buildButton(e){const t={label:e.label||"",labelModule:this?.actionContext?.module??"",labelKey:e.labelKey||"",klass:this.buttonClass,titleKey:e.titleKey||"",onClick:()=>{e?.params?.inlineConfirmation?(this.triggerTemporaryLoading(),this.initInlineConfirmation(e,()=>{this.config.runAction(e,this.actionContext)})):this.config.runAction(e,this.actionContext)}};t.label||(t.labelKey=e.labelKey??"");const r=e?.params?.debounceClick??null;return t.debounceClick=!0,(0,M.isFalse)(r)&&(t.debounceClick=!1),e.icon&&(t.icon=e.icon),e.status&&M.Button.appendClasses(t,[e.status]),e.klass&&M.Button.appendClasses(t,e.klass),t}triggerTemporaryLoading(){this.loading=!0;const e=parseInt(this.systemConfigStore.getUi("inline_confirmation_loading_delay"))??200;setTimeout(()=>{this.loading=!1},e)}initInlineConfirmation(e,t){const r=e?.params?.inlineConfirmationButtons?.cancel??{},o=e?.params?.inlineConfirmationButtons?.confirm??{};this.confirmationLabel=e?.params?.confirmationLabel??"",this.confirmationDynamicLabel=e?.params?.confirmationDynamicLabel??"",this.inlineCancelButton=this.buildInlineCancelButton(r),this.inlineConfirmButton=this.buildInlineConfirmButton(o,t),this.inlineConfirmationEnabled=!0}buildInlineCancelButton(e){const r={labelKey:"LBL_NO",klass:"btn btn-sm p-0 m-0 btn-link border-0 line-height-initial",debounceClick:!0,...e??{}};return r.onClick=()=>{this.triggerTemporaryLoading(),this.resetInlineConfirmation()},r}buildInlineConfirmButton(e,t){const o={labelKey:"LBL_YES",klass:"btn btn-sm p-0 m-0 btn-link border-0 line-height-initial",debounceClick:!0,...e??{}};return o.onClick=()=>{this.triggerTemporaryLoading(),t(),this.resetInlineConfirmation()},o}resetInlineConfirmation(){this.inlineConfirmationEnabled=!1,this.confirmationDynamicLabel="",this.confirmationLabel="",this.inlineConfirmButton=null,this.inlineCancelButton=null}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(Oe),n.\u0275\u0275directiveInject(ai),n.\u0275\u0275directiveInject(dt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-action-group-menu"]],inputs:{klass:"klass",buttonClass:"buttonClass",buttonGroupClass:"buttonGroupClass",actionContext:"actionContext",config:"config",actionLimitConfig:"actionLimitConfig"},decls:2,vars:3,consts:[[4,"ngIf"],[3,"config$","klass",4,"ngIf"],[3,"config$","klass"],[1,"d-flex","align-items-start","justify-content-end","inline-confirmation"],["class","pl-1 inline-confirmation-label",4,"ngIf"],["class","pl-1 inline-confirmation-button",4,"ngIf"],[1,"pl-1","inline-confirmation-label"],[3,"labelKey"],[3,"labelKey","module","fields"],[1,"pl-1","inline-confirmation-button"],[3,"config"],["klass","inline-spinner-md"]],template:function(t,r){1&t&&(n.\u0275\u0275template(0,VP,5,6,"ng-container",0),n.\u0275\u0275pipe(1,"async")),2&t&&n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(1,1,r.vm$))},dependencies:[F.NgIf,Nn,Yr,Ot,no,ec,F.AsyncPipe],encapsulation:2})}return i})(),fn=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Ve.AngularSvgIconModule]})}return i})(),y0=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,fn,de.NgbModule]})}return i})(),Nt=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule]})}return i})(),Lr=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,de.NgbDropdownModule,fn,y0,Nt,de.NgbTooltipModule]})}return i})(),Xt=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,fn,Nt,de.NgbTooltipModule]})}return i})(),b0=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Xt]})}return i})(),dr=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Xt,Lr,b0]})}return i})(),io=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule]})}return i})(),Br=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule]})}return i})(),fr=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,fn,Xt,dr,Nt,io,Br]})}return i})();function zP(i,a){1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275element(1,"scrm-label",16),n.\u0275\u0275elementContainerEnd())}let mu=(()=>{class i{languageStore;selectionSource;actionSource;dropdownConfig;subs=[];status=M.SelectionStatus.NONE;count=0;constructor(e){this.languageStore=e}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe()),this.subs=[],this.count=0,this.status=M.SelectionStatus.NONE}ngOnInit(){this.subs=[],this.subs.push(this.selectionSource.getSelectionStatus().subscribe(e=>this.status=e)),this.subs.push(this.selectionSource.getSelectedCount().subscribe(e=>this.count=e)),this.subs.push(this.actionSource.getBulkActions().subscribe(e=>{const t={labelKey:"LBL_BULK_ACTION_BUTTON_LABEL",klass:["bulk-action-button","btn","btn-sm"],wrapperKlass:["bulk-action-group","float-left"],items:[]};Object.keys(e).forEach(r=>{const o=e[r];t.items.push({labelKey:o.labelKey??"",klass:[`${r}-bulk-action`],onClick:()=>{this.actionSource.executeBulkAction(o.key)}})}),this.dropdownConfig=t}))}selectPage(){this.selectionSource.updateSelection(M.SelectionStatus.PAGE)}selectAll(){this.selectionSource.updateSelection(M.SelectionStatus.ALL)}deselectAll(){this.selectionSource.updateSelection(M.SelectionStatus.NONE)}toggleSelection(e){this.selectionSource.updateSelection(e!==M.SelectionStatus.ALL?M.SelectionStatus.ALL:M.SelectionStatus.NONE)}SelectionStatus=M.SelectionStatus;static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(Oe))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-bulk-action-menu"]],inputs:{selectionSource:"selectionSource",actionSource:"actionSource"},decls:17,vars:6,consts:[[1,"bulk-action","float-left"],["ngbDropdown","",1,"dropdown","select-action-group","float-left"],["type","button","ngbDropdownToggle","","aria-haspopup","true","aria-expanded","false","aria-hidden","true","aria-label","Select Action Menu",1,"bulk-action-button","dropdown-toggle","btn","btn-sm"],[1,"checkbox-container"],["type","checkbox","aria-hidden","true",3,"checked","indeterminate","change"],[1,"checkmark"],[1,"bulk-action-selected-number"],[4,"ngIf"],["ngbDropdownMenu","","aria-hidden","true",1,"dropdown-menu"],[1,"dropdown-item","select-all",3,"click"],["labelKey","LBL_LISTVIEW_OPTION_ENTIRE"],[1,"dropdown-item","select-page",3,"click"],["labelKey","LBL_LISTVIEW_OPTION_CURRENT"],[1,"dropdown-item","deselect-all",3,"click"],["labelKey","LBL_LISTVIEW_NONE"],[3,"disabled","config"],["labelKey","LBL_LISTVIEW_SELECTED_OBJECTS"]],template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"button",2)(3,"label",3)(4,"input",4),n.\u0275\u0275listener("change",function(){return r.toggleSelection(r.status)}),n.\u0275\u0275elementEnd(),n.\u0275\u0275element(5,"span",5),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(6,"span",6),n.\u0275\u0275template(7,zP,2,0,"ng-container",7),n.\u0275\u0275text(8),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(9,"div",8)(10,"a",9),n.\u0275\u0275listener("click",function(){return r.selectAll()}),n.\u0275\u0275element(11,"scrm-label",10),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(12,"a",11),n.\u0275\u0275listener("click",function(){return r.selectPage()}),n.\u0275\u0275element(13,"scrm-label",12),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(14,"a",13),n.\u0275\u0275listener("click",function(){return r.deselectAll()}),n.\u0275\u0275element(15,"scrm-label",14),n.\u0275\u0275elementEnd()()(),n.\u0275\u0275element(16,"scrm-dropdown-button",15),n.\u0275\u0275elementEnd()),2&t&&(n.\u0275\u0275advance(4),n.\u0275\u0275property("checked","ALL"===r.status)("indeterminate","SOME"===r.status||"PAGE"===r.status),n.\u0275\u0275advance(3),n.\u0275\u0275property("ngIf",r.count>0),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",r.count>0?r.count:""," "),n.\u0275\u0275advance(8),n.\u0275\u0275property("disabled",r.count<1)("config",r.dropdownConfig))},dependencies:[F.NgIf,de.NgbDropdown,de.NgbDropdownToggle,de.NgbDropdownMenu,Xs,Ot],encapsulation:2})}return i})(),gu=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,de.NgbModule,Lr,Nt]})}return i})(),C0=(()=>{class i{constructor(){}addOnClickPartial(e,t){const r={...e};if(e&&"items"in r){const o=r.items;return r.items=[],o.forEach(s=>{r.items.push(this.addOnClickPartial(s,t))}),r}return r.onClick=r.onClick&&(0,at.Z)(r.onClick,t),r}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),tc=(()=>{class i{elementRef;screenSize;dataSource;height=300;view=(0,n.signal)([300,this.height]);subs=[];constructor(e,t){this.elementRef=e,this.screenSize=t}onResize(){this.calculateView()}initResizeListener(){const e=(0,S.fromEvent)(window,"resize").pipe((0,v.tap)(()=>this.view.set([])),(0,v.debounceTime)(300));this.view.set([]),this.subs.push(e.pipe((0,v.debounceTime)(50)).subscribe(()=>{this.calculateView()}))}calculateView(){let e;const t=this.elementRef&&this.elementRef.nativeElement||{},r=t.parentElement&&t.parentElement.parentElement||{},o=r&&r.offsetWidth||0;o>0?e=o:(e=.7*window.innerWidth,window.innerWidth>990&&(e=.23*window.innerWidth)),this.view.set([e,this.height])}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(n.ElementRef),n.\u0275\u0275directiveInject(ai))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["ng-component"]],inputs:{dataSource:"dataSource"},decls:0,vars:0,template:function(t,r){},encapsulation:2})}return i})(),WP=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule]})}return i})();function GP(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",2),n.\u0275\u0275element(1,"scrm-label",3),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("labelKey",e.labelKey)}}let Ho=(()=>{class i{language;labelKey="";constructor(e){this.language=e}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(Oe))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-chart-message-area"]],inputs:{labelKey:"labelKey"},decls:2,vars:1,consts:[[1,"d-flex","mb-4","mt-4","justify-content-center"],["class","lead",4,"ngIf"],[1,"lead"],[3,"labelKey"]],template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"div",0),n.\u0275\u0275template(1,GP,2,1,"div",1),n.\u0275\u0275elementEnd()),2&t&&(n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.labelKey))},dependencies:[F.NgIf,Ot],encapsulation:2})}return i})(),pr=(()=>{class i{overlay=!1;constructor(){}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-loading-spinner"]],inputs:{overlay:"overlay"},decls:19,vars:2,consts:[[1,"loading-spinner"],[1,"sk-cube-grid"],[1,"sk-cube","sk-cube1","sk-cube-primary"],[1,"sk-cube","sk-cube2","sk-cube-secondary"],[1,"sk-cube","sk-cube3","sk-cube-secondary"],[1,"sk-cube","sk-cube4","sk-cube-primary"],[1,"sk-cube","sk-cube5","sk-cube-secondary"],[1,"sk-cube","sk-cube6","sk-cube-secondary"],[1,"sk-cube","sk-cube7","sk-cube-primary"],[1,"sk-cube","sk-cube8","sk-cube-primary"],[1,"sk-cube","sk-cube9","sk-cube-primary"]],template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"div")(1,"div",0)(2,"div",1),n.\u0275\u0275element(3,"div",2)(4,"div",2)(5,"div",3)(6,"div",4)(7,"div",5)(8,"div",5)(9,"div",6)(10,"div",7)(11,"div",8)(12,"div",8)(13,"div",9)(14,"div",10)(15,"div",8)(16,"div",8)(17,"div",9)(18,"div",10),n.\u0275\u0275elementEnd()()()),2&t&&n.\u0275\u0275classProp("overlay",r.overlay)},styles:[".sk-cube-grid[_ngcontent-%COMP%]{width:6.25em;height:6.25em}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube[_ngcontent-%COMP%]{width:25%;height:25%;float:left;animation:_ngcontent-%COMP%_sk-cubeGridScaleDelay 1.3s infinite ease-in-out}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube1[_ngcontent-%COMP%]{animation-delay:.2s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube2[_ngcontent-%COMP%]{animation-delay:.3s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube3[_ngcontent-%COMP%]{animation-delay:.4s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube4[_ngcontent-%COMP%]{animation-delay:.1s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube5[_ngcontent-%COMP%]{animation-delay:.2s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube6[_ngcontent-%COMP%]{animation-delay:.3s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube7[_ngcontent-%COMP%]{animation-delay:0s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube8[_ngcontent-%COMP%]{animation-delay:.1s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube9[_ngcontent-%COMP%]{animation-delay:.2s}@keyframes _ngcontent-%COMP%_sk-cubeGridScaleDelay{0%,70%,to{transform:scaleZ(1)}35%{transform:scale3D(0,0,1)}}"]})}return i})();function KP(i,a){1&i&&n.\u0275\u0275element(0,"scrm-chart-message-area",3)}function HP(i,a){if(1&i&&n.\u0275\u0275element(0,"ngx-charts-pie-grid",5),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("animations",!1)("view",e.view())("scheme",e.scheme)("minWidth",e.minWidth)("label",e.language.getFieldLabel(e.label))("results",e.results)}}function ZP(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,HP,1,6,"ngx-charts-pie-grid",4),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.results&&e.results.length>0)}}function qP(i,a){1&i&&(n.\u0275\u0275elementStart(0,"div",6),n.\u0275\u0275element(1,"scrm-loading-spinner"),n.\u0275\u0275elementEnd()),2&i&&n.\u0275\u0275classProp("m-5",!0)}let M0=(()=>{class i extends tc{language;elementRef;screenSize;results;height=700;minWidth=100;constructor(e,t,r){super(t,r),this.language=e,this.elementRef=t,this.screenSize=r}ngOnInit(){this.dataSource.options.height&&(this.height=this.dataSource.options.height),this?.dataSource?.options?.minWidth&&(this.minWidth=this.dataSource.options.minWidth),this.initResizeListener(),this.subs.push(this.dataSource.getResults().pipe((0,v.debounceTime)(500)).subscribe(e=>{this.parseResults(e),this.calculateHeightBasedOnResults(),this.calculateView()}))}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}get scheme(){return this.dataSource.options.scheme||"picnic"}get label(){return this.dataSource.options.label||""}onResize(){this.calculateHeightBasedOnResults(),this.calculateView()}calculateHeightBasedOnResults(){if(this.results&&this.results.length){const e=Math.floor(this.view()[0]/170);this.height=200*Math.floor(this.results.length/e)}else this.height=50}parseResults(e){this.results=[],e.singleSeries&&e.singleSeries.length&&e.singleSeries.forEach(t=>{const r=parseFloat(""+t.value);this.results.push(r?{name:t.name,value:r}:t)})}calculateView(){let e;const t=this.elementRef&&this.elementRef.nativeElement||{},r=t.parentElement&&t.parentElement.parentElement||{},o=r&&r.offsetWidth||0;o>0?e=o:(e=.7*window.innerWidth,window.innerWidth>990&&(e=.23*window.innerWidth)),this.view.set(e>239?[e,this.height]:[e,800])}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(Oe),n.\u0275\u0275directiveInject(n.ElementRef),n.\u0275\u0275directiveInject(ai))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-pie-grid-chart"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:3,vars:3,consts:[["labelKey","LBL_NO_DATA",4,"ngIf"],[4,"ngIf"],["class","chart-loading",3,"m-5",4,"ngIf"],["labelKey","LBL_NO_DATA"],[3,"animations","view","scheme","minWidth","label","results",4,"ngIf"],[3,"animations","view","scheme","minWidth","label","results"],[1,"chart-loading"]],template:function(t,r){1&t&&(n.\u0275\u0275template(0,KP,1,0,"scrm-chart-message-area",0),n.\u0275\u0275template(1,ZP,2,1,"ng-container",1),n.\u0275\u0275template(2,qP,2,2,"div",2)),2&t&&(n.\u0275\u0275property("ngIf",!r.results||!r.results.length||r.results.length<1),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.view().length),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!r.view().length&&r.results&&r.results.length>0))},dependencies:[F.NgIf,Be.PieGridComponent,Ho,pr],encapsulation:2})}return i})();function JP(i,a){1&i&&n.\u0275\u0275element(0,"scrm-chart-message-area",3)}function QP(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div"),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(2,"div"),n.\u0275\u0275text(3),n.\u0275\u0275elementEnd()),2&i){const e=a.model,t=n.\u0275\u0275nextContext(3);n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(e.name),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(t.formatTooltipValue(e.value))}}function XP(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"ngx-charts-bar-vertical",5),n.\u0275\u0275template(1,QP,4,2,"ng-template",null,6,n.\u0275\u0275templateRefExtractor),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("animations",!1)("results",e.results)("view",e.view())("scheme",e.scheme)("gradient",e.gradient)("xAxis",e.xAxis)("yAxis",e.yAxis)("legend",e.legend)("legendPosition","below")("showXAxisLabel",e.showXAxisLabel)("showYAxisLabel",e.showYAxisLabel)("xAxisLabel",e.xAxisLabel)("yAxisLabel",e.yAxisLabel)("yAxisTickFormatting",e.yAxisTickFormatting)}}function YP(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,XP,3,14,"ngx-charts-bar-vertical",4),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.results&&e.results.length>0)}}function e4(i,a){1&i&&(n.\u0275\u0275elementStart(0,"div",7),n.\u0275\u0275element(1,"scrm-loading-spinner"),n.\u0275\u0275elementEnd()),2&i&&n.\u0275\u0275classProp("m-5",!0)}let S0=(()=>{class i extends tc{elementRef;screenSize;results;constructor(e,t){super(e,t),this.elementRef=e,this.screenSize=t}ngOnInit(){this.dataSource.options.height&&(this.height=this.dataSource.options.height),this.initResizeListener(),this.subs.push(this.dataSource.getResults().pipe((0,v.debounceTime)(500)).subscribe(e=>{this.results=e.singleSeries,this.calculateView()}))}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}get scheme(){return this.dataSource.options.scheme||"picnic"}get gradient(){return this.dataSource.options.gradient||!1}get xAxis(){return this.dataSource.options.xAxis||!1}get yAxis(){return!(0,M.isFalse)(this.dataSource.options.yAxis)}get legend(){return!(0,M.isFalse)(this.dataSource.options.legend)}get showXAxisLabel(){return this.dataSource.options.showXAxisLabel||!1}get showYAxisLabel(){return this.dataSource.options.showYAxisLabel||!1}get xAxisLabel(){return this.dataSource.options.xAxisLabel||""}get yAxisLabel(){return this.dataSource.options.yAxisLabel||""}get yAxisTickFormatting(){return this.dataSource.options.yAxisTickFormatting?this.dataSource.tickFormatting:null}formatTooltipValue(e){return this.dataSource&&this.dataSource.tooltipFormatting?this.dataSource.tooltipFormatting(e):e}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(n.ElementRef),n.\u0275\u0275directiveInject(ai))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-vertical-bar-chart"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:3,vars:3,consts:[["labelKey","LBL_NO_DATA",4,"ngIf"],[4,"ngIf"],["class","chart-loading",3,"m-5",4,"ngIf"],["labelKey","LBL_NO_DATA"],["class","vertical-bar-chart",3,"animations","results","view","scheme","gradient","xAxis","yAxis","legend","legendPosition","showXAxisLabel","showYAxisLabel","xAxisLabel","yAxisLabel","yAxisTickFormatting",4,"ngIf"],[1,"vertical-bar-chart",3,"animations","results","view","scheme","gradient","xAxis","yAxis","legend","legendPosition","showXAxisLabel","showYAxisLabel","xAxisLabel","yAxisLabel","yAxisTickFormatting"],["tooltipTemplate",""],[1,"chart-loading"]],template:function(t,r){1&t&&(n.\u0275\u0275template(0,JP,1,0,"scrm-chart-message-area",0),n.\u0275\u0275template(1,YP,2,1,"ng-container",1),n.\u0275\u0275template(2,e4,2,2,"div",2)),2&t&&(n.\u0275\u0275property("ngIf",!r.results||!r.results.length||r.results.length<1),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.view().length),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!r.view().length&&r.results&&r.results.length>0))},dependencies:[F.NgIf,Be.BarVerticalComponent,Ho,pr],encapsulation:2})}return i})(),Zo=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Nt]})}return i})(),mr=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule]})}return i})(),D0=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Be.NgxChartsModule,Zo,mr]})}return i})(),w0=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Be.NgxChartsModule,Zo,mr]})}return i})();function t4(i,a){1&i&&n.\u0275\u0275element(0,"scrm-chart-message-area",3)}function n4(i,a){if(1&i&&n.\u0275\u0275element(0,"ngx-charts-line-chart",5),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("animations",!1)("results",e.results)("view",e.view())("scheme",e.scheme)("gradient",e.gradient)("xAxis",e.xAxis)("yAxis",e.yAxis)("legend",e.legend)("xScaleMin",e.xScaleMin)("xScaleMax",e.xScaleMax)("xAxisTicks",e.xAxisTicks)("showXAxisLabel",e.showXAxisLabel)("showYAxisLabel",e.showYAxisLabel)("xAxisLabel",e.xAxisLabel)("legendPosition","below")("autoScale",!0)("yAxisTickFormatting",e.yAxisTickFormatting)("xAxisTickFormatting",e.xAxisTickFormatting)("tooltipDisabled",e.tooltipDisabled)("yAxisLabel",e.yAxisLabel)}}function i4(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,n4,1,20,"ngx-charts-line-chart",4),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.results&&e.results.length>0)}}function r4(i,a){1&i&&(n.\u0275\u0275elementStart(0,"div",6),n.\u0275\u0275element(1,"scrm-loading-spinner"),n.\u0275\u0275elementEnd()),2&i&&n.\u0275\u0275classProp("m-5",!0)}let x0=(()=>{class i extends tc{elementRef;screenSize;results;scheme;gradient;xAxis;yAxis;legend;xScaleMin;xScaleMax;xAxisTicks;showXAxisLabel;showYAxisLabel;xAxisLabel;yAxisLabel;yAxisTickFormatting;xAxisTickFormatting;tooltipDisabled;constructor(e,t){super(e,t),this.elementRef=e,this.screenSize=t}ngOnInit(){this.dataSource.options.height&&(this.height=this.dataSource.options.height),this.initResizeListener(),this.subs.push(this.dataSource.getResults().subscribe(e=>{this.results=e.multiSeries,this.calculateView()})),this.scheme=this.getScheme(),this.gradient=this.getGradient(),this.xAxis=this.getXAxis(),this.yAxis=this.getYAxis(),this.legend=this.getLegend(),this.xScaleMin=this.getXScaleMin(),this.xScaleMax=this.getXScaleMax(),this.xAxisTicks=this.getXAxisTicks(),this.showXAxisLabel=this.getShowXAxisLabel(),this.showYAxisLabel=this.getShowYAxisLabel(),this.xAxisLabel=this.getXAxisLabel(),this.yAxisLabel=this.getYAxisLabel(),this.yAxisTickFormatting=this.getYAxisTickFormatting(),this.xAxisTickFormatting=this.getXAxisTickFormatting(),this.tooltipDisabled=this.getTooltipDisabled()}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}getScheme(){return this.dataSource.options.scheme||"picnic"}getGradient(){return this.dataSource.options.gradient||!1}getXAxis(){return!(0,M.isFalse)(this.dataSource.options.xAxis)}getYAxis(){return!(0,M.isFalse)(this.dataSource.options.yAxis)}getLegend(){return!(0,M.isFalse)(this.dataSource.options.legend)}getXScaleMin(){return this.dataSource.options.xScaleMin||null}getXScaleMax(){return this.dataSource.options.xScaleMax||null}getXAxisTicks(){return this.dataSource.options.xAxisTicks||null}getShowXAxisLabel(){return!(0,M.isFalse)(this.dataSource.options.showXAxisLabel)}getShowYAxisLabel(){return this.dataSource.options.showYAxisLabel||!1}getXAxisLabel(){return this.dataSource.options.xAxisLabel||""}getYAxisLabel(){return this.dataSource.options.yAxisLabel||""}getYAxisTickFormatting(){return this.dataSource.options.yAxisTickFormatting&&this.dataSource.tickFormatting||null}getXAxisTickFormatting(){return this.dataSource.options.xAxisTickFormatting&&this.dataSource.tickFormatting||null}getTooltipDisabled(){return this.dataSource.options.tooltipDisabled||!1}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(n.ElementRef),n.\u0275\u0275directiveInject(ai))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-line-chart"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:3,vars:3,consts:[["labelKey","LBL_NO_DATA",4,"ngIf"],[4,"ngIf"],["class","chart-loading",3,"m-5",4,"ngIf"],["labelKey","LBL_NO_DATA"],["class","line-chart",3,"animations","results","view","scheme","gradient","xAxis","yAxis","legend","xScaleMin","xScaleMax","xAxisTicks","showXAxisLabel","showYAxisLabel","xAxisLabel","legendPosition","autoScale","yAxisTickFormatting","xAxisTickFormatting","tooltipDisabled","yAxisLabel",4,"ngIf"],[1,"line-chart",3,"animations","results","view","scheme","gradient","xAxis","yAxis","legend","xScaleMin","xScaleMax","xAxisTicks","showXAxisLabel","showYAxisLabel","xAxisLabel","legendPosition","autoScale","yAxisTickFormatting","xAxisTickFormatting","tooltipDisabled","yAxisLabel"],[1,"chart-loading"]],template:function(t,r){1&t&&(n.\u0275\u0275template(0,t4,1,0,"scrm-chart-message-area",0),n.\u0275\u0275template(1,i4,2,1,"ng-container",1),n.\u0275\u0275template(2,r4,2,2,"div",2)),2&t&&(n.\u0275\u0275property("ngIf",!r.results||!r.results.length||r.results.length<1),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.view().length),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!r.view().length&&r.results&&r.results.length>0))},dependencies:[F.NgIf,Be.LineChartComponent,Ho,pr],encapsulation:2})}return i})(),E0=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Be.NgxChartsModule,Zo,mr]})}return i})();const F0=[E0,w0,D0],hu={"line-chart":x0,"pie-grid":M0,"vertical-bar":S0};let I0=(()=>{class i extends M.BaseComponentRegistry{constructor(){super()}initDefault(){Object.keys(hu).forEach(e=>{this.register("default",e,hu[e])})}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function o4(i,a){1&i&&n.\u0275\u0275element(0,"scrm-chart-message-area",2)}const a4=function(i){return{dataSource:i}};function s4(i,a){if(1&i&&n.\u0275\u0275element(0,"ndc-dynamic",3),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275property("ndcDynamicComponent",e.chartType)("ndcDynamicInputs",n.\u0275\u0275pureFunction1(2,a4,e.dataSource))}}let A0=(()=>{class i{registry;dataSource=null;type;constructor(e){this.registry=e}get chartType(){return this.registry.get("default",this.type)}ngOnInit(){}isConfigured(){return!!(this.type&&this.dataSource&&this.chartType)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(I0))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-chart"]],inputs:{dataSource:"dataSource",type:"type"},decls:2,vars:2,consts:[["labelKey","LBL_BAD_CONFIG",4,"ngIf"],[3,"ndcDynamicComponent","ndcDynamicInputs",4,"ngIf"],["labelKey","LBL_BAD_CONFIG"],[3,"ndcDynamicComponent","ndcDynamicInputs"]],template:function(t,r){1&t&&(n.\u0275\u0275template(0,o4,1,0,"scrm-chart-message-area",0),n.\u0275\u0275template(1,s4,1,4,"ndc-dynamic",1)),2&t&&(n.\u0275\u0275property("ngIf",!r.isConfigured()),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.isConfigured()))},dependencies:[F.NgIf,Bt,It,Ho],encapsulation:2})}return i})(),T0=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,F0,lt,Zo]})}return i})();function c4(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"scrm-button",1)(1,"span",2),n.\u0275\u0275text(2,"\xd7"),n.\u0275\u0275elementEnd()()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275property("config",e.getConfig())}}let vu=(()=>{class i{config;buttonClasses=["close-button"];constructor(){}getConfig(){const e=M.Button.fromButton(this.config);return e.addClasses(this.buttonClasses),e}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-close-button"]],inputs:{config:"config"},decls:1,vars:1,consts:[[3,"config",4,"ngIf"],[3,"config"],["aria-hidden","true"]],template:function(t,r){1&t&&n.\u0275\u0275template(0,c4,3,1,"scrm-button",0),2&t&&n.\u0275\u0275property("ngIf",r.config)},dependencies:[F.NgIf,Nn],encapsulation:2})}return i})(),Oa=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Xt]})}return i})();function l4(i,a){if(1&i&&n.\u0275\u0275element(0,"scrm-label",3),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275property("labelKey",e.titleKey)}}function u4(i,a){if(1&i&&n.\u0275\u0275element(0,"scrm-close-button",4),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275property("config",e.close)}}const d4=[[["","modal-body",""]],[["","modal-footer",""]]],f4=["[modal-body]","[modal-footer]"];let qo=(()=>{class i{klass="";headerKlass="";bodyKlass="";footerKlass="";titleKey="";closable=!1;close={klass:["btn","btn-outline-light","btn-sm"]};static \u0275fac=function(t){return new(t||i)};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-modal"]],inputs:{klass:"klass",headerKlass:"headerKlass",bodyKlass:"bodyKlass",footerKlass:"footerKlass",titleKey:"titleKey",closable:"closable",close:"close"},ngContentSelectors:f4,decls:9,vars:13,consts:[[1,"modal-title"],[3,"labelKey",4,"ngIf"],[3,"config",4,"ngIf"],[3,"labelKey"],[3,"config"]],template:function(t,r){1&t&&(n.\u0275\u0275projectionDef(d4),n.\u0275\u0275elementStart(0,"div")(1,"div")(2,"div",0),n.\u0275\u0275template(3,l4,1,1,"scrm-label",1),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(4,u4,1,1,"scrm-close-button",2),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(5,"div"),n.\u0275\u0275projection(6),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(7,"div"),n.\u0275\u0275projection(8,1),n.\u0275\u0275elementEnd()()),2&t&&(n.\u0275\u0275classMap(r.klass),n.\u0275\u0275advance(1),n.\u0275\u0275classMapInterpolate1("modal-header ",r.headerKlass," d-flex align-items-center"),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",r.titleKey),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.closable),n.\u0275\u0275advance(1),n.\u0275\u0275classMapInterpolate1("modal-body ",r.bodyKlass,""),n.\u0275\u0275advance(2),n.\u0275\u0275classMapInterpolate1("modal-footer ",r.footerKlass,""))},dependencies:[F.NgIf,vu,Ot],encapsulation:2})}return i})();function p4(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",16),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&i){const e=a.$implicit,t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",t.getColumnLabel(e.label)," ")}}function m4(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",17),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&i){const e=a.$implicit,t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",t.getColumnLabel(e.label)," ")}}const N0=function(i){return[i]};let L0=(()=>{class i{appState;languageStore;modal;displayed;hidden;titleKey="LBL_COLUMN_SELECTOR_MODAL_TITLE";closeButtonIcon;closeButton;saveButton;constructor(e,t,r){this.appState=e,this.languageStore=t,this.modal=r}drop(e){e.previousContainer===e.container?xp(e.container.data,e.previousIndex,e.currentIndex):function UD(i,a,e,t){const r=_a(e,i.length-1),o=_a(t,a.length);i.length&&a.splice(o,0,i.splice(r,1)[0])}(e.previousContainer.data,e.container.data,e.previousIndex,e.currentIndex)}getHeaderLabel(){return this.languageStore.getFieldLabel("LBL_COLUMN_SELECTOR_MODAL_TITLE")}getColumnLabel(e){return this.languageStore.getFieldLabel(e,this.appState.getModule())}ngOnInit(){this.closeButtonIcon={klass:["btn","btn-outline-light","btn-sm"],onClick:()=>{this.modal.close({type:"close-button"})}},this.closeButton={klass:["btn","modal-button-cancel"],labelKey:"LBL_COLUMN_SELECTOR_CLOSE_BUTTON",onClick:()=>{this.modal.close({type:"close-button"})}},this.saveButton={klass:["btn","modal-button-save"],labelKey:"LBL_COLUMN_SELECTOR_SAVE_BUTTON",onClick:()=>{this.modal.close({type:"close-button",displayed:this.displayed,hidden:this.hidden})}}}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(Gt),n.\u0275\u0275directiveInject(Oe),n.\u0275\u0275directiveInject(de.NgbActiveModal))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-columnchooser"]],inputs:{displayed:"displayed",hidden:"hidden"},decls:19,vars:16,consts:[["klass","column-chooser-modal",3,"closable","close","title","titleKey"],["modal-body",""],[1,"d-flex","bd-highlight"],[1,"p-2","flex-fill","bd-highlight","column-chooser-container"],[1,"column-chooser-title"],["labelKey","LBL_COLUMN_SELECTOR_DISPLAYED_COLS"],["cdkDropList","",1,"column-chooser-list",3,"cdkDropListData","cdkDropListConnectedTo","cdkDropListDropped"],["displayedList","cdkDropList"],["class","column-chooser-item column-displayed","cdkDrag","",4,"ngFor","ngForOf"],["labelKey","LBL_COLUMN_SELECTOR_HIDDEN_COLS"],["hiddenList","cdkDropList"],["class","column-chooser-item column-hidden","cdkDrag","",4,"ngFor","ngForOf"],["modal-footer",""],[1,"modal-buttons"],["data-dismiss","modal",3,"config"],[3,"config"],["cdkDrag","",1,"column-chooser-item","column-displayed"],["cdkDrag","",1,"column-chooser-item","column-hidden"]],template:function(t,r){if(1&t&&(n.\u0275\u0275elementStart(0,"scrm-modal",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),n.\u0275\u0275element(5,"scrm-label",5),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(6,"div",6,7),n.\u0275\u0275listener("cdkDropListDropped",function(s){return r.drop(s)}),n.\u0275\u0275template(8,p4,2,1,"div",8),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(9,"div",3)(10,"h2",4),n.\u0275\u0275element(11,"scrm-label",9),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(12,"div",6,10),n.\u0275\u0275listener("cdkDropListDropped",function(s){return r.drop(s)}),n.\u0275\u0275template(14,m4,2,1,"div",11),n.\u0275\u0275elementEnd()()()(),n.\u0275\u0275elementStart(15,"div",12)(16,"div",13),n.\u0275\u0275element(17,"scrm-button",14)(18,"scrm-button",15),n.\u0275\u0275elementEnd()()()),2&t){const o=n.\u0275\u0275reference(7),s=n.\u0275\u0275reference(13);n.\u0275\u0275property("closable",!0)("close",r.closeButtonIcon)("title",r.getHeaderLabel())("titleKey",r.titleKey),n.\u0275\u0275advance(6),n.\u0275\u0275property("cdkDropListData",r.displayed)("cdkDropListConnectedTo",n.\u0275\u0275pureFunction1(12,N0,s)),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngForOf",r.displayed),n.\u0275\u0275advance(4),n.\u0275\u0275property("cdkDropListData",r.hidden)("cdkDropListConnectedTo",n.\u0275\u0275pureFunction1(14,N0,o)),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngForOf",r.hidden),n.\u0275\u0275advance(3),n.\u0275\u0275property("config",r.closeButton),n.\u0275\u0275advance(1),n.\u0275\u0275property("config",r.saveButton)}},dependencies:[F.NgForOf,Rp,Op,qo,Ot,Nn],encapsulation:2})}return i})(),ro=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Ve.AngularSvgIconModule,Oa,Nt,de.NgbModalModule]})}return i})(),B0=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,jp,Oa,ro,Nt,Xt]})}return i})(),_u=(()=>{class i{breakpointObserver;special=!1;actions=!1;appendActions=!1;labelDisplay="top";labelClass={};inputClass={};rowClass={};colClass={};colAlignItems="";maxColumns;sizeMap={handset:1,tablet:2,web:3,wide:4};fieldGrid;baseColClass={col:!0,"form-group":!0,"m-1":!0};baseRowClass={"form-row":!0,"align-items-center":!0};baseLabelClass={"col-form-label-sm":!0,"mb-0":!0};baseInputClass={"form-control":!0,"form-control-sm":!0};currentSize="web";subscriptions=[];constructor(e){this.breakpointObserver=e}ngOnInit(){this.initScreenSizeObserver(this.breakpointObserver),this.buildGrid(),this.colClass={...this.colClass,...this.baseColClass},this.rowClass={...this.baseRowClass,...this.rowClass},this.labelClass={...this.labelClass,...this.baseLabelClass},this.inputClass={...this.inputClass,...this.baseInputClass}}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}get colNumber(){const e=this.sizeMap[this.currentSize];return this.maxColumns&&e>this.maxColumns?this.maxColumns:e}addSpecialSlots(e){if(!e||0===e.length)return;const t=this.getNeededExtraSlots();if(0!==t.length)if(1===this.colNumber)t.reverse().forEach(r=>{const o={cols:[]};this.fillRow(o),e.push(o),o.cols[0][r]=!0});else if(!0===this.appendActions){const r=e[e.length-1],o=this.colNumber-1;t.forEach(s=>{r.cols[o][s]=!0})}else{let o=e[e.length-1];o.cols[this.colNumber-t.length].field&&(o={cols:[]},this.fillRow(o),e.push(o));let s=this.colNumber-1;t.forEach(c=>{o.cols[s][c]=!0,s--})}}getNeededExtraSlots(){const e=[];return this.actions&&e.push("actionSlot"),this.special&&e.push("specialSlot"),e}fillRow(e){for(let r=e.cols.length;r<this.colNumber;r++)e.cols.push({field:{type:"",display:"none"}})}initScreenSizeObserver(e){this.subscriptions.push(e.observe(["(max-width: 599.98px) and (orientation: portrait)"]).subscribe(t=>{t.matches&&(this.currentSize="handset",this.buildGrid())})),this.subscriptions.push(e.observe(["(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait)"]).subscribe(t=>{t.matches&&(this.currentSize="tablet",this.buildGrid())})),this.subscriptions.push(e.observe(["(min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)","(min-width: 840px) and (orientation: portrait)","(min-width: 1280px) and (orientation: landscape)"]).subscribe(t=>{t.matches&&(this.currentSize="web",this.buildGrid())})),this.subscriptions.push(e.observe(["(min-width: 1920px)"]).subscribe(t=>{t.matches&&(this.currentSize="wide",this.buildGrid())}))}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject($))};static \u0275dir=n.\u0275\u0275defineDirective({type:i,inputs:{special:"special",actions:"actions",appendActions:"appendActions",labelDisplay:"labelDisplay",labelClass:"labelClass",inputClass:"inputClass",rowClass:"rowClass",colClass:"colClass",colAlignItems:"colAlignItems",maxColumns:"maxColumns",sizeMap:"sizeMap"}})}return i})(),si=(()=>{class i{actions={edit:{},create:{},list:{},detail:{},massupdate:{},filter:{}};run(e,t,r){!this.actions||!this.actions[t]||!this.actions[t][e.key]||this.actions[t][e.key].run(r,e)}getHandler(e,t){let r=e.key;return e&&e.asyncProcess&&(r="async-process"),this.actions&&this.actions[t]&&this.actions[t][r]?this.actions[t][r]:null}addHandler(e,t,r){this.actions[t]||(this.actions[t]={}),this.actions[t][e.key]=r}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();class Wi extends M.ActionHandler{shouldDisplay(a){return!0}getTriggeringStatus(){return["onValueChange"]}}class oo{}let O0=(()=>{class i extends oo{key="greater-than";constructor(){super()}run(e,t,r){const o=r.field?e.fields[r.field].value:r.value;return Number(t.value)>Number(o)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),R0=(()=>{class i extends oo{key="less-than";constructor(){super()}run(e,t,r){const o=r.field?e.fields[r.field].value:r.value;return Number(t.value)<Number(o)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),j0=(()=>{class i extends oo{key="not-empty";constructor(){super()}run(e,t,r){return!(0,M.isEmptyString)(t.value)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),k0=(()=>{class i extends oo{key="is-empty";constructor(){super()}run(e,t,r){return!!(0,M.isEmptyString)(t.value)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),P0=(()=>{class i extends oo{key="is-equal";constructor(){super()}run(e,t,r){const o=r.field?[e.fields[r.field].value]:(Array.isArray(r.values)?r.values:[r.value]).map(s=>s.toString());return!!o&&o.includes(t.value.toString())}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),$0=(()=>{class i extends oo{key="not-equal";constructor(){super()}run(e,t,r){const o=r.field?[e.fields[r.field].value]:(Array.isArray(r.values)?r.values:[r.value]).map(s=>s.toString());return!!o&&!o.includes(t.value.toString())}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),yu=(()=>{class i{greaterThanAction;lessThanAction;notEmptyAction;isEmptyAction;isEqualAction;notEqualAction;constructor(e,t,r,o,s,c){this.greaterThanAction=e,this.lessThanAction=t,this.notEmptyAction=r,this.isEmptyAction=o,this.isEqualAction=s,this.notEqualAction=c}get(e){return{"greater-than":this.greaterThanAction,"less-than":this.lessThanAction,"not-empty":this.notEmptyAction,"is-empty":this.isEmptyAction,"is-equal":this.isEqualAction,"not-equal":this.notEqualAction}[e]}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(O0),n.\u0275\u0275inject(R0),n.\u0275\u0275inject(j0),n.\u0275\u0275inject(k0),n.\u0275\u0275inject(P0),n.\u0275\u0275inject($0))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),U0=(()=>{class i extends Wi{operatorManager;key="displayType";modes=["edit","detail","list","create","massupdate","filter"];constructor(e){super(),this.operatorManager=e}run(e,t){const r=e.record;if(!r||!e.field)return;const s=t.params&&t.params.activeOnFields||{},c=Object.keys(s),l=t.params&&t.params.activeOnAttributes||{},u=Object.keys(l);if(!c.length&&!u.length)return;const d=t.params&&t.params.targetDisplayType;if(!d)return;let f=this.isActive(c,r,s,u,l),p=e.field.defaultDisplay;f&&(p=d),e.field.display=p,(t.params&&t.params.resetOn||"none")===p&&(e.field.valueList&&e.field.valueList.length&&(e.field.valueList=[]),e.field.value&&(e.field.value=""))}isActive(e,t,r,o,s){let c=!1;return!c&&!(0,ne.isEmpty)(r)&&(c=this.areFieldsActive(e,t,r)),!c&&!(0,ne.isEmpty)(s)&&(c=this.areAttributesActive(o,t,s)),c}areAttributesActive(e,t,r){return e.some(o=>{const c=t.fields&&t.fields[o]||null,l=r[o]&&Object.keys(r[o]);if(c&&l&&l.length)return l.some(u=>{const d=r[o][u],f=c.attributes&&c.attributes[u];if(d&&d.length&&f)return this.isValueActive(t,f,d)})})}areFieldsActive(e,t,r){return e.every(o=>{const c=t.fields&&t.fields[o]||null,l=r[o];if(c&&l&&l.length)return this.isValueActive(t,c,l)})}isValueActive(e,t,r){let o=!1;if(t.valueList&&t.valueList.length)return t.valueList.some(l=>r.some(u=>{if(u===l)return o=!0,!0})),o;const s=Object.keys(e.fields);let c=[];return r.some(t.value?l=>{if((!l.field||s.includes(l.field))&&(l===t.value&&!l.operator&&(o=!0),l.operator)){const d=this.operatorManager.get(l.operator);c.push(d.run(e,t,l)),o=c.every(f=>f)}}:l=>{if(l.operator){if(l.field&&!s.includes(l.field))return;const d=this.operatorManager.get(l.operator);c.push(d.run(e,t,l)),o=c.every(f=>f)}}),o}getTriggeringStatus(){return["onValueChange","onFieldInitialize"]}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(yu))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),V0=(()=>{class i extends Wi{key="emailPrimarySelect";modes=["edit","create","massupdate"];constructor(){super()}run(e,t){const o=e.field;if(!e.record||!o)return;const s=o.items;if(!o||!s||!s.length)return;const c=s.filter(f=>!(f&&f.attributes&&f.attributes.deleted));if(c&&1!==c.length)return;const l=c[0],u=l.fields&&l.fields["email-fields"]||{},d=u.attributes&&u.attributes.primary_address||null;d&&!(0,M.isTrue)(d.value)&&(d.value="true",d.formControl.setValue("true"),u.formControl.updateValueAndValidity({onlySelf:!0,emitEvent:!0}))}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const z0=i=>a=>i.isEmptyTrimmedInputValue(a.value)?{required:{required:!0,message:{labelKey:"LBL_VALIDATION_ERROR_REQUIRED",context:{value:a.value}}}}:null,W0=i=>a=>i.isEmptyBooleanInputValue(a.value)?{required:{required:!0,message:{labelKey:"LBL_VALIDATION_ERROR_REQUIRED",context:{value:a.value}}}}:null;let bu=(()=>{class i{utils;constructor(e){this.utils=e}applies(e,t){return!(!t||!t.fieldDefinition)&&(0,M.isTrue)(t.fieldDefinition.required)}getValidator(e){return"boolean"===e.type?[W0(this.utils)]:[z0(this.utils)]}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(eo))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Jo=(()=>{class i{operatorManager;constructor(e){this.operatorManager=e}isActive(e,t,r,o,s){let c=!0;return(0,ne.isEmpty)(r)||(c=this.areFieldsActive(e,t,r)),(0,ne.isEmpty)(s)||(c=c&&this.areAttributesActive(o,t,s)),c}areAttributesActive(e,t,r){return e.every(o=>{const c=t.fields&&t.fields[o]||null,l=r[o]&&Object.keys(r[o]);if(c&&l&&l.length)return l.some(u=>{const d=r[o][u],f=c.attributes&&c.attributes[u];if(d&&d.length&&f)return this.isValueActive(t,f,d)})})}areFieldsActive(e,t,r){return e.every(o=>{const c=t.fields&&t.fields[o]||null,l=r[o];return!(c&&l&&l.length)||this.isValueActive(t,c,l)})}isValueActive(e,t,r){let o=!1;if(t.valueList&&t.valueList.length)return t.valueList.some(l=>r.some(u=>{if(u===l)return o=!0,!0})),o;const s=Object.keys(e.fields);let c=[];return r.some(t.value?l=>{if((!l.field||s.includes(l.field))&&(l===t.value&&!l.operator&&(o=!0),l.operator)){const d=this.operatorManager.get(l.operator);c.push(d.run(e,t,l)),o=c.every(f=>f)}}:l=>{if(l.operator){if(l.field&&!s.includes(l.field))return;const d=this.operatorManager.get(l.operator);c.push(d.run(e,t,l)),o=c.every(f=>f)}}),o}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(yu))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),G0=(()=>{class i extends Wi{requiredValidator;activeFieldsChecker;key="required";modes=["edit","create","massupdate","filter"];constructor(e,t){super(),this.requiredValidator=e,this.activeFieldsChecker=t}run(e,t){const r=e.record,o=e.field;if(!r||!o)return;const s=t.params&&t.params.activeOnFields||{},c=Object.keys(s),l=t.params&&t.params.activeOnAttributes||{},u=Object.keys(l);if(!c.length&&!u.length)return;const d=this.activeFieldsChecker.isActive(c,r,s,u,l);let f=!1,p=[...e.field.validators||[]];d&&(f=!0,p=p.concat(this.requiredValidator.getValidator(o))),e.field.formControl.updateValueAndValidity({onlySelf:!0,emitEvent:!0}),r.formGroup.updateValueAndValidity({onlySelf:!0,emitEvent:!0}),e.field.definition.required=f,e.field.formControl.setValidators(p),e.field.formControl.updateValueAndValidity({onlySelf:!0,emitEvent:!0}),r.formGroup.updateValueAndValidity({onlySelf:!0,emitEvent:!0})}getTriggeringStatus(){return["onValueChange","onFieldInitialize"]}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(bu),n.\u0275\u0275inject(Jo))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Ra=(()=>{class i{config;preferences;constructor(e,t){this.config=e,this.preferences=t}getFieldCurrencyValue(e,t){const r=this.isBase(e),o=this.getCurrencyId(t);if(!r&&null!==o)return e.value;const s=parseFloat(e.value);if(!isFinite(s))return e.value;const c=this.getUserCurrency();return this.baseToCurrency(c.id,s).toString()}baseToCurrency(e,t){const r=this.getConversionRate(e);return isFinite(r)?this.round(dn(t,r)):t}currencyToBase(e,t){const r=this.getConversionRate(e);return isFinite(r)?this.round(yi(t,r)):t}round(e){const t=this.getPrecision();return $o(e,t)}getCurrencyId(e){return e?.fields?.currency_id?.value??null}isBase(e){return e?.metadata?.isBaseCurrency??!1}getCurrency(e){return this.config.getConfigValue("currencies")[e]??[]}getBaseCurrency(){return this.config.getConfigValue("currency")}getUserCurrency(){return this.preferences.getUserPreference("currency")}getPrecision(){const e=parseInt(this.preferences.getUserPreference("default_currency_significant_digits"));if(isFinite(e))return e;const t=parseInt(this.config.getConfigValue("default_currency_significant_digits"));return isFinite(t)?t:0}getConversionRate(e){const t=this.getCurrency(e);return parseFloat(t.conversion_rate)}getCode(e){return this.getCurrency(e).iso4217}getSymbol(e){return this.getCurrency(e).symbol}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(dt),n.\u0275\u0275inject(Vt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),K0=(()=>{class i extends Wi{currencyService;key="update-base-currency";modes=["edit","create","massupdate","filter"];constructor(e){super(),this.currencyService=e}run(e,t){const r=e.record,o=e.field;if(!r||!o)return;const s=t.params.currencyIdField??"currency_id",c=t.params.currencyField??"amount",l=r?.fields[s]?.value??null;let u=parseFloat(r?.fields[c]?.value??null);if(!isFinite(u))return;null===l&&this.updateValue(o,u,r);const d=this.currencyService.currencyToBase(l,u);isFinite(d)&&this.updateValue(o,d,r)}updateValue(e,t,r){e.value=t.toString(),e.formControl.setValue(t.toString()),r.formGroup.updateValueAndValidity({onlySelf:!0,emitEvent:!0})}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Ra))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),H0=(()=>{class i extends Wi{currencyService;key="update-currency";modes=["edit","create","massupdate","filter"];constructor(e){super(),this.currencyService=e}run(e,t){const r=e.record,o=e.field;if(!r||!o||o?.definition?.metadata?.isBaseCurrency)return;const c=t.params.currencyIdField??"currency_id",l=t.params.baseCurrencyField??"amount_usdollar",u=r?.fields[c]?.value??null;let d=parseFloat(o?.value??null),f=parseFloat(r?.fields[l]?.value??null);if(!isFinite(d)||!isFinite(f)||null===u)return;const p=this.currencyService.baseToCurrency(u,f);isFinite(p)&&this.updateValue(o,p,r)}updateValue(e,t,r){e.value=t.toString(),e.formControl.setValue(t.toString()),r.formGroup.updateValueAndValidity({onlySelf:!0,emitEvent:!0})}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Ra))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Z0=(()=>{class i extends Wi{activeFieldsChecker;key="updateValue";modes=["edit","detail","list","create","massupdate","filter"];constructor(e){super(),this.activeFieldsChecker=e}run(e,t){const r=e.record,o=e.field;if(!r||!o)return;const s=t.params&&t.params.activeOnFields||{},c=Object.keys(s),l=t.params&&t.params.activeOnAttributes||{},u=Object.keys(l);if(!c.length&&!u.length)return;const d=t.params&&t.params.targetValue;if(!d)return;const f=this.activeFieldsChecker.isActive(c,r,s,u,l);let p=e.field?.value;f&&(p=d),this.updateValue(o,p.toString(),r)}updateValue(e,t,r){e.value=t.toString(),e.formControl.setValue(t),r.formGroup.updateValueAndValidity({onlySelf:!0,emitEvent:!0})}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Jo))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),q0=(()=>{class i extends Wi{key="update-flex-relate-module";modes=["edit","create","massupdate","filter"];constructor(){super()}run(e,t){const r=e.record,o=e.field;if(!r||!o)return;const s=o.definition.type_name??"";""!==s&&(r?.fields[s]?.value??"")!==(o?.definition?.module??"")&&(o.definition.module=r?.fields[s]?.value??"",this.updateValue(o,{},"",r))}updateValue(e,t,r,o){e.value=r,e.valueObject=t,e.formControl.setValue(r),o.formGroup.updateValueAndValidity({onlySelf:!0,emitEvent:!0})}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),ct=(()=>{class i{config;messages$;messages=[];messagesStage;timeout=3;constructor(e){this.config=e,this.messagesStage=new S.BehaviorSubject([]),this.messages$=this.messagesStage.asObservable(),this.initTimeOut()}updateState(e){this.messagesStage.next(this.messages=e)}removeMessages(){this.updateState([])}contains(e,t=!1){let r=!1;for(let o=0;o<this.messages.length;o++)if(this.isSame(e,this.messages[o])){if(r=!0,t){const s=[...this.messages];s.splice(o,1),this.updateState(s)}break}return r}addMessage(e){let t=-1;if(!this.contains(e)){const r=[...this.messages];t=r.push(e),(e.type===M.MessageTypes.success||e.type===M.MessageTypes.warning)&&setTimeout(()=>{this.contains(e,!0)},1e3*this.timeout),this.updateState(r)}return t}addPrimaryMessage(e){return this.addMessage({type:M.MessageTypes.primary,text:e})}addSecondaryMessage(e){return this.addMessage({type:M.MessageTypes.secondary,text:e})}addSuccessMessage(e){return this.addMessage({type:M.MessageTypes.success,text:e})}addSuccessMessageByKey(e){return this.addMessage({type:M.MessageTypes.success,labelKey:e})}addDangerMessage(e){return this.addMessage({type:M.MessageTypes.danger,text:e})}addDangerMessageByKey(e){return this.addMessage({type:M.MessageTypes.danger,labelKey:e})}addWarningMessage(e){return this.addMessage({type:M.MessageTypes.warning,text:e})}addWarningMessageByKey(e){return this.addMessage({type:M.MessageTypes.warning,labelKey:e})}addInfoMessage(e){return this.addMessage({type:M.MessageTypes.info,text:e})}addDarkMessage(e){return this.addMessage({type:M.MessageTypes.dark,text:e})}log(...e){console.log.apply(console,e)}error(...e){console.error.apply(console,e)}initTimeOut(){const e=this.config.getConfigValue("ui");if(e&&e.alert_timeout){const t=parseInt(e.alert_timeout,10);isNaN(t)||(this.timeout=t)}}isSame(e,t){let r="text";return e.labelKey&&(r="labelKey"),e[r]===t[r]}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(dt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();class ja{}let J0=(()=>{class i extends ja{router;message;key="redirect";constructor(e,t){super(),this.router=e,this.message=t}run(e){if(!e||!e.route)return void this.message.addDangerMessageByKey("LBL_MISSING_HANDLER_DATA_ROUTE");const t={queryParams:{}};e.queryParams&&(t.queryParams=e.queryParams),this.router.navigate([e.route],t).then()}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Ft.Router),n.\u0275\u0275inject(ct))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Q0=(()=>{class i extends ja{message;key="export";constructor(e){super(),this.message=e}run(e){e&&e.url&&e.formData?this.download(e.url,e.formData):this.message.addDangerMessageByKey("LBL_MISSING_HANDLER_DATA_ROUTE")}download(e,t){const r=document.createElement("form");r.setAttribute("id","export-download"),r.setAttribute("method","post"),r.setAttribute("action",e),r.setAttribute("target","_self"),r.setAttribute("style","display: none;"),Object.keys(t).forEach(o=>{const s=document.createElement("input");s.setAttribute("name",o),s.setAttribute("value",t[o]),r.appendChild(s)}),document.body.appendChild(r),r.submit(),document.body.removeChild(r)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(ct))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),X0=(()=>{class i extends ja{key="noop";constructor(){super()}run(e){}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();class Cu{iframe;observer;constructor(){}init(a){this.iframe=a,this.initialSizeAdjustment(),this.addBodyResizeListener()}destroy(){this.observer&&this.observer.disconnect(),this.iframe=null,this.observer=null}initialSizeAdjustment(){setTimeout(this.onResize.bind(this),200)}addBodyResizeListener(){const a={document:this.iframe.contentWindow.document,element:this.iframe.contentWindow.document.body,height:this.iframe.contentWindow.document.body.scrollHeight,watched:[{getHeight:()=>{const e=a.document.getElementsByClassName("modal in"),t=e&&e[0],r=t&&t.firstElementChild;return r&&r.scrollHeight+200||-1}},{getHeight:()=>{const e=a.document.getElementById("bootstrap-container"),t=e&&e.scrollHeight+150||-1;return t>0?t:a.element.scrollHeight+50}}]};this.observer=(new xD.MutationObserverFactory).create(()=>{const e=[];a.watched.forEach(o=>{const s=o.getHeight();s>0&&e.push(s)}),e.sort((o,s)=>o-s);const t=e.pop(),r=this.calculateResizing(a.height,t);r.resized&&(a.height=r.height)}),this.observer.observe(this.iframe.contentWindow.document.body,{attributes:!0,childList:!0,characterData:!0,subtree:!0})}calculateResizing(a,e){const t=window.innerHeight-50;return e<t&&(e=t),a===e?{resized:!1}:a<e-20||this.iframe.scrollHeight>e?(this.resizeIFrame(e),{resized:!0,height:e}):{resized:!1}}onResize(){this.calculateResizing(this.iframe.offsetHeight,this.iframe.contentWindow.document.body.scrollHeight+120)}resizeIFrame(a){this.iframe.style.height=a+1+"px"}}class Mu{iframe;lastDispatched;changeCallback=null;loadCallback=null;unLoadCallback=null;unloadListener=null;loadListener=null;constructor(a,e=null,t=null,r=null){this.iframe=a,this.changeCallback=e,this.loadCallback=t,this.unLoadCallback=r}init(){this.loadListener=this.loadHandler.bind(this),this.unloadListener=this.unloadHandler.bind(this),this.iframe.contentWindow.addEventListener("load",this.loadListener),this.iframe.contentWindow.removeEventListener("unload",this.unloadListener)}destroy(){const a=this.iframe&&this.iframe.contentWindow;a&&(a.removeEventListener("unload",this.unloadListener),a.removeEventListener("load",this.loadListener)),this.iframe=null,this.lastDispatched=null,this.changeCallback=null,this.loadCallback=null,this.unLoadCallback=null,this.loadListener=null,this.unloadListener=null}loadHandler(){this.loadCallback(),this.bindUnload()}bindUnload(){this.iframe.contentWindow.removeEventListener("unload",this.unloadListener),this.unloadListener=this.unloadHandler.bind(this),this.iframe.contentWindow.addEventListener("unload",this.unloadListener)}unloadHandler(){this.unLoadCallback(),setTimeout(this.triggerPageChange.bind(this),0)}triggerPageChange(){const a=this.iframe&&this.iframe.contentWindow&&this.iframe.contentWindow.location.href;a&&a!==this.lastDispatched&&(this.lastDispatched=a,this.changeCallback(a))}}const g4=["dataContainer"];let Y0=(()=>{class i{languageStore;activeModal;url="";titleKey="";asyncActionCallback=null;dataContainer;closeButton;wrapper;iframe=null;iframePageChangeHandler;iframeResizeHandler;constructor(e,t){this.languageStore=e,this.activeModal=t}ngOnInit(){this.closeButton={klass:["btn","btn-outline-light","btn-sm"],onClick:()=>{this.activeModal.close({type:"close-button"})}}}ngAfterViewInit(){this.initIframe()}ngOnDestroy(){this.cleanObservers(),this.iframe=null;const e=this.wrapper;this.wrapper.firstChild&&e.removeChild(e.firstChild),e.innerHTML="<iframe></iframe>",this.wrapper=null}cleanObservers(){this.iframeResizeHandler&&(this.iframeResizeHandler.destroy(),this.iframeResizeHandler=null),this.iframePageChangeHandler&&(this.iframePageChangeHandler.destroy(),this.iframePageChangeHandler=null)}initIframe(){this.wrapper=this.dataContainer.nativeElement,this.wrapper.firstChild&&this.wrapper.removeChild(this.wrapper.firstChild);const e=document.createElement("iframe");e.src=this.url,this.wrapper.appendChild(e),this.iframe=e,this.iframe.style.display="block",this.initObservers()}initObservers(){this.iframePageChangeHandler=this.buildIframePageChangeObserver(),this.iframeResizeHandler=this.buildIframeResizeHandlerHandler(),this.iframePageChangeHandler&&this.iframePageChangeHandler.init()}onIFrameLoad(){this.iframe.contentWindow.document.body.style.overflow="hidden",null!==this.asyncActionCallback&&this.asyncActionCallback(this.iframe),this.iframeResizeHandler.init(this.iframe)}onIFrameUnload(){this.iframe.style.display="none",this.iframeResizeHandler.destroy()}buildIframePageChangeObserver(){return new Mu(this.iframe,null,this.onIFrameLoad.bind(this),this.onIFrameUnload.bind(this))}buildIframeResizeHandlerHandler(){return new Cu}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(Oe),n.\u0275\u0275directiveInject(de.NgbActiveModal))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-classic-modal"]],viewQuery:function(t,r){if(1&t&&n.\u0275\u0275viewQuery(g4,7),2&t){let o;n.\u0275\u0275queryRefresh(o=n.\u0275\u0275loadQuery())&&(r.dataContainer=o.first)}},inputs:{url:"url",titleKey:"titleKey",asyncActionCallback:"asyncActionCallback"},decls:5,vars:3,consts:[["bodyKlass","m-0 small-font","footerKlass","border-0","klass","classic-view-modal",3,"closable","close","titleKey"],["modal-body",""],[1,"classic-view-container"],["dataContainer",""]],template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"scrm-modal",0)(1,"div",1)(2,"div",2,3),n.\u0275\u0275element(4,"iframe"),n.\u0275\u0275elementEnd()()()),2&t&&n.\u0275\u0275property("closable",!0)("close",r.closeButton)("titleKey",r.titleKey)},dependencies:[qo],encapsulation:2,data:{animation:[(0,jt.trigger)("modalFade",[(0,jt.transition)("void <=> *",[(0,jt.animate)("800ms")])])]}})}return i})(),eb=(()=>{class i extends ja{router;modalService;message;key="audit";constructor(e,t,r){super(),this.router=e,this.modalService=t,this.message=r}run(e){e&&e.url?this.showClassicViewModal(e.url):this.message.addDangerMessageByKey("LBL_MISSING_HANDLER_DATA_ROUTE")}changeLogLegacyContentFormatter(e){if(!e)return;const t=e.contentDocument.getElementsByClassName("moduleTitle")[0];t&&(t.innerText="")}showClassicViewModal(e){const t=this.modalService.open(Y0,{size:"xl",centered:!0,scrollable:!0});t.componentInstance.titleKey="LBL_CHANGE_LOG",t.componentInstance.url=e,t.componentInstance.asyncActionCallback=this.changeLogLegacyContentFormatter.bind(this)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Ft.Router),n.\u0275\u0275inject(de.NgbModal),n.\u0275\u0275inject(ct))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Kt=(()=>{class i{processService;appStateStore;message;redirectAction;exportAction;noopAction;changelogAction;actions={};constructor(e,t,r,o,s,c,l){this.processService=e,this.appStateStore=t,this.message=r,this.redirectAction=o,this.exportAction=s,this.noopAction=c,this.changelogAction=l,this.registerHandler(o),this.registerHandler(s),this.registerHandler(c),this.registerHandler(l)}registerHandler(e){this.actions[e.key]=e}run(e,t,r=null){const o={...t};return this.appStateStore.updateLoading(e,!0),this.processService.submit(e,o).pipe((0,v.take)(1),(0,v.tap)(s=>{this.appStateStore.updateLoading(e,!1);let c="addSuccessMessageByKey";if("error"===s.status&&(c="addDangerMessageByKey"),s.messages&&s.messages.forEach(d=>{d&&this.message[c](d)}),"error"===s.status)return;const l=r||s.data&&s.data.handler||null;if(!l)return;const u=this.actions[l];u?u.run(s.data.params):this.message.addDangerMessageByKey("LBL_MISSING_HANDLER")}),(0,v.catchError)(s=>"Access Denied."===(s?.message??"")?(this.appStateStore.updateLoading(e,!1),(0,S.of)(null)):(this.message.addDangerMessageByKey("LBL_ACTION_ERROR"),this.appStateStore.updateLoading(e,!1),(0,S.of)(null))))}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject($i),n.\u0275\u0275inject(Gt),n.\u0275\u0275inject(ct),n.\u0275\u0275inject(J0),n.\u0275\u0275inject(Q0),n.\u0275\u0275inject(X0),n.\u0275\u0275inject(eb))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Qo=(()=>{class i{getKey(){return"base"}map(e){!e.fields||!Object.keys(e.fields).length||Object.keys(e.fields).forEach(t=>{const r=e.fields[t],o=r.type||"",s=r.definition.source||"",c=r.definition.rname||"name",l=r.definition.id_name||"";if("relate"!==o||"non-db"!==s||l!==t){if("relate"===o&&"non-db"===s&&""!==c&&r.valueObject){const u=e.attributes[t]||{};return u[c]=r.valueObject[c],u.id=r.valueObject.id,e.attributes[t]=u,void(e.attributes[l]=r.valueObject.id)}if(!r.valueObject)return r.items?(e.attributes[t]=[],void r.items.forEach(u=>{e.attributes[t].push({id:u.id,module:u.module,attributes:(0,M.deepClone)(u.attributes)})})):void(e.attributes[t]=r.valueObjectArray?r.valueObjectArray:r.valueList?r.valueList:r.value);e.attributes[t]=r.valueObject}else e.attributes[t]=r.value})}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),tb=(()=>{class i extends Wi{asyncActionService;processService;messages;recordMappers;baseMapper;activeFieldsChecker;key="updateValueBackend";modes=["edit","detail","list","create","massupdate","filter"];constructor(e,t,r,o,s,c){super(),this.asyncActionService=e,this.processService=t,this.messages=r,this.recordMappers=o,this.baseMapper=s,this.activeFieldsChecker=c,o.register("default",s.getKey(),s)}run(e,t){const r=e.record,o=e.field;if(!r||!o)return;const s=t.params&&t.params.activeOnFields||{},c=Object.keys(s),l=t.params&&t.params.activeOnAttributes||{},u=Object.keys(l);if(!c.length&&!u.length)return;const d=t.params&&t.params.process;if(d&&this.activeFieldsChecker.isActive(c,r,s,u,l)){const p=d,m=this.getBaseRecord(r),h={action:p,module:r.module??"",record:m};o.loading=!0,this.processService.submit(p,h).pipe((0,v.take)(1)).subscribe(g=>{const b=g?.data?.value??null;o.loading=!1,null!==b?this.updateValue(o,b.toString(),r):this.messages.addDangerMessageByKey("ERR_FIELD_LOGIC_BACKEND_CALCULATION")},g=>{o.loading=!1,this.messages.addDangerMessageByKey("ERR_FIELD_LOGIC_BACKEND_CALCULATION")})}}getBaseRecord(e){return e?(this.mapRecordFields(e),(0,M.deepClone)({id:e.id,type:e.type,module:e.module,attributes:e.attributes,acls:e.acls})):null}mapRecordFields(e){const t=this.recordMappers.get(e.module);Object.keys(t).forEach(r=>{t[r].map(e)})}updateValue(e,t,r){e.value=t.toString(),e.formControl.setValue(t),r.formGroup.updateValueAndValidity({onlySelf:!0,emitEvent:!0})}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Kt),n.\u0275\u0275inject($i),n.\u0275\u0275inject(ct),n.\u0275\u0275inject(M.RecordMapperRegistry),n.\u0275\u0275inject(Qo),n.\u0275\u0275inject(Jo))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),nb=(()=>{class i extends Wi{asyncActionService;processService;messages;recordMappers;baseMapper;activeFieldsChecker;key="displayTypeBackend";modes=["edit","detail","list","create","massupdate","filter"];constructor(e,t,r,o,s,c){super(),this.asyncActionService=e,this.processService=t,this.messages=r,this.recordMappers=o,this.baseMapper=s,this.activeFieldsChecker=c,o.register("default",s.getKey(),s)}run(e,t){const r=e.record,o=e.field;if(!r||!o)return;const s=t.params&&t.params.activeOnFields||{},c=Object.keys(s),l=t.params&&t.params.activeOnAttributes||{},u=Object.keys(l);if(!c.length&&!u.length)return;const d=t.params&&t.params.process;if(!d)return;const f=this.activeFieldsChecker.isActive(c,r,s,u,l);let p=e.field.defaultDisplay;if(f){const h=d,g=this.getBaseRecord(r),b={action:h,module:r.module??"",record:g};o.loading=!0,this.processService.submit(h,b).subscribe(_=>{const D=_?.data?.value??null;o.loading=!1,null!==D?(p=D,e.field.display=p):this.messages.addDangerMessageByKey("ERR_FIELD_LOGIC_BACKEND_CALCULATION")},_=>{o.loading=!1,this.messages.addDangerMessageByKey("ERR_FIELD_LOGIC_BACKEND_CALCULATION")})}(t.params&&t.params.resetOn||"none")===p&&(e.field.valueList&&e.field.valueList.length&&(e.field.valueList=[]),e.field.value&&(e.field.value=""))}getBaseRecord(e){return e?(this.mapRecordFields(e),(0,M.deepClone)({id:e.id,type:e.type,module:e.module,attributes:e.attributes,acls:e.acls})):null}mapRecordFields(e){const t=this.recordMappers.get(e.module);Object.keys(t).forEach(r=>{t[r].map(e)})}getTriggeringStatus(){return["onValueChange","onFieldInitialize"]}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Kt),n.\u0275\u0275inject($i),n.\u0275\u0275inject(ct),n.\u0275\u0275inject(M.RecordMapperRegistry),n.\u0275\u0275inject(Qo),n.\u0275\u0275inject(Jo))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),ft=(()=>{class i extends si{actions={edit:{},create:{},list:{},detail:{},massupdate:{},filter:{}};constructor(e,t,r,o,s,c,l,u,d){super(),e.modes.forEach(f=>this.actions[f][e.key]=e),t.modes.forEach(f=>this.actions[f][t.key]=t),r.modes.forEach(f=>this.actions[f][r.key]=r),o.modes.forEach(f=>this.actions[f][o.key]=o),s.modes.forEach(f=>this.actions[f][s.key]=s),l.modes.forEach(f=>this.actions[f][l.key]=l),c.modes.forEach(f=>this.actions[f][c.key]=c),u.modes.forEach(f=>this.actions[f][u.key]=u),d.modes.forEach(f=>this.actions[f][d.key]=d)}runLogic(e,t,r,o=""){if(!e.logic)return;const s=Object.keys(e.logic).map(u=>e.logic[u]),c=this.parseModeActions(s,t,o),l={record:r,field:e,module:r.module};c.forEach(u=>{this.runAction(u,t,l)})}runAction(e,t,r=null){this.runFrontEndAction(e,t,r)}runFrontEndAction(e,t,r=null){const o=this.buildActionData(e,r);this.run(e,t,o)}getModuleName(e){return e.module}buildActionData(e,t){return{field:t.field,record:t&&t.record||null}}parseModeActions(e,t,r){if(!e)return[];const o={list:[],detail:[],edit:[],create:[],massupdate:[],filter:[]};e&&e.length&&e.forEach(l=>{!l.modes||!l.modes.length||l.modes.forEach(u=>{!o[u]&&!l.asyncProcess||o[u].push(l)})});const s=[],c=["onValueChange"];return o[t].forEach(l=>{const u=this?.actions[t][l.key]?.getTriggeringStatus()??null;r&&!(l?.triggeringStatus??u??c).includes(r)||s.push(l)}),s}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(U0),n.\u0275\u0275inject(V0),n.\u0275\u0275inject(G0),n.\u0275\u0275inject(K0),n.\u0275\u0275inject(H0),n.\u0275\u0275inject(Z0),n.\u0275\u0275inject(q0),n.\u0275\u0275inject(tb),n.\u0275\u0275inject(nb))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();class ib extends M.ActionHandler{shouldDisplay(a){return!0}}let rb=(()=>{class i extends ib{activeFieldsChecker;key="displayType";modes=["edit","detail","list","create","massupdate","filter"];constructor(e){super(),this.activeFieldsChecker=e}run(e,t){const r=e.record;if(!r||!e.field)return!0;const s=t.params&&t.params.activeOnFields||{},c=Object.keys(s),l=t.params&&t.params.activeOnAttributes||{},u=Object.keys(l);return!c.length&&!u.length||this.activeFieldsChecker.isActive(c,r,s,u,l)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Jo))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),pt=(()=>{class i extends si{constructor(e){super(),e.modes.forEach(t=>this.actions[t][e.key]=e)}runAll(e,t,r){let o="show";if(!e.displayLogic)return;const s=Object.values(e.displayLogic).filter(f=>{const p=f.modes??[];return!(!p.length||!p.includes(r))});if(!s||!s.length)return;let c=e.defaultDisplay??"show",l="none";"none"===c&&(l="show");const u={record:t,field:e,module:t.module};s.some(f=>{const p=this.buildActionData(f,u);return this.actions[r][f.key].run(p,f)})&&(c=l),o=c,"show"===c&&(o="show"),e.display=o}buildActionData(e,t){return{field:t.field,record:t&&t.record||null}}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(rb))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),cn=(()=>{class i{typeFormatter;logic;logicDisplay;mode;field;record;parent;klass=null;dependentFields={};dependentAttributes=[];subs=[];constructor(e,t,r){this.typeFormatter=e,this.logic=t,this.logicDisplay=r}ngOnInit(){this.baseInit()}ngOnDestroy(){this.unsubscribeAll()}baseInit(){this.initDependencyHandlers()}initDependencyHandlers(){if(!this.record)return;const e=this.record.fields&&Object.keys(this.record.fields)||[];e.length>1&&(this.calculateDependentFields(e),this.field.previousValue=this.field.value,(this.dependentFields&&Object.keys(this.dependentFields).length||this.dependentAttributes.length)&&Object.keys(this.dependentFields).forEach(t=>{const r=this.record.fields[t]||null;if(!r)return;const o=this.dependentFields[t].type??[];o.includes("logic")&&this.logic.runLogic(r,this.mode,this.record,"onFieldInitialize"),o.includes("displayLogic")&&this.logicDisplay.runAll(r,this.record,this.mode)}),this.field.valueChanges$&&(this.dependentFields&&Object.keys(this.dependentFields).length||this.dependentAttributes.length)&&this.subs.push(this.field.valueChanges$.pipe((0,v.debounceTime)(500)).subscribe(t=>{Object.keys(this.dependentFields).forEach(r=>{const s=this.record.fields[r]||null;if(s&&this.field.previousValue!=t.value){const c=this.dependentFields[r].type??[];c.includes("logic")&&this.logic.runLogic(s,this.mode,this.record,"onValueChange"),c.includes("displayLogic")&&this.logicDisplay.runAll(s,this.record,this.mode)}}),this.field.previousValue=t.value,this.dependentAttributes.forEach(r=>{const o=this.record.fields[r.field]||{},s=o&&o.attributes&&o.attributes[r.attribute]||null;s&&this.logic.runLogic(s,this.mode,this.record,"onValueChange")})})))}calculateDependentFields(e){e.forEach(t=>{"field"!==this.field.source&&"groupField"!==this.field.source?"attribute"!==this.field.source||this.addAttributeDependency(t,this.dependentFields,this.dependentAttributes):this.addFieldDependency(t,this.dependentFields,this.dependentAttributes)})}addFieldDependency(e,t,r){const o=this.record.fields[e],s=this.field.name||this.field.definition.name||"";e!==s&&o&&(o.fieldDependencies&&this.isDependencyField(o.fieldDependencies)&&(t[e]=o.fieldDependencies[s]),(o.attributes&&Object.keys(o.attributes)||[]).forEach(l=>{const u=o.attributes[l];!u||!u.fieldDependencies||!u.fieldDependencies.length||this.isDependencyField(u.fieldDependencies)&&r.push({field:e,attribute:l,types:t[s].types??[]})}))}isDependencyField(e){return!!e[this.field.name||this.field.definition.name||""]}addAttributeDependency(e,t,r){const o=this.record.fields[e],s=this.field.name||this.field.definition.name||"";e!==s&&o&&(o.attributeDependencies&&o.attributeDependencies.length&&this.isDependencyAttribute(o.attributeDependencies)&&(t[s]=o.fieldDependencies[s]),(o.attributes&&Object.keys(o.attributes)||[]).forEach(l=>{const u=o.attributes[l];!u||!u.attributeDependencies||!u.attributeDependencies.length||this.isDependencyAttribute(u.attributeDependencies)&&r.push({field:e,attribute:l,types:(t[s]??{}).types??[]})}))}isDependencyAttribute(e){const t=this.field.parentKey||"",r=this.field.name||this.field.definition.name||"";return e.some(o=>t===o.field&&r===o.attribute)}subscribeValueChanges(){this.field&&this.field.formControl&&this.subs.push(this.field.formControl.valueChanges.subscribe(e=>{e=(0,M.isVoid)(e)?"":e.trim(),this.typeFormatter&&this.field.type&&(e=this.toInternalFormat(this.field.type,e)),this.setFieldValue(e)}))}toInternalFormat(e,t){return this.typeFormatter.toInternalFormat(e,t)}setFieldValue(e){this.field.value=e}unsubscribeAll(){this.subs.forEach(e=>e.unsubscribe())}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(it),n.\u0275\u0275directiveInject(ft),n.\u0275\u0275directiveInject(pt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["ng-component"]],inputs:{mode:"mode",field:"field",record:"record",parent:"parent",klass:"klass"},decls:0,vars:0,template:function(t,r){},encapsulation:2})}return i})(),nc=(()=>{class i extends cn{typeFormatter;logic;logicDisplay;constructor(e,t,r){super(e,t,r),this.typeFormatter=e,this.logic=t,this.logicDisplay=r}getTelLink(e){return e?"tel:"+this.getUnFormatted(e):null}getUnFormatted(e){return e?e.replace(/\s+/g,""):""}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(it),n.\u0275\u0275directiveInject(ft),n.\u0275\u0275directiveInject(pt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-phone-detail"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:2,vars:2,consts:[[3,"href"]],template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"a",0),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&t&&(n.\u0275\u0275property("href",r.getTelLink(r.field.value),n.\u0275\u0275sanitizeUrl),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(r.field.value))},encapsulation:2})}return i})(),Ti=(()=>{class i extends cn{languages;typeFormatter;logic;logicDisplay;selectedValues=[];valueLabel="";optionsMap;options=[];labels;subs=[];mappedOptions;isDynamicEnum=!1;constructor(e,t,r,o){super(t,r,o),this.languages=e,this.typeFormatter=t,this.logic=r,this.logicDisplay=o}ngOnInit(){super.ngOnInit();const e=this?.field?.metadata?.options$??null;if(e)return void this.subs.push(this.field.metadata.options$.subscribe(r=>{this.buildProvidedOptions(r),this.initValue()}));const t=this?.field?.definition?.options??null;t&&this.subs.push(this.languages.vm$.subscribe(r=>{this.buildAppStringListOptions(r.appListStrings),this.initValue()})),!t&&!e&&this.initValue()}ngOnDestroy(){this.isDynamicEnum=!1,this.subs.forEach(e=>e.unsubscribe())}getInvalidClass(){return this.field.formControl&&this.field.formControl.invalid&&this.field.formControl.touched?"is-invalid":""}buildProvidedOptions(e){this.options=e,this.optionsMap={},e.forEach(t=>{this.optionsMap[t.value]=t.label})}buildAppStringListOptions(e){if(this.optionsMap={},this.addExtraOptions(),e&&this.field.definition.options&&e[this.field.definition.options]){const t=e[this.field.definition.options];this.options&&Object.keys(this.options)&&(this.optionsMap={...this.optionsMap,...t})}this.buildOptionsArray(e)}addExtraOptions(){(this.field.metadata&&this.field.metadata.extraOptions||[]).forEach(t=>{if((0,M.isVoid)(t.value))return;let r=t.label||"";t.labelKey&&(r=this.languages.getFieldLabel(t.labelKey)),this.optionsMap[t.value]=r})}buildOptionsArray(e){this.options=[],Object.keys(this.optionsMap).forEach(t=>{this.options.push({value:t,label:this.optionsMap[t]})}),this.isDynamicEnum&&this.buildDynamicEnumOptions(e)}initValue(){this.selectedValues=[],this.field.criteria?this.initValueLabel():this.field.value?"string"==typeof this.field.value&&this.optionsMap&&"string"==typeof this.optionsMap[this.field.value]&&this.initValueLabel():this.initEnumDefault()}initValueLabel(){const e=this.field.value||this.field.criteria?.target||void 0;void 0!==e&&(this.valueLabel=this.optionsMap[e],this.selectedValues.push({value:e,label:this.valueLabel}))}initEnumDefault(){if(!(0,M.isEmptyString)(this.record?.id))return void this.field?.formControl.setValue("");let e=this.field?.definition?.default;"string"==typeof e&&(e=e.trim()),e?(this.selectedValues.push({value:e,label:this.optionsMap[e]}),this.initEnumDefaultFieldValues(e)):this.field.formControl.setValue("")}initEnumDefaultFieldValues(e){if("multienum"===this.field.type){const t=this.selectedValues.map(r=>r.value);this.field.valueList=t,this.field.formControl.setValue(t)}else this.field.value=e,this.field.formControl.setValue(e);this.field.formControl.markAsDirty()}checkAndInitAsDynamicEnum(){const e=this.field&&this.field.definition||{},r=e&&e.parentenum||"",o=this.record&&this.record.fields||null;if(e&&e.dynamic&&r&&o){this.isDynamicEnum=!0;const s=o[r];s&&this.subscribeToParentValueChanges(s)}}buildDynamicEnumOptions(e){const t=this.record.fields[this.field.definition.parentenum];if(t){const r=e[t.definition.options];if(r&&0!==Object.keys(r).length){this.mappedOptions=this.createParentChildOptionsMap(r,this.options);let o=[];"multienum"===t.definition.type?o=t.valueList:o.push(t.value),this.options=this.filterMatchingOptions(o)}}}filterMatchingOptions(e){let t=[];return e&&e.length?(e.forEach(r=>{this.mappedOptions[r]&&(t=t.concat([...this.mappedOptions[r]]))}),t):[]}createParentChildOptionsMap(e,t){const r={};return Object.keys(e).forEach(o=>{r[o]=t.filter(s=>String(s.value).startsWith(o))}),r}subscribeToParentValueChanges(e){e.formControl&&this.subs.push(e.formControl.valueChanges.subscribe(t=>{"string"==typeof t&&(t=[t]),this.field.value="",this.field.formControl.setValue(""),this.options=this.filterMatchingOptions(t),this.initValue()}))}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(Oe),n.\u0275\u0275directiveInject(it),n.\u0275\u0275directiveInject(ft),n.\u0275\u0275directiveInject(pt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["ng-component"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:0,vars:0,template:function(t,r){},encapsulation:2})}return i})(),ic=(()=>{class i extends Ti{languages;typeFormatter;logic;logicDisplay;constructor(e,t,r,o){super(e,t,r,o),this.languages=e,this.typeFormatter=t,this.logic=r,this.logicDisplay=o}initValue(){this.selectedValues=[],!this.field.valueList||this.field.valueList.length<1?this.initEnumDefault():this.field.valueList.forEach(e=>{"string"==typeof this.optionsMap[e]&&this.selectedValues.push({value:e,label:this.optionsMap[e]})})}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(Oe),n.\u0275\u0275directiveInject(it),n.\u0275\u0275directiveInject(ft),n.\u0275\u0275directiveInject(pt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["ng-component"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:0,vars:0,template:function(t,r){},encapsulation:2})}return i})();const h4=["tag"];let rc=(()=>{class i extends ic{languages;typeFormatter;logic;logicDisplay;tag;constructor(e,t,r,o){super(e,t,r,o),this.languages=e,this.typeFormatter=t,this.logic=r,this.logicDisplay=o}ngOnInit(){this.field.valueList=[],this.field.criteria.values&&this.field.criteria.values.length>0&&(this.field.valueList=this.field.criteria.values),super.ngOnInit()}onAdd(){const e=this.selectedValues.map(t=>t.value);this.field.valueList=e,this.field.formControl.setValue(e),this.field.formControl.markAsDirty(),this.field.criteria.operator="=",this.field.criteria.values=e}onRemove(){let e=this.selectedValues.map(t=>t.value);e||(e=[]),this.field.valueList=e,this.field.formControl.setValue(e),this.field.formControl.markAsDirty(),this.field.criteria.operator="=",this.field.criteria.values=e,setTimeout(()=>{this.tag.focus(!0,!0),this.tag.dropdown.show()},200)}getPlaceholderLabel(){return this.languages.getAppString("LBL_SELECT_ITEM")||""}selectFirstElement(){const e=this.tag.dropdown.items;0!==e.length&&(this.selectedValues.push(e[0]),this.onAdd(),this.tag.dropdown.hide())}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(Oe),n.\u0275\u0275directiveInject(it),n.\u0275\u0275directiveInject(ft),n.\u0275\u0275directiveInject(pt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-multienum-filter"]],viewQuery:function(t,r){if(1&t&&n.\u0275\u0275viewQuery(h4,5),2&t){let o;n.\u0275\u0275queryRefresh(o=n.\u0275\u0275loadQuery())&&(r.tag=o.first)}},features:[n.\u0275\u0275InheritDefinitionFeature],decls:3,vars:13,consts:[[3,"ngModel","onlyFromAutocomplete","clearOnBlur","displayBy","identifyBy","placeholder","secondaryPlaceholder","inputClass","ngModelChange","onAdd","onRemove","keyup.enter"],["tag",""],[3,"displayBy","identifyBy","showDropdownIfEmpty","keepOpen","autocompleteItems"]],template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"tag-input",0,1),n.\u0275\u0275listener("ngModelChange",function(s){return r.selectedValues=s})("onAdd",function(){return r.onAdd()})("onRemove",function(){return r.onRemove()})("keyup.enter",function(){return r.selectFirstElement()}),n.\u0275\u0275element(2,"tag-input-dropdown",2),n.\u0275\u0275elementEnd()),2&t&&(n.\u0275\u0275property("ngModel",r.selectedValues)("onlyFromAutocomplete",!0)("clearOnBlur",!0)("displayBy","label")("identifyBy","value")("placeholder",r.getPlaceholderLabel())("secondaryPlaceholder",r.getPlaceholderLabel())("inputClass",r.getInvalidClass()),n.\u0275\u0275advance(2),n.\u0275\u0275property("displayBy","label")("identifyBy","value")("showDropdownIfEmpty",!0)("keepOpen",!1)("autocompleteItems",r.options))},dependencies:[Ce.NgControlStatus,Ce.NgModel,Tn.TagInputComponent,Tn.TagInputDropdown],encapsulation:2})}return i})(),Or=(()=>{class i extends Ti{languages;typeFormatter;logic;logicDisplay;constructor(e,t,r,o){super(e,t,r,o),this.languages=e,this.typeFormatter=t,this.logic=r,this.logicDisplay=o}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(Oe),n.\u0275\u0275directiveInject(it),n.\u0275\u0275directiveInject(ft),n.\u0275\u0275directiveInject(pt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-enum-detail"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,template:function(t,r){1&t&&n.\u0275\u0275text(0),2&t&&n.\u0275\u0275textInterpolate1("\n",r.valueLabel,"\n")},encapsulation:2})}return i})(),ob=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Ce.FormsModule]})}return i})(),ab=(()=>{class i extends cn{typeFormatter;logic;logicDisplay;constructor(e,t,r){super(e,t,r),this.typeFormatter=e,this.logic=t,this.logicDisplay=r}getNameField(e,t){if(!e.value||!t.attributes)return;const r=e.value.split(" "),o=[];return r.forEach(s=>{t.attributes[s]&&o.push(t.attributes[s])}),o.join(" ")}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(it),n.\u0275\u0275directiveInject(ft),n.\u0275\u0275directiveInject(pt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["ng-component"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:0,vars:0,template:function(t,r){},encapsulation:2})}return i})(),oc=(()=>{class i extends ab{typeFormatter;logic;logicDisplay;data;constructor(e,t,r){super(e,t,r),this.typeFormatter=e,this.logic=t,this.logicDisplay=r}ngOnInit(){super.ngOnInit(),this.data=this.getNameField(this.field,this.record)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(it),n.\u0275\u0275directiveInject(ft),n.\u0275\u0275directiveInject(pt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-fullname-detail"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,template:function(t,r){1&t&&n.\u0275\u0275text(0),2&t&&n.\u0275\u0275textInterpolate1("\n",r.data,"\n")},encapsulation:2})}return i})(),sb=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule]})}return i})(),Xo=(()=>{class i extends cn{typeFormatter;logic;logicDisplay;constructor(e,t,r){super(e,t,r),this.typeFormatter=e,this.logic=t,this.logicDisplay=r}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(it),n.\u0275\u0275directiveInject(ft),n.\u0275\u0275directiveInject(pt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-varchar-detail"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,template:function(t,r){1&t&&n.\u0275\u0275text(0),2&t&&n.\u0275\u0275textInterpolate1("\n",r.field.value,"\n")},encapsulation:2})}return i})(),Yo=(()=>{class i extends cn{typeFormatter;logic;logicDisplay;constructor(e,t,r){super(e,t,r),this.typeFormatter=e,this.logic=t,this.logicDisplay=r}get target(){return this.field.metadata&&this.field.metadata.target?this.field.metadata.target:"_blank"}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(it),n.\u0275\u0275directiveInject(ft),n.\u0275\u0275directiveInject(pt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-url-detail"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:2,vars:3,consts:[[3,"target","href"]],template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"a",0),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&t&&(n.\u0275\u0275propertyInterpolate("href",r.field.value,n.\u0275\u0275sanitizeUrl),n.\u0275\u0275property("target",r.target),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(r.field.value))},encapsulation:2})}return i})(),ka=(()=>{class i extends cn{formatter;typeFormatter;logic;logicDisplay;vm$;constructor(e,t,r,o){super(t,r,o),this.formatter=e,this.typeFormatter=t,this.logic=r,this.logicDisplay=o,this.vm$=this.formatter?.format$??(0,S.of)({date:"yyyy-MM-dd",time:"HH:mm:ss"})}getDateFormat(){return this.field.metadata.date_time_format?this.field.metadata.date_time_format:this.formatter.getDateFormat()}getDateTimeFormat(){return this.formatter.getDateTimeFormat()}toInternalFormat(e,t){return this.formatter.toInternalFormat(t,{fromFormat:this.getDateTimeFormat()})}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(lr),n.\u0275\u0275directiveInject(it),n.\u0275\u0275directiveInject(ft),n.\u0275\u0275directiveInject(pt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["ng-component"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:0,vars:0,template:function(t,r){},encapsulation:2})}return i})(),Su=(()=>{class i extends ka{formatter;typeFormatter;logic;logicDisplay;constructor(e,t,r,o){super(e,t,r,o),this.formatter=e,this.typeFormatter=t,this.logic=r,this.logicDisplay=o}toInternalFormat(e,t){return this.formatter.toInternalFormat(t,{fromFormat:this.getDateFormat()})}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(lr),n.\u0275\u0275directiveInject(it),n.\u0275\u0275directiveInject(ft),n.\u0275\u0275directiveInject(pt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["ng-component"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:0,vars:0,template:function(t,r){},encapsulation:2})}return i})();function v4(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275text(1),n.\u0275\u0275pipe(2,"date"),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",n.\u0275\u0275pipeBind2(2,1,e.field.value,e.getDateFormat()),"\n")}}let ac=(()=>{class i extends Su{formatter;typeFormatter;logic;logicDisplay;constructor(e,t,r,o){super(e,t,r,o),this.formatter=e,this.typeFormatter=t,this.logic=r,this.logicDisplay=o}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(Nr),n.\u0275\u0275directiveInject(it),n.\u0275\u0275directiveInject(ft),n.\u0275\u0275directiveInject(pt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-date-detail"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:2,vars:3,consts:[[4,"ngIf"]],template:function(t,r){1&t&&(n.\u0275\u0275template(0,v4,3,4,"ng-container",0),n.\u0275\u0275pipe(1,"async")),2&t&&n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(1,1,r.vm$))},dependencies:[F.NgIf,F.AsyncPipe,F.DatePipe],encapsulation:2})}return i})(),cb=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule]})}return i})(),lb=(()=>{class i{formatter;constructor(e){this.formatter=e}transform(e,t=null){return this.formatter.toUserFormat(e,t)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(fu,16))};static \u0275pipe=n.\u0275\u0275definePipe({name:"formatCurrency",type:i,pure:!0})}return i})(),ub=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule]})}return i})(),sc=(()=>{class i extends cn{userPreferences;systemConfig;typeFormatter;logic;logicDisplay;preferences$;configs$;vm$;constructor(e,t,r,o,s){super(r,o,s),this.userPreferences=e,this.systemConfig=t,this.typeFormatter=r,this.logic=o,this.logicDisplay=s,this.preferences$=this.userPreferences?.userPreferences$,this.configs$=this.systemConfig?.configs$,this.vm$=this.configs$.pipe((0,S.combineLatestWith)(this.preferences$),(0,v.map)(([c,l])=>({configs:c,preferences:l})))}get format(){return!this.field.metadata||!1!==this.field.metadata.format}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(Vt),n.\u0275\u0275directiveInject(dt),n.\u0275\u0275directiveInject(it),n.\u0275\u0275directiveInject(ft),n.\u0275\u0275directiveInject(pt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["ng-component"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:0,vars:0,template:function(t,r){},encapsulation:2})}return i})();function _4(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275text(1),n.\u0275\u0275pipe(2,"formatCurrency"),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",n.\u0275\u0275pipeBind2(2,1,e.getCurrencyValue(),e.getOptions()),"\n")}}let cc=(()=>{class i extends sc{userPreferences;systemConfig;typeFormatter;logic;currencyService;logicDisplay;constructor(e,t,r,o,s,c){super(e,t,r,o,c),this.userPreferences=e,this.systemConfig=t,this.typeFormatter=r,this.logic=o,this.currencyService=s,this.logicDisplay=c}getOptions(){let e={};this.field&&this.field.metadata&&null!==this.field.metadata.digits&&isFinite(this.field.metadata.digits)&&(e={digits:this.field.metadata.digits});const t=this.currencyService.isBase(this.field);let r=this.currencyService.getCurrencyId(this.record);return(t||null===r)&&(r=this.currencyService.getUserCurrency().id),e.symbol=this.currencyService.getSymbol(r),e.code=this.currencyService.getCode(r),e}getCurrencyValue(){return this.currencyService.getFieldCurrencyValue(this.field,this.record)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(Vt),n.\u0275\u0275directiveInject(dt),n.\u0275\u0275directiveInject(it),n.\u0275\u0275directiveInject(ft),n.\u0275\u0275directiveInject(Ra),n.\u0275\u0275directiveInject(pt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-currency-detail"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:2,vars:3,consts:[[4,"ngIf"]],template:function(t,r){1&t&&(n.\u0275\u0275template(0,_4,3,4,"ng-container",0),n.\u0275\u0275pipe(1,"async")),2&t&&n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(1,1,r.vm$))},dependencies:[F.NgIf,F.AsyncPipe,lb],encapsulation:2})}return i})(),db=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,ub]})}return i})(),Du=(()=>{class i extends cn{typeFormatter;logic;logicDisplay;constructor(e,t,r){super(e,t,r),this.typeFormatter=e,this.logic=t,this.logicDisplay=r}get rows(){return this.field.metadata&&this.field.metadata.rows?this.field.metadata.rows:6}get cols(){return this.field.metadata&&this.field.metadata.cols?this.field.metadata.cols:20}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(it),n.\u0275\u0275directiveInject(ft),n.\u0275\u0275directiveInject(pt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-text-detail"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:2,vars:4,consts:[["readonly","",3,"rows","cols","ngClass"]],template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"textarea",0),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&t&&(n.\u0275\u0275property("rows",r.rows)("cols",r.cols)("ngClass",r.klass),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(r.field.value))},dependencies:[F.NgClass],encapsulation:2})}return i})(),wu=(()=>{class i extends cn{typeFormatter;logic;logicDisplay;constructor(e,t,r){super(e,t,r),this.typeFormatter=e,this.logic=t,this.logicDisplay=r}ngOnInit(){super.ngOnInit(),this.subscribeValueChanges()}ngOnDestroy(){this.unsubscribeAll()}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(it),n.\u0275\u0275directiveInject(ft),n.\u0275\u0275directiveInject(pt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-varchar-edit"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:1,vars:5,consts:[["type","text",3,"formControl","value","ngClass"]],template:function(t,r){1&t&&n.\u0275\u0275element(0,"input",0),2&t&&(n.\u0275\u0275classProp("is-invalid",r.field.formControl.invalid&&r.field.formControl.touched),n.\u0275\u0275property("formControl",r.field.formControl)("value",r.field.value)("ngClass",r.klass))},dependencies:[F.NgClass,Ce.DefaultValueAccessor,Ce.NgControlStatus,Ce.FormControlDirective],encapsulation:2})}return i})();class Gi{hourStep=1;minuteStep=15;secondStep=30;displaySeconds=!1;date;time;constructor(a){Object.assign(this,a)}static toDateTimeStruct(a,e){if(!e)return null;const t=a.userDateTimeFormatToStruct(e);if(!t)return null;const{date:r,time:o}=t;return new Gi({date:r,time:o})}static internalToDateTimeStruct(a,e){if(!e)return null;const t=a.internalDateTimeFormatToStruct(e);if(!t)return null;const{date:r,time:o}=t;return new Gi({date:r,time:o})}toUserFormat(a){const r=[[this.date.year,this.date.month,this.date.day].join("-"),[this.time.hour,this.time.minute,this.time.second].join(":")].join(" "),o=a.toInternalFormat(r,{fromFormat:"yyyy-M-d H:m:s"});return a.toUserFormat(o,{fromFormat:"yyyy-M-d H:m:s"})}}function y4(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"div")(1,"div")(2,"ngb-datepicker",5),n.\u0275\u0275listener("dateSelect",function(r){n.\u0275\u0275restoreView(e);const o=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(o.onDateChange(r))}),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(3,"div",6)(4,"ngb-timepicker",7),n.\u0275\u0275listener("ngModelChange",function(r){n.\u0275\u0275restoreView(e);const o=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(o.onTimeChange(r))}),n.\u0275\u0275elementEnd()()()}if(2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(2),n.\u0275\u0275property("ngModel",e.dateTimeModel.date)("startDate",e.dateTimeModel.date),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngModel",e.dateTimeModel.time)("seconds",e.dateTimeModel.displaySeconds)("hourStep",e.dateTimeModel.hourStep)("minuteStep",e.dateTimeModel.minuteStep)("secondStep",e.dateTimeModel.secondStep)}}let xu=(()=>{class i extends ka{formatter;typeFormatter;calendar;config;logic;logicDisplay;popover;dateTimeModel=new Gi;constructor(e,t,r,o,s,c){super(e,t,s,c),this.formatter=e,this.typeFormatter=t,this.calendar=r,this.config=o,this.logic=s,this.logicDisplay=c,o.autoClose="outside",o.placement=this.getPlacement()}ngOnInit(){if((0,M.isVoid)(this.field.value)||(0,M.isEmptyString)(this.field.value))this.dateTimeModel.date=this.calendar.getToday(),this.dateTimeModel.time={hour:0,minute:0,second:0},this.field.formControl.setValue(null);else{if(this.dateTimeModel=Gi.internalToDateTimeStruct(this.formatter,this.field.value),null===this.dateTimeModel)return void this.field.formControl.setValue(null);this.setFormValues(this.dateTimeModel.toUserFormat(this.formatter))}this.formatter.getTimeFormat().includes("ss")&&(this.dateTimeModel.displaySeconds=!0),this.subscribeValueChanges()}ngOnDestroy(){this.unsubscribeAll()}setFormValues(e){this.field.formControl.setValue(e),this.field.formControl.markAsDirty()}onDateChange(e){this.dateTimeModel.date=e,this.setFormValues(this.dateTimeModel.toUserFormat(this.formatter))}onTimeChange(e){this.dateTimeModel.time=e,this.setFormValues(this.dateTimeModel.toUserFormat(this.formatter))}onInputChange(e){const t=Gi.toDateTimeStruct(this.formatter,e.target.value);t&&(this.dateTimeModel=t)}getOpenButton(){return{klass:"btn btn-sm btn-outline-secondary m-0 border-0",icon:"calendar"}}getPlacement(){return["bottom-right","top-right","bottom-left","top-left"]}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(lr),n.\u0275\u0275directiveInject(it),n.\u0275\u0275directiveInject(de.NgbCalendar),n.\u0275\u0275directiveInject(de.NgbPopoverConfig),n.\u0275\u0275directiveInject(ft),n.\u0275\u0275directiveInject(pt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-datetime-edit"]],viewQuery:function(t,r){if(1&t&&n.\u0275\u0275viewQuery(de.NgbPopover,7),2&t){let o;n.\u0275\u0275queryRefresh(o=n.\u0275\u0275loadQuery())&&(r.popover=o.first)}},features:[n.\u0275\u0275InheritDefinitionFeature],decls:6,vars:7,consts:[[1,"input-group","mr-2"],[3,"ngClass","placeholder","formControl","change"],[1,"input-group-append"],[3,"config","ngbPopover"],["calendarContent",""],["name","datepicker",3,"ngModel","startDate","dateSelect"],[1,"d-flex","justify-content-center","mt-auto"],["name","timepicker",3,"ngModel","seconds","hourStep","minuteStep","secondStep","ngModelChange"]],template:function(t,r){if(1&t&&(n.\u0275\u0275elementStart(0,"div",0)(1,"input",1),n.\u0275\u0275listener("change",function(s){return r.onInputChange(s)}),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(2,"div",2),n.\u0275\u0275element(3,"scrm-button",3),n.\u0275\u0275elementEnd()(),n.\u0275\u0275template(4,y4,5,7,"ng-template",null,4,n.\u0275\u0275templateRefExtractor)),2&t){const o=n.\u0275\u0275reference(5);n.\u0275\u0275advance(1),n.\u0275\u0275classProp("is-invalid",r.field.formControl.invalid&&r.field.formControl.touched),n.\u0275\u0275property("ngClass",r.klass)("placeholder",r.getDateTimeFormat().toLowerCase())("formControl",r.field.formControl),n.\u0275\u0275advance(2),n.\u0275\u0275property("config",r.getOpenButton())("ngbPopover",o)}},dependencies:[F.NgClass,Ce.DefaultValueAccessor,Ce.NgControlStatus,Ce.NgModel,de.NgbDatepicker,de.NgbTimepicker,Nn,Ce.FormControlDirective,de.NgbPopover],encapsulation:2})}return i})(),fb=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Ce.FormsModule,de.NgbDatepickerModule,de.NgbTimepickerModule,fn,Xt,Ce.ReactiveFormsModule,de.NgbModule]})}return i})(),Eu=(()=>{class i extends de.NgbDateParserFormatter{formatter;userFormat;constructor(e){super(),this.formatter=e}getUserFormat(){return this.userFormat}setUserFormat(e){this.userFormat=e}parse(e){if(!e)return null;const t={fromFormat:"yyyy-M-d"};return this.userFormat&&(t.toFormat=this.userFormat),this.formatter.dateFormatToStruct(e,t.toFormat||this.formatter.getUserFormat())}format(e){if(!e)return null;const t=[e.year,e.month,e.day].join("-"),r={fromFormat:"yyyy-M-d"};return this.userFormat&&(r.toFormat=this.userFormat),this.formatter.toUserFormat(t,r)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Nr))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),Fu=(()=>{class i extends de.NgbDateAdapter{formatter;userFormat;constructor(e){super(),this.formatter=e}getUserFormat(){return this.userFormat}setUserFormat(e){this.userFormat=e}fromModel(e){return e?this.formatter.dateFormatToStruct(e,this.userFormat||""):null}toModel(e){if(!e)return null;const t=[e.year,e.month,e.day].join("-"),r={fromFormat:"yyyy-M-d"};return this.userFormat&&(r.toFormat=this.userFormat),this.formatter.toUserFormat(t,r)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Nr))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),lc=(()=>{class i extends Su{formatter;dateAdapter;dateParserFormatter;typeFormatter;logic;logicDisplay;dateModel;constructor(e,t,r,o,s,c){super(e,o,s,c),this.formatter=e,this.dateAdapter=t,this.dateParserFormatter=r,this.typeFormatter=o,this.logic=s,this.logicDisplay=c}ngOnInit(){(0,M.isVoid)(this.field.value)||(0,M.isEmptyString)(this.field.value)?this.field.formControl.setValue(null):this.field.formControl.setValue(this.formatter.toUserFormat(this.field.value,{toFormat:this.getDateFormat()})),this.dateAdapter.setUserFormat(this.getDateFormat()),this.dateParserFormatter.setUserFormat(this.getDateFormat()),this.dateModel=this.formatter.dateFormatToStruct(this.field.value,this.formatter.getInternalFormat()),this.subscribeValueChanges()}ngOnDestroy(){this.unsubscribeAll()}setModel(e){this.field.value=this.formatter.toInternalFormat(e,{fromFormat:this.getDateFormat()}),this.dateModel=this.formatter.dateFormatToStruct(e,this.getDateFormat())}getOpenButton(e){return{klass:"btn btn-sm btn-outline-secondary m-0 border-0",onClick:()=>{e.toggle(),e.navigateTo(this.dateModel)},icon:"calendar"}}getPlacement(){return["bottom-left","bottom-right","top-left","top-right"]}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(Nr),n.\u0275\u0275directiveInject(de.NgbDateAdapter),n.\u0275\u0275directiveInject(de.NgbDateParserFormatter),n.\u0275\u0275directiveInject(it),n.\u0275\u0275directiveInject(ft),n.\u0275\u0275directiveInject(pt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-date-edit"]],features:[n.\u0275\u0275ProvidersFeature([{provide:de.NgbDateAdapter,useClass:Fu},{provide:de.NgbDateParserFormatter,useClass:Eu}]),n.\u0275\u0275InheritDefinitionFeature],decls:5,vars:8,consts:[[1,"field-datetime-edit","input-group"],["ngbDatepicker","",3,"ngClass","placement","placeholder","formControl","startDate","ngModelChange"],["datepicker","ngbDatepicker"],[1,"input-group-append","align-items-end"],[3,"config"]],template:function(t,r){if(1&t&&(n.\u0275\u0275elementStart(0,"div",0)(1,"input",1,2),n.\u0275\u0275listener("ngModelChange",function(s){return r.setModel(s)}),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(3,"span",3),n.\u0275\u0275element(4,"scrm-button",4),n.\u0275\u0275elementEnd()()),2&t){const o=n.\u0275\u0275reference(2);n.\u0275\u0275advance(1),n.\u0275\u0275classProp("is-invalid",r.field.formControl.invalid&&r.field.formControl.touched),n.\u0275\u0275property("ngClass",r.klass)("placement",r.getPlacement())("placeholder",r.getDateFormat().toLowerCase())("formControl",r.field.formControl)("startDate",r.dateModel),n.\u0275\u0275advance(3),n.\u0275\u0275property("config",r.getOpenButton(o))}},dependencies:[F.NgClass,Ce.DefaultValueAccessor,Ce.NgControlStatus,de.NgbInputDatepicker,Nn,Ce.FormControlDirective],encapsulation:2})}return i})(),uc=(()=>{class i extends lc{formatter;dateAdapter;dateParserFormatter;typeFormatter;logic;logicDisplay;constructor(e,t,r,o,s,c){super(e,t,r,o,s,c),this.formatter=e,this.dateAdapter=t,this.dateParserFormatter=r,this.typeFormatter=o,this.logic=s,this.logicDisplay=c}ngOnInit(){let e=null;this.field.criteria.values&&this.field.criteria.values.length>0&&(e=this.field.criteria.values[0]),!(0,M.isVoid)(e)&&!(0,M.isEmptyString)(e)&&(e=e.trim()),this.field.value=e??"",super.ngOnInit()}setFieldValue(e){super.setFieldValue(e),this.field.criteria.operator="=",this.field.criteria.values=[e]}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(Nr),n.\u0275\u0275directiveInject(de.NgbDateAdapter),n.\u0275\u0275directiveInject(de.NgbDateParserFormatter),n.\u0275\u0275directiveInject(it),n.\u0275\u0275directiveInject(ft),n.\u0275\u0275directiveInject(pt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-date-filter"]],features:[n.\u0275\u0275ProvidersFeature([{provide:de.NgbDateAdapter,useClass:Fu},{provide:de.NgbDateParserFormatter,useClass:Eu}]),n.\u0275\u0275InheritDefinitionFeature],decls:5,vars:8,consts:[[1,"input-group"],["ngbDatepicker","",3,"ngClass","placement","placeholder","formControl","startDate","ngModelChange"],["datepicker","ngbDatepicker"],[1,"input-group-append","align-items-end"],[3,"config"]],template:function(t,r){if(1&t&&(n.\u0275\u0275elementStart(0,"div",0)(1,"input",1,2),n.\u0275\u0275listener("ngModelChange",function(s){return r.setModel(s)}),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(3,"span",3),n.\u0275\u0275element(4,"scrm-button",4),n.\u0275\u0275elementEnd()()),2&t){const o=n.\u0275\u0275reference(2);n.\u0275\u0275advance(1),n.\u0275\u0275classProp("is-invalid",r.field.formControl.invalid&&r.field.formControl.touched),n.\u0275\u0275property("ngClass",r.klass)("placement",r.getPlacement())("placeholder",r.getDateFormat().toLowerCase())("formControl",r.field.formControl)("startDate",r.dateModel),n.\u0275\u0275advance(3),n.\u0275\u0275property("config",r.getOpenButton(o))}},dependencies:[F.NgClass,Ce.DefaultValueAccessor,Ce.NgControlStatus,de.NgbInputDatepicker,Nn,Ce.FormControlDirective],encapsulation:2})}return i})();function b4(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"span"),n.\u0275\u0275text(1),n.\u0275\u0275pipe(2,"date"),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",n.\u0275\u0275pipeBind3(2,1,e.toDateTime(e.field.value),e.getDateTimeFormat(),e.getUserTimeZone())," ")}}function C4(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,b4,3,5,"span",0),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.field.value)}}let dc=(()=>{class i extends ka{formatter;typeFormatter;logic;logicDisplay;constructor(e,t,r,o){super(e,t,r,o),this.formatter=e,this.typeFormatter=t,this.logic=r,this.logicDisplay=o}getUserTimeZone(){return this.formatter.userTimeZone()}toDateTime(e){return this.formatter.toDateTime(e,this.formatter.getInternalFormat(),{zone:"GMT"}).toJSDate()}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(lr),n.\u0275\u0275directiveInject(it),n.\u0275\u0275directiveInject(ft),n.\u0275\u0275directiveInject(pt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-datetime-detail"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:2,vars:3,consts:[[4,"ngIf"]],template:function(t,r){1&t&&(n.\u0275\u0275template(0,C4,2,1,"ng-container",0),n.\u0275\u0275pipe(1,"async")),2&t&&n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(1,1,r.vm$))},dependencies:[F.NgIf,F.AsyncPipe,F.DatePipe],encapsulation:2})}return i})(),pb=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule]})}return i})();function M4(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"div")(1,"div")(2,"ngb-datepicker",5),n.\u0275\u0275listener("dateSelect",function(r){n.\u0275\u0275restoreView(e);const o=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(o.onDateChange(r))}),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(3,"div",6)(4,"ngb-timepicker",7),n.\u0275\u0275listener("ngModelChange",function(r){n.\u0275\u0275restoreView(e);const o=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(o.onTimeChange(r))}),n.\u0275\u0275elementEnd()()()}if(2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(2),n.\u0275\u0275property("ngModel",e.dateTimeModel.date)("startDate",e.dateTimeModel.date),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngModel",e.dateTimeModel.time)("seconds",e.dateTimeModel.displaySeconds)("hourStep",e.dateTimeModel.hourStep)("minuteStep",e.dateTimeModel.minuteStep)("secondStep",e.dateTimeModel.secondStep)}}let mb=(()=>{class i extends ka{formatter;typeFormatter;calendar;config;logic;logicDisplay;popover;dateTimeModel=new Gi;constructor(e,t,r,o,s,c){super(e,t,s,c),this.formatter=e,this.typeFormatter=t,this.calendar=r,this.config=o,this.logic=s,this.logicDisplay=c,o.autoClose="outside",o.placement=this.getPlacement()}ngOnInit(){super.ngOnInit();let t="";if((this.field&&this.field.criteria&&this.field.criteria.values||[]).length>0&&(t=this.field.criteria.values[0]),(0,M.isEmptyString)(t))this.dateTimeModel.date=this.calendar.getToday(),this.dateTimeModel.time={hour:0,minute:0,second:0},this.field.formControl.setValue(null);else{if(this.dateTimeModel=Gi.internalToDateTimeStruct(this.formatter,t),null===this.dateTimeModel)return void this.field.formControl.setValue(null);this.setFormValues(this.dateTimeModel.toUserFormat(this.formatter))}this.formatter.getTimeFormat().includes("ss")&&(this.dateTimeModel.displaySeconds=!0),this.subscribeValueChanges()}ngOnDestroy(){this.unsubscribeAll()}setFormValues(e){this.field.formControl.setValue(e),this.field.formControl.markAsDirty()}setFieldValue(e){this.field.value=e,this.field.criteria.operator="=",this.field.criteria.values=[e]}onDateChange(e){this.dateTimeModel.date=e,this.setFormValues(this.dateTimeModel.toUserFormat(this.formatter))}onTimeChange(e){this.dateTimeModel.time=e,this.setFormValues(this.dateTimeModel.toUserFormat(this.formatter))}onInputChange(e){const t=Gi.toDateTimeStruct(this.formatter,e.target.value);t&&(this.dateTimeModel=t)}getOpenButton(){return{klass:"btn btn-sm btn-outline-secondary m-0 border-0",icon:"calendar"}}getPlacement(){return["bottom-right","top-right","bottom-left","top-left"]}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(lr),n.\u0275\u0275directiveInject(it),n.\u0275\u0275directiveInject(de.NgbCalendar),n.\u0275\u0275directiveInject(de.NgbPopoverConfig),n.\u0275\u0275directiveInject(ft),n.\u0275\u0275directiveInject(pt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-datetime-filter"]],viewQuery:function(t,r){if(1&t&&n.\u0275\u0275viewQuery(de.NgbPopover,7),2&t){let o;n.\u0275\u0275queryRefresh(o=n.\u0275\u0275loadQuery())&&(r.popover=o.first)}},features:[n.\u0275\u0275InheritDefinitionFeature],decls:6,vars:7,consts:[[1,"input-group","mr-2"],[3,"ngClass","placeholder","formControl","change"],[1,"input-group-append"],[3,"config","ngbPopover"],["calendarContent",""],["name","datepicker",3,"ngModel","startDate","dateSelect"],[1,"d-flex","justify-content-center","mt-auto"],["name","timepicker",3,"ngModel","seconds","hourStep","minuteStep","secondStep","ngModelChange"]],template:function(t,r){if(1&t&&(n.\u0275\u0275elementStart(0,"div",0)(1,"input",1),n.\u0275\u0275listener("change",function(s){return r.onInputChange(s)}),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(2,"div",2),n.\u0275\u0275element(3,"scrm-button",3),n.\u0275\u0275elementEnd()(),n.\u0275\u0275template(4,M4,5,7,"ng-template",null,4,n.\u0275\u0275templateRefExtractor)),2&t){const o=n.\u0275\u0275reference(5);n.\u0275\u0275advance(1),n.\u0275\u0275classProp("is-invalid",r.field.formControl.invalid&&r.field.formControl.touched),n.\u0275\u0275property("ngClass",r.klass)("placeholder",r.getDateTimeFormat().toLowerCase())("formControl",r.field.formControl),n.\u0275\u0275advance(2),n.\u0275\u0275property("config",r.getOpenButton())("ngbPopover",o)}},dependencies:[F.NgClass,Ce.DefaultValueAccessor,Ce.NgControlStatus,Ce.NgModel,de.NgbDatepicker,de.NgbTimepicker,Nn,Ce.FormControlDirective,de.NgbPopover],encapsulation:2})}return i})(),gb=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Ce.FormsModule,de.NgbDatepickerModule,de.NgbTimepickerModule,fn,Xt,Ce.ReactiveFormsModule,de.NgbModule]})}return i})();function S4(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"li"),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&i){const e=a.$implicit;n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(e.label)}}let fc=(()=>{class i extends ic{languages;typeFormatter;logic;logicDisplay;constructor(e,t,r,o){super(e,t,r,o),this.languages=e,this.typeFormatter=t,this.logic=r,this.logicDisplay=o}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(Oe),n.\u0275\u0275directiveInject(it),n.\u0275\u0275directiveInject(ft),n.\u0275\u0275directiveInject(pt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-multienum-detail"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:2,vars:1,consts:[[4,"ngFor","ngForOf"]],template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"ul"),n.\u0275\u0275template(1,S4,2,1,"li",0),n.\u0275\u0275elementEnd()),2&t&&(n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",r.selectedValues))},dependencies:[F.NgForOf],encapsulation:2})}return i})();const D4=["tag"];let Pa=(()=>{class i extends Ti{languages;typeFormatter;logic;logicDisplay;tag;constructor(e,t,r,o){super(e,t,r,o),this.languages=e,this.typeFormatter=t,this.logic=r,this.logicDisplay=o}ngOnInit(){this.checkAndInitAsDynamicEnum(),super.ngOnInit()}onAdd(e){if(e&&e.value)return this.field.value=e.value,this.field.formControl.setValue(e.value),void this.field.formControl.markAsDirty();this.field.value="",this.field.formControl.setValue(""),this.field.formControl.markAsDirty(),this.selectedValues=[]}onRemove(){this.field.value="",this.field.formControl.setValue(""),this.field.formControl.markAsDirty(),setTimeout(()=>{this.tag.focus(!0,!0),this.tag.dropdown.show()},200)}getPlaceholderLabel(){return this.languages.getAppString("LBL_SELECT_ITEM")||""}selectFirstElement(){const e=this.tag.dropdown.items;if(0!==e.length){const t=e[0];this.selectedValues.push(t),this.onAdd(t),this.tag.dropdown.hide()}}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(Oe),n.\u0275\u0275directiveInject(it),n.\u0275\u0275directiveInject(ft),n.\u0275\u0275directiveInject(pt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-enum-edit"]],viewQuery:function(t,r){if(1&t&&n.\u0275\u0275viewQuery(D4,5),2&t){let o;n.\u0275\u0275queryRefresh(o=n.\u0275\u0275loadQuery())&&(r.tag=o.first)}},features:[n.\u0275\u0275InheritDefinitionFeature],decls:3,vars:15,consts:[["maxItems","1",3,"ngModel","onlyFromAutocomplete","clearOnBlur","displayBy","identifyBy","placeholder","secondaryPlaceholder","inputClass","ngModelChange","onAdd","onRemove","keyup.enter"],["tag",""],[3,"displayBy","identifyBy","showDropdownIfEmpty","keepOpen","autocompleteItems"]],template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"tag-input",0,1),n.\u0275\u0275listener("ngModelChange",function(s){return r.selectedValues=s})("onAdd",function(s){return r.onAdd(s)})("onRemove",function(){return r.onRemove()})("keyup.enter",function(){return r.selectFirstElement()}),n.\u0275\u0275element(2,"tag-input-dropdown",2),n.\u0275\u0275elementEnd()),2&t&&(n.\u0275\u0275classMap(r.getInvalidClass()),n.\u0275\u0275property("ngModel",r.selectedValues)("onlyFromAutocomplete",!0)("clearOnBlur",!0)("displayBy","label")("identifyBy","value")("placeholder",r.getPlaceholderLabel())("secondaryPlaceholder",r.getPlaceholderLabel())("inputClass",r.getInvalidClass()),n.\u0275\u0275advance(2),n.\u0275\u0275property("displayBy","label")("identifyBy","value")("showDropdownIfEmpty",!0)("keepOpen",!1)("autocompleteItems",r.options))},dependencies:[Tn.TagInputComponent,Tn.TagInputDropdown,Ce.NgControlStatus,Ce.NgModel],encapsulation:2})}return i})(),Iu=(()=>{class i extends cn{get checked(){return(0,M.isTrue)(this.field.value)}toggle(){let e="true";this.checked&&(e="false"),this.field.value=e,this.field.formControl.setValue(e),this.field.formControl.markAsDirty()}static \u0275fac=function(){let e;return function(r){return(e||(e=n.\u0275\u0275getInheritedFactory(i)))(r||i)}}();static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["ng-component"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:0,vars:0,template:function(t,r){},encapsulation:2})}return i})(),ea=(()=>{class i extends Iu{typeFormatter;logic;logicDisplay;constructor(e,t,r){super(e,t,r),this.typeFormatter=e,this.logic=t,this.logicDisplay=r}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(it),n.\u0275\u0275directiveInject(ft),n.\u0275\u0275directiveInject(pt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-boolean-detail"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:3,vars:1,consts:[[1,"checkbox-container"],["type","checkbox","disabled","","readonly","","aria-hidden","true",3,"checked"],[1,"checkmark"]],template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"label",0),n.\u0275\u0275element(1,"input",1)(2,"span",2),n.\u0275\u0275elementEnd()),2&t&&(n.\u0275\u0275advance(1),n.\u0275\u0275property("checked",r.checked))},encapsulation:2})}return i})(),_n=(()=>{class i{systemConfig;constructor(e){this.systemConfig=e}toFrontend(e){const t=this.getLegacyToFrontendMap();return t&&t[e]?t[e]:e}toLegacy(e){const t=this.getFrontendToLegacyMap();return t[e]?t[e]:e}isValid(e){let r=!1;return this.getFrontendToLegacyMap()[e]&&(r=!0),r}getLegacyToFrontendMap(){return this.systemConfig.getConfigValue("module_name_map")}getFrontendToLegacyMap(){const e=this.systemConfig.getConfigValue("module_name_map"),t={};return Object.keys(e).forEach(r=>{t[e[r]]=r}),t}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(dt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),ao=(()=>{class i{systemConfig;constructor(e){this.systemConfig=e}toFrontend(e){const t=this.getLegacyToFrontendMap();return t[e]?t[e]:e}toLegacy(e){const t=this.getFrontendToLegacyMap();return t[e]?t[e]:e}isValid(e){let r=!1;return this.getFrontendToLegacyMap()[e]&&(r=!0),r}getLegacyToFrontendMap(){return this.systemConfig.getConfigValue("action_name_map")}getFrontendToLegacyMap(){const e=this.systemConfig.getConfigValue("action_name_map"),t={};return Object.keys(e).forEach(r=>{t[e[r]]=r}),t}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(dt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const pc="./#";let wn=(()=>{class i{router;moduleNameMapper;actionNameMapper;constructor(e,t,r){this.router=e,this.moduleNameMapper=t,this.actionNameMapper=r}getModuleInfo(e,t){return t&&t.modules?t.modules[e]:null}getModuleLabel(e,t){if(!t||!t.moduleList||!e)return"";const r=e&&e.labelKey||"";return t.moduleList[r]||r}getModuleRoute(e){let t=e&&e.defaultRoute||"",r=null;return t.startsWith(pc)&&(r=t.replace(pc,""),t=null),{route:r,url:t,params:null}}navigate(e){const t=this.getActionRoute(e);return this.router.navigate([t.route],{queryParams:t.params})}getActionRoute(e){let t=e.url,r=null,o={},s=e?.process;if(t.startsWith(pc))if(r=t.replace(pc,""),t=null,e.params)o=e.params;else{const c=r.split("?");r=c[0];const l=c[1],u={};l&&l.split("&").forEach(d=>{const f=d.split("=");u[f[0]]=f[1]}),o=u}return{route:r,url:t,params:o,process:s}}getActionLabel(e,t,r,o=""){if(!(r&&r.modStrings&&t&&e))return"";let s=o;s||(s=t.labelKey);let c=r.modStrings[e]&&r.modStrings[e][s];return c||(c=r.appStrings&&r.appStrings[s]),!c&&t.module&&(c=r.modStrings[t.module]&&r.modStrings[t.module][s]),c||(c=r.modStrings.administration&&r.modStrings.administration[s]),c||""}getRecordRouterLink(e,t){return`/${e}/record/${t}`}navigateBack(e,t,r){let o=this.getReturnModule(r),s=this.getReturnAction(r);const c=this.getReturnId(r);let l="";o&&(l+="/"+o),s&&(l+="/"+s),c&&(l+="/"+c),o===t&&"record"===s&&(l="/"+t+"/record/"+(c||e.id)),!l&&e&&e.id&&(l="/"+t+"/record/"+e.id),!l&&e&&e.id&&(l="/"+t),this.router.navigate([l]).then()}getReturnId(e){return e.return_id||""}getReturnAction(e){let t="";return e.return_action&&(t=this.actionNameMapper.toFrontend(e.return_action)),t}getReturnModule(e){let t="";return e.return_module&&(t=this.moduleNameMapper.toFrontend(e.return_module)),t}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Ft.Router),n.\u0275\u0275inject(_n),n.\u0275\u0275inject(ao))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function w4(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"a",3),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275propertyInterpolate1("href","mailto:",e.field.value,"",n.\u0275\u0275sanitizeUrl),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(e.field.value)}}function x4(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"a",4),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(e);const r=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(r.openEmail())}),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()}if(2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(e.field.value)}}let mc=(()=>{class i extends cn{typeFormatter;logic;logicDisplay;preferences;navigation;moduleNameMapper;actionNameMapper;appState;modalService;router;linkType;constructor(e,t,r,o,s,c,l,u,d,f){super(e,t,r),this.typeFormatter=e,this.logic=t,this.logicDisplay=r,this.preferences=o,this.navigation=s,this.moduleNameMapper=c,this.actionNameMapper=l,this.appState=u,this.modalService=d,this.router=f}ngOnInit(){this.linkType=this.preferences.getUserPreference("email_link_type")||"mailto"}openEmail(){const e=this.actionNameMapper.toLegacy(this.appState.getView()),t=this.moduleNameMapper.toLegacy(this.parent.module),r=this.parent.id;let c;"ListView"!==e&&"index"!==e&&(c=r),this.router.navigate(["emails","compose"],{queryParams:{return_module:t,return_action:e,return_id:c,to_addrs_names:this.field.value,parent_type:t,parent_name:this.parent.attributes.name,parent_id:r}})}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(it),n.\u0275\u0275directiveInject(ft),n.\u0275\u0275directiveInject(pt),n.\u0275\u0275directiveInject(Vt),n.\u0275\u0275directiveInject(wn),n.\u0275\u0275directiveInject(_n),n.\u0275\u0275directiveInject(ao),n.\u0275\u0275directiveInject(Gt),n.\u0275\u0275directiveInject(de.NgbModal),n.\u0275\u0275directiveInject(Ft.Router))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-email-list"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:3,vars:2,consts:[[1,"mailto-field"],[3,"href",4,"ngIf"],["class","clickable field-link",3,"click",4,"ngIf"],[3,"href"],[1,"clickable","field-link",3,"click"]],template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"div",0),n.\u0275\u0275template(1,w4,2,2,"a",1),n.\u0275\u0275template(2,x4,2,1,"a",2),n.\u0275\u0275elementEnd()),2&t&&(n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf","mailto"===r.linkType),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf","sugar"===r.linkType))},dependencies:[F.NgIf],encapsulation:2})}return i})(),hb=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule]})}return i})(),Au=(()=>{class i extends cn{typeFormatter;logic;logicDisplay;constructor(e,t,r){super(e,t,r),this.typeFormatter=e,this.logic=t,this.logicDisplay=r}ngOnInit(){super.ngOnInit();let e="";this.field.criteria&&this.field.criteria.values&&this.field.criteria.values.length>0&&(e=this.field.criteria.values[0]),e=(0,M.isVoid)(e)?"":e.trim(),this.field.value=e;const t=this.typeFormatter.toUserFormat(this.field.type,e,{mode:"edit"});this.field.formControl.setValue(t),this.field.formControl.markAsDirty(),this.subscribeValueChanges()}ngOnDestroy(){this.unsubscribeAll()}setFieldValue(e){this.field.value=e,this.field.criteria.operator="=",this.field.criteria.values=[e]}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(it),n.\u0275\u0275directiveInject(ft),n.\u0275\u0275directiveInject(pt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-varchar-filter"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:1,vars:5,consts:[["type","text",3,"formControl","value","ngClass"]],template:function(t,r){1&t&&n.\u0275\u0275element(0,"input",0),2&t&&(n.\u0275\u0275classProp("is-invalid",r.field.formControl.invalid&&r.field.formControl.touched),n.\u0275\u0275property("formControl",r.field.formControl)("value",r.field.value)("ngClass",r.klass))},dependencies:[F.NgClass,Ce.DefaultValueAccessor,Ce.NgControlStatus,Ce.FormControlDirective],encapsulation:2})}return i})(),vb=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Tn.TagInputModule,Ce.FormsModule]})}return i})(),_b=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Ce.FormsModule]})}return i})(),yb=(()=>{class i{getDownloadEntrypointLink(e,t){return"./index.php"+this.buildQueryString({entryPoint:"download",id:e,type:t})}buildQueryString(e,t=[]){let r=new Ar.HttpParams;return Object.keys(e).forEach(o=>{t.includes(o)||(r=r.set(o,e[o]))}),r.keys().length>0?"?"+r.toString():""}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Tu=(()=>{class i extends cn{typeFormatter;logic;logicDisplay;legacyEntrypointLinkBuilder;filenameLink="";constructor(e,t,r,o){super(e,t,r),this.typeFormatter=e,this.logic=t,this.logicDisplay=r,this.legacyEntrypointLinkBuilder=o}ngOnInit(){this.filenameLink=this.legacyEntrypointLinkBuilder.getDownloadEntrypointLink(this.record.id,this.record.module)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(it),n.\u0275\u0275directiveInject(ft),n.\u0275\u0275directiveInject(pt),n.\u0275\u0275directiveInject(yb))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-file-detail"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:3,vars:2,consts:[[1,"clickable","field-link",3,"href"]],template:function(t,r){1&t&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"a",0),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()),2&t&&(n.\u0275\u0275advance(1),n.\u0275\u0275property("href",r.filenameLink,n.\u0275\u0275sanitizeUrl),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",r.field.value," "))},encapsulation:2})}return i})(),bb=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Ft.RouterModule]})}return i})(),Nu=(()=>{class i extends F.DecimalPipe{formatter;locale;constructor(e,t){super(t),this.formatter=e,this.locale=t}transform(e,t,r){return e?this.formatter.toUserFormat(""+e):null}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(to,16),n.\u0275\u0275directiveInject(n.LOCALE_ID,16))};static \u0275pipe=n.\u0275\u0275definePipe({name:"formatNumber",type:i,pure:!0})}return i})();function E4(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275text(1),n.\u0275\u0275pipe(2,"formatNumber"),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",n.\u0275\u0275pipeBind1(2,1,e.field.value),"\n")}}let gc=(()=>{class i extends sc{userPreferences;systemConfig;typeFormatter;logic;logicDisplay;constructor(e,t,r,o,s){super(e,t,r,o,s),this.userPreferences=e,this.systemConfig=t,this.typeFormatter=r,this.logic=o,this.logicDisplay=s}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(Vt),n.\u0275\u0275directiveInject(dt),n.\u0275\u0275directiveInject(it),n.\u0275\u0275directiveInject(ft),n.\u0275\u0275directiveInject(pt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-float-detail"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:2,vars:3,consts:[[4,"ngIf"]],template:function(t,r){1&t&&(n.\u0275\u0275template(0,E4,3,3,"ng-container",0),n.\u0275\u0275pipe(1,"async")),2&t&&n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(1,1,r.vm$))},dependencies:[F.NgIf,F.AsyncPipe,Nu],encapsulation:2})}return i})(),Lu=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule]})}return i})(),Cb=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Lu]})}return i})();const F4=["tag"];let hc=(()=>{class i extends Ti{languages;typeFormatter;logic;logicDisplay;tag;constructor(e,t,r,o){super(e,t,r,o),this.languages=e,this.typeFormatter=t,this.logic=r,this.logicDisplay=o}ngOnInit(){this.field.value="",this.field.criteria.values&&this.field.criteria.values.length>0&&(this.field.value=this.field.criteria.values[0]),super.ngOnInit()}onAdd(e){if(e&&e.value)return this.field.value=e.value,this.field.formControl.setValue(e.value),this.field.formControl.markAsDirty(),this.field.criteria.operator="=",void(this.field.criteria.values=[e.value]);this.field.value="",this.field.formControl.setValue(""),this.field.formControl.markAsDirty(),this.selectedValues=[],this.field.criteria.operator="",this.field.criteria.values=[]}onRemove(){this.field.value="",this.field.formControl.setValue(""),this.field.formControl.markAsDirty(),this.field.criteria.operator="",this.field.criteria.values=[],setTimeout(()=>{this.tag.focus(!0,!0),this.tag.dropdown.show()},200)}getPlaceholderLabel(){return this.languages.getAppString("LBL_SELECT_ITEM")||""}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(Oe),n.\u0275\u0275directiveInject(it),n.\u0275\u0275directiveInject(ft),n.\u0275\u0275directiveInject(pt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-boolean-filter"]],viewQuery:function(t,r){if(1&t&&n.\u0275\u0275viewQuery(F4,5),2&t){let o;n.\u0275\u0275queryRefresh(o=n.\u0275\u0275loadQuery())&&(r.tag=o.first)}},features:[n.\u0275\u0275InheritDefinitionFeature],decls:3,vars:15,consts:[["maxItems","1",3,"ngModel","clearOnBlur","displayBy","identifyBy","inputClass","onlyFromAutocomplete","placeholder","secondaryPlaceholder","onAdd","onRemove","ngModelChange"],["tag",""],[3,"autocompleteItems","displayBy","identifyBy","keepOpen","showDropdownIfEmpty"]],template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"tag-input",0,1),n.\u0275\u0275listener("onAdd",function(s){return r.onAdd(s)})("onRemove",function(){return r.onRemove()})("ngModelChange",function(s){return r.selectedValues=s}),n.\u0275\u0275element(2,"tag-input-dropdown",2),n.\u0275\u0275elementEnd()),2&t&&(n.\u0275\u0275classMap(r.getInvalidClass()),n.\u0275\u0275property("ngModel",r.selectedValues)("clearOnBlur",!0)("displayBy","label")("identifyBy","value")("inputClass",r.getInvalidClass())("onlyFromAutocomplete",!0)("placeholder",r.getPlaceholderLabel())("secondaryPlaceholder",r.getPlaceholderLabel()),n.\u0275\u0275advance(2),n.\u0275\u0275property("autocompleteItems",r.options)("displayBy","label")("identifyBy","value")("keepOpen",!1)("showDropdownIfEmpty",!0))},dependencies:[Ce.NgControlStatus,Ce.NgModel,Tn.TagInputComponent,Tn.TagInputDropdown],encapsulation:2})}return i})(),Mb=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Ce.FormsModule,Ce.ReactiveFormsModule]})}return i})(),Sb=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Ce.FormsModule,Ce.ReactiveFormsModule,Tn.TagInputModule]})}return i})(),vc=(()=>{class i extends cn{typeFormatter;logic;logicDisplay;constructor(e,t,r){super(e,t,r),this.typeFormatter=e,this.logic=t,this.logicDisplay=r}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(it),n.\u0275\u0275directiveInject(ft),n.\u0275\u0275directiveInject(pt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-relate-detail"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,template:function(t,r){1&t&&n.\u0275\u0275text(0),2&t&&n.\u0275\u0275textInterpolate1("\n",r.field.value,"\n")},encapsulation:2})}return i})(),Db=(()=>{class i{getConfig(e){return{klass:"light-filter",panelMode:"collapsible",isCollapsed:!0,collapseOnSearch:!0,savedFilterEdit:!1,displayHeader:!0,module:e.recordList.getModule(),filter$:e.recordList.criteria$.pipe((0,v.map)(t=>({key:"default",criteria:t}))),savedFilters$:(0,S.of)([]),searchFields$:e.searchMetadata$.pipe((0,v.map)(t=>{if(!t)return{};let r="advanced";return t.layout.advanced||(r="basic"),t.layout[r]})),listFields:[],onClose:()=>{},onSearch:()=>{},updateFilter:(t,r=!0)=>{e.recordList.updateSearchCriteria(t.criteria,r)},resetFilter:t=>{e.recordList.resetSearchCriteria(t)},addSavedFilter:t=>{},removeSavedFilter:t=>{},setOpenFilter:t=>{}}}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})();class wb{systemConfigs;preferences;constructor(a,e){this.systemConfigs=a,this.preferences=e}getTable(a,e=!1){const t={showHeader:!0,showFooter:!0,klass:"light-table",module:a.recordList.getModule(),columns:a.columns$.pipe((0,v.map)(r=>this.mapColumns(a,r))),sort$:a.recordList.sort$,maxColumns$:(0,S.of)(5),loading$:a.recordList.loading$,dataSource:a.recordList,pagination:a.recordList,toggleRecordSelection:r=>{a.recordList.toggleSelection(r)},updateSorting:(r,o)=>{a.recordList.updateSorting(r,o),a.saveCurrentSort()},maxListHeight:this.preferences.getUserPreference("record_modal_max_height")??this.systemConfigs.getConfigValue("record_modal_max_height"),paginationType:this.preferences.getUserPreference("record_modal_pagination_type")??this.systemConfigs.getConfigValue("record_modal_pagination_type"),loadMore:()=>{const r=this.preferences.getUserPreference("list_max_entries_per_modal")??this.systemConfigs.getConfigValue("list_max_entries_per_modal"),o=a.recordList.getPagination(),c=Number(o.pageSize||0)+Number(r);a.recordList.setPageSize(c),a.recordList.updatePagination(o.current)},allLoaded:()=>{const r=a.recordList.getPagination();return!!r&&(Number(r.pageLast)>=Number(r.total)||Number(r.pageSize)>=Number(r.total))}};return e&&(t.selection$=a.recordList.selection$,t.selectedCount$=a.recordList.selectedCount$,t.selectedStatus$=a.recordList.selectedStatus$),t}mapColumns(a,e){const t=[];return e.forEach(r=>{const o={...r};o.metadata={...r.metadata||{}},this.disableRelateFieldsLink(o),this.addLinkSelectHandler(a,o),t.push(o)}),t}disableRelateFieldsLink(a){"relate"===a.type&&(a.link=!1,a.metadata.link=!1)}addLinkSelectHandler(a,e){e.link&&(e.metadata.onClick=(t,r)=>{a.recordList.clearSelection(),a.recordList.toggleSelection(r.id),a.emitLinkClicked()})}}let so=(()=>{class i{screenSize;systemConfigStore;screen=kn.Medium;maxColumns=5;constructor(e,t){this.screenSize=e,this.systemConfigStore=t}getMaxColumns(e){return e.pipe((0,S.combineLatestWith)(this.screenSize.screenSize$),(0,v.map)(([t,r])=>(r&&(this.screen=r),this.calculateMaxColumns(t))),(0,v.distinctUntilChanged)())}calculateMaxColumns(e=!0){let t;if(t=this.systemConfigStore.getConfigValue("listview_column_limits"),t=e?t.with_sidebar:t.without_sidebar,this.screen&&t){const r=t[this.screen];r&&(this.maxColumns=r)}return this.maxColumns}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(ai),n.\u0275\u0275inject(dt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),_c=(()=>{class i{apollo;fieldsMetadata={fields:["id","_id","meta","records"]};constructor(e){this.apollo=e}fetch(e,t,r,o,s,c){const u={query:fe.gql`
              query getRecordList($module: String!, $limit: Int, $offset: Int, $criteria: Iterable, $sort: Iterable) {
                getRecordList(module: $module, limit: $limit, offset: $offset, criteria: $criteria, sort: $sort) {
                  ${c.fields.join("\n")}
                }
              }
            `,variables:{module:e,limit:t,offset:r,criteria:o,sort:s}};return this.apollo.query(u)}get(e,t,r,o){const s=this.mapSort(r);return this.fetch(e,o.pageSize,o.current,t,s,this.fieldsMetadata).pipe((0,v.map)(({data:c})=>{const l={records:[],pagination:{...o}};if(!c||!c.getRecordList)return l;const u=c.getRecordList;if(u.records&&u.records.forEach(d=>{l.records.push(this.mapRecord(d))}),!u.meta)return l;if(u.meta.offsets){const d={current:"current",next:"next",prev:"previous",total:"total",end:"last"};Object.keys(d).forEach(f=>{f in u.meta.offsets&&(l.pagination[d[f]]=u.meta.offsets[f])})}return l.meta=u.meta,l}))}mapSort(e){return{sortOrder:{NONE:"",ASC:"ASC",DESC:"DESC"}[e.sortOrder],orderBy:e.orderBy}}mapRecord(e){return e}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(fe.Apollo))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const Bu={key:"default",module:"saved-search",attributes:{contents:""},criteria:{name:"default",filters:{}}},I4={default:(0,M.deepClone)(Bu)},yc={filters:{}},bc={orderBy:"",sortOrder:M.SortDirection.DESC},Cc={all:!1,status:M.SelectionStatus.NONE,selected:{},count:0},A4={module:"",records:[],criteria:(0,M.deepClone)(yc),activeFilters:(0,M.deepClone)(I4),sort:(0,M.deepClone)(bc),pagination:{pageSize:5,current:0,previous:0,next:5,last:0,total:0,pageFirst:0,pageLast:0},selection:(0,M.deepClone)(Cc),openFilter:(0,M.deepClone)(Bu),loading:!1,meta:{}};let Ou=(()=>{class i{listGQL;configStore;preferencesStore;languageStore;message;records$;criteria$;sort$;pagination$;selection$;selectedCount$;selectedStatus$;activeFilters$;openFilter$;loading$;cache$=null;internalState=(0,M.deepClone)(A4);store=new S.BehaviorSubject(this.internalState);state$=this.store.asObservable();preferencesSub;preferenceKey;baseFilter;baseFilterMap;constructor(e,t,r,o,s){this.listGQL=e,this.configStore=t,this.preferencesStore=r,this.languageStore=o,this.message=s,this.records$=this.state$.pipe((0,v.map)(c=>c.records),(0,v.distinctUntilChanged)()),this.criteria$=this.state$.pipe((0,v.map)(c=>c.criteria),(0,v.distinctUntilChanged)()),this.sort$=this.state$.pipe((0,v.map)(c=>c.sort),(0,v.distinctUntilChanged)()),this.pagination$=this.state$.pipe((0,v.map)(c=>c.pagination),(0,v.distinctUntilChanged)()),this.selection$=this.state$.pipe((0,v.map)(c=>c.selection),(0,v.distinctUntilChanged)()),this.selectedCount$=this.state$.pipe((0,v.map)(c=>c.selection.count),(0,v.distinctUntilChanged)()),this.selectedStatus$=this.state$.pipe((0,v.map)(c=>c.selection.status),(0,v.distinctUntilChanged)()),this.activeFilters$=this.state$.pipe((0,v.map)(c=>c.activeFilters),(0,v.distinctUntilChanged)()),this.openFilter$=this.state$.pipe((0,v.map)(c=>c.openFilter),(0,v.distinctUntilChanged)()),this.loading$=this.state$.pipe((0,v.map)(c=>c.loading))}connect(){return this.records$}disconnect(){}get criteria(){return(0,M.deepClone)(this.internalState.criteria?this.internalState.criteria:yc)}set criteria(e){this.updateState({...this.internalState,criteria:e})}get activeFilters(){return(0,M.deepClone)(this.internalState.activeFilters)}get sort(){return(0,M.deepClone)(this.internalState.sort?this.internalState.sort:bc)}set sort(e){this.updateState({...this.internalState,sort:e})}get selection(){return(0,M.deepClone)(this.internalState.selection?this.internalState.selection:Cc)}get records(){return this.internalState.records?this.internalState.records:[]}getModule(){return this.internalState.module}getRecord(e){let t=null;return this.records.some(r=>{if(r.id===e)return t=r,!0}),t}destroy(){this.clear()}init(e,t=!0,r="list_max_entries_per_page",o=(0,M.deepClone)(Bu),s=""){return this.internalState.module=e,this.preferenceKey=s,r&&this.watchPageSize(r),this.setBaseFilter(o),this.loadCurrentFilter(e),!1===t?null:this.load()}setBaseFilter(e){this.baseFilterMap={default:(0,M.deepClone)(e)},this.baseFilter=(0,M.deepClone)(e),this.updateState({...this.internalState,activeFilters:(0,M.deepClone)(this.baseFilterMap),openFilter:(0,M.deepClone)(this.baseFilter)})}loadCurrentFilter(e){const t=this.loadPreference(e,"current-filters")??this.baseFilterMap;if(!t||(0,M.emptyObject)(t))return;let r=this.loadPreference(e,"current-sort");!r&&(0,M.emptyObject)(r)&&(r=null),this.setFilters(t,!1,r)}setFilters(e,t=!0,r=null){const s=e[Object.keys(e).shift()];if(this.updateState({...this.internalState,activeFilters:(0,M.deepClone)(e),openFilter:(0,M.deepClone)(s)}),s.criteria){let c=s.criteria.orderBy??"",u=this.mapSortOrder(s.criteria.sortOrder??"desc");null!==r&&(c=r.orderBy,u=r.sortOrder),this.updateSorting(c,u,!1),this.updateSortLocalStorage(),this.updateSearchCriteria(s.criteria,t)}this.updateFilterLocalStorage()}updateFilterLocalStorage(){this.savePreference(this.internalState.module,"current-filters",this.internalState.activeFilters)}updateSortLocalStorage(){this.savePreference(this.internalState.module,"current-sort",this.sort)}load(e=!0){return this.updateState({...this.internalState,loading:!0}),this.getRecords(this.internalState.module,this.internalState.criteria,this.internalState.sort,this.internalState.pagination,e).pipe((0,v.catchError)(()=>(this.message.addDangerMessageByKey("LBL_GET_RECORD_LIST_ERROR"),(0,S.of)({records:[],criteria:(0,M.deepClone)(yc),sort:(0,M.deepClone)(bc),pagination:{pageSize:5,current:0,previous:0,next:5,last:0,total:0,pageFirst:0,pageLast:0},openFilter:(0,M.deepClone)(this.baseFilter),activeFilters:(0,M.deepClone)(this.baseFilterMap),selection:(0,M.deepClone)(Cc),meta:{}}))),(0,v.tap)(t=>{this.calculatePageCount(t.records,t.pagination),this.updateState({...this.internalState,records:t.records,pagination:t.pagination,loading:!1,meta:t.meta??{}})}))}updateSearchCriteria(e,t=!0){this.updateState({...this.internalState,criteria:e}),t&&(this.updateSelection(M.SelectionStatus.NONE),this.resetPagination())}resetSearchCriteria(e=!0){this.updateSearchCriteria((0,M.deepClone)(yc),e)}updateSorting(e,t,r=!0){t===M.SortDirection.NONE&&(e="",t=M.SortDirection.DESC),this.updateState({...this.internalState,sort:{orderBy:e,sortOrder:t}}),r&&this.load(!1).pipe((0,v.take)(1)).subscribe()}mapSortOrder(e){let t=M.SortDirection.NONE;const r=e.toLowerCase();return"asc"===r?t=M.SortDirection.ASC:"desc"===r&&(t=M.SortDirection.DESC),t}updatePagination(e){const t={...this.internalState.pagination,current:e};this.updateState({...this.internalState,pagination:t}),this.load(!1).pipe((0,v.take)(1)).subscribe()}setOpenFilter(e){this.updateState({...this.internalState,openFilter:(0,M.deepClone)(e)})}resetFilters(e=!0){this.updateState({...this.internalState,activeFilters:(0,M.deepClone)(this.baseFilterMap),openFilter:(0,M.deepClone)(this.baseFilter)}),this.clearSort(),this.updateSortLocalStorage(),this.updateFilterLocalStorage(),this.updateSearchCriteria(this.baseFilter.criteria,e)}savePreference(e,t,r){const o=this.preferenceKey??null;if(!o)return null;this.preferencesStore.setUi(e,`${o}${t}`,r)}loadPreference(e,t){const r=this.preferenceKey??null;return r?this.preferencesStore.getUi(e,`${r}${t}`):null}resetPagination(){this.updatePagination(0)}clear(){this.cache$=null,this.store.unsubscribe(),this.preferencesSub.unsubscribe()}clearAuthBased(){this.clear()}getSelectionStatus(){return this.selectedStatus$}getSelectedCount(){return this.selectedCount$}updateSelection(e){e!==M.SelectionStatus.NONE?e!==M.SelectionStatus.ALL?e!==M.SelectionStatus.PAGE||this.selectPage():this.selectAll():this.clearSelection()}clearSelection(){this.updateState({...this.internalState,selection:(0,M.deepClone)(Cc)})}clearSort(){this.updateState({...this.internalState,sort:(0,M.deepClone)(bc)})}selectAll(){this.updateState({...this.internalState,selection:{all:!0,status:M.SelectionStatus.ALL,selected:{},count:this.internalState.pagination.total}})}selectPage(){const e={...this.internalState.selection.selected};this.internalState.records&&this.internalState.records.length&&this.internalState.records.forEach(t=>{t&&t.id&&(e[t.id]=t.id)}),this.updateState({...this.internalState,selection:{all:!1,status:M.SelectionStatus.SOME,selected:e,count:Object.keys(e).length}})}toggleSelection(e){const t=(0,M.deepClone)(this.internalState.selection);t.selected[e]?delete t.selected[e]:t.selected[e]=e,t.count=Object.keys(t.selected).length,t.status=0===t.count?M.SelectionStatus.NONE:M.SelectionStatus.SOME,this.updateState({...this.internalState,selection:t})}getPaginationCount(){return this.pagination$.pipe((0,v.map)(e=>({pageFirst:e.pageFirst,pageLast:e.pageLast,total:e.total})),(0,v.distinctUntilChanged)())}getPagination(){return this.store.value.pagination}getMeta(){return this.store.value.meta}changePage(e){let t=0;const r={};if(r[M.PageSelection.FIRST]=0,r[M.PageSelection.PREVIOUS]=this.internalState.pagination.previous,r[M.PageSelection.NEXT]=this.internalState.pagination.next,r[M.PageSelection.LAST]=this.internalState.pagination.last,e in r&&r[e]>=0){if(t=r[e],Number(t)>this.internalState.pagination.last||t<0)return;this.updatePagination(t)}}setPageSize(e){const t={...this.internalState.pagination,pageSize:e};this.updateState({...this.internalState,pagination:t})}getPageSize(){return this?.internalState?.pagination?.pageSize??10}watchPageSize(e){const t=this.preferencesStore.getUserPreference(e),r=this.configStore.getConfigValue(e);this.determinePageSize(t,r),this.preferencesSub=this.configStore.configs$.pipe((0,S.combineLatestWith)(this.preferencesStore.userPreferences$),(0,v.tap)(([o,s])=>{this.determinePageSize(s&&s[e]||null,o&&o[e]&&o[e].value||null)})).subscribe()}determinePageSize(e,t){let r=20;e?r=e:t&&(r=parseInt(t,10)),this.setPageSize(r)}updateState(e){this.store.next(this.internalState=e)}calculatePageCount(e,t){const r=e&&e.length||0;let o=0,s=0;r>0&&(o=t.current+1,s=t.current+r),t.pageFirst=o,t.pageLast=s}getRecords(e,t,r,o,s=!0){return(null==this.cache$||!1===s)&&(this.cache$=this.listGQL.get(e,t,r,o).pipe((0,v.shareReplay)(1))),this.cache$}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(_c),n.\u0275\u0275inject(dt),n.\u0275\u0275inject(Vt),n.\u0275\u0275inject(Oe),n.\u0275\u0275inject(ct))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),Ni=(()=>{class i{listGQL;configStore;preferencesStore;languageStore;message;constructor(e,t,r,o,s){this.listGQL=e,this.configStore=t,this.preferencesStore=r,this.languageStore=o,this.message=s}create(){return new Ou(this.listGQL,this.configStore,this.preferencesStore,this.languageStore,this.message)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(_c),n.\u0275\u0275inject(dt),n.\u0275\u0275inject(Vt),n.\u0275\u0275inject(Oe),n.\u0275\u0275inject(ct))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const Ru={module:"",detailView:{},editView:{},listView:{},search:{},recordView:{},subPanel:{},massUpdate:{},recentlyViewed:[],favorites:[]},xb={};let Mc=(0,M.deepClone)(Ru),ta=(0,M.deepClone)(xb);const Eb={};let co=(0,M.deepClone)(Eb),mt=(()=>{class i{recordGQL;appState;listViewColumns$;listViewLineActions$;listViewTableActions$;listMetadata$;searchMetadata$;recordViewMetadata$;metadata$;allModuleMetadata$;subPanelMetadata$;typeKeys={listView:"listView",search:"search",recordView:"recordView",subPanel:"subPanel",massUpdate:"massUpdate",recentlyViewed:"recentlyViewed",favorites:"favorites"};store=new S.BehaviorSubject(Mc);state$=this.store.asObservable();allModuleStore=new S.BehaviorSubject(ta);allModulesState$=this.allModuleStore.asObservable();resourceName="moduleMetadata";fieldsMetadata={fields:["id","_id"]};types=["listView","search","recordView","subPanel","massUpdate","recentlyViewed","favorites"];baseTypes=["listView","search","recordView","favorites"];constructor(e,t){this.recordGQL=e,this.appState=t,this.listViewColumns$=this.state$.pipe((0,v.map)(r=>r.listView.fields),(0,v.distinctUntilChanged)()),this.listViewLineActions$=this.state$.pipe((0,v.map)(r=>r.listView.lineActions),(0,v.distinctUntilChanged)()),this.listViewTableActions$=this.state$.pipe((0,v.map)(r=>r.listView.tableActions),(0,v.distinctUntilChanged)()),this.listMetadata$=this.state$.pipe((0,v.map)(r=>r.listView),(0,v.distinctUntilChanged)()),this.searchMetadata$=this.state$.pipe((0,v.map)(r=>r.search),(0,v.distinctUntilChanged)()),this.recordViewMetadata$=this.state$.pipe((0,v.map)(r=>r.recordView),(0,v.distinctUntilChanged)()),this.subPanelMetadata$=this.state$.pipe((0,v.map)(r=>r.subPanel),(0,v.distinctUntilChanged)()),this.metadata$=this.state$,this.allModuleMetadata$=this.allModulesState$}clear(){co=(0,M.deepClone)(Eb),ta=(0,M.deepClone)(xb),this.updateState("",(0,M.deepClone)(Ru))}clearAuthBased(){this.clear()}getMetadataTypes(){return this.types}getModule(){return Mc.module}get(){return Mc}getModuleMeta(e){return{...ta[e]??{}}}setModuleMetadata(e,t){co[e]=(0,S.of)(t).pipe((0,v.shareReplay)(1)),this.updateAllModulesState(e,t)}reloadModuleMetadata(e,t,r=!0){return t||(t=this.getMetadataTypes()),this.getMetadata(e,t,r).pipe((0,v.tap)(o=>{this.updateAllModulesState(e,o)}))}load(e,t,r=!0){return t||(t=this.getMetadataTypes()),this.getMetadata(e,t,r).pipe((0,v.tap)(o=>{this.updateState(e,o)}))}isCached(e){return null!==(co[e]??null)}getEmpty(){return(0,M.deepClone)(Ru)}set(e,t){co[e]=(0,S.of)(t).pipe((0,v.shareReplay)(1)),this.updateState(e,t)}getMetadata(e,t=null,r=!0){return(null==co[e]||!1===r)&&(co[e]=this.fetchMetadata(e,t).pipe((0,v.shareReplay)(1))),co[e]}mapMetadata(e,t){const o={...ta[e]??{}};return this.parseListViewMetadata(t,o),this.parseSearchMetadata(t,o),this.parseRecordViewMetadata(t,o),this.parseSubPanelMetadata(t,o),this.parseMassUpdateMetadata(t,o),this.parseRecentlyViewedMetadata(t,o),this.parseFavoritesMetadata(t,o),o}updateState(e,t){this.updateAllModulesState(e,t),this.store.next(Mc={...t,module:e})}updateAllModulesState(e,t){if(""!==e){const r={...ta};r[e]={...t},this.allModuleStore.next(ta=r)}}fetchMetadata(e,t){const r={fields:[...this.fieldsMetadata.fields,...t??this.baseTypes]};return this.recordGQL.fetch(this.resourceName,`/api/module-metadata/${e}`,r).pipe((0,v.map)(({data:o})=>this.mapMetadata(e,o.moduleMetadata)))}parseListViewMetadata(e,t){if(!e||!e.listView)return;const r={fields:[],bulkActions:{},lineActions:[],tableActions:[],chartTypes:{},filters:[]};e.listView.columns&&e.listView.columns.forEach(s=>{r.fields.push(s)}),this.addDefinedMeta(r,e.listView,{bulkActions:"bulkActions",lineActions:"lineActions",tableActions:"tableActions",sidebarWidgets:"sidebarWidgets",availableFilters:"filters",paginationType:"paginationType"}),t.listView=r}parseSearchMetadata(e,t){e&&e.search&&(t.search=e.search)}parseSubPanelMetadata(e,t){e&&e.subPanel&&(t.subPanel=e.subPanel)}parseMassUpdateMetadata(e,t){e&&e.massUpdate&&(t.massUpdate=e.massUpdate)}parseRecordViewMetadata(e,t){if(!e||!e.recordView)return;const r={actions:[],templateMeta:{},panels:[]};this.addDefinedMeta(r,e.recordView,{templateMeta:"templateMeta",actions:"actions",panels:"panels",topWidget:"topWidget",sidebarWidgets:"sidebarWidgets",bottomWidgets:"bottomWidgets",summaryTemplates:"summaryTemplates",vardefs:"vardefs"}),t.recordView=r}parseRecentlyViewedMetadata(e,t){e&&e.recentlyViewed&&(t.recentlyViewed=e.recentlyViewed)}parseFavoritesMetadata(e,t){e&&e.favorites&&(t.favorites=e.favorites)}addDefinedMeta(e,t,r){Object.keys(r).forEach(o=>{t[o]&&(e[r[o]]=t[o])})}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(zo),n.\u0275\u0275inject(Gt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Fb=(()=>{class i{listStoreFactory;meta;preferences;module="";parentModule="";recordList;listMetadata$;searchMetadata$;selection$;selectedCount$;selectedStatus$;columns$;listMetadata;linkClicked$;loading$;metadataLoading$;metadataLoadingState;linkClickedState;constructor(e,t,r){this.listStoreFactory=e,this.meta=t,this.preferences=r,this.recordList=e.create(),this.loading$=this.recordList.loading$,this.metadataLoadingState=new S.BehaviorSubject(!1),this.linkClickedState=new S.BehaviorSubject(!1),this.linkClicked$=this.linkClickedState.asObservable(),this.metadataLoading$=this.metadataLoadingState.asObservable(),this.selection$=this.recordList.selection$,this.selectedCount$=this.recordList.selectedCount$,this.selectedStatus$=this.recordList.selectedStatus$}clear(){this.recordList.clear(),this.recordList=null}clearAuthBased(){this.recordList.clearAuthBased()}init(e,t=""){this.module=e,this.parentModule=t,this.loadCurrentSort(),this.metadataLoadingState.next(!0);const r=this.meta.getMetadata(e).pipe((0,v.tap)(()=>{this.metadataLoadingState.next(!1),this.recordList.load().pipe((0,v.take)(1)).subscribe()}));this.listMetadata$=r.pipe((0,v.map)(o=>o.listView)),this.searchMetadata$=r.pipe((0,v.map)(o=>o.search)),this.recordList.init(e,!1,"list_max_entries_per_modal"),this.columns$=this.listMetadata$.pipe((0,v.map)(o=>o.fields))}load(e=!0){return this.recordList.load(e)}loadCurrentSort(){if(!this.parentModule)return;const e=this.loadPreference(this.parentModule,"current-sort");!e||(0,M.emptyObject)(e)||(this.recordList.sort=e)}saveCurrentSort(){this.parentModule&&this.savePreference(this.parentModule,"current-sort",this.recordList.sort)}emitLinkClicked(){this.linkClickedState.next(!0)}getPreferenceKey(e){return this.module+"-record-list-modal-"+e}savePreference(e,t,r){this.preferences.setUi(e,this.getPreferenceKey(t),r)}loadPreference(e,t){return this.preferences.getUi(e,this.getPreferenceKey(t))}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Ni),n.\u0275\u0275inject(mt),n.\u0275\u0275inject(Vt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),Ib=(()=>{class i{listStoreFactory;metadataStore;preferences;constructor(e,t,r){this.listStoreFactory=e,this.metadataStore=t,this.preferences=r}create(){return new Fb(this.listStoreFactory,this.metadataStore,this.preferences)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Ni),n.\u0275\u0275inject(mt),n.\u0275\u0275inject(Vt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function T4(i,a){1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275element(1,"scrm-label",3),n.\u0275\u0275elementContainerEnd())}function N4(i,a){if(1&i&&n.\u0275\u0275element(0,"scrm-list-filter",9),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("config",e.filterConfig)}}function L4(i,a){1&i&&n.\u0275\u0275element(0,"scrm-loading-spinner",11),2&i&&n.\u0275\u0275property("overlay",!0)}function B4(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,L4,1,1,"scrm-loading-spinner",10),n.\u0275\u0275elementContainerEnd()),2&i){const e=a.ngIf;n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e)}}function O4(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275element(1,"scrm-button",9),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("config",e.buildSelectButton())}}function R4(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"div")(2,"div",4)(3,"div",5)(4,"div",6),n.\u0275\u0275template(5,N4,1,1,"scrm-list-filter",7),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(6,"div",8)(7,"div",6),n.\u0275\u0275element(8,"scrm-table",9),n.\u0275\u0275elementEnd()()(),n.\u0275\u0275template(9,B4,2,1,"ng-container",2),n.\u0275\u0275pipe(10,"async"),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(11,O4,2,1,"ng-container",2),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(5),n.\u0275\u0275property("ngIf",e.filterConfig),n.\u0275\u0275advance(3),n.\u0275\u0275property("config",e.tableConfig),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(10,4,e.loading$)),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",e.multiSelect)}}let na=(()=>{class i{activeModal;storeFactory;languages;maxColumnCalculator;preferences;systemConfigs;titleKey="";module;parentModule;multiSelect=!1;multiSelectButtonLabel="LBL_SAVE";adapter=null;filterAdapter=null;loading$;closeButton;tableConfig;filterConfig;store;maxHeight;subs=[];constructor(e,t,r,o,s,c){this.activeModal=e,this.storeFactory=t,this.languages=r,this.maxColumnCalculator=o,this.preferences=s,this.systemConfigs=c,this.store=this.storeFactory.create()}ngOnInit(){this.closeButton={klass:["btn","btn-outline-light","btn-sm"],onClick:()=>{this.activeModal.close({type:"close-button"})}},this.init()}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}init(){this.module&&(this.initStore(),this.initTableAdapter(),this.initFilterAdapters())}getMaxColumns(){return this.maxColumnCalculator.getMaxColumns((0,S.of)(!0))}linkSelectedRecords(){this.activeModal.close({selection:this.store.recordList.selection,records:this.store.recordList.records})}buildSelectButton(){return{klass:["btn","btn-primary","btn-sm"],onClick:()=>{this.linkSelectedRecords()},labelKey:this.multiSelectButtonLabel}}initTableAdapter(){if(null===this.adapter&&(this.adapter=new wb(this.systemConfigs,this.preferences)),this.tableConfig=this.adapter.getTable(this.store,this.multiSelect),this.store?.listMetadata?.maxHeight&&(this.tableConfig.maxListHeight=this.store.listMetadata.maxHeight),!this.tableConfig?.maxListHeight){const e=this.systemConfigs.getConfigValue("ui")??{},t=this.systemConfigs.getConfigValue("record_modal_max_height")??"";this.tableConfig.maxListHeight=e.record_modal_max_height??t}this.tableConfig.maxColumns$=this.getMaxColumns()}initFilterAdapters(){null===this.filterAdapter&&(this.filterAdapter=new Db),this.filterConfig=this.filterAdapter.getConfig(this.store)}initStore(){this.store.init(this.module,this.parentModule??""),this.loading$=this.store.metadataLoading$,this.subs.push(this.store.linkClicked$.pipe((0,v.distinctUntilChanged)(),(0,v.skip)(1)).subscribe(e=>{e&&this.linkSelectedRecords()}))}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(de.NgbActiveModal),n.\u0275\u0275directiveInject(Ib),n.\u0275\u0275directiveInject(Oe),n.\u0275\u0275directiveInject(so),n.\u0275\u0275directiveInject(Vt),n.\u0275\u0275directiveInject(dt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-record-list-modal"]],inputs:{titleKey:"titleKey",module:"module",parentModule:"parentModule",multiSelect:"multiSelect",multiSelectButtonLabel:"multiSelectButtonLabel",adapter:"adapter",filterAdapter:"filterAdapter"},features:[n.\u0275\u0275ProvidersFeature([so])],decls:4,vars:5,consts:[["bodyKlass","m-0 small-font","footerKlass","border-0","headerKlass","border-0","klass","record-list-modal",3,"closable","close","title"],["modal-body",""],[4,"ngIf"],["labelKey","LBL_CONFIG_NO_CONFIG"],[1,"container-fluid"],[1,"row","pb-3"],[1,"col"],[3,"config",4,"ngIf"],[1,"row"],[3,"config"],[3,"overlay",4,"ngIf"],[3,"overlay"]],template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"scrm-modal",0)(1,"div",1),n.\u0275\u0275template(2,T4,2,0,"ng-container",2),n.\u0275\u0275template(3,R4,12,6,"ng-container",2),n.\u0275\u0275elementEnd()()),2&t&&(n.\u0275\u0275property("closable",!0)("close",r.closeButton)("title",r.titleKey),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",!r.tableConfig),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.tableConfig))},encapsulation:2,data:{animation:[(0,jt.trigger)("modalFade",[(0,jt.transition)("void <=> *",[(0,jt.animate)("800ms")])])]}})}return i})(),ia=(()=>{class i{recordList;constructor(e){this.recordList=e.create()}init(e){this.recordList.init(e,!1)}search(e,t){const r=this.recordList.criteria;return r.filters[t]={field:t,operator:"=",values:[e]},this.recordList.updateSearchCriteria(r,!1),this.recordList.load(!1).pipe((0,v.map)(o=>o.records),(0,v.take)(1),(0,v.shareReplay)(1))}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Ni))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),ju=(()=>{class i extends cn{languages;typeFormatter;relateService;moduleNameMapper;logic;logicDisplay;selectedValues=[];status="";initModule="";constructor(e,t,r,o,s,c){super(t,s,c),this.languages=e,this.typeFormatter=t,this.relateService=r,this.moduleNameMapper=o,this.logic=s,this.logicDisplay=c}get module(){return this.record&&this.record.module?this.record.module:null}ngOnInit(){super.ngOnInit(),this.init(),this.subs.push(this.field.valueChanges$.subscribe(()=>{this.onModuleChange()}))}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}onModuleChange(){const e=this.initModule,t=this?.field?.definition?.module??"";e!==t&&(this.initModule=t,""===e&&e!==t&&this.init(),this.status=""===t?"no-module":"")}search=e=>(this.status="searching",this.relateService.search(e,this.getRelateFieldName()).pipe((0,v.tap)(()=>this.status="found"),(0,v.catchError)(()=>(this.status="error",(0,S.of)([]))),(0,v.map)(t=>{if(!t||t.length<1)return this.status="not-found",[];const r=[];return t.forEach(o=>{o&&o.attributes&&r.push(o.attributes)}),this.status="",r})));getRelateFieldName(){return this.field&&this.field.definition&&this.field.definition.rname||"name"}getRelateIdField(){return this.field&&this.field.definition&&this.field.definition.id_name||""}getRelatedModule(){const e=this.field&&this.field.definition&&this.field.definition.module||"";return e?this.moduleNameMapper.toFrontend(e):""}getMessage(){const e={searching:"LBL_SEARCHING","not-found":"LBL_NOT_FOUND",error:"LBL_SEARCH_ERROR",found:"LBL_FOUND","no-module":"LBL_NO_MODULE_SELECTED"};return e[this.status]?e[this.status]:""}getInvalidClass(){return this.field.formControl&&this.field.formControl.invalid&&this.field.formControl.touched||this.hasSearchError()?"is-invalid":""}hasSearchError(){return"error"===this.status||"not-found"===this.status}resetStatus(){this.status=""}getPlaceholderLabel(){return this.languages.getAppString("LBL_TYPE_TO_SEARCH")||""}init(){this.initModule=this?.field?.definition?.module??"",this.relateService&&this.relateService.init(this.getRelatedModule())}buildRelate(e,t){const r={id:e};return this.getRelateFieldName()&&(r[this.getRelateFieldName()]=t),r}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(Oe),n.\u0275\u0275directiveInject(it),n.\u0275\u0275directiveInject(ia),n.\u0275\u0275directiveInject(_n),n.\u0275\u0275directiveInject(ft),n.\u0275\u0275directiveInject(pt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["ng-component"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:0,vars:0,template:function(t,r){},encapsulation:2})}return i})();const j4=["tag"];function k4(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"div",3)(2,"tag-input",4,5),n.\u0275\u0275listener("keyup.enter",function(){n.\u0275\u0275restoreView(e);const r=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(r.selectFirstElement())})("onAdd",function(r){n.\u0275\u0275restoreView(e);const o=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(o.onAdd(r))})("onBlur",function(){n.\u0275\u0275restoreView(e);const r=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(r.resetStatus())})("onRemove",function(){n.\u0275\u0275restoreView(e);const r=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(r.onRemove())})("ngModelChange",function(r){n.\u0275\u0275restoreView(e);const o=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(o.selectedValues=r)}),n.\u0275\u0275element(4,"tag-input-dropdown",6),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(5,"div",7),n.\u0275\u0275element(6,"scrm-button",8),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()}if(2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(2),n.\u0275\u0275classMap(e.getInvalidClass()),n.\u0275\u0275property("ngModel",e.selectedValues)("clearOnBlur",!0)("displayBy",e.getRelateFieldName())("inputClass",e.getInvalidClass())("onTextChangeDebounce",500)("onlyFromAutocomplete",!0)("placeholder",e.getPlaceholderLabel())("secondaryPlaceholder",e.getPlaceholderLabel()),n.\u0275\u0275advance(2),n.\u0275\u0275property("autocompleteObservable",e.search)("displayBy",e.getRelateFieldName())("keepOpen",!1)("showDropdownIfEmpty",!0),n.\u0275\u0275advance(2),n.\u0275\u0275property("config",e.selectButton)}}function P4(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"small",9),n.\u0275\u0275element(1,"scrm-label",10),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("labelKey",e.getMessage())("module",e.module)}}let ku=(()=>{class i extends ju{languages;typeFormatter;relateService;moduleNameMapper;modalService;logic;logicDisplay;tag;selectButton;idField;constructor(e,t,r,o,s,c,l){super(e,t,r,o,c,l),this.languages=e,this.typeFormatter=t,this.relateService=r,this.moduleNameMapper=o,this.modalService=s,this.logic=c,this.logicDisplay=l,this.selectButton={klass:["btn","btn-sm","btn-outline-secondary","select-button","m-0"],onClick:()=>{this.showSelectModal()},icon:"cursor"}}ngOnInit(){super.ngOnInit(),this.init()}init(){super.init(),this.initValue();const e=this.getRelateIdField();e&&this.record&&this.record.fields&&this.record.fields[e]&&(this.idField=this.record.fields[e])}initValue(){return this.field.valueObject&&this.field.valueObject.id?(this.selectedValues=[],void this.selectedValues.push(this.field.valueObject)):(this.selectedValues=[],void this.field.formControl.setValue(""))}onAdd(e){if(e){const t=this.getRelateFieldName();this.setValue(e.id,e[t])}else this.setValue("",""),this.selectedValues=[]}onRemove(){this.setValue("",""),this.selectedValues=[],setTimeout(()=>{this.tag.focus(!0,!0)},200)}setValue(e,t){const r=this.buildRelate(e,t);this.field.value=t,this.field.valueObject=r,this.field.formControl.setValue(t),this.field.formControl.markAsDirty(),this.idField&&(this.idField.value=e,this.idField.formControl.setValue(e),this.idField.formControl.markAsDirty())}showSelectModal(){const e=this.modalService.open(na,{size:"xl",scrollable:!0});e.componentInstance.module=this.getRelatedModule(),e.result.then(t=>{if(!t||!t.selection||!t.selection.selected)return;const r=this.getSelectedRecord(t);this.setItem(r)})}getSelectedRecord(e){let t="";Object.keys(e.selection.selected).some(o=>(t=o,!0));let r=null;return e.records.some(o=>{if(o&&o.id===t)return r=o,!0}),r}setItem(e){this.tag.writeValue([e.attributes]),this.onAdd(e.attributes)}selectFirstElement(){const e=this.tag.dropdown.items;if(0!==e.length){const t=e[0];this.selectedValues.push(t),this.onAdd(t),this.tag.dropdown.hide()}}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(Oe),n.\u0275\u0275directiveInject(it),n.\u0275\u0275directiveInject(ia),n.\u0275\u0275directiveInject(_n),n.\u0275\u0275directiveInject(de.NgbModal),n.\u0275\u0275directiveInject(ft),n.\u0275\u0275directiveInject(pt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-relate-edit"]],viewQuery:function(t,r){if(1&t&&n.\u0275\u0275viewQuery(j4,5),2&t){let o;n.\u0275\u0275queryRefresh(o=n.\u0275\u0275loadQuery())&&(r.tag=o.first)}},features:[n.\u0275\u0275ProvidersFeature([ia]),n.\u0275\u0275InheritDefinitionFeature],decls:3,vars:2,consts:[[1,"d-flex"],[4,"ngIf"],["class","text-danger form-text text-muted",4,"ngIf"],[1,"flex-grow-1"],["maxItems","1",3,"ngModel","clearOnBlur","displayBy","inputClass","onTextChangeDebounce","onlyFromAutocomplete","placeholder","secondaryPlaceholder","keyup.enter","onAdd","onBlur","onRemove","ngModelChange"],["tag",""],[3,"autocompleteObservable","displayBy","keepOpen","showDropdownIfEmpty"],[1,"relate-btn"],[3,"config"],[1,"text-danger","form-text","text-muted"],[3,"labelKey","module"]],template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"div",0),n.\u0275\u0275template(1,k4,7,15,"ng-container",1),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(2,P4,2,2,"small",2)),2&t&&(n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.initModule),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.getMessage()))},dependencies:[F.NgIf,Tn.TagInputComponent,Tn.TagInputDropdown,Ot,Ce.NgControlStatus,Ce.NgModel,Nn],encapsulation:2})}return i})(),Ab=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Tn.TagInputModule,Nt,Ce.FormsModule,Br,Xt]})}return i})();const $4=["tag"];function U4(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"small",8),n.\u0275\u0275element(1,"scrm-label",9),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("labelKey",e.getMessage())("module",e.module)}}let Pu=(()=>{class i extends ju{languages;typeFormatter;relateService;moduleNameMapper;modalService;logic;logicDisplay;tag;selectButton;selectedTags;idField;constructor(e,t,r,o,s,c,l){super(e,t,r,o,c,l),this.languages=e,this.typeFormatter=t,this.relateService=r,this.moduleNameMapper=o,this.modalService=s,this.logic=c,this.logicDisplay=l,this.selectButton={klass:["btn","btn-sm","btn-outline-secondary","select-button","m-0"],onClick:()=>{this.showSelectModal()},icon:"cursor"}}ngOnInit(){const e=this.record;this.field.valueList=[],this.field.valueObjectArray=[];const t=this.field&&this.field.criteria&&this.field.criteria.values||[];t.length>0&&(this.field.valueList=t,this.selectedTags=t);const r=this.field&&this.field.criteria&&this.field.criteria.valueObjectArray||[];r.length>0&&(this.field.valueObjectArray=(0,M.deepClone)(r),this.selectedTags=(0,M.deepClone)(r)),super.ngOnInit();const o=this.getRelateIdField();if(o&&e&&e.criteriaFields&&e.criteriaFields[o]){this.idField=e.criteriaFields[o],this.idField.valueList=[];const s=this.idField&&this.idField.criteria&&this.idField.criteria.values||[];s.length>0&&(this.idField.valueList=(0,M.deepClone)(s))}}onAdd(e){e&&this.setValue(e)}onAdding(e){if(!e||this.idField&&this.idField.valueList.includes(e.id))return S.EMPTY;const t=this.getRelateFieldName();return!this.idField&&this.field.valueList.includes(e[t])?S.EMPTY:(0,S.of)(e)}onRemove(e){const t=e.id??"",r=e.name??"";this.field.valueList=this.field.valueList.filter(o=>o!==r),this.field.valueObjectArray=this.field.valueObjectArray.filter(o=>o.id!==t),this.updateSearchCriteria(this.field),this.field.criteria.valueObjectArray=(0,M.deepClone)(this.field.valueObjectArray),this.idField&&t&&(this.idField.valueList=this.idField.valueList.filter(o=>o!==t),this.updateSearchCriteria(this.idField)),setTimeout(()=>{this.tag.focus(!0,!0)},200)}selectFirstElement(){const e=this.tag.dropdown.items;if(0!==e.length){const t=e[0];this.tag.appendTag(t),this.onAdd(t),this.tag.dropdown.hide()}}setValue(e){const t=this.getRelateFieldName(),r=e.id,o=e[t];if(this.idField&&this.idField.valueList.includes(r)||!this.idField&&this.field.valueList.includes(o))return;const s={};s.id=r,s[t]=o,this.field.valueObjectArray.push(s),this.field.valueList.push(o),this.idField&&(this.idField.valueList.push(r),this.updateSearchCriteria(this.idField)),this.updateSearchCriteria(this.field),this.field.criteria.valueObjectArray||(this.field.criteria.valueObjectArray=[]),this.field.criteria.valueObjectArray.push(s)}updateSearchCriteria(e){e.criteria.operator="=",e.criteria.values=e.valueList,e.formControl.setValue(e.valueList),e.formControl.markAsDirty()}showSelectModal(){const e=this.modalService.open(na,{size:"xl",scrollable:!0});e.componentInstance.module=this.getRelatedModule(),e.result.then(t=>{if(!t||!t.selection||!t.selection.selected)return;const r=this.getSelectedRecord(t);this.field.valueObjectArray.find(s=>s.id===r.id)||this.setItem(r)})}getSelectedRecord(e){let t="";Object.keys(e.selection.selected).some(o=>(t=o,!0));let r=null;return e.records.some(o=>{if(o&&o.id===t)return r=o,!0}),r}setItem(e){this.tag.appendTag(e.attributes),this.onAdd(e.attributes)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(Oe),n.\u0275\u0275directiveInject(it),n.\u0275\u0275directiveInject(ia),n.\u0275\u0275directiveInject(_n),n.\u0275\u0275directiveInject(de.NgbModal),n.\u0275\u0275directiveInject(ft),n.\u0275\u0275directiveInject(pt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-relate-filter"]],viewQuery:function(t,r){if(1&t&&n.\u0275\u0275viewQuery($4,5),2&t){let o;n.\u0275\u0275queryRefresh(o=n.\u0275\u0275loadQuery())&&(r.tag=o.first)}},features:[n.\u0275\u0275ProvidersFeature([ia]),n.\u0275\u0275InheritDefinitionFeature],decls:8,vars:18,consts:[[1,"d-flex"],[1,"flex-grow-1"],[3,"ngModel","clearOnBlur","identifyBy","displayBy","inputClass","onTextChangeDebounce","onlyFromAutocomplete","placeholder","secondaryPlaceholder","keyup.enter","onAdd","onBlur","onRemove","ngModelChange"],["tag",""],[3,"autocompleteObservable","identifyBy","displayBy","keepOpen","showDropdownIfEmpty"],[1,"relate-btn"],[3,"config"],["class","text-danger form-text text-muted",4,"ngIf"],[1,"text-danger","form-text","text-muted"],[3,"labelKey","module"]],template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"tag-input",2,3),n.\u0275\u0275listener("keyup.enter",function(){return r.selectFirstElement()})("onAdd",function(s){return r.onAdd(s)})("onBlur",function(){return r.resetStatus()})("onRemove",function(s){return r.onRemove(s)})("ngModelChange",function(s){return r.selectedTags=s}),n.\u0275\u0275element(4,"tag-input-dropdown",4),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(5,"div",5),n.\u0275\u0275element(6,"scrm-button",6),n.\u0275\u0275elementEnd()(),n.\u0275\u0275template(7,U4,2,2,"small",7)),2&t&&(n.\u0275\u0275advance(2),n.\u0275\u0275classMap(r.getInvalidClass()),n.\u0275\u0275property("ngModel",r.selectedTags)("clearOnBlur",!0)("identifyBy","id")("displayBy",r.getRelateFieldName())("inputClass",r.getInvalidClass())("onTextChangeDebounce",500)("onlyFromAutocomplete",!0)("placeholder",r.getPlaceholderLabel())("secondaryPlaceholder",r.getPlaceholderLabel()),n.\u0275\u0275advance(2),n.\u0275\u0275property("autocompleteObservable",r.search)("identifyBy","id")("displayBy",r.getRelateFieldName())("keepOpen",!1)("showDropdownIfEmpty",!0),n.\u0275\u0275advance(2),n.\u0275\u0275property("config",r.selectButton),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.getMessage()))},dependencies:[F.NgIf,Tn.TagInputComponent,Tn.TagInputDropdown,Ot,Ce.NgControlStatus,Ce.NgModel,Nn],encapsulation:2})}return i})(),Tb=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Ce.FormsModule]})}return i})(),Nb=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule]})}return i})(),Lb=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Ce.FormsModule,de.NgbDatepickerModule,Xt,Ce.ReactiveFormsModule]})}return i})(),Bb=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Ce.FormsModule,Ce.ReactiveFormsModule,Tn.TagInputModule]})}return i})(),Ob=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule]})}return i})(),Rb=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Tn.TagInputModule,Nt,Ce.FormsModule,Br,Xt]})}return i})(),Sc=(()=>{class i extends Iu{typeFormatter;logic;logicDisplay;constructor(e,t,r){super(e,t,r),this.typeFormatter=e,this.logic=t,this.logicDisplay=r}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(it),n.\u0275\u0275directiveInject(ft),n.\u0275\u0275directiveInject(pt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-boolean-edit"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:4,vars:1,consts:[[1,"pb-4","checkbox-field"],[1,"checkbox-container"],["type","checkbox","aria-hidden","true",3,"checked","change"],[1,"checkmark"]],template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"div",0)(1,"label",1)(2,"input",2),n.\u0275\u0275listener("change",function(){return r.toggle()}),n.\u0275\u0275elementEnd(),n.\u0275\u0275element(3,"span",3),n.\u0275\u0275elementEnd()()),2&t&&(n.\u0275\u0275advance(2),n.\u0275\u0275property("checked",r.checked))},encapsulation:2})}return i})(),jb=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule]})}return i})(),kb=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Ce.FormsModule,Ce.ReactiveFormsModule,Nt]})}return i})(),Pb=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule]})}return i})(),$b=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule]})}return i})();const V4=["tag"];let Dc=(()=>{class i extends ic{languages;typeFormatter;logic;logicDisplay;tag;constructor(e,t,r,o){super(e,t,r,o),this.languages=e,this.typeFormatter=t,this.logic=r,this.logicDisplay=o}ngOnInit(){this.checkAndInitAsDynamicEnum(),super.ngOnInit()}onAdd(){const e=this.selectedValues.map(t=>t.value);this.field.valueList=e,this.field.formControl.setValue(e),this.field.formControl.markAsDirty()}onRemove(){const e=this.selectedValues.map(t=>t.value);this.field.valueList=e,this.field.formControl.setValue(e),this.field.formControl.markAsDirty(),setTimeout(()=>{this.tag.focus(!0,!0),this.tag.dropdown.show()},200)}getPlaceholderLabel(){return this.languages.getAppString("LBL_SELECT_ITEM")||""}selectFirstElement(){const e=this.tag.dropdown.items;0!==e.length&&(this.selectedValues.push(e[0]),this.onAdd(),this.tag.dropdown.hide())}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(Oe),n.\u0275\u0275directiveInject(it),n.\u0275\u0275directiveInject(ft),n.\u0275\u0275directiveInject(pt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-multienum-edit"]],viewQuery:function(t,r){if(1&t&&n.\u0275\u0275viewQuery(V4,5),2&t){let o;n.\u0275\u0275queryRefresh(o=n.\u0275\u0275loadQuery())&&(r.tag=o.first)}},features:[n.\u0275\u0275InheritDefinitionFeature],decls:3,vars:13,consts:[[3,"ngModel","onlyFromAutocomplete","clearOnBlur","displayBy","identifyBy","placeholder","secondaryPlaceholder","inputClass","ngModelChange","onAdd","onRemove","keyup.enter"],["tag",""],[3,"displayBy","identifyBy","showDropdownIfEmpty","keepOpen","autocompleteItems"]],template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"tag-input",0,1),n.\u0275\u0275listener("ngModelChange",function(s){return r.selectedValues=s})("onAdd",function(){return r.onAdd()})("onRemove",function(){return r.onRemove()})("keyup.enter",function(){return r.selectFirstElement()}),n.\u0275\u0275element(2,"tag-input-dropdown",2),n.\u0275\u0275elementEnd()),2&t&&(n.\u0275\u0275property("ngModel",r.selectedValues)("onlyFromAutocomplete",!0)("clearOnBlur",!0)("displayBy","label")("identifyBy","value")("placeholder",r.getPlaceholderLabel())("secondaryPlaceholder",r.getPlaceholderLabel())("inputClass",r.getInvalidClass()),n.\u0275\u0275advance(2),n.\u0275\u0275property("displayBy","label")("identifyBy","value")("showDropdownIfEmpty",!0)("keepOpen",!1)("autocompleteItems",r.options))},dependencies:[Tn.TagInputComponent,Tn.TagInputDropdown,Ce.NgControlStatus,Ce.NgModel],encapsulation:2})}return i})();function z4(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275text(1),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(e.field.value)}}function W4(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275text(1),n.\u0275\u0275pipe(2,"formatNumber"),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",n.\u0275\u0275pipeBind1(2,1,e.field.value),"\n")}}let wc=(()=>{class i extends sc{userPreferences;systemConfig;typeFormatter;logic;logicDisplay;constructor(e,t,r,o,s){super(e,t,r,o,s),this.userPreferences=e,this.systemConfig=t,this.typeFormatter=r,this.logic=o,this.logicDisplay=s}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(Vt),n.\u0275\u0275directiveInject(dt),n.\u0275\u0275directiveInject(it),n.\u0275\u0275directiveInject(ft),n.\u0275\u0275directiveInject(pt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-int-detail"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:3,vars:4,consts:[[4,"ngIf"]],template:function(t,r){1&t&&(n.\u0275\u0275template(0,z4,2,1,"ng-container",0),n.\u0275\u0275template(1,W4,3,3,"ng-container",0),n.\u0275\u0275pipe(2,"async")),2&t&&(n.\u0275\u0275property("ngIf",!r.format),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.format&&n.\u0275\u0275pipeBind1(2,2,r.vm$)))},dependencies:[F.NgIf,F.AsyncPipe,Nu],encapsulation:2})}return i})(),Ub=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Tn.TagInputModule,Ce.FormsModule]})}return i})(),Vb=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Lu]})}return i})(),zb=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule]})}return i})(),$u=(()=>{class i extends cn{typeFormatter;logic;logicDisplay;constructor(e,t,r){super(e,t,r),this.typeFormatter=e,this.logic=t,this.logicDisplay=r}ngOnInit(){super.ngOnInit(),this.subscribeValueChanges()}ngOnDestroy(){this.unsubscribeAll()}get rows(){return this.field.metadata&&this.field.metadata.rows?this.field.metadata.rows:6}get cols(){return this.field.metadata&&this.field.metadata.cols?this.field.metadata.cols:20}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(it),n.\u0275\u0275directiveInject(ft),n.\u0275\u0275directiveInject(pt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-text-edit"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:1,vars:6,consts:[[3,"rows","cols","ngClass","formControl"]],template:function(t,r){1&t&&n.\u0275\u0275element(0,"textarea",0),2&t&&(n.\u0275\u0275classProp("is-invalid",r.field.formControl.invalid&&r.field.formControl.touched),n.\u0275\u0275property("rows",r.rows)("cols",r.cols)("ngClass",r.klass)("formControl",r.field.formControl))},dependencies:[F.NgClass,Ce.DefaultValueAccessor,Ce.NgControlStatus,Ce.FormControlDirective],encapsulation:2})}return i})(),Wb=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Ce.FormsModule,de.NgbDatepickerModule,Xt,Ce.ReactiveFormsModule]})}return i})(),Gb=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Ce.FormsModule,Ce.ReactiveFormsModule]})}return i})();function G4(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"option",4),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&i){const e=a.$implicit,t=n.\u0275\u0275nextContext(2);n.\u0275\u0275classMap(t.getId(e)),n.\u0275\u0275property("ngValue",e.value),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",e.label," ")}}function K4(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,G4,2,5,"option",3),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",e.options)}}let Uu=(()=>{class i extends Ti{languages;typeFormatter;logic;logicDisplay;formGroup;constructor(e,t,r,o){super(e,t,r,o),this.languages=e,this.typeFormatter=t,this.logic=r,this.logicDisplay=o}ngOnInit(){super.ngOnInit(),this.subscribeValueChanges(),this.record&&this.record.formGroup?this.formGroup=this.record.formGroup:(this.formGroup=new Ce.UntypedFormGroup({}),this.formGroup.addControl(this.field.name,this.field.formControl))}getId(e){return this.field.name+"-"+e.value}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(Oe),n.\u0275\u0275directiveInject(it),n.\u0275\u0275directiveInject(ft),n.\u0275\u0275directiveInject(pt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-dropdownenum-edit"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:3,vars:2,consts:[[1,"dropdownenum"],[1,"custom-select","custom-select-sm",3,"formControl"],[4,"ngIf"],[3,"class","ngValue",4,"ngFor","ngForOf"],[3,"ngValue"]],template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"div",0)(1,"select",1),n.\u0275\u0275template(2,K4,2,1,"ng-container",2),n.\u0275\u0275elementEnd()()),2&t&&(n.\u0275\u0275advance(1),n.\u0275\u0275property("formControl",r.field.formControl),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.options&&r.options.length))},dependencies:[F.NgForOf,F.NgIf,Ce.NgSelectOption,Ce.\u0275NgSelectMultipleOption,Ce.SelectControlValueAccessor,Ce.NgControlStatus,Ce.FormControlDirective],encapsulation:2})}return i})(),Kb=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Ce.FormsModule,Ce.ReactiveFormsModule]})}return i})(),xc=(()=>{class i extends Ti{languages;typeFormatter;logic;logicDisplay;constructor(e,t,r,o){super(e,t,r,o),this.languages=e,this.typeFormatter=t,this.logic=r,this.logicDisplay=o}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(Oe),n.\u0275\u0275directiveInject(it),n.\u0275\u0275directiveInject(ft),n.\u0275\u0275directiveInject(pt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-dropdownenum-detail"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,template:function(t,r){1&t&&n.\u0275\u0275text(0),2&t&&n.\u0275\u0275textInterpolate1("\n",r.valueLabel,"\n")},encapsulation:2})}return i})(),Hb=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Ce.FormsModule]})}return i})(),Ec=(()=>{class i extends Ti{languages;typeFormatter;logic;logicDisplay;constructor(e,t,r,o){super(e,t,r,o),this.languages=e,this.typeFormatter=t,this.logic=r,this.logicDisplay=o}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(Oe),n.\u0275\u0275directiveInject(it),n.\u0275\u0275directiveInject(ft),n.\u0275\u0275directiveInject(pt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-radioenum-detail"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,template:function(t,r){1&t&&n.\u0275\u0275text(0),2&t&&n.\u0275\u0275textInterpolate1("\n",r.valueLabel,"\n")},encapsulation:2})}return i})(),Zb=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Ce.FormsModule]})}return i})();function H4(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div"),n.\u0275\u0275element(1,"input",2),n.\u0275\u0275elementStart(2,"label",3),n.\u0275\u0275text(3),n.\u0275\u0275elementEnd()()),2&i){const e=a.$implicit,t=n.\u0275\u0275nextContext();n.\u0275\u0275classMapInterpolate1("form-check radioenum-input ",t.getId(e),""),n.\u0275\u0275classProp("form-check-inline","row"===t.displayDirection),n.\u0275\u0275advance(1),n.\u0275\u0275propertyInterpolate("id",t.getId(e)),n.\u0275\u0275property("checked",t.field.value===e.value)("formControl",t.field.formControl)("value",e.value),n.\u0275\u0275advance(1),n.\u0275\u0275propertyInterpolate("for",t.getId(e)),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",e.label," ")}}let Vu=(()=>{class i extends Ti{languages;typeFormatter;logic;logicDisplay;formGroup;constructor(e,t,r,o){super(e,t,r,o),this.languages=e,this.typeFormatter=t,this.logic=r,this.logicDisplay=o}get displayDirection(){return this.field&&this.field.definition&&this.field.definition.displayDirection?this.field.definition.displayDirection:""}ngOnInit(){super.ngOnInit(),this.subscribeValueChanges(),this.record&&this.record.formGroup?this.formGroup=this.record.formGroup:(this.formGroup=new Ce.UntypedFormGroup({}),this.formGroup.addControl(this.field.name,this.field.formControl))}getId(e){return this.field.name+"-"+e.value}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(Oe),n.\u0275\u0275directiveInject(it),n.\u0275\u0275directiveInject(ft),n.\u0275\u0275directiveInject(pt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-radioenum-edit"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:2,vars:1,consts:[[1,"radioenum"],[3,"form-check-inline","class",4,"ngFor","ngForOf"],["type","radio",1,"form-check-input",3,"checked","formControl","value","id"],[1,"form-check-label",3,"for"]],template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"div",0),n.\u0275\u0275template(1,H4,4,11,"div",1),n.\u0275\u0275elementEnd()),2&t&&(n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",r.options))},dependencies:[F.NgForOf,Ce.DefaultValueAccessor,Ce.RadioControlValueAccessor,Ce.NgControlStatus,Ce.FormControlDirective],encapsulation:2})}return i})(),qb=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Ce.FormsModule,Ce.ReactiveFormsModule]})}return i})(),Jb=(()=>{class i extends cn{typeFormatter;logic;logicDisplay;constructor(e,t,r){super(e,t,r),this.typeFormatter=e,this.logic=t,this.logicDisplay=r}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(it),n.\u0275\u0275directiveInject(ft),n.\u0275\u0275directiveInject(pt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-html-detail"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,consts:[[1,"field-html","text-break",3,"innerHTML"]],template:function(t,r){1&t&&n.\u0275\u0275element(0,"div",0),2&t&&n.\u0275\u0275property("innerHTML",r.field.value,n.\u0275\u0275sanitizeHtml)},encapsulation:2})}return i})(),Qb=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Ce.FormsModule]})}return i})(),Fc=(()=>{class i extends cn{typeFormatter;logic;logicDisplay;constructor(e,t,r){super(e,t,r),this.typeFormatter=e,this.logic=t,this.logicDisplay=r}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(it),n.\u0275\u0275directiveInject(ft),n.\u0275\u0275directiveInject(pt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-password-detail"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:2,vars:0,template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"span"),n.\u0275\u0275text(1,"*****"),n.\u0275\u0275elementEnd())},encapsulation:2})}return i})(),Xb=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule]})}return i})(),zu=(()=>{class i extends cn{typeFormatter;logic;logicDisplay;constructor(e,t,r){super(e,t,r),this.typeFormatter=e,this.logic=t,this.logicDisplay=r}ngOnInit(){super.ngOnInit(),this.subscribeValueChanges()}ngOnDestroy(){this.unsubscribeAll()}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(it),n.\u0275\u0275directiveInject(ft),n.\u0275\u0275directiveInject(pt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-password-edit"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:1,vars:5,consts:[["type","password",3,"formControl","ngClass","value"]],template:function(t,r){1&t&&n.\u0275\u0275element(0,"input",0),2&t&&(n.\u0275\u0275classProp("is-invalid",r.field.formControl.invalid&&r.field.formControl.touched),n.\u0275\u0275property("formControl",r.field.formControl)("ngClass",r.klass)("value",r.field.value))},dependencies:[F.NgClass,Ce.DefaultValueAccessor,Ce.NgControlStatus,Ce.FormControlDirective],encapsulation:2})}return i})(),Yb=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Ce.FormsModule,Ce.ReactiveFormsModule,Nt]})}return i})(),Wu=(()=>{class i extends cn{typeFormatter;logic;config;logicDisplay;settings={};initialValue="";constructor(e,t,r,o){super(e,t,o),this.typeFormatter=e,this.logic=t,this.config=r,this.logicDisplay=o}ngOnInit(){super.ngOnInit(),this.initSettings(),this.initialValue=this.field.value}initSettings(){const r=this.config.getConfigValue("ui")?.tinymce?.detail??{};let s={};s=(0,ne.merge)(s,{toolbar:!1,menubar:!1,readonly:!0,deprecation_warnings:!1},r,this.field?.metadata?.tinymce?.detail??{}),this.settings=s}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(it),n.\u0275\u0275directiveInject(ft),n.\u0275\u0275directiveInject(dt),n.\u0275\u0275directiveInject(pt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-tinymce-detail"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:1,vars:3,consts:[[1,"field-html","text-break",3,"initialValue","init","disabled"]],template:function(t,r){1&t&&n.\u0275\u0275element(0,"editor",0),2&t&&n.\u0275\u0275property("initialValue",r.initialValue)("init",r.settings)("disabled",!0)},dependencies:[qs],encapsulation:2,changeDetection:0})}return i})(),e1=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({providers:[{provide:Xl,useValue:"tinymce/tinymce.min.js"}],imports:[F.CommonModule,Ce.FormsModule,Xy,Ce.ReactiveFormsModule]})}return i})(),Gu=(()=>{class i extends cn{typeFormatter;logic;logicDisplay;config;settings={};modelEvents="change";ignoreEvents="onKeyDown,onKeyPress,onKeyUp,onSelectionChange";value="";constructor(e,t,r,o){super(e,t,r),this.typeFormatter=e,this.logic=t,this.logicDisplay=r,this.config=o}ngOnInit(){super.ngOnInit(),this.initSettings(),this.subscribeValueChanges(),this.value=this.field.value??""}ngOnDestroy(){this.unsubscribeAll()}initSettings(){const r=this.config.getConfigValue("ui")?.tinymce?.edit??{};let s={};s=(0,ne.merge)(s,{height:300,menubar:!1,deprecation_warnings:!1,plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table paste code help wordcount"],toolbar:"undo redo | formatselect | bold italic backcolor | alignleft aligncenter alignright alignjustify |  bullist numlist outdent indent | removeformat | help",toolbar_mode:"floating"},r,this?.field?.metadata?.tinymce?.edit??{}),this.modelEvents=s?.modelEvents??"change",this.ignoreEvents=s?.ignoreEvents??"onKeyDown,onKeyPress,onKeyUp,onSelectionChange",this.settings=s}setModel(){this.field.formControl.setValue(this.value)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(it),n.\u0275\u0275directiveInject(ft),n.\u0275\u0275directiveInject(pt),n.\u0275\u0275directiveInject(dt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-tinymce-edit"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:1,vars:4,consts:[[1,"field-html",3,"init","modelEvents","ignoreEvents","formControl"]],template:function(t,r){1&t&&n.\u0275\u0275element(0,"editor",0),2&t&&n.\u0275\u0275property("init",r.settings)("modelEvents",r.modelEvents)("ignoreEvents",r.ignoreEvents)("formControl",r.field.formControl)},dependencies:[Ce.NgControlStatus,qs,Ce.FormControlDirective],encapsulation:2,changeDetection:0})}return i})(),t1=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({providers:[{provide:Xl,useValue:"tinymce/tinymce.min.js"}],imports:[F.CommonModule,Ce.FormsModule,Xy,Ce.ReactiveFormsModule]})}return i})(),$a=(()=>{class i extends cn{typeFormatter;logic;logicDisplay;constructor(e,t,r){super(e,t,r),this.typeFormatter=e,this.logic=t,this.logicDisplay=r}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(it),n.\u0275\u0275directiveInject(ft),n.\u0275\u0275directiveInject(pt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-icon-detail"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,consts:[[3,"image"]],template:function(t,r){1&t&&n.\u0275\u0275element(0,"scrm-image",0),2&t&&n.\u0275\u0275property("image",r.field.value)},dependencies:[mn],encapsulation:2})}return i})(),n1=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,fn]})}return i})();function Z4(i,a){1&i&&n.\u0275\u0275element(0,"br")}function q4(i,a){1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275text(1," ... "),n.\u0275\u0275elementContainerEnd())}function J4(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",1)(1,"span"),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(3,Z4,1,0,"br",2),n.\u0275\u0275template(4,q4,2,0,"ng-container",2),n.\u0275\u0275elementEnd()),2&i){const e=a.$implicit,t=a.last,r=n.\u0275\u0275nextContext();n.\u0275\u0275property("ngClass",r.klass)("title",r.field.value),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(e),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!t),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t&&r.isTruncated)}}let Ku=(()=>{class i extends cn{typeFormatter;logic;logicDisplay;isTruncated=!1;constructor(e,t,r){super(e,t,r),this.typeFormatter=e,this.logic=t,this.logicDisplay=r}truncateValue(e){let r=e.slice(0,50),o=r.split("\n");const c=o.slice(0,3);return this.isTruncated=r.length!==e.length||o.length>3,c}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(it),n.\u0275\u0275directiveInject(ft),n.\u0275\u0275directiveInject(pt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-text-list"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,consts:[[3,"ngClass","title",4,"ngFor","ngForOf"],[3,"ngClass","title"],[4,"ngIf"]],template:function(t,r){1&t&&n.\u0275\u0275template(0,J4,5,5,"div",0),2&t&&n.\u0275\u0275property("ngForOf",r.truncateValue(r.field.value))},dependencies:[F.NgClass,F.NgForOf,F.NgIf],encapsulation:2})}return i})(),r1=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Ce.FormsModule]})}return i})();const o1=[zb,kb,Mb,Xb,Yb,Vb,n1,bb,Cb,Nb,cb,Lb,Wb,pb,fb,gb,$b,db,hb,Tb,Gb,r1,Ob,Ab,Rb,sb,ob,vb,Hb,Kb,Zb,qb,_b,Ub,Bb,Pb,jb,Sb,Qb,e1,t1],a1=[Xo,wu,Au,Fc,zu,wc,Tu,gc,nc,ac,lc,uc,dc,xu,mb,Yo,$a,cc,mc,Du,$u,Ku,vc,ku,Pu,oc,Or,Pa,xc,Uu,Ec,Vu,fc,Dc,rc,ea,Sc,hc,Jb,Wu,Gu],Hu={"varchar.list":Xo,"varchar.detail":Xo,"varchar.edit":wu,"varchar.filter":Au,"password.list":Fc,"password.detail":Fc,"password.edit":zu,"char.list":Xo,"char.detail":Xo,"int.list":wc,"int.detail":wc,"file.detail":Tu,"float.list":gc,"float.detail":gc,"phone.list":nc,"phone.detail":nc,"date.list":ac,"date.detail":ac,"date.edit":lc,"date.filter":uc,"datetime.list":dc,"datetime.detail":dc,"datetime.edit":xu,"datetime.filter":uc,"url.list":Yo,"url.detail":Yo,"icon.detail":$a,"icon.edit":$a,"icon.list":$a,"link.list":Yo,"link.detail":Yo,"currency.list":cc,"currency.detail":cc,"email.list":mc,"email.detail":mc,"text.detail":Du,"text.edit":$u,"text.list":Ku,"relate.list":vc,"relate.edit":ku,"relate.detail":vc,"relate.filter":Pu,"fullname.list":oc,"fullname.detail":oc,"enum-radio.list":Ec,"enum-radio.detail":Ec,"enum-radio.edit":Vu,"enum-dropdown.list":xc,"enum-dropdown.detail":xc,"enum-dropdown.edit":Uu,"enum-chips.list":Or,"enum-chips.detail":Or,"enum-chips.edit":Pa,"enum.list":Or,"enum.detail":Or,"enum.edit":Pa,"enum.filter":rc,"multienum.list":fc,"multienum.detail":fc,"multienum.edit":Dc,"multienum.filter":rc,"dynamicenum.list":Or,"dynamicenum.detail":Or,"dynamicenum.edit":Pa,"dynamicenum.filter":Dc,"boolean.list":ea,"boolean.detail":ea,"boolean.edit":Sc,"boolean.filter":hc,"bool.list":ea,"bool.detail":ea,"bool.edit":Sc,"bool.filter":hc,"html.detail":Wu,"html.edit":Gu};class pi{map;fieldMap;constructor(){this.init()}register(a,e,t,r){this.map.addEntry(a,pi.getKey(e,t),r)}registerField(a,e,t,r){this.fieldMap.addEntry(a,pi.getKey(e,t),r)}exclude(a,e){this.map.excludeEntry(a,e)}getDisplayType(a,e,t,r,o){const s=this.getDisplayTypeKey(e,t);return this.hasFieldOverride(a,o,r)?this.getFieldOverride(a,e,r,o):t&&this.has(a,s,r)?this.get(a,s,r,o):this.get(a,e,r,o)}get(a,e,t,r){const o=this.map.getGroupEntries(a);let s=pi.getKey(e,t);return o[s]||"massupdate"===t&&(s=pi.getKey(e,"edit"),o[s])?o[s]:o[pi.getKey("varchar",t)]}getFieldOverride(a,e,t,r){const o=this.fieldMap.getGroupEntries(a);let s=pi.getKey(r,t);return o[s]||"massupdate"===t&&(s=pi.getKey(r,"edit"),o[s])?o[s]:null}has(a,e,t){return!!this.map.getGroupEntries(a)[pi.getKey(e,t)]}hasFieldOverride(a,e,t){return!!this.fieldMap.getGroupEntries(a)[pi.getKey(e,t)]}static getKey(a,e){return a+"."+e}getDisplayTypeKey(a,e){return a&&e?a+"-"+e:""}init(){this.map=new M.OverridableMap,this.fieldMap=new M.OverridableMap,Object.keys(this.getDefaultMap()).forEach(a=>{const[e,t]=a.split(".",2);this.register("default",e,t,this.getDefaultMap()[a])})}getDefaultMap(){return{}}}let Ic=(()=>{class i extends pi{constructor(){super()}getDefaultMap(){return Hu}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),s1=(()=>{class i{asyncActionService;constructor(e){this.asyncActionService=e}run(e,t,r){this.asyncActionService.run(e,{payload:{fieldName:t.name??"",fieldValue:t.value??""},record:{id:r.id??"",type:r.type??"",module:r.module??"",favorite:r.favorite??"",attributes:r.attributes??{},acls:r.acls??[]}})}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Kt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const Zu=function(i,a,e,t,r){return{mode:i,field:a,klass:e,record:t,parent:r}};function Q4(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"a",1),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(e);const r=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(r.onClick())}),n.\u0275\u0275element(2,"ndc-dynamic",2),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()}if(2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(2),n.\u0275\u0275property("ndcDynamicComponent",e.componentType)("ndcDynamicInputs",n.\u0275\u0275pureFunction5(2,Zu,e.mode,e.field,e.klass,e.record,e.parent))}}function X4(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"a",3),n.\u0275\u0275element(2,"ndc-dynamic",2),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("routerLink",e.getLink()),n.\u0275\u0275advance(1),n.\u0275\u0275property("ndcDynamicComponent",e.componentType)("ndcDynamicInputs",n.\u0275\u0275pureFunction5(3,Zu,e.mode,e.field,e.klass,e.record,e.parent))}}function Y4(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275element(1,"ndc-dynamic",2),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("ndcDynamicComponent",e.componentType)("ndcDynamicInputs",n.\u0275\u0275pureFunction5(2,Zu,e.mode,e.field,e.klass,e.record,e.parent))}}function e5(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,Q4,3,8,"ng-container",0),n.\u0275\u0275template(2,X4,3,9,"ng-container",0),n.\u0275\u0275template(3,Y4,2,8,"ng-container",0),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.hasOnClick()),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.isLink()&&!e.hasOnClick()),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!e.isLink()&&!e.hasOnClick())}}function t5(i,a){1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"div",4),n.\u0275\u0275element(2,"div",5),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd())}const n5=function(i){return{field:i}};function i5(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",7),n.\u0275\u0275element(1,"scrm-dynamic-label",8),n.\u0275\u0275elementEnd()),2&i){const e=a.$implicit,t=n.\u0275\u0275nextContext(3);n.\u0275\u0275advance(1),n.\u0275\u0275property("context",t.getMessageContext(e.value,t.record))("fields",n.\u0275\u0275pureFunction1(3,n5,t.field))("labelKey",t.getMessageLabelKey(e.value))}}function r5(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,i5,2,5,"div",6),n.\u0275\u0275pipe(2,"keyvalue"),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",n.\u0275\u0275pipeBind1(2,1,e.field.formControl.errors))}}function o5(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,r5,3,3,"ng-container",0),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.field.formControl.invalid&&e.field.formControl.touched)}}let Ua=(()=>{class i{navigation;moduleNameMapper;router;dynamicLabelService;linkRouteAsyncActionService;cd;mode;type;field;record=null;parent=null;klass=null;componentType;class="dynamic-field";constructor(e,t,r,o,s,c){this.navigation=e,this.moduleNameMapper=t,this.router=r,this.dynamicLabelService=o,this.linkRouteAsyncActionService=s,this.cd=c}get getRelateLink(){let e=this.field.definition.module;if("parent_type"===this.field.definition.type_name&&(e=this.record.attributes.parent_type),this.field.definition.id_name&&e){const t=this.moduleNameMapper.toFrontend(e);return this.navigation.getRecordRouterLink(t,this.record.attributes[this.field.definition.id_name])}return""}ngOnInit(){this.setHostClass(),this.cd.detectChanges()}isLink(){return!(M.EDITABLE_VIEW_MODES.includes(this.mode)||!this.field||!this.record||"relate"!==this.type&&(!this?.field?.metadata||!this?.field?.metadata?.link))}hasOnClick(){const e=this?.field?.metadata??{};return!(!e?.linkAsyncAction&&!e?.onClick)}isEdit(){return"edit"===this.mode||"filter"===this.mode}getLink(){if("relate"===this.type)return this.getRelateLink;const e=this?.field?.metadata??null,t=e.linkRoute??null;return e&&t?this.dynamicLabelService.parse(t,{},this.record.fields):this.navigation.getRecordRouterLink(this.record.module,this.record.id)}getMessageContext(e,t){const r=e&&e.message&&e.message.context||{};return r.module=t&&t.module||"",r}getMessageLabelKey(e){return e&&e.message&&e.message.labelKey||""}onClick(){const e=this?.field?.metadata??null;if(e&&e.onClick)return void this.field.metadata.onClick(this.field,this.record);const t=e.linkAsyncAction??null;if(!e||!t)return this.router.navigateByUrl(this.getLink()).then(),!1;this.linkRouteAsyncActionService.run(t,this.field,this.record)}setHostClass(){const e=[];e.push("dynamic-field"),this.mode&&e.push("dynamic-field-mode-"+this.mode),this.type&&e.push("dynamic-field-type-"+this.type),this.field&&this.field.name&&e.push("dynamic-field-name-"+this.field.name),this.class=e.join(" ")}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(wn),n.\u0275\u0275directiveInject(_n),n.\u0275\u0275directiveInject(Ft.Router),n.\u0275\u0275directiveInject(Ys),n.\u0275\u0275directiveInject(s1),n.\u0275\u0275directiveInject(n.ChangeDetectorRef))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-dynamic-field"]],hostVars:2,hostBindings:function(t,r){2&t&&n.\u0275\u0275classMap(r.class)},inputs:{mode:"mode",type:"type",field:"field",record:"record",parent:"parent",klass:"klass",componentType:"componentType"},decls:3,vars:3,consts:[[4,"ngIf"],[1,"clickable","field-link",3,"click"],[3,"ndcDynamicComponent","ndcDynamicInputs"],[1,"field-link",3,"routerLink"],[1,"dynamic-field"],[1,"flex-grow-1","text-break","rounded","box-loading","skeleton-field-content"],["class","invalid-feedback d-block",4,"ngFor","ngForOf"],[1,"invalid-feedback","d-block"],[3,"context","fields","labelKey"]],template:function(t,r){1&t&&(n.\u0275\u0275template(0,e5,4,3,"ng-container",0),n.\u0275\u0275template(1,t5,3,0,"ng-container",0),n.\u0275\u0275template(2,o5,2,1,"ng-container",0)),2&t&&(n.\u0275\u0275property("ngIf",!r.field.loading),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.field.loading),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.isEdit()&&r.field.formControl&&r.field.formControl.errors))},dependencies:[F.NgForOf,F.NgIf,Ft.RouterLink,no,Bt,It,F.KeyValuePipe],encapsulation:2})}return i})();function a5(i,a){1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275element(1,"scrm-label",1),n.\u0275\u0275elementContainerEnd())}function s5(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"span",7)(1,"label"),n.\u0275\u0275element(2,"scrm-label",8),n.\u0275\u0275elementEnd()()),2&i){const e=n.\u0275\u0275nextContext(2).$implicit,t=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(2),n.\u0275\u0275property("labelKey",e.labelKey)("module",t.getModule())}}function c5(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"span",9),n.\u0275\u0275element(1,"scrm-dynamic-field",10),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext(2).$implicit,t=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("componentType",t.getComponentType(e.type,e.definition))("field",e)("klass",t.klass)("mode",t.mode)("record",t.record)("parent",t.parent)("type",e.type)}}function l5(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",4),n.\u0275\u0275template(1,s5,3,2,"span",5),n.\u0275\u0275template(2,c5,2,7,"span",6),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext().$implicit,t=n.\u0275\u0275nextContext(2);n.\u0275\u0275classProp("flex-fill","edit"===t.mode&&"flex-row"===t.getDirection()),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.labelKey&&t.showLabel(e.definition.name)),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.type)}}function u5(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,l5,3,4,"div",3),n.\u0275\u0275elementContainerEnd()),2&i){const e=a.$implicit,t=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.isModeEnabled(t.mode,e))}}function d5(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"div"),n.\u0275\u0275template(2,u5,2,1,"ng-container",2),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275classMapInterpolate1("d-flex ",e.getDirection()," justify-content-start align-items-start field-group h-100"),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",e.getFields())}}let ra=(()=>{class i extends cn{typeFormatter;registry;logic;logicDisplay;constructor(e,t,r,o){super(e,r,o),this.typeFormatter=e,this.registry=t,this.logic=r,this.logicDisplay=o}getComponentType(e,t){return this.registry.getDisplayType(this.record&&this.record.module||"default",e,t&&t.displayType||"",this.mode,this.field.name)}getFields(){const e=[];return this.field.definition.layout.forEach(t=>{!this.record.fields[t]||"none"===this.record.fields[t].display||e.push(this.record.fields[t])}),e}getModule(){return this.record?this.record.module:null}getDirection(){let e="flex-column";return"inline"===this.field.definition.display&&(e="flex-row"),e}isConfigured(){return this.hasDisplay()&&this.hasLayout()&&this.hasGroupFields()}showLabel(e){const t=this.field.definition||null;if(!t||!t.showLabel)return!1;const o=t.showLabel[this.mode]||null;return!(!o||typeof o>"u")&&(o.includes("*")||o.includes(e))}isModeEnabled(e,t){const r=t.definition.modes;return!r||r.length<1||r.includes(e)}hasGroupFields(){return!(!this.field.definition.groupFields||!Object.keys(this.field.definition.groupFields).length)}hasLayout(){return!(!this.field.definition.layout||!this.field.definition.layout.length)}hasDisplay(){return!!this.field.definition.display}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(it),n.\u0275\u0275directiveInject(Ic),n.\u0275\u0275directiveInject(ft),n.\u0275\u0275directiveInject(pt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-group-field"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:2,vars:2,consts:[[4,"ngIf"],["labelKey","LBL_BAD_GROUP_FIELD_CONFIG"],[4,"ngFor","ngForOf"],["class","field-group-item d-flex flex-column justify-content-end h-100 w-100",3,"flex-fill",4,"ngIf"],[1,"field-group-item","d-flex","flex-column","justify-content-end","h-100","w-100"],["class","field-group-label pt-2 pr-1",4,"ngIf"],["class","field-group-field pr-1",4,"ngIf"],[1,"field-group-label","pt-2","pr-1"],[3,"labelKey","module"],[1,"field-group-field","pr-1"],[3,"componentType","field","klass","mode","record","parent","type"]],template:function(t,r){1&t&&(n.\u0275\u0275template(0,a5,2,0,"ng-container",0),n.\u0275\u0275template(1,d5,3,4,"ng-container",0)),2&t&&(n.\u0275\u0275property("ngIf",!r.isConfigured()),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.isConfigured()))},dependencies:[F.NgForOf,F.NgIf,Ot,Ua],encapsulation:2})}return i})(),Va=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Ft.RouterModule,io,lt]})}return i})(),c1=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Nt,Va]})}return i})();const l1=i=>a=>{const e=Ce.Validators.min(i)(a);return null===e?null:{emailValidator:{...e,message:{labelKey:"LBL_VALIDATION_ERROR_MIN",context:{value:a.value,min:""+i}}}}},u1=i=>a=>{const e=Ce.Validators.max(i)(a);return null===e?null:{emailValidator:{...e,message:{labelKey:"LBL_VALIDATION_ERROR_MAX",context:{value:a.value,max:""+i}}}}};let d1=(()=>{class i{applies(e,t){return!(!t||!t.fieldDefinition)&&null!==this.getRangeValidation(t.fieldDefinition)}getValidator(e){if(!e||!e.fieldDefinition)return[];const t=this.getRangeValidation(e.fieldDefinition);if(!t)return[];const r=t.min&&parseInt(""+t.min,10),o=t.max&&parseInt(""+t.max,10),s=[];return isFinite(r)&&s.push(l1(r)),isFinite(o)&&s.push(u1(o)),s}getRangeValidation(e){if(this.isRangeValidation(e.validation))return e.validation;if(!e.validations||!e.validations.length)return null;let t=null;return e.validations.some(r=>(t=r,this.isRangeValidation(r))),t}isRangeValidation(e){return e&&"range"===e.type}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const f1=i=>a=>i.validateFloatUserFormat(a.value)?{currencyValidator:{valid:!1,format:i.getFloatUserFormatPattern(),message:{labelKey:"LBL_VALIDATION_ERROR_CURRENCY_FORMAT",context:{value:a.value,expected:i.toUserFormat("1000.50")}}}}:null;let p1=(()=>{class i{formatter;constructor(e){this.formatter=e}applies(e,t){return!(!t||!t.fieldDefinition)&&"currency"===t.type}getValidator(e){return e&&e.fieldDefinition?[f1(this.formatter)]:[]}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(to))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const m1=(i,a)=>e=>i.validateUserFormat(e.value,a)?{invalidDate:{value:e.value,message:{labelKey:"LBL_VALIDATION_ERROR_DATE_FORMAT",context:{value:e.value,expected:i.toUserFormat("2020-01-23")}}}}:null;let g1=(()=>{class i{formatter;utils;constructor(e,t){this.formatter=e,this.utils=t}applies(e,t){return!(!t||!t.fieldDefinition)&&"date"===t.type}getValidator(e){return e&&e.fieldDefinition?[m1(this.formatter,e?.metadata?.date_time_format||"")]:[]}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Nr),n.\u0275\u0275inject(eo))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const h1=i=>a=>i.validateUserFormat(a.value)?{dateTimeValidator:{value:a.value,message:{labelKey:"LBL_VALIDATION_ERROR_DATETIME_FORMAT",context:{value:a.value,expected:i.toUserFormat("2020-01-23 12:30:40")}}}}:null;let v1=(()=>{class i{formatter;constructor(e){this.formatter=e}applies(e,t){return!(!t||!t.fieldDefinition)&&"datetime"===t.type}getValidator(e){return e&&e.fieldDefinition?[h1(this.formatter)]:[]}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(lr))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),_1=(()=>{class i{formUtils;constructor(e){this.formUtils=e}toUserFormat(e){return e}toInternalFormat(e){return e}getUserFormatPattern(){return/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/}validateUserFormat(e){const t=this.formUtils.getTrimmedInputValue(e);return!this.formUtils.isEmptyInputValue(t)&&!new RegExp(this.getUserFormatPattern()).test(t)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(eo))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const y1=i=>a=>i.validateUserFormat(a.value)?{emailValidator:{valid:!1,format:i.getUserFormatPattern(),message:{labelKey:"LBL_VALIDATION_ERROR_EMAIL_FORMAT",context:{value:a.value,expected:"example@example.org"}}}}:null;let b1=(()=>{class i{formatter;constructor(e){this.formatter=e}applies(e,t){return!(!t||!t.fieldDefinition)&&"email"===t.type}getValidator(e){return e&&e.fieldDefinition?[y1(this.formatter)]:[]}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(_1))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const C1=i=>a=>i.validateFloatUserFormat(a.value)?{floatValidator:{valid:!1,format:i.getFloatUserFormatPattern(),message:{labelKey:"LBL_VALIDATION_ERROR_FLOAT_FORMAT",context:{value:a.value,expected:i.toUserFormat("1000.50")}}}}:null;let M1=(()=>{class i{formatter;constructor(e){this.formatter=e}applies(e,t){return!(!t||!t.fieldDefinition)&&"float"===t.type}getValidator(e){return e&&e.fieldDefinition?[C1(this.formatter)]:[]}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(to))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const S1=i=>a=>i.validateIntUserFormat(a.value)?{intValidator:{valid:!1,format:i.getIntUserFormatPattern(),message:{labelKey:"LBL_VALIDATION_ERROR_INT_FORMAT",context:{value:a.value,expected:i.toUserFormat("1000")}}}}:null;let D1=(()=>{class i{formatter;constructor(e){this.formatter=e}applies(e,t){return!(!t||!t.fieldDefinition)&&"int"===t.type}getValidator(e){return e&&e.fieldDefinition?[S1(this.formatter)]:[]}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(to))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const w1=i=>a=>i.validateUserFormat(a.value)?{phoneValidator:{valid:!1,format:i.getUserFormatPattern(),message:{labelKey:"LBL_VALIDATION_ERROR_PHONE_FORMAT",context:{value:a.value}}}}:null;let x1=(()=>{class i{formatter;constructor(e){this.formatter=e}applies(e,t){return!(!t||!t.fieldDefinition)&&"phone"===t.type}getValidator(e){return e&&e.fieldDefinition?[w1(this.formatter)]:[]}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(pu))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const E1=(i,a)=>e=>{const t=i.name||"";if(!t||!a||!a.fields)return null;const r=a.fields[t]||{},o=r.items;if(!r||!o||!o.length)return null;let s=0;const c=o.filter(l=>!(l&&l.attributes&&l.attributes.deleted));return c&&c.length<1||(c.some(l=>{const u=l.fields&&l.fields["email-fields"]||{},d=u.attributes&&u.attributes.primary_address||null;return!!d&&((0,M.isTrue)(d.value)&&s++,s>1)}),1==s)?null:0==s?{primaryEmailValidation:{valid:!1,message:{labelKey:"LBL_NO_PRIMARY_EMAIL_VALIDATION_ERROR",context:{}}}}:{primaryEmailValidation:{valid:!1,message:{labelKey:"LBL_MULTIPLE_PRIMARY_EMAIL_VALIDATION_ERROR",context:{}}}}};let F1=(()=>{class i{constructor(){}applies(e,t){return!(!t||!t.fieldDefinition)&&("line-items"===(t.type||t.fieldDefinition.type||"")&&"email_addresses"===(t.name||t.fieldDefinition.name||""))}getValidator(e,t){return e&&e.fieldDefinition&&t?[E1(e,t)]:[]}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const I1=(i,a)=>e=>{const t=i.name||"";if(!t||!a||!a.fields)return null;const r=a.fields[t]||{},o=r.items;if(!r||!o||!o.length)return null;const s={};let c=0;const l=o.filter(u=>!(u&&u.attributes&&u.attributes.deleted));return l&&l.length<1||(l.some(u=>{const d=u.fields&&u.fields["email-fields"]||{},f=d.attributes&&d.attributes.email_address||null;if(!f.value)return!1;const p=(""+f.value).toUpperCase();return s[p]?(c++,!0):(s[p]=!0,c>1)}),0==c)?null:{duplicateEmailValidation:{valid:!1,message:{labelKey:"LBL_DUPLICATE_EMAIL_VALIDATION_ERROR",context:{}}}}};let A1=(()=>{class i{constructor(){}applies(e,t){return!(!t||!t.fieldDefinition)&&("line-items"===(t.type||t.fieldDefinition.type||"")&&"email_addresses"===(t.name||t.fieldDefinition.name||""))}getValidator(e,t){return e&&e.fieldDefinition&&t?[I1(e,t)]:[]}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),lo=(()=>{class i{requiredValidator;rangeValidator;currencyValidator;dateValidator;datetimeValidator;emailValidator;floatValidator;intValidator;phoneValidator;primaryEmailValidator;duplicateEmailValidator;saveValidators;asyncSaveValidators;filterValidators;filterFieldExclusion={default:{}};saveFieldExclusions={default:{}};constructor(e,t,r,o,s,c,l,u,d,f,p){this.requiredValidator=e,this.rangeValidator=t,this.currencyValidator=r,this.dateValidator=o,this.datetimeValidator=s,this.emailValidator=c,this.floatValidator=l,this.intValidator=u,this.phoneValidator=d,this.primaryEmailValidator=f,this.duplicateEmailValidator=p,this.saveValidators=new M.OverridableMap,this.asyncSaveValidators=new M.OverridableMap,this.filterValidators=new M.OverridableMap,this.saveValidators.addEntry("default",this.getKey("required","all"),e),this.saveValidators.addEntry("default",this.getKey("range","all"),t),this.saveValidators.addEntry("default",this.getKey("currency","all"),r),this.saveValidators.addEntry("default",this.getKey("date","all"),o),this.saveValidators.addEntry("default",this.getKey("datetime","all"),s),this.saveValidators.addEntry("default",this.getKey("email","all"),c),this.saveValidators.addEntry("default",this.getKey("float","all"),l),this.saveValidators.addEntry("default",this.getKey("int","all"),u),this.saveValidators.addEntry("default",this.getKey("phone","all"),d),this.saveValidators.addEntry("default",this.getKey("primary-email","all"),f),this.saveValidators.addEntry("default",this.getKey("duplicate-email","all"),p),this.filterValidators.addEntry("default",this.getKey("date","all"),o),this.filterValidators.addEntry("default",this.getKey("datetime","all"),s),this.filterValidators.addEntry("default",this.getKey("float","all"),l),this.filterValidators.addEntry("default",this.getKey("currency","all"),r),this.filterValidators.addEntry("default",this.getKey("int","all"),u),this.filterValidators.addEntry("default",this.getKey("phone","all"),d)}registerFieldSaveValidator(e,t,r,o){this.saveValidators.addEntry(e,this.getKey(t,r),o)}registerSaveValidator(e,t,r){this.saveValidators.addEntry(e,this.getKey(t,"all"),r)}registerFieldFilterValidator(e,t,r,o){this.filterValidators.addEntry(e,this.getKey(t,r),o)}registerFilterValidator(e,t,r){this.filterValidators.addEntry(e,this.getKey(t,"all"),r)}excludeFieldSaveValidator(e,t,r){const o=this.saveFieldExclusions[e]||{},s=this.getKey(t,r);o[s]=s,this.saveFieldExclusions[e]=o}excludeSaveValidator(e,t){this.saveValidators.excludeEntry(e,this.getKey(t,"all"))}excludeFieldFilterValidator(e,t,r){const o=this.filterFieldExclusion[e]||{},s=this.getKey(t,r);o[s]=s,this.filterFieldExclusion[e]=o}excludeFilterValidator(e,t){this.filterValidators.excludeEntry(e,this.getKey(t,"all"))}registerAsyncSaveValidator(e,t,r){this.asyncSaveValidators.addEntry(e,this.getKey(t,"all"),r)}excludeAsyncSaveValidator(e,t){this.saveValidators.excludeEntry(e,this.getKey(t,"all"))}getSaveValidations(e,t,r){const o=this.saveValidators.getGroupEntries(e),s=this.getExclusions(e,this.saveFieldExclusions);return this.filterValidations(o,s,r,t)}getFilterValidations(e,t,r){const o=this.filterValidators.getGroupEntries(e),s=this.getExclusions(e,this.filterFieldExclusion);return this.filterValidations(o,s,r,t)}getAsyncSaveValidations(e,t,r){const o=[],s=this.asyncSaveValidators.getGroupEntries(e);return Object.keys(s).forEach(c=>{const l=s[c];l.applies(r,t)&&o.push(l.getValidator(t,r))}),o}getKey(e,t){return`${e}.${t}`}parseType(e){return(e.split(".")||[])[0]||""}getExclusions(e,t){return{...t.default||{},...t[e]||{}}}filterValidations(e,t,r,o){let s=[];return Object.keys(e).forEach(c=>{const l=this.getKey(this.parseType(c),o.name);if(t[c]||t[l])return;const u=e[c];u.applies(r,o)&&(s=s.concat(u.getValidator(o,r)))}),s}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(bu),n.\u0275\u0275inject(d1),n.\u0275\u0275inject(p1),n.\u0275\u0275inject(g1),n.\u0275\u0275inject(v1),n.\u0275\u0275inject(b1),n.\u0275\u0275inject(M1),n.\u0275\u0275inject(D1),n.\u0275\u0275inject(x1),n.\u0275\u0275inject(F1),n.\u0275\u0275inject(A1))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),za=(()=>{class i{validationManager;typeFormatter;constructor(e,t){this.validationManager=e,this.typeFormatter=t}buildField(e,t,r=null){const o=t&&t.fieldDefinition||{},{value:s,valueList:c,valueObject:l}=this.parseValue(t,o,e),{validators:u,asyncValidators:d}=this.getSaveValidators(e,t);return this.setupField(e.module,t,s,c,l,e,o,u,d,r)}getFieldLabel(e,t,r){const o=r.getLanguageStrings();return r.getFieldLabel(e,t,o)}parseValue(e,t,r){const o=e&&e.type||"",c=t&&t.rname||"name",l=e.name||"";let u=null,d=null;if(l&&r.attributes[l]){if("relate"===o&&"non-db"===(t&&t.source||"")&&""!==c)return u=r.attributes[l][c],{value:u,valueList:d,valueObject:r.attributes[l]};u=r.attributes[l]}else u="";return"line-items"===o?{value:null,valueList:d}:(Array.isArray(u)&&(d=u,u=null),!u&&t.default?u=t.default:null===u&&(u=""),{value:u,valueList:d})}setupField(e,t,r,o,s,c,l,u,d,f){const p=(0,ne.merge)(l?.metadata??{},t?.metadata??{}),m=this.typeFormatter.toUserFormat(t.type,r,{mode:"edit",metadata:p});t.link&&(p.link=t.link);const h=new M.BaseField;h.type=t.type||l.type,h.name=t.name||l.name||"",h.vardefBased=t?.vardefBased??l?.vardefBased??!1,h.readonly=(0,M.isTrue)(t.readonly)||(0,M.isTrue)(l.readonly)||!1,h.display=t.display||l.display||"default",h.defaultDisplay=h.display,"default"===h.defaultDisplay&&(h.defaultDisplay="show"),h.value=r,h.metadata=p,h.definition=l,t?.lineItems&&(h.definition.lineItems=t.lineItems),h.labelKey=t.label||l.vname||"",h.dynamicLabelKey=t.dynamicLabelKey||l.dynamicLabelKey||"",h.validators=u,h.asyncValidators=d,"line-items"===h.type?(h.valueObjectArray=c.attributes[h.name],h.itemFormArray=new Ce.UntypedFormArray([]),h.formControl=new Ce.UntypedFormControl(m)):h.formControl=new Ce.UntypedFormControl(m),h.attributes={},h.source="field",h.logic=t.logic||l.logic||null,h.displayLogic=t.displayLogic||l.displayLogic||null;const g={},b={};return this.addFieldDependencies(h.logic,g,b,"logic"),this.addFieldDependencies(h.displayLogic,g,b,"displayLogic"),h.attributeDependencies=Object.keys(b).map(_=>b[_]),h.fieldDependencies=g,o&&(h.valueList=o),s&&(h.valueObject=s),f&&(h.label=this.getFieldLabel(t.label,e,f)),!h.labelKey&&t.label&&(h.labelKey=t.label),h}addFieldDependencies(e,t,r,o){e&&Object.keys(e).length&&Object.keys(e).forEach(s=>{const c=e[s]||{};c.params&&(c.params&&c.params.attributeDependencies&&c.params.attributeDependencies.forEach(l=>{r[l.field+"."+l.attribute]=l}),c.params&&c.params.fieldDependencies&&c.params.fieldDependencies.forEach(l=>{const d=(t[l]??{}).types??[];d.push(o),t[l]={field:l,type:d}}))})}getSaveValidators(e,t){return{validators:this.validationManager.getSaveValidations(e.module,t,e),asyncValidators:this.validationManager.getAsyncSaveValidations(e.module,t,e)}}getParentValue(e,t,r,o){const s=o.valueParent??"field";return o.valuePath?(0,Ze.Z)("record"===s?e:t,o.valuePath,""):(0,Ze.Z)("record"===s?e.attributes:t.valueObject,r,"")}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(lo),n.\u0275\u0275inject(it))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),T1=(()=>{class i extends za{validationManager;typeFormatter;constructor(e,t){super(e,t),this.validationManager=e,this.typeFormatter=t}addGroupFields(e,t,r,o,s,c){const u=(t&&t.fieldDefinition||{}).groupFields||{};Object.keys(u).forEach(f=>{const p=u[f];if(o(e,f))return;p&&"relate"===p.type&&"parent_type"===p.type_name&&(p.module=e.attributes.parent_type);const h=s(e,{name:p.name,label:p.vname,type:p.type,fieldDefinition:p},r);h.source="groupField",c(e,p.name,h)})}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(lo),n.\u0275\u0275inject(it))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),qu=(()=>{class i extends za{validationManager;typeFormatter;constructor(e,t){super(e,t),this.validationManager=e,this.typeFormatter=t}addAttributes(e,t,r,o,s,c){const l=Object.keys(t)||[];l.length<1||l.forEach(u=>{this.addFieldAttributes(e,t[u],o,s,c)})}addFieldAttributes(e,t,r,o,s){const l=(t&&t.definition||{}).attributeFields||{};Object.keys(l).forEach(d=>{const f=l[d];if(t.attributes[d])return;const m=o(e,t,{name:f.name,label:f.vname,type:f.type,fieldDefinition:f},r);s(e,t,f.name,m)})}buildAttribute(e,t,r,o=null){const s=r&&r.fieldDefinition||{},{value:c,valueList:l,valueObject:u}=this.parseAttributeValue(r,s,e,t),{validators:d,asyncValidators:f}=this.getSaveValidators(e,r),m=this.setupField(e.module,r,c,l,u,e,s,d,f,o);return m.valuePath=s.valuePath,m.valueParent=s.valueParent,m.source="attribute",m.parentKey=t.name,m}addAttributeToRecord(e,t,r,o){!e||!r||!t||!o||(t.attributes=t.attributes||{},t.attributes[r]=o,e.formGroup&&o.formControl&&e.formGroup.addControl(r,o.formControl))}parseAttributeValue(e,t,r,o){const l=t&&t.rname||"name",u=e.name||"";let d;return"relate"===(e&&e.type||"")&&"non-db"===(t&&t.source||"")&&""!==l?(d=this.getParentValue(r,o,u,t)[l],{value:d,valueList:null,valueObject:this.getParentValue(r,o,u,t)}):(d=u?this.getParentValue(r,o,u,t):"",d=this.getParentValue(r,o,u,t),Array.isArray(d)?{value:null,valueList:d,valueObject:null}:(0,Yy.Z)(d)?{value:null,valueList:null,valueObject:d}:{value:d,valueList:null,valueObject:null})}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(lo),n.\u0275\u0275inject(it))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Ju=(()=>{class i extends za{validationManager;typeFormatter;constructor(e,t){super(e,t),this.validationManager=e,this.typeFormatter=t}buildFilterField(e,t,r=null){const o=t&&t.fieldDefinition||{},{validators:s,asyncValidators:c}=this.getFilterValidators(e,t),l=this.setupField(e.searchModule,t,null,null,null,e,o,s,c,r);return l.criteria=this.initFieldFilter(e.criteria,t,l),l}getFilterValidators(e,t){return{validators:this.validationManager.getFilterValidations(e.searchModule,t,e),asyncValidators:[]}}initFieldFilter(e,t,r){let o;const s=t.name;let c=t.type;return"composite"===c&&(c=r.definition.type),o=e.filters[s]&&e.filters[s].fieldType?(0,M.deepClone)(e.filters[s]):{field:s,fieldType:c,operator:"",values:[]},o}isCriteriaFieldInitialized(e,t){const r=e.criteriaFields[t];return!!r&&!r.vardefBased}addToSavedFilter(e,t,r){!e||!t||!r||(e.criteriaFields||(e.criteriaFields={}),e.criteriaFields[t]=r,e.criteria.filters||(e.criteria.filters={}),e.criteria.filters[t]=r.criteria,e.criteriaFormGroup&&r.formControl&&e.criteriaFormGroup.addControl(t,r.formControl))}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(lo),n.\u0275\u0275inject(it))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),N1=(()=>{class i extends Ju{validationManager;typeFormatter;constructor(e,t){super(e,t),this.validationManager=e,this.typeFormatter=t}buildFilterAttribute(e,t,r,o=null){const s=r&&r.fieldDefinition||{};s.valuePath||(s.valuePath="criteria."+(r.name||s.name));const{value:c,valueList:l,valueObject:u}=this.parseFilterAttributeValue(r,s,e,t),{validators:d,asyncValidators:f}=this.getFilterValidators(e,r),m=this.setupField(e.searchModule,r,c,l,u,e,s,d,f,o);return m.valuePath=s.valuePath,m.source="attribute",m.parentKey=t.definition.name,m}addAttributeToSavedFilter(e,t,r,o){!e||!r||!t||!o||(t.attributes=t.attributes||{},t.attributes[r]=o,e.criteriaFormGroup&&o.formControl&&e.criteriaFormGroup.addControl(r,o.formControl))}parseFilterAttributeValue(e,t,r,o){const s=e.name||"";let c;return c=s?this.getParentValue(r,o,s,t):"",Array.isArray(c)?{value:null,valueList:c,valueObject:null}:(0,Yy.Z)(c)?{value:null,valueList:null,valueObject:c}:{value:c,valueList:null,valueObject:null}}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(lo),n.\u0275\u0275inject(it))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),L1=(()=>{class i extends qu{validationManager;typeFormatter;constructor(e,t){super(e,t),this.validationManager=e,this.typeFormatter=t}addLineItems(e,t,r,o,s){const c=Object.keys(t)||[];c.length<1||c.forEach(l=>{this.addFieldLineItems(e,t[l],o,s)})}addFieldLineItems(e,t,r,o){const s=t&&t.definition||{},l=t.valueObjectArray&&t.valueObjectArray||[];if("line-items"!==(t&&t.type||"")||!l.length)return;const u=s.lineItems?.definition||{};t.items=[],l.forEach(d=>{this.addLineItem(u,d,o,r,e,t)})}addLineItem(e,t,r,o,s,c){const l={name:e.name,label:e.vname,type:e.type,fieldDefinition:(0,M.deepClone)(e)},u={id:t.id||"",type:t.type||"",module:t.module||"",attributes:t.attributes||{},fields:{},formGroup:new Ce.UntypedFormGroup({})};r(u,l,o),c.itemFormArray.push(u.formGroup),c.items.push(u)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(lo),n.\u0275\u0275inject(it))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),ei=(()=>{class i{fieldBuilder;groupFieldBuilder;attributeBuilder;filterFieldBuilder;filterAttributeBuilder;lineItemBuilder;languageStore;constructor(e,t,r,o,s,c,l){this.fieldBuilder=e,this.groupFieldBuilder=t,this.attributeBuilder=r,this.filterFieldBuilder=o,this.filterAttributeBuilder=s,this.lineItemBuilder=c,this.languageStore=l}buildShallowField(e,t){return{type:e,value:t,definition:{type:e}}}addField(e,t,r=null){const o=this.fieldBuilder.buildField(e,t,r);return this.addToRecord(e,t.name,o),this.groupFieldBuilder.addGroupFields(e,t,r,this.isFieldInitialized.bind(this),this.fieldBuilder.buildField.bind(this.fieldBuilder),this.addToRecord.bind(this)),this.attributeBuilder.addAttributes(e,e.fields,t,r,this.attributeBuilder.buildAttribute.bind(this.attributeBuilder),this.attributeBuilder.addAttributeToRecord.bind(this.attributeBuilder)),this.lineItemBuilder.addLineItems(e,e.fields,t,r,this.addField.bind(this)),o}addFilterField(e,t,r=null){if(t.vardefBased&&!(0,ne.isEmpty)(e.criteriaFields[t.name]))return e.criteriaFields[t.name];const o=this.filterFieldBuilder.buildFilterField(e,t,r);return this.filterFieldBuilder.addToSavedFilter(e,t.name,o),this.groupFieldBuilder.addGroupFields(e,t,r,this.filterFieldBuilder.isCriteriaFieldInitialized.bind(this.filterFieldBuilder),this.filterFieldBuilder.buildFilterField.bind(this.filterFieldBuilder),this.filterFieldBuilder.addToSavedFilter.bind(this.filterFieldBuilder)),this.attributeBuilder.addAttributes(e,e.criteriaFields,t,r,this.filterAttributeBuilder.buildFilterAttribute.bind(this.filterAttributeBuilder),this.filterAttributeBuilder.addAttributeToSavedFilter.bind(this.filterAttributeBuilder)),o}addLineItem(e,t,r,o=null){o||(o={id:"",module:r.definition.module||"",attributes:{},fields:{},formGroup:new Ce.UntypedFormGroup({})}),this.lineItemBuilder.addLineItem(e,o,this.addField.bind(this),this.languageStore,t,r),r.itemFormArray.updateValueAndValidity()}removeLineItem(e,t){const r=e.items[t];r&&(r.id?r.attributes.deleted=1:e.items=t>-1?[...e.items.slice(0,t),...e.items.slice(t+1)]:e.items,e.itemFormArray.clear(),e.items.forEach(o=>{!o||o&&o.attributes&&o.attributes.deleted||e.itemFormArray.push(o.formGroup)}),e.itemFormArray.updateValueAndValidity())}addToRecord(e,t,r){!e||!t||!r||(e.fields||(e.fields={}),e.fields[t]=r,e.formGroup&&r.itemFormArray&&e.formGroup.addControl(t+"-items",r.itemFormArray),e.formGroup&&r.formControl&&e.formGroup.addControl(t,r.formControl))}addVardefOnlyField(e,t,r=null){const o=this.fieldBuilder.buildField(e,t,r);return this.addVardefOnlyFieldToRecord(e,t.name,o),o}addVardefOnlyFieldToRecord(e,t,r){!e||!t||!r||(e.fields||(e.fields={}),e.fields[t]=r)}isFieldInitialized(e,t){return!!e.fields[t]}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(za),n.\u0275\u0275inject(T1),n.\u0275\u0275inject(qu),n.\u0275\u0275inject(Ju),n.\u0275\u0275inject(N1),n.\u0275\u0275inject(L1),n.\u0275\u0275inject(Oe))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),ci=(()=>{class i{fieldManager;language;constructor(e,t){this.fieldManager=e,this.language=t}buildEmptyRecord(e){return{id:"",module:e,attributes:{id:""},fields:{},formGroup:new Ce.UntypedFormGroup({})}}initFields(e,t){return e.fields||(e.fields={}),e.formGroup||(e.formGroup=new Ce.UntypedFormGroup({})),t.forEach(r=>{r&&r.name&&!e.fields[r.name]&&(r?.vardefBased?this.fieldManager.addVardefOnlyField(e,r,this.language):this.fieldManager.addField(e,r,this.language))}),e.fields}injectParamFields(e,t,r){Object.keys(e).forEach(o=>{const s=r[o];if((0,M.isVoid)(s))this.handleLinkTypeRelationship(o,e,r,t);else{const c=s.type||"";let l=s.id_name||"",d=s.rname||"";if("relate"===c&&l===(s.name||""))return void(t.attributes[o]=e[o]);if("parent"===c){const f={};let p="name",m="parent_id";const b=(r[o+"-group"]??{}).groupFields[o];return b&&b.rname&&(p=b.rname),p&&(f[p]=e[o]),m&&e[m]&&(f.id=e[m]),void(t.attributes[o]=f)}if("relate"===c){const f={};return d&&(f[d]=e[o]),l&&e[l]&&(f.id=e[l]),void(t.attributes[o]=f)}t.attributes[o]=e[o]}})}handleLinkTypeRelationship(e,t,r,o){if("return_relationship"===e){const s=t.return_relationship;if(!s)return;Object.keys(r).forEach(c=>{const l=r[c];if("link"!==(l.type||""))return;const d=l.relationship||"";if(d&&d===s){const f=l.name,p=l.module??t.return_module??"";if(!p)return;const m=t.parent_name;if(!m)return;const h=l?.relationshipMetadata?.related_id,g=t[h]??"";if(!g)return;o.attributes[f]=[{id:g,module:p,attributes:{id:g,name:m}}]}})}}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(ei),n.\u0275\u0275inject(Oe))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),B1=(()=>{class i extends cn{typeFormatter;registry;recordManager;logic;logicDisplay;constructor(e,t,r,o,s){super(e,o,s),this.typeFormatter=e,this.registry=t,this.recordManager=r,this.logic=o,this.logicDisplay=s}ngOnInit(){super.ngOnInit(),this.initUpdateParentSubscription()}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}getComponentType(e,t){return this.registry.getDisplayType(this.record&&this.record.module||"default",e,t&&t.displayType||"",this.getMode(),this.field.name)}getAttributes(){const e=[];return this.field.definition.layout.forEach(t=>{!this.field.attributes[t]||"none"===this.field.attributes[t].display||e.push(this.field.attributes[t])}),e}getModule(){return this.record?this.record.module:null}getMode(){return"filter"===this.mode?"edit":this.mode}getDirection(){let e="flex-column";return"inline"===this.field.definition.display&&(e="flex-row"),e}isConfigured(){return this.hasDisplay()&&this.hasLayout()&&this.hasAttributes()}showLabel(e){const t=e.definition||null,r=t.showLabel||null;return!(!t||!r||"hide"===(e.metadata&&e.metadata.labelDisplay||""))&&(r.includes("*")||r.includes(this.mode))}hasAttributes(){return!(!this.field.definition.attributeFields||(0,M.emptyObject)(this.field.definition.attributeFields))}hasLayout(){return!(!this.field.definition.layout||!this.field.definition.layout.length)}hasDisplay(){return!!this.field.definition.display}initUpdateParentSubscription(){this.field.attributes&&Object.keys(this.field.attributes).forEach(e=>{const t=this.field.attributes[e];t.valueChanges$&&this.subs.push(t.valueChanges$.subscribe(r=>{this.setValueOnParent(t,r.valueObject||r.valueList||r.value)}))})}setValueOnParent(e,t){const r=e.valueParent??"field";e.valuePath?(0,Na.Z)("record"===r?this.record:this.field,e.valuePath,t):(0,Na.Z)("record"===r?this.record.attributes:this.field.valueObject,e.name,t)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(it),n.\u0275\u0275directiveInject(Ic),n.\u0275\u0275directiveInject(ci),n.\u0275\u0275directiveInject(ft),n.\u0275\u0275directiveInject(pt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["ng-component"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:0,vars:0,template:function(t,r){},encapsulation:2})}return i})();function f5(i,a){1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275element(1,"scrm-label",1),n.\u0275\u0275elementContainerEnd())}function p5(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"label"),n.\u0275\u0275element(1,"scrm-label",6),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext().$implicit,t=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("labelKey",e.labelKey)("module",t.getModule())}}function m5(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"span",7),n.\u0275\u0275element(1,"scrm-dynamic-field",8),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext().$implicit,t=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("componentType",t.getComponentType(e.type,e.definition))("field",e)("klass",t.klass)("mode",t.getMode())("record",t.record)("parent",t.parent)("type",e.type)}}function g5(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",3)(1,"span",4),n.\u0275\u0275template(2,p5,2,2,"label",0),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(3,m5,2,7,"span",5),n.\u0275\u0275elementEnd()),2&i){const e=a.$implicit,t=n.\u0275\u0275nextContext(2);n.\u0275\u0275classProp("flex-fill","edit"===t.mode&&"flex-row"===t.getDirection())("align-self-start","flex-row"===t.getDirection()&&e.labelKey&&t.showLabel(e)),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",e.labelKey&&t.showLabel(e)),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.type)}}function h5(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"div"),n.\u0275\u0275template(2,g5,4,6,"div",2),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275classMapInterpolate1("d-flex ",e.getDirection()," justify-content-start align-items-end field-group h-100 composite-field-wrapper"),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",e.getAttributes())}}let oa=(()=>{class i extends B1{typeFormatter;registry;recordManager;logic;logicDisplay;constructor(e,t,r,o,s){super(e,t,r,o,s),this.typeFormatter=e,this.registry=t,this.recordManager=r,this.logic=o,this.logicDisplay=s}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(it),n.\u0275\u0275directiveInject(Ic),n.\u0275\u0275directiveInject(ci),n.\u0275\u0275directiveInject(ft),n.\u0275\u0275directiveInject(pt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-composite-field"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:2,vars:2,consts:[[4,"ngIf"],["labelKey","LBL_BAD_GROUP_FIELD_CONFIG"],["class","field-group-item d-flex flex-column justify-content-end h-100 w-100",3,"flex-fill","align-self-start",4,"ngFor","ngForOf"],[1,"field-group-item","d-flex","flex-column","justify-content-end","h-100","w-100"],[1,"field-group-label","pt-2","pr-1"],["class","field-group-field pr-1 pb-1 composite-field",4,"ngIf"],[3,"labelKey","module"],[1,"field-group-field","pr-1","pb-1","composite-field"],[3,"componentType","field","klass","mode","record","parent","type"]],template:function(t,r){1&t&&(n.\u0275\u0275template(0,f5,2,0,"ng-container",0),n.\u0275\u0275template(1,h5,3,4,"ng-container",0)),2&t&&(n.\u0275\u0275property("ngIf",!r.isConfigured()),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.isConfigured()))},dependencies:[F.NgForOf,F.NgIf,Ot,Ua],encapsulation:2})}return i})(),O1=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Nt,Va]})}return i})();const R1=[...o1,c1,O1],v5=[...a1,ra,oa],Qu={...Hu,"grouped-field.list":ra,"grouped-field.detail":ra,"grouped-field.edit":ra,"grouped-field.filter":ra,"composite.list":oa,"composite.detail":oa,"composite.edit":oa,"composite.filter":oa};let Ac=(()=>{class i extends pi{constructor(){super()}getDefaultMap(){return Qu}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),j1=(()=>{class i extends cn{typeFormatter;registry;recordManager;logic;fieldManager;logicDisplay;constructor(e,t,r,o,s,c){super(e,o,c),this.typeFormatter=e,this.registry=t,this.recordManager=r,this.logic=o,this.fieldManager=s,this.logicDisplay=c}ngOnInit(){super.ngOnInit(),this.initUpdateParentSubscription()}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}getComponentType(e,t){return this.registry.getDisplayType(this.record&&this.record.module||"default",e,t&&t.displayType||"",this.getMode(),this.field.name)}getItems(){this.field.items=this.field.items||[];const e=this.field.items,t=e&&e.filter(o=>!(o&&o.attributes&&o.attributes.deleted)),r=!!this.field?.definition?.lineItems?.labelOnFirstLine;return t.forEach((o,s)=>{this.setAttributeLabelDisplay(o,!r||s<=0)}),this.field.items}getItemFields(e){const t=e.fields||{};return Object.keys(t).map(r=>t[r])}removeItem(e){this.fieldManager.removeLineItem(this.field,e),this.updateItems(this.field.items),this.triggerLineActionEvents(M.LineActionEvent.onLineItemRemove)}addEmptyItem(){this.fieldManager.addLineItem(this.field?.definition?.lineItems?.definition||{},this.record,this.field),this.triggerLineActionEvents(M.LineActionEvent.onLineItemAdd)}updateItems(e){this.field.items=e}getModule(){return this.record?this.record.module:null}getMode(){return"filter"===this.mode?"edit":this.mode}getDirection(){let e="flex-column";return"inline"===this.field.definition.display&&(e="flex-row"),e}isConfigured(){return this.hasItemConfig()}isEditable(){return(0,M.isEditable)(this.mode)}showLabel(e){const t=e.definition||null,r=t.showLabel||null;return!(!t||!r)&&(r.includes("*")||r.includes(this.mode))}getMessageContext(e,t){const r=e&&e.message&&e.message.context||{};return r.module=t&&t.module||"",r}getMessageLabelKey(e){return e&&e.message&&e.message.labelKey||""}hasItemConfig(){return!!this.field?.definition?.lineItems?.definition}initUpdateParentSubscription(){this.field.attributes&&Object.keys(this.field.attributes).forEach(e=>{const t=this.field.attributes[e];t.valueChanges$&&this.subs.push(t.valueChanges$.subscribe(r=>{this.setValueOnParent(t,r.valueObject||r.valueList||r.value)}))})}setValueOnParent(e,t){e.valuePath?(0,Na.Z)(this.field,e.valuePath,t):(0,Na.Z)(this.field.valueObject,e.name,t)}setAttributeLabelDisplay(e,t){const r=e.fields||{};Object.keys(r).forEach(o=>{const s=r[o];if("composite"!==s.type)return;const c=s.attributes||{};Object.keys(c).forEach(l=>{const u=c[l],d=u.metadata||{};d.labelDisplay=t?"default":"hide",u.metadata=d})})}triggerLineActionEvents(e){const t=this.field?.logic||{};(0,M.emptyObject)(t)||Object.keys(t).forEach(r=>{const s=(t[r]||null)?.params?.triggerOnEvents?.[e];(0,M.isTrue)(s)&&this.logic.runLogic(this.field,this.mode,this.record)})}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(it),n.\u0275\u0275directiveInject(Ac),n.\u0275\u0275directiveInject(ci),n.\u0275\u0275directiveInject(ft),n.\u0275\u0275directiveInject(ei),n.\u0275\u0275directiveInject(pt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["ng-component"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:0,vars:0,template:function(t,r){},encapsulation:2})}return i})();function _5(i,a){1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275element(1,"scrm-label",1),n.\u0275\u0275elementContainerEnd())}function y5(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div"),n.\u0275\u0275element(1,"scrm-dynamic-field",10),n.\u0275\u0275elementEnd()),2&i){const e=a.$implicit,t=n.\u0275\u0275nextContext(2).$implicit,r=n.\u0275\u0275nextContext(2);n.\u0275\u0275classMapInterpolate2("",e.type," ",e.name,""),n.\u0275\u0275advance(1),n.\u0275\u0275property("componentType",r.getComponentType(e.type,e.definition))("field",e)("klass",r.klass)("mode",r.mode)("record",t)("parent",r.parent)("type",e.type)}}function b5(i,a){if(1&i&&n.\u0275\u0275element(0,"scrm-button",11),2&i){const e=n.\u0275\u0275nextContext(2),t=e.$implicit,r=e.index,o=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("config",o.getRemoveItemButton(t,r))}}function C5(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",6)(1,"div",7),n.\u0275\u0275template(2,y5,2,11,"div",8),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(3,"div",9),n.\u0275\u0275template(4,b5,1,1,"scrm-button",4),n.\u0275\u0275elementEnd()()),2&i){const e=n.\u0275\u0275nextContext().$implicit,t=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(2),n.\u0275\u0275property("ngForOf",t.getItemFields(e)),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",t.isEditable())}}function M5(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,C5,5,2,"div",5),n.\u0275\u0275elementContainerEnd()),2&i){const e=a.$implicit;n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!(e&&e.attributes&&e.attributes.deleted))}}function S5(i,a){if(1&i&&n.\u0275\u0275element(0,"scrm-button",11),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("config",e.getAddItemButton())}}const D5=function(i){return{field:i}};function w5(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",13),n.\u0275\u0275element(1,"scrm-dynamic-label",14),n.\u0275\u0275elementEnd()),2&i){const e=a.$implicit,t=n.\u0275\u0275nextContext(4);n.\u0275\u0275advance(1),n.\u0275\u0275property("context",t.getMessageContext(e.value,t.record))("fields",n.\u0275\u0275pureFunction1(3,D5,t.field))("labelKey",t.getMessageLabelKey(e.value))}}function x5(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,w5,2,5,"div",12),n.\u0275\u0275pipe(2,"keyvalue"),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(3);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",n.\u0275\u0275pipeBind1(2,1,e.field.itemFormArray.errors))}}function E5(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,x5,3,3,"ng-container",0),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.field.itemFormArray.invalid)}}function F5(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"div")(2,"div"),n.\u0275\u0275template(3,M5,2,1,"ng-container",2),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(4,"div",3),n.\u0275\u0275template(5,S5,1,1,"scrm-button",4),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(6,E5,2,1,"ng-container",0),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275classMapInterpolate2("line-items d-flex flex-column ",e.field.type," ",e.field.name,""),n.\u0275\u0275advance(1),n.\u0275\u0275classMapInterpolate1("d-flex ",e.getDirection()," justify-content-start align-items-end line-item h-100"),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",e.getItems()),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",e.isEditable()),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.isEditable()&&e.field.itemFormArray&&e.field.itemFormArray.errors)}}let k1=(()=>{class i extends j1{typeFormatter;registry;recordManager;logic;fieldManager;logicDisplay;constructor(e,t,r,o,s,c){super(e,t,r,o,s,c),this.typeFormatter=e,this.registry=t,this.recordManager=r,this.logic=o,this.fieldManager=s,this.logicDisplay=c}getAddItemButton(){return{klass:"btn btn-sm btn-outline-secondary m-0 border-0",icon:"plus",onClick:()=>{this.addEmptyItem()}}}getRemoveItemButton(e,t){return{klass:"btn btn-sm btn-outline-secondary m-0 border-0",icon:"minimise",onClick:()=>{this.removeItem(t)}}}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(it),n.\u0275\u0275directiveInject(Ac),n.\u0275\u0275directiveInject(ci),n.\u0275\u0275directiveInject(ft),n.\u0275\u0275directiveInject(ei),n.\u0275\u0275directiveInject(pt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-line-items-field"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:2,vars:2,consts:[[4,"ngIf"],["labelKey","LBL_LINE_ITEMS_FIELD_CONFIG"],[4,"ngFor","ngForOf"],[1,"line-item-buttons","d-flex","justify-content-end","mt-1"],[3,"config",4,"ngIf"],["class","d-flex flex-row line-item-entry w-100 align-items-end",4,"ngIf"],[1,"d-flex","flex-row","line-item-entry","w-100","align-items-end"],[1,"flex-grow-1","line-item-entry-composite"],[3,"class",4,"ngFor","ngForOf"],[1,"line-item-entry-buttons","mb-1"],[3,"componentType","field","klass","mode","record","parent","type"],[3,"config"],["class","invalid-feedback d-block",4,"ngFor","ngForOf"],[1,"invalid-feedback","d-block"],[3,"context","fields","labelKey"]],template:function(t,r){1&t&&(n.\u0275\u0275template(0,_5,2,0,"ng-container",0),n.\u0275\u0275template(1,F5,7,10,"ng-container",0)),2&t&&(n.\u0275\u0275property("ngIf",!r.isConfigured()),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.isConfigured()))},dependencies:[F.NgForOf,F.NgIf,Ot,Ua,Nn,no,F.KeyValuePipe],encapsulation:2})}return i})();function I5(i,a){if(1&i&&n.\u0275\u0275element(0,"scrm-dynamic-field",3),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("componentType",e.componentType)("field",e.field)("klass",e.klass)("mode",e.componentMode)("record",e.record)("parent",e.record)("type",e.type)}}function A5(i,a){if(1&i&&n.\u0275\u0275element(0,"scrm-line-items-field",4),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("field",e.field)("klass",e.klass)("mode",e.componentMode)("record",e.record)("parent",e.record)}}function T5(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,I5,1,7,"scrm-dynamic-field",1),n.\u0275\u0275template(2,A5,1,5,"scrm-line-items-field",2),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf","line-items"!==e.type),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf","line-items"===e.type)}}let Ki=(()=>{class i{registry;mode;type;field;record=null;klass=null;class="field";map=Qu;constructor(e){this.registry=e}ngOnInit(){this.setHostClass()}get componentMode(){let e=this.mode;return"create"===e&&(e="edit"),["edit","filter"].includes(e)&&this.field.readonly&&(e="detail"),e}get componentType(){return this.registry.getDisplayType(this.record&&this.record.module||"default",this.type,this.field.definition&&this.field.definition.displayType||"",this.componentMode,this.field.name)}setHostClass(){const e=[];e.push("field"),this.mode&&e.push("field-mode-"+this.mode),this.type&&e.push("field-type-"+this.type),this.field&&this.field.name&&e.push("field-name-"+this.field.name),this.class=e.join(" ")}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(Ac))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-field"]],hostVars:2,hostBindings:function(t,r){2&t&&n.\u0275\u0275classMap(r.class)},inputs:{mode:"mode",type:"type",field:"field",record:"record",klass:"klass"},decls:1,vars:1,consts:[[4,"ngIf"],[3,"componentType","field","klass","mode","record","parent","type",4,"ngIf"],[3,"field","klass","mode","record","parent",4,"ngIf"],[3,"componentType","field","klass","mode","record","parent","type"],[3,"field","klass","mode","record","parent"]],template:function(t,r){1&t&&n.\u0275\u0275template(0,T5,3,2,"ng-container",0),2&t&&n.\u0275\u0275property("ngIf",r.field&&"none"!==r.field.display)},dependencies:[F.NgIf,Ua,k1],encapsulation:2})}return i})();function N5(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"label",1),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext(2).$implicit,t=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("ngClass",t.labelClass),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(e.field.label)}}function L5(i,a){if(1&i&&n.\u0275\u0275element(0,"scrm-label",8),2&i){const e=n.\u0275\u0275nextContext(2).$implicit,t=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("labelKey",e.field.labelKey)("ngClass",t.labelClass)}}function B5(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div"),n.\u0275\u0275template(1,N5,2,2,"label",6),n.\u0275\u0275template(2,L5,1,2,"scrm-label",7),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext().$implicit,t=n.\u0275\u0275nextContext(2);n.\u0275\u0275classProp("pr-3","inline"===t.labelDisplay),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.field.label),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!e.field.label&&e.field.labelKey)}}function O5(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div"),n.\u0275\u0275element(1,"scrm-field",9),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext().$implicit,t=n.\u0275\u0275nextContext(2);n.\u0275\u0275classProp("flex-grow-1","inline"===t.labelDisplay),n.\u0275\u0275advance(1),n.\u0275\u0275property("field",e.field)("klass",t.inputClass)("mode",t.fieldMode)("record",t.record)("type",e.field.type)}}function R5(i,a){1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275projection(1),n.\u0275\u0275elementContainerEnd())}function j5(i,a){1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275projection(1,1),n.\u0275\u0275elementContainerEnd())}function k5(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",1)(1,"div",2),n.\u0275\u0275template(2,B5,3,4,"div",3),n.\u0275\u0275template(3,O5,2,7,"div",4),n.\u0275\u0275template(4,R5,2,0,"ng-container",5),n.\u0275\u0275template(5,j5,2,0,"ng-container",5),n.\u0275\u0275elementEnd()()),2&i){const e=a.$implicit,t=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("ngClass",t.colClass),n.\u0275\u0275advance(1),n.\u0275\u0275classProp("align-items-center","inline"===t.labelDisplay&&!t.colAlignItems)("flex-column","top"===t.labelDisplay)("flex-row","inline"===t.labelDisplay)("justify-content-end",!e.field),n.\u0275\u0275property("ngClass",t.colAlignItems?t.colAlignItems:""),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.field&&"none"!==e.field.display),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.field&&"none"!==e.field.display),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.actionSlot),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.specialSlot)}}function P5(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",1),n.\u0275\u0275template(1,k5,6,14,"div",0),n.\u0275\u0275elementEnd()),2&i){const e=a.$implicit,t=n.\u0275\u0275nextContext();n.\u0275\u0275property("ngClass",t.rowClass),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",e.cols)}}const $5=[[["","field-grid-actions",""]],[["","field-grid-actions",""]]],U5=["[field-grid-actions]","[field-grid-actions]"];let Xu=(()=>{class i extends _u{breakpointObserver;fields;record;fieldMode="detail";constructor(e){super(e),this.breakpointObserver=e}ngOnChanges(){this.buildGrid()}buildGrid(){const e=[];if(!this.fields||0===this.fields.length)return void(this.fieldGrid=[]);let t=0,r={cols:[]};e.push(r),this.fields.forEach(s=>{t>=this.colNumber&&(t=0,r={cols:[]},e.push(r)),r.cols.push({field:s}),t++}),t<this.colNumber&&this.fillRow(e[e.length-1]),this.addSpecialSlots(e),this.fieldGrid=e}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject($))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-field-grid"]],inputs:{fields:"fields",record:"record",fieldMode:"fieldMode"},features:[n.\u0275\u0275InheritDefinitionFeature,n.\u0275\u0275NgOnChangesFeature],ngContentSelectors:U5,decls:2,vars:1,consts:[[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[1,"d-flex",3,"ngClass"],[3,"pr-3",4,"ngIf"],[3,"flex-grow-1",4,"ngIf"],[4,"ngIf"],[3,"ngClass",4,"ngIf"],[3,"labelKey","ngClass",4,"ngIf"],[3,"labelKey","ngClass"],[3,"field","klass","mode","record","type"]],template:function(t,r){1&t&&(n.\u0275\u0275projectionDef($5),n.\u0275\u0275elementStart(0,"form"),n.\u0275\u0275template(1,P5,2,2,"div",0),n.\u0275\u0275elementEnd()),2&t&&(n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",r.fieldGrid))},dependencies:[F.NgClass,F.NgForOf,F.NgIf,Ki,Ot],encapsulation:2})}return i})(),P1=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Nt,Va,Xt,io]})}return i})(),Pn=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[R1,F.CommonModule,Va,P1]})}return i})(),uo=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Xt,Pn,Nt]})}return i})();function V5(i,a){1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"span",10),n.\u0275\u0275text(2,"*"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd())}function z5(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"button",11),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(e);const r=n.\u0275\u0275nextContext(4);return n.\u0275\u0275resetView(r.dataSource.getEditAction())}),n.\u0275\u0275element(1,"scrm-image",12),n.\u0275\u0275elementEnd()}}const W5=function(){return["edit","create"]};function G5(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"div",5)(2,"strong")(3,"label",1),n.\u0275\u0275text(4),n.\u0275\u0275pipe(5,"uppercase"),n.\u0275\u0275elementEnd(),n.\u0275\u0275text(6,": "),n.\u0275\u0275template(7,V5,3,0,"ng-container",3),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(8,"div",6)(9,"div",7),n.\u0275\u0275element(10,"scrm-field",8),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(11,"div"),n.\u0275\u0275template(12,z5,2,0,"button",9),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext().$implicit,t=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(3),n.\u0275\u0275property("ngClass",t.labelClass),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(n.\u0275\u0275pipeBind1(5,9,e.field.label)),n.\u0275\u0275advance(3),n.\u0275\u0275property("ngIf",e.field.definition.required&&n.\u0275\u0275pureFunction0(11,W5).includes(t.config.mode)),n.\u0275\u0275advance(3),n.\u0275\u0275property("type",e.field.type)("mode",t.config.mode)("klass",t.inputClass)("field",e.field)("record",t.record),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",!1!==e.field.definition.inline_edit&&!e.field.readonly&&!e.field.definition.readonly&&t.dataSource.inlineEdit&&"detail"===t.config.mode)}}function K5(i,a){1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275projection(1),n.\u0275\u0275elementContainerEnd())}function H5(i,a){1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275projection(1,1),n.\u0275\u0275elementContainerEnd())}function Z5(i,a){1&i&&n.\u0275\u0275element(0,"div",13)}function q5(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",1),n.\u0275\u0275template(1,G5,13,12,"ng-container",3),n.\u0275\u0275template(2,K5,2,0,"ng-container",3),n.\u0275\u0275template(3,H5,2,0,"ng-container",3),n.\u0275\u0275template(4,Z5,1,0,"div",4),n.\u0275\u0275elementEnd()),2&i){const e=a.$implicit,t=a.index,r=n.\u0275\u0275nextContext(),o=r.$implicit,s=r.index,c=n.\u0275\u0275nextContext();n.\u0275\u0275classProp("field-column-bordered",o.cols.length>1&&t<o.cols.length-1),n.\u0275\u0275property("ngClass",c.colClass),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.field&&"none"!==e.field.display),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.actionSlot),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.specialSlot),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.field&&"none"!==(null==e.field?null:e.field.display)&&s<c.fieldGrid.length-1)}}function J5(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",1),n.\u0275\u0275template(1,q5,5,7,"div",2),n.\u0275\u0275elementEnd()),2&i){const e=a.$implicit,t=n.\u0275\u0275nextContext();n.\u0275\u0275property("ngClass",t.rowClass),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",e.cols)}}const Q5=[[["","field-grid-actions",""]],[["","field-grid-special",""]]],X5=["[field-grid-actions]","[field-grid-special]"];let $1=(()=>{class i extends _u{breakpointObserver;dataSource;config;layout;fields;record;baseColClass={col:!0,"form-group":!0,"m-1":!1,"m-0":!0,"pl-3":!0,"pb-2":!0,"pr-3":!0,"d-flex":!0,"flex-column":!0,"justify-content-between":!0};baseRowClass={"form-row":!0,"align-items-stretch":!0};constructor(e){super(e),this.breakpointObserver=e}ngOnInit(){this.subscriptions.push(this.dataSource.getConfig().subscribe(e=>{this.config={...e}})),this.subscriptions.push(this.dataSource.getLayout().subscribe(e=>{this.layout={...e}})),this.subscriptions.push(this.dataSource.getFields().subscribe(e=>{this.fields={...e}})),this.subscriptions.push(this.dataSource.getRecord().subscribe(e=>{this.record={...e}})),super.ngOnInit()}buildGrid(){const e=[];this.fields&&0!==Object.keys(this.fields).length?(this.layout.rows.forEach(t=>{let r={cols:[]};t.cols.forEach((o,s)=>{const l=this.fields[o.name]||null;l?(r.cols.push({field:l}),1===this.colNumber&&s<t.cols.length-1&&(e.push(r),r={cols:[]})):r.cols.push({})}),r.cols.length<this.colNumber&&this.fillRow(r),e.push(r)}),this.addSpecialSlots(e),this.fieldGrid=e):this.fieldGrid=[]}get colNumber(){return 1===this.sizeMap[this.currentSize]?1:this.config.maxColumns}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject($))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-field-layout"]],inputs:{dataSource:"dataSource"},features:[n.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:X5,decls:2,vars:4,consts:[[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[3,"field-column-bordered","ngClass",4,"ngFor","ngForOf"],[4,"ngIf"],["class","field-separation mt-2",4,"ngIf"],[1,"label-container"],[1,"d-flex","flex-grow-1"],[1,"flex-grow-1","text-break"],[3,"type","mode","klass","field","record"],["type","button","class","record-action-button",3,"click",4,"ngIf"],[1,"required"],["type","button",1,"record-action-button",3,"click"],["image","pencil",1,"sicon"],[1,"field-separation","mt-2"]],template:function(t,r){1&t&&(n.\u0275\u0275projectionDef(Q5),n.\u0275\u0275elementStart(0,"form"),n.\u0275\u0275template(1,J5,2,2,"div",0),n.\u0275\u0275elementEnd()),2&t&&(n.\u0275\u0275classMapInterpolate1("field-layout ",r.config.mode,""),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",r.fieldGrid))},dependencies:[F.NgClass,F.NgForOf,F.NgIf,Ki,mn,F.UpperCasePipe],encapsulation:2})}return i})(),Yu=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Pn,uo,fn]})}return i})();const U1={tabs:[],groupedTabs:[],modules:{},userActionMenu:[],quickActions:[],maxTabs:0};let Tc=(0,M.deepClone)(U1),aa=null,Ci=(()=>{class i{recordGQL;tabs$;groupedTabs$;modules$;userActionMenu$;maxTabs$;quickActions$;vm$;store=new S.BehaviorSubject(Tc);state$=this.store.asObservable();resourceName="navbar";fieldsMetadata={fields:["tabs","groupedTabs","modules","userActionMenu","maxTabs"]};constructor(e){this.recordGQL=e,this.tabs$=this.state$.pipe((0,v.map)(t=>t.tabs),(0,v.distinctUntilChanged)()),this.groupedTabs$=this.state$.pipe((0,v.map)(t=>t.groupedTabs),(0,v.distinctUntilChanged)()),this.modules$=this.state$.pipe((0,v.map)(t=>t.modules),(0,v.distinctUntilChanged)()),this.userActionMenu$=this.state$.pipe((0,v.map)(t=>t.userActionMenu),(0,v.distinctUntilChanged)()),this.maxTabs$=this.state$.pipe((0,v.map)(t=>t.maxTabs),(0,v.distinctUntilChanged)()),this.quickActions$=this.state$.pipe((0,v.map)(t=>t.quickActions),(0,v.distinctUntilChanged)()),this.vm$=this.tabs$.pipe((0,S.combineLatestWith)(this.groupedTabs$,this.modules$,this.userActionMenu$,this.maxTabs$,this.quickActions$),(0,v.map)(([t,r,o,s,c,l])=>({tabs:t,groupedTabs:r,modules:o,userActionMenu:s,maxTabs:c,quickActions:l})))}clear(){aa=null,this.updateState((0,M.deepClone)(U1))}clearAuthBased(){this.clear()}load(){return this.getNavigation().pipe((0,v.tap)(e=>{this.updateState({...Tc,tabs:e.tabs,groupedTabs:e.groupedTabs,userActionMenu:e.userActionMenu,modules:e.modules,maxTabs:e.maxTabs,quickActions:e?.quickActions??[]})}))}isCached(){return null!==aa}set(e){aa=(0,S.of)(e).pipe((0,v.shareReplay)(1)),this.updateState({...Tc,tabs:e.tabs,groupedTabs:e.groupedTabs,userActionMenu:e.userActionMenu,modules:e.modules,maxTabs:e.maxTabs,quickActions:e?.quickActions??[]})}updateState(e){this.store.next(Tc=e)}getNavigation(){return null===aa&&(aa=this.fetch("1").pipe((0,v.shareReplay)(1))),aa}fetch(e){return this.recordGQL.fetch(this.resourceName,`/api/navbars/${e}`,this.fieldsMetadata).pipe((0,v.map)(({data:t})=>{let r=null;return t&&t.navbar&&(r={tabs:t.navbar.tabs,groupedTabs:t.navbar.groupedTabs,userActionMenu:t.navbar.userActionMenu,modules:t.navbar.modules,maxTabs:t.navbar.maxTabs,quickActions:t?.navbar?.quickActions??[]}),r}))}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(zo))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const V1={adminPanel:[]};let ed=(0,M.deepClone)(V1),td=null,nd=(()=>{class i{appStateStore;adminPanel$;store=new S.BehaviorSubject(ed);state$=this.store.asObservable();constructor(e){this.appStateStore=e,this.adminPanel$=this.state$.pipe((0,v.map)(t=>t.adminPanel),(0,v.distinctUntilChanged)())}clear(){td=null,this.updateState((0,M.deepClone)(V1))}clearAuthBased(){this.clear()}getAdminPanel(){return ed.adminPanel}isCached(){return null!==td}updateState(e){this.store.next(ed=e)}set(e){td=(0,S.of)(e).pipe((0,v.shareReplay)(1)),this.updateState(e)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Gt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const z1={systemConfig:!1,userPreferences:!1,appStrings:!1,appListStrings:!1,modStrings:!1,themeImages:!1,navigation:!1,moduleMetadata:!1,adminMetadata:!1};let sa=(0,M.deepClone)(z1),Nc=null,ca=(()=>{class i{recordGQL;metadata;language;themeImages;config;preferences;navigation;adminMetadataStore;metadata$;store=new S.BehaviorSubject(sa);state$=this.store.asObservable();resourceName="appMetadata";fieldsMetadata={fields:["id","_id"]};types=["systemConfig","userPreferences","language","themeImages","navigation","moduleMetadata","adminMetadata"];constructor(e,t,r,o,s,c,l,u){this.recordGQL=e,this.metadata=t,this.language=r,this.themeImages=o,this.config=s,this.preferences=c,this.navigation=l,this.adminMetadataStore=u,this.metadata$=this.state$}clear(){Nc=null,this.updateState((0,M.deepClone)(z1))}clearAuthBased(){this.clear()}get(){return sa}load(e="login",t=[],r=!0){const o=this.getNotLoadedTypes();return r=r&&o.length<1,(!t||t.length<1)&&(t=o).push("minimalModuleMetadata"),this.getMetadata(e,t,r).pipe((0,v.tap)(s=>{this.updateState(s)}))}loadModuleMetadata(e="login",t=!0){return this.getMetadata(e,["moduleMetadata"],t=t&&(sa?.moduleMetadata??!1)).pipe((0,v.tap)(o=>{this.updateState(o)}))}getMetadata(e="app",t=[],r=!0){return(!t||t.length<1)&&(t=[...this.types]),(null==Nc||!0!==r)&&(Nc=this.fetch(e,t).pipe((0,v.shareReplay)(1))),Nc}getNotLoadedTypes(){const e=[];return this.isNavigationLoaded()||e.push("navigation"),this.arePreferencesLoaded()||e.push("userPreferences"),this.areSystemConfigsLoaded()||e.push("systemConfig"),this.areAllLanguageStringsLoaded()||e.push("language"),this.areThemeImagesLoaded()||e.push("themeImages"),this.isAdminMetadataLoaded()||e.push("adminMetadata"),e}areAllLanguageStringsLoaded(){return this.language.areAllCached()}arePreferencesLoaded(){return this.preferences.isCached()}areSystemConfigsLoaded(){return this.config.isCached()}areThemeImagesLoaded(){return this.themeImages.isCached()}isNavigationLoaded(){return this.navigation.isCached()}isAdminMetadataLoaded(){return!!sa.adminMetadata}updateState(e){this.store.next(sa=e)}fetch(e,t=[]){const r={fields:[...this.fieldsMetadata.fields,...t]};return this.recordGQL.fetch(this.resourceName,`/api/app-metadata/${e}`,r).pipe((0,v.catchError)(()=>(0,S.of)({})),(0,v.map)(({data:o})=>{const s=o?.appMetadata,c={...sa};return(0,M.emptyObject)(s)||(this.setConfig(c,s),this.setPreferences(c,s),this.setThemeImages(c,s),this.setNavigation(c,s),this.setLanguages(c,s),this.setModuleMetadata(c,s),this.setAdminMetadata(c,s)),c}))}setModuleMetadata(e,t){let r=t?.moduleMetadata??{},o="moduleMetadata";(0,M.emptyObject)(r)&&(r=t?.minimalModuleMetadata??{},o="minimalModuleMetadata"),(0,M.emptyObject)(r)||(e[o]=!0,Object.keys(r).forEach(s=>{if(!(0,M.emptyObject)(r[s]??{})){const l=this.metadata.mapMetadata(s,r[s]);this.metadata.getModule()!==s?this.metadata.setModuleMetadata(s,l):this.metadata.isCached(s)||this.metadata.set(s,l)}}))}setLanguages(e,t){const r=t?.language??{};if(!(0,M.emptyObject)(r)){const o={};o.languageKey=r.id??"",o.appStrings=r?.appStrings?.items??{},o.appListStrings=r?.appListStrings?.items??{},o.modStrings=r?.modStrings?.items??{},e.appStrings=!(0,M.emptyObject)(o.appStrings),e.appListStrings=!(0,M.emptyObject)(o.appListStrings),e.modStrings=!(0,M.emptyObject)(o.modStrings),this.language.set(o.languageKey,o)}}setNavigation(e,t){const r=t?.navigation??{};(0,M.emptyObject)(r)||(e.navigation=!0,this.navigation.set(r))}setThemeImages(e,t){const r=t?.themeImages??{},o=r?.items??{};(0,M.emptyObject)(r)||(0,M.emptyObject)(o)||(e.themeImages=!0,this.themeImages.set(r.id,o))}setPreferences(e,t){const r=t?.userPreferences??{};if(!(0,M.emptyObject)(r)){e.userPreferences=!0;const o=this.mapPreferences(r);this.preferences.set(o)}}setConfig(e,t){const r=t?.systemConfig??{};(0,M.emptyObject)(r)||(e.systemConfig=!0,this.config.set(r))}setAdminMetadata(e,t){const r=t?.adminMetadata??{};(0,M.emptyObject)(r)||(e.adminMetadata=!0,this.adminMetadataStore.set(r))}mapPreferences(e){const t={};return Object.keys(e).forEach(r=>{e[r].items&&Object.keys(e[r].items).forEach(o=>{t[o]=e[r].items[o]})}),t}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(zo),n.\u0275\u0275inject(mt),n.\u0275\u0275inject(Oe),n.\u0275\u0275inject(Tr),n.\u0275\u0275inject(dt),n.\u0275\u0275inject(Vt),n.\u0275\u0275inject(Ci),n.\u0275\u0275inject(nd))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),id=(()=>{class i{appStore;languageStore;metadataStore;navigationStore;systemConfigStore;themeImagesStore;userPreferenceStore;appMetadataStore;stateStores={};constructor(e,t,r,o,s,c,l,u){this.appStore=e,this.languageStore=t,this.metadataStore=r,this.navigationStore=o,this.systemConfigStore=s,this.themeImagesStore=c,this.userPreferenceStore=l,this.appMetadataStore=u,this.stateStores.appStore=this.buildMapEntry(e,!1),this.stateStores.navigationStore=this.buildMapEntry(o,!0),this.stateStores.languageStore=this.buildMapEntry(t,!0),this.stateStores.metadataStore=this.buildMapEntry(r,!1),this.stateStores.systemConfigStore=this.buildMapEntry(s,!1),this.stateStores.themeImagesStore=this.buildMapEntry(c,!1),this.stateStores.userPreferenceStore=this.buildMapEntry(l,!0),this.stateStores.appMetadataStore=this.buildMapEntry(u,!0)}clear(){Object.keys(this.stateStores).forEach(e=>{this.stateStores[e].store.clear()})}clearAuthBased(){Object.keys(this.stateStores).forEach(e=>{this.stateStores[e].authBased&&this.stateStores[e].store.clearAuthBased()})}clearBackendCacheable(){this.clearAuthBased(),this.systemConfigStore.clear()}buildMapEntry(e,t){return{store:e,authBased:t}}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Gt),n.\u0275\u0275inject(Oe),n.\u0275\u0275inject(mt),n.\u0275\u0275inject(Ci),n.\u0275\u0275inject(dt),n.\u0275\u0275inject(Tr),n.\u0275\u0275inject(Vt),n.\u0275\u0275inject(ca))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),W1=(()=>{class i{constructor(){}calculateRoute(e){const t=window.location.pathname;return t.includes("index.php")&&(e=`${t}/${e}`),e}appendNativeAuth(e){return window.location.pathname.includes("auth")&&(e=`auth/${e}`),e}removeNativeAuth(){let e=window.location.pathname;return e.includes("/auth")&&(e=e.replace("/auth","/")),e=e.replace("//","/"),e}isNativeAuth(){return window.location.pathname.includes("auth")}getNativeOutLogoutUrl(){return"auth/logout"}isLoggedOutPath(){return window.location.pathname.includes("logged-out")}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),G1=(()=>{class i{listStoreFactory;recordStoreFactory;storesMap$;stores$;module;subs=[];recordList;stores=[];storeSubject=new S.BehaviorSubject([]);state$=this.storeSubject.asObservable();pageSize=10;constructor(e,t){this.listStoreFactory=e,this.recordStoreFactory=t,this.recordList=e.create(),this.stores$=this.state$,this.storesMap$=this.stores$.pipe((0,v.map)(r=>this.getStoreMap(r)))}clear(){this.subs.forEach(e=>e.unsubscribe())}clearAuthBased(){}getItemMetadata(){return null}getRecordList(){return this.recordList}init(e,t=!0,r=null){let o="list_max_entries_per_record_thread";r&&isFinite(r)&&(o="",this.recordList.setPageSize(r));const s=this.recordList.init(e,t,o);this.pageSize=this.recordList.getPageSize(),this.subs.push(this.recordList.records$.subscribe(c=>{this.initStores(c)})),s&&(s.pipe((0,v.tap)(c=>{this.initStores(c.records)})).pipe((0,v.take)(1)).subscribe(),this.module=e)}load(e=!0){return this.recordList.load(e).pipe((0,v.tap)(t=>{this.initStores(t.records)}))}initStores(e){if(!e)return;const t={},r=[],o=this.getStoreMap(this.stores);e.forEach(c=>{if(!c||!c.id)return;const l=c.id;if(o[l]){const u=o[l];return u.setRecord(c),t[l]=u,void r.push(u)}t[l]=this.recordStoreFactory.create(),this.getItemMetadata()&&t[l].setMetadata(this.getItemMetadata()),t[l].initRecord(c,"detail",!1),r.push(t[l])}),Object.keys(o).forEach(c=>{t[c]||o[c].destroy()}),this.updateState(r)}updateState(e){this.storeSubject.next(this.stores=e)}getStoreMap(e){const t={};return!e||!e.length||e.forEach(r=>{t[r.getBaseRecord().id]=r}),t}getItemStores(){const e=this.stores??[];return e&&e.length?e:[]}getRecordIds(){const e=[];return!this.stores||!this.stores.length||this.stores.forEach(t=>{e.push(t.getRecordId())}),e}static \u0275fac=function(t){n.\u0275\u0275invalidFactory()};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})();const K1={module:"",recordId:"",loading:{data:!1,metadata:!1},mode:"detail"};class rd{appStateStore;meta;message;fieldManager;language;storeFactory;record$;stagingRecord$;loading$;mode$;meta$;vm$;recordStore;internalState=(0,M.deepClone)(K1);metadataState=(0,M.deepClone)({});store=new S.BehaviorSubject(this.internalState);state$=this.store.asObservable();metadataStore=new S.BehaviorSubject({});metadataState$=this.metadataStore.asObservable();subs=[];constructor(a,e,t,r,o,s){this.appStateStore=a,this.meta=e,this.message=t,this.fieldManager=r,this.language=o,this.storeFactory=s,this.meta$=this.metadataState$,this.recordStore=s.create(this.getViewFields$()),this.record$=this.recordStore.state$.pipe((0,v.distinctUntilChanged)()),this.stagingRecord$=this.recordStore.staging$.pipe((0,v.distinctUntilChanged)()),this.loading$=this.state$.pipe((0,v.map)(c=>c.loading.data||c.loading.metadata)),this.mode$=this.state$.pipe((0,v.map)(c=>c.mode)),this.vm$=this.state$}getModuleName(){return this.internalState.module}getRecordId(){return this.internalState.recordId}getViewContext(){return{module:this.getModuleName(),id:this.getRecordId()}}init(a,e,t="detail"){return this.baseInit(a,e,t),this.setMetadataLoading(!0),(0,S.forkJoin)([this.loadMetadata(),this.load()]).pipe((0,v.map)(([o,s])=>s))}initRecord(a,e="detail",t=!0){this.baseInit(a.module,a.id,e),t&&this.loadMetadata().pipe((0,v.take)(1),(0,v.tap)(()=>{this.setRecord(a)})).subscribe()}initStaging(a){const e=(0,M.deepClone)(this.recordStore.extractBaseRecord(a));this.recordStore.setStaging(e)}setRecord(a){const e=(0,M.deepClone)(this.recordStore.extractBaseRecord(a));this.recordStore.setRecord(e)}setMetadata(a){this.updateMetadataState(a),this.setMetadataLoading(!1)}destroy(){this.clear()}clear(){this.updateState((0,M.deepClone)(K1)),this.recordStore.destroy(),this.recordStore=null}clearAuthBased(){this.clear()}getBaseRecord(){return this.recordStore.getBaseRecord()}getMode(){return this.internalState?this.internalState.mode:null}setMode(a){this.updateState({...this.internalState,mode:a})}setDataLoading(a){this.updateState({...this.internalState,loading:{...this.internalState.loading,data:a}})}setMetadataLoading(a){this.updateState({...this.internalState,loading:{...this.internalState.loading,metadata:a}})}save(){return this.setDataLoading(!0),this.recordStore.save().pipe((0,v.catchError)(()=>(this.message.addDangerMessageByKey("LBL_ERROR_SAVING"),(0,S.of)({}))),(0,v.finalize)(()=>{this.setDataLoading(!1)}))}validate(){return this.recordStore.validate()}load(a=!0){return this.setDataLoading(!0),this.recordStore.retrieveRecord(this.internalState.module,this.internalState.recordId,a).pipe((0,v.tap)(e=>{this.updateState({...this.internalState,recordId:e.id,module:e.module})}),(0,v.finalize)(()=>{this.setDataLoading(!1)}))}loadMetadata(a=!0){return this.setMetadataLoading(!0),this.meta.getMetadata(this.internalState.module).pipe((0,v.map)(e=>e.recordView),(0,v.tap)(e=>{this.updateMetadataState(e)}),(0,v.finalize)(()=>{this.setMetadataLoading(!1)}))}updateState(a){this.store.next(this.internalState=a)}updateMetadataState(a){this.metadataStore.next(this.metadataState=a)}getMetadata(){return(0,M.deepClone)(this.metadataState)}baseInit(a,e,t="detail"){this.updateState({...this.internalState,module:a,recordId:e,mode:t})}}const H1={id:"",type:"",module:"",attributes:{},acls:[]};class od{definitions$;recordSaveGQL;recordFetchGQL;message;recordManager;recordMappers;state$;staging$;cache$=null;internalState=(0,M.deepClone)(H1);stagingState=(0,M.deepClone)(H1);store=new S.BehaviorSubject(this.internalState);staging=new S.BehaviorSubject(this.stagingState);definitions=[];subs=[];fieldsMetadata={fields:["_id","id","attributes","module","type","acls","favorite"]};constructor(a,e,t,r,o,s){this.definitions$=a,this.recordSaveGQL=e,this.recordFetchGQL=t,this.message=r,this.recordManager=o,this.recordMappers=s,this.state$=this.store.asObservable().pipe((0,v.distinctUntilChanged)()),this.staging$=this.staging.asObservable(),this.subs.push(this.state$.subscribe(c=>{this.updateStaging(c)})),this.subs.push(a.subscribe(c=>{this.definitions=c,this.init(this.internalState)}))}init(a){const e={...a};this.initRecord(e),this.updateState(e)}getStaging(){return this.stagingState?this.stagingState:null}setStaging(a){this.initRecord(a),this.staging.next(this.stagingState=a)}setRecord(a){this.initRecord(a),this.updateState(a)}save(){return this.mapStagingFields(),this.recordSaveGQL.save(this.stagingState).pipe((0,v.tap)(a=>{this.initRecord(a),this.updateState(a)}))}validate(){return this.stagingState.formGroup.markAllAsTouched(),this.stagingState.formGroup.statusChanges.pipe((0,v.startWith)(this.stagingState.formGroup.status),(0,v.filter)(a=>"PENDING"!==a),(0,v.take)(1),(0,v.map)(a=>"VALID"===a))}resetStaging(){this.updateStaging(this.internalState)}destroy(){this.subs.forEach(a=>a.unsubscribe())}getBaseRecord(){return this.internalState?(0,M.deepClone)({id:this.internalState.id,type:this.internalState.type,module:this.internalState.module,attributes:this.internalState.attributes,acls:this.internalState.acls}):null}getBaseStaging(){return this.stagingState?(this.mapStagingFields(),(0,M.deepClone)({id:this.stagingState.id,type:this.stagingState.type,module:this.stagingState.module,attributes:this.stagingState.attributes,acls:this.stagingState.acls})):null}extractBaseRecord(a){const{fields:e,formGroup:t,...r}=a;return{...r}}isDirty(){return!(!this.stagingState||!this.stagingState.formGroup)&&this.stagingState.formGroup.dirty}retrieveRecord(a,e,t=!0){return(null==this.cache$||!1===t)&&(this.cache$=this.fetch(a,e).pipe((0,v.tap)(r=>this.init(r)),(0,v.shareReplay)(1))),this.cache$}updateState(a){this.store.next(this.internalState=a)}updateStaging(a){const e=(0,M.deepClone)(this.extractBaseRecord(a));this.initRecord(e),this.staging.next(this.stagingState=e)}mapStagingFields(){const a=this.recordMappers.get(this.stagingState.module);Object.keys(a).forEach(e=>{a[e].map(this.stagingState)})}initRecord(a){a.module&&this.definitions&&this.definitions.length>0&&(a.fields=this.recordManager.initFields(a,this.definitions))}fetch(a,e){return this.recordFetchGQL.fetch(a,e,this.fieldsMetadata).pipe((0,v.map)(({data:t})=>{const r={type:"",module:"",attributes:{},acls:[]};if(!t)return r;const o=t.getRecord.attributes.id;return o?(r.id=o,r.module=a,r.type=t.getRecord.attributes&&t.getRecord.attributes.object_name,r.attributes=t.getRecord.attributes,r.acls=t.getRecord.acls,r.favorite=t?.getRecord?.favorite??!1,r):(this.message.addDangerMessageByKey("LBL_RECORD_DOES_NOT_EXIST"),r)}),(0,v.catchError)(t=>(0,S.throwError)(t)))}}let Rr=(()=>{class i{apollo;constructor(e){this.apollo=e}fetch(e,t,r){const s={query:fe.gql`
            query getRecord($module: String!, $record: String!) {
                getRecord(module: $module, record: $record) {
                    ${r.fields.join("\n")}
                }
            }
        `,variables:{module:e,record:t}};return this.apollo.query(s)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(fe.Apollo))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),jr=(()=>{class i{apollo;constructor(e){this.apollo=e}save(e){const t={module:e.module,attributes:(0,M.deepClone)(e.attributes)};e.id&&(t._id=e.id);const r={mutation:fe.gql`
                mutation saveRecord($input: saveRecordInput!) {
                    saveRecord(input: $input) {
                        record {
                            attributes
                            favorite
                            id
                            _id
                            module
                            acls
                        }
                    }
                }
            `,variables:{input:t}};return this.apollo.mutate(r).pipe((0,v.map)(o=>this.mapToRecord(o)))}mapToRecord(e){return e.data&&e.data.saveRecord&&e.data.saveRecord.record?{id:e.data.saveRecord.record._id,type:e?.data?.saveRecord?.record?.type??"",module:e?.data?.saveRecord?.record?.module??"",attributes:e?.data?.saveRecord?.record?.attributes??[],acls:e?.data?.saveRecord?.record?.acls??[],favorite:e?.data.saveRecord?.record?.favorite??!1}:null}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(fe.Apollo))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),kr=(()=>{class i{recordFetchGQL;recordSaveGQL;message;recordManager;recordMappers;baseMapper;constructor(e,t,r,o,s,c){this.recordFetchGQL=e,this.recordSaveGQL=t,this.message=r,this.recordManager=o,this.recordMappers=s,this.baseMapper=c,s.register("default",c.getKey(),c)}create(e){return new od(e,this.recordSaveGQL,this.recordFetchGQL,this.message,this.recordManager,this.recordMappers)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Rr),n.\u0275\u0275inject(jr),n.\u0275\u0275inject(ct),n.\u0275\u0275inject(ci),n.\u0275\u0275inject(M.RecordMapperRegistry),n.\u0275\u0275inject(Qo))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),ad=(()=>{class i extends rd{appStateStore;meta;message;fieldManager;language;storeFactory;constructor(e,t,r,o,s,c){super(e,t,r,o,s,c),this.appStateStore=e,this.meta=t,this.message=r,this.fieldManager=o,this.language=s,this.storeFactory=c}getViewFields$(){return this.meta$.pipe((0,v.map)(e=>{const t={},r=[],o=e.fields??{};return Object.keys(o).forEach(s=>{o[s]&&(t[s]=o[s])}),e.headerLayout&&e.headerLayout.rows&&e.headerLayout.rows.forEach(s=>{s.cols.forEach(c=>{c.field&&(t[c.field.name]=c.field)})}),e.bodyLayout&&e.bodyLayout.rows&&e.bodyLayout.rows.forEach(s=>{s.cols.forEach(c=>{c.field&&(t[c.field.name]=c.field)})}),Object.keys(t).forEach(s=>{r.push(t[s])}),r}))}initRecord(e,t="detail",r=!0){super.initRecord(e,t,r),this.setRecord(e)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Gt),n.\u0275\u0275inject(mt),n.\u0275\u0275inject(ct),n.\u0275\u0275inject(ei),n.\u0275\u0275inject(Oe),n.\u0275\u0275inject(kr))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),Lc=(()=>{class i{appStateStore;meta;message;fieldManager;language;storeFactory;constructor(e,t,r,o,s,c){this.appStateStore=e,this.meta=t,this.message=r,this.fieldManager=o,this.language=s,this.storeFactory=c}create(){return new ad(this.appStateStore,this.meta,this.message,this.fieldManager,this.language,this.storeFactory)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Gt),n.\u0275\u0275inject(mt),n.\u0275\u0275inject(ct),n.\u0275\u0275inject(ei),n.\u0275\u0275inject(Oe),n.\u0275\u0275inject(kr))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Bc=(()=>{class i extends G1{listStoreFactory;recordStoreFactory;itemMetadata;listMetadata;$loading;autoRefreshEnabled=!0;constructor(e,t){super(e,t),this.listStoreFactory=e,this.recordStoreFactory=t,this.$loading=this.recordList.loading$}init(e,t=!0,r=null){super.init(e,t,r),this.autoRefreshEnabled=!0}setFilters(e){let t=this.recordList.criteria;if(t={...t,...e},e&&e.orderBy){let r=M.SortDirection.DESC;e.sortOrder&&"ASC"===String(e.sortOrder).toUpperCase()&&(r=M.SortDirection.ASC),this.recordList.updateSorting(e.orderBy,r,!1)}return this.recordList.updateSearchCriteria(t,!1),this.load(!1).pipe((0,v.map)(r=>r.records))}getItemMetadata(){return this.itemMetadata}getListMetadata(){return this.listMetadata}setItemMetadata(e){return this.itemMetadata=e}setListMetadata(e){return this.listMetadata=e}allLoaded(){const e=this.recordList.getPagination();return!!e&&e.pageSize>=e.total}loadMore(e=null){e||(e=this.pageSize);let o=(this.recordList.getPagination().pageSize||0)+e;this.recordList.setPageSize(o),this.recordList.updatePagination(0)}reload(){this.recordList.updatePagination(0)}getViewContext(){return{module:this.module,ids:this.getRecordIds()}}initAutoRefresh(e,t,r,o){const s=new Date,c=new Date(s.getFullYear(),s.getMonth(),s.getDate(),s.getHours(),s.getMinutes()+1),l=this.getAutoRefreshTime(e,t,r);return(0,S.timer)(c,l).pipe((0,v.takeWhile)(()=>this.autoRefreshEnabled),(0,v.tap)(()=>{this.load(!1).subscribe(()=>{o&&o()})}))}disableAutoRefresh(){this.autoRefreshEnabled=!1}getAutoRefreshTime(e,t,r){let o=6e4*e;return 0===t&&0===r?o:o+this.getRandomDeviation(t,r)}getRandomDeviation(e,t){return e=Math.ceil(e),t=Math.floor(t),1e3*Math.floor(Math.random()*(t-e+1)+e)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Ni),n.\u0275\u0275inject(Lc))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),Oc=(()=>{class i{recordListFactory;recordStoreFactory;constructor(e,t){this.recordListFactory=e,this.recordStoreFactory=t}create(){return new Bc(this.recordListFactory,this.recordStoreFactory)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Ni),n.\u0275\u0275inject(Lc))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),sd=(()=>{class i{systemConfig;storeFactory;processService;messages;language;dynamicLabels;constructor(e,t,r,o,s,c){this.systemConfig=e,this.storeFactory=t,this.processService=r,this.messages=o,this.language=s,this.dynamicLabels=c}getOptions(){return this.systemConfig.getConfigValue("ui")?.notifications??null}initStore(){const e=this.getOptions(),t={};this.setupListActions(t,e),this.setupItemConfig(t,e);const r=this.storeFactory.create();r.setItemMetadata(t.itemConfig.metadata),r.setListMetadata({actions:t.listActions});const o={orderBy:e?.filters?.orderBy??"date_entered",sortOrder:e?.filters?.sortOrder??"asc",preset:{type:"alerts"}};return r.init(e.module,!1,e?.pageSize??null),r.setFilters(o).pipe((0,v.take)(1)).subscribe(),r}setupListActions(e,t){e.listActions=t?.listActions??[],null!==(t?.collapseListActions??null)&&(e.collapseListActions=t.collapseListActions)}setupItemConfig(e,t){e.itemConfig={collapsible:t?.item?.collapsible??!1,collapseLimit:t?.item?.collapseLimit??null,klass:t?.item?.itemClass??"",buttonClass:t?.item?.buttonClass??"",buttonGroupClass:t?.item?.buttonGroupClass??"",dynamicClass:t?.item?.dynamicClass??[],containerClass:t?.item?.containerClass??"",flexDirection:t?.item?.flexDirection??"",metadata:{}},this.setupItemMetadata(e.itemConfig.metadata,t.item.layout,t)}setupItemMetadata(e,t,r){t&&t.header&&(e.headerLayout=(0,M.deepClone)(t.header)),t&&t.body&&(e.bodyLayout=(0,M.deepClone)(t.body)),t&&t.actions&&(e.actions=(0,M.deepClone)(t.actions)),r?.item&&r?.item?.fields&&(e.fields=(0,M.deepClone)(r.item.fields)),null!==(r?.item?.collapseActions??null)&&(e.collapseActions=r?.item?.collapseActions)}markNotificationsAsRead(e){const t={action:"record-thread-list-mark-as-read",module:e.module??"alerts",ids:e.getRecordIds()};return this.processService.submit("record-thread-list-mark-as-read",t).pipe((0,v.tap)(r=>{let o="addSuccessMessageByKey";"error"===r.status&&(o="addDangerMessageByKey"),r.messages&&r.messages.forEach(s=>{this.messages[o](s)}),e.getItemStores().forEach(s=>{const l=(s?.recordStore?.getStaging()??{})?.fields.is_read??null;null!=l&&(l.value="true")})}),(0,v.catchError)(r=>{throw this.messages.addDangerMessageByKey("ERR_NOTIFICATIONS_MARK_AS_READ"),r}))}onLoadMore(e){(0,S.timer)(1500).pipe((0,v.take)(1)).subscribe(()=>{e.markNotificationsAsRead()})}onRefresh(e,t){const r=e.getRecordList().getMeta().unreadCount;let o=t.getNotificationsUnreadTotal();if(r>o){let s=(r-o).toString();const c=this.language.getFieldLabel("LBL_NEW_NOTIFICATION"),l=this.dynamicLabels.parse(c,{unread:s},{});this.messages.addSuccessMessage(l)}t.setNotificationsUnreadTotal(r)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(dt),n.\u0275\u0275inject(Oc),n.\u0275\u0275inject($i),n.\u0275\u0275inject(ct),n.\u0275\u0275inject(Oe),n.\u0275\u0275inject(Ys))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const Z1={notificationsEnabled:!1,notificationsTotal:0,notificationsUnreadTotal:0};let gr=(0,M.deepClone)(Z1),cd=null,la=(()=>{class i{appStateStore;configs;notificationService;notificationsUnreadTotal$;notificationsTotal$;notificationsEnabled$;store=new S.BehaviorSubject(gr);state$=this.store.asObservable();notificationStore;notificationPageSize=0;constructor(e,t,r){this.appStateStore=e,this.configs=t,this.notificationService=r,this.notificationsUnreadTotal$=this.state$.pipe((0,v.map)(o=>o.notificationsUnreadTotal),(0,v.distinctUntilChanged)()),this.notificationsTotal$=this.state$.pipe((0,v.map)(o=>o.notificationsTotal),(0,v.distinctUntilChanged)()),this.notificationsEnabled$=this.state$.pipe((0,v.map)(o=>o.notificationsEnabled),(0,v.distinctUntilChanged)())}clear(){cd=null,this.updateState((0,M.deepClone)(Z1))}clearAuthBased(){this.clear(),this.notificationStore.clear(),this.notificationStore=null}init(){this.appStateStore.isLoggedIn()&&this.initNotifications()}initNotifications(){this.notificationStore||(this.notificationStore=this.notificationService.initStore())}enableNotifications(){this.initNotifications(),this.updateState({...gr,notificationsEnabled:!0})}disableNotifications(){this.disableNotificationAutoRefresh(),this.updateState({...gr,notificationsEnabled:!1,notificationsTotal:0,notificationsUnreadTotal:0})}areNotificationsEnabled(){return gr.notificationsEnabled}refreshNotifications(){this.areNotificationsEnabled()&&this.notificationStore.load(!1).pipe((0,v.take)(1)).subscribe(()=>{this.notificationService.onRefresh(this.notificationStore,this)})}markNotificationsAsRead(){if(!this.areNotificationsEnabled())return;this.notificationStore.getRecordList().pagination$.pipe((0,v.take)(1),(0,v.tap)(r=>this.notificationPageSize=r.pageSize),(0,v.tap)(r=>this.setNotificationsTotal(r.total))).subscribe();let e=this.notificationStore.getRecordList().records.filter(r=>!1===r.attributes.is_read).length,t=this.getNotificationsTotal()-this.getNotificationsUnreadTotal();(0,S.timer)(500).pipe((0,v.take)(1)).subscribe(()=>{this.getNotificationsUnreadTotal()>0&&(this.notificationPageSize>t||e>0)&&this.notificationService.markNotificationsAsRead(this.notificationStore).subscribe(r=>{this.setNotificationsUnreadTotal(r?.data?.unreadCount??0),this.setRecordAsReadTrue()})})}conditionalNotificationRefresh(e=""){if(!this.areNotificationsEnabled())return;const t=this.configs.getUi("notifications_reload_actions")??null,r=this.getModule();if(e||(e=this.getView()),!t||!r)return;const o=t[r];o&&o.length&&o.some(c=>"any"===c||c===e)&&this.refreshNotifications()}disableNotificationAutoRefresh(){this.notificationStore.disableAutoRefresh()}setRecordAsReadTrue(){this.notificationStore.getRecordList().records.forEach(e=>{e.attributes.is_read||(e.attributes.is_read=!0)})}setNotificationsUnreadTotal(e){this.updateState({...gr,notificationsUnreadTotal:e})}setNotificationsTotal(e){this.updateState({...gr,notificationsTotal:e})}getNotificationsTotal(){return gr.notificationsTotal}getNotificationsUnreadTotal(){return gr.notificationsUnreadTotal}getNotificationStore(){return this.notificationStore}getModule(){return this.appStateStore.getModule()}getView(){return this.appStateStore.getView()}onLogin(){}onLogout(){this.disableNotifications(),this.clearAuthBased()}isCached(){return null!==cd}updateState(e){this.store.next(gr=e)}set(e){cd=(0,S.of)(e).pipe((0,v.shareReplay)(1)),this.updateState(e)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Gt),n.\u0275\u0275inject(dt),n.\u0275\u0275inject(sd))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Hn=(()=>{class i{http;router;message;stateManager;languageStore;appStateStore;localStorage;configs;baseRoute;notificationStore;currentUser$;isUserLoggedIn=new S.BehaviorSubject(!1);currentUserSubject=new S.BehaviorSubject({});constructor(e,t,r,o,s,c,l,u,d,f){this.http=e,this.router=t,this.message=r,this.stateManager=o,this.languageStore=s,this.appStateStore=c,this.localStorage=l,this.configs=u,this.baseRoute=d,this.notificationStore=f,this.currentUser$=this.currentUserSubject.asObservable().pipe((0,v.distinctUntilChanged)())}isLoggedIn(){return this.isUserLoggedIn.value}getCurrentUser(){return this.currentUserSubject.value}setCurrentUser(e){this.appStateStore.setCurrentUser(e),this.currentUserSubject.next(e),this.isUserLoggedIn.next(!0)}doLogin(e,t,r,o){let s="login";s=this.baseRoute.appendNativeAuth(s),s=this.baseRoute.calculateRoute(s);const c=new Ar.HttpHeaders({"Content-Type":"application/json"});return this.http.post(s,{username:e,password:t},{headers:c}).subscribe(l=>{this.baseRoute.isNativeAuth()&&(window.location.href=this.baseRoute.removeNativeAuth()),this.appStateStore.updateInitialAppLoading(!0),r(l),this.isUserLoggedIn.next(!0),this.setCurrentUser(l),this.notificationStore.enableNotifications(),this.notificationStore.refreshNotifications()},l=>{o(l)})}logout(e="LBL_LOGOUT_SUCCESS",t=!0){this.appStateStore.updateLoading("logout",!0,!1);const r=this.configs.getConfigValue("logout")??[];let o=r?.path??"logout";const s=(0,M.isTrue)(r?.redirect??!1);this.baseRoute.isNativeAuth()&&(o=this.baseRoute.getNativeOutLogoutUrl()),o=this.baseRoute.calculateRoute(o);const c=new Ar.HttpParams,l=(new Ar.HttpHeaders).set("Content-Type","text/plain; charset=utf-8");this.appStateStore.getActiveRequests()<1?this.callLogout(o,c,l,t,e,s):this.appStateStore.activeRequests$.pipe((0,v.filter)(u=>u<1),(0,v.take)(1)).subscribe(()=>{this.callLogout(o,c,l,t,e,s)})}callLogout(e,t,r,o,s,c){this.resetState(),c?window.location.href=e:this.http.post(e,t.toString(),{headers:r,responseType:"text"}).pipe((0,v.take)(1),(0,v.catchError)(l=>(this.message.log("Logout failed"),(0,S.throwError)(l))),(0,v.finalize)(()=>{this.appStateStore.updateInitialAppLoading(!0),this.appStateStore.updateLoading("logout",!1,!1),this.appStateStore.setCurrentUser(null),this.stateManager.clearAuthBased(),this.configs.clear(),!0===o&&this.router.navigate(["/Login"]).finally()})).subscribe(()=>{this.message.log("Logout success"),(0,M.isEmptyString)(s)||this.message.addSuccessMessageByKey(s)},()=>{this.message.log("Error on logout"),(0,M.isEmptyString)(s)||this.message.addSuccessMessageByKey(s)})}resetState(){this.stateManager.clearAuthBased(),this.localStorage.clear(),this.isUserLoggedIn.next(!1)}fetchSessionStatus(){let e="session-status";e=this.baseRoute.appendNativeAuth(e),e=this.baseRoute.calculateRoute(e);const t=(new Ar.HttpHeaders).set("Content-Type","text/plain; charset=utf-8");return this.http.get(e,{headers:t})}getSessionExpiredRoute(){return(this.configs.getConfigValue("session-expired")??[])?.path??"Login"}handleInvalidSession(e){this.sessionExpiredRedirect()?this.handleSessionExpiredRedirect():this.logout(e)}handleSessionExpiredRedirect(){window.location.href=this.getSessionExpiredRoute()}sessionExpiredRedirect(){const e=this.configs.getConfigValue("session-expired")??[];return(0,M.isTrue)(e?.redirect??!1)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Ar.HttpClient),n.\u0275\u0275inject(Ft.Router),n.\u0275\u0275inject(ct),n.\u0275\u0275inject(id),n.\u0275\u0275inject(Oe),n.\u0275\u0275inject(Gt),n.\u0275\u0275inject(cr),n.\u0275\u0275inject(dt),n.\u0275\u0275inject(W1),n.\u0275\u0275inject(la))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function Y5(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"div",8)(2,"a",9),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(e);const r=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(r.backToTop())}),n.\u0275\u0275elementStart(3,"span"),n.\u0275\u0275text(4," Back To Top "),n.\u0275\u0275element(5,"scrm-image",10),n.\u0275\u0275elementEnd()()(),n.\u0275\u0275elementContainerEnd()}}function e8(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"div",11)(1,"div",12)(2,"h5",13),n.\u0275\u0275text(3,"\xa9 Powered By SugarCRM"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(4,"button",14),n.\u0275\u0275listener("click",function(){const o=n.\u0275\u0275restoreView(e).$implicit;return n.\u0275\u0275resetView(o.dismiss("Cross click"))}),n.\u0275\u0275element(5,"scrm-image",15),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(6,"div",16)(7,"p"),n.\u0275\u0275text(8," \xa9 2004-2013 SugarCRM Inc. The Program is provided AS IS, without warranty. Licensed under AGPLv3. "),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(9,"p"),n.\u0275\u0275text(10," This program is free software; you can redistribute it and/or modify it under the terms of the GNU Affero General Public License version 3 as published by the Free Software Foundation, including the additional permission set forth in the source code header. "),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(11,"p"),n.\u0275\u0275text(12," SugarCRM is a trademark of SugarCRM, Inc. All other company and product names may be trademarks of the respective companies with which they are associated. "),n.\u0275\u0275elementEnd()()()}}function t8(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"div",17)(1,"div",12)(2,"h5",13),n.\u0275\u0275text(3,"\xa9 Supercharged by SuiteCRM"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(4,"button",14),n.\u0275\u0275listener("click",function(){const o=n.\u0275\u0275restoreView(e).$implicit;return n.\u0275\u0275resetView(o.dismiss("Cross click"))}),n.\u0275\u0275element(5,"scrm-image",15),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(6,"div",16)(7,"p"),n.\u0275\u0275text(8," SuiteCRM has been written and assembled by SalesAgility. The Program is provided AS IS, without warranty. Licensed under AGPLv3. "),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(9,"p"),n.\u0275\u0275text(10," This program is free software; you can redistribute it and/or modify it under the terms of the GNU Affero General Public License version 3 as published by the Free Software Foundation, including the additional permission set forth in the source code header. "),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(11,"p"),n.\u0275\u0275text(12," SuiteCRM is a trademark of SalesAgility Ltd. All other company and product names may be trademarks of the respective companies with which they are associated. "),n.\u0275\u0275elementEnd()()()}}let n8=(()=>{class i{modalService;authService;authSub;closeResult;isUserLoggedIn;constructor(e,t){this.modalService=e,this.authService=t}openSugarCopyright(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",centered:!0,size:"lg"}).result.then(t=>{this.closeResult=`Closed with: ${t}`},t=>{this.closeResult=`Dismissed ${this.getDismissReason(t)}`})}openSuiteCopyright(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",centered:!0,size:"lg"}).result.then(t=>{this.closeResult=`Closed with: ${t}`},t=>{this.closeResult=`Dismissed ${this.getDismissReason(t)}`})}getDismissReason(e){return e===de.ModalDismissReasons.ESC?"by pressing ESC":e===de.ModalDismissReasons.BACKDROP_CLICK?"by clicking on a backdrop":`with: ${e}`}backToTop(){document.body.scrollTop=0,document.documentElement.scrollTop=0}ngOnInit(){this.authSub=this.authService.isUserLoggedIn.subscribe(e=>{this.isUserLoggedIn=e})}ngOnDestroy(){this.authSub.unsubscribe()}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(de.NgbModal),n.\u0275\u0275directiveInject(Hn))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-footer-ui"]],decls:12,vars:1,consts:[[1,"footer"],[1,"copyright-links"],["data-toggle","modal","data-target",".copyright-suitecrm",1,"footer-link",3,"click"],["data-toggle","modal","data-target",".copyright-sugarcrm",1,"footer-link",3,"click"],[4,"ngIf"],[1,"copyright"],["sugarcopyright",""],["suitecopyright",""],[1,"back-to-top"],[1,"footer-link",3,"click"],["image","arrow_up_filled",1,"sicon","back-top-icon"],["role","dialog","aria-hidden","true",1,"copyright-sugarcrm"],[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["image","icon_modal_close",1,"sicon"],[1,"modal-body"],["role","dialog","aria-hidden","true",1,"copyright-suitecrm"]],template:function(t,r){if(1&t){const o=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"a",2),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(o);const c=n.\u0275\u0275reference(11);return n.\u0275\u0275resetView(r.openSuiteCopyright(c))}),n.\u0275\u0275text(3," \xa9 Supercharged by SuiteCRM "),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(4,"a",3),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(o);const c=n.\u0275\u0275reference(9);return n.\u0275\u0275resetView(r.openSugarCopyright(c))}),n.\u0275\u0275text(5," \xa9 Powered By SugarCRM "),n.\u0275\u0275elementEnd()(),n.\u0275\u0275template(6,Y5,6,0,"ng-container",4),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(7,"div",5),n.\u0275\u0275template(8,e8,13,0,"ng-template",null,6,n.\u0275\u0275templateRefExtractor),n.\u0275\u0275template(10,t8,13,0,"ng-template",null,7,n.\u0275\u0275templateRefExtractor),n.\u0275\u0275elementEnd()}2&t&&(n.\u0275\u0275advance(6),n.\u0275\u0275property("ngIf",r.isUserLoggedIn))},dependencies:[F.NgIf,mn],encapsulation:2})}return i})(),i8=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,fn]})}return i})(),r8=(()=>{class i{constructor(){}ngOnInit(){}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["app-full-page-spinner"]],decls:20,vars:0,consts:[[1,"app-overlay"],["id","overlay-spinner"],[1,"app-loading"],[1,"sk-cube-grid"],[1,"sk-cube","sk-cube1","sk-cube-primary"],[1,"sk-cube","sk-cube2","sk-cube-secondary"],[1,"sk-cube","sk-cube3","sk-cube-secondary"],[1,"sk-cube","sk-cube4","sk-cube-primary"],[1,"sk-cube","sk-cube5","sk-cube-secondary"],[1,"sk-cube","sk-cube6","sk-cube-secondary"],[1,"sk-cube","sk-cube7","sk-cube-primary"],[1,"sk-cube","sk-cube8","sk-cube-primary"],[1,"sk-cube","sk-cube9","sk-cube-primary"]],template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),n.\u0275\u0275element(4,"div",4)(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",7)(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",10)(14,"div",11)(15,"div",12)(16,"div",10)(17,"div",10)(18,"div",11)(19,"div",12),n.\u0275\u0275elementEnd()()()())},styles:[".app-overlay[_ngcontent-%COMP%]{position:fixed;display:flex;justify-content:center;align-items:center;flex-direction:column;width:100%;height:100%;inset:0;background-color:#fff9;z-index:4000;cursor:default}.app-loading[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%}.app-loading[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{height:200px;width:200px;animation:scaleIn 4s linear infinite;transform-origin:center center;position:absolute;inset:0;margin:auto}.app-loading[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]   .path[_ngcontent-%COMP%]{stroke-dasharray:1,200;stroke-dashoffset:0;animation:dash 1.5s ease-in-out infinite;stroke-linecap:round;stroke:#ddd}.sk-cube-primary[_ngcontent-%COMP%]{background-color:#e67062}.sk-cube-secondary[_ngcontent-%COMP%]{background-color:#4e5063}.sk-cube-grid[_ngcontent-%COMP%]{width:100px;height:100px}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube[_ngcontent-%COMP%]{width:25%;height:25%;float:left;animation:_ngcontent-%COMP%_sk-cubeGridScaleDelay 1.3s infinite ease-in-out}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube1[_ngcontent-%COMP%]{animation-delay:.2s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube2[_ngcontent-%COMP%]{animation-delay:.3s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube3[_ngcontent-%COMP%]{animation-delay:.4s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube4[_ngcontent-%COMP%]{animation-delay:.1s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube5[_ngcontent-%COMP%]{animation-delay:.2s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube6[_ngcontent-%COMP%]{animation-delay:.3s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube7[_ngcontent-%COMP%]{animation-delay:0s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube8[_ngcontent-%COMP%]{animation-delay:.1s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube9[_ngcontent-%COMP%]{animation-delay:.2s}@keyframes _ngcontent-%COMP%_sk-cubeGridScaleDelay{0%,70%,to{transform:scaleZ(1)}35%{transform:scale3D(0,0,1)}}"]})}return i})(),o8=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Ve.AngularSvgIconModule]})}return i})(),Hi=(()=>{class i{apollo;constructor(e){this.apollo=e}fetch(e,t){const r={query:fe.gql`
            query getBatchedStatistics($module: String!, $queries: Iterable!){
              getBatchedStatistics(module: $module, queries: $queries) {
                  _id
                  id
                  items
              }
            }
        `,variables:{module:e,queries:t}};return this.apollo.query(r).pipe((0,v.map)(o=>{const s={},l=(o.data&&o.data.getBatchedStatistics||{}).items||{},u=Object.keys(l);return u&&u.length&&u.forEach(d=>{const f=l[d];s[d||f._id]={id:f._id,data:f.data,metadata:f.metadata}}),s}))}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(fe.Apollo))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const a8={module:"",query:{},statistic:{id:"",data:{}},loading:!1};let Rc=(()=>{class i{fetchGQL;state$;statistic$;loading$;cache$=null;internalState=(0,M.deepClone)(a8);store=new S.BehaviorSubject(this.internalState);constructor(e){this.fetchGQL=e,this.state$=this.store.asObservable(),this.statistic$=this.state$.pipe((0,v.map)(t=>t.statistic),(0,v.distinctUntilChanged)()),this.loading$=this.state$.pipe((0,v.map)(t=>t.loading),(0,v.distinctUntilChanged)())}clear(){this.store.unsubscribe(),this.cache$=null}clearAuthBased(){this.clear()}getQuery(){return(0,M.deepClone)(this.internalState.query)}get context(){return this.internalState.query.context}set context(e){const t=(0,M.deepClone)(this.internalState.query);t.context=e,this.updateState({...this.internalState,query:t})}init(e,t,r=!0){return this.internalState.module=e,this.updateState({...this.internalState,module:e,query:t}),!1===r?null:this.load()}load(e=!0){return this.updateState({...this.internalState,loading:!0}),this.fetchStatistics(this.internalState.module,this.getQuery(),e).pipe((0,v.map)(t=>this.mapStatistics(t)),(0,v.tap)(t=>{this.addNewState(t)}))}setLoading(e){this.updateState({...this.internalState,loading:e})}setStatistic(e,t,r=!1){if(this.addNewState(t),!r)return;const o={};o[e]=t,this.cache$=(0,S.of)(o).pipe((0,v.shareReplay)(1))}addNewState(e){this.updateState({...this.internalState,statistic:e,loading:!1})}mapStatistics(e){const t=Object.keys(e),r=t&&t.length&&t[0];let o={id:"",data:{}};return r&&(o=e[r]),o}updateState(e){this.store.next(this.internalState=e)}fetchStatistics(e,t,r=!0){const o={};return o[t.key]=t,(null==this.cache$||!1===r)&&(this.cache$=this.fetchGQL.fetch(e,o).pipe((0,v.shareReplay)(1))),this.cache$}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Hi))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})();const s8={module:"",query:{},statistic:{id:"",data:{}},loading:!1};let q1=(()=>{class i extends Rc{fetchGQL;fieldManager;cache$=null;internalState=(0,M.deepClone)(s8);store=new S.BehaviorSubject(this.internalState);constructor(e,t){super(e),this.fetchGQL=e,this.fieldManager=t,this.state$=this.store.asObservable(),this.statistic$=this.state$.pipe((0,v.map)(r=>r.statistic),(0,v.distinctUntilChanged)()),this.loading$=this.state$.pipe((0,v.map)(r=>r.loading),(0,v.distinctUntilChanged)())}addNewState(e){if(!e.metadata||!e.metadata.dataType)return;const t=this.fieldManager.buildShallowField(e.metadata.dataType,e.data.value);t.metadata={digits:0},this.updateState({...this.internalState,statistic:e,field:t,loading:!1})}updateState(e){super.updateState(e)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Hi),n.\u0275\u0275inject(ei))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),Wa=(()=>{class i{fetchGQL;fieldManager;constructor(e,t){this.fetchGQL=e,this.fieldManager=t}create(){return new q1(this.fetchGQL,this.fieldManager)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Hi),n.\u0275\u0275inject(ei))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function c8(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",2),n.\u0275\u0275element(1,"scrm-label",3),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("labelKey",e.messageLabelKey)}}function l8(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"div",8),n.\u0275\u0275element(2,"scrm-image",9),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(2).$implicit;n.\u0275\u0275advance(2),n.\u0275\u0275property("image",e.icon)("klass",e.iconClass)}}function u8(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",12),n.\u0275\u0275element(1,"scrm-field",13),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext().ngIf;n.\u0275\u0275advance(1),n.\u0275\u0275property("type",e.field.type)("field",e.field)}}function d8(i,a){1&i&&(n.\u0275\u0275elementStart(0,"div",14),n.\u0275\u0275element(1,"scrm-inline-loading-spinner"),n.\u0275\u0275elementEnd())}function f8(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,u8,2,2,"div",10),n.\u0275\u0275template(2,d8,2,0,"div",11),n.\u0275\u0275elementContainerEnd()),2&i){const e=a.ngIf,t=n.\u0275\u0275nextContext(5);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.field),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.loading&&t.loading)}}function p8(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"div",15),n.\u0275\u0275element(2,"scrm-label",16),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(2).$implicit,t=n.\u0275\u0275nextContext(3);n.\u0275\u0275advance(2),n.\u0275\u0275property("labelKey",e.labelKey)("module",t.getContextModule())}}function m8(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"div",17)(2,"label"),n.\u0275\u0275text(3),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(4).ngIf;n.\u0275\u0275advance(3),n.\u0275\u0275textInterpolate(e.description)}}function g8(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",19),n.\u0275\u0275element(1,"scrm-dynamic-label",20),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext(3).$implicit,t=n.\u0275\u0275nextContext(2).ngIf,r=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("context",r.getMessageContext())("fields",r.getMessageFields(t.statistics))("labelKey",e.dynamicLabel)}}function h8(i,a){1&i&&(n.\u0275\u0275elementStart(0,"div",14),n.\u0275\u0275element(1,"scrm-inline-loading-spinner"),n.\u0275\u0275elementEnd())}function v8(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,g8,2,3,"div",18),n.\u0275\u0275template(2,h8,2,0,"div",11),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(5);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!e.loading),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.loading)}}function _8(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"div"),n.\u0275\u0275text(2," - "),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(2).$implicit,t=n.\u0275\u0275nextContext(3);n.\u0275\u0275advance(1),n.\u0275\u0275classMapInterpolate1("widget-entry-value ",t.getSizeClass(e.size),"")}}function y8(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,l8,3,2,"ng-container",7),n.\u0275\u0275template(2,f8,3,2,"ng-container",7),n.\u0275\u0275template(3,p8,3,2,"ng-container",7),n.\u0275\u0275template(4,m8,4,1,"ng-container",7),n.\u0275\u0275template(5,v8,3,2,"ng-container",7),n.\u0275\u0275template(6,_8,3,3,"ng-container",7),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext().$implicit,t=n.\u0275\u0275nextContext(2).ngIf,r=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.icon),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.statistic&&t.statistics[e.statistic]),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.labelKey),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.descriptionKey),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.dynamicLabel),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.statistic&&!r.loading&&(!t.statistics[e.statistic].field||t.statistics[e.statistic].field&&r.isEmptyFieldValue(t.statistics[e.statistic].field.value)))}}function b8(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div"),n.\u0275\u0275template(1,y8,7,6,"ng-container",7),n.\u0275\u0275elementEnd()),2&i){const e=a.$implicit,t=n.\u0275\u0275nextContext(3);n.\u0275\u0275classMapInterpolate2("",t.getColClass()," ",t.getClass(e),""),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf","hidden"!==e.display)}}function C8(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"div"),n.\u0275\u0275template(2,b8,2,5,"div",6),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()),2&i){const e=a.$implicit,t=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275classMapInterpolate4("d-flex ",t.getJustify(e.justify)," ",t.getAlign(e.align)," ",t.getRowClass()," ",t.getLayoutRowClass(e),""),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",e.cols)}}function M8(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",4),n.\u0275\u0275template(1,C8,3,7,"ng-container",5),n.\u0275\u0275elementEnd()),2&i){const e=a.ngIf;n.\u0275\u0275propertyInterpolate("ngbTooltip",e.tooltipTitleText),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",e.layout)}}let ld=(()=>{class i{language;factory;config;vm$;loading=!0;messageLabelKey;subs=[];statistics={};loading$;gridWidgetInput;constructor(e,t){this.language=e,this.factory=t}ngOnInit(){this.validateConfig()&&(this.gridWidgetInput=this.config,this.buildStatistics(),this.setupLoading$(),this.setupVM(),this.setupReload())}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}validateConfig(){return this.config&&this.config.layout?this.config.queryArgs.context&&this.config.queryArgs.module?this.config.widgetConfig?!(!this.config.layout||!this.config.layout.rows)||(this.messageLabelKey="LBL_CONFIG_NO_STATISTICS_KEY",!1):(this.messageLabelKey="LBL_CONFIG_NO_CONFIG",!1):(this.messageLabelKey="LBL_CONFIG_BAD_CONTEXT",!1):(this.messageLabelKey="LBL_CONFIG_NO_CONFIG",!1)}getRowClass(){return this.gridWidgetInput.rowClass}getColClass(){return this.gridWidgetInput.columnClass}getContextModule(){return this.gridWidgetInput.queryArgs.context.module}getMessageContext(){const e=this.getContextModule();return e?{module:e}:{}}getMessageFields(e){if(!e||!Object.keys(e).length)return{};const t={};return Object.keys(e).forEach(r=>{t[r]=e[r].field}),t}getSizeClass(e){return{regular:"text-regular",medium:"text-medium",large:"text-large","x-large":"text-x-large","xx-large":"text-xx-large",huge:"text-huge"}[e]||"text-regular"}getFontWeight(e){let t="font-weight-normal";return e&&(0,M.isTrue)(e)&&(t="font-weight-bolder"),t}getColor(e){return{yellow:"text-yellow",blue:"text-blue",green:"text-green",red:"text-red",purple:"text-purple",dark:"text-dark",grey:"text-grey"}[e]||""}getJustify(e){return{start:"justify-content-start",end:"justify-content-end",center:"justify-content-center",between:"justify-content-between",around:"justify-content-around"}[e]||"justify-content-center"}getAlign(e){return{start:"align-items-start",end:"align-items-end",center:"align-items-center",baseline:"align-items-baseline",stretch:"align-items-stretch"}[e]||"align-items-center"}getLayoutRowClass(e){let t="";return e&&e.class&&(t=e.class),t}getClass(e){let t="";return e&&(t=e.class),t=t+" "+this.getSizeClass(e.size)+" "+this.getFontWeight(e.bold)+" "+this.getColor(e.color),t}isEmptyFieldValue(e){return"string"==typeof e&&(e=e.trim()),null==e||typeof e>"u"||""===e||0===e.length}getLabel(e,t){let r="";return e&&e[t]&&(r=this.language.getFieldLabel(e[t])),r}getLayout(){return this.gridWidgetInput.layout.rows}buildStatistics(){this.gridWidgetInput.layout.rows.forEach(e=>{!e.cols||!e.cols.length||e.cols.forEach(t=>{if(t.statistic){if(t.store)return void(this.statistics[t.statistic]={type:t.statistic,store:t.store});this.statistics[t.statistic]={type:t.statistic,store:this.factory.create()},this.statistics[t.statistic].store.init(this.gridWidgetInput.queryArgs.module,{key:t.statistic,context:{...this.gridWidgetInput.queryArgs.context},params:{...this.gridWidgetInput.queryArgs.params}}).pipe((0,v.take)(1)).subscribe()}})})}setupLoading$(){const e=[];Object.keys(this.statistics).forEach(r=>e.push(this.statistics[r].store.loading$));let t=(0,S.of)([]);if(e.length<1)t=(0,S.of)([]);else if(1===e.length)t=e[0].pipe((0,v.map)(r=>[r]));else{let o,r=null;[r,...o]=e,t=r.pipe((0,S.combineLatestWith)(o))}this.loading$=t.pipe((0,v.map)(r=>{if(!r||r.length<1)return this.loading=!1,!1;let o=!0;return r.forEach(s=>{o=o&&s}),this.loading=o,o})),this.subs.push(this.loading$.subscribe())}setupReload(){this.gridWidgetInput.widgetConfig.reload$&&this.subs.push(this.gridWidgetInput.widgetConfig.reload$.subscribe(()=>{!1===this.loading&&(this.loading=!0,Object.keys(this.statistics).forEach(e=>{const t=this.statistics[e];t.store&&t.store.load(!1).pipe((0,v.take)(1)).subscribe()}))}))}setupVM(){let e=(0,S.of)([]).pipe((0,v.shareReplay)());const t=(0,S.of)(this.getLayout()).pipe((0,v.shareReplay)());if(this.statistics&&Object.keys(this.statistics).length>0){const r=[];if(Object.keys(this.statistics).forEach(o=>r.push(this.statistics[o].store.state$)),r.length<1)e=(0,S.of)([]);else if(1===r.length)e=r[0].pipe((0,v.map)(o=>[o]));else{let s,o=null;[o,...s]=r,e=o.pipe((0,S.combineLatestWith)(s))}}this.vm$=e.pipe((0,S.combineLatestWith)(t),(0,v.map)(([r,o])=>{const s={},c=[],l=[];return r.forEach(u=>{s[u.query.key]=u;const d=this.getLabel(u.statistic.metadata,"tooltip_title_key");d&&c.push(d);const f=this.getLabel(u.statistic.metadata,"descriptionKey");f&&l.push(f)}),{layout:o,statistics:s,tooltipTitleText:c.join(" | "),description:l.join(" | ")}}))}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(Oe),n.\u0275\u0275directiveInject(Wa))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-grid-widget"]],inputs:{config:"config"},decls:3,vars:4,consts:[["class","p-3 widget-message",4,"ngIf"],["class","grid-widget d-flex flex-column","placement","auto","container","body",3,"ngbTooltip",4,"ngIf"],[1,"p-3","widget-message"],[3,"labelKey"],["placement","auto","container","body",1,"grid-widget","d-flex","flex-column",3,"ngbTooltip"],[4,"ngFor","ngForOf"],[3,"class",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"widget-entry-icon"],[3,"image","klass"],["class","widget-entry-value",4,"ngIf"],["class","widget-entry-loading",4,"ngIf"],[1,"widget-entry-value"],["mode","list",3,"type","field"],[1,"widget-entry-loading"],[1,"widget-entry-label","text-truncate"],[3,"labelKey","module"],[1,"text-truncate","widget-entry-label"],["class","widget-entry-dynamic-label",4,"ngIf"],[1,"widget-entry-dynamic-label"],[3,"context","fields","labelKey"]],template:function(t,r){1&t&&(n.\u0275\u0275template(0,c8,2,1,"div",0),n.\u0275\u0275template(1,M8,2,2,"div",1),n.\u0275\u0275pipe(2,"async")),2&t&&(n.\u0275\u0275property("ngIf",r.messageLabelKey),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!r.messageLabelKey&&n.\u0275\u0275pipeBind1(2,2,r.vm$)))},dependencies:[F.NgForOf,F.NgIf,Ki,ec,Ot,mn,no,de.NgbTooltip,F.AsyncPipe],encapsulation:2})}return i})();function S8(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275element(1,"scrm-button",1),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("config",e.internalConfig)}}let J1=(()=>{class i{config;status="maximised";internalConfig;buttonClasses=["minimise-button"];constructor(){}ngOnInit(){this.buildButton()}ngOnChanges(e){e.config&&this.buildButton()}buildButton(){const e=M.Button.fromButton(this.config);e.addClasses(this.buttonClasses),e.icon=this.getIcon(),e.onClick=()=>{this.config.onClick(),this.toggleStatus()},this.internalConfig=e}toggleStatus(){let e="minimised";"minimised"===this.status&&(e="maximised"),this.status=e,this.buildButton()}getIcon(){return"minimised"===this.status?"plus_thin":"minimise"}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-minimise-button"]],inputs:{config:"config",status:"status"},features:[n.\u0275\u0275NgOnChangesFeature],decls:1,vars:1,consts:[[4,"ngIf"],[3,"config"]],template:function(t,r){1&t&&n.\u0275\u0275template(0,S8,2,1,"ng-container",0),2&t&&n.\u0275\u0275property("ngIf",r.internalConfig)},dependencies:[F.NgIf,Nn],encapsulation:2})}return i})();function D8(i,a){if(1&i&&n.\u0275\u0275element(0,"scrm-close-button",9),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("config",e.getCloseButton())}}function w8(i,a){if(1&i&&n.\u0275\u0275element(0,"scrm-minimise-button",10),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("config",e.minimiseButton)("status",e.minimiseStatus)}}function x8(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",11),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(e.title)}}function E8(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",11),n.\u0275\u0275element(1,"scrm-label",12),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("labelKey",e.titleKey)}}function F8(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",2)(1,"div",3)(2,"div",4),n.\u0275\u0275template(3,D8,1,1,"scrm-close-button",5),n.\u0275\u0275template(4,w8,1,2,"scrm-minimise-button",6),n.\u0275\u0275projection(5,1),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(6,x8,2,1,"div",7),n.\u0275\u0275template(7,E8,2,1,"div",7),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(8,"div",8),n.\u0275\u0275projection(9,2),n.\u0275\u0275elementEnd()()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(3),n.\u0275\u0275property("ngIf",e.isClosable()),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.isCollapsible()),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",e.title),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.titleKey)}}const I8=[[["","panel-body",""]],[["","panel-icon-area",""]],[["","panel-header-button",""]]],A8=["[panel-body]","[panel-icon-area]","[panel-header-button]"];let ua=(()=>{class i{klass="";bodyPadding=2;title;titleKey;mode="closable";isCollapsed$;close={klass:["btn","btn-outline-light","btn-sm"]};showHeader=!0;isCollapsed=!1;minimiseButton;minimiseStatus;buttonClasses=["btn","btn-outline-light","btn-sm"];subs=[];constructor(){}ngOnInit(){this.isCollapsed$&&this.subs.push(this.isCollapsed$.subscribe(e=>{this.isCollapsed=e,this.initMinimiseButton()})),this.initMinimiseButton()}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}getCloseButton(){if(!this.close)return null;const e=M.Button.fromButton(this.close);return e.addClasses(this.buttonClasses),this.close=e,e}isClosable(){return"closable"===this.mode}isCollapsible(){return"collapsible"===this.mode}initMinimiseButton(){this.minimiseButton={klass:["btn","btn-outline-light","btn-sm"],onClick:()=>{this.isCollapsed=!this.isCollapsed,this.initMinimiseStatus()}},this.initMinimiseStatus()}initMinimiseStatus(){this.minimiseStatus=this.isCollapsed?"minimised":"maximised"}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-panel"]],inputs:{klass:"klass",bodyPadding:"bodyPadding",title:"title",titleKey:"titleKey",mode:"mode",isCollapsed$:"isCollapsed$",close:"close",showHeader:"showHeader"},ngContentSelectors:A8,decls:4,vars:10,consts:[["class","card-header d-flex justify-content-between align-items-center",4,"ngIf"],[3,"ngbCollapse"],[1,"card-header","d-flex","justify-content-between","align-items-center"],[1,"flex-grow-1","align-items-center","d-flex"],[1,"d-flex","align-items-center"],[3,"config",4,"ngIf"],[3,"config","status",4,"ngIf"],["class","pl-1 panel-title",4,"ngIf"],[1,"panel-buttons","float-right"],[3,"config"],[3,"config","status"],[1,"pl-1","panel-title"],[3,"labelKey"]],template:function(t,r){1&t&&(n.\u0275\u0275projectionDef(I8),n.\u0275\u0275elementStart(0,"div"),n.\u0275\u0275template(1,F8,10,4,"div",0),n.\u0275\u0275elementStart(2,"div",1),n.\u0275\u0275projection(3),n.\u0275\u0275elementEnd()()),2&t&&(n.\u0275\u0275classMapInterpolate1("card panel-card ",r.klass,""),n.\u0275\u0275classProp("collapsed",r.isCollapsed),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.showHeader),n.\u0275\u0275advance(1),n.\u0275\u0275classMapInterpolate1("card-body p-",r.bodyPadding,""),n.\u0275\u0275property("ngbCollapse",r.isCollapsed))},dependencies:[F.NgIf,vu,de.NgbCollapse,J1,Ot],encapsulation:2})}return i})();function T8(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",5),n.\u0275\u0275projection(1),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275property("@widgetContentFade",e.displayContent?"true":"false")}}const N8=[[["","widget-body",""]]],L8=["[widget-body]"];let Ga=(()=>{class i{languageStore;title="";mode="none";displayContent=!0;constructor(e){this.languageStore=e}ngOnInit(){}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(Oe))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-widget-panel"]],inputs:{title:"title",mode:"mode"},ngContentSelectors:L8,decls:5,vars:3,consts:[[1,"accordion","widget-panel","mr-0","shadow-sm"],["bodyPadding","0",3,"mode","title"],["panel-header-button",""],["panel-body",""],["class","widget collapse show open-close-container","data-parent",".widget-panel",4,"ngIf"],["data-parent",".widget-panel",1,"widget","collapse","show","open-close-container"]],template:function(t,r){1&t&&(n.\u0275\u0275projectionDef(N8),n.\u0275\u0275elementStart(0,"div",0)(1,"scrm-panel",1),n.\u0275\u0275element(2,"span",2),n.\u0275\u0275elementStart(3,"div",3),n.\u0275\u0275template(4,T8,2,1,"div",4),n.\u0275\u0275elementEnd()()()),2&t&&(n.\u0275\u0275advance(1),n.\u0275\u0275property("mode",r.mode)("title",r.title),n.\u0275\u0275advance(3),n.\u0275\u0275property("ngIf",r.displayContent))},dependencies:[F.NgIf,ua],encapsulation:2,data:{animation:[(0,jt.trigger)("widgetFade",[(0,jt.transition)("void => *",[(0,jt.style)({transform:"translateX(100%)",opacity:0}),(0,jt.animate)("500ms",(0,jt.style)({transform:"translateX(0)",opacity:1}))]),(0,jt.transition)("* => void",[(0,jt.style)({transform:"translateX(0)",opacity:1}),(0,jt.animate)("500ms",(0,jt.style)({transform:"translateX(100%)",opacity:0}))])]),(0,jt.trigger)("widgetContentFade",[(0,jt.transition)("void => *",[(0,jt.style)({transform:"translateY(-5%)",opacity:0}),(0,jt.animate)("500ms",(0,jt.style)({transform:"translateY(0)",opacity:1}))]),(0,jt.transition)("* => void",[(0,jt.style)({transform:"translateY(0)",opacity:1}),(0,jt.animate)("500ms",(0,jt.style)({transform:"translateY(-5%)",opacity:0}))])])]}})}return i})(),Q1=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Xt]})}return i})(),Pr=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Xt,Oa,de.NgbModule,Q1,Nt]})}return i})(),hr=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,fn,Pr]})}return i})(),ud=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Pn,Br,hr,Nt,fn,io,de.NgbTooltipModule]})}return i})();function B8(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",5)(1,"div",6)(2,"strong"),n.\u0275\u0275text(3),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(4,"div",7),n.\u0275\u0275text(5),n.\u0275\u0275elementEnd()()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(3),n.\u0275\u0275textInterpolate(e.getColumnLabel("LBL_CHECKSYS_TITLE")),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate1(" ",e.getColumnLabel("ERR_CHECKSYS")," ")}}function O8(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"span",14)(1,"strong"),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd()()),2&i){const e=n.\u0275\u0275nextContext().$implicit,t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate1(" ",t.getColumnLabel(e.value.info)," ")}}function R8(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div"),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext().$implicit,t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",t.getColumnLabel(e.value.error)," ")}}function j8(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"li"),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&i){const e=a.$implicit;n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",e," ")}}function k8(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",15)(1,"ul"),n.\u0275\u0275template(2,j8,2,1,"li",4),n.\u0275\u0275elementEnd()()),2&i){const e=n.\u0275\u0275nextContext().$implicit;n.\u0275\u0275advance(2),n.\u0275\u0275property("ngForOf",e.value.data)}}function P8(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"li")(1,"div",8)(2,"div")(3,"span"),n.\u0275\u0275element(4,"scrm-image",9),n.\u0275\u0275elementStart(5,"strong",10),n.\u0275\u0275text(6),n.\u0275\u0275elementEnd()(),n.\u0275\u0275template(7,O8,3,1,"span",11),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(8,R8,2,1,"div",12),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(9,k8,3,1,"div",13),n.\u0275\u0275elementEnd()),2&i){const e=a.$implicit,t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275classMapInterpolate1("alert ",t.getAlertType(e.value),""),n.\u0275\u0275advance(3),n.\u0275\u0275property("image",t.getAlertIcon(e.value)),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate1(" ",t.getColumnLabel(e.value.label)," "),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",""!==e.value.info),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",""!==e.value.error),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",0!==e.value.data.length)}}const Ka={success:{alertClass:"alert-success",alertIcon:"info-circle"},error:{alertClass:"alert-danger",alertIcon:"exclamation-circle"},warning:{alertClass:"alert-warning",alertIcon:"exclamation-triangle"},info:{alertClass:"alert-info",alertIcon:"info-circle"},light:{alertClass:"alert-light",alertIcon:"exclamation-circle"}};let dd=(()=>{class i{appState;languageStore;modal;errors;titleKey="LBL_CHECKSYS_TITLE";closeButtonIcon;closeButton;saveButton;constructor(e,t,r){this.appState=e,this.languageStore=t,this.modal=r}getHeaderLabel(){return this.languageStore.getFieldLabel("LBL_CHECKSYS_TITLE")}getColumnLabel(e){const t=this.languageStore.getFieldLabel(e,this.appState.getModule());return(0,M.isEmptyString)(t)?e:t}ngOnInit(){console.log(this.errors),this.closeButtonIcon={klass:["btn","btn-outline-light","btn-sm"],onClick:()=>{this.modal.close({type:"close-button"})}},this.closeButton={klass:["btn","modal-button-cancel"],labelKey:"LBL_COLUMN_SELECTOR_CLOSE_BUTTON",onClick:()=>{this.modal.close({type:"close-button"})}}}getAlertType(e){return"error"===e.status?Ka[e.type].alertClass:Ka[e.status].alertClass}getAlertIcon(e){return"error"===e.status?Ka[e.type].alertIcon:Ka[e.status].alertIcon}returnZero(){return 0}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(Gt),n.\u0275\u0275directiveInject(Oe),n.\u0275\u0275directiveInject(de.NgbActiveModal))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-install-error-modal"]],inputs:{errors:"errors"},decls:8,vars:11,consts:[[3,"closable","close","title","titleKey","headerKlass","bodyKlass"],["modal-body",""],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"list-style-none"],[4,"ngFor","ngForOf"],["role","alert",1,"alert","alert-danger"],[1,"alert-heading"],[1,"alert-desc"],["role","alert"],[3,"image"],[2,"margin-left","2px"],["style","float:right",4,"ngIf"],[4,"ngIf"],["class","alert alert-light","role","alert",4,"ngIf"],[2,"float","right"],["role","alert",1,"alert","alert-light"]],template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"scrm-modal",0)(1,"div",1),n.\u0275\u0275elementContainerStart(2),n.\u0275\u0275template(3,B8,6,2,"div",2),n.\u0275\u0275elementStart(4,"div")(5,"ul",3),n.\u0275\u0275template(6,P8,10,8,"li",4),n.\u0275\u0275pipe(7,"keyvalue"),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementContainerEnd(),n.\u0275\u0275elementEnd()()),2&t&&(n.\u0275\u0275property("closable",!0)("close",r.closeButtonIcon)("title",r.getHeaderLabel())("titleKey",r.titleKey)("headerKlass","alert-header")("bodyKlass","alert-body"),n.\u0275\u0275advance(3),n.\u0275\u0275property("ngIf",r.errors.hasValidationError&&!0===r.errors.hasValidationError),n.\u0275\u0275advance(3),n.\u0275\u0275property("ngForOf",n.\u0275\u0275pipeBind2(7,8,r.errors.data,r.returnZero)))},dependencies:[F.NgForOf,F.NgIf,qo,mn,F.KeyValuePipe],encapsulation:2})}return i})(),$8=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i,bootstrap:[dd]});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,jp,Oa,ro,Nt,Xt,de.NgbModule,de.NgbAlertModule,fn]})}return i})();class da extends M.ActionHandler{}let X1=(()=>{class i extends da{moduleNameMapper;router;key="create";modes=["list"];constructor(e,t){super(),this.moduleNameMapper=e,this.router=t}run(e){const t=e.module,r=e?.action?.moduleAction??"edit",o=e?.parentId??"",s=e.parentModule??"",c=`/${t}/${r}`,l={return_module:this.moduleNameMapper.toLegacy(s),return_action:"DetailView",return_id:o,relate_to:s,relate_id:o};this.addAdditionalFields(e,l),this.addParams(e,l),this.router.navigate([c],{queryParams:l}).then()}shouldDisplay(){return!0}addAdditionalFields(e,t){const r=e.store.parentRecord&&e.store.parentRecord.attributes||{};if(!r&&!Object.keys(r).length)return;const o=e.action.additionalFields??{};(Object.keys(o)||[]).forEach(c=>{if(!c||!o[c])return;const u=(0,Ze.Z)(r,o[c],null);(0,M.isVoid)(u)||(t[c]=u)})}addParams(e,t){const r=e.action.extraParams??{};(Object.keys(r)||[]).forEach(s=>{!s||!r[s]||(t[s]=r[s])})}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(_n),n.\u0275\u0275inject(Ft.Router))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Y1=(()=>{class i extends da{modalService;message;asyncActionService;key="select";modes=["list"];constructor(e,t,r){super(),this.modalService=e,this.message=t,this.asyncActionService=r}shouldDisplay(e){return!0}run(e){this.showSelectModal(e)}showSelectModal(e){const t=this.modalService.open(na,{size:"xl",scrollable:!0}),r=e.module;t.componentInstance.module=r,t.componentInstance.parentModule=e?.parentModule??"",t.componentInstance.multiSelect=!0,t.componentInstance.multiSelectButtonLabel="LBL_LINK",t.result.then(o=>{if(!o||!o.selection||!o.selection.selected)return;const s=this.getSelectedIds(o);let c=e.subpanelMeta.get_subpanel_data;const l=e.subpanelMeta?.collection_list??null;l&&l?.[r]?.get_subpanel_data&&(c=l[r].get_subpanel_data),this.runAsyncAction({action:"record-select",module:e.store.parentModule,id:e.store.parentId||"",payload:{baseModule:e.parentModule,baseRecordId:e.parentId,linkField:c,relateModule:r,relateRecordIds:s}},e)})}getSelectedIds(e){const t=[];return Object.keys(e.selection.selected).forEach(r=>{r&&t.push(r)}),t}runAsyncAction(e,t){this.message.removeMessages(),this.asyncActionService.run("record-select",e).pipe((0,v.take)(1)).subscribe(()=>{t.store.load(!1).pipe((0,v.take)(1)).subscribe(),t.store.loadAllStatistics(!1).pipe((0,v.take)(1)).subscribe()})}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(de.NgbModal),n.\u0275\u0275inject(ct),n.\u0275\u0275inject(Kt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),eC=(()=>{class i extends da{key="async-process";modes=M.ALL_VIEW_MODES;constructor(){super()}run(e){}shouldDisplay(e){return!0}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),tC=(()=>{class i extends da{key="show-filter";modes=["list"];shouldDisplay(e){return!0}getStatus(e){return this.isAnyFilterApplied(e.store)?"active":""}run(e){e.store.toggleFilter()}isAnyFilterApplied(e){return e.hasActiveFilter()||!e.areAllCurrentCriteriaFilterEmpty()}static \u0275fac=function(){let e;return function(r){return(e||(e=n.\u0275\u0275getInheritedFactory(i)))(r||i)}}();static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),nC=(()=>{class i extends da{key="clear-filter";modes=["list"];shouldDisplay(e){return this.isAnyFilterApplied(e.store)}run(e){e.store.clearFilter()}isAnyFilterApplied(e){return e.hasActiveFilter()||!e.areAllCurrentCriteriaFilterEmpty()}static \u0275fac=function(){let e;return function(r){return(e||(e=n.\u0275\u0275getInheritedFactory(i)))(r||i)}}();static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Ha=(()=>{class i extends si{create;select;async;showFilter;clearFilter;constructor(e,t,r,o,s){super(),this.create=e,this.select=t,this.async=r,this.showFilter=o,this.clearFilter=s,r.modes.forEach(c=>this.actions[c][r.key]=r),e.modes.forEach(c=>this.actions[c][e.key]=e),t.modes.forEach(c=>this.actions[c][t.key]=t),o.modes.forEach(c=>this.actions[c][o.key]=o),s.modes.forEach(c=>this.actions[c][s.key]=s)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(X1),n.\u0275\u0275inject(Y1),n.\u0275\u0275inject(eC),n.\u0275\u0275inject(tC),n.\u0275\u0275inject(nC))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function U8(i,a){if(1&i&&n.\u0275\u0275element(0,"scrm-button-group",3),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("config$",e.config$)}}function V8(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"div",1)(2,"div"),n.\u0275\u0275template(3,U8,1,1,"scrm-button-group",2),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(2),n.\u0275\u0275classMap(e.klass),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.config$)}}let iC=(()=>{class i{languageStore;actionManager;languages;screenSize;systemConfigStore;klass="";record;config;limitConfigKey="listview_line_actions_limits";configState=new S.BehaviorSubject({buttons:[]});config$=this.configState.asObservable();actions;vm$;buttonClass="line-action-item line-action";buttonGroupClass="float-right";subs=[];screen=kn.Medium;defaultBreakpoint=3;breakpoint;constructor(e,t,r,o,s){this.languageStore=e,this.actionManager=t,this.languages=r,this.screenSize=o,this.systemConfigStore=s}ngOnInit(){this.subs.push(this.config.getActions({record:this.record}).pipe((0,S.combineLatestWith)(this.screenSize.screenSize$,this.languages.vm$),(0,v.map)(([e,t,r])=>{t&&(this.screen=t),this.configState.next(this.getButtonGroupConfig(e)),this.actions=e})).subscribe())}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}getButtonGroupConfig(e){const t=[],r=[];e.forEach(c=>{const l=this.buildButton(c);c.params&&c.params.expanded?t.push(l):r.push(l)});let o=e.length;const s=t.concat(r);return{buttonKlass:[this.buttonClass],dropdownLabel:this.languages.getAppString("LBL_ACTIONS")||"",breakpoint:o,dropdownOptions:{placement:["bottom-right"],wrapperKlass:[this.buttonGroupClass]},buttons:s}}getBreakpoint(){const e=this.systemConfigStore.getConfigValue(this.limitConfigKey);return this.screen&&e&&e[this.screen]?(this.breakpoint=e[this.screen],this.breakpoint):this.breakpoint?this.breakpoint:this.defaultBreakpoint}buildButton(e){const t={titleKey:e.labelKey||"",klass:this.buttonClass,icon:e.icon||"",onClick:()=>{this.config.runAction(e,{module:this.record&&this.record.module||"",record:this.record})}};e.icon&&(t.icon=e.icon);const r=e?.params?.debounceClick??null;return t.debounceClick=!0,(0,M.isFalse)(r)&&(t.debounceClick=!1),e.status&&M.Button.appendClasses(t,[e.status]),t}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(Oe),n.\u0275\u0275directiveInject(Ha),n.\u0275\u0275directiveInject(Oe),n.\u0275\u0275directiveInject(ai),n.\u0275\u0275directiveInject(dt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-line-action-menu"]],inputs:{klass:"klass",record:"record",config:"config",limitConfigKey:"limitConfigKey"},decls:1,vars:1,consts:[[4,"ngIf"],["id","line-action-div",1,"line-action","float-right"],[3,"config$",4,"ngIf"],[3,"config$"]],template:function(t,r){1&t&&n.\u0275\u0275template(0,V8,4,4,"ng-container",0),2&t&&n.\u0275\u0275property("ngIf",r.actions)},dependencies:[F.NgIf,Yr],encapsulation:2})}return i})(),rC=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,de.NgbModule,fn,Ft.RouterModule,dr]})}return i})(),oC=(()=>{class i{loadMoreButton;static \u0275fac=function(t){return new(t||i)};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-load-more"]],inputs:{loadMoreButton:"loadMoreButton"},decls:3,vars:1,consts:[[1,"float-right"],[1,"",3,"config"],["image","plus_thin",1,"small",2,"fill","#FFFFFF"]],template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"div",0)(1,"scrm-button",1),n.\u0275\u0275element(2,"scrm-image",2),n.\u0275\u0275elementEnd()()),2&t&&(n.\u0275\u0275advance(1),n.\u0275\u0275property("config",r.loadMoreButton))},dependencies:[mn,Nn],encapsulation:2})}return i})(),aC=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,fn,Xt]})}return i})();class sC{url="";md5="";width=0;height=0}let jc=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-logo-ui"]],decls:1,vars:0,consts:[["image","company_logo",1,"logo"]],template:function(t,r){1&t&&n.\u0275\u0275element(0,"scrm-image",0)},dependencies:[mn],encapsulation:2})}return i})(),kc=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,fn]})}return i})();function z8(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"a",1),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(e);const r=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(r.doLogout())}),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()}if(2&i){const e=a.ngIf,t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(e.appStrings[t.logout.logoutAction.label]||"")}}let cC=(()=>{class i{auth;languageStore;logout={logoutAction:{label:"LBL_LOGOUT"}};languages$=(0,S.of)({});vm$=this.languages$.pipe((0,v.map)(e=>({appStrings:e.appStrings||{},appListStrings:e.appListStrings||{}})));constructor(e,t){this.auth=e,this.languageStore=t,this.languages$=t?.vm$??(0,S.of)({})}doLogout(){this.auth.logout()}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(Hn),n.\u0275\u0275directiveInject(Oe))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-logout-ui"]],decls:2,vars:3,consts:[[4,"ngIf"],[1,"dropdown-item","global-links-sublink",3,"click"]],template:function(t,r){1&t&&(n.\u0275\u0275template(0,z8,3,1,"ng-container",0),n.\u0275\u0275pipe(1,"async")),2&t&&n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(1,1,r.vm$))},dependencies:[F.NgIf,F.AsyncPipe],encapsulation:2})}return i})(),lC=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule]})}return i})();function W8(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275text(1),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext().$implicit,t=n.\u0275\u0275nextContext(2).ngIf;n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(t[e.labelKey]||e.labelKey||"")}}function G8(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275text(1),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext().$implicit;n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(e.text)}}function K8(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"div",5),n.\u0275\u0275listener("click",function(){const o=n.\u0275\u0275restoreView(e).$implicit,s=n.\u0275\u0275nextContext(3);return n.\u0275\u0275resetView(s.close(o))}),n.\u0275\u0275template(1,W8,2,1,"ng-container",6),n.\u0275\u0275template(2,G8,2,1,"ng-container",6),n.\u0275\u0275elementStart(3,"a",7),n.\u0275\u0275listener("click",function(){const o=n.\u0275\u0275restoreView(e).$implicit,s=n.\u0275\u0275nextContext(3);return n.\u0275\u0275resetView(s.close(o))}),n.\u0275\u0275elementStart(4,"span",8),n.\u0275\u0275text(5,"\xd7"),n.\u0275\u0275elementEnd()()()}if(2&i){const e=a.$implicit;n.\u0275\u0275classMapInterpolate1("message ",e.type," alert-dismissible fade show shadow"),n.\u0275\u0275property("@fade",void 0),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.labelKey),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.text&&!e.labelKey)}}function H8(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",3),n.\u0275\u0275template(1,K8,6,6,"div",4),n.\u0275\u0275elementEnd()),2&i){const e=a.ngIf;n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",e)}}function Z8(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",1),n.\u0275\u0275template(1,H8,2,1,"div",2),n.\u0275\u0275pipe(2,"async"),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(2,1,e.messages$))}}let q8=(()=>{class i{messageService;languages;messages$;appStrings$;constructor(e,t){this.messageService=e,this.languages=t,this.appStrings$=t.appStrings$}ngOnInit(){this.messages$=this.messageService.messages$}close(e){this.messageService.contains(e,!0)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(ct),n.\u0275\u0275directiveInject(Oe))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-message-ui"]],decls:2,vars:3,consts:[["class","container-fluid alert-fixed message-wrapper",4,"ngIf"],[1,"container-fluid","alert-fixed","message-wrapper"],["class","d-flex justify-content-center flex-column align-items-center message-container",4,"ngIf"],[1,"d-flex","justify-content-center","flex-column","align-items-center","message-container"],["role","alert",3,"class","click",4,"ngFor","ngForOf"],["role","alert",3,"click"],[4,"ngIf"],["type","button","data-dismiss","alert","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"]],template:function(t,r){1&t&&(n.\u0275\u0275template(0,Z8,3,3,"div",0),n.\u0275\u0275pipe(1,"async")),2&t&&n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(1,1,r.appStrings$))},dependencies:[F.NgForOf,F.NgIf,F.AsyncPipe],encapsulation:2,data:{animation:[(0,jt.trigger)("fade",[(0,jt.transition)(":enter",(0,jt.useAnimation)(Js.fadeIn,{params:{timing:.5,delay:0}})),(0,jt.transition)(":leave",(0,jt.useAnimation)(Js.fadeOut,{params:{timing:.5,delay:0}}))])]}})}return i})(),J8=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule]})}return i})(),Q8=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,ro]})}return i})(),uC=(()=>{class i{buttonUtils;config;config$;activeModal=null;buttonGroup$;defaultButtonGroup={breakpoint:4,wrapperKlass:["modal-buttons"],buttonKlass:["modal-button","btn","btn-sm"],buttons:[]};constructor(e,t){this.buttonUtils=e,this.config=t;const r=this.config.getConfigValue("ui");r&&r.modal_button_group_breakpoint&&(this.defaultButtonGroup.breakpoint=r.modal_buttons_collapse_breakpoint)}ngOnInit(){this.config$&&(this.buttonGroup$=this.config$.pipe((0,v.map)(e=>this.mapButtonGroup(e))))}mapButtonGroup(e){const t=(0,Pk.Z)({...e},(0,M.deepClone)(this.defaultButtonGroup));return this.mapButtons(t),t}mapButtons(e){const t=e.buttons||[];e.buttons=[],t.length>0&&t.forEach(r=>{const o=this.buttonUtils.addOnClickPartial(r,this.activeModal);e.buttons.push(o)})}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(C0),n.\u0275\u0275directiveInject(dt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-modal-button-group"]],inputs:{config$:"config$",activeModal:"activeModal"},decls:1,vars:1,consts:[[3,"config$"]],template:function(t,r){1&t&&n.\u0275\u0275element(0,"scrm-button-group",0),2&t&&n.\u0275\u0275property("config$",r.buttonGroup$)},dependencies:[Yr],encapsulation:2})}return i})(),Za=(()=>{class i{activeModal;titleKey;textKey;buttons=[];buttonGroup$;closeButton;constructor(e){this.activeModal=e}ngOnInit(){this.buttonGroup$=(0,S.of)({buttons:this.buttons}),this.closeButton={klass:["btn","btn-outline-light","btn-sm"],onClick:()=>{this.activeModal.close({type:"close-button"})}}}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(de.NgbActiveModal))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-message-modal"]],inputs:{titleKey:"titleKey",textKey:"textKey",buttons:"buttons"},decls:6,vars:6,consts:[["klass","message-modal",3,"closable","close","title"],["modal-body","",1,"p-3"],[3,"labelKey"],["modal-footer",""],[3,"activeModal","config$"]],template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"scrm-modal",0)(1,"div",1)(2,"span"),n.\u0275\u0275element(3,"scrm-label",2),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(4,"div",3),n.\u0275\u0275element(5,"scrm-modal-button-group",4),n.\u0275\u0275elementEnd()()),2&t&&(n.\u0275\u0275property("closable",!0)("close",r.closeButton)("title",r.titleKey||""),n.\u0275\u0275advance(3),n.\u0275\u0275property("labelKey",r.textKey),n.\u0275\u0275advance(2),n.\u0275\u0275property("activeModal",r.activeModal)("config$",r.buttonGroup$))},dependencies:[qo,Ot,uC],encapsulation:2,data:{animation:[(0,jt.trigger)("modalFade",[(0,jt.transition)("void <=> *",[(0,jt.animate)("800ms")])])]}})}return i})(),dC=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,dr]})}return i})(),X8=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,ro,dr,Nt,dC,de.NgbModule]})}return i})(),fd=(()=>{class i{title="";static \u0275fac=function(t){return new(t||i)};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-module-title"]],inputs:{title:"title"},decls:2,vars:3,template:function(t,r){1&t&&(n.\u0275\u0275text(0),n.\u0275\u0275pipe(1,"uppercase")),2&t&&n.\u0275\u0275textInterpolate1("\n",n.\u0275\u0275pipeBind1(1,1,r.title),"\n")},dependencies:[F.UpperCasePipe],encapsulation:2})}return i})(),qa=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule]})}return i})();var Ja=function(i){return i.none="",i.blank="_blank",i.parent="_parent",i.self="_self",i.top="_top",i}(Ja||{});class Y8{label;url;route;target=Ja.none}class fC{routeConverter;moduleNavigation;preferences;language;appState;authenticated=!0;logo=new sC;useGroupTabs=!1;globalActions=[];currentUser={id:"",firstName:"",lastName:""};all={modules:[],extra:[]};menu=[];current;constructor(a,e,t,r,o){this.routeConverter=a,this.moduleNavigation=e,this.preferences=t,this.language=r,this.appState=o}resetMenu(){this.menu=[],this.globalActions=[],this.all.modules=[],this.all.extra=[],this.current=null,this.currentUser={}}buildUserActionMenu(a,e){this.currentUser.id=e.id,this.currentUser.firstName=e.firstName,this.currentUser.lastName=e.lastName,a&&a.forEach(t=>{const r=t.name;let o=t.url;if("logout"===r)return;let s=Ja.none;"training"===r?s=Ja.blank:o=this.routeConverter.toFrontEndLink(o);const c=this.language.getAppString(t.labelKey)??"";this.globalActions.push({link:{url:o,label:c,target:s}})})}build(a,e,t){this.buildUserActionMenu(a.userActionMenu,e);const r=this.preferences.getUserPreference("navigation_paradigm"),o="on"===this.preferences.getUserPreference("sort_modules_by_name");"m"!==r?"gm"!==r||this.buildGroupedNavigation(a,t,o):this.buildModuleNavigation(a,t,o)}buildGroupTabMenu(a,e,t,r,o){const s=[],c=[];a&&a.length>0&&(a.forEach(u=>{c.push(this.buildTabMenuItem(u,e[u]))}),o&&this.sortMenuItems(c));let l=0;r.forEach(u=>{l<=t&&s.push(this.buildTabGroupedMenuItem(u.labelKey,u.modules,e,o)),l++}),this.menu=s,this.all.modules=c}buildModuleNavigation(a,e,t){(0,M.ready)([a.tabs,a.modules])&&(this.buildTabMenu(a.tabs,a.modules,e,t),this.buildSelectedModule(a))}buildGroupedNavigation(a,e,t){(0,M.ready)([a.tabs,a.modules,a.groupedTabs])&&(this.buildGroupTabMenu(a.tabs,a.modules,e,a.groupedTabs,t),this.buildSelectedModule(a))}buildSelectedModule(a){const e=this.appState.getModule()??"";""===e||"home"===e||a.modules[e]&&(this.current=this.buildTabMenuItem(e,a.modules[e]))}buildTabMenu(a,e,t,r){const o=[],s=[];if(!a||0===a.length)return this.menu=o,void(this.all.modules=s);let c=0;a.forEach(l=>{const u=this.buildTabMenuItem(l,e[l]);"home"===l||this.appState.getModule()===l||c>=t?s.push(u):o.push(u),c++}),r&&(this.sortMenuItems(o),this.sortMenuItems(s)),this.menu=o,this.all.modules=s}buildTabGroupedMenuItem(a,e,t,r){return{link:{label:this.language.getAppString(a)||a,url:"",route:null,params:null},icon:"",submenu:this.buildGroupedMenu(e,t,r)}}buildGroupedMenu(a,e,t){const r=[];let o=null;return a.forEach(s=>{const c=e[s];if(!c)return;const l=this.buildTabMenuItem(s,c);"home"!==s?r.push(l):o=l}),t&&this.sortMenuItems(r),o&&r.unshift(o),r}buildTabMenuItem(a,e){e.name&&(a=e.name);const t=this.moduleNavigation.getModuleRoute(e),r=this.language.getLanguageStrings()?.appListStrings??{},o={link:{label:this.moduleNavigation.getModuleLabel(e,r),url:t.url,route:t.route,params:null},icon:"home"===a?"home":"",submenu:[],module:a??null,isGroupedMenu:!1};let s=!1;return e&&e.menu.forEach(c=>{const l=c.sublinks||[],u=this.buildSubMenuItem(a,c,l);o.submenu.push(u),l.length>0&&(s=!0)}),o.isGroupedMenu=s,o}buildSubMenuItem(a,e,t){const r=this.moduleNavigation.getActionRoute(e);return{link:{label:this.moduleNavigation.getActionLabel(a,e,this.language.getLanguageStrings()),url:r.url,route:r.route,params:r.params,process:r.process},icon:e.icon||"",submenu:t.map(s=>this.buildSubMenuItem(a,s,[]))}}sortMenuItems(a){a.sort((e,t)=>{const r=e.link.label.toUpperCase(),o=t.link.label.toUpperCase();return r<o?-1:r>o?1:0})}}let $r=(()=>{class i{moduleNameMapper;actionNameMapper;systemConfigStore;constructor(e,t,r){this.moduleNameMapper=e,this.actionNameMapper=t,this.systemConfigStore=r}toFrontEndLink(e){return"#/"+this.toFrontEndRoute(e)}toFrontEndRoute(e){if(e&&e.includes("/#/")){const o=e.split("/#/");return o.length<2?"/":o[1]}const t=this.parse(e);if(!t)return"/";let r=this.buildRoute(t.module,t.action,t.record);return r+=this.buildQueryString(t.params,["module","action","record"]),r}toLegacy(e,t){let r="./legacy/index.php";const o={...t};return e.module&&(o.module=this.moduleNameMapper.toLegacy(e.module)),e.action&&(o.action=this.actionNameMapper.toLegacy(e.action)),e.record&&(o.record=e.record),r+=this.buildQueryString(o),r}parse(e){const t=new Ft.DefaultUrlSerializer,o=e.replace("/legacy","").split("?");if(o.length<2)return null;const s=t.parse("/?"+o[1]),c=s.queryParamMap;return{module:c.get("module")||"",action:c.get("action")||"",record:c.get("record")||"",params:s.queryParams}}parseRouteURL(e){return{module:e[0]?.path??"",action:e[1]?.path??"index",record:e[2]?.path??""}}parseRouteInfoFromUrlTree(e){return this.parseRouteURL(e.root.children[Ft.PRIMARY_OUTLET].segments)}isClassicViewRoute(e){const t=this.systemConfigStore.getConfigValue("module_routing"),r=this.parseRouteInfoFromUrlTree(e),o=r.module;return!t[o]||!t[o][r.action]}matchesActiveRoute(e,t){let o=!0;return[{name:"module",map:s=>s&&this.mapModuleToFrontend(s)},{name:"action",map:s=>s&&this.mapActionToFrontEnd(s)},{name:"record",map:s=>s}].forEach(s=>{!e.snapshot.params[s.name]&&!t[s.name]||(o=o&&e.snapshot.params[s.name]===s.map(t[s.name]))}),o}buildRoute(e,t,r){let s=`${this.mapModuleToFrontend(e)}`;return t&&(s+=`/${this.mapActionToFrontEnd(t)}`),r&&(s+=`/${r}`),s}buildQueryString(e,t=[]){let r=new Ar.HttpParams;return Object.keys(e).forEach(o=>{t.includes(o)||(r=r.set(o,e[o]))}),r.keys().length>0?"?"+r.toString():""}mapModuleToFrontend(e){return this.moduleNameMapper.toFrontend(e)}mapActionToFrontEnd(e){return this.actionNameMapper.toFrontend(e)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(_n),n.\u0275\u0275inject(ao),n.\u0275\u0275inject(dt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();class pd{actionManager;asyncActionService;message;confirmation;language;selectModalService;metadata;defaultActions={detail:[],list:[],edit:[],create:[],massupdate:[]};constructor(a,e,t,r,o,s,c){this.actionManager=a,this.asyncActionService=e,this.message=t,this.confirmation=r,this.language=o,this.selectModalService=s,this.metadata=c}runAction(a,e=null){const t=a&&a.params||{},s=a.params&&a.params.selectModal,c=s&&s.module;t.displayConfirmation?this.confirmation.showModal(t.confirmationLabel||"",()=>{c?this.showSelectModal(s.module,a,e):this.callAction(a,e)}):c?this.showSelectModal(s.module,a,e):this.callAction(a,e)}showSelectModal(a,e,t=null){this.selectModalService.showSelectModal(a,r=>{if(r){const{fields:o,formGroup:s,...c}=r;e.params.modalRecord=c}this.callAction(e,t)})}getActionName(a){return`${a.key}`}parseModeActions(a,e,t=null){if(!a)return[];const r={list:[],detail:[],edit:[],create:[],massupdate:[]};a&&a.length&&a.forEach(s=>{!s.modes||!s.modes.length||s.modes.forEach(c=>{!r[c]&&!s.asyncProcess||r[c].push(s)})}),r.detail=r.detail.concat(this.defaultActions.detail??[]),r.list=r.list.concat(this.defaultActions.list??[]),r.edit=r.edit.concat(this.defaultActions.edit??[]),r.create=r.create.concat(this.defaultActions.create??[]),r.massupdate=r.massupdate.concat(this.defaultActions.massupdate??[]);const o=[];return r[e].forEach(s=>{const c=this.actionManager.getHandler(s,e);if(c){const d=this.buildActionData(s,t);if(!this.shouldDisplay(c,d))return;s.status=c.getStatus(d)||""}const u=this.language.getFieldLabel(s.labelKey,t&&t.module||"");o.push({...s,label:u})}),o}shouldDisplay(a,e){return a&&a.shouldDisplay(e)}callAction(a,e=null){a.asyncProcess?this.runAsyncAction(a,e):this.runFrontEndAction(a,e)}runAsyncAction(a,e=null){const t=this.getActionName(a),r=this.getModuleName(e);this.message.removeMessages();const o=this.buildActionInput(a,t,r,e);this.asyncActionService.run(t,o).pipe((0,v.take)(1)).subscribe(s=>{this.afterAsyncAction(t,r,o,s,a,e)})}afterAsyncAction(a,e,t,r,o,s){this.shouldReload(r)&&this.reload(o,r,s),this.reloadMetadata(e,o,r,s)}reloadMetadata(a,e,t,r){const o=[];this.shouldReloadRecentlyViewed(t)&&o.push(this.metadata.typeKeys.recentlyViewed),this.shouldReloadFavorites(t)&&o.push(this.metadata.typeKeys.favorites),o&&o.length&&this.metadata.reloadModuleMetadata(a,o,!1).pipe((0,v.take)(1)).subscribe()}shouldReloadRecentlyViewed(a){return!(!a.data||!a.data.reloadRecentlyViewed)}shouldReloadFavorites(a){return!(!a.data||!a.data.reloadFavorites)}shouldReload(a){return!(!a.data||!a.data.reload)}runFrontEndAction(a,e=null){const t=this.buildActionData(a,e);this.actionManager.run(a,this.getMode(),t)}}let yn=(()=>{class i{modalService;constructor(e){this.modalService=e}showModal(e,t){const r=this.modalService.open(Za);r.componentInstance.textKey=e??"LBL_GENERIC_CONFIRMATION",r.componentInstance.buttons=[{labelKey:"LBL_CANCEL",klass:["btn-secondary"],onClick:o=>o.dismiss()},{labelKey:"LBL_PROCEED",klass:["btn-main"],onClick:o=>{t(),o.close()}}]}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(de.NgbModal))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),En=(()=>{class i{languageStore;message;modalService;constructor(e,t,r){this.languageStore=e,this.message=t,this.modalService=r}showSelectModal(e,t=null){const r=this.modalService.open(na,{size:"xl",scrollable:!0});r.componentInstance.module=e,r.result.then(o=>{if(!o||!o.selection||!o.selection.selected)return;const s=this.getSelectedRecord(o);if(s.id)null!==t&&t(s);else{let c=this.languageStore.getFieldLabel("ERROR_NO_RECORD");this.message.addDangerMessage(c)}})}getSelectedRecord(e){let t="";Object.keys(e.selection.selected).some(o=>(t=o,!0));let r=null;return e.records.some(o=>{if(o&&o.id===t)return r=o,!0}),r}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Oe),n.\u0275\u0275inject(ct),n.\u0275\u0275inject(de.NgbModal))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Zi=(()=>{class i extends pd{actionManager;asyncActionService;message;confirmation;language;selectModalService;metadata;constructor(e,t,r,o,s,c,l){super(e,t,r,o,s,c,l),this.actionManager=e,this.asyncActionService=t,this.message=r,this.confirmation=o,this.language=s,this.selectModalService=c,this.metadata=l}getActionName(e){return`record-${e.key}`}buildActionInput(e,t,r,o=null){return{action:t,module:r,id:o&&o.record&&o.record.id||"",params:e&&e.params||[]}}static \u0275fac=function(t){n.\u0275\u0275invalidFactory()};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})();class pC extends M.ActionHandler{checkRecordAccess(a,e=[]){return!0}navigateBack(a,e,t,r,o){let s=a.getReturnModule(e),c=a.getReturnAction(e),l=a.getReturnId(e);t!==l&&(s===r&&"record"===c&&l!==t||!s||!c||a.navigateBack(o,r,e))}}let mC=(()=>{class i extends pC{key="async-process";modes=M.ALL_VIEW_MODES;constructor(){super()}run(e){}shouldDisplay(e){const t=e?.action?.acl??[];return!t.length||this.checkRecordAccess(e,t)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),md=(()=>{class i extends si{async;constructor(e){super(),this.async=e,e.modes.forEach(t=>this.actions[t][e.key]=e)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(mC))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),gC=(()=>{class i extends Zi{threadStore;language;actionManager;asyncActionService;message;confirmation;selectModalService;metadata;defaultActions={detail:[],edit:[],create:[],list:[]};collapseButtons=!1;constructor(e,t,r,o,s,c,l,u){super(r,o,s,c,t,l,u),this.threadStore=e,this.language=t,this.actionManager=r,this.asyncActionService=o,this.message=s,this.confirmation=c,this.selectModalService=l,this.metadata=u}getActions(e){return(0,S.of)(this.threadStore.getListMetadata()).pipe((0,S.combineLatestWith)((0,S.of)("list")),(0,v.map)(([t,r])=>r&&t?this.parseModeActions(t.actions,r,this.threadStore.getViewContext()):[]))}getActionName(e){return`record-thread-list-${e.key}`}buildActionData(e,t){return{threadStore:this.threadStore,action:e}}buildActionInput(e,t,r,o=null){return this.message.removeMessages(),{action:t,module:this.threadStore.module,ids:this.threadStore.getRecordIds(),params:e&&e.params||[]}}getMode(){return"list"}getModuleName(e){return this.threadStore.module}reload(e,t,r){(0,M.isTrue)(t?.data?.reloadThread??!1)&&this.threadStore.reload()}shouldReload(e){return(0,M.isTrue)(e?.data?.reloadThread??!1)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Bc),n.\u0275\u0275inject(Oe),n.\u0275\u0275inject(md),n.\u0275\u0275inject(Kt),n.\u0275\u0275inject(ct),n.\u0275\u0275inject(yn),n.\u0275\u0275inject(En),n.\u0275\u0275inject(mt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),hC=(()=>{class i{language;actionManager;asyncActionService;message;confirmation;selectModalService;metadata;constructor(e,t,r,o,s,c,l){this.language=e,this.actionManager=t,this.asyncActionService=r,this.message=o,this.confirmation=s,this.selectModalService=c,this.metadata=l}create(e,t){const r=new gC(e,this.language,this.actionManager,this.asyncActionService,this.message,this.confirmation,this.selectModalService,this.metadata),o=t?.collapseListActions??null;return null!==o&&(r.collapseButtons=o),r}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Oe),n.\u0275\u0275inject(md),n.\u0275\u0275inject(Kt),n.\u0275\u0275inject(ct),n.\u0275\u0275inject(yn),n.\u0275\u0275inject(En),n.\u0275\u0275inject(mt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();class Qa extends M.ActionHandler{checkRecordAccess(a,e=[]){const r=a.itemStore.recordStore.getBaseRecord().acls??[];return!(!r||!r.length)&&this.checkAccess(a.action??null,r,e)}navigateBack(a,e,t,r,o){let s=a.getReturnModule(e),c=a.getReturnAction(e),l=a.getReturnId(e);t!==l&&(s===r&&"record"===c&&l!==t||!s||!c||a.navigateBack(o,r,e))}}let vC=(()=>{class i extends Qa{key="async-process";modes=M.ALL_VIEW_MODES;constructor(){super()}run(e){}shouldDisplay(e){const t=e?.action?.acl??[];return!t.length||this.checkRecordAccess(e,t)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),_C=(()=>{class i extends Qa{modalService;navigation;key="cancel";modes=["edit","detail"];constructor(e,t){super(),this.modalService=e,this.navigation=t}run(e){e.itemStore.recordStore.isDirty()?this.showConfirmationModal(e):this.cancel(e)}shouldDisplay(){return!0}cancel(e){e.itemStore.recordStore.resetStaging(),e.itemStore.setMode("detail")}showConfirmationModal(e){const t=this.modalService.open(Za);t.componentInstance.textKey="WARN_UNSAVED_CHANGES",t.componentInstance.buttons=[{labelKey:"LBL_CANCEL",klass:["btn-secondary"],onClick:r=>r.dismiss()},{labelKey:"LBL_PROCEED",klass:["btn-main"],onClick:r=>{this.cancel(e),r.close()}}]}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(de.NgbModal),n.\u0275\u0275inject(wn))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),yC=(()=>{class i extends Qa{key="edit";modes=["detail"];constructor(){super()}run(e){e.itemStore.setMode("edit")}shouldDisplay(e){return this.checkRecordAccess(e,["edit"])}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),bC=(()=>{class i extends Qa{message;navigation;key="save";modes=["edit"];constructor(e,t){super(),this.message=e,this.navigation=t}run(e){e.itemStore.recordStore.validate().pipe((0,v.take)(1)).subscribe(t=>{t?e.itemStore.save().pipe((0,v.take)(1)).subscribe(r=>{e.itemStore.setMode("detail")}):this.message.addWarningMessageByKey("LBL_VALIDATION_ERRORS")})}shouldDisplay(e){return!0}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(ct),n.\u0275\u0275inject(wn))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),gd=(()=>{class i extends si{async;cancel;edit;save;constructor(e,t,r,o){super(),this.async=e,this.cancel=t,this.edit=r,this.save=o,e.modes.forEach(s=>this.actions[s][e.key]=e),r.modes.forEach(s=>this.actions[s][r.key]=r),o.modes.forEach(s=>this.actions[s][o.key]=o),t.modes.forEach(s=>this.actions[s][t.key]=t)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(vC),n.\u0275\u0275inject(_C),n.\u0275\u0275inject(yC),n.\u0275\u0275inject(bC))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),CC=(()=>{class i extends Zi{itemStore;threadStore;language;actionManager;asyncActionService;message;confirmation;selectModalService;metadata;defaultActions={detail:[],edit:[],create:[]};collapseButtons=!1;constructor(e,t,r,o,s,c,l,u,d){super(o,s,c,l,r,u,d),this.itemStore=e,this.threadStore=t,this.language=r,this.actionManager=o,this.asyncActionService=s,this.message=c,this.confirmation=l,this.selectModalService=u,this.metadata=d}getActions(e){return this.itemStore.meta$.pipe((0,S.combineLatestWith)(this.itemStore.mode$),(0,v.map)(([t,r])=>r&&t?this.parseModeActions(t.actions,r,this.itemStore.getViewContext()):[]))}getActionName(e){return`record-thread-item-${e.key}`}buildActionData(e,t){return{itemStore:this.itemStore,threadStore:this.threadStore,action:e}}buildActionInput(e,t,r,o=null){const s=this.itemStore.getBaseRecord();return this.message.removeMessages(),{action:t,module:s.module,id:s.id,params:e&&e.params||[]}}getMode(){return this.itemStore.getMode()}getModuleName(e){return this.itemStore.getModuleName()}reload(e,t,r){const o=t?.data?.reload??!1,s=t?.data?.reloadThread??!1;(0,M.isTrue)(o)&&this.itemStore.load(!1).pipe((0,v.take)(1)).subscribe(),(0,M.isTrue)(s)&&this.threadStore.reload()}shouldReload(e){const t=e?.data?.reload??!1,r=e?.data?.reloadThread??!1;return(0,M.isTrue)(t)||(0,M.isTrue)(r)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(ad),n.\u0275\u0275inject(Bc),n.\u0275\u0275inject(Oe),n.\u0275\u0275inject(gd),n.\u0275\u0275inject(Kt),n.\u0275\u0275inject(ct),n.\u0275\u0275inject(yn),n.\u0275\u0275inject(En),n.\u0275\u0275inject(mt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),MC=(()=>{class i{language;actionManager;asyncActionService;message;confirmation;selectModalService;metadata;constructor(e,t,r,o,s,c,l){this.language=e,this.actionManager=t,this.asyncActionService=r,this.message=o,this.confirmation=s,this.selectModalService=c,this.metadata=l}create(e,t,r=null){const o=new CC(e,t,this.language,this.actionManager,this.asyncActionService,this.message,this.confirmation,this.selectModalService,this.metadata),s=r?.metadata?.collapseActions??null;return null!==s&&(o.collapseButtons=s),o}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Oe),n.\u0275\u0275inject(gd),n.\u0275\u0275inject(Kt),n.\u0275\u0275inject(ct),n.\u0275\u0275inject(yn),n.\u0275\u0275inject(En),n.\u0275\u0275inject(mt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function e$(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"label",3),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext(3).ngIf,t=n.\u0275\u0275nextContext(4).$implicit,r=n.\u0275\u0275nextContext(4);n.\u0275\u0275property("ngClass",r.getLabelClass(t)),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",e.label," ")}}function t$(i,a){if(1&i&&n.\u0275\u0275element(0,"scrm-label",9),2&i){const e=n.\u0275\u0275nextContext(3).ngIf,t=n.\u0275\u0275nextContext(4).$implicit,r=n.\u0275\u0275nextContext(4);n.\u0275\u0275property("labelKey",e.labelKey)("ngClass",r.getLabelClass(t))}}function n$(i,a){if(1&i&&n.\u0275\u0275element(0,"scrm-dynamic-label",10),2&i){const e=n.\u0275\u0275nextContext(3).ngIf,t=n.\u0275\u0275nextContext(8);n.\u0275\u0275property("labelKey",e.dynamicLabelKey)("fields",t.record.fields)}}function i$(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"div"),n.\u0275\u0275template(2,e$,2,2,"label",6),n.\u0275\u0275template(3,t$,1,2,"scrm-label",7),n.\u0275\u0275template(4,n$,1,2,"scrm-dynamic-label",8),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(2).ngIf,t=n.\u0275\u0275nextContext(4).$implicit,r=n.\u0275\u0275nextContext(4);n.\u0275\u0275advance(1),n.\u0275\u0275classProp("pr-3","inline"===r.getLabelDisplay(t,r.mode)&&"none"!==r.getDisplay(t)),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.label),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!e.label&&e.labelKey),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.dynamicLabelKey)}}function r$(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"div"),n.\u0275\u0275element(2,"scrm-field",11),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(2).ngIf,t=n.\u0275\u0275nextContext(4).$implicit,r=n.\u0275\u0275nextContext(4);n.\u0275\u0275advance(1),n.\u0275\u0275classProp("flex-grow-1","inline"===r.getLabelDisplay(t,r.mode)),n.\u0275\u0275advance(1),n.\u0275\u0275property("field",e)("klass",r.getFieldClass(t))("mode",r.mode)("record",r.record)("type",e.type)}}function o$(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,i$,5,5,"ng-container",1),n.\u0275\u0275template(2,r$,3,7,"ng-container",1),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(5).$implicit,t=n.\u0275\u0275nextContext(4);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf","none"!==t.getLabelDisplay(e,t.mode)),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf","none"!==t.getDisplay(e))}}function a$(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,o$,3,2,"ng-container",1),n.\u0275\u0275elementContainerEnd()),2&i){const e=a.ngIf,t=n.\u0275\u0275nextContext(4).$implicit,r=n.\u0275\u0275nextContext(4);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.shouldDisplay(t,e,r.mode))}}function s$(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,a$,2,1,"ng-container",1),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(3).$implicit,t=n.\u0275\u0275nextContext(4);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.getField(t.record,e.field))}}function c$(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275element(1,"scrm-action-group-menu",12),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(7);let t,r;n.\u0275\u0275advance(1),n.\u0275\u0275property("buttonClass",null!==(t=e.config.buttonClass)&&void 0!==t?t:"")("buttonGroupClass",null!==(r=e.config.buttonGroupClass)&&void 0!==r?r:"")("config",e.config.actions)}}function l$(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"div",5),n.\u0275\u0275template(2,s$,2,1,"ng-container",1),n.\u0275\u0275template(3,c$,2,3,"ng-container",1),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(2).$implicit,t=n.\u0275\u0275nextContext(4);n.\u0275\u0275advance(1),n.\u0275\u0275classProp("align-items-center","inline"===t.getLabelDisplay(e,t.mode))("flex-column","top"===t.getLabelDisplay(e,t.mode))("flex-row","inline"===t.getLabelDisplay(e,t.mode))("justify-content-end",!e.field),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.record),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.actionSlot&&t.config.actions)}}function u$(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",3),n.\u0275\u0275template(1,l$,4,10,"ng-container",1),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext().$implicit,t=n.\u0275\u0275nextContext(4);let r;n.\u0275\u0275classMapInterpolate1("record-flexbox-col ",t.getClass(e),""),n.\u0275\u0275property("ngClass",null!==(r=t.config.colClass)&&void 0!==r?r:null),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf","hidden"!==e.display&&t.shouldColDisplayInMode(e,t.mode))}}function d$(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,u$,2,5,"div",4),n.\u0275\u0275elementContainerEnd()),2&i){const e=a.$implicit,t=n.\u0275\u0275nextContext(4);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf","hidden"!==e.display&&t.shouldColDisplayInMode(e,t.mode))}}function f$(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"div",3),n.\u0275\u0275template(2,d$,2,1,"ng-container",2),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()),2&i){const e=a.$implicit,t=n.\u0275\u0275nextContext(3);let r;n.\u0275\u0275advance(1),n.\u0275\u0275classMapInterpolate3("d-flex record-flexbox-row ",t.getJustify(e.justify)," ",t.getAlign(e.align)," ",t.getLayoutRowClass(e),""),n.\u0275\u0275property("ngClass",null!==(r=t.config.rowClass)&&void 0!==r?r:null),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",e.cols)}}function p$(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,f$,3,7,"ng-container",2),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",e.layout.rows)}}function m$(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div"),n.\u0275\u0275template(1,p$,2,1,"ng-container",1),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275classMapInterpolate2("d-flex ",(e.config&&e.config.flexDirection?e.config.flexDirection:"flex-column")||""," ",e.config&&e.config.klass||"",""),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.layout&&e.layout.rows)}}let SC=(()=>{class i{config;mode="detail";record;layout;maxColumns=4;sizeMap={handset:1,tablet:2,web:3,wide:4};subs=[];constructor(){}ngOnInit(){if(!this.config)return;const e=this.config;e.record$&&this.subs.push(e.record$.subscribe(t=>{this.record=t??null})),e.mode$&&this.subs.push(e.mode$.subscribe(t=>{this.mode=t??"detail"})),e.layout$&&this.subs.push(e.layout$.subscribe(t=>{this.layout=t??null}))}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}getRowClass(){return this.config.rowClass}getColClass(){return this.config.colClass}getSizeClass(e){return{regular:"text-regular",medium:"text-medium",large:"text-large","x-large":"text-x-large","xx-large":"text-xx-large",huge:"text-huge"}[e]||"text-regular"}getFontWeight(e){let t="font-weight-normal";return e&&(0,M.isTrue)(e)&&(t="font-weight-bolder"),t}getColor(e){return{yellow:"text-yellow",blue:"text-blue",green:"text-green",red:"text-red",purple:"text-purple",dark:"text-dark",grey:"text-grey"}[e]||""}getJustify(e){return{start:"justify-content-start",end:"justify-content-end",center:"justify-content-center",between:"justify-content-between",around:"justify-content-around"}[e]||""}getAlign(e){return{start:"align-items-start",end:"align-items-end",center:"align-items-center",baseline:"align-items-baseline",stretch:"align-items-stretch"}[e]||""}getLayoutRowClass(e){return e&&e.class||""}getClass(e){if(!e)return"";const t=[];return t.push(e.class||""),e.size&&t.push(this.getSizeClass(e.size)||""),e.bold&&t.push(this.getFontWeight(e.bold)||""),e.color&&t.push(this.getColor(e.color)||""),t.join(" ")}getLabelDisplay(e,t){return this.shouldLabelDisplayInMode(e,t)?e.labelDisplay||this.config&&this.config.labelDisplay||"inline":"none"}getField(e,t){return t&&t.name&&e&&e.fields?e.fields[t.name]??null:null}getFieldClass(e){let t=this.config.inputClass||{};return e.inputClass&&(t[e.inputClass]=!0),t}getLabelClass(e){let t=this.config.labelClass||{};return e.labelClass&&(t[e.labelClass]=!0),t}shouldDisplay(e,t,r){if(!this.shouldFieldDisplayInMode(e,r))return!1;if(!e.hideIfEmpty)return!0;let s=!1;return s=s||!!t.value,s=s||!(!t.valueList||!t.valueList.length),s=s||!(!t.valueObject||!Object.keys(t.valueObject).length),s}shouldColDisplayInMode(e,t){return this.shouldFieldDisplayInMode(e,t)||this.shouldLabelDisplayInMode(e,t)}shouldFieldDisplayInMode(e,t){const r=e?.modes??null;return!(r&&r.length&&!r.includes(t))}shouldLabelDisplayInMode(e,t){const r=e?.labelModes??null;return!(r&&r.length&&!r.includes(t))}getDisplay(e){return e.display||""}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-record-flexbox"]],inputs:{config:"config"},decls:1,vars:1,consts:[[3,"class",4,"ngIf"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"ngClass"],[3,"ngClass","class",4,"ngIf"],[1,"d-flex"],[3,"ngClass",4,"ngIf"],[3,"labelKey","ngClass",4,"ngIf"],[3,"labelKey","fields",4,"ngIf"],[3,"labelKey","ngClass"],[3,"labelKey","fields"],[3,"field","klass","mode","record","type"],[3,"buttonClass","buttonGroupClass","config"]],template:function(t,r){1&t&&n.\u0275\u0275template(0,m$,2,5,"div",0),2&t&&n.\u0275\u0275property("ngIf",r.config)},dependencies:[F.NgClass,F.NgForOf,F.NgIf,Ki,Ot,ur,no],encapsulation:2})}return i})();const g$=["body"];function h$(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275element(1,"scrm-record-flexbox",6),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("config",e.buildConfig(e.config.metadata.headerLayout))}}function v$(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275element(1,"scrm-record-flexbox",6),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("config",e.buildConfig(e.config.metadata.bodyLayout))}}function _$(i,a){1&i&&n.\u0275\u0275element(0,"div",7)}function y$(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",8),n.\u0275\u0275element(1,"scrm-button",6),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("config",e.getCollapseButton())}}function b$(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div")(1,"div",1),n.\u0275\u0275template(2,h$,2,1,"ng-container",2),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(3,"div",null,3),n.\u0275\u0275template(5,v$,2,1,"ng-container",2),n.\u0275\u0275template(6,_$,1,0,"div",4),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(7,y$,2,1,"div",5),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275classMapInterpolate2("d-flex flex-column record-thread-item ",e.config&&e.config.klass||""," ",e.dynamicClass,""),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",e.config.metadata&&e.config.metadata.headerLayout),n.\u0275\u0275advance(1),n.\u0275\u0275classMapInterpolate1("record-thread-item-body flex-grow-1 ",e.getBodyClass(),""),n.\u0275\u0275classProp("collapsed",e.collapsible&&e.collapsed)("expanded",e.collapsible&&!e.collapsed),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",e.config.metadata&&e.config.metadata.bodyLayout),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.collapsible&&e.collapsed),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.collapsible)}}let DC=(()=>{class i{actionAdapterFactory;config;bodyEl;collapsed=!1;collapsible=!1;collapseLimit=300;dynamicClass="";subs=[];actionAdapter;dynamicClassesMap={};dynamicClassFieldSubs=[];constructor(e){this.actionAdapterFactory=e}ngOnInit(){this.actionAdapter=this.actionAdapterFactory.create(this.config.store,this.config.threadStore,this.config),this.initDynamicClass()}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe()),this.dynamicClassFieldSubs.forEach(e=>e.unsubscribe())}ngAfterViewInit(){!this.config||!this.config.collapsible||setTimeout(()=>{(this.bodyEl.nativeElement.offsetHeight||this.bodyEl.nativeElement.height)>(this.config.collapseLimit||this.collapseLimit)&&(this.collapsible=!0,this.collapsed=!0)},2e3)}buildConfig(e){return{record$:this.config.store.stagingRecord$,mode$:this.config.store.mode$,layout$:(0,S.of)(e).pipe((0,v.shareReplay)(1)),inputClass:{...this.config.inputClass||{},"form-control form-control-sm":!0},buttonClass:this?.config?.buttonClass??"",buttonGroupClass:this?.config?.buttonGroupClass??"",labelClass:this?.config?.labelClass??{},rowClass:this?.config?.rowClass??{},colClass:this?.config?.colClass??{},actions:this?.actionAdapter,klass:this?.config?.containerClass,flexDirection:this?.config?.flexDirection||""}}getCollapseButton(){return{klass:"collapse-button btn btn-link btn-sm",labelKey:this.collapsed?"LBL_SHOW_MORE":"LBL_SHOW_LESS",onClick:()=>{this.collapsed=!this.collapsed,this.collapsed?this.config&&this.config.collapsed():this.config&&this.config.expanded()}}}initDynamicClass(){!this.config||!this.config.dynamicClass||!this.config.dynamicClass.length||this.subs.push(this.config.store.stagingRecord$.subscribe(e=>{const t={};this.dynamicClassFieldSubs.forEach(r=>r.unsubscribe()),e&&e.fields&&Object.keys(e.fields).length&&(this.config.dynamicClass.forEach(r=>{if(!r||!e.fields[r]&&!e.attributes[r])return;e.fields[r]&&this.dynamicClassFieldSubs.push(e.fields[r].valueChanges$.pipe((0,v.debounceTime)(100)).subscribe(()=>{const s=this.getDynamicClasses(r,e)??"";""!==s&&(this.dynamicClassesMap[r]=s,this.calculateDynamicClasses())}));const o=this.getDynamicClasses(r,e)??"";""!==o&&(t[r]=o)}),this.dynamicClassesMap=t,this.calculateDynamicClasses())}))}calculateDynamicClasses(){const e=[];Object.keys(this.dynamicClassesMap??{}).forEach(t=>{const r=this.dynamicClassesMap[t]??"";""!==r&&e.push(r)}),this.dynamicClass=e.join(" ")}getDynamicClasses(e,t){const r=e+"-";let o=[];return t.fields[e]?(t.fields[e].value&&o.push(t.fields[e].value),t.fields[e].valueList&&t.fields[e].valueList.length&&(o=o.concat(t.fields[e].valueList))):Array.isArray(t.attributes[e])?o=o.concat(t.attributes[e]):"object"!=typeof t.attributes[e]&&o.push(t.attributes[e]),o&&o.length?r+o.join(" "+r):""}getBodyClass(){return this.config?.metadata?.bodyLayout?.class??""}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(MC))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-record-thread-item"]],viewQuery:function(t,r){if(1&t&&n.\u0275\u0275viewQuery(g$,5),2&t){let o;n.\u0275\u0275queryRefresh(o=n.\u0275\u0275loadQuery())&&(r.bodyEl=o.first)}},inputs:{config:"config"},decls:1,vars:1,consts:[[3,"class",4,"ngIf"],[1,"record-thread-item-header","flex-grow-1"],[4,"ngIf"],["body",""],["class","fadeout",4,"ngIf"],["class","record-thread-item-collapse d-flex justify-content-center flex-grow-1",4,"ngIf"],[3,"config"],[1,"fadeout"],[1,"record-thread-item-collapse","d-flex","justify-content-center","flex-grow-1"]],template:function(t,r){1&t&&n.\u0275\u0275template(0,b$,8,15,"div",0),2&t&&n.\u0275\u0275property("ngIf",r.config)},dependencies:[F.NgIf,Nn,SC],encapsulation:2})}return i})();const C$=["list"];function M$(i,a){1&i&&(n.\u0275\u0275elementStart(0,"div",4),n.\u0275\u0275element(1,"scrm-label",5),n.\u0275\u0275elementEnd())}function S$(i,a){1&i&&(n.\u0275\u0275elementStart(0,"div",6),n.\u0275\u0275element(1,"scrm-loading-spinner",7),n.\u0275\u0275elementEnd()),2&i&&(n.\u0275\u0275advance(1),n.\u0275\u0275property("overlay",!0))}function D$(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",13),n.\u0275\u0275element(1,"scrm-button",14),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("config",e.getLoadMoreButton())}}function w$(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",null,15),n.\u0275\u0275element(2,"scrm-record-thread-item",14),n.\u0275\u0275elementEnd()),2&i){const e=a.$implicit,t=n.\u0275\u0275reference(1),r=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(2),n.\u0275\u0275property("config",r.buildItem(e,t))}}function x$(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",16),n.\u0275\u0275element(1,"scrm-button",14),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("config",e.getLoadMoreButton())}}function E$(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275element(1,"scrm-action-group-menu",17),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(2);let t,r;n.\u0275\u0275advance(1),n.\u0275\u0275property("buttonClass",null!==(t=e.config.listActionsButtonClass)&&void 0!==t?t:"")("buttonGroupClass",null!==(r=e.config.listActionsButtonGroupClass)&&void 0!==r?r:"")("config",e.listActionAdapter)}}function F$(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",8,9),n.\u0275\u0275template(2,D$,2,1,"div",10),n.\u0275\u0275template(3,w$,3,1,"div",11),n.\u0275\u0275elementStart(4,"div"),n.\u0275\u0275template(5,x$,2,1,"div",12),n.\u0275\u0275template(6,E$,2,3,"ng-container",3),n.\u0275\u0275elementEnd()()),2&i){const e=n.\u0275\u0275nextContext();let t;n.\u0275\u0275property("ngStyle",e.getMaxHeight()),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf","top"===e.loadMorePosition&&!e.allLoaded()),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",e.records),n.\u0275\u0275advance(1),n.\u0275\u0275classMap(null!==(t=e.config.listActionsClass)&&void 0!==t?t:""),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf","bottom"===e.loadMorePosition&&!e.allLoaded()),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.config.listActions)}}function I$(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div")(1,"h6",18),n.\u0275\u0275element(2,"scrm-label",19),n.\u0275\u0275elementEnd()()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(2),n.\u0275\u0275property("labelKey",e.config.noDataLabel||"LBL_NO_DATA")}}function A$(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",21)(1,"div",22),n.\u0275\u0275element(2,"scrm-record-thread-item",14),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(3,"div",23),n.\u0275\u0275element(4,"scrm-button",14),n.\u0275\u0275elementEnd()()),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(2),n.\u0275\u0275property("config",e.buildCreateItem()),n.\u0275\u0275advance(2),n.\u0275\u0275property("config",e.getCreateButton())}}function T$(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,A$,5,2,"div",20),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!e.loading)}}let hd=(()=>{class i{storeFactory;itemFactory;recordManager;message;actionAdapterFactory;config;listContainer;store;createStore;records;loading=!1;maxHeight=400;direction="asc";loadMorePosition="top";listActionAdapter;shouldResetScroll=!1;subs=[];presetFieldValues;constructor(e,t,r,o,s){this.storeFactory=e,this.itemFactory=t,this.recordManager=r,this.message=o,this.actionAdapterFactory=s}ngOnInit(){if((0,M.isVoid)(this.config.maxListHeight)||(this.maxHeight=this.config.maxListHeight),!this.config.module)return;this.config.store?this.store=this.config.store:(this.store=this.storeFactory.create(),this.store.setItemMetadata(this.config.itemConfig.metadata),this.store.setListMetadata({actions:this.config.listActions}),this.store.init(this.config.module,!1,this?.config?.pageSize??null)),this.direction=this.config.direction||this.direction,this.setLoadMorePosition(),this.initCreate(),this.initDataSubscription(),this.config.filters$?this.subs.push(this.config.filters$.subscribe(t=>{this.store.setFilters(t).pipe((0,v.take)(1)).subscribe(()=>{this.config.onRefresh&&this.config.onRefresh()})})):this.store.load(!1).subscribe(()=>{this.config.onRefresh&&this.config.onRefresh()});const e=this?.config?.autoRefreshFrequency??0;e&&this.store&&this.subs.push(this.store.initAutoRefresh(e,this.config.autoRefreshDeviationMin??-15,this.config.autoRefreshDeviationMax??15,this.config.onRefresh).subscribe()),this.initLoading(),this.listActionAdapter=this.actionAdapterFactory.create(this.store,this.config)}setLoadMorePosition(){this.loadMorePosition="asc"===this.direction?"top":"bottom",this.config.loadMorePosition&&(this.loadMorePosition=this.config.loadMorePosition)}ngAfterViewInit(){this.shouldResetScroll=!0,this.resetScroll()}ngOnDestroy(){(this?.config?.store??null)||this.store.clear(),this.store=null,this.subs.forEach(e=>e.unsubscribe())}buildItem(e,t){let r="record-thread-list-item";return this.config.itemConfig.klass&&(r+=" "+this.config.itemConfig.klass),{...this.config.itemConfig,store:e,threadStore:this.store,klass:r,containerClass:this.config.itemConfig.containerClass,flexDirection:this.config?.itemConfig?.flexDirection??"",expanded:()=>{this.scrollToItem(t)},collapsed:()=>{this.scrollToItem(t)}}}getLoadMoreButton(){return{klass:"load-more-button btn btn-link btn-sm",labelKey:"LBL_LOAD_MORE",onClick:()=>{this?.config?.onLoadMore&&this.store.getRecordList().records$.pipe((0,v.take)(1),(0,v.tap)(()=>this.config.onLoadMore())).subscribe(),this.store.loadMore()}}}buildCreateItem(){return{...this.config.createConfig,store:this.createStore,rowClass:{"pt-1":!0},klass:"record-thread-create-item"}}getCreateButton(){return{klass:"create-thread-item-button btn btn-main btn-sm",labelKey:"LBL_SUBMIT_BUTTON_LABEL",onClick:()=>{this.createStore.validate().pipe((0,v.take)(1)).subscribe(e=>{e?this.createStore.save().pipe((0,v.take)(1)).subscribe(()=>{this.store.reload(),this.initRecord(),this.shouldResetScroll=!0,this.message.addSuccessMessageByKey("LBL_ACTION_SUCCESS")}):this.message.addWarningMessageByKey("LBL_VALIDATION_ERRORS")})}}}allLoaded(){return!(!this.store||!this.store.allLoaded())}getMaxHeight(){return 0==this.maxHeight?null:{"max-height.px":this.maxHeight,"overflow-y":"auto"}}initRecord(){const e=this.recordManager.buildEmptyRecord(this.config.module);this.addPresetFields(e);let t="edit";this.config.createConfig&&this.config.createConfig.initialMode&&(t=this.config.createConfig.initialMode),this.createStore.initRecord(e,t,!1)}scrollToEnd(){!this.listContainer||!this.listContainer.nativeElement||this.scrollTo(this.listContainer.nativeElement.scrollHeight)}scrollToTop(){this.scrollTo(0)}scrollTo(e){try{this.listContainer.nativeElement.scrollTop=e}catch{}}scrollToItem(e){e&&this.listContainer&&this.listContainer.nativeElement&&this.scrollTo(e.offsetTop-this.listContainer.nativeElement.offsetTop)}resetScroll(){!1!==this.shouldResetScroll&&("asc"===this.direction?this.scrollToEnd():this.scrollToTop(),this.shouldResetScroll=!1)}scheduleScrollReset(){setTimeout(()=>{this.resetScroll()},500)}initCreate(){this.config.create&&(this.createStore=this.itemFactory.create(),this.createStore.setMetadata(this.config.createConfig.metadata),this.initRecord(),this.initPresetFieldsMapping())}initPresetFieldsMapping(){this.config.presetFields$&&this.subs.push(this.config.presetFields$.subscribe(e=>{if(!e||!Object.keys(e).length)return;this.presetFieldValues=e;const t=this.createStore.recordStore.getBaseRecord();this.addPresetFields(t),this.createStore.recordStore.setRecord(t)}))}addPresetFields(e){this.presetFieldValues&&(e.attributes={...this.presetFieldValues,...e.attributes||{}})}initDataSubscription(){this.subs.push(this.store.stores$.subscribe(e=>{if((!this.records||!this.records.length)&&(this.shouldResetScroll=!0),"asc"===this.direction)return this.records=e.reverse(),void this.scheduleScrollReset();this.records=e,this.scheduleScrollReset()}))}initLoading(){let e;e=this.store.$loading.pipe(this.createStore&&this.createStore.loading$?(0,S.combineLatestWith)(this.createStore.loading$):(0,v.map)(t=>[t])),this.subs.push(e.subscribe(t=>{if(!t||!t.length)return void(this.loading=!1);let r=!1;t.forEach(o=>{r=r||o}),this.loading=r}))}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(Oc),n.\u0275\u0275directiveInject(Lc),n.\u0275\u0275directiveInject(ci),n.\u0275\u0275directiveInject(ct),n.\u0275\u0275directiveInject(hC))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-record-thread"]],viewQuery:function(t,r){if(1&t&&n.\u0275\u0275viewQuery(C$,5),2&t){let o;n.\u0275\u0275queryRefresh(o=n.\u0275\u0275loadQuery())&&(r.listContainer=o.first)}},inputs:{config:"config"},decls:6,vars:8,consts:[["class","d-flex record-thread-no-data justify-content-center h3",4,"ngIf"],["class","d-flex record-thread-loading justify-content-center",4,"ngIf"],["class","record-thread-list scrollbar-thin",3,"ngStyle",4,"ngIf"],[4,"ngIf"],[1,"d-flex","record-thread-no-data","justify-content-center","h3"],["labelKey","LBL_NO_DATA"],[1,"d-flex","record-thread-loading","justify-content-center"],[3,"overlay"],[1,"record-thread-list","scrollbar-thin",3,"ngStyle"],["list",""],["class","record-thread-load-more d-flex justify-content-center flex-grow-1",4,"ngIf"],[4,"ngFor","ngForOf"],["class","record-thread-load-more d-flex justify-content-center",4,"ngIf"],[1,"record-thread-load-more","d-flex","justify-content-center","flex-grow-1"],[3,"config"],["item",""],[1,"record-thread-load-more","d-flex","justify-content-center"],[3,"buttonClass","buttonGroupClass","config"],[1,"pt-3","pl-3","pr-3","pb-2"],[3,"labelKey"],["class","d-flex flex-column record-thread-create-container",4,"ngIf"],[1,"d-flex","flex-column","record-thread-create-container"],[1,"flex-grow-1"],[1,"flex-grow-1","d-flex","justify-content-start","pt-1","record-thread-create-buttons"]],template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"div"),n.\u0275\u0275template(1,M$,2,0,"div",0),n.\u0275\u0275template(2,S$,2,1,"div",1),n.\u0275\u0275template(3,F$,7,7,"div",2),n.\u0275\u0275template(4,I$,3,1,"div",3),n.\u0275\u0275template(5,T$,2,1,"ng-container",3),n.\u0275\u0275elementEnd()),2&t&&(n.\u0275\u0275classMapInterpolate1("record-thread ",r.config&&r.config.klass||"",""),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!r.loading&&!r.records&&!r.records.length),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.loading),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.records&&r.records.length),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",(!r.records||!r.records.length)&&!r.loading&&r.config.showNoDataMessage),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.config.create&&r.createStore))},dependencies:[F.NgForOf,F.NgIf,F.NgStyle,Nn,Ot,DC,pr,ur],encapsulation:2})}return i})();function N$(i,a){1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"div",2),n.\u0275\u0275element(2,"scrm-label",3),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd())}function L$(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275element(1,"scrm-record-thread",4),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("config",e.recordThreadConfig)}}let wC=(()=>{class i{language;systemConfig;storeFactory;message;notificationService;notificationStore;recordThreadConfig;store;options;constructor(e,t,r,o,s,c){this.language=e,this.systemConfig=t,this.storeFactory=r,this.message=o,this.notificationService=s,this.notificationStore=c}ngOnInit(){this.options=this.notificationService.getOptions(),this.recordThreadConfig=this.getConfig()}getConfig(){const e={filters$:(0,S.of)({orderBy:this?.options?.filters?.orderBy??"date_entered",sortOrder:this?.options?.filters?.sortOrder??"asc",preset:{type:"alerts"}}),module:this.options.module,klass:this.options.class??"",maxListHeight:this.options.maxListHeight??350,direction:this.options.direction||"asc",autoRefreshFrequency:this.options.autoRefreshFrequency||0,autoRefreshDeviationMin:this.options.autoRefreshDeviationMin??0,autoRefreshDeviationMax:this.options.autoRefreshDeviationMax??0,onRefresh:()=>{this.notificationService.onRefresh(this.store,this.notificationStore)},onLoadMore:()=>{this.notificationService.onLoadMore(this.notificationStore)},loadMorePosition:this.options?.loadMorePosition??"",create:!1,listActionsClass:this.options?.listActionsClass??"",listActionsButtonClass:this.options?.listActionsButtonClass??"",listActionsButtonGroupClass:this.options?.listActionsButtonGroupClass??"",pageSize:this.options?.pageSize??"",showNoDataMessage:this.options?.showNoDataMessage,noDataLabel:this.options?.noDataLabel};return this.notificationService.setupListActions(e,this.options),this.notificationService.setupItemConfig(e,this.options),e.store=this.notificationStore.getNotificationStore(),this.store=this.notificationStore.getNotificationStore(),e}setupItemMetadata(e,t){t&&t.header&&(e.headerLayout=(0,M.deepClone)(t.header)),t&&t.body&&(e.bodyLayout=(0,M.deepClone)(t.body)),t&&t.actions&&(e.actions=(0,M.deepClone)(t.actions))}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(Oe),n.\u0275\u0275directiveInject(dt),n.\u0275\u0275directiveInject(Oc),n.\u0275\u0275directiveInject(ct),n.\u0275\u0275directiveInject(sd),n.\u0275\u0275directiveInject(la))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-notifications"]],decls:3,vars:2,consts:[["widget-body","",1,"notifications"],[4,"ngIf"],[1,"p-3","widget-message"],["labelKey","LBL_BAD_CONFIG"],[3,"config"]],template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"div",0),n.\u0275\u0275template(1,N$,3,0,"ng-container",1),n.\u0275\u0275template(2,L$,2,1,"ng-container",1),n.\u0275\u0275elementEnd()),2&t&&(n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!r.options),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.options))},dependencies:[F.NgIf,Ot,hd],encapsulation:2})}return i})(),xC=(()=>{class i{router;constructor(e){this.router=e}navigateToSearch(e){let r="";return e&&(r=e),this.router.navigate(["/home/unified-search"],{queryParams:{query_string:r}})}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Ft.Router))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const B$=["searchInput"],O$=function(i){return{"dropdown-active":i}};function R$(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"ul",8)(1,"li",9)(2,"a",10),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(e);const r=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(r.search())}),n.\u0275\u0275element(3,"scrm-image",11),n.\u0275\u0275elementStart(4,"span",12),n.\u0275\u0275text(5,'"'),n.\u0275\u0275elementStart(6,"strong"),n.\u0275\u0275text(7),n.\u0275\u0275elementEnd(),n.\u0275\u0275text(8),n.\u0275\u0275pipe(9,"lowercase"),n.\u0275\u0275elementEnd()()()()}if(2&i){const e=n.\u0275\u0275nextContext().ngIf,t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction1(5,O$,t.searchWord)),n.\u0275\u0275advance(6),n.\u0275\u0275textInterpolate(t.searchWord),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1('" ',n.\u0275\u0275pipeBind1(9,3,e.appStrings.LBL_IN_EVERYWHERE),"")}}function j$(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"button",13),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(e);const r=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(r.search())}),n.\u0275\u0275element(1,"scrm-image",11),n.\u0275\u0275elementEnd()}}function k$(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"button",13),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(e);const r=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(r.clearSearchTerm())}),n.\u0275\u0275element(1,"scrm-image",14),n.\u0275\u0275elementEnd()}}const P$=function(i){return{"search-focused":i}};function $$(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"form",1)(2,"div",2)(3,"input",3,4),n.\u0275\u0275listener("focus",function(){n.\u0275\u0275restoreView(e);const r=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(r.onFocus())})("blur",function(){n.\u0275\u0275restoreView(e);const r=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(r.onBlur())})("keydown.enter",function(){n.\u0275\u0275restoreView(e);const r=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(r.search())}),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(5,R$,10,7,"ul",5),n.\u0275\u0275elementStart(6,"div",6),n.\u0275\u0275template(7,j$,2,0,"button",7),n.\u0275\u0275template(8,k$,2,0,"button",7),n.\u0275\u0275elementEnd()()(),n.\u0275\u0275elementContainerEnd()}if(2&i){const e=a.ngIf,t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("formGroup",t.searchForm),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction1(6,P$,t.isFocused)),n.\u0275\u0275advance(1),n.\u0275\u0275propertyInterpolate1("placeholder","",e.appStrings.LBL_SEARCH||"","..."),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",t.searchWord.length&&t.hasSearchTyped),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",!t.hasSearchTyped),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.hasSearchTyped)}}let EC=(()=>{class i{globalSearch;languageStore;searchInput;searchWord="";searchForm;searchResults=[];isFocused=!1;hasSearchTyped=!1;subs=[];languages$=(0,S.of)({});vm$=this.languages$.pipe((0,v.map)(e=>({appStrings:e.appStrings||{}})));constructor(e,t){this.globalSearch=e,this.languageStore=t,this.languages$=t?.vm$??(0,S.of)({})}ngOnInit(){this.searchForm=new Ce.FormGroup({searchTerm:new Ce.FormControl("")}),this.subs.push(this.searchForm.get("searchTerm").valueChanges.pipe((0,v.tap)(e=>{this.hasSearchTyped=!!e}),(0,v.distinctUntilChanged)(),(0,v.filter)(e=>e?.length>1)).subscribe(e=>this.searchWord=e))}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}search(){this.searchWord.length&&this.globalSearch.navigateToSearch(this.searchWord).finally(()=>{this.clearSearchTerm(),this.searchInput.nativeElement.blur()})}clearSearchTerm(){this.searchForm.reset(),this.hasSearchTyped=!1,this.searchWord=""}onFocus(){this.isFocused=!0;const e=this.searchForm?.get("searchTerm")?.value??"";e.length>2&&(this.hasSearchTyped=!0,this.searchWord=e)}onBlur(){setTimeout(()=>{this.isFocused=!1,this.hasSearchTyped=!1},200)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(xC),n.\u0275\u0275directiveInject(Oe))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-search-bar"]],viewQuery:function(t,r){if(1&t&&n.\u0275\u0275viewQuery(B$,5),2&t){let o;n.\u0275\u0275queryRefresh(o=n.\u0275\u0275loadQuery())&&(r.searchInput=o.first)}},decls:2,vars:3,consts:[[4,"ngIf"],["name","global-search",1,"global-search",3,"formGroup"],[1,"input-group","dropdown",3,"ngClass"],["formControlName","searchTerm","type","text","name","global-search-term","aria-label","Search","data-toggle","dropdown","autocomplete","off","required","",1,"form-control","dropdown-toggle","global-search-term",3,"placeholder","focus","blur","keydown.enter"],["searchInput",""],["class","dropdown-menu global-search-dropdown",4,"ngIf"],[1,"input-group-append"],["class","btn btn-default search-button d-flex align-items-center","aria-label","Search","scrm-button-loading","",3,"click",4,"ngIf"],[1,"dropdown-menu","global-search-dropdown"],[1,"dropdown-item-block",3,"ngClass"],[1,"dropdown-item",3,"click"],["image","search",1,"search-icon","sicon"],[1,"dropdown-text","ml-2"],["aria-label","Search","scrm-button-loading","",1,"btn","btn-default","search-button","d-flex","align-items-center",3,"click"],["image","cross",1,"search-icon","sicon"]],template:function(t,r){1&t&&(n.\u0275\u0275template(0,$$,9,8,"ng-container",0),n.\u0275\u0275pipe(1,"async")),2&t&&n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(1,1,r.vm$))},dependencies:[F.NgClass,F.NgIf,Ce.\u0275NgNoValidate,Ce.DefaultValueAccessor,Ce.NgControlStatus,Ce.NgControlStatusGroup,Ce.RequiredValidator,mn,Ce.FormGroupDirective,Ce.FormControlName,F.AsyncPipe,F.LowerCasePipe],encapsulation:2})}return i})();function U$(i,a){if(1&i&&n.\u0275\u0275element(0,"scrm-image",6),2&i){const e=n.\u0275\u0275nextContext(3);n.\u0275\u0275propertyInterpolate("image",e.icon)}}function V$(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"a",4),n.\u0275\u0275template(1,U$,1,1,"scrm-image",5),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("ngClass",e.class)("queryParams",e.link.params)("routerLink",e.link.route),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.icon),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",e.link.label," ")}}function z$(i,a){if(1&i&&n.\u0275\u0275element(0,"scrm-image",6),2&i){const e=n.\u0275\u0275nextContext(3);n.\u0275\u0275propertyInterpolate("image",e.icon)}}function W$(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"a",7),n.\u0275\u0275template(1,z$,1,1,"scrm-image",5),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("href",e.link.url,n.\u0275\u0275sanitizeUrl)("ngClass",e.class),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.icon),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",e.link.label," ")}}function G$(i,a){if(1&i&&n.\u0275\u0275element(0,"scrm-image",6),2&i){const e=n.\u0275\u0275nextContext(3);n.\u0275\u0275propertyInterpolate("image",e.icon)}}function K$(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"a",8),n.\u0275\u0275template(1,G$,1,1,"scrm-image",5),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("ngClass",e.class),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.icon),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",e.link.label," ")}}function H$(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,V$,3,5,"a",1),n.\u0275\u0275template(2,W$,3,4,"a",2),n.\u0275\u0275template(3,K$,3,3,"a",3),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.link.route),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!e.link.route&&e.link.url),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!e.link.route&&!e.link.url)}}function Z$(i,a){if(1&i&&n.\u0275\u0275element(0,"scrm-image",6),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275propertyInterpolate("image",e.icon)}}function q$(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"a",9),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(e);const r=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(r.handleProcess(r.link.process))}),n.\u0275\u0275template(2,Z$,1,1,"scrm-image",5),n.\u0275\u0275text(3),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()}if(2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngClass",e.class),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.icon),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",e.link.label," ")}}let FC=(()=>{class i{asyncActionService;appState;link;icon;class;constructor(e,t){this.asyncActionService=e,this.appState=t}handleProcess(e){if(!e)return;const t=e,r={action:t,module:this.appState.getModule()};this.asyncActionService.run(t,r).pipe((0,v.take)(1)).subscribe()}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(Kt),n.\u0275\u0275directiveInject(Gt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-base-menu-item-link"]],inputs:{link:"link",icon:"icon",class:"class"},decls:2,vars:2,consts:[[4,"ngIf"],[3,"ngClass","queryParams","routerLink",4,"ngIf"],[3,"href","ngClass",4,"ngIf"],[3,"ngClass",4,"ngIf"],[3,"ngClass","queryParams","routerLink"],[3,"image",4,"ngIf"],[3,"image"],[3,"href","ngClass"],[3,"ngClass"],[3,"ngClass","click"]],template:function(t,r){1&t&&(n.\u0275\u0275template(0,H$,4,3,"ng-container",0),n.\u0275\u0275template(1,q$,4,3,"ng-container",0)),2&t&&(n.\u0275\u0275property("ngIf",!r.link.process),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.link.process))},dependencies:[F.NgClass,F.NgIf,Ft.RouterLink,mn],encapsulation:2})}return i})(),IC=(()=>{class i extends M.BaseComponentRegistry{constructor(){super()}initDefault(){this.register("default","default",FC)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const J$=function(i,a,e){return{link:i,icon:a,class:e}};function Q$(i,a){if(1&i&&n.\u0275\u0275element(0,"ndc-dynamic",1),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275property("ndcDynamicComponent",e.getType)("ndcDynamicInputs",n.\u0275\u0275pureFunction3(2,J$,e.link,e.icon,e.class))}}let Ur=(()=>{class i{registry;link;icon;class;constructor(e){this.registry=e}get getType(){return this.registry.get("default","default")}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(IC))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-menu-item-link"]],inputs:{link:"link",icon:"icon",class:"class"},decls:1,vars:1,consts:[[3,"ndcDynamicComponent","ndcDynamicInputs",4,"ngIf"],[3,"ndcDynamicComponent","ndcDynamicInputs"]],template:function(t,r){1&t&&n.\u0275\u0275template(0,Q$,1,6,"ndc-dynamic",0),2&t&&n.\u0275\u0275property("ngIf",r.getType)},dependencies:[F.NgIf,Bt,It],encapsulation:2})}return i})();const X$=function(i,a,e){return{label:i,url:a,route:e}};function Y$(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"li",7),n.\u0275\u0275element(1,"scrm-menu-item-link",8),n.\u0275\u0275elementEnd()),2&i){const e=a.$implicit,t=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275classMap("submenu-nav-link nav-link action-link"),n.\u0275\u0275property("link",n.\u0275\u0275pureFunction3(3,X$,e.attributes.item_summary,t.buildRoute(e),t.buildRoute(e)))}}function eU(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"li",1)(2,"a",2),n.\u0275\u0275element(3,"scrm-image",3)(4,"scrm-label",4),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(5,"ul",5),n.\u0275\u0275template(6,Y$,2,7,"li",6),n.\u0275\u0275pipe(7,"slice"),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(6),n.\u0275\u0275property("ngForOf",n.\u0275\u0275pipeBind3(7,1,e.records,0,e.maxDisplayed))}}let AC=(()=>{class i{navigation;nameMapper;configs;metadata;module;maxDisplayed=5;records;subs=[];constructor(e,t,r,o){this.navigation=e,this.nameMapper=t,this.configs=r,this.metadata=o}ngOnInit(){const e=this.configs.getConfigValue("ui")??{};this.maxDisplayed=parseInt(e.navigation_max_module_recently_viewed)??5,this.initMetadata$()}ngOnDestroy(){this.clear()}ngOnChanges(e){null!==(e?.module??null)&&(e?.module?.previousValue??"")!==(e?.module?.currentValue??"")&&(this.clear(),this.initMetadata$())}buildRoute(e){const r=this.nameMapper.toFrontend(e.attributes.module_name??"")??"";return this.navigation.getRecordRouterLink(r,e.attributes.item_id??"")}initMetadata$(){const e=this.metadata.allModuleMetadata$.pipe((0,v.map)(t=>t[this.module]??null));this.subs.push(e.subscribe(t=>{this.records=t?.recentlyViewed??null}))}clear(){this.records=null,this.subs.forEach(e=>e.unsubscribe())}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(wn),n.\u0275\u0275directiveInject(_n),n.\u0275\u0275directiveInject(dt),n.\u0275\u0275directiveInject(mt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-base-sub-menu-recently-viewed"]],inputs:{module:"module"},features:[n.\u0275\u0275NgOnChangesFeature],decls:1,vars:1,consts:[[4,"ngIf"],[1,"nav-item","dropdown-submenu","submenu","submenu-extra"],[1,"sub-nav-link","nav-link","action-link","dropdown-item","dropdown-toggle","pr-4"],["image","clock"],["labelKey","LBL_LAST_VIEWED"],[1,"dropdown-menu","submenu"],["class","nav-item",4,"ngFor","ngForOf"],[1,"nav-item"],[3,"link"]],template:function(t,r){1&t&&n.\u0275\u0275template(0,eU,8,5,"ng-container",0),2&t&&n.\u0275\u0275property("ngIf",r.records&&r.records.length)},dependencies:[F.NgForOf,F.NgIf,mn,Ot,Ur,F.SlicePipe],encapsulation:2})}return i})(),TC=(()=>{class i extends M.BaseComponentRegistry{constructor(){super()}initDefault(){this.register("default","default",AC)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const tU=function(i){return{module:i}};function nU(i,a){if(1&i&&n.\u0275\u0275element(0,"ndc-dynamic",1),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275property("ndcDynamicComponent",e.getType)("ndcDynamicInputs",n.\u0275\u0275pureFunction1(2,tU,e.module))}}let vd=(()=>{class i{registry;module;constructor(e){this.registry=e}get getType(){return this.registry.get("default","default")}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(TC))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-sub-menu-recently-viewed"]],inputs:{module:"module"},decls:1,vars:1,consts:[[3,"ndcDynamicComponent","ndcDynamicInputs",4,"ngIf"],[3,"ndcDynamicComponent","ndcDynamicInputs"]],template:function(t,r){1&t&&n.\u0275\u0275template(0,nU,1,4,"ndc-dynamic",0),2&t&&n.\u0275\u0275property("ngIf",r.getType)},dependencies:[F.NgIf,Bt,It],encapsulation:2})}return i})(),_d=(()=>{class i{navigation;nameMapper;configs;metadata;module;maxDisplayed=5;records;subs=[];constructor(e,t,r,o){this.navigation=e,this.nameMapper=t,this.configs=r,this.metadata=o}ngOnInit(){const e=this.configs.getConfigValue("ui")??{};this.maxDisplayed=parseInt(e.navigation_max_module_favorites)??5,this.initMetadata$()}ngOnDestroy(){this.clear()}ngOnChanges(e){null!==(e?.module??null)&&(e?.module?.previousValue??"")!==(e?.module?.currentValue??"")&&(this.clear(),this.initMetadata$())}buildRoute(e){const r=this.nameMapper.toFrontend(e.attributes.parent_type??"")??"";return this.navigation.getRecordRouterLink(r,e.attributes.parent_id??"")}initMetadata$(){const e=this.metadata.allModuleMetadata$.pipe((0,v.map)(t=>t[this.module]??null));this.subs.push(e.subscribe(t=>{this.records=t?.favorites??null}))}clear(){this.records=null,this.subs.forEach(e=>e.unsubscribe())}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(wn),n.\u0275\u0275directiveInject(_n),n.\u0275\u0275directiveInject(dt),n.\u0275\u0275directiveInject(mt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["ng-component"]],inputs:{module:"module"},features:[n.\u0275\u0275NgOnChangesFeature],decls:0,vars:0,template:function(t,r){},encapsulation:2})}return i})();const iU=function(i,a,e){return{label:i,url:a,route:e}};function rU(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"li",7),n.\u0275\u0275element(1,"scrm-menu-item-link",8),n.\u0275\u0275elementEnd()),2&i){const e=a.$implicit,t=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275classMap("submenu-nav-link nav-link action-link"),n.\u0275\u0275property("link",n.\u0275\u0275pureFunction3(3,iU,e.attributes.parent_name,t.buildRoute(e),t.buildRoute(e)))}}function oU(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"li",1)(2,"a",2),n.\u0275\u0275element(3,"scrm-image",3)(4,"scrm-label",4),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(5,"ul",5),n.\u0275\u0275template(6,rU,2,7,"li",6),n.\u0275\u0275pipe(7,"slice"),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(6),n.\u0275\u0275property("ngForOf",n.\u0275\u0275pipeBind3(7,1,e.records,0,e.maxDisplayed))}}let NC=(()=>{class i extends _d{navigation;nameMapper;configs;metadata;constructor(e,t,r,o){super(e,t,r,o),this.navigation=e,this.nameMapper=t,this.configs=r,this.metadata=o}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(wn),n.\u0275\u0275directiveInject(_n),n.\u0275\u0275directiveInject(dt),n.\u0275\u0275directiveInject(mt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-base-sub-menu-favorites"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,consts:[[4,"ngIf"],[1,"nav-item","dropdown-submenu","submenu","submenu-extra"],[1,"sub-nav-link","nav-link","action-link","dropdown-item","dropdown-toggle","pr-4"],["image","star"],["labelKey","LBL_FAVORITES"],[1,"dropdown-menu","submenu"],["class","nav-item",4,"ngFor","ngForOf"],[1,"nav-item"],[3,"link"]],template:function(t,r){1&t&&n.\u0275\u0275template(0,oU,8,5,"ng-container",0),2&t&&n.\u0275\u0275property("ngIf",r.records&&r.records.length)},dependencies:[F.NgForOf,F.NgIf,mn,Ot,Ur,F.SlicePipe],encapsulation:2})}return i})(),LC=(()=>{class i extends M.BaseComponentRegistry{constructor(){super()}initDefault(){this.register("default","default",NC)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const aU=function(i){return{module:i}};function sU(i,a){if(1&i&&n.\u0275\u0275element(0,"ndc-dynamic",1),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275property("ndcDynamicComponent",e.getType)("ndcDynamicInputs",n.\u0275\u0275pureFunction1(2,aU,e.module))}}let yd=(()=>{class i{registry;module;constructor(e){this.registry=e}get getType(){return this.registry.get("default","default")}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(LC))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-sub-menu-favorites"]],inputs:{module:"module"},decls:1,vars:1,consts:[[3,"ndcDynamicComponent","ndcDynamicInputs",4,"ngIf"],[3,"ndcDynamicComponent","ndcDynamicInputs"]],template:function(t,r){1&t&&n.\u0275\u0275template(0,sU,1,4,"ndc-dynamic",0),2&t&&n.\u0275\u0275property("ngIf",r.getType)},dependencies:[F.NgIf,Bt,It],encapsulation:2})}return i})();function cU(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",6),n.\u0275\u0275element(1,"scrm-menu-item-link",7),n.\u0275\u0275elementEnd()),2&i){const e=a.$implicit;n.\u0275\u0275advance(1),n.\u0275\u0275classMap("sub-nav-link nav-link action-link"),n.\u0275\u0275property("icon",e.icon)("link",e.link)}}function lU(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275element(1,"scrm-sub-menu-recently-viewed",8)(2,"scrm-sub-menu-favorites",8),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("module",e.item.module),n.\u0275\u0275advance(1),n.\u0275\u0275property("module",e.item.module)}}function uU(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"div",3),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(e);const r=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(r.hideDropdown())}),n.\u0275\u0275template(1,cU,2,4,"div",4),n.\u0275\u0275template(2,lU,3,2,"ng-container",5),n.\u0275\u0275elementEnd()}if(2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",e.item.submenu),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.item&&e.item.module)}}const dU=function(i){return{"top-nav-link":!0,"nav-link-nongrouped":!0,"dropdown-toggle":i}};let BC=(()=>{class i{item;showDropdown=!0;constructor(){}hideDropdown(){this.showDropdown=!1,setTimeout(()=>this.showDropdown=!0,0)}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-base-menu-item"]],inputs:{item:"item"},decls:4,vars:6,consts:[["data-target",".navbar-collapse","data-toggle","collapse"],[3,"link"],["aria-labelledby","navbarDropdownMenuLink","class","dropdown-menu submenu",3,"click",4,"ngIf"],["aria-labelledby","navbarDropdownMenuLink",1,"dropdown-menu","submenu",3,"click"],["class","nav-item",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"nav-item"],[3,"icon","link"],[3,"module"]],template:function(t,r){1&t&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"span",0),n.\u0275\u0275element(2,"scrm-menu-item-link",1),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(3,uU,3,2,"div",2),n.\u0275\u0275elementContainerEnd()),2&t&&(n.\u0275\u0275advance(2),n.\u0275\u0275classMap(n.\u0275\u0275pureFunction1(4,dU,r.item.submenu.length)),n.\u0275\u0275property("link",r.item.link),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.item.submenu.length&&r.showDropdown))},dependencies:[F.NgForOf,F.NgIf,vd,yd,Ur],encapsulation:2})}return i})(),OC=(()=>{class i extends M.BaseComponentRegistry{constructor(){super()}initDefault(){this.register("default","default",BC)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const fU=function(i){return{item:i}};function pU(i,a){if(1&i&&n.\u0275\u0275element(0,"ndc-dynamic",1),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275property("ndcDynamicComponent",e.getType)("ndcDynamicInputs",n.\u0275\u0275pureFunction1(2,fU,e.item))}}let bd=(()=>{class i{registry;item;constructor(e){this.registry=e}get getType(){return this.registry.get("default","default")}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(OC))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-menu-item"]],inputs:{item:"item"},decls:1,vars:1,consts:[[3,"ndcDynamicComponent","ndcDynamicInputs",4,"ngIf"],[3,"ndcDynamicComponent","ndcDynamicInputs"]],template:function(t,r){1&t&&n.\u0275\u0275template(0,pU,1,4,"ndc-dynamic",0),2&t&&n.\u0275\u0275property("ngIf",r.getType)},dependencies:[F.NgIf,Bt,It],encapsulation:2})}return i})(),RC=(()=>{class i{route;active;constructor(){}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-base-home-menu-item"]],inputs:{route:"route",active:"active"},decls:4,vars:3,consts:[[1,"navbar-nav","home-nav"],[1,"nav-item"],[1,"home-nav-link",3,"routerLink"],["image","home",1,"home-icon"]],template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"ul",0)(1,"li",1)(2,"a",2),n.\u0275\u0275element(3,"scrm-image",3),n.\u0275\u0275elementEnd()()()),2&t&&(n.\u0275\u0275advance(1),n.\u0275\u0275classProp("active",r.active),n.\u0275\u0275advance(1),n.\u0275\u0275property("routerLink",r.route))},dependencies:[Ft.RouterLink,mn],encapsulation:2})}return i})(),jC=(()=>{class i extends M.BaseComponentRegistry{constructor(){super()}initDefault(){this.register("default","default",RC)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const mU=function(i,a){return{route:i,active:a}};function gU(i,a){if(1&i&&n.\u0275\u0275element(0,"ndc-dynamic",1),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275property("ndcDynamicComponent",e.getType)("ndcDynamicInputs",n.\u0275\u0275pureFunction2(2,mU,e.route,e.active))}}let kC=(()=>{class i{registry;route;active;constructor(e){this.registry=e}get getType(){return this.registry.get("default","default")}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(jC))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-home-menu-item"]],inputs:{route:"route",active:"active"},decls:1,vars:1,consts:[[3,"ndcDynamicComponent","ndcDynamicInputs",4,"ngIf"],[3,"ndcDynamicComponent","ndcDynamicInputs"]],template:function(t,r){1&t&&n.\u0275\u0275template(0,gU,1,5,"ndc-dynamic",0),2&t&&n.\u0275\u0275property("ngIf",r.getType)},dependencies:[F.NgIf,Bt,It],encapsulation:2})}return i})();function hU(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"span",3)(1,"a",4),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd()()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate1(" ",e.item.link.label," ")}}function vU(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"ul",5)(1,"li",6),n.\u0275\u0275element(2,"scrm-menu-item",7),n.\u0275\u0275elementEnd()()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(2),n.\u0275\u0275property("item",e.item)}}function _U(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"li",16),n.\u0275\u0275element(1,"scrm-menu-item-link",17),n.\u0275\u0275elementEnd()),2&i){const e=a.$implicit;n.\u0275\u0275advance(1),n.\u0275\u0275classMap("submenu-nav-link nav-link action-link"),n.\u0275\u0275property("icon",e.icon)("link",e.link)}}function yU(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275element(1,"scrm-sub-menu-recently-viewed",18)(2,"scrm-sub-menu-favorites",18),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(2).$implicit;n.\u0275\u0275advance(1),n.\u0275\u0275property("module",e.module),n.\u0275\u0275advance(1),n.\u0275\u0275property("module",e.module)}}function bU(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"ul",13),n.\u0275\u0275template(1,_U,2,4,"li",14),n.\u0275\u0275template(2,yU,3,2,"ng-container",15),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext().$implicit;n.\u0275\u0275classProp("rounded-0",e.submenu&&1===e.submenu.length),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",e.submenu),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e&&e.module)}}const CU=function(i,a){return{"sub-nav-link":!0,"nav-link":!0,"action-link":!0,"dropdown-item":i,"dropdown-toggle":a}};function MU(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"li",10),n.\u0275\u0275element(1,"scrm-menu-item-link",11),n.\u0275\u0275template(2,bU,3,4,"ul",12),n.\u0275\u0275elementEnd()),2&i){const e=a.$implicit;n.\u0275\u0275advance(1),n.\u0275\u0275classMap(n.\u0275\u0275pureFunction2(4,CU,e.submenu.length,e.submenu.length)),n.\u0275\u0275property("link",e.link),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.submenu.length)}}function SU(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"ul",8),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(e);const r=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(r.hideDropdown())}),n.\u0275\u0275template(1,MU,3,7,"li",9),n.\u0275\u0275elementEnd()}if(2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275property("ngbCollapse",e.subNavCollapse),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",e.item.submenu)}}let PC=(()=>{class i{item;subNavCollapse;showDropdown=!0;constructor(){}hideDropdown(){this.showDropdown=!1,setTimeout(()=>this.showDropdown=!0,0)}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-base-grouped-menu-item"]],inputs:{item:"item",subNavCollapse:"subNavCollapse"},decls:4,vars:3,consts:[["data-target",".navbar-collapse","data-toggle","collapse",4,"ngIf"],["class","navbar-nav grouped",4,"ngIf"],["aria-labelledby","navbarDropdownMenuLink","class","dropdown-menu main",3,"ngbCollapse","click",4,"ngIf"],["data-target",".navbar-collapse","data-toggle","collapse"],["data-toggle","dropdown",1,"top-nav-link","nav-link-grouped","dropdown-toggle","active"],[1,"navbar-nav","grouped"],[1,"top-nav","nav-item","dropdown","main-grouped","active"],[3,"item"],["aria-labelledby","navbarDropdownMenuLink",1,"dropdown-menu","main",3,"ngbCollapse","click"],["class","nav-item dropdown-submenu submenu",4,"ngFor","ngForOf"],[1,"nav-item","dropdown-submenu","submenu"],[3,"link"],["class","dropdown-menu submenu",3,"rounded-0",4,"ngIf"],[1,"dropdown-menu","submenu"],["class","nav-item",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"nav-item"],[3,"icon","link"],[3,"module"]],template:function(t,r){1&t&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,hU,3,1,"span",0),n.\u0275\u0275template(2,vU,3,1,"ul",1),n.\u0275\u0275template(3,SU,2,2,"ul",2),n.\u0275\u0275elementContainerEnd()),2&t&&(n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!r.item.isGroupedMenu),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.item.isGroupedMenu),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.showDropdown))},dependencies:[F.NgForOf,F.NgIf,de.NgbCollapse,bd,vd,yd,Ur],encapsulation:2})}return i})(),$C=(()=>{class i extends M.BaseComponentRegistry{constructor(){super()}initDefault(){this.register("default","default",PC)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const DU=function(i,a){return{item:i,subNavCollapse:a}};function wU(i,a){if(1&i&&n.\u0275\u0275element(0,"ndc-dynamic",1),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275property("ndcDynamicComponent",e.getType)("ndcDynamicInputs",n.\u0275\u0275pureFunction2(2,DU,e.item,e.subNavCollapse))}}let UC=(()=>{class i{registry;item;subNavCollapse;constructor(e){this.registry=e}get getType(){return this.registry.get("default","default")}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject($C))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-grouped-menu-item"]],inputs:{item:"item",subNavCollapse:"subNavCollapse"},decls:1,vars:1,consts:[[3,"ndcDynamicComponent","ndcDynamicInputs",4,"ngIf"],[3,"ndcDynamicComponent","ndcDynamicInputs"]],template:function(t,r){1&t&&n.\u0275\u0275template(0,wU,1,5,"ndc-dynamic",0),2&t&&n.\u0275\u0275property("ngIf",r.getType)},dependencies:[F.NgIf,Bt,It],encapsulation:2})}return i})();function xU(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",8),n.\u0275\u0275element(1,"scrm-menu-item-link",9),n.\u0275\u0275elementEnd()),2&i){const e=a.$implicit;n.\u0275\u0275advance(1),n.\u0275\u0275classMap("nav-link action-link"),n.\u0275\u0275property("link",e.link)}}function EU(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"div",6),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(e);const r=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(r.hideDropdown())}),n.\u0275\u0275template(1,xU,2,3,"div",7),n.\u0275\u0275elementEnd()}if(2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",e.items)}}function FU(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"ul",1)(1,"li",2)(2,"a",3),n.\u0275\u0275element(3,"scrm-label",4),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(4,EU,2,1,"div",5),n.\u0275\u0275elementEnd()()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(3),n.\u0275\u0275property("labelKey",e.labelKey),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.showDropdown)}}let VC=(()=>{class i{items;labelKey;showDropdown=!0;constructor(){}hideDropdown(){this.showDropdown=!1,setTimeout(()=>this.showDropdown=!0,0)}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-base-menu-items-list"]],inputs:{items:"items",labelKey:"labelKey"},decls:1,vars:1,consts:[["class","navbar-nav nav-collapsed-items",4,"ngIf"],[1,"navbar-nav","nav-collapsed-items"],[1,"top-nav","nav-item","dropdown","non-grouped"],[1,"nav-link-nongrouped","dropdown-toggle"],[3,"labelKey"],["aria-labelledby","navbarDropdownMenuLink","class","dropdown-menu more-menu submenu",3,"click",4,"ngIf"],["aria-labelledby","navbarDropdownMenuLink",1,"dropdown-menu","more-menu","submenu",3,"click"],["class","nav-item",4,"ngFor","ngForOf"],[1,"nav-item"],[3,"link"]],template:function(t,r){1&t&&n.\u0275\u0275template(0,FU,5,2,"ul",0),2&t&&n.\u0275\u0275property("ngIf",r.items&&r.items.length>0)},dependencies:[F.NgForOf,F.NgIf,Ot,Ur],encapsulation:2})}return i})(),zC=(()=>{class i extends M.BaseComponentRegistry{constructor(){super()}initDefault(){this.register("default","default",VC)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const IU=function(i,a){return{items:i,labelKey:a}};function AU(i,a){if(1&i&&n.\u0275\u0275element(0,"ndc-dynamic",1),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275property("ndcDynamicComponent",e.getType)("ndcDynamicInputs",n.\u0275\u0275pureFunction2(2,IU,e.items,e.labelKey))}}let WC=(()=>{class i{registry;items;labelKey;constructor(e){this.registry=e}get getType(){return this.registry.get("default","default")}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(zC))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-menu-items-list"]],inputs:{items:"items",labelKey:"labelKey"},decls:1,vars:1,consts:[[3,"ndcDynamicComponent","ndcDynamicInputs",4,"ngIf"],[3,"ndcDynamicComponent","ndcDynamicInputs"]],template:function(t,r){1&t&&n.\u0275\u0275template(0,AU,1,5,"ndc-dynamic",0),2&t&&n.\u0275\u0275property("ngIf",r.getType)},dependencies:[F.NgIf,Bt,It],encapsulation:2})}return i})();function TU(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"div",4),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(e);const r=n.\u0275\u0275nextContext(3);return n.\u0275\u0275resetView(r.onClick&&r.onClick())}),n.\u0275\u0275elementStart(1,"a",5),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd()()}if(2&i){const e=a.$implicit,t=n.\u0275\u0275nextContext(3);n.\u0275\u0275advance(1),n.\u0275\u0275property("routerLink",t.buildRoute(e)),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",e.attributes.item_summary," ")}}function NU(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,TU,3,2,"div",3),n.\u0275\u0275pipe(2,"slice"),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",n.\u0275\u0275pipeBind3(2,1,e.records,0,e.maxDisplayed))}}function LU(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"h4",1),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(e);const r=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(r.toggleCollapse())}),n.\u0275\u0275element(2,"scrm-label",2),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(3,NU,3,5,"ng-container",0),n.\u0275\u0275elementContainerEnd()}if(2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(3),n.\u0275\u0275property("ngIf",!e.collapsed)}}let GC=(()=>{class i{navigation;nameMapper;configs;metadata;module;onClick;collapsible=!1;maxDisplayed=5;records;collapsed=!1;subs=[];constructor(e,t,r,o){this.navigation=e,this.nameMapper=t,this.configs=r,this.metadata=o}ngOnInit(){const e=this.configs.getConfigValue("ui")??{};this.maxDisplayed=parseInt(e.navigation_max_module_recently_viewed)??5,this.initMetadata$(),this.collapsed=!!this.collapsible}ngOnDestroy(){this.clear()}ngOnChanges(e){null!==(e?.module??null)&&(e?.module?.previousValue??"")!==(e?.module?.currentValue??"")&&(this.clear(),this.initMetadata$())}buildRoute(e){const r=this.nameMapper.toFrontend(e.attributes.module_name??"")??"";return this.navigation.getRecordRouterLink(r,e.attributes.item_id??"")}toggleCollapse(){this.collapsible&&(this.collapsed=!this.collapsed)}initMetadata$(){const e=this.metadata.allModuleMetadata$.pipe((0,v.map)(t=>t[this.module]??null));this.subs.push(e.subscribe(t=>{this.records=t?.recentlyViewed??null}))}clear(){this.records=null,this.subs.forEach(e=>e.unsubscribe())}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(wn),n.\u0275\u0275directiveInject(_n),n.\u0275\u0275directiveInject(dt),n.\u0275\u0275directiveInject(mt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-base-menu-recently-viewed"]],inputs:{module:"module",onClick:"onClick",collapsible:"collapsible"},features:[n.\u0275\u0275NgOnChangesFeature],decls:1,vars:1,consts:[[4,"ngIf"],[1,"recently-viewed-header","mt-0","pb-1","pl-2","pr-2",3,"click"],["labelKey","LBL_LAST_VIEWED"],["class","nav-item",3,"click",4,"ngFor","ngForOf"],[1,"nav-item",3,"click"],[1,"nav-link","action-link","pb-2","pt-2",3,"routerLink"]],template:function(t,r){1&t&&n.\u0275\u0275template(0,LU,4,1,"ng-container",0),2&t&&n.\u0275\u0275property("ngIf",r.records&&r.records.length)},dependencies:[F.NgForOf,F.NgIf,Ft.RouterLink,Ot,F.SlicePipe],encapsulation:2})}return i})(),KC=(()=>{class i extends M.BaseComponentRegistry{constructor(){super()}initDefault(){this.register("default","default",GC)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const BU=function(i,a,e){return{module:i,onClick:a,collapsible:e}};function OU(i,a){if(1&i&&n.\u0275\u0275element(0,"ndc-dynamic",1),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275property("ndcDynamicComponent",e.getType)("ndcDynamicInputs",n.\u0275\u0275pureFunction3(2,BU,e.module,e.onClick,e.collapsible))}}let Cd=(()=>{class i{registry;module;onClick;collapsible=!1;constructor(e){this.registry=e}get getType(){return this.registry.get("default","default")}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(KC))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-menu-recently-viewed"]],inputs:{module:"module",onClick:"onClick",collapsible:"collapsible"},decls:1,vars:1,consts:[[3,"ndcDynamicComponent","ndcDynamicInputs",4,"ngIf"],[3,"ndcDynamicComponent","ndcDynamicInputs"]],template:function(t,r){1&t&&n.\u0275\u0275template(0,OU,1,6,"ndc-dynamic",0),2&t&&n.\u0275\u0275property("ngIf",r.getType)},dependencies:[F.NgIf,Bt,It],encapsulation:2})}return i})();function RU(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"div",4),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(e);const r=n.\u0275\u0275nextContext(3);return n.\u0275\u0275resetView(r.onClick&&r.onClick())}),n.\u0275\u0275elementStart(1,"a",5),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd()()}if(2&i){const e=a.$implicit,t=n.\u0275\u0275nextContext(3);n.\u0275\u0275advance(1),n.\u0275\u0275property("routerLink",t.buildRoute(e)),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",e.attributes.parent_name," ")}}function jU(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,RU,3,2,"div",3),n.\u0275\u0275pipe(2,"slice"),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",n.\u0275\u0275pipeBind3(2,1,e.records,0,e.maxDisplayed))}}function kU(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"h4",1),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(e);const r=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(r.toggleCollapse())}),n.\u0275\u0275element(2,"scrm-label",2),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(3,jU,3,5,"ng-container",0),n.\u0275\u0275elementContainerEnd()}if(2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(3),n.\u0275\u0275property("ngIf",!e.collapsed)}}let HC=(()=>{class i extends _d{navigation;nameMapper;configs;metadata;onClick;collapsible=!1;collapsed=!1;constructor(e,t,r,o){super(e,t,r,o),this.navigation=e,this.nameMapper=t,this.configs=r,this.metadata=o}ngOnInit(){super.ngOnInit(),this.collapsed=!!this.collapsible}toggleCollapse(){this.collapsible&&(this.collapsed=!this.collapsed)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(wn),n.\u0275\u0275directiveInject(_n),n.\u0275\u0275directiveInject(dt),n.\u0275\u0275directiveInject(mt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-base-menu-favorites"]],inputs:{onClick:"onClick",collapsible:"collapsible"},features:[n.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,consts:[[4,"ngIf"],[1,"favorite-header","mt-0","pb-1","pl-2","pr-2",3,"click"],["labelKey","LBL_FAVORITES"],["class","nav-item",3,"click",4,"ngFor","ngForOf"],[1,"nav-item",3,"click"],[1,"nav-link","action-link","pb-2","pt-2",3,"routerLink"]],template:function(t,r){1&t&&n.\u0275\u0275template(0,kU,4,1,"ng-container",0),2&t&&n.\u0275\u0275property("ngIf",r.records&&r.records.length)},dependencies:[F.NgForOf,F.NgIf,Ft.RouterLink,Ot,F.SlicePipe],encapsulation:2})}return i})(),ZC=(()=>{class i extends M.BaseComponentRegistry{constructor(){super()}initDefault(){this.register("default","default",HC)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const PU=function(i,a,e){return{module:i,onClick:a,collapsible:e}};function $U(i,a){if(1&i&&n.\u0275\u0275element(0,"ndc-dynamic",1),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275property("ndcDynamicComponent",e.getType)("ndcDynamicInputs",n.\u0275\u0275pureFunction3(2,PU,e.module,e.onClick,e.collapsible))}}let Md=(()=>{class i{registry;module;onClick;collapsible=!1;constructor(e){this.registry=e}get getType(){return this.registry.get("default","default")}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(ZC))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-menu-favorites"]],inputs:{module:"module",onClick:"onClick",collapsible:"collapsible"},decls:1,vars:1,consts:[[3,"ndcDynamicComponent","ndcDynamicInputs",4,"ngIf"],[3,"ndcDynamicComponent","ndcDynamicInputs"]],template:function(t,r){1&t&&n.\u0275\u0275template(0,$U,1,6,"ndc-dynamic",0),2&t&&n.\u0275\u0275property("ngIf",r.getType)},dependencies:[F.NgIf,Bt,It],encapsulation:2})}return i})();function UU(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"li",7),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(e);const r=n.\u0275\u0275nextContext(3);return n.\u0275\u0275resetView(r.onClose&&r.onClose())}),n.\u0275\u0275element(1,"scrm-menu-item-link",8),n.\u0275\u0275elementEnd()}if(2&i){const e=n.\u0275\u0275nextContext(2).$implicit;n.\u0275\u0275advance(1),n.\u0275\u0275classMap("mobile-nav-link dropdown-item action-link pl-5 pr-3 pt-2 pb-2"),n.\u0275\u0275property("icon",e.icon||"")("link",e.link)}}function VU(i,a){1&i&&(n.\u0275\u0275elementStart(0,"ngb-panel",5),n.\u0275\u0275template(1,UU,2,4,"ng-template",6),n.\u0275\u0275elementEnd()),2&i&&n.\u0275\u0275property("cardClass","mobile-nav-group-item disabled")("disabled",!0)}function zU(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"li",13),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(e);const r=n.\u0275\u0275nextContext(4);return n.\u0275\u0275resetView(r.onClose&&r.onClose())}),n.\u0275\u0275element(1,"scrm-menu-item-link",8),n.\u0275\u0275elementEnd()}if(2&i){const e=a.$implicit;n.\u0275\u0275advance(1),n.\u0275\u0275classMap("mobile-nav-link action-link pl-1 pr-3 pt-2 pb-2 w-100"),n.\u0275\u0275property("icon",e.icon||"")("link",e.link)}}function WU(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"li"),n.\u0275\u0275element(2,"scrm-menu-recently-viewed",14),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(3,"li"),n.\u0275\u0275element(4,"scrm-menu-favorites",14),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(3).$implicit,t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(2),n.\u0275\u0275property("collapsible",!0)("module",e.module)("onClick",t.onClose),n.\u0275\u0275advance(2),n.\u0275\u0275property("collapsible",!0)("module",e.module)("onClick",t.onClose)}}function GU(i,a){if(1&i&&(n.\u0275\u0275template(0,zU,2,4,"li",11),n.\u0275\u0275template(1,WU,5,6,"ng-container",12)),2&i){const e=n.\u0275\u0275nextContext(2).$implicit;n.\u0275\u0275property("ngForOf",e.submenu),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e&&e.module)}}function KU(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"ngb-panel",9),n.\u0275\u0275template(1,GU,2,2,"ng-template",10),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext().$implicit;n.\u0275\u0275property("title",e.link.label)}}function HU(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,VU,2,2,"ngb-panel",3),n.\u0275\u0275template(2,KU,2,1,"ngb-panel",4),n.\u0275\u0275elementContainerEnd()),2&i){const e=a.$implicit;n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!e.submenu||!e.submenu.length),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.submenu&&e.submenu.length)}}let qC=(()=>{class i{items;onClose;constructor(){}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-base-mobile-grouped-menu"]],inputs:{items:"items",onClose:"onClose"},decls:3,vars:2,consts:[[1,"mobile-menu-items"],[3,"closeOthers"],[4,"ngFor","ngForOf"],[3,"cardClass","disabled",4,"ngIf"],["cardClass","mobile-nav-group-item",3,"title",4,"ngIf"],[3,"cardClass","disabled"],["ngbPanelHeader",""],[1,"",3,"click"],[3,"icon","link"],["cardClass","mobile-nav-group-item",3,"title"],["ngbPanelContent",""],["class","ml-4",3,"click",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"ml-4",3,"click"],[3,"collapsible","module","onClick"]],template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"div",0)(1,"ngb-accordion",1),n.\u0275\u0275template(2,HU,3,2,"ng-container",2),n.\u0275\u0275elementEnd()()),2&t&&(n.\u0275\u0275advance(1),n.\u0275\u0275property("closeOthers",!0),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",r.items))},dependencies:[F.NgForOf,F.NgIf,de.NgbAccordion,de.NgbPanel,de.NgbPanelContent,de.NgbPanelHeader,Cd,Md,Ur],encapsulation:2})}return i})(),JC=(()=>{class i extends M.BaseComponentRegistry{constructor(){super()}initDefault(){this.register("default","default",qC)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const ZU=function(i,a){return{items:i,onClose:a}};function qU(i,a){if(1&i&&n.\u0275\u0275element(0,"ndc-dynamic",1),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275property("ndcDynamicComponent",e.getType)("ndcDynamicInputs",n.\u0275\u0275pureFunction2(2,ZU,e.items,e.onClose))}}let QC=(()=>{class i{registry;items;onClose;constructor(e){this.registry=e}get getType(){return this.registry.get("default","default")}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(JC))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-mobile-grouped-menu"]],inputs:{items:"items",onClose:"onClose"},decls:1,vars:1,consts:[[3,"ndcDynamicComponent","ndcDynamicInputs",4,"ngIf"],[3,"ndcDynamicComponent","ndcDynamicInputs"]],template:function(t,r){1&t&&n.\u0275\u0275template(0,qU,1,5,"ndc-dynamic",0),2&t&&n.\u0275\u0275property("ngIf",r.getType)},dependencies:[F.NgIf,Bt,It],encapsulation:2})}return i})();function JU(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"div",1)(2,"a",2),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(e);const r=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(r.onClose&&r.onClose())}),n.\u0275\u0275element(3,"scrm-menu-item-link",3),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementContainerEnd()}if(2&i){const e=a.$implicit;n.\u0275\u0275advance(3),n.\u0275\u0275classMap("mobile-nav-link dropdown-item action-link pl-3 pr-3 pt-2 pb-2"),n.\u0275\u0275property("icon",e.icon||"")("link",e.link)}}let XC=(()=>{class i{items;onClose;constructor(){}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-base-mobile-module-menu"]],inputs:{items:"items",onClose:"onClose"},decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],[1,"mobile-menu-items"],[1,"",3,"click"],[3,"icon","link"]],template:function(t,r){1&t&&n.\u0275\u0275template(0,JU,4,4,"ng-container",0),2&t&&n.\u0275\u0275property("ngForOf",r.items)},dependencies:[F.NgForOf,Ur],encapsulation:2})}return i})(),YC=(()=>{class i extends M.BaseComponentRegistry{constructor(){super()}initDefault(){this.register("default","default",XC)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const QU=function(i,a){return{items:i,onClose:a}};function XU(i,a){if(1&i&&n.\u0275\u0275element(0,"ndc-dynamic",1),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275property("ndcDynamicComponent",e.getType)("ndcDynamicInputs",n.\u0275\u0275pureFunction2(2,QU,e.items,e.onClose))}}let eM=(()=>{class i{registry;items;onClose;constructor(e){this.registry=e}get getType(){return this.registry.get("default","default")}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(YC))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-mobile-module-menu"]],inputs:{items:"items",onClose:"onClose"},decls:1,vars:1,consts:[[3,"ndcDynamicComponent","ndcDynamicInputs",4,"ngIf"],[3,"ndcDynamicComponent","ndcDynamicInputs"]],template:function(t,r){1&t&&n.\u0275\u0275template(0,XU,1,5,"ndc-dynamic",0),2&t&&n.\u0275\u0275property("ngIf",r.getType)},dependencies:[F.NgIf,Bt,It],encapsulation:2})}return i})();function YU(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"li",5),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(e);const r=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(r.navBackLink())}),n.\u0275\u0275element(2,"scrm-image",6),n.\u0275\u0275elementStart(3,"a",7),n.\u0275\u0275element(4,"scrm-label",8),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementContainerEnd()}}function e6(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"li",12),n.\u0275\u0275listener("click",function(r){n.\u0275\u0275restoreView(e);const o=n.\u0275\u0275nextContext(3);return n.\u0275\u0275resetView(o.changeSubNav(r,o.current.submenu,o.navigationType,o.current))}),n.\u0275\u0275elementStart(1,"a",13),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd(),n.\u0275\u0275element(3,"scrm-image",15),n.\u0275\u0275elementEnd()}if(2&i){const e=n.\u0275\u0275nextContext(3);n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(e.current.link.label)}}function t6(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"li",12),n.\u0275\u0275listener("click",function(r){const s=n.\u0275\u0275restoreView(e).$implicit,c=n.\u0275\u0275nextContext(3);return n.\u0275\u0275resetView(c.changeSubNav(r,s.submenu,c.navigationType,s))}),n.\u0275\u0275elementStart(1,"a",13),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd(),n.\u0275\u0275element(3,"scrm-image",15),n.\u0275\u0275elementEnd()}if(2&i){const e=a.$implicit;n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(e.link.label)}}function n6(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"div",9),n.\u0275\u0275template(2,e6,4,1,"li",10),n.\u0275\u0275template(3,t6,4,1,"li",11),n.\u0275\u0275elementContainerStart(4),n.\u0275\u0275elementStart(5,"li",12),n.\u0275\u0275listener("click",function(r){n.\u0275\u0275restoreView(e);const o=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(o.changeSubNav(r,o.all,"gm",null))}),n.\u0275\u0275elementStart(6,"a",13),n.\u0275\u0275element(7,"scrm-label",14),n.\u0275\u0275elementEnd(),n.\u0275\u0275element(8,"scrm-image",15),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd(),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()}if(2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",e.isAdminNavbar),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",e.mainItems)}}function i6(i,a){if(1&i&&n.\u0275\u0275element(0,"scrm-mobile-grouped-menu",17),2&i){const e=n.\u0275\u0275nextContext(4);n.\u0275\u0275property("items",null==e.current?null:e.current.submenu)("onClose",e.onClose)}}function r6(i,a){if(1&i&&n.\u0275\u0275element(0,"scrm-mobile-module-menu",17),2&i){const e=n.\u0275\u0275nextContext(4);n.\u0275\u0275property("items",e.submenu)("onClose",e.onClose)}}function o6(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"div",9)(2,"li",18),n.\u0275\u0275element(3,"scrm-menu-recently-viewed",19),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(4,"li",18),n.\u0275\u0275element(5,"scrm-menu-favorites",19),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(4);n.\u0275\u0275advance(3),n.\u0275\u0275property("collapsible",!0)("module",e.subNavItem.module)("onClick",e.onClose),n.\u0275\u0275advance(2),n.\u0275\u0275property("collapsible",!0)("module",e.subNavItem.module)("onClick",e.onClose)}}function a6(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,i6,1,2,"scrm-mobile-grouped-menu",16),n.\u0275\u0275template(2,r6,1,2,"scrm-mobile-module-menu",16),n.\u0275\u0275template(3,o6,6,6,"ng-container",0),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(3);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.isAdminNavbar&&e.isAdminNavbarClicked),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!e.isAdminNavbarClicked),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.subNavItem&&e.subNavItem.module)}}function s6(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275element(1,"scrm-mobile-grouped-menu",17),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(3);n.\u0275\u0275advance(1),n.\u0275\u0275property("items",e.submenu)("onClose",e.onClose)}}function c6(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,a6,4,3,"ng-container",0),n.\u0275\u0275template(2,s6,2,2,"ng-container",0),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf","gm"!==e.subNavigationType),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf","gm"===e.subNavigationType)}}function l6(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,n6,9,2,"ng-container",0),n.\u0275\u0275template(2,c6,3,2,"ng-container",0),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.mainNavLink),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.mobileSubNav)}}let tM=(()=>{class i{current;items;all;onClose;navigationType="";mainItems;submenu=[];subNavItem;subNavigationType="mm";backLink=!1;mobileSubNav=!1;mainNavLink=!0;isAdminNavbar=!1;isAdminNavbarClicked=!1;constructor(){}ngOnInit(){this.mainItems=this.items,"gm"!==this.navigationType&&this.current&&(this.isAdminNavbar=this.current.isGroupedMenu,this.current.isGroupedMenu||(this.mainItems=[this.current,...this.items]))}changeSubNav(e,t,r,o){this.mobileSubNav=!this.mobileSubNav,this.backLink=!this.backLink,this.mainNavLink=!this.mainNavLink,this.subNavItem=o,this.submenu=t,this.subNavigationType=r,o.isGroupedMenu?(this.isAdminNavbarClicked=!0,this.mainItems=this.items):(this.isAdminNavbarClicked=!1,this.isAdminNavbar=!1)}navBackLink(){this.mobileSubNav=!this.mobileSubNav,this.backLink=!this.backLink,this.mainNavLink=!this.mainNavLink}getItems(){}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-base-mobile-menu"]],inputs:{current:"current",items:"items",all:"all",onClose:"onClose",navigationType:"navigationType"},decls:7,vars:2,consts:[[4,"ngIf"],[1,"mobile-nav-close","clicable","pl-3","pr-3","pt-2","pb-2","w-100",3,"click"],["image","cross_bold",1,"sicon","mobile-nav-close"],[1,"nav-close-text"],["labelKey","LBL_CLOSE_MENU"],[1,"d-flex","align-items-center","mobile-back-row",3,"click"],["image","arrow_left_filled",1,"sicon-xs","mobile-nav-arrow","pl-3","pr-3"],[1,"mobile-back-link","pl-1","pr-3","pt-2","pb-2"],["labelKey","LBL_BACK"],[1,"mobile-menu-items"],["class"," d-flex align-items-center",3,"click",4,"ngIf"],["class"," d-flex align-items-center",3,"click",4,"ngFor","ngForOf"],[1,"d-flex","align-items-center",3,"click"],[1,"flex-grow-1","mobile-nav-link","pl-3","pr-3","pt-2","pb-2"],["labelKey","LBL_MORE"],["image","arrow_right_filled",1,"sicon-xs","mobile-nav-arrow","pl-3","pr-3"],[3,"items","onClose",4,"ngIf"],[3,"items","onClose"],[1,""],[3,"collapsible","module","onClick"]],template:function(t,r){1&t&&(n.\u0275\u0275template(0,YU,5,0,"ng-container",0),n.\u0275\u0275template(1,l6,3,2,"ng-container",0),n.\u0275\u0275elementStart(2,"li")(3,"a",1),n.\u0275\u0275listener("click",function(){return r.onClose&&r.onClose()}),n.\u0275\u0275element(4,"scrm-image",2),n.\u0275\u0275elementStart(5,"span",3),n.\u0275\u0275element(6,"scrm-label",4),n.\u0275\u0275elementEnd()()()),2&t&&(n.\u0275\u0275property("ngIf",r.backLink),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.mainItems&&r.mainItems.length))},dependencies:[F.NgForOf,F.NgIf,mn,Ot,Cd,Md,QC,eM],encapsulation:2})}return i})(),nM=(()=>{class i extends M.BaseComponentRegistry{constructor(){super()}initDefault(){this.register("default","default",tM)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const u6=function(i,a,e,t,r){return{current:i,items:a,all:e,onClose:t,navigationType:r}};function d6(i,a){if(1&i&&n.\u0275\u0275element(0,"ndc-dynamic",1),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275property("ndcDynamicComponent",e.getType)("ndcDynamicInputs",n.\u0275\u0275pureFunction5(2,u6,e.current,e.items,e.all,e.onClose,e.navigationType))}}let iM=(()=>{class i{registry;current;items;all;onClose;navigationType="";constructor(e){this.registry=e}get getType(){return this.registry.get("default","default")}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(nM))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-mobile-menu"]],inputs:{current:"current",items:"items",all:"all",onClose:"onClose",navigationType:"navigationType"},decls:1,vars:1,consts:[[3,"ndcDynamicComponent","ndcDynamicInputs",4,"ngIf"],[3,"ndcDynamicComponent","ndcDynamicInputs"]],template:function(t,r){1&t&&n.\u0275\u0275template(0,d6,1,8,"ndc-dynamic",0),2&t&&n.\u0275\u0275property("ngIf",r.getType)},dependencies:[F.NgIf,Bt,It],encapsulation:2})}return i})();const f6=["mobileGlobalLinkTitle"];function p6(i,a){1&i&&(n.\u0275\u0275elementStart(0,"nav",5)(1,"div",6)(2,"ul",7)(3,"li",8),n.\u0275\u0275text(4,"\xa0 "),n.\u0275\u0275elementEnd()()()())}function m6(i,a){1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"nav",9)(2,"div",10)(3,"ul",7)(4,"li",11),n.\u0275\u0275element(5,"scrm-logo-ui"),n.\u0275\u0275elementEnd()()()(),n.\u0275\u0275elementContainerEnd())}function g6(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275element(1,"scrm-mobile-menu",27),n.\u0275\u0275elementContainerEnd()),2&i){n.\u0275\u0275nextContext();const e=n.\u0275\u0275reference(3),t=n.\u0275\u0275nextContext(2).ngIf,r=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("all",r.navbar.all.modules)("current",r.navbar.current)("items",r.navbar.menu)("navigationType",t.userPreferences.navigation_paradigm||"")("onClose",r.getCloseCallBack(e))}}function h6(i,a){1&i&&n.\u0275\u0275elementContainer(0)}function v6(i,a){1&i&&n.\u0275\u0275element(0,"hr")}function _6(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"a",29),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(3,v6,1,0,"hr",3),n.\u0275\u0275elementContainerEnd()),2&i){const e=a.$implicit,t=a.first,r=a.last;n.\u0275\u0275advance(1),n.\u0275\u0275propertyInterpolate("href",e.link.url,n.\u0275\u0275sanitizeUrl),n.\u0275\u0275propertyInterpolate("target",e.link.target),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1("",e.link.label," "),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!0===r||!0===t)}}function y6(i,a){if(1&i&&n.\u0275\u0275template(0,_6,4,4,"ng-container",28),2&i){const e=n.\u0275\u0275nextContext(4);n.\u0275\u0275property("ngForOf",e.navbar.globalActions)}}function b6(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"ul",12)(2,"div",13,14)(4,"button",15),n.\u0275\u0275element(5,"scrm-image",16),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(6,"div",17),n.\u0275\u0275template(7,g6,2,5,"ng-container",3),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(8,"div",18),n.\u0275\u0275template(9,h6,1,0,"ng-container",19),n.\u0275\u0275elementStart(10,"div",20)(11,"li",21),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(e);const r=n.\u0275\u0275reference(3);return n.\u0275\u0275resetView(r.close())}),n.\u0275\u0275elementStart(12,"a",22,23),n.\u0275\u0275element(14,"scrm-image",24),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(15,"div",25)(16,"span",26),n.\u0275\u0275text(17),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(18,y6,1,1,"ng-template",2),n.\u0275\u0275element(19,"scrm-logout-ui"),n.\u0275\u0275elementEnd()()()()(),n.\u0275\u0275elementContainerEnd()}if(2&i){const e=n.\u0275\u0275reference(13);n.\u0275\u0275nextContext(2);const t=n.\u0275\u0275reference(4),r=n.\u0275\u0275nextContext();n.\u0275\u0275advance(2),n.\u0275\u0275property("autoClose",!1),n.\u0275\u0275advance(4),n.\u0275\u0275property("@mobileNavFade",void 0),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.navbar&&r.navbar.menu&&r.navbar.menu.length),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngTemplateOutlet",t),n.\u0275\u0275advance(6),n.\u0275\u0275styleProp("min-width",e.offsetWidth,"px"),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate2("",r.navbar.currentUser.firstName," ",r.navbar.currentUser.lastName,""),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.navbar.globalActions)}}function C6(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"li",39),n.\u0275\u0275element(2,"scrm-grouped-menu-item",40),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(5);n.\u0275\u0275advance(2),n.\u0275\u0275property("item",e.navbar.current)("subNavCollapse",e.subNavCollapse)}}function M6(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"li",41),n.\u0275\u0275element(1,"scrm-menu-item",42),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext(5);n.\u0275\u0275advance(1),n.\u0275\u0275property("item",e.navbar.current)}}function S6(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"li",39),n.\u0275\u0275element(1,"scrm-grouped-menu-item",40),n.\u0275\u0275elementEnd()),2&i){const e=a.$implicit,t=n.\u0275\u0275nextContext(5);n.\u0275\u0275advance(1),n.\u0275\u0275property("item",e)("subNavCollapse",t.subNavCollapse)}}function D6(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"ul",35),n.\u0275\u0275template(2,C6,3,2,"ng-container",3),n.\u0275\u0275template(3,M6,2,1,"li",36),n.\u0275\u0275template(4,S6,2,2,"li",37),n.\u0275\u0275elementEnd(),n.\u0275\u0275element(5,"scrm-menu-items-list",38),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(4);n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",e.navbar.current&&e.navbar.current.isGroupedMenu),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.navbar.current&&!e.navbar.current.isGroupedMenu),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",e.navbar.menu),n.\u0275\u0275advance(1),n.\u0275\u0275property("items",e.navbar.all.modules)}}function w6(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"li",41),n.\u0275\u0275element(1,"scrm-menu-item",42),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext(5);n.\u0275\u0275advance(1),n.\u0275\u0275property("item",e.navbar.current)}}function x6(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"li",39),n.\u0275\u0275element(2,"scrm-grouped-menu-item",40),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(5);n.\u0275\u0275advance(2),n.\u0275\u0275property("item",e.navbar.current)("subNavCollapse",e.subNavCollapse)}}function E6(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"li",45),n.\u0275\u0275element(1,"scrm-menu-item",42),n.\u0275\u0275elementEnd()),2&i){const e=a.$implicit;n.\u0275\u0275advance(1),n.\u0275\u0275property("item",e)}}function F6(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"ul",7),n.\u0275\u0275template(2,w6,2,1,"li",36),n.\u0275\u0275template(3,x6,3,2,"ng-container",3),n.\u0275\u0275template(4,E6,2,1,"li",43),n.\u0275\u0275elementEnd(),n.\u0275\u0275element(5,"scrm-menu-items-list",44),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(4);n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",e.navbar.current&&!e.navbar.current.isGroupedMenu),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",(null==e.navbar.current?null:e.navbar.current.submenu)&&e.navbar.current.isGroupedMenu),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",e.navbar.menu),n.\u0275\u0275advance(1),n.\u0275\u0275property("items",e.navbar.all.modules)}}function I6(i,a){1&i&&n.\u0275\u0275elementContainer(0)}function A6(i,a){1&i&&n.\u0275\u0275element(0,"hr")}function T6(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"a",29),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(3,A6,1,0,"hr",3),n.\u0275\u0275elementContainerEnd()),2&i){const e=a.$implicit,t=a.first,r=a.last;n.\u0275\u0275advance(1),n.\u0275\u0275propertyInterpolate("href",e.link.url,n.\u0275\u0275sanitizeUrl),n.\u0275\u0275propertyInterpolate("target",e.link.target),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1("",e.link.label," "),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!0===r||!0===t)}}function N6(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,T6,4,4,"ng-container",28),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(4);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",e.navbar.globalActions)}}function L6(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"nav",30)(2,"div",31),n.\u0275\u0275element(3,"scrm-home-menu-item",32),n.\u0275\u0275template(4,D6,6,4,"ng-container",3),n.\u0275\u0275template(5,F6,6,4,"ng-container",3),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(6,I6,1,0,"ng-container",19),n.\u0275\u0275elementStart(7,"div",20)(8,"ul",7)(9,"li",33)(10,"a",22),n.\u0275\u0275element(11,"scrm-image",24),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(12,"div",34)(13,"span",26),n.\u0275\u0275text(14),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(15,N6,2,1,"ng-container",3),n.\u0275\u0275element(16,"scrm-logout-ui"),n.\u0275\u0275elementEnd()()()()(),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(2).ngIf,t=n.\u0275\u0275reference(4),r=n.\u0275\u0275nextContext();n.\u0275\u0275advance(2),n.\u0275\u0275property("ngbCollapse",r.mainNavCollapse),n.\u0275\u0275advance(1),n.\u0275\u0275property("active",e.appState.module&&"home"===e.appState.module)("route",r.getHomePage()),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf","gm"==e.userPreferences.navigation_paradigm),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf","gm"!=e.userPreferences.navigation_paradigm),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngTemplateOutlet",t),n.\u0275\u0275advance(8),n.\u0275\u0275textInterpolate2("",r.navbar.currentUser.firstName," ",r.navbar.currentUser.lastName,""),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.navbar.globalActions)}}function B6(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,m6,6,0,"ng-container",3),n.\u0275\u0275template(2,b6,20,9,"ng-container",3),n.\u0275\u0275template(3,L6,17,9,"ng-container",3),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!e.isUserLoggedIn),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.isUserLoggedIn&&e.mobileNavbar),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.isUserLoggedIn&&!e.mobileNavbar)}}function O6(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"a",57),n.\u0275\u0275element(2,"scrm-label",58),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext().$implicit,t=n.\u0275\u0275nextContext(4);let r;n.\u0275\u0275advance(1),n.\u0275\u0275property("routerLink",e.url)("queryParams",null!==(r=null==e?null:e.params)&&void 0!==r?r:null),n.\u0275\u0275advance(1),n.\u0275\u0275property("labelKey",e.labelKey)("module",t.navbar.current.module)}}function R6(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"a",59),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(e);const r=n.\u0275\u0275nextContext().$implicit,o=n.\u0275\u0275nextContext(4);return n.\u0275\u0275resetView(o.handleProcess(r))}),n.\u0275\u0275element(2,"scrm-label",58),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()}if(2&i){const e=n.\u0275\u0275nextContext().$implicit,t=n.\u0275\u0275nextContext(4);n.\u0275\u0275advance(2),n.\u0275\u0275property("labelKey",e.labelKey)("module",t.navbar.current.module)}}function j6(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"li",56),n.\u0275\u0275template(1,O6,3,4,"ng-container",3),n.\u0275\u0275template(2,R6,3,2,"ng-container",3),n.\u0275\u0275elementEnd()),2&i){const e=a.$implicit;n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!e.process),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.process)}}function k6(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"li",53),n.\u0275\u0275element(2,"scrm-label",54),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(3,j6,3,2,"li",55),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(3);n.\u0275\u0275advance(2),n.\u0275\u0275property("module",e.navbar.current.module),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",e.currentQuickActions)}}function P6(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"a",57),n.\u0275\u0275element(2,"scrm-label",58),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext().$implicit;let t;n.\u0275\u0275advance(1),n.\u0275\u0275property("routerLink",e.url)("queryParams",null!==(t=null==e?null:e.params)&&void 0!==t?t:null),n.\u0275\u0275advance(1),n.\u0275\u0275property("labelKey",e.labelKey)("module",e.module)}}function $6(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"a",59),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(e);const r=n.\u0275\u0275nextContext().$implicit,o=n.\u0275\u0275nextContext(4);return n.\u0275\u0275resetView(o.handleProcess(r))}),n.\u0275\u0275element(2,"scrm-label",58),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()}if(2&i){const e=n.\u0275\u0275nextContext().$implicit;n.\u0275\u0275advance(2),n.\u0275\u0275property("labelKey",e.labelKey)("module",e.module)}}function U6(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"li",56),n.\u0275\u0275template(1,P6,3,4,"ng-container",3),n.\u0275\u0275template(2,$6,3,2,"ng-container",3),n.\u0275\u0275elementEnd()),2&i){const e=a.$implicit;n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!e.process),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.process)}}const rM=function(){return[]};function V6(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"li",53),n.\u0275\u0275element(2,"scrm-label",60),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(3,U6,3,2,"li",55),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(3);let t;n.\u0275\u0275advance(3),n.\u0275\u0275property("ngForOf",null!==(t=null==e||null==e.navigation?null:e.navigation.quickActions)&&void 0!==t?t:n.\u0275\u0275pureFunction0(1,rM))}}function z6(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275text(1),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(2).ngIf;n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(e)}}function W6(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"span",66),n.\u0275\u0275template(1,z6,2,1,"ng-container",3),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext().ngIf;n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e>0)}}function G6(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,W6,2,1,"span",65),n.\u0275\u0275elementContainerEnd()),2&i){const e=a.ngIf;let t;n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",null!==(t=e)&&void 0!==t&&t)}}function K6(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"div",61)(1,"a",62),n.\u0275\u0275listener("mouseenter",function(){n.\u0275\u0275restoreView(e);const r=n.\u0275\u0275nextContext(3);return n.\u0275\u0275resetView(r.markAsRead())}),n.\u0275\u0275element(2,"scrm-image",63),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(3,G6,2,1,"ng-container",3),n.\u0275\u0275pipe(4,"async"),n.\u0275\u0275elementStart(5,"div",64),n.\u0275\u0275element(6,"scrm-notifications"),n.\u0275\u0275elementEnd()()}if(2&i){const e=n.\u0275\u0275nextContext(3);n.\u0275\u0275advance(3),n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(4,1,e.notificationCount$))}}function H6(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",46)(1,"div",47)(2,"a",48),n.\u0275\u0275element(3,"scrm-image",49),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(4,"ul",50),n.\u0275\u0275template(5,k6,4,2,"ng-container",3),n.\u0275\u0275template(6,V6,4,2,"ng-container",3),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(7,"div",51),n.\u0275\u0275element(8,"scrm-search-bar"),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(9,K6,7,3,"div",52),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext().ngIf,t=n.\u0275\u0275nextContext();let r,o;n.\u0275\u0275advance(4),n.\u0275\u0275classProp("dropdown-menu-right",!t.mobileNavbar),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",(null!==(r=null==t.navbar||null==t.navbar.current?null:t.navbar.current.module)&&void 0!==r?r:"")&&t.currentQuickActions.length),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",(null!==(o=null==t||null==t.navigation?null:t.navigation.quickActions)&&void 0!==o?o:n.\u0275\u0275pureFunction0(5,rM)).length),n.\u0275\u0275advance(3),n.\u0275\u0275property("ngIf",t.notificationsEnabled&&t.checkAppStrings(e.appStrings)&&t.arePreferencesInitialized(e.userPreferences))}}function Z6(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",1),n.\u0275\u0275template(1,p6,5,0,"ng-template",2),n.\u0275\u0275template(2,B6,4,3,"ng-container",3),n.\u0275\u0275template(3,H6,10,6,"ng-template",null,4,n.\u0275\u0275templateRefExtractor),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!e.loaded),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.loaded)}}let oM=(()=>{class i{navigationStore;languageStore;userPreferenceStore;systemConfigStore;appState;authService;moduleNavigation;screenSize;asyncActionService;notificationStore;mobileGlobalLinkTitle;static instances=[];loaded=!0;isUserLoggedIn;mainNavCollapse=!0;subNavCollapse=!0;mobileNavbar=!1;mobileSubNav=!1;backLink=!1;mainNavLink=!0;submenu=[];moduleNameMapper;actionNameMapper;routeConverter;navbar;maxTabs=8;screen=kn.Medium;notificationsEnabled=!1;subs=[];navigation;currentQuickActions;languages$;userPreferences$;currentUser$;appState$;navigation$;dropdownLength;notificationCount$;vm$;constructor(e,t,r,o,s,c,l,u,d,f){this.navigationStore=e,this.languageStore=t,this.userPreferenceStore=r,this.systemConfigStore=o,this.appState=s,this.authService=c,this.moduleNavigation=l,this.screenSize=u,this.asyncActionService=d,this.notificationStore=f;const p=o??{configs$:(0,S.of)({}),getConfig:()=>null};this.moduleNameMapper=new _n(p),this.actionNameMapper=new ao(p),this.routeConverter=new $r(this.moduleNameMapper,this.actionNameMapper,p),this.languages$=t?.vm$??(0,S.of)({appStrings:{},modStrings:{},appListStrings:{}}),this.userPreferences$=r?.userPreferences$??(0,S.of)({}),this.currentUser$=c?.currentUser$??(0,S.of)(null),this.appState$=s?.vm$??(0,S.of)({module:null}),this.navigation$=e?.vm$??(0,S.of)({modules:[]}),this.notificationCount$=f?.notificationsUnreadTotal$??(0,S.of)(0),this.vm$=this.navigation$.pipe((0,S.combineLatestWith)(this.userPreferences$,this.currentUser$,this.appState$,this.screenSize.screenSize$,this.languages$),(0,v.map)(([m,h,g,b,_,D])=>(_&&(this.screen=_),m&&m.modules&&(this.navigation=m),this.calculateMaxTabs(m),this.getModuleQuickActions(b?.module),this.navbar&&(this.navbar.resetMenu(),(0,M.ready)([D?.appStrings,D?.modStrings,D?.appListStrings,h,g])&&this.navbar.build(m,g,this.maxTabs)),{navigation:m,userPreferences:h,appState:b,appStrings:D?.appStrings||{},appListStrings:D?.appListStrings||{}})))}onResize(e){this.mobileNavbar=e.target.innerWidth<=768}ngOnInit(){const e=new fC(this.routeConverter,this.moduleNavigation,this.userPreferenceStore,this.languageStore,this.appState);this.setNavbar(e),this.authService.isUserLoggedIn.subscribe(t=>{this.isUserLoggedIn=t}),window.dispatchEvent(new Event("resize")),this.notificationCount$=this.notificationStore?.notificationsUnreadTotal$??(0,S.of)(0),this.subs.push((this.notificationStore?.notificationsEnabled$??(0,S.of)(!1)).subscribe(t=>{this.notificationsEnabled=t}))}ngOnDestroy(){this.authService.isUserLoggedIn.unsubscribe(),this.subs.forEach(e=>e.unsubscribe())}checkAppStrings(e){return e&&Object.keys(e).length>0}arePreferencesInitialized(e){return e&&Object.keys(e).length}markAsRead(){this.notificationStore?.markNotificationsAsRead()}ngAfterViewInit(){this.mobileGlobalLinkTitle?.nativeElement?.offsetWidt&&(this.dropdownLength=this.mobileGlobalLinkTitle.nativeElement.offsetWidt)}changeSubNav(e,t){this.mobileSubNav=!this.mobileSubNav,this.backLink=!this.backLink,this.mainNavLink=!this.mainNavLink,this.submenu=t}navBackLink(){this.mobileSubNav=!this.mobileSubNav,this.backLink=!this.backLink,this.mainNavLink=!this.mainNavLink}getHomePage(){return this.systemConfigStore.getHomePage()}getCloseCallBack(e){return()=>e.close()}setNavbar(e){this.navbar=e,this.loaded=!0}isLoaded(){return this.loaded}calculateMaxTabs(e){const t=this.systemConfigStore?.getConfigValue?.("navigation_tab_limits");if(this.screen&&t){let r=t[this.screen];(!r||e?.maxTabs&&e.maxTabs<r)&&(r=e?.maxTabs),r&&(this.maxTabs=r)}}getModuleQuickActions(e){const t=this?.navigation?.modules[e]??null,r=t?.menu??[];(null===t||!r.length)&&(this.currentQuickActions=[]);const o=[];r.forEach(s=>{if(!s.url||!s.quickAction)return;const c=s?.url??"";o.push({...s,url:c.replace("/#/","/")})}),this.currentQuickActions=o}handleProcess(e){if(!e.process)return;const t=e.process;this.asyncActionService.run(t,{action:t,module:e.module}).pipe((0,v.take)(1)).subscribe()}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(Ci),n.\u0275\u0275directiveInject(Oe),n.\u0275\u0275directiveInject(Vt),n.\u0275\u0275directiveInject(dt),n.\u0275\u0275directiveInject(Gt),n.\u0275\u0275directiveInject(Hn),n.\u0275\u0275directiveInject(wn),n.\u0275\u0275directiveInject(ai),n.\u0275\u0275directiveInject(Kt),n.\u0275\u0275directiveInject(la))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-base-navbar"]],viewQuery:function(t,r){if(1&t&&n.\u0275\u0275viewQuery(f6,5),2&t){let o;n.\u0275\u0275queryRefresh(o=n.\u0275\u0275loadQuery())&&(r.mobileGlobalLinkTitle=o.first)}},hostBindings:function(t,r){1&t&&n.\u0275\u0275listener("resize",function(s){return r.onResize(s)},!1,n.\u0275\u0275resolveWindow)},decls:2,vars:3,consts:[["class","top-panel fixed-top",4,"ngIf"],[1,"top-panel","fixed-top"],[3,"ngIf"],[4,"ngIf"],["actionIcons",""],[1,"navbar","navbar-expand-lg"],[1,"navbar-collapse","collapse","order-4","order-md-0","collapsenav"],[1,"navbar-nav"],[1,"top-nav","nav-item"],[1,"navbar","ml-0","pl-0"],[1,"navbar-collapse"],[1,"pl-0"],[1,"navbar","mobile-nav-block","mobilenavbar"],["ngbDropdown","",1,"position-static",3,"autoClose"],["myDrop","ngbDropdown"],["aria-controls","navbar","aria-expanded","false","aria-label","Toggle navigation","ngbDropdownToggle","","type","button",1,"navbar-toggler"],["image","hamburger",1,"responsive-menu-toggler"],["ngbDropdownMenu","",1,"mobile-nav-dropdown","w-100"],[1,"d-flex","align-items-center"],[4,"ngTemplateOutlet"],["ngbDropdown","",1,"global-links"],[1,"global-link-item",3,"click"],["ngbDropdownToggle","",1,"nav-link","primary-global-link","dropdown-toggle"],["mobileGlobalLinkTitle",""],["image","user",1,"global-action-icon","sicon-2x"],["aria-labelledby","navbarDropdownMenuLink","ngbDropdownMenu","",1,"dropdown-menu","global-links-dropdown","border","shadow-sm-2"],[1,"global-user-name"],[3,"all","current","items","navigationType","onClose"],[4,"ngFor","ngForOf"],["ngbDropdownItem","",1,"dropdown-item","global-links-sublink",3,"href","target"],[1,"navbar","navbar-expand-md","navbar-1"],[1,"navbar-collapse","collapse","collapsenav",3,"ngbCollapse"],[3,"active","route"],[1,"global-link-item"],["aria-labelledby","navbarDropdownMenuLink","ngbDropdownMenu","",1,"dropdown-menu","global-links-dropdown","border","shadow-sm-2","dropdown-menu-right"],[1,"navbar-nav","grouped"],["class","top-nav nav-item dropdown non-grouped active",4,"ngIf"],["class","top-nav nav-item dropdown main-grouped",4,"ngFor","ngForOf"],["labelKey","LBL_TABGROUP_ALL",3,"items"],[1,"top-nav","nav-item","dropdown","main-grouped"],[3,"item","subNavCollapse"],[1,"top-nav","nav-item","dropdown","non-grouped","active"],[3,"item"],["class","top-nav nav-item dropdown non-grouped",4,"ngFor","ngForOf"],["labelKey","LBL_MORE",3,"items"],[1,"top-nav","nav-item","dropdown","non-grouped"],[1,"action-group","navbar-action-group"],[1,"action-new","dropdown"],["type","button","aria-label","Quick Create",1,"action-link","primary-global-link"],["image","plus",1,"action-btn-icon"],[1,"dropdown-menu","border","shadow-sm-2"],[1,"d-flex","align-items-center","mx-1"],["class","action-alert dropdown",4,"ngIf"],[1,"new-list-item-header","font-weight-bold"],["labelKey","LBL_MODULE_NAME",3,"module"],["class","new-list-item",4,"ngFor","ngForOf"],[1,"new-list-item"],[1,"d-flex","align-items-center",3,"routerLink","queryParams"],[3,"labelKey","module"],[1,"d-flex","align-items-center",3,"click"],["labelKey","LBL_QUICK_ACTIONS"],[1,"action-alert","dropdown"],["type","button","aria-label","Toggle Alerts",1,"action-link","primary-global-link",3,"mouseenter"],["image","alert",1,"action-btn-icon"],[1,"dropdown-menu","border","shadow-sm-2","dropdown-menu-right"],["class","badge badge-position rounded-pill bg-danger text-white",4,"ngIf"],[1,"badge","badge-position","rounded-pill","bg-danger","text-white"]],template:function(t,r){1&t&&(n.\u0275\u0275template(0,Z6,5,2,"div",0),n.\u0275\u0275pipe(1,"async")),2&t&&n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(1,1,r.vm$))},dependencies:[F.NgForOf,F.NgIf,F.NgTemplateOutlet,jc,cC,de.NgbCollapse,de.NgbDropdown,de.NgbDropdownToggle,de.NgbDropdownMenu,de.NgbDropdownItem,Ft.RouterLink,mn,Ot,wC,EC,bd,kC,UC,WC,iM,F.AsyncPipe],encapsulation:2,data:{animation:[(0,jt.trigger)("mobileNavFade",[(0,jt.transition)(":enter",(0,jt.useAnimation)(Js.fadeIn,{params:{timing:.5,delay:0}}))])]}})}return i})(),aM=(()=>{class i extends M.BaseComponentRegistry{constructor(){super()}initDefault(){this.register("default","default",oM)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),q6=(()=>{class i{registry;constructor(e){this.registry=e}get getType(){return this.registry.get("default","default")}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(aM))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-navbar-ui"]],decls:1,vars:1,consts:[[3,"ndcDynamicComponent"]],template:function(t,r){1&t&&n.\u0275\u0275element(0,"ndc-dynamic",0),2&t&&n.\u0275\u0275property("ndcDynamicComponent",r.getType)},dependencies:[It],encapsulation:2})}return i})();function J6(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"span",4),n.\u0275\u0275element(1,"scrm-action-group-menu",5),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext(3);n.\u0275\u0275advance(1),n.\u0275\u0275property("buttonClass",e.config.buttonClass)("config",e.config.actions)}}function Q6(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div")(1,"scrm-field-grid",2),n.\u0275\u0275template(2,J6,2,2,"span",3),n.\u0275\u0275elementEnd()()),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275classMapInterpolate1("record-grid ",e.config&&e.config.klass||"",""),n.\u0275\u0275advance(1),n.\u0275\u0275property("actions",!!e.config.actions)("appendActions",e.config&&e.config.appendActions||!1)("colClass",e.config&&e.config.colClass)("fieldMode",e.mode)("fields",e.fields)("inputClass",e.config&&e.config.inputClass)("labelClass",e.config&&e.config.labelClass)("labelDisplay",e.config&&e.config.labelDisplay||"top")("maxColumns",e.maxColumns)("rowClass",e.config&&e.config.rowClass)("sizeMap",e.sizeMap)("colAlignItems",e.config.colAlignItems),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.config.actions)}}function X6(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,Q6,3,16,"div",1),n.\u0275\u0275pipe(2,"async"),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(2,1,e.vm$))}}let Sd=(()=>{class i{config;gridButtons=[];mode="detail";maxColumns=4;sizeMap={handset:1,tablet:2,web:3,wide:4};fields=[];special=[];vm$;constructor(){}ngOnInit(){if(!this.config)return;const e=this.config;this.vm$=e.record$.pipe((0,S.combineLatestWith)(e.mode$,e.fields$,e.maxColumns$,e.sizeMap$),(0,v.map)(([t,r,o,s,c])=>(this.mode=r,this.maxColumns=s,this.sizeMap=c,this.fields=this.getFields(t,o),{record:t,mode:r,fields:o,maxColumns:s})))}getFields(e,t){if(!e||!t||!e.fields)return[];const r=[];return t.forEach(o=>{e.fields[o]&&r.push(e.fields[o])}),r}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-record-grid"]],inputs:{config:"config"},decls:1,vars:1,consts:[[4,"ngIf"],[3,"class",4,"ngIf"],[3,"actions","appendActions","colClass","fieldMode","fields","inputClass","labelClass","labelDisplay","maxColumns","rowClass","sizeMap","colAlignItems"],["class","float-right","field-grid-actions","",4,"ngIf"],["field-grid-actions","",1,"float-right"],[3,"buttonClass","config"]],template:function(t,r){1&t&&n.\u0275\u0275template(0,X6,3,3,"ng-container",0),2&t&&n.\u0275\u0275property("ngIf",r.config)},dependencies:[F.NgIf,Xu,ur,F.AsyncPipe],encapsulation:2})}return i})(),Xa=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,uo,fr]})}return i})(),sM=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Xt,Pn,Nt,fr,io]})}return i})(),Pc=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Xt,Pr,uo,Lr,Nt,Xa,Yu,sM]})}return i})(),Dd=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Xt,Pr,uo,Lr,Nt,Xa,Xt,Pc,mr,fr]})}return i})(),cM=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Pn,hr,Nt,Dd,Pc]})}return i})(),lM=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Ce.FormsModule,fn,Nt,Ce.ReactiveFormsModule]})}return i})(),Y6=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,kc,lC,de.NgbModule,Ft.RouterModule,fn,lt,Nt,Ce.FormsModule,cM,lM]})}return i})();function eV(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"button",7),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(e);const r=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(r.first())}),n.\u0275\u0275element(1,"scrm-image",8),n.\u0275\u0275elementEnd()}}function tV(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"button",9),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(e);const r=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(r.previous())}),n.\u0275\u0275element(1,"scrm-image",10),n.\u0275\u0275elementEnd()}}function nV(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"button",11),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(e);const r=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(r.next())}),n.\u0275\u0275element(1,"scrm-image",12),n.\u0275\u0275elementEnd()}}function iV(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"button",13),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(e);const r=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(r.last())}),n.\u0275\u0275element(1,"scrm-image",14),n.\u0275\u0275elementEnd()}}const rV=function(i,a){return{"hide-pagination-count":i,"centre-pagination":a}};function oV(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",1),n.\u0275\u0275template(1,eV,2,0,"button",2),n.\u0275\u0275template(2,tV,2,0,"button",3),n.\u0275\u0275elementStart(3,"span",4),n.\u0275\u0275text(4),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(5,nV,2,0,"button",5),n.\u0275\u0275template(6,iV,2,0,"button",6),n.\u0275\u0275elementEnd()),2&i){const e=a.ngIf,t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.allowPagination),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.allowPagination),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction2(9,rV,t.displayResponsiveTable,!t.allowPagination)),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate4(" (",e.pageCount.pageFirst," - ",e.pageCount.pageLast," ",e.appStrings.LBL_LIST_OF||""," ",e.pageCount.total,") "),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.allowPagination),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.allowPagination)}}let wd=(()=>{class i{languageStore;allowPagination=!0;state;displayResponsiveTable;appStrings$;vm$=null;constructor(e){this.languageStore=e,this.appStrings$=this.languageStore?.appStrings$??(0,S.of)({})}ngOnInit(){const e=this.state.getPaginationCount();this.vm$=this.appStrings$.pipe((0,S.combineLatestWith)(e),(0,v.map)(([t,r])=>({appStrings:t,pageCount:r})))}first(){this.state.changePage(M.PageSelection.FIRST)}previous(){this.state.changePage(M.PageSelection.PREVIOUS)}next(){this.state.changePage(M.PageSelection.NEXT)}last(){this.state.changePage(M.PageSelection.LAST)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(Oe))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-pagination"]],inputs:{allowPagination:"allowPagination",state:"state"},decls:2,vars:3,consts:[["class","bulk-action float-right",4,"ngIf"],[1,"bulk-action","float-right"],["class","pagination-button pagination-first","aria-label","Navigate to first page",3,"click",4,"ngIf"],["class","pagination-button pagination-previous","aria-label","Previous page",3,"click",4,"ngIf"],[1,"pagination-count",3,"ngClass"],["class","pagination-button pagination-next","aria-label","Navigate to last page",3,"click",4,"ngIf"],["class","pagination-button pagination-last","aria-label","Next page",3,"click",4,"ngIf"],["aria-label","Navigate to first page",1,"pagination-button","pagination-first",3,"click"],["image","paginate_first",1,"sicon-2x","pagination-icons"],["aria-label","Previous page",1,"pagination-button","pagination-previous",3,"click"],["image","paginate_previous",1,"sicon-2x","pagination-icons"],["aria-label","Navigate to last page",1,"pagination-button","pagination-next",3,"click"],["image","paginate_next",1,"sicon-2x","pagination-icons"],["aria-label","Next page",1,"pagination-button","pagination-last",3,"click"],["image","paginate_last",1,"sicon-2x","pagination-icons"]],template:function(t,r){1&t&&(n.\u0275\u0275template(0,oV,7,12,"div",0),n.\u0275\u0275pipe(1,"async")),2&t&&n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(1,1,r.vm$))},dependencies:[F.NgClass,F.NgIf,mn,F.AsyncPipe],encapsulation:2})}return i})(),xd=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,fn]})}return i})();class uM extends M.ActionHandler{shouldDisplay(a){return!0}}let dM=(()=>{class i extends uM{key="displayType";modes=["edit","detail","list","create","massupdate","filter"];constructor(){super()}run(e,t){const r=e.record;if(!r||!e.field)return!0;const s=t.params&&t.params.activeOnFields||{},c=Object.keys(s),l=t.params&&t.params.activeOnAttributes||{},u=Object.keys(l);return!c.length&&!u.length||this.isActive(c,r,s,u,l)}isActive(e,t,r,o,s){let c=!0;return(0,ne.isEmpty)(r)||(c=this.areFieldsActive(e,t,r)),(0,ne.isEmpty)(s)||(c=c&&this.areAttributesActive(o,t,s)),c}areAttributesActive(e,t,r){return e.every(o=>{const c=t.fields&&t.fields[o]||null,l=r[o]&&Object.keys(r[o]);if(c&&l&&l.length)return l.some(u=>{const d=r[o][u],f=c.attributes&&c.attributes[u];if(d&&d.length&&f)return this.isValueActive(f,d)})})}areFieldsActive(e,t,r){return e.every(o=>{const c=t.fields&&t.fields[o]||null,l=r[o];return!(c&&l&&l.length)||this.isValueActive(c,l)})}isValueActive(e,t){let r=!1;return e.valueList&&e.valueList.length?(e.valueList.some(o=>t.some(s=>{if(s===o)return r=!0,!0})),r):((0,M.isVoid)(e.value)||t.some(o=>{o===e.value&&(r=!0)}),r)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),$c=(()=>{class i extends si{constructor(e){super(),e.modes.forEach(t=>this.actions[t][e.key]=e)}runLogic(e,t,r,o,s){let c=!0;const l=Object.values(r.meta.displayLogic).filter(m=>{const h=m.modes??[];return!(!h.length||!h.includes(s))});if(!l||!l.length)return c;let u=r.meta.display??"show",d="hide";"hide"===u&&(d="show");const f={panel:r,record:o,field:t,module:o.module};l.some(m=>{const h=this.buildActionData(m,f);return this.actions[s][m.key].run(h,m)})&&(u=d),c="show"===u,r.displayState.next(c)}buildActionData(e,t){return{field:t.field,record:t&&t.record||null,panel:t.panel||null}}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(dM))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function aV(i,a){1&i&&n.\u0275\u0275projection(0)}function sV(i,a){1&i&&n.\u0275\u0275projection(0,1)}const cV=[[["","popup-content",""]],[["","popup-title",""]]],lV=["[popup-content]","[popup-title]"];let fM=(()=>{class i{icon;klass="line-action-item line-action float-right";buttonConfig=(0,n.signal)({});constructor(){}ngOnInit(){this.buttonConfig.update(()=>this.getButtonConfig())}getButtonConfig(){return{icon:this.icon,klass:this.klass}}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-popup-button"]],inputs:{icon:"icon",klass:"klass"},ngContentSelectors:lV,decls:5,vars:6,consts:[["popContent",""],["popTitle",""],[3,"config","autoClose","ngbPopover","popoverTitle","popoverClass","placement"]],template:function(t,r){if(1&t&&(n.\u0275\u0275projectionDef(cV),n.\u0275\u0275template(0,aV,1,0,"ng-template",null,0,n.\u0275\u0275templateRefExtractor),n.\u0275\u0275template(2,sV,1,0,"ng-template",null,1,n.\u0275\u0275templateRefExtractor),n.\u0275\u0275element(4,"scrm-button",2)),2&t){const o=n.\u0275\u0275reference(1),s=n.\u0275\u0275reference(3);n.\u0275\u0275advance(4),n.\u0275\u0275property("config",r.buttonConfig())("autoClose","outside")("ngbPopover",o)("popoverTitle",s)("popoverClass","popover-wrapper")("placement","right")}},dependencies:[Nn,de.NgbPopover],encapsulation:2})}return i})(),pM=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Xt,de.NgbPopoverModule]})}return i})();function uV(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",4)(1,"div",5),n.\u0275\u0275element(2,"scrm-label",6),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(3,"div",7),n.\u0275\u0275element(4,"scrm-field",8),n.\u0275\u0275elementEnd()()),2&i){const e=a.$implicit,t=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(2),n.\u0275\u0275property("labelKey",e.label)("module",t.record.module),n.\u0275\u0275advance(2),n.\u0275\u0275property("mode","list")("field",t.getField(e,t.record))("type",e.type)("record",t.record)}}function dV(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",2),n.\u0275\u0275template(1,uV,5,6,"div",3),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",e.columns)}}let mM=(()=>{class i{fieldManager;record;columns;constructor(e){this.fieldManager=e}getField(e,t){return e&&t?this.fieldManager.addField(t,e):null}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(ei))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-record-details-popup-button"]],inputs:{record:"record",columns:"columns"},decls:2,vars:2,consts:[[3,"icon"],["popup-content","","class","container container-popover scroll-thin",4,"ngIf"],["popup-content","",1,"container","container-popover","scroll-thin"],["class","row py-1",4,"ngFor","ngForOf"],[1,"row","py-1"],[1,"col","font-weight-bold","text-muted"],[3,"labelKey","module"],[1,"col"],[3,"mode","field","type","record"]],template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"scrm-popup-button",0),n.\u0275\u0275template(1,dV,2,1,"div",1),n.\u0275\u0275elementEnd()),2&t&&(n.\u0275\u0275property("icon","dots-vertical"),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.columns))},dependencies:[F.NgForOf,F.NgIf,fM,Ki,Ot],encapsulation:2,changeDetection:0})}return i})(),gM=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,pM,Pn,Nt]})}return i})(),hM=(()=>{class i{transform(e){return(0,S.of)(e)}static \u0275fac=function(t){return new(t||i)};static \u0275pipe=n.\u0275\u0275definePipe({name:"toObservable",type:i,pure:!0})}return i})();function fV(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",5)(1,"div",6)(2,"scrm-panel",7),n.\u0275\u0275pipe(3,"toObservable"),n.\u0275\u0275elementStart(4,"div",8),n.\u0275\u0275element(5,"scrm-field-layout",9),n.\u0275\u0275elementEnd()()()()),2&i){const e=a.$implicit,t=n.\u0275\u0275nextContext(3);n.\u0275\u0275advance(2),n.\u0275\u0275property("title",e.label)("isCollapsed$",n.\u0275\u0275pipeBind1(3,6,e.isCollapsed)),n.\u0275\u0275advance(2),n.\u0275\u0275classMapInterpolate1("panel-",e.key,""),n.\u0275\u0275advance(1),n.\u0275\u0275property("dataSource",t.getLayoutDataSource(e))}}function pV(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",3),n.\u0275\u0275template(1,fV,6,8,"div",4),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",e.panels)}}function mV(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div"),n.\u0275\u0275element(1,"scrm-field-layout",9),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext(3).$implicit,t=n.\u0275\u0275nextContext(3);n.\u0275\u0275classMapInterpolate1("tab-",e.key,""),n.\u0275\u0275advance(1),n.\u0275\u0275property("dataSource",t.getLayoutDataSource(e))}}function gV(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"li",16)(1,"a",17),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(3,mV,2,4,"ng-template",18),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext(2),r=e.$implicit;n.\u0275\u0275property("ngbNavItem",e.index+1),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(r.label)}}function hV(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,gV,4,2,"li",15),n.\u0275\u0275elementContainerEnd()),2&i){const e=a.ngIf;n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!!e)}}function vV(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,hV,2,1,"ng-container",0),n.\u0275\u0275pipe(2,"async"),n.\u0275\u0275elementContainerEnd()),2&i){const e=a.$implicit;n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(2,1,e.display$))}}function _V(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",6)(1,"scrm-panel",7),n.\u0275\u0275pipe(2,"toObservable"),n.\u0275\u0275elementStart(3,"div",8),n.\u0275\u0275element(4,"scrm-field-layout",9),n.\u0275\u0275elementEnd()()()),2&i){const e=n.\u0275\u0275nextContext(3).$implicit,t=n.\u0275\u0275nextContext(5);n.\u0275\u0275advance(1),n.\u0275\u0275property("title",e.label)("isCollapsed$",n.\u0275\u0275pipeBind1(2,6,e.isCollapsed)),n.\u0275\u0275advance(2),n.\u0275\u0275classMapInterpolate1("panel-",e.key,""),n.\u0275\u0275advance(1),n.\u0275\u0275property("dataSource",t.getLayoutDataSource(e))}}function yV(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",20),n.\u0275\u0275template(1,_V,5,8,"div",21),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext(3).index,t=n.\u0275\u0275nextContext(4);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e==t.active-1)}}function bV(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,yV,2,1,"div",19),n.\u0275\u0275elementContainerEnd()),2&i){const e=a.ngIf;n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!!e)}}function CV(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div"),n.\u0275\u0275template(1,bV,2,1,"ng-container",0),n.\u0275\u0275pipe(2,"async"),n.\u0275\u0275elementEnd()),2&i){const e=a.$implicit;n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(2,1,e.display$))}}function MV(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,CV,3,3,"div",13),n.\u0275\u0275elementContainerEnd()),2&i){const e=a.$implicit;n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",e.subPanels)}}function SV(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,MV,2,1,"ng-container",13),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(3);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",e.panels)}}function DV(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"div",10)(1,"ul",11,12),n.\u0275\u0275listener("activeIdChange",function(r){n.\u0275\u0275restoreView(e);const o=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(o.active=r)}),n.\u0275\u0275template(3,vV,3,3,"ng-container",13),n.\u0275\u0275elementEnd(),n.\u0275\u0275element(4,"div",14),n.\u0275\u0275template(5,SV,2,1,"ng-container",0),n.\u0275\u0275elementEnd()}if(2&i){const e=n.\u0275\u0275reference(2),t=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("activeId",t.active),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngForOf",t.panels),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngbNavOutlet",e),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.panelsInPrevTab&&t.panelsInPrevTab.length)}}function wV(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,pV,2,1,"div",1),n.\u0275\u0275template(2,DV,6,4,"div",2),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.config&&"panels"===e.config.layout),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.config&&"tabs"===e.config.layout)}}let Ed=(()=>{class i{language;dataSource;config={};panels;panelsInPrevTab=[];active=1;record;fields;subs=[];constructor(e){this.language=e}ngOnInit(){this.dataSource?(this.subs.push(this.dataSource.getDisplayConfig().subscribe(e=>{this.config={...e}})),this.subs.push(this.dataSource.getPanels().subscribe(e=>{e?(this.panels=[...e],"panels"===this?.config?.layout?this.updatePanelCollapseState():this.updatePanelsInTabs()):this.panels=[]})),this.subs.push(this.dataSource.getRecord().subscribe(e=>{this.record={...e},this.fields=e.fields}))):this.subs.push(S.EMPTY.subscribe())}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}updatePanelsInTabs(){let e=[],t="";const r=this.buildPanelMap(),o=this.mapTabDefs();Object.keys(o).forEach(s=>{if((0,M.isTrue)(o[s].newTab))e=[...e,r[s]],t=s;else{const l=o[t],u=r[t];this.panelsInPrevTab.includes(u)||this.panelsInPrevTab.push(u);const d=r[s];(0,M.isTrue)(l?.newTab)&&this.panelsInPrevTab.length>0&&this.addToPrevTab(d)}}),this.panels=e}addToPrevTab(e){const t=this.panelsInPrevTab.length-1;(this.panelsInPrevTab[t]?.subPanels??null)||(this.panelsInPrevTab[t].subPanels=[]),this.panelsInPrevTab[t].subPanels.push(e)}updatePanelCollapseState(){const e=this.buildPanelMap();this.panels.forEach(t=>{const r=t.key.toUpperCase();e[r]&&(t.isCollapsed=e[r].isCollapsed)})}buildPanelMap(){const e={};return(this.panels||[]).forEach(t=>{let r=!1;t.label=t?.label?.toUpperCase()??"";const o=t?.key?.toUpperCase()??"";"collapsed"===t?.meta?.panelDefault&&(r=!0),t.isCollapsed=r,e[o]=t}),e}mapTabDefs(){const e={};return Object.keys(this?.config?.tabDefs??{}).forEach(t=>{e[t.toUpperCase()]=this?.config?.tabDefs[t]}),e}getLayoutDataSource(e){return{inlineEdit:!0,getConfig:()=>this.dataSource.getDisplayConfig().pipe((0,v.map)(t=>({mode:t.mode,maxColumns:t.maxColumns}))),getLayout:()=>(0,S.of)(e).pipe((0,v.shareReplay)(1)),getFields:()=>this.dataSource.getRecord().pipe((0,v.map)(t=>t.fields)),getRecord:()=>this.dataSource.getRecord(),getEditAction:()=>this.dataSource.getEditAction()}}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(Oe))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-record-content"]],inputs:{dataSource:"dataSource"},decls:1,vars:1,consts:[[4,"ngIf"],["class","record-content panel-layout container-fluid pl-0 pr-0",4,"ngIf"],["class","record-content tabs-layout container-fluid pl-0 pr-0",4,"ngIf"],[1,"record-content","panel-layout","container-fluid","pl-0","pr-0"],["class","row no-gutters mb-3",4,"ngFor","ngForOf"],[1,"row","no-gutters","mb-3"],[1,"col"],["mode","collapsible",3,"title","isCollapsed$"],["panel-body",""],[3,"dataSource"],[1,"record-content","tabs-layout","container-fluid","pl-0","pr-0"],["ngbNav","",1,"nav-tabs",3,"activeId","activeIdChange"],["nav","ngbNav"],[4,"ngFor","ngForOf"],[1,"p-2","pt-3","rounded-right","rounded-bottom",3,"ngbNavOutlet"],["class","tab",3,"ngbNavItem",4,"ngIf"],[1,"tab",3,"ngbNavItem"],["ngbNavLink","",1,"tab-link"],["ngbNavContent",""],["class","row no-gutters mt-3",4,"ngIf"],[1,"row","no-gutters","mt-3"],["class","col",4,"ngIf"]],template:function(t,r){1&t&&n.\u0275\u0275template(0,wV,3,2,"ng-container",0),2&t&&n.\u0275\u0275property("ngIf",r.dataSource)},dependencies:[F.NgForOf,F.NgIf,ua,de.NgbNavContent,de.NgbNav,de.NgbNavItem,de.NgbNavItemRole,de.NgbNavLink,de.NgbNavLinkBase,de.NgbNavOutlet,$1,F.AsyncPipe,hM],encapsulation:2})}return i})(),vM=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule]})}return i})(),Fd=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Pr,de.NgbModule,Yu,vM]})}return i})(),_M=(()=>{class i{constructor(){}ngOnInit(){}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-record-content-skeleton"]],decls:138,vars:0,consts:[[1,"record-content","tabs-layout","container-fluid","pl-0","pr-0","record-content-skeleton"],[1,"nav-tabs","nav"],[1,"tab","nav-item"],["href","",1,"tab-link","nav-link","active","pl-5","pr-5","h-100","box-loading"],["href","",1,"tab-link","nav-link","pl-5","pr-5","h-100","box-loading"],[1,"p-2","pt-3","rounded-right","rounded-bottom","tab-content"],[1,"tab-pane","fade","active","show"],[1,""],[1,"detail","field-layout"],[1,"form-row","align-items-center","pt-1","pb-1"],[1,"field-column-bordered","col","form-group","m-0","pl-3","pb-2","pr-3"],[1,"label-container"],[1,"col-form-label-sm","mb-0","pb-3","pl-5","pr-5","h-100","rounded","box-loading"],[1,"d-flex"],[1,"flex-grow-1","text-break","rounded","box-loading","skeleton-field-content"],["type","button",1,"record-action-button"],["image","pencil"],[1,"field-separation","mt-2"],[1,"col","form-group","m-0","pl-3","pb-2","pr-3"]],template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"div",0)(1,"ul",1)(2,"li",2),n.\u0275\u0275element(3,"a",3),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(4,"li",2),n.\u0275\u0275element(5,"a",4),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(6,"li",2),n.\u0275\u0275element(7,"a",4),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(8,"div",5)(9,"div",6)(10,"div",7)(11,"form",8)(12,"div",9)(13,"div",10)(14,"div",11)(15,"strong"),n.\u0275\u0275element(16,"label",12),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(17,"div",13),n.\u0275\u0275element(18,"div",14),n.\u0275\u0275elementStart(19,"div")(20,"button",15),n.\u0275\u0275element(21,"scrm-image",16),n.\u0275\u0275elementEnd()()(),n.\u0275\u0275element(22,"div",17),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(23,"div",18)(24,"div",11)(25,"strong"),n.\u0275\u0275element(26,"label",12),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(27,"div",13),n.\u0275\u0275element(28,"div",14),n.\u0275\u0275elementStart(29,"div")(30,"button",15),n.\u0275\u0275element(31,"scrm-image",16),n.\u0275\u0275elementEnd()()(),n.\u0275\u0275element(32,"div",17),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(33,"div",9)(34,"div",10)(35,"div",11)(36,"strong"),n.\u0275\u0275element(37,"label",12),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(38,"div",13),n.\u0275\u0275element(39,"div",14),n.\u0275\u0275elementStart(40,"div")(41,"button",15),n.\u0275\u0275element(42,"scrm-image",16),n.\u0275\u0275elementEnd()()(),n.\u0275\u0275element(43,"div",17),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(44,"div",18)(45,"div",11)(46,"strong"),n.\u0275\u0275element(47,"label",12),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(48,"div",13),n.\u0275\u0275element(49,"div",14),n.\u0275\u0275elementStart(50,"div")(51,"button",15),n.\u0275\u0275element(52,"scrm-image",16),n.\u0275\u0275elementEnd()()(),n.\u0275\u0275element(53,"div",17),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(54,"div",9)(55,"div",10)(56,"div",11)(57,"strong"),n.\u0275\u0275element(58,"label",12),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(59,"div",13),n.\u0275\u0275element(60,"div",14),n.\u0275\u0275elementStart(61,"div")(62,"button",15),n.\u0275\u0275element(63,"scrm-image",16),n.\u0275\u0275elementEnd()()(),n.\u0275\u0275element(64,"div",17),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(65,"div",18)(66,"div",11)(67,"strong"),n.\u0275\u0275element(68,"label",12),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(69,"div",13),n.\u0275\u0275element(70,"div",14),n.\u0275\u0275elementStart(71,"div")(72,"button",15),n.\u0275\u0275element(73,"scrm-image",16),n.\u0275\u0275elementEnd()()(),n.\u0275\u0275element(74,"div",17),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(75,"div",9)(76,"div",10)(77,"div",11)(78,"strong"),n.\u0275\u0275element(79,"label",12),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(80,"div",13),n.\u0275\u0275element(81,"div",14),n.\u0275\u0275elementStart(82,"div")(83,"button",15),n.\u0275\u0275element(84,"scrm-image",16),n.\u0275\u0275elementEnd()()(),n.\u0275\u0275element(85,"div",17),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(86,"div",18)(87,"div",11)(88,"strong"),n.\u0275\u0275element(89,"label",12),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(90,"div",13),n.\u0275\u0275element(91,"div",14),n.\u0275\u0275elementStart(92,"div")(93,"button",15),n.\u0275\u0275element(94,"scrm-image",16),n.\u0275\u0275elementEnd()()(),n.\u0275\u0275element(95,"div",17),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(96,"div",9)(97,"div",10)(98,"div",11)(99,"strong"),n.\u0275\u0275element(100,"label",12),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(101,"div",13),n.\u0275\u0275element(102,"div",14),n.\u0275\u0275elementStart(103,"div")(104,"button",15),n.\u0275\u0275element(105,"scrm-image",16),n.\u0275\u0275elementEnd()()(),n.\u0275\u0275element(106,"div",17),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(107,"div",18)(108,"div",11)(109,"strong"),n.\u0275\u0275element(110,"label",12),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(111,"div",13),n.\u0275\u0275element(112,"div",14),n.\u0275\u0275elementStart(113,"div")(114,"button",15),n.\u0275\u0275element(115,"scrm-image",16),n.\u0275\u0275elementEnd()()(),n.\u0275\u0275element(116,"div",17),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(117,"div",9)(118,"div",10)(119,"div",11)(120,"strong"),n.\u0275\u0275element(121,"label",12),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(122,"div",13),n.\u0275\u0275element(123,"div",14),n.\u0275\u0275elementStart(124,"div")(125,"button",15),n.\u0275\u0275element(126,"scrm-image",16),n.\u0275\u0275elementEnd()()(),n.\u0275\u0275element(127,"div",17),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(128,"div",18)(129,"div",11)(130,"strong"),n.\u0275\u0275element(131,"label",12),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(132,"div",13),n.\u0275\u0275element(133,"div",14),n.\u0275\u0275elementStart(134,"div")(135,"button",15),n.\u0275\u0275element(136,"scrm-image",16),n.\u0275\u0275elementEnd()()(),n.\u0275\u0275element(137,"div",17),n.\u0275\u0275elementEnd()()()()()()())},dependencies:[mn],encapsulation:2})}return i})(),yM=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,fn]})}return i})();function xV(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"a",1),n.\u0275\u0275listener("click",function(){const o=n.\u0275\u0275restoreView(e).ngIf,s=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(s.changeSorting(o))}),n.\u0275\u0275element(2,"scrm-image",2),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()}if(2&i){const e=a.ngIf,t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(2),n.\u0275\u0275property("image",t.getStatusIcon(e))}}let bM=(()=>{class i{state;direction$;statusIcons={NONE:"sort",ASC:"sort_ascend",DESC:"sort_descend"};nextDirection={NONE:M.SortDirection.DESC,ASC:M.SortDirection.NONE,DESC:M.SortDirection.ASC};constructor(){}ngOnInit(){this.direction$=this.state.getSortDirection()}getStatusIcon(e){return this.statusIcons[e]}changeSorting(e){this.state.changeSortDirection(this.nextDirection[e])}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-sort-button"]],inputs:{state:"state"},decls:2,vars:3,consts:[[4,"ngIf"],[1,"btn","btn-sm","p-0","sort-button",3,"click"],[1,"sort-icon","sicon",3,"image"]],template:function(t,r){1&t&&(n.\u0275\u0275template(0,xV,3,1,"ng-container",0),n.\u0275\u0275pipe(1,"async")),2&t&&n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(1,1,r.direction$))},dependencies:[F.NgIf,mn,F.AsyncPipe],encapsulation:2})}return i})(),CM=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,fn]})}return i})(),Id=(()=>{class i{appStateStore;languageStore;navigationStore;moduleNavigation;metadataStore;appState$;module$;language$;navigation$;appData$;metadata$;appData;metadata;constructor(e,t,r,o,s){this.appStateStore=e,this.languageStore=t,this.navigationStore=r,this.moduleNavigation=o,this.metadataStore=s,this.appState$=this.appStateStore.vm$,this.language$=this.languageStore.vm$,this.navigation$=this.navigationStore.vm$,this.module$=this.appState$.pipe((0,S.combineLatestWith)(this.navigation$),(0,v.map)(([c,l])=>this.moduleNavigation.getModuleInfo(c.module,l))),this.appData$=this.appState$.pipe((0,S.combineLatestWith)(this.module$,this.language$,this.navigation$),(0,v.map)(([c,l,u,d])=>(this.appData={appState:c,module:l,language:u,navigation:d},this.appData))),this.metadata$=s.metadata$.pipe((0,v.tap)(c=>{this.metadata=c}))}clear(){}clearAuthBased(){this.clear()}get appState(){return this.appData.appState?this.appData.appState:{}}get module(){return this.appData.module}get language(){return this.appData.language?this.appData.language:{appStrings:{},appListStrings:{},modStrings:{},languageKey:""}}get appStrings(){return this.language.appStrings}get appListStrings(){return this.language.appListStrings}get modStrings(){return this.language.modStrings}get navigation(){return this.appData.navigation}get searchMeta(){return this.metadata.search?this.metadata.search:{layout:{basic:{},advanced:{}}}}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Gt),n.\u0275\u0275inject(Oe),n.\u0275\u0275inject(Ci),n.\u0275\u0275inject(wn),n.\u0275\u0275inject(mt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),Ad=(()=>{class i extends _c{apollo;constructor(e){super(e),this.apollo=e}get(e,t,r,o){return super.get(e,t,r,o)}mapRecord(e){if(!e)return e;e.key=e.id||e.attributes&&e.attributes.id||"";const t=e.attributes&&e.attributes&&e.attributes.contents||null;if(t){const r={...e};return r.criteria=t,r}return e}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(fe.Apollo))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),MM=(()=>{class i extends Ou{listGQL;configs;preferences;language;message;auth;moduleNameMapper;moduleName="saved-search";filterFields={module:"search_module",user:"assigned_user_id"};constructor(e,t,r,o,s,c,l){super(e,t,r,o,s),this.listGQL=e,this.configs=t,this.preferences=r,this.language=o,this.message=s,this.auth=c,this.moduleNameMapper=l}init(e){if(!this.configs||!this.preferences)return(0,S.of)({records:[],pagination:null,criteria:null});const t=super.init(this.moduleName,!1);return this.initCriteria(e),t}load(e=!0){return super.load(e)}getFilters(){return this.records}addFilter(e){let t=!0;const o=[];this.records.forEach(s=>{if(s.id===e.id)return o.push(e),void(t=!1);o.push(s)}),t&&o.push(e),this.updateState({...this.internalState,records:o})}removeFilter(e){if(!e||!e.id)return;const r=[];this.records.forEach(o=>{o.id!==e.id&&r.push(o)}),this.updateState({...this.internalState,records:r})}initCriteria(e){const t=this.criteria;t.filters[this.filterFields.module]={field:this.filterFields.module,operator:"=",values:[this.moduleNameMapper.toLegacy(e)]},t.filters[this.filterFields.user]={field:this.filterFields.user,operator:"=",values:[this.auth.getCurrentUser().id]},this.updateSearchCriteria(t,!1)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Ad),n.\u0275\u0275inject(dt),n.\u0275\u0275inject(Vt),n.\u0275\u0275inject(Oe),n.\u0275\u0275inject(ct),n.\u0275\u0275inject(Hn),n.\u0275\u0275inject(_n))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),Uc=(()=>{class i{listGQL;configs;preferences;language;message;auth;moduleNameMapper;constructor(e,t,r,o,s,c,l){this.listGQL=e,this.configs=t,this.preferences=r,this.language=o,this.message=s,this.auth=c,this.moduleNameMapper=l}create(){return new MM(this.listGQL,this.configs,this.preferences,this.language,this.message,this.auth,this.moduleNameMapper)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Ad),n.\u0275\u0275inject(dt),n.\u0275\u0275inject(Vt),n.\u0275\u0275inject(Oe),n.\u0275\u0275inject(ct),n.\u0275\u0275inject(Hn),n.\u0275\u0275inject(_n))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),fa=(()=>{class i{listStoreFactory;languageStore;statisticsStoreFactory;filterListStoreFactory;meta;preferences;show=!1;parentModule;parentId;parentRecord$;parentRecord;recordList;statistics;metadata$;listMetadata$;searchMetadata$;columns$;metadata;loading$;filterList;criteria$;showFilter=!1;filterApplied=!1;preferenceKey=null;metadataState;subs=[];constructor(e,t,r,o,s,c){this.listStoreFactory=e,this.languageStore=t,this.statisticsStoreFactory=r,this.filterListStoreFactory=o,this.meta=s,this.preferences=c,this.recordList=e.create(),this.filterList=this.filterListStoreFactory.create(),this.criteria$=this.recordList.criteria$,this.statistics={},this.metadataState=new S.BehaviorSubject({}),this.metadata$=this.metadataState.asObservable(),this.loading$=this.recordList.loading$}getTitle(){let e=this.languageStore.getFieldLabel(this.metadata.title_key,this.parentModule);if(!e){const t=this.languageStore.getAppListString("moduleList");e=t&&t[this.metadata.title_key]||""}return e}getIcon(){return this.metadata.icon}clear(){this.metadataState.unsubscribe(),this.metadataState=null,this.recordList.clear(),this.recordList=null,this.subs.forEach(e=>e.unsubscribe())}clearAuthBased(){this.recordList.clearAuthBased()}searchFilter(){this.filterApplied=!0,this.showFilter=!1}init(e,t,r,o=null){this.parentModule=e,this.parentId=t,this.metadata=r,this.metadataState.next(this.metadata);const s=this.meta.getMetadata(r.module).pipe((0,v.tap)(()=>{this.recordList.load().pipe((0,v.take)(1)).subscribe()}));this.searchMetadata$=s.pipe((0,v.map)(l=>l.search));const c=this.initSearchCriteria(this.parentModule,this.parentId,r);this.recordList.init(r.module,!1,"list_max_entries_per_subpanel",c),this.initStatistics(r,e,t),o&&(this.parentRecord$=o,this.parentRecord$.subscribe(l=>this.parentRecord=l))}setFilters(e,t=!0){this.recordList.setFilters(e,t,null)}isAnyFilterApplied(){return this.hasActiveFilter()||!this.areAllCurrentCriteriaFilterEmpty()}hasActiveFilter(){const e=this.recordList.criteria;if(e)return!1;const t=Object.keys(e)??[];if(!t||!t.length)return!1;if(t.length>1)return!0;const r=e[t[0]];return r.key&&""!==r.key&&"default"!==r.key}areAllCurrentCriteriaFilterEmpty(){return Object.keys(this.getFilters()??{}).every(e=>""===this.getFilters()[e].operator)}getFilters(){return this.recordList?.criteria?.filters??{}}load(e=!0){return this.recordList.load(e)}getStatistic(e){return this.statistics[e]?this.statistics[e]:null}resetFilters(e=!0){this.recordList.resetFilters(e)}clearFilter(){this.resetFilters(),this.filterApplied=!1,this.showFilter=!1}initSearchCriteria(e,t,r){const o=r?.sort_order??"desc",s=r?.sort_by??"";return{key:"default",module:"saved-search",attributes:{contents:""},criteria:{name:"default",filters:{},preset:{type:"subpanel",params:{subpanel:r?.name,parentModule:e,parentId:t}},sortOrder:o,orderBy:s}}}loadStatistics(e,t=!0){return this.statistics[e]?this.statistics[e].load(t):null}loadAllStatistics(e=!0){if(!this.statistics||!Object.keys(this.statistics).length)return null;const t=[];return Object.keys(this.statistics).forEach(r=>{this.statistics[r]&&t.push(this.loadStatistics(r,e))}),(0,S.forkJoin)(t)}shouldBatchStatistic(){const e=this.metadata||{};return!(e.insightWidget&&e.insightWidget.batch&&!1===e.insightWidget.batch)}setStatisticsLoading(e,t){this.statistics[e]&&this.statistics[e].setLoading(t)}setAllStatisticsLoading(e){!this.statistics||!Object.keys(this.statistics).length||Object.keys(this.statistics).forEach(t=>{this.statistics[t]&&this.setStatisticsLoading(t,e)})}setStatistics(e,t,r=!1){this.statistics[e]&&this.statistics[e].setStatistic(e,t,r)}getStatisticQuery(e){return this.statistics[e].getQuery()}getAllStatisticQuery(){if(!this.statistics||!Object.keys(this.statistics).length)return{};const e={};return Object.keys(this.statistics).forEach(t=>{this.statistics[t]&&(e[t]=this.getStatisticQuery(t))}),e}getWidgetLayout(){const e=this.metadata;if(!(e&&e.insightWidget&&e.insightWidget.options&&e.insightWidget.options.insightWidget))return{rows:[]};const t=(0,M.deepClone)(e.insightWidget.options.insightWidget);return(!t.rows||!t.rows.length)&&(t.rows={}),t}toggleFilter(){return this.showFilter=!this.showFilter}initStatistics(e,t,r){this.getWidgetLayout().rows.forEach(s=>{!s.cols||!s.cols.length||s.cols.forEach(c=>{!c.statistic||"string"!=typeof c.statistic||(this.initStatistic(c.statistic,e,t,r),c.store=this.statistics[c.statistic])})})}initStatistic(e,t,r,o){this.statistics[e]=this.statisticsStoreFactory.create(),this.statistics[e].init(t.module,{key:e,context:{module:r,id:o},params:{subpanel:t.name}},!1)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Ni),n.\u0275\u0275inject(Oe),n.\u0275\u0275inject(Wa),n.\u0275\u0275inject(Uc),n.\u0275\u0275inject(mt),n.\u0275\u0275inject(Vt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),Td=(()=>{class i{listStoreFactory;languageStore;statisticsStoreFactory;filterListStoreFactory;meta;preferences;constructor(e,t,r,o,s,c){this.listStoreFactory=e,this.languageStore=t,this.statisticsStoreFactory=r,this.filterListStoreFactory=o,this.meta=s,this.preferences=c}create(){return new fa(this.listStoreFactory,this.languageStore,this.statisticsStoreFactory,this.filterListStoreFactory,this.meta,this.preferences)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Ni),n.\u0275\u0275inject(Oe),n.\u0275\u0275inject(Wa),n.\u0275\u0275inject(Uc),n.\u0275\u0275inject(mt),n.\u0275\u0275inject(Vt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Nd=(()=>{class i{fetchGQL;constructor(e){this.fetchGQL=e}fetch(e,t){return this.fetchGQL.fetch(e,t)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Hi))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const SM={module:"",recordID:"",loading:!1,widgets:!1,showSidebarWidgets:!1,showTopWidget:!1,showSubpanels:!1,mode:"detail",params:{returnModule:"",returnId:"",returnAction:""}};let li=(()=>{class i extends Id{recordFetchGQL;recordSaveGQL;appStateStore;languageStore;navigationStore;moduleNavigation;metadataStore;localStorage;message;subpanelFactory;recordManager;statisticsBatch;recordStoreFactory;preferences;panelLogicManager;record$;stagingRecord$;loading$;widgets$;showSidebarWidgets$;showTopWidget$;showSubpanels$;mode$;subpanels$;viewContext$;subpanelReload$;panels=[];panels$;vm$;vm;data;recordStore;cache$=null;internalState=(0,M.deepClone)(SM);store=new S.BehaviorSubject(this.internalState);state$=this.store.asObservable();subpanels;subpanelsState;subpanelReloadSubject=new S.BehaviorSubject({});subpanelReloadSub=[];subs=[];fieldSubs=[];panelsSubject=new S.BehaviorSubject(this.panels);constructor(e,t,r,o,s,c,l,u,d,f,p,m,h,g,b){super(r,o,s,c,l),this.recordFetchGQL=e,this.recordSaveGQL=t,this.appStateStore=r,this.languageStore=o,this.navigationStore=s,this.moduleNavigation=c,this.metadataStore=l,this.localStorage=u,this.message=d,this.subpanelFactory=f,this.recordManager=p,this.statisticsBatch=m,this.recordStoreFactory=h,this.preferences=g,this.panelLogicManager=b,this.panels$=this.panelsSubject.asObservable(),this.recordStore=h.create(this.getViewFieldsObservable()),this.record$=this.recordStore.state$.pipe((0,v.distinctUntilChanged)()),this.stagingRecord$=this.recordStore.staging$.pipe((0,v.distinctUntilChanged)()),this.loading$=this.state$.pipe((0,v.map)(D=>D.loading)),this.widgets$=this.state$.pipe((0,v.map)(D=>D.widgets)),this.showSidebarWidgets$=this.state$.pipe((0,v.map)(D=>D.showSidebarWidgets)),this.showTopWidget$=this.state$.pipe((0,v.map)(D=>D.showTopWidget)),this.showSubpanels$=this.state$.pipe((0,v.map)(D=>D.showSubpanels)),this.mode$=this.state$.pipe((0,v.map)(D=>D.mode)),this.subpanelReload$=this.subpanelReloadSubject.asObservable();const _=this.record$.pipe((0,S.combineLatestWith)(this.loading$),(0,v.map)(([D,y])=>(this.data={record:D,loading:y},this.data)));this.vm$=_.pipe((0,S.combineLatestWith)(this.appData$,this.metadata$),(0,v.map)(([D,y,w])=>(this.vm={data:D,appData:y,metadata:w},this.vm))),this.subpanelsState=new S.BehaviorSubject({}),this.subpanels$=this.subpanelsState.asObservable(),this.viewContext$=this.record$.pipe((0,v.map)(()=>this.getViewContext())),this.initPanels()}get widgets(){return this.internalState.widgets}set widgets(e){this.updateState({...this.internalState,widgets:e})}get showSidebarWidgets(){return this.internalState.showSidebarWidgets}set showSidebarWidgets(e){this.savePreference(this.getModuleName(),"show-sidebar-widgets",e),this.updateState({...this.internalState,showSidebarWidgets:e})}get showTopWidget(){return this.internalState.showTopWidget}set showTopWidget(e){this.updateState({...this.internalState,showTopWidget:e})}get showSubpanels(){return this.internalState.showTopWidget}set showSubpanels(e){this.updateState({...this.internalState,showSubpanels:e})}get params(){return this.internalState.params||{}}set params(e){this.updateState({...this.internalState,params:e})}getModuleName(){return this.internalState.module}getRecordId(){return this.internalState.recordID}getViewContext(){return{module:this.getModuleName(),id:this.getRecordId(),record:this.getBaseRecord()}}getSubpanels(){return this.subpanels}destroy(){this.clear()}init(e,t,r="detail",o={}){return this.internalState.module=e,this.internalState.recordID=t,this.setMode(r),this.initSubpanels(e,t),this.calculateShowWidgets(),this.load().pipe((0,v.tap)(()=>{this.showTopWidget=!0,this.loadSubpanelStatistics(e),this.parseParams(o)}))}clear(){this.cache$=null,this.clearSubpanels(),this.subpanelsState.unsubscribe(),this.updateState((0,M.deepClone)(SM)),this.subs=this.safeUnsubscription(this.subs),this.fieldSubs=this.safeUnsubscription(this.fieldSubs)}getBaseRecord(){return this.internalState?this.recordStore.getBaseRecord():null}getMode(){return this.internalState?this.internalState.mode:null}setMode(e){this.updateState({...this.internalState,mode:e})}save(){return this.appStateStore.updateLoading(`${this.internalState.module}-record-save`,!0),this.updateState({...this.internalState,loading:!0}),this.recordStore.save().pipe((0,v.catchError)(()=>(this.message.addDangerMessageByKey("LBL_ERROR_SAVING"),(0,S.of)({}))),(0,v.finalize)(()=>{this.setMode("detail"),this.appStateStore.updateLoading(`${this.internalState.module}-record-save`,!1),this.updateState({...this.internalState,loading:!1})}))}load(e=!0){return this.updateState({...this.internalState,loading:!0}),this.recordStore.retrieveRecord(this.internalState.module,this.internalState.recordID,e).pipe((0,v.tap)(t=>{this.updateState({...this.internalState,recordID:t.id,module:t.module,loading:!1})}))}getSummaryTemplate(){return(((this.metadata||{}).recordView||{}).summaryTemplates||{})[this.getMode()]||""}initValidators(e){!e||!Object.keys(e?.fields).length||Object.keys(e.fields).forEach(t=>{const r=e.fields[t];if(!r?.formControl)return;this.resetValidators(r);const s=r?.validators??[],c=r?.asyncValidators??[];r?.formControl&&s.length&&r.formControl.setValidators(s),r?.formControl&&c.length&&r.formControl.setAsyncValidators(c)})}resetValidators(e){e?.formControl&&(e.formControl.clearValidators(),e.formControl.clearAsyncValidators())}resetValidatorsForAllFields(e){!e||!e?.fields?.length||Object.keys(e.fields).forEach(t=>{const r=e.fields[t];r?.formControl&&this.resetValidators(r)})}parseParams(e={}){if(!e)return;const t={...this.internalState.params};Object.keys(e).forEach(r=>{(0,M.isVoid)(t[r])||(t[r]=e[r])}),this.params=e}loadSubpanelStatistics(e){const t=this.subpanelsState.value;if(!t)return;const r={};Object.keys(t).forEach(o=>{const s=t[o],c=s.statistics;if(!c||!Object.keys(c).length)return;if(!1===s.shouldBatchStatistic())return void s.loadAllStatistics().pipe((0,v.take)(1)).subscribe();const l=s.getAllStatisticQuery();Object.keys(l).forEach(u=>{const d=this.buildStatKey(o,u);r[d]=l[u]}),s.setAllStatisticsLoading(!0)}),this.statisticsBatch.fetch(e,r).pipe((0,v.take)(1)).subscribe(o=>{Object.keys(t).forEach(s=>{const c=t[s],l=c.getAllStatisticQuery();Object.keys(l).forEach(u=>{const d=this.buildStatKey(s,u),f=o[d];f&&c.setStatistics(u,f,!0)}),c.setAllStatisticsLoading(!1)})})}buildStatKey(e,t){return(e=e.replace(/_/g,"-"))+"-"+t.replace(/_/g,"-")}updateState(e){this.store.next(this.internalState=e)}initSubpanels(e,t){this.showSubpanels=!0,this.metadataStore.subPanelMetadata$.subscribe(r=>{this.clearSubpanels(),Object.keys(r).forEach(o=>{this.subpanels[o]=this.subpanelFactory.create(),this.subpanels[o].init(e,t,r[o],this.record$)}),this.subpanelsState.next(this.subpanels),Object.keys(this.subpanels).forEach(o=>{this.subpanelReloadSub.push(this.subpanels[o].recordList.records$.pipe((0,v.tap)(()=>{const c={};c[o]=!0,this.subpanelReloadSubject.next(c)})).subscribe())})})}initPanels(){const e=(0,S.combineLatest)([this.metadataStore.recordViewMetadata$,this.stagingRecord$,this.languageStore.vm$]).subscribe(([t,r,o])=>{const s=[],c=r&&r.module||"";return this.safeUnsubscription(this.fieldSubs),t.panels.forEach(l=>{const d={label:l.label?l.label.toUpperCase():this.languageStore.getFieldLabel(l.key.toUpperCase(),c,o),key:l.key,rows:[]},f=t.templateMeta.tabDefs[l.key.toUpperCase()]??null;f&&(d.meta=f),l.rows.forEach(p=>{const m={cols:[]};p.cols.forEach(h=>{m.cols.push({...h})}),d.rows.push(m)}),d.displayState=new S.BehaviorSubject(f?.display??!0),d.display$=d.displayState.asObservable(),s.push(d),!(0,ne.isEmpty)(r?.fields)&&!(0,ne.isEmpty)(f?.displayLogic)&&Object.values(f.displayLogic).forEach(p=>{(0,ne.isEmpty)(p?.params?.fieldDependencies)||p.params.fieldDependencies.forEach(m=>{const h=r.fields[m]||null;(0,ne.isEmpty)(h)||this.fieldSubs.push(h.valueChanges$.subscribe(()=>{this.panelLogicManager.runLogic(p.key,h,d,r,this.getMode())}))})})}),this.panelsSubject.next(this.panels=s),s});this.subs.push(e)}clearSubpanels(){this.subpanels&&Object.keys(this.subpanels).forEach(e=>{this.subpanels[e].clear()}),this.subpanelReloadSub.length&&(this.subpanelReloadSub.forEach(e=>e.unsubscribe()),this.subpanelReloadSub=[]),this.subpanels={}}calculateShowWidgets(){let e=!1;const r=this.getRecordViewMetadata().sidebarWidgets||[];r&&r.length>0&&(e=!0);const o=this.loadPreference(this.getModuleName(),"show-sidebar-widgets")??null;this.showSidebarWidgets=null!==o?o:e,this.widgets=e}getRecordViewMetadata(){return(this.metadataStore.get()||{}).recordView||{}}getVardefs(){return this.getRecordViewMetadata().vardefs||{}}getViewFieldsObservable(){return this.metadataStore.recordViewMetadata$.pipe((0,v.map)(e=>{const t={};return e.panels.forEach(r=>{r.rows.forEach(o=>{o.cols.forEach(s=>{t[s.name??s.fieldDefinition.name??""]=s})})}),Object.keys(e.vardefs).forEach(r=>{const o=e.vardefs[r]??null;!o||(0,ne.isEmpty)(o)||t[r]||"relate"!=o.type&&(t[r]={name:r,vardefBased:!0,label:o.vname??"",type:o.type??"",display:o.display??"",fieldDefinition:o,metadata:o.metadata??{},logic:o.logic??{}})}),Object.values(t)}))}getPreferenceKey(e){return"recordview-"+e}savePreference(e,t,r){this.preferences.setUi(e,this.getPreferenceKey(t),r)}loadPreference(e,t){return this.preferences.getUi(e,this.getPreferenceKey(t))}safeUnsubscription(e){return e.forEach(t=>{t.closed||t.unsubscribe()}),[]}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Rr),n.\u0275\u0275inject(jr),n.\u0275\u0275inject(Gt),n.\u0275\u0275inject(Oe),n.\u0275\u0275inject(Ci),n.\u0275\u0275inject(wn),n.\u0275\u0275inject(mt),n.\u0275\u0275inject(cr),n.\u0275\u0275inject(ct),n.\u0275\u0275inject(Td),n.\u0275\u0275inject(ci),n.\u0275\u0275inject(Nd),n.\u0275\u0275inject(kr),n.\u0275\u0275inject(Vt),n.\u0275\u0275inject($c))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})();function EV(i,a){1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"div",3)(2,"div",4),n.\u0275\u0275element(3,"div",5),n.\u0275\u0275elementStart(4,"div",6)(5,"div",7)(6,"div"),n.\u0275\u0275text(7,"Record Status Bar Component"),n.\u0275\u0275elementEnd()()()()(),n.\u0275\u0275elementContainerEnd())}function FV(i,a){1&i&&(n.\u0275\u0275elementStart(0,"div",8)(1,"div",9)(2,"div"),n.\u0275\u0275text(3,"Record Status Bar Component"),n.\u0275\u0275elementEnd()()())}let Ld=(()=>{class i{recordViewStore;moduleNavigation;displayResponsiveTable=!1;constructor(e,t){this.recordViewStore=e,this.moduleNavigation=t}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(li),n.\u0275\u0275directiveInject(wn))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-status-bar"]],decls:4,vars:2,consts:[[1,"record-view-header"],[4,"ngIf"],[3,"ngIf"],[1,"d-flex","flex-nowrap"],[1,"row"],[1,"w-100"],[1,"col"],[1,"order-2"],[1,"row","mr-0"],[1,"col-md-4"]],template:function(t,r){1&t&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"div",0),n.\u0275\u0275template(2,EV,8,0,"ng-container",1),n.\u0275\u0275template(3,FV,4,0,"ng-template",2),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()),2&t&&(n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",r.displayResponsiveTable),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!r.displayResponsiveTable))},dependencies:[F.NgIf],encapsulation:2})}return i})();const DM=new RegExp("^(\\d{4})-(0[1-9]|1[0-2])$"),wM=new RegExp("^(\\d{4})$");let IV=(()=>{class i{systemConfig;metadataStore;dataTypeFormatter;allowedProperties=["operator","target","values","start","end"];convertableProperties=["target","values","start","end"];constructor(e,t,r){this.systemConfig=e,this.metadataStore=t,this.dataTypeFormatter=r}buildUrlQueryBasedFilter(e,t,r){const o=this.metadataStore.get().recordView.vardefs,s=Object.entries(r).reduce((l,[u,d])=>{const[f,p]=this.cleanQueryParam([u,d]);return l[f]=p,l},{}),c=this.getQueryFilterCriteria(o,e,s);return(0,ne.isEmpty)(c.filters)?null:{key:"default",searchModule:e,module:"saved-search",criteria:c}}getQueryFilterCriteria(e,t,r){const o={name:"default",filters:{}},s=Object.keys(r),c=Object.values(e).filter(({name:f})=>s.some(p=>p.includes(f))),l=this.systemConfig.getConfigValue("listview_url_query_filter_mapping"),u=Object.entries(l);let d;u.push(["",{}]),d="basic_search"===r.searchFormTab?"basic":"advanced";for(const f of c){const p=f.name,m=[p,`${p}_${d}`];for(const[h,g]of u){if(!(0,ne.isEmpty)(o.filters[p]))break;for(const b of m){if(!(0,ne.isEmpty)(o.filters[p]))break;const _=this.buildSearchCriteriaFieldFilter(p,f.type,r,b,h,g);if(!(0,ne.isEmpty)(_)){try{this.convertableProperties.forEach(D=>{if(!_[D])return;let y;y=(0,ne.isArray)(_[D])?_[D].map(w=>this.toInternalFormat(f.type,w)):this.toInternalFormat(f.type,_[D]),_[D]=y})}catch{continue}o.filters[p]=_}}}}return o}buildSearchCriteriaFieldFilter(e,t,r,o,s,c){const l={field:e,fieldType:t,operator:"=",values:[]};if((0,ne.isEmpty)(s)||(0,ne.isEmpty)(c)){const p=this.getQueryParamValue(o,o,r);if((0,ne.isEmpty)(p)&&!(0,M.isEmptyString)(p))return null;const m=(0,ne.isArray)(p)?p:[p];return l.values=m,l.target=m[0],this.checkDateSpecialsOrReturn(l,l.target)}const u=this.getQueryParamValue(s,o,r,{forceSingleString:!0}),d=c[u]??Object.values(c).reduce((p,m)=>({...p,...m}),{})??{};if((0,ne.isEmpty)(d))return null;let f=!0;return l.operator=u,Object.entries(d).filter(([p,m])=>"string"==typeof m&&this.allowedProperties.includes(m)).forEach(([p,m])=>{const h=this.getQueryParamValue(p,o,r);if((0,ne.isEmpty)(h))return;f=!1;let g=h;"values"===m?((0,ne.isArray)(g)||(g=[g]),l.target=g[0]):"target"===m&&((0,ne.isArray)(g)&&(g=g[0]),l.values=[g]),l[m]=g,(0,ne.isArray)(g)||this.checkDateSpecialsOrReturn(l,g,{operator:u,key:m})}),f?null:this.checkForMissingOperator(l)}getQueryParamValue(e,t,r,{forceSingleString:o=!1}={}){let c=r[e.replace("{field}",t)??""];return c?(c=(0,ne.isArray)(c)?c.map(this.transform):this.transform(c),o&&(0,ne.isArray)(c)?c[0]??"":c):null}cleanQueryParam(e){let[t,r]=e;return 0===t.split("").reverse().join("").indexOf("][")&&"string"==typeof r&&(t=t.replace("[]",""),r=r.split(",")),[t,r]}checkDateSpecialsOrReturn(e,t,{operator:r="=",key:o="target"}={}){return t.match(DM)?this.overridesSearchCriteriaFieldFilter(e,t,{type:"month",operator:r,key:o}):t.match(wM)?this.overridesSearchCriteriaFieldFilter(e,t,{type:"year",operator:r,key:o}):e}overridesSearchCriteriaFieldFilter(e,t,{type:r="",operator:o="equal",key:s="target"}){let c,l;switch(r){case"year":c={year:1},l="yyyy";break;case"month":c={month:1},l="yyyy-MM";break;default:return e}const u=Le.DateTime.fromFormat(t,l),d=u.plus(c).minus({day:1});if("target"!==s){switch(s){case"start":e.start=u.toFormat("yyyy-MM-dd");break;case"end":e.end=d.toFormat("yyyy-MM-dd")}return e}switch(e.operator=o,o){case"greater_than":case"greater_than_equals":e.start=u.toFormat("yyyy-MM-dd"),e.target=e.start,e.values=[e.target];break;case"less_than":case"less_than_equals":e.end=d.toFormat("yyyy-MM-dd"),e.target=e.end,e.values=[e.target];break;case"not_equal":e.start=u.toFormat("yyyy-MM-dd"),e.end=d.toFormat("yyyy-MM-dd"),e.target=t,e.values=[t];break;default:e.operator="between",e.start=u.toFormat("yyyy-MM-dd"),e.end=d.toFormat("yyyy-MM-dd"),e.target="",e.values=[]}return e}toInternalFormat(e,t){return t.match(wM)||t.match(DM)?t:this.dataTypeFormatter.toInternalFormat(e,t)}transform(e){return""===e?"__SuiteCRMEmptyString__":e}checkForMissingOperator(e){return!(0,ne.isEmpty)(e.start)&&!(0,ne.isEmpty)(e.end)&&(e.operator="between"),e}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(dt),n.\u0275\u0275inject(mt),n.\u0275\u0275inject(it))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const Bd={key:"default",module:"saved-search",attributes:{contents:""},criteria:{name:"default",filters:{}}},xM={default:(0,M.deepClone)(Bd)},EM={module:"",widgets:!0,actionPanel:"",showSidebarWidgets:!1,recordPanelConfig:{},activeFilters:(0,M.deepClone)(xM),openFilter:(0,M.deepClone)(Bd)};let zn=(()=>{class i extends Id{appStateStore;languageStore;navigationStore;moduleNavigation;metadataStore;localStorage;message;listStoreFactory;modalService;filterListStoreFactory;confirmation;preferences;route;listViewUrlQueryService;moduleName$;columns;columns$;lineActions$;tableActions$;records$;criteria$;context$;sort$;pagination$;selection$;selectedCount$;selectedStatus$;loading$;widgets$;showSidebarWidgets$;displayFilters$;actionPanel$;recordList;dataUpdate$;dataSetUpdate$;activeFilters$;openFilter$;filterList;vm$;vm;data;cache$=null;internalState=(0,M.deepClone)(EM);store=new S.BehaviorSubject(this.internalState);state$=this.store.asObservable();dataUpdateState;subs=[];constructor(e,t,r,o,s,c,l,u,d,f,p,m,h,g){super(e,t,r,o,s),this.appStateStore=e,this.languageStore=t,this.navigationStore=r,this.moduleNavigation=o,this.metadataStore=s,this.localStorage=c,this.message=l,this.listStoreFactory=u,this.modalService=d,this.filterListStoreFactory=f,this.confirmation=p,this.preferences=m,this.route=h,this.listViewUrlQueryService=g,this.recordList=this.listStoreFactory.create(),this.columns$=s.listViewColumns$,this.lineActions$=s.listViewLineActions$,this.tableActions$=s.listViewTableActions$,this.records$=this.recordList.records$,this.criteria$=this.recordList.criteria$,this.context$=this.recordList.criteria$.pipe((0,v.map)(()=>this.getViewContext())),this.sort$=this.recordList.sort$,this.pagination$=this.recordList.pagination$,this.selection$=this.recordList.selection$,this.selectedCount$=this.recordList.selectedCount$,this.selectedStatus$=this.recordList.selectedStatus$,this.loading$=this.recordList.loading$,this.moduleName$=this.state$.pipe((0,v.map)(_=>_.module),(0,v.distinctUntilChanged)()),this.widgets$=this.state$.pipe((0,v.map)(_=>_.widgets),(0,v.distinctUntilChanged)()),this.showSidebarWidgets$=this.state$.pipe((0,v.map)(_=>_.showSidebarWidgets)),this.displayFilters$=this.state$.pipe((0,v.map)(_=>"filters"===_.actionPanel),(0,v.distinctUntilChanged)()),this.actionPanel$=this.state$.pipe((0,v.map)(_=>_.actionPanel),(0,v.distinctUntilChanged)()),this.activeFilters$=this.state$.pipe((0,v.map)(_=>_.activeFilters),(0,v.distinctUntilChanged)()),this.openFilter$=this.state$.pipe((0,v.map)(_=>_.openFilter),(0,v.distinctUntilChanged)());const b=this.records$.pipe((0,S.combineLatestWith)(this.criteria$,this.pagination$,this.selection$,this.loading$),(0,v.map)(([_,D,y,w,x])=>(this.data={records:_,criteria:D,pagination:y,selection:w,loading:x},this.data)));this.vm$=b.pipe((0,S.combineLatestWith)(this.appData$,this.metadata$),(0,v.map)(([_,D,y])=>(this.vm={data:_,appData:D,metadata:y},this.vm))),this.columns=new S.BehaviorSubject([]),this.columns$=this.columns.asObservable(),this.initDataUpdateState(),this.initDataSetUpdatedState(),this.filterList=this.filterListStoreFactory.create()}get actionPanel(){return this.internalState.actionPanel}get showFilters(){return"filters"===this.internalState.actionPanel}set showFilters(e){this.updateState({...this.internalState,actionPanel:e?"filters":""})}get widgets(){return this.internalState.widgets}set widgets(e){this.updateState({...this.internalState,widgets:e})}get showSidebarWidgets(){return this.internalState.showSidebarWidgets}set showSidebarWidgets(e){this.savePreference(this.getModuleName(),"show-sidebar-widgets",e),this.updateState({...this.internalState,showSidebarWidgets:e})}get recordPanelConfig(){return this.internalState.recordPanelConfig}isRecordPanelOpen(){return"recordPanel"===this.internalState.actionPanel}openRecordPanel(e){this.updateState({...this.internalState,actionPanel:"recordPanel",recordPanelConfig:e})}closeRecordPanel(){this.updateState({...this.internalState,actionPanel:"",recordPanelConfig:{}})}getModuleName(){return this.internalState.module}getViewContext(){const e={module:this.getModuleName()};return e.criteria=this.recordList.criteria,e.sort=this.recordList.sort,e}destroy(){this.clear(),this.subs.forEach(e=>e.unsubscribe())}get activeFilters(){return(0,M.deepClone)(this.internalState.activeFilters)}clear(){this.cache$=null,this.updateState((0,M.deepClone)(EM)),this.recordList.clear()}clearAuthBased(){this.clear(),this.recordList.clearAuthBased()}init(e){this.internalState.module=e,this.recordList.init(e,!1),this.filterList.init(e),this.filterList.load(!1).pipe((0,v.take)(1)).subscribe(),this.calculateShowWidgets(),this.recordList.sort={orderBy:this?.metadata?.listView?.orderBy??"",sortOrder:this?.metadata?.listView?.sortOrder??"NONE"};const t=this.route?.snapshot?.queryParams??{};let r="";return"query"===((0,M.isTrue)(t.query)&&(r="query"),r)?this.loadQueryFilter(e,t):(this.loadCurrentFilter(e),this.loadCurrentSort(e)),this.loadCurrentDisplayedColumns(),this.load()}setOpenFilter(e){this.updateState({...this.internalState,openFilter:(0,M.deepClone)(e)})}toggleQuickFilter(e,t=!0){let r=this.getActiveQuickFilters();if(Object.keys(r).some(s=>s===e.key)){let{[e.key]:s,...c}=r;r=c}else r={},r[e.key]=e;(0,M.emptyObject)(r)?this.resetFilters(t):1!==Object.keys(r).length?(this.updateState({...this.internalState,activeFilters:(0,M.deepClone)(r)}),this.updateSearchCriteria(t)):this.setFilters(r)}setFilters(e,t=!0,r=null){const s=e[Object.keys(e).shift()];if(this.updateState({...this.internalState,activeFilters:(0,M.deepClone)(e),openFilter:(0,M.deepClone)(s)}),s.criteria){let c=s.criteria.orderBy??"",u=this.recordList.mapSortOrder(s.criteria.sortOrder??"");null!==r&&(c=r.orderBy,u=r.sortOrder),this.recordList.updateSorting(c,u,!1),this.updateSortLocalStorage()}this.updateSearchCriteria(t)}addSavedFilter(e){const t={...this.internalState},r=this.activeFilters;e.key&&r[e.key]&&(r[e.key]=e,t.activeFilters=r),t.openFilter=e,this.filterList.addFilter(e),this.updateState(t)}removeSavedFilter(e){if(!e||!e.key)return;this.filterList.removeFilter(e);const t={...this.internalState};t.openFilter&&t.openFilter.key===e.key&&this.resetFilters(!0)}resetFilters(e=!0){this.updateState({...this.internalState,activeFilters:(0,M.deepClone)(xM),openFilter:(0,M.deepClone)(Bd)}),this.recordList.clearSort(),this.updateSortLocalStorage(),this.updateSearchCriteria(e)}updateSearchCriteria(e=!0){const t={...this.internalState.activeFilters};let r=this.mergeCriteria(t);this.recordList.updateSearchCriteria(r,e),this.updateFilterLocalStorage()}updateFilterLocalStorage(){this.savePreference(this.internalState.module,"current-filters",this.internalState.activeFilters)}updateSortLocalStorage(){this.savePreference(this.internalState.module,"current-sort",this.recordList.sort)}updateDisplayedColumnsPreference(e){this.savePreference(this.internalState.module,"displayed-columns",e)}getDisplayedColumnsPreference(){const t=this.loadPreference(this.internalState.module,"displayed-columns");return(0,ne.isArray)(t)&&t&&t.length?t:null}triggerDataUpdate(){this.dataUpdateState.next(!0)}load(e=!0){const t=this.internalState.module;return this.savePreference(t,"current-filters",this.internalState.activeFilters),this.savePreference(t,"current-sort",this.recordList.sort),this.recordList.load(e)}updateState(e){this.store.next(this.internalState=e)}getActiveQuickFilters(){let{default:e,...t}=this.activeFilters,r={};return Object.keys(t).forEach(o=>{const s=t[o]??null;o&&s?.attributes?.quick_filter&&(r[o]=s)}),r}mergeCriteria(e){let t={};return(Object.keys(e??{})??[]).forEach(o=>{const c=(e[o]??null)?.criteria??null,l=Object.keys(c?.filters??{});if(null!==c&&(!l||l.length)){if((0,M.emptyObject)(t))return void(t=(0,M.deepClone)(c));l.forEach(u=>{const d=c?.filters[u]??null,f=t?.filters[u]??null;if(!d)return;const p=f?.operator??null;if(!f||!p)return void(t.filters[u]=(0,M.deepClone)(d));const m=d?.operator??null;m===p&&"="===m?f.values=(0,ne.union)(f.values??[],d.values??[]):delete t.filters[u]})}}),t}openColumnChooserDialog(){const e=this.modalService.open(L0,{ariaLabelledBy:"modal-basic-title",centered:!0,size:"lg",windowClass:"column-chooser-modal"}),t=this.columns.getValue().filter(function(o){return!o.hasOwnProperty("default")||o.hasOwnProperty("default")&&!0===o.default}),r=this.columns.getValue().filter(function(o){return o.hasOwnProperty("default")&&!1===o.default});e.componentInstance.displayed=t,e.componentInstance.hidden=r,e.result.then(o=>{if(!o.displayed||!o.hidden)return;let s=[];const c=o.displayed,l=o.hidden;c.forEach(function(d){d.default=!0}),l.forEach(function(d){d.default=!1}),s.push(...c,...l),this.columns.next(s);const u=c.map(d=>d.name);this.updateDisplayedColumnsPreference(u)})}calculateShowWidgets(){let e=!1;const o=((this.metadataStore.get()||{}).listView||{}).sidebarWidgets||[];o&&o.length>0&&(e=!0);const s=this.loadPreference(this.getModuleName(),"show-sidebar-widgets")??null;this.showSidebarWidgets=null!==s?s:e,this.widgets=e}getPreferenceKey(e){return"listview-"+e}savePreference(e,t,r){this.preferences.setUi(e,this.getPreferenceKey(t),r)}loadPreference(e,t){return this.preferences.getUi(e,this.getPreferenceKey(t))}loadCurrentFilter(e){const t=this.loadPreference(e,"current-filters")??{};if(!t||(0,M.emptyObject)(t))return;let r=this.loadPreference(e,"current-sort");!r&&(0,M.emptyObject)(r)&&(r=null),this.setFilters(t,!1,r)}loadQueryFilter(e,t){const r=t.orderBy??"",s=this.recordList.mapSortOrder(t.sortOrder??""),c=this.listViewUrlQueryService.buildUrlQueryBasedFilter(e,this.internalState.activeFilters.default,t);(0,ne.isEmpty)(c)||(this.updateState({...this.internalState,activeFilters:(0,M.deepClone)({default:c}),openFilter:(0,M.deepClone)(c)}),this.recordList.updateSorting(r,s,!1),this.recordList.updateSearchCriteria(c.criteria,!1))}loadCurrentSort(e){const t=this.loadPreference(e,"current-sort");!t||(0,M.emptyObject)(t)||(this.recordList.sort=t)}loadCurrentDisplayedColumns(){this.metadataStore.listViewColumns$.pipe((0,v.take)(1)).subscribe(e=>{const t=this.getDisplayedColumnsPreference();if(!t||!e)return void this.columns.next(e);const r={};t.forEach(l=>{r[l]=!0});const o={},s=[];e.forEach(l=>{l.default=r[l.name]??!1,l.default?o[l.name]=l:s.push(l)});const c=t.filter(l=>!!o[l]).map(l=>o[l]);this.columns.next([...c,...s])})}initDataUpdateState(){this.dataUpdateState=new S.BehaviorSubject(!0),this.dataUpdate$=this.dataUpdateState.asObservable()}initDataSetUpdatedState(){this.dataSetUpdate$=this.criteria$.pipe((0,S.combineLatestWith)(this.dataUpdate$),(0,v.map)(()=>!0))}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Gt),n.\u0275\u0275inject(Oe),n.\u0275\u0275inject(Ci),n.\u0275\u0275inject(wn),n.\u0275\u0275inject(mt),n.\u0275\u0275inject(cr),n.\u0275\u0275inject(ct),n.\u0275\u0275inject(Ni),n.\u0275\u0275inject(de.NgbModal),n.\u0275\u0275inject(Uc),n.\u0275\u0275inject(yn),n.\u0275\u0275inject(Vt),n.\u0275\u0275inject(Ft.ActivatedRoute),n.\u0275\u0275inject(IV))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})();function AV(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",1),n.\u0275\u0275element(1,"scrm-button-group",2),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("config$",e.config$)}}let TV=(()=>{class i{listStore;actionHandler;screenSize;systemConfigs;asyncActionService;configState=new S.BehaviorSubject({buttons:[]});config$=this.configState.asObservable();vm$=this.screenSize.screenSize$.pipe((0,v.map)(e=>(e&&(this.screen=e),this.configState.next(this.getButtonGroupConfig()),{screenSize:e})));screen=kn.Medium;defaultBreakpoint=3;breakpoint;constructor(e,t,r,o,s){this.listStore=e,this.actionHandler=t,this.screenSize=r,this.systemConfigs=o,this.asyncActionService=s}ngOnInit(){this.configState.next(this.getButtonGroupConfig())}getButtonGroupConfig(){const e=this.actions,t={buttonKlass:["action-button"],dropdownLabel:this.listStore.appStrings.LBL_MORE||"",buttons:[],dropdownOptions:{placement:["bottom-right"]},breakpoint:this.getBreakpoint()};return e.forEach(r=>{const o=this.getButtonConfig(r);o&&o.klass&&t.buttons.push(o)}),t}getBreakpoint(){const e=this.systemConfigs&&this.systemConfigs.getConfigValue("listview_actions_limits");return this.screen&&e&&e[this.screen]?(this.breakpoint=e[this.screen],this.breakpoint):this.breakpoint?this.breakpoint:this.defaultBreakpoint}get actions(){return this.listStore.vm.appData.module&&this.listStore.vm.appData.module.menu?this.listStore.vm.appData.module.menu.filter(e=>!("List"===e.name||"View"===e.name)):[]}getButtonConfig(e){if(!this.listStore.vm.appData.appState.module)return{};if(!this.listStore.vm.appData.language)return{};const t=this.listStore.vm.appData.appState.module;let o="";return e.actionLabelKey&&(o=e.actionLabelKey),{klass:"action-button",label:this.actionHandler.getActionLabel(t,e,this.listStore.vm.appData.language,o),onClick:()=>{e?.process?this.handleProcess(t,e?.process):this.actionHandler.navigate(e).then()}}}handleProcess(e,t){t&&this.asyncActionService.run(t,{action:t,module:e}).pipe((0,v.take)(1)).subscribe()}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(zn),n.\u0275\u0275directiveInject(wn),n.\u0275\u0275directiveInject(ai),n.\u0275\u0275directiveInject(dt),n.\u0275\u0275directiveInject(Kt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-action-menu"]],decls:2,vars:3,consts:[["class","list-view-actions float-right",4,"ngIf"],[1,"list-view-actions","float-right"],[3,"config$"]],template:function(t,r){1&t&&(n.\u0275\u0275template(0,AV,2,1,"div",0),n.\u0275\u0275pipe(1,"async")),2&t&&n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(1,1,r.vm$))},dependencies:[F.NgIf,Yr,F.AsyncPipe],encapsulation:2})}return i})(),Od=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,ro,Xt,Ve.AngularSvgIconModule,dr]})}return i})(),Ya=(()=>{class i{systemConfigStore;screenSize;store;quickFiltersConfigState=new S.BehaviorSubject({buttons:[]});enabledState=new S.BehaviorSubject(!1);screen=kn.Medium;defaultBreakpoint=5;breakpoint;breakdownSizes=[];subs=[];config$=this.quickFiltersConfigState.asObservable();enabled$=this.enabledState.asObservable();enabled=!1;breakdown$;constructor(e,t,r){this.systemConfigStore=e,this.screenSize=t,this.store=r,this.breakdownSizes=this.systemConfigStore.getUi("quick_filters_breakdown_screen_sizes");const o=this.systemConfigStore.getUi("displayed_quick_filters"),s=this.systemConfigStore.getUi("quick_filters_breakdown_threshold");this.breakdown$=this.screenSize.screenSize$.pipe((0,v.map)(c=>(o[c]??2)>(s[c]??2)||(0,M.isTrue)(this.breakdownSizes[c]??!1))),this.subs.push(this.screenSize.screenSize$.subscribe(c=>{c&&(this.screen=c),this.init()}))}init(){let e=this.store.filterList.getFilters()??[];if(e=e.filter(s=>s?.attributes?.quick_filter??!1),this.enabled=this.areConfigEnabled(),!e||e.length<1)return this.enabled=!1,void this.enabledState.next(!1);this.enabledState.next(this.enabled);const t={buttonKlass:["settings-button btn btn-outline-main"],dropdownLabel:this.store.appStrings.LBL_QUICK_FILTERS||"",breakpoint:this.getBreakpoint(),showAfterBreakpoint:!1,dropdownOptions:{placement:["bottom-right"],wrapperKlass:["dropdown-button-secondary","filter-action-group"]},buttons:[]},r=this.store.activeFilters;let o=!1;e.forEach(s=>{if(!s?.attributes?.quick_filter)return;const l=Object.keys(r).some(d=>d===s.key);o=o||l;const u={label:s.attributes.name,title:s.attributes.name,onClick:()=>{this.store.toggleQuickFilter(s)}};l&&(u.klass=["active"]),t.buttons.push(u)}),o&&(t.dropdownOptions.klass=["active"],t.dropdownOptions.icon="filter"),this.quickFiltersConfigState.next(t)}destroy(){this.subs.forEach(e=>e.unsubscribe()),this.subs=[],this.quickFiltersConfigState.unsubscribe()}getBreakpoint(){const e=this.systemConfigStore.getUi("displayed_quick_filters");return this.screen&&e&&e[this.screen]?(this.breakpoint=e[this.screen],this.breakpoint):this.breakpoint?this.breakpoint:this.defaultBreakpoint}areConfigEnabled(){const e=this.systemConfigStore.getUi("enable_quick_filters");return!(!this.screen||!e)&&(0,M.isTrue)(e[this.screen]??!1)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(dt),n.\u0275\u0275inject(ai),n.\u0275\u0275inject(zn))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})();function NV(i,a){if(1&i&&n.\u0275\u0275element(0,"scrm-button-group",10),2&i){const e=n.\u0275\u0275nextContext(3);n.\u0275\u0275property("config$",e.quickFilters.config$)("klass","quick-filter-button")}}function LV(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",5)(1,"div",6),n.\u0275\u0275element(2,"scrm-label",7),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(3,"div",8),n.\u0275\u0275template(4,NV,1,2,"scrm-button-group",9),n.\u0275\u0275elementEnd()()),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(4),n.\u0275\u0275property("ngIf",e.quickFilters.config$)}}function BV(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,LV,5,1,"div",4),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.showQuickFilters&&e.enableQuickFilters)}}function OV(i,a){if(1&i&&n.\u0275\u0275element(0,"scrm-button-group",11),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275property("config$",e.config$)}}let FM=(()=>{class i{listStore;modalService;screenSize;systemConfigStore;quickFilters;configState=new S.BehaviorSubject({buttons:[]});config$=this.configState.asObservable();showQuickFilters=!0;enableQuickFilters=!1;screen=kn.Medium;defaultBreakpoint=5;breakpoint;subs=[];constructor(e,t,r,o,s){this.listStore=e,this.modalService=t,this.screenSize=r,this.systemConfigStore=o,this.quickFilters=s}ngOnInit(){this.configState.next(this.getButtonGroupConfig());const e=this.listStore.widgets$.pipe((0,S.combineLatestWith)(this.listStore.displayFilters$,this.listStore.criteria$,this.screenSize.screenSize$,this.listStore.showSidebarWidgets$,this.listStore.filterList.records$));this.subs.push(e.subscribe(([t,r,o,s,c,l])=>{s&&(this.screen=s),this.configState.next(this.getButtonGroupConfig()),this.quickFilters.init()})),this.subs.push(this.quickFilters.breakdown$.subscribe(t=>{this.showQuickFilters=!(0,M.isTrue)(t)})),this.subs.push(this.quickFilters.enabled$.subscribe(t=>{this.enableQuickFilters=(0,M.isTrue)(t??!1)}))}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}getButtonGroupConfig(){const e=[{show:()=>this.checkFiltersDisplay(),button:this.getMyFiltersButton()},{show:()=>!0,button:this.getFilterButton()},{show:()=>this.listStore.widgets,button:this.getInsightsButton()}],t={buttonKlass:["settings-button"],dropdownLabel:this.listStore.appStrings.LBL_OPTIONS||"",breakpoint:this.getBreakpoint(),dropdownOptions:{placement:["bottom-right"],wrapperKlass:["dropdown-button-secondary"]},buttons:[]};return e.forEach(r=>{r.show?r.show()&&t.buttons.push(r.button):t.buttons.push(r.button)}),t}checkFiltersDisplay(){const e=this.listStore.filterList.getFilters()??[],t=this.quickFilters.getBreakpoint(),r=e.length,o=e.filter(s=>s.attributes.quick_filter).length;return r>0&&(o>t||r-o>0)}getFilters(){return this?.listStore?.recordList?.criteria?.filters??{}}getCurrentCriteria(){return this?.listStore?.recordList?.criteria??{}}hasActiveFilter(){const e=this.listStore.activeFilters;if(!e)return!1;const t=Object.keys(e)??[];if(!t||!t.length)return!1;if(t.length>1)return!0;const r=e[t[0]];return r.key&&""!==r.key&&"default"!==r.key}areAllCurrentCriteriaFilterEmpty(){return Object.keys(this.getFilters()??{}).every(e=>""===this.getFilters()[e].operator)}isAnyFilterApplied(){return this.hasActiveFilter()||!this.areAllCurrentCriteriaFilterEmpty()}getBreakpoint(){const e=this.systemConfigStore.getConfigValue("listview_settings_limits");return this.screen&&e&&e[this.screen]?(this.breakpoint=e[this.screen],this.breakpoint):this.breakpoint?this.breakpoint:this.defaultBreakpoint}getFilterButton(){const e={type:"grouped",items:[]},t={label:this.listStore.appStrings.LBL_FILTER||"",klass:{"filter-settings-button":!0,"btn btn-sm settings-button":!0,active:this.isAnyFilterApplied()},onClick:()=>{this.listStore.showFilters=!this.listStore.showFilters}};return this.isAnyFilterApplied()&&(t.icon="filter"),e.items.push(t),this.isAnyFilterApplied()&&e.items.push(this.getClearButton()),e}getMyFiltersButton(){const e=this.listStore.filterList.getFilters(),t={label:this.listStore.appStrings.LBL_SAVED_FILTER_SHORTCUT||"",klass:["dropdown-toggle"],wrapperKlass:["filter-action-group"],items:[],sections:{"quick-filters":{labelKey:"LBL_QUICK_FILTERS"},default:{labelKey:"LBL_SAVED_FILTER_SHORTCUT"}}},r=this.listStore.activeFilters;let o=!1,s=0;const c=this.quickFilters.getBreakpoint(),l=this.quickFilters.areConfigEnabled();return e.forEach(u=>{const d=(0,M.isTrue)(u?.attributes?.quick_filter??!1);if(l&&d&&s<c)return void s++;const f=Object.keys(r).some(m=>m===u.key);o=o||f;const p={label:u.attributes.name,section:d?"quick-filters":"default",onClick:()=>{if(this.listStore.showFilters=!1,f)this.listStore.resetFilters();else{this.listStore.setOpenFilter(u);const m={};m[u.key]=u,this.listStore.setFilters(m)}}};f&&(p.icon="filter",p.iconKlass="small",p.klass=["active"]),t.items.push(p)}),o&&(t.klass=["dropdown-toggle","active"]),t}getClearButton(){return{label:"x",titleKey:"LBL_CLEAR_FILTER",klass:{"btn btn-sm settings-button clear-filter-button btn-main-light":!0},onClick:()=>{this.listStore.showFilters=!1,this.listStore.resetFilters()}}}getInsightsButton(){return{label:this.listStore.appStrings.LBL_INSIGHTS||"",klass:{active:this.listStore.showSidebarWidgets},icon:"pie",onClick:()=>{this.listStore.showSidebarWidgets=!this.listStore.showSidebarWidgets}}}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(zn),n.\u0275\u0275directiveInject(de.NgbModal),n.\u0275\u0275directiveInject(ai),n.\u0275\u0275directiveInject(dt),n.\u0275\u0275directiveInject(Ya))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-settings-menu"]],decls:5,vars:4,consts:[[1,"list-view-settings","w-100","d-flex","justify-content-end"],[4,"ngIf"],[1,"text-nowrap"],["klass","d-flex align-items-center",3,"config$",4,"ngIf"],["class","d-flex align-items-baseline",4,"ngIf"],[1,"d-flex","align-items-baseline"],[1,"text-nowrap","text-muted","fs-70","pl-1","mr-2"],["labelKey","LBL_QUICK_FILTERS"],[1,"quick-filter-border","pr-xxl-1","mr-xxl-1"],[3,"config$","klass",4,"ngIf"],[3,"config$","klass"],["klass","d-flex align-items-center",3,"config$"]],template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"div",0),n.\u0275\u0275template(1,BV,2,1,"ng-container",1),n.\u0275\u0275pipe(2,"async"),n.\u0275\u0275elementStart(3,"div",2),n.\u0275\u0275template(4,OV,1,1,"scrm-button-group",3),n.\u0275\u0275elementEnd()()),2&t&&(n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(2,2,r.quickFilters.config$)),n.\u0275\u0275advance(3),n.\u0275\u0275property("ngIf",r.config$))},dependencies:[F.NgIf,Yr,Ot,F.AsyncPipe],encapsulation:2})}return i})(),Rd=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,B0,fn,Xt,Lr,de.NgbModule,dr,Nt]})}return i})(),jd=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,qa,Od,Rd,Ve.AngularSvgIconModule]})}return i})();function RV(i,a){if(1&i&&n.\u0275\u0275element(0,"scrm-bulk-action-menu",6),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275property("selectionSource",e.selection)("actionSource",e.bulkActions)}}function jV(i,a){if(1&i&&n.\u0275\u0275element(0,"scrm-pagination",7),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275property("allowPagination",e.isPaginationEnabled())("state",e.pagination)}}let IM=(()=>{class i{selection;bulkActions;pagination;tableActions;paginationType;isPaginationEnabled(){return"pagination"===this.paginationType}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-table-header"]],inputs:{selection:"selection",bulkActions:"bulkActions",pagination:"pagination",tableActions:"tableActions",paginationType:"paginationType"},decls:6,vars:3,consts:[[1,"list-view-tableactions","table-header"],[1,"row"],[3,"selectionSource","actionSource",4,"ngIf"],["buttonClass","btn table-action-button",3,"config"],[1,"col","mx-0","pl-0","table-pagination-wrapper"],[3,"allowPagination","state",4,"ngIf"],[3,"selectionSource","actionSource"],[3,"allowPagination","state"]],template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"div",0)(1,"div",1),n.\u0275\u0275template(2,RV,1,2,"scrm-bulk-action-menu",2),n.\u0275\u0275element(3,"scrm-action-group-menu",3),n.\u0275\u0275elementStart(4,"div",4),n.\u0275\u0275template(5,jV,1,2,"scrm-pagination",5),n.\u0275\u0275elementEnd()()()),2&t&&(n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",r.selection&&r.bulkActions),n.\u0275\u0275advance(1),n.\u0275\u0275property("config",r.tableActions),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",r.pagination))},dependencies:[F.NgIf,wd,mu,ur],encapsulation:2})}return i})();function kV(i,a){1&i&&n.\u0275\u0275element(0,"th",13)}function PV(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"td",14)(1,"label",15)(2,"input",16),n.\u0275\u0275listener("change",function(){const o=n.\u0275\u0275restoreView(e).$implicit,s=n.\u0275\u0275nextContext(3);return n.\u0275\u0275resetView(s.toggleSelection(o.id))}),n.\u0275\u0275elementEnd(),n.\u0275\u0275element(3,"span",17),n.\u0275\u0275elementEnd()()}if(2&i){const e=a.$implicit,t=n.\u0275\u0275nextContext(2).ngIf,r=n.\u0275\u0275nextContext();n.\u0275\u0275advance(2),n.\u0275\u0275property("checked",e.id&&t.selected[e.id]||r.allSelected(t.selectionStatus))("disabled",r.allSelected(t.selectionStatus))}}function $V(i,a){1&i&&(n.\u0275\u0275elementContainerStart(0,12),n.\u0275\u0275template(1,kV,1,0,"th",7),n.\u0275\u0275template(2,PV,4,2,"td",8),n.\u0275\u0275elementContainerEnd())}function UV(i,a){1&i&&n.\u0275\u0275element(0,"th",21)}function VV(i,a){if(1&i&&n.\u0275\u0275element(0,"scrm-record-details-popup-button",24),2&i){const e=n.\u0275\u0275nextContext().$implicit,t=n.\u0275\u0275nextContext(3);n.\u0275\u0275property("record",e)("columns",t.popoverColumns)}}function zV(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"td",22),n.\u0275\u0275template(1,VV,1,2,"scrm-record-details-popup-button",23),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext(3);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.popoverColumns.length)}}function WV(i,a){1&i&&(n.\u0275\u0275elementContainerStart(0,18),n.\u0275\u0275template(1,UV,1,0,"th",19),n.\u0275\u0275template(2,zV,2,1,"td",20),n.\u0275\u0275elementContainerEnd())}function GV(i,a){if(1&i&&n.\u0275\u0275element(0,"scrm-sort-button",31),2&i){const e=n.\u0275\u0275nextContext(2).$implicit,t=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("state",t.getFieldSort(e))}}function KV(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"th",28),n.\u0275\u0275element(1,"scrm-label",29),n.\u0275\u0275template(2,GV,1,1,"scrm-sort-button",30),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext().$implicit,t=n.\u0275\u0275nextContext(2);let r;n.\u0275\u0275classMap(null!==(r="primary-table-header column-"+(null==e?null:e.name))&&void 0!==r?r:""),n.\u0275\u0275advance(1),n.\u0275\u0275property("labelKey",e.label)("module",t.config.module||""),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.config.sort$&&e.sortable)}}function HV(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"td",14),n.\u0275\u0275element(1,"scrm-field",32),n.\u0275\u0275elementEnd()),2&i){const e=a.$implicit,t=n.\u0275\u0275nextContext().$implicit,r=n.\u0275\u0275nextContext(2);let o;n.\u0275\u0275classMap(null!==(o="column-"+(null==t?null:t.name))&&void 0!==o?o:""),n.\u0275\u0275advance(1),n.\u0275\u0275property("mode","list")("type",t.type)("field",r.getField(t,e))("record",e)}}function ZV(i,a){1&i&&(n.\u0275\u0275elementContainerStart(0,25),n.\u0275\u0275template(1,KV,3,5,"th",26),n.\u0275\u0275template(2,HV,2,6,"td",27),n.\u0275\u0275elementContainerEnd()),2&i&&n.\u0275\u0275property("cdkColumnDef",a.$implicit.name)}function qV(i,a){1&i&&n.\u0275\u0275element(0,"th",13)}function JV(i,a){if(1&i&&n.\u0275\u0275element(0,"scrm-line-action-menu",34),2&i){const e=n.\u0275\u0275nextContext().$implicit,t=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("config",t.config.lineActions)("record",e)}}function QV(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"td",14),n.\u0275\u0275template(1,JV,1,2,"scrm-line-action-menu",33),n.\u0275\u0275elementEnd()),2&i){const e=a.$implicit,t=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e&&t.config.lineActions)}}function XV(i,a){1&i&&n.\u0275\u0275element(0,"tr",35)}function YV(i,a){1&i&&n.\u0275\u0275element(0,"tr",36)}function e9(i,a){1&i&&(n.\u0275\u0275elementStart(0,"div")(1,"p",37),n.\u0275\u0275element(2,"scrm-label",38),n.\u0275\u0275elementEnd()())}function t9(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div"),n.\u0275\u0275element(1,"scrm-loading-spinner",39),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext().ngIf;n.\u0275\u0275classProp("m-5",!e.records||0===e.records.length),n.\u0275\u0275advance(1),n.\u0275\u0275property("overlay",!0)}}function n9(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"div",1)(2,"table",2),n.\u0275\u0275template(3,$V,3,0,"ng-container",3),n.\u0275\u0275template(4,WV,3,0,"ng-container",4),n.\u0275\u0275template(5,ZV,3,1,"ng-container",5),n.\u0275\u0275elementContainerStart(6,6),n.\u0275\u0275template(7,qV,1,0,"th",7),n.\u0275\u0275template(8,QV,2,1,"td",8),n.\u0275\u0275elementContainerEnd(),n.\u0275\u0275template(9,XV,1,0,"tr",9),n.\u0275\u0275template(10,YV,1,0,"tr",10),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(11,e9,3,0,"div",0),n.\u0275\u0275template(12,t9,2,3,"div",11),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()),2&i){const e=a.ngIf,t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(2),n.\u0275\u0275property("dataSource",t.config.dataSource)("trackBy",t.trackRecord),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.selection),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.popoverColumns&&t.popoverColumns.length),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",e.columns),n.\u0275\u0275advance(4),n.\u0275\u0275property("cdkHeaderRowDef",e.displayedColumns),n.\u0275\u0275advance(1),n.\u0275\u0275property("cdkRowDefColumns",e.displayedColumns),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!e.loading&&0===e.records.length),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.loading)}}let AM=(()=>{class i{fieldManager;loadingBufferFactory;config;maxColumns=4;popoverColumns;vm$;loadingBuffer;subs=[];constructor(e,t){this.fieldManager=e,this.loadingBufferFactory=t,this.loadingBuffer=this.loadingBufferFactory.create("table_loading_display_delay")}ngOnInit(){const e=this.config.selection$||(0,S.of)(null).pipe((0,v.shareReplay)(1));let t=this.initLoading();this.vm$=this.config.columns.pipe((0,S.combineLatestWith)(e,this.config.maxColumns$,this.config.dataSource.connect(null),t),(0,v.map)(([r,o,s,c,l])=>{const u=[];this.maxColumns=s;const d=this.buildDisplayColumns(r);return this.popoverColumns=this.buildHiddenColumns(r,d),o&&u.push("checkbox"),this.popoverColumns&&this.popoverColumns.length&&u.push("show-more"),u.push(...d),u.push("line-actions"),{columns:r,selection:o,selected:o&&o.selected||{},selectionStatus:o&&o.status||M.SelectionStatus.NONE,displayedColumns:u,records:c||[],loading:l}}))}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}toggleSelection(e){this.config.toggleRecordSelection(e)}allSelected(e){return e===M.SelectionStatus.ALL}buildDisplayColumns(e){let t=0,r=!1;const o=[],s=e.filter(function(c){return!c.hasOwnProperty("default")||c.hasOwnProperty("default")&&!0===c.default});for(;t<this.maxColumns&&t<s.length;)o.push(s[t].name),r=r||s[t].link,t++;if(!r&&this.maxColumns<s.length)for(t=this.maxColumns;t<s.length;t++)if(s[t].link){o.splice(-1,1),o.push(s[t].name);break}return o}buildHiddenColumns(e,t){const r=e.filter(function(c){return!c.hasOwnProperty("default")||c.hasOwnProperty("default")&&!0===c.default});let o=[];for(let c=0;c<r.length;c++)-1===t.indexOf(r[c].name)&&o.push(r[c].name);return r.filter(c=>o.includes(c.name))}getFieldSort(e){return{getSortDirection:()=>this.config.sort$.pipe((0,v.map)(t=>{let r=M.SortDirection.NONE;return t.orderBy===e.name&&(r=t.sortOrder),r})),changeSortDirection:t=>{this.config.updateSorting(e.name,t)}}}getField(e,t){return e&&t?this.fieldManager.addField(t,e):null}initLoading(){let e=(0,S.of)(!1).pipe((0,v.shareReplay)(1));return this.config.loading$&&(this.subs.push(this.config.loading$.subscribe(t=>{this.loadingBuffer.updateLoading(t)})),e=this.loadingBuffer.loading$),e}trackRecord(e,t){return t?.id??""}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(ei),n.\u0275\u0275directiveInject(du))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-table-body"]],inputs:{config:"config"},decls:2,vars:3,consts:[[4,"ngIf"],[1,"position-relative","d-flex","flex-column"],["cdk-table","","aria-describedby","table-body",1,"list-view-table","striped-table","table",3,"dataSource","trackBy"],["cdkColumnDef","checkbox",4,"ngIf"],["cdkColumnDef","show-more",4,"ngIf"],[3,"cdkColumnDef",4,"ngFor","ngForOf"],["cdkColumnDef","line-actions"],["cdk-header-cell","","scope","col","class","primary-table-header",4,"cdkHeaderCellDef"],["cdk-cell","",4,"cdkCellDef"],["cdk-header-row","",4,"cdkHeaderRowDef"],["cdk-row","",4,"cdkRowDef","cdkRowDefColumns"],[3,"m-5",4,"ngIf"],["cdkColumnDef","checkbox"],["cdk-header-cell","","scope","col",1,"primary-table-header"],["cdk-cell",""],[1,"checkbox-container"],["type","checkbox","aria-hidden","true",3,"checked","disabled","change"],[1,"checkmark"],["cdkColumnDef","show-more"],["cdk-header-cell","","scope","col","class","primary-table-header show-more-column",4,"cdkHeaderCellDef"],["cdk-cell","","class","show-more-column",4,"cdkCellDef"],["cdk-header-cell","","scope","col",1,"primary-table-header","show-more-column"],["cdk-cell","",1,"show-more-column"],[3,"record","columns",4,"ngIf"],[3,"record","columns"],[3,"cdkColumnDef"],["cdk-header-cell","","scope","col",3,"class",4,"cdkHeaderCellDef"],["cdk-cell","",3,"class",4,"cdkCellDef"],["cdk-header-cell","","scope","col"],[3,"labelKey","module"],[3,"state",4,"ngIf"],[3,"state"],[3,"mode","type","field","record"],[3,"config","record",4,"ngIf"],[3,"config","record"],["cdk-header-row",""],["cdk-row",""],[1,"lead","text-center","pt-3"],["labelKey","MSG_LIST_VIEW_NO_RESULTS_BASIC"],[3,"overlay"]],template:function(t,r){1&t&&(n.\u0275\u0275template(0,n9,13,9,"ng-container",0),n.\u0275\u0275pipe(1,"async")),2&t&&n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(1,1,r.vm$))},dependencies:[F.NgForOf,F.NgIf,Ai.CdkTable,Ai.CdkRowDef,Ai.CdkCellDef,Ai.CdkHeaderCellDef,Ai.CdkColumnDef,Ai.CdkCell,Ai.CdkRow,Ai.CdkHeaderCell,Ai.CdkHeaderRow,Ai.CdkHeaderRowDef,Ki,bM,iC,pr,Ot,mM,F.AsyncPipe],encapsulation:2})}return i})();function i9(i,a){if(1&i&&n.\u0275\u0275element(0,"scrm-bulk-action-menu",7),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275property("selectionSource",e.selection)("actionSource",e.bulkActions)}}function r9(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",8),n.\u0275\u0275element(1,"scrm-load-more",9),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("loadMoreButton",e.getLoadMoreButton())}}function o9(i,a){if(1&i&&n.\u0275\u0275element(0,"scrm-pagination",10),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275property("allowPagination",e.isPaginationEnabled())("state",e.pagination)}}let TM=(()=>{class i{selection;bulkActions;pagination;tableActions;paginationType;config;isPaginationEnabled(){return"pagination"===this.paginationType}getLoadMoreButton(){return{klass:"load-more",labelKey:"LBL_LOAD_MORE",onClick:()=>{this.config.loadMore()}}}allLoaded(){return this.config?.allLoaded()}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-table-footer"]],inputs:{selection:"selection",bulkActions:"bulkActions",pagination:"pagination",tableActions:"tableActions",paginationType:"paginationType",config:"config"},decls:7,vars:4,consts:[[1,"list-view-tableactions","table-footer"],[1,"row"],[3,"selectionSource","actionSource",4,"ngIf"],["buttonClass","btn table-action-button",3,"config"],["class","col mx-0 pl-0 load-more-style",4,"ngIf"],[1,"col","mx-0","pl-0","table-pagination-wrapper"],[3,"allowPagination","state",4,"ngIf"],[3,"selectionSource","actionSource"],[1,"col","mx-0","pl-0","load-more-style"],[3,"loadMoreButton"],[3,"allowPagination","state"]],template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"div",0)(1,"div",1),n.\u0275\u0275template(2,i9,1,2,"scrm-bulk-action-menu",2),n.\u0275\u0275element(3,"scrm-action-group-menu",3),n.\u0275\u0275template(4,r9,2,1,"div",4),n.\u0275\u0275elementStart(5,"div",5),n.\u0275\u0275template(6,o9,1,2,"scrm-pagination",6),n.\u0275\u0275elementEnd()()()),2&t&&(n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",r.selection&&r.bulkActions),n.\u0275\u0275advance(1),n.\u0275\u0275property("config",r.tableActions),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!r.isPaginationEnabled()&&!r.allLoaded()),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",r.pagination))},dependencies:[F.NgIf,wd,mu,oC,ur],encapsulation:2})}return i})();function a9(i,a){if(1&i&&n.\u0275\u0275element(0,"scrm-table-header",3),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275property("bulkActions",e.config.bulkActions)("paginationType",e.getPaginationType())("pagination",e.config.pagination)("selection",e.config.selection)("tableActions",null==e.config?null:e.config.tableActions)}}function s9(i,a){if(1&i&&n.\u0275\u0275element(0,"scrm-table-footer",4),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275property("bulkActions",e.config.bulkActions)("paginationType",e.getPaginationType())("pagination",e.config.pagination)("selection",e.config.selection)("tableActions",null==e.config?null:e.config.tableActions)("config",e.config)}}let Vc=(()=>{class i{config;getPaginationType(){return this.config?.loadMore&&"load-more"===this.config?.paginationType?this.config.paginationType:"pagination"}showHeader(){return this.config.showHeader}showFooter(){return this.config.showFooter}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-table"]],inputs:{config:"config"},decls:4,vars:6,consts:[[3,"bulkActions","paginationType","pagination","selection","tableActions",4,"ngIf"],[3,"config"],[3,"bulkActions","paginationType","pagination","selection","tableActions","config",4,"ngIf"],[3,"bulkActions","paginationType","pagination","selection","tableActions"],[3,"bulkActions","paginationType","pagination","selection","tableActions","config"]],template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"div"),n.\u0275\u0275template(1,a9,1,5,"scrm-table-header",0),n.\u0275\u0275element(2,"scrm-table-body",1),n.\u0275\u0275template(3,s9,1,6,"scrm-table-footer",2),n.\u0275\u0275elementEnd()),2&t&&(n.\u0275\u0275classMap(r.config&&r.config.klass||""),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.showHeader()),n.\u0275\u0275advance(1),n.\u0275\u0275property("config",r.config),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.showFooter()))},dependencies:[F.NgIf,IM,AM,TM],encapsulation:2})}return i})(),NM=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,xd,gu,Ve.AngularSvgIconModule,fr]})}return i})(),LM=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Ve.AngularSvgIconModule,Ai.CdkTableModule,Pn,CM,rC,mr,Nt,gM]})}return i})(),BM=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,xd,gu,Ve.AngularSvgIconModule,aC,fr]})}return i})(),zc=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,NM,LM,BM,Ve.AngularSvgIconModule]})}return i})();class kd extends M.ActionHandler{checkRecordAccess(a,e=[]){const r=(a.record??{}).acls??[];return!(!r||!r.length)&&this.checkAccess(a.action??null,r,e)}}let OM=(()=>{class i extends kd{moduleNameMapper;router;key="create";modes=["list"];constructor(e,t){super(),this.moduleNameMapper=e,this.router=t}run(e,t=null){const r=t.params.create||{},o={};o.return_module=r.legacyModuleName,o.return_action=r.returnAction,o.return_id=e.record.id,o[r.mapping.moduleName]=r.legacyModuleName,o[r.mapping.name]=e.record.attributes.name,o[r.mapping.id]=e.record.id,this.router.navigate(["/"+r.module+"/"+r.action],{queryParams:o}).then()}shouldDisplay(e){return!0}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(_n),n.\u0275\u0275inject(Ft.Router))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),RM=(()=>{class i extends kd{key="async-process";modes=M.ALL_VIEW_MODES;constructor(){super()}run(e){}shouldDisplay(e){const t=e?.action?.acl??[];return!t.length||this.checkRecordAccess(e,t)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Wc=(()=>{class i extends si{createRelated;async;constructor(e,t){super(),this.createRelated=e,this.async=t,e.modes.forEach(r=>this.actions[r][e.key]=e),t.modes.forEach(r=>this.actions[r][t.key]=t)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(OM),n.\u0275\u0275inject(RM))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),jM=(()=>{class i extends Zi{actionManager;asyncActionService;message;confirmation;language;selectModalService;metadata;constructor(e,t,r,o,s,c,l){super(e,t,r,o,s,c,l),this.actionManager=e,this.asyncActionService=t,this.message=r,this.confirmation=o,this.language=s,this.selectModalService=c,this.metadata=l}buildActionData(e,t){return{record:t&&t.record||null,action:e}}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Wc),n.\u0275\u0275inject(Kt),n.\u0275\u0275inject(ct),n.\u0275\u0275inject(yn),n.\u0275\u0275inject(Oe),n.\u0275\u0275inject(En),n.\u0275\u0275inject(mt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),kM=(()=>{class i{buffer=new S.Subject;buffer$=this.buffer.asObservable();enabled=!0;subs=[];debounceTime=1e3;constructor(){}init(e=1e3){this.debounceTime=e,this.subs.push(this.buffer$.pipe((0,v.debounceTime)(this.debounceTime)).subscribe(()=>{this.enabled=!0}))}destroy(){this.subs.forEach(e=>e.unsubscribe())}debounce(e){e&&this.enabled&&(this.enabled=!1,e(),this.buffer.next(!0))}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),PM=(()=>{class i{metadata;processService;constructor(e,t){this.metadata=e,this.processService=t}build(e,t){return(0,M.deepClone)({module:"Favorite",type:"Favorite",attributes:{parent_id:t,parent_type:e}})}add(e,t){this.update(e,t,"add")}remove(e,t){this.update(e,t,"remove")}update(e,t,r){const s={favorite:t,action:r};setTimeout(()=>{this.processService.submit("update-favorite",s).pipe((0,v.take)(1)).subscribe(c=>{const l=c?.data?.favorite??null;null!==l?this.addFavoriteToMetadata(l,e):this.removeFavoriteFromMetadata(e,t)})},100)}addFavoriteToMetadata(e,t){const r={id:e?.id??"",module:e?.module??"",attributes:{...e?.attributes??{}}},o=e?.attributes?.parent_id??"",s=this.metadata.getModuleMeta(t),c=s?.favorites??null;if(c){let l=c.filter(u=>(u?.attributes?.parent_id??"")!==o);l.unshift(r),s.favorites=l}this.metadata.setModuleMetadata(t,s)}removeFavoriteFromMetadata(e,t){const r=this.metadata.getModuleMeta(e),o=r?.favorites??null,s=t?.attributes?.parent_id??null;!o||!o.length||!s||(r.favorites=o.filter(c=>(c?.attributes?.parent_id??"")!==s),this.metadata.setModuleMetadata(e,r))}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(mt),n.\u0275\u0275inject($i))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function c9(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275element(1,"scrm-button",1),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("config",e.addButton)}}function l9(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275element(1,"scrm-button",1),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("config",e.removeButton)}}let $M=(()=>{class i{handler;record;addButton;removeButton;favorite=!1;debounceService;constructor(e){this.handler=e}ngOnInit(){this.record&&(this.debounceService=new kM,this.debounceService.init(),this.favorite=this?.record?.favorite??!1,this.addButton={klass:["btn btn-sm btn-outline-light favorite-star favorite-off"],onClick:()=>{this.debounceService.debounce(()=>{this.add()})},icon:"star"},this.removeButton={klass:["btn btn-sm btn-outline-light favorite-star favorite-on"],onClick:()=>{this.debounceService.debounce(()=>{this.remove()})},icon:"star"})}ngOnDestroy(){this.debounceService.destroy()}add(){this.record.favorite=!0,this.favorite=!0;const e=this.handler.build(this.record.module,this.record.id);this.handler.add(this.record.module,e)}remove(){this.record.favorite=!1,this.favorite=!1;const e=this.handler.build(this.record.module,this.record.id);this.handler.remove(this.record.module,e)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(PM))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-favorite-toggle"]],inputs:{record:"record"},decls:2,vars:2,consts:[[4,"ngIf"],[3,"config"]],template:function(t,r){1&t&&(n.\u0275\u0275template(0,c9,2,1,"ng-container",0),n.\u0275\u0275template(1,l9,2,1,"ng-container",0)),2&t&&(n.\u0275\u0275property("ngIf",!r.favorite),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.favorite))},dependencies:[F.NgIf,Nn],encapsulation:2})}return i})(),UM=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Xt]})}return i})();class Pd extends M.ActionHandler{}let VM=(()=>{class i extends Pd{message;key="save";modes=["edit"];constructor(e){super(),this.message=e}run(e){e.store.validate().pipe((0,v.take)(1)).subscribe(t=>{t?e.store.save().pipe((0,v.take)(1)).subscribe(r=>{e.listFilterStore.config.addSavedFilter(e.store.recordStore.extractBaseRecord(r)),e.listFilterStore.applyFilter(),this.message.addSuccessMessageByKey("LBL_SAVED_FILTER_SAVED")}):this.message.addWarningMessageByKey("LBL_VALIDATION_ERRORS")})}shouldDisplay(){return!0}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(ct))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),zM=(()=>{class i extends Pd{message;asyncActionService;key="delete";modes=["edit","detail"];constructor(e,t){super(),this.message=e,this.asyncActionService=t}run(e){const t=`record-${this.key}`,r=e.store.getBaseRecord()||{};r.id?(this.message.removeMessages(),this.asyncActionService.run(t,{action:t,module:r.module,id:r.id},"noop").pipe((0,v.take)(1)).subscribe(()=>{e.listFilterStore.config.removeSavedFilter(r)})):this.message.addWarningMessageByKey("LBL_FILTER_ID_NOT_DEFINED")}shouldDisplay(e){const t=e&&e.store;return!!(t&&t.recordStore.getBaseRecord()||{}).id}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(ct),n.\u0275\u0275inject(Kt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),$d=(()=>{class i extends si{constructor(e,t){super(),e.modes.forEach(r=>this.actions[r][e.key]=e),t.modes.forEach(r=>this.actions[r][t.key]=t)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(VM),n.\u0275\u0275inject(zM))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const WM={id:"",type:"",module:"",attributes:{}};class GM extends od{definitions$;recordSaveGQL;recordFetchGQL;message;recordManager;recordMappers;fieldManager;language;internalState=(0,M.deepClone)(WM);stagingState=(0,M.deepClone)(WM);store=new S.BehaviorSubject(this.internalState);staging=new S.BehaviorSubject(this.stagingState);searchFields={};listColumns=[];constructor(a,e,t,r,o,s,c,l){super(a,e,t,r,o,s),this.definitions$=a,this.recordSaveGQL=e,this.recordFetchGQL=t,this.message=r,this.recordManager=o,this.recordMappers=s,this.fieldManager=c,this.language=l,this.state$=this.store.asObservable().pipe((0,v.tap)(u=>{this.updateStaging(u)})),this.staging$=this.staging.asObservable()}getSearchFields(){return this.searchFields}setSearchFields(a){this.searchFields=a}getListColumns(){return this.listColumns}setListColumns(a){this.listColumns=a}getBaseRecord(){return this.stagingState?(this.mapStagingFields(),(0,M.deepClone)({id:this.stagingState.id,type:this.stagingState.type,module:this.stagingState.module,key:this.stagingState.key,searchModule:this.stagingState.searchModule,criteria:this.stagingState.criteria,attributes:this.stagingState.attributes})):null}extractBaseRecord(a){if(!a)return null;let e=a.criteria??{};return Array.isArray(e)&&!e.length&&(e={}),(0,M.deepClone)({id:a.id,type:a.type,module:a.module,key:a.key,searchModule:a.searchModule,criteria:e,attributes:a.attributes})}initRecord(a){a.attributes=a.attributes||{},a.attributes.search_module=a.searchModule;const e=a?.attributes?.contents?.filters??{};a.attributes.contents=a.attributes.contents||{filters:{}},a.attributes.contents.filters=Array.isArray(e)&&!e.length?{}:e,a.criteria=this.getCriteria(a),this.initCriteriaFields(a,this.getSearchFields()),a.module&&this.definitions&&this.definitions.length>0&&(a.fields=this.recordManager.initFields(a,this.definitions)),this.initOrderByOptions(a)}initOrderByOptions(a){if(!a.fields||!a.fields.orderBy)return;a.fields.orderBy.metadata=a.fields.orderBy.metadata||{};const e=[];this.getListColumns().forEach(t=>{if(!t.default||!0!==t.default)return;const o=this.language.getFieldLabel(t.label||t.fieldDefinition.vname||"",a.searchModule);e.push({value:t.fieldDefinition.name||t.name,label:o})}),a.fields.orderBy.metadata.options$=(0,S.of)(e).pipe((0,v.shareReplay)())}getCriteria(a){return a&&a.criteria?a.criteria.filters?Array.isArray(a.criteria.filters)&&!a.criteria.filters.length?{...a.criteria,filters:{}}:(0,M.deepClone)(a.criteria):{...a.criteria,filters:{}}:{filters:{}}}initCriteriaFields(a,e){a.criteriaFields=a.criteriaFields||{},a.criteriaFormGroup||(a.criteriaFormGroup=new Ce.UntypedFormGroup({})),e&&Object.keys(e).forEach(t=>{this.buildField(a,e[t])})}buildField(a,e){const r=e.type,o={name:e.name,label:e.label,vardefBased:e?.vardefBased??!1,readonly:e?.readonly??!1,display:e?.display??"",type:r,fieldDefinition:{}};e.fieldDefinition&&(o.fieldDefinition=e.fieldDefinition),("bool"===r||"boolean"===r)&&(o.fieldDefinition.options="dom_int_bool"),this.fieldManager.addFilterField(a,o,this.language)}}let Ud=(()=>{class i{recordFetchGQL;recordSaveGQL;message;recordManager;recordMappers;baseMapper;fieldManager;language;constructor(e,t,r,o,s,c,l,u){this.recordFetchGQL=e,this.recordSaveGQL=t,this.message=r,this.recordManager=o,this.recordMappers=s,this.baseMapper=c,this.fieldManager=l,this.language=u,s.register("default",c.getKey(),c)}create(e){return new GM(e,this.recordSaveGQL,this.recordFetchGQL,this.message,this.recordManager,this.recordMappers,this.fieldManager,this.language)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Rr),n.\u0275\u0275inject(jr),n.\u0275\u0275inject(ct),n.\u0275\u0275inject(ci),n.\u0275\u0275inject(M.RecordMapperRegistry),n.\u0275\u0275inject(Qo),n.\u0275\u0275inject(ei),n.\u0275\u0275inject(Oe))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const KM={module:"",searchModule:"",recordID:"",loading:!1,mode:"detail"};let Vd=(()=>{class i{appStateStore;meta;message;fieldManager;language;savedFilterStoreFactory;record$;stagingRecord$;loading$;mode$;meta$;metadataLoading$;vm$;vm;recordStore;searchCriteria;filter;cache$=null;internalState=(0,M.deepClone)(KM);store=new S.BehaviorSubject(this.internalState);state$=this.store.asObservable();subs=[];metadataLoadingState;constructor(e,t,r,o,s,c){this.appStateStore=e,this.meta=t,this.message=r,this.fieldManager=o,this.language=s,this.savedFilterStoreFactory=c,this.metadataLoadingState=new S.BehaviorSubject(!1),this.metadataLoading$=this.metadataLoadingState.asObservable(),this.meta$=this.meta.getMetadata("saved-search",["recordView"]).pipe((0,v.tap)(()=>this.metadataLoadingState.next(!1)),(0,v.map)(l=>{const u={...l.recordView};return u.actions=(u?.actions??[]).filter(d=>"cancel"!==d.key),u})),this.recordStore=c.create(this.getViewFields$()),this.record$=this.recordStore.state$.pipe((0,v.distinctUntilChanged)(),(0,v.map)(l=>l)),this.stagingRecord$=this.recordStore.staging$.pipe((0,v.distinctUntilChanged)(),(0,v.map)(l=>l)),this.loading$=this.state$.pipe((0,v.map)(l=>l.loading)),this.mode$=this.state$.pipe((0,v.map)(l=>l.mode)),this.vm$=this.stagingRecord$.pipe((0,S.combineLatestWith)(this.mode$),(0,v.map)(([l,u])=>(this.vm={record:l,mode:u},this.vm)))}getModuleName(){return this.internalState.module}getRecordId(){return this.internalState.recordID}getViewContext(){return{module:this.getModuleName(),id:this.getRecordId()}}destroy(){this.clear()}init(e,t="detail"){return this.internalState.module="saved-search",this.internalState.recordID=e,this.setMode(t),this.metadataLoadingState.next(!0),(0,S.forkJoin)([this.meta$,this.load()]).pipe((0,v.map)(([o,s])=>s))}initRecord(e,t,r,o,s="detail"){this.updateState({...this.internalState,recordID:t.id,module:"saved-search",searchModule:e,mode:s}),this.metadataLoadingState.next(!0),this.meta$.pipe((0,v.take)(1),(0,v.tap)(()=>{this.metadataLoadingState.next(!1),this.initStaging(e,t,r,o)})).subscribe()}initValidators(e){!e||!Object.keys(e?.fields).length||Object.keys(e.fields).forEach(t=>{const r=e.fields[t];if(!r?.formControl)return;this.resetValidators(r);const s=r?.validators??[],c=r?.asyncValidators??[];s.length&&r?.formControl?.setValidators(s),c.length&&r?.formControl?.setAsyncValidators(c)})}resetValidators(e){e?.formControl?.clearValidators(),e?.formControl?.clearAsyncValidators()}initStaging(e,t,r,o){const s=(0,M.deepClone)(this.recordStore.extractBaseRecord(t));s.searchModule=e,this.recordStore.setSearchFields(r),this.recordStore.setListColumns(o),this.recordStore.setStaging(s),this.initValidators(this.recordStore.getStaging())}clear(){this.cache$=null,this.updateState((0,M.deepClone)(KM)),this.metadataLoadingState.unsubscribe(),this.metadataLoadingState=null,this.recordStore.destroy(),this.recordStore=null}clearAuthBased(){this.clear()}getBaseRecord(){return this.recordStore.getBaseRecord()}getMode(){return this.internalState?this.internalState.mode:null}setMode(e){this.updateState({...this.internalState,mode:e})}save(){return this.appStateStore.updateLoading(`${this.internalState.module}-record-save`,!0),this.recordStore.save().pipe((0,v.catchError)(()=>(this.message.addDangerMessageByKey("LBL_ERROR_SAVING"),(0,S.of)({}))),(0,v.finalize)(()=>{this.appStateStore.updateLoading(`${this.internalState.module}-record-save`,!1)}))}validate(){return(0,S.forkJoin)([this.recordStore.validate(),this.validateCriteria()]).pipe((0,v.map)(([e,t])=>e&&t))}validateCriteria(){const t=this.recordStore.getStaging().criteriaFormGroup;return t.markAllAsTouched(),t.statusChanges.pipe((0,v.startWith)(t.status),(0,v.filter)(r=>"PENDING"!==r),(0,v.take)(1),(0,v.map)(r=>"VALID"===r))}load(e=!0){return this.appStateStore.updateLoading(`${this.internalState.module}-record-fetch`,!0),this.recordStore.retrieveRecord(this.internalState.module,this.internalState.recordID,e).pipe((0,v.tap)(t=>{this.appStateStore.updateLoading(`${this.internalState.module}-record-fetch`,!1),this.updateState({...this.internalState,recordID:t.id,module:t.module})}))}getViewFieldsKeys$(){return this.meta$.pipe((0,v.map)(e=>{const t=[];return e.panels.forEach(r=>{r.rows.forEach(o=>{o.cols.forEach(s=>{t.push(s.name)})})}),t}))}getViewFields$(){return this.meta$.pipe((0,v.map)(e=>{const t=[];return e.panels.forEach(r=>{r.rows.forEach(o=>{o.cols.forEach(s=>{t.push(s)})})}),t}))}updateState(e){this.store.next(this.internalState=e)}getMetadata(){return(this.meta.get()||{}).recordView||{}}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Gt),n.\u0275\u0275inject(mt),n.\u0275\u0275inject(ct),n.\u0275\u0275inject(ei),n.\u0275\u0275inject(Oe),n.\u0275\u0275inject(Ud))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),HM=(()=>{class i extends jr{apollo;constructor(e){super(e),this.apollo=e}save(e){return super.save(e)}mapToRecord(e){if(!e.data||!e.data.saveRecord||!e.data.saveRecord.record)return null;const t={id:e.data.saveRecord.record._id,type:e.data.saveRecord.record.type||"",module:e.data.saveRecord.record.module||"",attributes:e.data.saveRecord.record.attributes||null};t.key=t.id||t.attributes&&t.attributes.id||"";const r=t.attributes&&t.attributes.contents||null;return r&&(t.criteria=r),t}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(fe.Apollo))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),ZM=(()=>{class i{getKey(){return"criteria"}map(e){const t=e;if(t.criteria){const o=t?.attributes?.contents??{};o.filters=(0,M.deepClone)(t?.criteria?.filters??{}),e.fields.name&&(o.name=e.fields.name.value,t.criteria.name=o.name),e.fields.orderBy&&(o.orderBy=e.fields.orderBy.value,t.criteria.orderBy=o.orderBy),e.fields.sortOrder&&(o.sortOrder=e.fields.sortOrder.value,t.criteria.sortOrder=o.sortOrder),e.attributes.search_module&&(o.searchModule=e.attributes.search_module,t.criteria.searchModule=o.searchModule),t.attributes.contents=o}let r=t.key||"";"default"===r&&(r=""),t.id=r,t.attributes.id=r}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),zd=(()=>{class i{recordFetchGQL;recordSaveGQL;appStateStore;languageStore;metadataStore;message;recordManager;fieldManager;recordMappers;baseMapper;savedSearchMapper;savedFilterStoreFactory;constructor(e,t,r,o,s,c,l,u,d,f,p){this.recordFetchGQL=e,this.recordSaveGQL=t,this.appStateStore=r,this.languageStore=o,this.metadataStore=s,this.message=c,this.recordManager=l,this.fieldManager=u,this.recordMappers=d,this.baseMapper=f,this.savedSearchMapper=p,this.savedFilterStoreFactory=new Ud(e,t,c,l,d,f,u,o),this.recordMappers.register("saved-search",this.savedSearchMapper.getKey(),this.savedSearchMapper)}create(){return new Vd(this.appStateStore,this.metadataStore,this.message,this.fieldManager,this.languageStore,this.savedFilterStoreFactory)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Rr),n.\u0275\u0275inject(HM),n.\u0275\u0275inject(Gt),n.\u0275\u0275inject(Oe),n.\u0275\u0275inject(mt),n.\u0275\u0275inject(ct),n.\u0275\u0275inject(ci),n.\u0275\u0275inject(ei),n.\u0275\u0275inject(M.RecordMapperRegistry),n.\u0275\u0275inject(Qo),n.\u0275\u0275inject(ZM))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Wd=(()=>{class i{message;savedFilterStoreFactory;config;panelMode="closable";mode="filter";isCollapsed$;closeButton;myFilterButton;gridButtons=null;fields=[];special=[];vm$;filterStore;savedFilters=[];displayFields;collapse;searchFields;subs=[];constructor(e,t){this.message=e,this.savedFilterStoreFactory=t,this.filterStore=t.create()}init(e){this.config=e,this.initSearchFields(),this.initConfigUpdatesSubscription(),this.vm$=this.filterStore.stagingRecord$.pipe((0,v.map)(t=>[t]),(0,v.tap)(([t])=>{this.reset(),this.splitCriteriaFields(t),this.initDisplayFields(),"detail"!==this.filterStore.getMode()&&this.initGridButtons(),this.initHeaderButtons(),this.initMyFiltersButton(this.savedFilters)})),this.config.panelMode&&(this.panelMode=this.config.panelMode),this.collapse=new S.BehaviorSubject(!1),this.isCollapsed$=this.collapse.asObservable(),(0,M.isVoid)(this.config.isCollapsed)||this.collapse.next(this.config.isCollapsed),this.reset(),this.initGridButtons(),this.initHeaderButtons()}clear(){this.subs.forEach(e=>e.unsubscribe()),this.reset(),this.filterStore.clear(),this.filterStore=null,this.collapse.unsubscribe()}clearAuthBased(){this.clear()}reset(){this.fields=[],this.special=[]}applyFilter(){this.filterStore.validateCriteria().pipe((0,v.take)(1)).subscribe(e=>{if(e)return"collapsible"===this.config.panelMode&&this.config.collapseOnSearch&&this.collapse.next(!0),this.config.onSearch(),void this.config.updateFilter(this.filterStore.getBaseRecord());this.message.addWarningMessageByKey("LBL_VALIDATION_ERRORS")})}clearFilter(){this.config.resetFilter(!1)}initConfigUpdatesSubscription(){this.subs.push(this.config.filter$.pipe((0,S.combineLatestWith)(this.config.searchFields$),(0,v.tap)(([e,t])=>{this.reset();let r="edit";(e.readonly??!1)&&(r="detail",this.mode=r),this.filterStore.initRecord(this.config.module,e,t,this.config.listFields,r)})).subscribe()),this.subs.push(this.config.savedFilters$.pipe((0,v.map)(e=>[e]),(0,v.tap)(([e])=>{this.savedFilters=e,this.initMyFiltersButton(e)})).subscribe())}splitCriteriaFields(e){!e||!e.criteriaFields||Object.entries(e.criteriaFields).forEach(([t,r])=>{if((r.name||t).includes("_only"))this.special.push(r);else{if(r.vardefBased){const c=(e?.criteria?.filters??{})[t]??{};!(0,ne.isEmpty)(c?.operator)&&"none"===r.display&&(r.display="default")}this.fields.push(r)}})}initSearchFields(){this.subs.push(this.config.searchFields$.subscribe(e=>{this.searchFields=e}))}initDisplayFields(){(!this.searchFields||(0,M.emptyObject)(this.searchFields)||!this.fields)&&(this.displayFields=[]);const e=[];this.fields.forEach(t=>{"none"===t.display||"groupField"===t.source||(this.searchFields[t.name]||(t.readonly=!0),e.push(t))}),this.displayFields=e}initGridButtons(){this.gridButtons=[{labelKey:"LBL_CLEAR_BUTTON_LABEL",klass:["clear-filters-button","btn","btn-outline-danger","btn-sm"],onClick:this.clearFilter.bind(this)},{labelKey:"LBL_SEARCH_BUTTON_LABEL",klass:["filter-button","btn","btn-danger","btn-sm"],onClick:this.applyFilter.bind(this)}]}initHeaderButtons(){this.closeButton={onClick:()=>{this.config.onClose()}}}initMyFiltersButton(e){if(!e||e.length<1)return void(this.myFilterButton=null);const t={wrapperKlass:["filter-select"],labelKey:"LBL_SAVED_FILTER_SHORTCUT",klass:["btn","btn-outline-light","btn-sm"],items:[]},r=this.filterStore.getRecordId();e.forEach(o=>{const s={label:o.attributes.name,onClick:()=>{this.config.setOpenFilter(o)}};o.key===r&&(t.label=o.attributes.name,t.labelKey="",s.icon="filter",s.iconKlass="small",s.klass="active"),t.items.push(s)}),this.myFilterButton=t}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(ct),n.\u0275\u0275inject(zd))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),qM=(()=>{class i extends Zi{store;listFilterStore;language;actionManager;asyncActionService;message;confirmation;selectModalService;metadata;constructor(e,t,r,o,s,c,l,u,d){super(o,s,c,l,r,u,d),this.store=e,this.listFilterStore=t,this.language=r,this.actionManager=o,this.asyncActionService=s,this.message=c,this.confirmation=l,this.selectModalService=u,this.metadata=d}getActions(e){return this.store.meta$.pipe((0,S.combineLatestWith)(this.store.mode$,this.store.stagingRecord$,this.language.vm$),(0,v.map)(([t,r])=>r&&t?this.parseModeActions(t.actions,r):[]))}buildActionData(e,t){return{store:this.store,listFilterStore:this.listFilterStore,action:e}}getMode(){return this.store.getMode()}getModuleName(e){return this.store.getModuleName()}reload(e,t,r){this.store.load(!1).pipe((0,v.take)(1)).subscribe()}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Vd),n.\u0275\u0275inject(Wd),n.\u0275\u0275inject(Oe),n.\u0275\u0275inject($d),n.\u0275\u0275inject(Kt),n.\u0275\u0275inject(ct),n.\u0275\u0275inject(yn),n.\u0275\u0275inject(En),n.\u0275\u0275inject(mt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),JM=(()=>{class i{language;actionManager;asyncActionService;message;confimation;selectModalService;metadata;constructor(e,t,r,o,s,c,l){this.language=e,this.actionManager=t,this.asyncActionService=r,this.message=o,this.confimation=s,this.selectModalService=c,this.metadata=l}create(e,t){return new qM(e,t,this.language,this.actionManager,this.asyncActionService,this.message,this.confimation,this.selectModalService,this.metadata)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Oe),n.\u0275\u0275inject($d),n.\u0275\u0275inject(Kt),n.\u0275\u0275inject(ct),n.\u0275\u0275inject(yn),n.\u0275\u0275inject(En),n.\u0275\u0275inject(mt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),QM=(()=>{class i{message;savedFilterStoreFactory;constructor(e,t){this.message=e,this.savedFilterStoreFactory=t}create(){return new Wd(this.message,this.savedFilterStoreFactory)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(ct),n.\u0275\u0275inject(zd))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function u9(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",6),n.\u0275\u0275element(1,"scrm-dropdown-button",7),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("config",e.store.myFilterButton)}}function d9(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",13),n.\u0275\u0275element(1,"input",14),n.\u0275\u0275elementStart(2,"label",15),n.\u0275\u0275element(3,"scrm-label",16),n.\u0275\u0275elementEnd()()),2&i){const e=a.$implicit;n.\u0275\u0275advance(1),n.\u0275\u0275property("value",e.value),n.\u0275\u0275advance(2),n.\u0275\u0275property("labelKey",e.labelKey)}}function f9(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",11),n.\u0275\u0275template(1,d9,4,2,"div",12),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext(3);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",e.store.special)}}function p9(i,a){1&i&&n.\u0275\u0275element(0,"scrm-button",7),2&i&&n.\u0275\u0275property("config",a.$implicit)}function m9(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",17),n.\u0275\u0275template(1,p9,1,1,"scrm-button",18),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext(3);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",e.store.gridButtons)}}function g9(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"scrm-field-grid",8),n.\u0275\u0275template(1,f9,2,1,"div",9),n.\u0275\u0275template(2,m9,2,1,"div",10),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext().ngIf,t=n.\u0275\u0275nextContext();n.\u0275\u0275property("actions",!0)("appendActions",!1)("fieldMode",t.store.mode)("fields",t.store.displayFields)("record",e)("special",t.store.special.length>0),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.store.special.length>0),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.store.gridButtons)}}function h9(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275element(1,"scrm-record-grid",7),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("config",e.gridConfig)}}function v9(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"scrm-panel",1),n.\u0275\u0275template(1,u9,2,1,"div",2),n.\u0275\u0275elementStart(2,"div",3),n.\u0275\u0275template(3,g9,3,8,"scrm-field-grid",4),n.\u0275\u0275template(4,h9,2,1,"ng-container",5),n.\u0275\u0275elementEnd()()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275propertyInterpolate1("klass","filter-panel m-0 ",e.config&&e.config.klass||"",""),n.\u0275\u0275property("showHeader",e.config.displayHeader)("close",e.store.closeButton)("isCollapsed$",e.store.isCollapsed$)("mode",e.store.panelMode)("titleKey","LBL_BASIC_FILTER"),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.store.myFilterButton),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",e.store.displayFields&&e.store.displayFields.length),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.config&&e.config.savedFilterEdit&&"detail"!==e.store.filterStore.getMode())}}let Gc=(()=>{class i{storeFactory;actionAdapterFactory;config;vm$;store;filterActionsAdapter;gridConfig;constructor(e,t){this.storeFactory=e,this.actionAdapterFactory=t,this.store=e.create(),this.filterActionsAdapter=t.create(this.store.filterStore,this.store)}ngOnInit(){this.store.init(this.config),this.vm$=this.store.vm$.pipe((0,v.map)(([e])=>{const t={...e};return t.fields=e.criteriaFields,t})),this.gridConfig={record$:this.store.filterStore.stagingRecord$,mode$:this.store.filterStore.mode$,fields$:this.store.filterStore.getViewFieldsKeys$(),actions:this.filterActionsAdapter,appendActions:!0,klass:"mt-2 p-2 saved-search-container rounded",buttonClass:"btn btn-outline-danger btn-sm",labelDisplay:"inline",rowClass:{"align-items-start":!0,"align-items-center":!1},colAlignItems:"align-items-start",maxColumns$:(0,S.of)(4).pipe((0,v.shareReplay)(1)),sizeMap$:(0,S.of)({handset:1,tablet:2,web:4,wide:4}).pipe((0,v.shareReplay)(1))}}ngOnDestroy(){this.store.clear(),this.store=null}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(QM),n.\u0275\u0275directiveInject(JM))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-list-filter"]],inputs:{config:"config"},decls:2,vars:3,consts:[[3,"showHeader","close","isCollapsed$","mode","klass","titleKey",4,"ngIf"],[3,"showHeader","close","isCollapsed$","mode","klass","titleKey"],["panel-header-button","",4,"ngIf"],["panel-body","",1,"p-2","filter-body"],[3,"actions","appendActions","fieldMode","fields","record","special",4,"ngIf"],[4,"ngIf"],["panel-header-button",""],[3,"config"],[3,"actions","appendActions","fieldMode","fields","record","special"],["class","float-right mt-4","field-grid-special","",4,"ngIf"],["class","mt-4 align-self-end","field-grid-actions","",4,"ngIf"],["field-grid-special","",1,"float-right","mt-4"],["class","d-inline-block form-check mb-2 mr-sm-2",4,"ngFor","ngForOf"],[1,"d-inline-block","form-check","mb-2","mr-sm-2"],["type","checkbox",1,"form-check-input",3,"value"],[1,"form-check-label"],[3,"labelKey"],["field-grid-actions","",1,"mt-4","align-self-end"],[3,"config",4,"ngFor","ngForOf"]],template:function(t,r){1&t&&(n.\u0275\u0275template(0,v9,5,9,"scrm-panel",0),n.\u0275\u0275pipe(1,"async")),2&t&&n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(1,1,r.vm$))},dependencies:[F.NgForOf,F.NgIf,Nn,ua,Xu,Xs,Ot,Sd,F.AsyncPipe],encapsulation:2})}return i})(),Kc=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Xt,Pr,uo,Lr,Nt,Xa,Xt]})}return i})(),_9=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,ro,zc,Nt,mr,Kc,Xt]})}return i})();function y9(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275element(1,"scrm-record-grid",4),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("config",e.getGridConfig())}}function b9(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"scrm-panel",1)(1,"div",2),n.\u0275\u0275template(2,y9,2,1,"ng-container",3),n.\u0275\u0275elementEnd()()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275propertyInterpolate1("klass","record-panel ",e.config&&e.config.klass||"",""),n.\u0275\u0275property("close",e.closeButton)("isCollapsed$",e.isCollapsed$)("mode",e.panelMode)("titleKey",e.config.title||""),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",e.config)}}n.\u0275\u0275setComponentScope(na,[F.NgIf,qo,Vc,Ot,pr,Gc,Nn],[F.AsyncPipe]);let XM=(()=>{class i{config;closeButton;panelMode="closable";isCollapsed$;vm$;collapse;constructor(){}ngOnInit(){this.vm$=this.config?.store?.vm$??(0,S.of)({}),this.initCloseButton(),this.config.panelMode&&(this.panelMode=this.config.panelMode),this.collapse=new S.BehaviorSubject(!1),this.isCollapsed$=this.collapse.asObservable(),(0,M.isVoid)(this.config.isCollapsed)||this.collapse.next(this.config.isCollapsed)}ngOnDestroy(){}getGridConfig(){return{record$:this.config?.store?.stagingRecord$??(0,S.of)(null),mode$:this.config?.store?.mode$??(0,S.of)("detail"),fields$:this.config?.store?.getViewFieldsKeys$?.()??(0,S.of)([]),actions:this.config?.actions??[],klass:"mt-2 rounded",buttonClass:"btn btn-outline-danger btn-sm",maxColumns$:(0,S.of)(4).pipe((0,v.shareReplay)(1)),sizeMap$:(0,S.of)({handset:1,tablet:2,web:3,wide:4}).pipe((0,v.shareReplay)(1))}}initCloseButton(){this.closeButton={onClick:()=>{this.config.onClose()}}}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-record-panel"]],inputs:{config:"config"},decls:2,vars:3,consts:[[3,"close","isCollapsed$","mode","titleKey","klass",4,"ngIf"],[3,"close","isCollapsed$","mode","titleKey","klass"],["panel-body","",1,"pl-2","pr-2"],[4,"ngIf"],[3,"config"]],template:function(t,r){1&t&&(n.\u0275\u0275template(0,b9,3,6,"scrm-panel",0),n.\u0275\u0275pipe(1,"async")),2&t&&n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(1,1,r.vm$))},dependencies:[F.NgIf,ua,Sd,F.AsyncPipe],encapsulation:2})}return i})();class YM extends M.ActionHandler{}let eS=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Xt,Pr,uo,Lr,Nt,Xt,Xa]})}return i})(),Gd=(()=>{class i extends rd{appStateStore;meta;message;fieldManager;language;storeFactory;constructor(e,t,r,o,s,c){super(e,t,r,o,s,c),this.appStateStore=e,this.meta=t,this.message=r,this.fieldManager=o,this.language=s,this.storeFactory=c}getViewFields$(){return this.meta$.pipe((0,v.map)(e=>e.fields))}getViewFieldsKeys$(){return this.meta$.pipe((0,v.map)(e=>{if(!e.fields||!e.fields.length)return[];const t=[];return e.fields.forEach(r=>{t.push(r.name)}),t}))}initRecord(e,t="detail",r=!0){super.initRecord(e,t,r),this.setRecord(e)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Gt),n.\u0275\u0275inject(mt),n.\u0275\u0275inject(ct),n.\u0275\u0275inject(ei),n.\u0275\u0275inject(Oe),n.\u0275\u0275inject(kr))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),tS=(()=>{class i{recordFetchGQL;recordSaveGQL;appStateStore;languageStore;metadataStore;message;recordManager;fieldManager;recordStoreFactory;constructor(e,t,r,o,s,c,l,u,d){this.recordFetchGQL=e,this.recordSaveGQL=t,this.appStateStore=r,this.languageStore=o,this.metadataStore=s,this.message=c,this.recordManager=l,this.fieldManager=u,this.recordStoreFactory=d}create(){return new Gd(this.appStateStore,this.metadataStore,this.message,this.fieldManager,this.languageStore,this.recordStoreFactory)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Rr),n.\u0275\u0275inject(jr),n.\u0275\u0275inject(Gt),n.\u0275\u0275inject(Oe),n.\u0275\u0275inject(mt),n.\u0275\u0275inject(ct),n.\u0275\u0275inject(ci),n.\u0275\u0275inject(ei),n.\u0275\u0275inject(kr))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Vr=(()=>{class i{config;context;context$;static \u0275fac=function(t){return new(t||i)};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["ng-component"]],inputs:{config:"config",context:"context",context$:"context$"},decls:0,vars:0,template:function(t,r){},encapsulation:2})}return i})();const C9={module:"",query:{},statistic:{id:"",data:{}},loading:!1};let Kd=(()=>{class i extends Rc{fetchGQL;cache$=null;internalState=(0,M.deepClone)(C9);store=new S.BehaviorSubject(this.internalState);constructor(e){super(e),this.fetchGQL=e,this.state$=this.store.asObservable(),this.statistic$=this.state$.pipe((0,v.map)(t=>t.statistic),(0,v.distinctUntilChanged)())}updateState(e){super.updateState(e)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Hi))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),nS=(()=>{class i{traverse(e,t,r){e.singleSeries&&e.singleSeries.forEach(o=>{t.visit(o,r)}),e.multiSeries&&e.multiSeries.forEach(o=>{o.series.forEach(s=>{t.visit(s,r)})})}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),iS=(()=>{class i{currencyService;preferences;constructor(e,t){this.currencyService=e,this.preferences=t}toUserFormat(e,t=null){const r=parseFloat(e);if(!isFinite(r))return e;const o=this.currencyService.getUserCurrency();return this.currencyService.baseToCurrency(o.id,r).toString()}toInternalFormat(e){const t=parseFloat(e);if(!isFinite(t))return e;const r=this.currencyService.getUserCurrency();return this.currencyService.currencyToBase(r.id,t).toString()}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Ra),n.\u0275\u0275inject(Vt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),rS=(()=>{class i{currencyUnitConverter;map={};constructor(e){this.currencyUnitConverter=e,this.addUnitConverter("currency",e)}addUnitConverter(e,t){this.map[e]=t}toUserFormat(e,t,r){if(!e)return t;const o=this.map[e];return o?o.toUserFormat(t,r):t}toInternalFormat(e,t){if(!e)return t;const r=this.map[e];return r?r.toInternalFormat(t):t}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(iS))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),oS=(()=>{class i{converter;constructor(e){this.converter=e}visit(e,t){const r=t?.dataType??null,o=t?.direction??"user-unit";if(!r)return;const s=parseFloat(e.value.toString());if(isFinite(s)){if("user-unit"===o)return void(e.value=this.converter.toUserFormat(r,s.toString()));e.value=this.converter.toInternalFormat(r,s.toString())}}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(rS))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Hd=(()=>{class i{traverser;dataTypeMapper;registry={};constructor(e,t){this.traverser=e,this.dataTypeMapper=t,this.addMapper("data-type-unit-converter",t)}addMapper(e,t){this.registry[e]=t}map(e,t,r){const o=this?.registry[t]??null;o&&this.traverser.traverse(e,o,r)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(nS),n.\u0275\u0275inject(oS))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const M9={module:"",query:{},statistic:{id:"",data:{}},loading:!1};let aS=(()=>{class i extends Kd{fetchGQL;formatter;seriesMapper;internalState=(0,M.deepClone)(M9);store=new S.BehaviorSubject(this.internalState);defaultOptions={};constructor(e,t,r){super(e),this.fetchGQL=e,this.formatter=t,this.seriesMapper=r,this.state$=this.store.asObservable(),this.statistic$=this.state$.pipe((0,v.map)(o=>o.statistic),(0,v.distinctUntilChanged)()),this.loading$=this.state$.pipe((0,v.map)(o=>o.loading),(0,v.distinctUntilChanged)())}setDefaultOptions(e){this.defaultOptions=e}getDataSource(){return this.internalState.dataSource}addNewState(e){if(!e.metadata||!e.metadata.dataType)return;this.injectDefaultValues(e);const t=this.buildCharDataSource(e);this.updateState({...this.internalState,statistic:e,dataSource:t,loading:!1})}injectDefaultValues(e){e.metadata.chartOptions?Object.keys(this.defaultOptions).forEach(t=>{t in e.metadata.chartOptions||(e.metadata.chartOptions[t]=this.defaultOptions[t])}):e.metadata.chartOptions=(0,M.deepClone)(this.defaultOptions)}buildCharDataSource(e){const t=e.metadata.dataType||"";let r=null;const o=e.metadata&&e.metadata.digits||null;return null!==o&&(r={digits:o}),{options:e.metadata.chartOptions||{},getResults:()=>(0,S.of)(this.buildSeriesResult(e)).pipe((0,v.shareReplay)(1)),tickFormatting:s=>this.formatter.toUserFormat(t,s,r),tooltipFormatting:s=>this.formatter.toUserFormat(t,s,r)}}buildSeriesResult(e){const t=e.metadata.dataType||"",r={},o=e.data.singleSeries||null;o&&(r.singleSeries=o);const s=e.data.multiSeries||null;return s&&(r.multiSeries=s),this.seriesMapper.map(r,"data-type-unit-converter",{dataType:t}),r}updateState(e){super.updateState(e)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Hi),n.\u0275\u0275inject(it),n.\u0275\u0275inject(Hd))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),sS=(()=>{class i{fetchGQL;formatter;seriesMapper;constructor(e,t,r){this.fetchGQL=e,this.formatter=t,this.seriesMapper=r}create(){return new aS(this.fetchGQL,this.formatter,this.seriesMapper)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Hi),n.\u0275\u0275inject(it),n.\u0275\u0275inject(Hd))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function S9(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"option",18),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&i){const e=a.$implicit,t=n.\u0275\u0275nextContext(3);n.\u0275\u0275property("value",t.getKey(e)),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",t.language.getFieldLabel(e.labelKey)," ")}}function D9(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"div",13)(1,"div",14)(2,"form",15)(3,"select",16),n.\u0275\u0275listener("ngModelChange",function(){n.\u0275\u0275restoreView(e);const r=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(r.onChartSelect())})("ngModelChange",function(r){n.\u0275\u0275restoreView(e);const o=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(o.selectedChart=r)}),n.\u0275\u0275template(4,S9,2,2,"option",17),n.\u0275\u0275elementEnd()()()()}if(2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(3),n.\u0275\u0275property("ngModel",e.selectedChart),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",e.configuredCharts)}}function w9(i,a){if(1&i&&n.\u0275\u0275element(0,"scrm-chart",20),2&i){const e=n.\u0275\u0275nextContext(3);n.\u0275\u0275property("dataSource",e.dataSource)("type",e.chartType)}}function x9(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,w9,1,2,"scrm-chart",19),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.dataSource&&e.chartType)}}function E9(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",21),n.\u0275\u0275element(1,"scrm-loading-spinner",22),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275classProp("m-5",!e.dataSource),n.\u0275\u0275advance(1),n.\u0275\u0275property("overlay",!0)}}function F9(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"p",23),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",e.language.getFieldLabel(e.messageLabelKey)," ")}}function I9(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"scrm-widget-panel",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5),n.\u0275\u0275template(5,D9,5,2,"div",6),n.\u0275\u0275elementStart(6,"div",7)(7,"div",8)(8,"div",9),n.\u0275\u0275template(9,x9,2,1,"ng-container",10),n.\u0275\u0275template(10,E9,2,3,"div",11),n.\u0275\u0275template(11,F9,2,1,"p",12),n.\u0275\u0275elementEnd()()()()()()()()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275property("title",e.title),n.\u0275\u0275advance(5),n.\u0275\u0275property("ngIf",e.isConfigured&&e.chartOptions.toggle),n.\u0275\u0275advance(4),n.\u0275\u0275property("ngIf",e.selectedChart&&!e.loading),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.loading),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!(e.loading||e.isConfigured()&&e.dataSource))}}let cS=(()=>{class i extends Vr{language;factory;charts={};titleLabelKey="LBL_INSIGHTS";title="";messageLabelKey="LBL_CHART_NOT_FOUND";selectedChart="";chartType="";dataSource;vm$;loading$;appStrings$;loading=!0;subs=[];constructor(e,t){super(),this.language=e,this.factory=t,this.language=e??{appStrings$:(0,S.of)({})}}ngOnInit(){if(this.appStrings$=this.language?.appStrings$??(0,S.of)({}),!1===this.validateConfig())return;this.context$&&this.subs.push(this.context$.subscribe(r=>{this.context=r,Object.keys(this.charts).forEach(o=>{this.charts[o].store.context=r})}));const e=this.config.options,t=e.charts;e.defaultChart&&(this.selectedChart=e.defaultChart||""),this.setupCharts(t),this.setHeaderTitle(e),this.reloadSelectedChart(),this.setupLoading(),this.setupVM(),this.setupReload()}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}get configuredCharts(){return this.chartOptions.charts||[]}get chartOptions(){return this.config.options||{}}isConfigured(){return!(!this.config.options.charts||!this.config.options.charts.length)}getLabelKey(e){return e.statistic.metadata&&e.statistic.metadata.labelKey||this.charts[e.query.key].labelKey}getKey(e){return e.chartKey||e.statisticsType||""}validateConfig(){if(!this.context||!this.context.module)return this.messageLabelKey="LBL_BAD_CONFIG_BAD_CONTEXT",!1;if(!this.config)return this.messageLabelKey="LBL_BAD_CONFIG_NO_CONFIG",!1;const e=this.config.options;return!!(e&&e.charts&&e.charts.length)||(this.messageLabelKey="LBL_BAD_CONFIG_NO_STATISTICS_KEY",!1)}setupCharts(e){this.selectedChart="",e.forEach(t=>{const r=this.getKey(t);r&&(this.selectedChart||(this.selectedChart=r||"",this.chartType=t.chartType),this.buildChartInfo(r,t),this.initChartStore(r,t))})}buildChartInfo(e,t){this.charts[e]={key:e,labelKey:t.labelKey||"",chartType:t.chartType,statisticsType:t.statisticsType,store:this.factory.create(),reload:!0}}initChartStore(e,t){this.charts[e].store.init(this.context.module,{key:t.statisticsType,context:{...this.context}},!1),this.charts[e].store.setDefaultOptions(t.chartOptions)}setHeaderTitle(e){if(this.config.labelKey&&(this.titleLabelKey=this.config.labelKey),e.headerTitle){if(!this.charts||!this.charts[this.selectedChart]||!this.charts[this.selectedChart].labelKey)return;this.titleLabelKey=this.charts[this.selectedChart].labelKey}this.title=this.language.getFieldLabel(this.titleLabelKey)}onChartSelect(){this.dataSource=null,this.chartType=this.charts[this.selectedChart].chartType,this.reloadSelectedChart(!1)}setupVM(){const e=[];Object.keys(this.charts).forEach(r=>e.push(this.charts[r].store.state$));let t=(0,S.of)([]);if(e.length<1)t=(0,S.of)([]);else if(1===e.length)t=e[0].pipe((0,v.map)(r=>[r]));else{let o,r=null;[r,...o]=e,t=r.pipe((0,S.combineLatestWith)(o))}this.vm$=t.pipe((0,S.combineLatestWith)(this.language.appStrings$),(0,v.map)(([r,o])=>({statistics:this.mapChartData(r),appStrings:o})))}mapChartData(e){const t={};return e.forEach(r=>{r.query.key&&(t[r.query.key]=r,this.charts[r.query.key].labelKey=this.getLabelKey(r))}),t}setupReload(){this.config.reload$&&this.subs.push(this.config.reload$.subscribe(()=>{!0!==this.loading&&(this.loading=!0,Object.keys(this.charts).forEach(e=>{this.charts[e].reload=!0}),this.reloadSelectedChart())}))}setupLoading(){const e=[];Object.keys(this.charts).forEach(r=>e.push(this.charts[r].store.loading$));let t=(0,S.of)([]);if(e.length<1)t=(0,S.of)([]);else if(1===e.length)t=e[0].pipe((0,v.map)(r=>[r]));else{let o,r=null;[r,...o]=e,t=r.pipe((0,S.combineLatestWith)(o))}this.loading$=t.pipe((0,v.map)(r=>{if(!r||r.length<1)return this.loading=!1,!1;let o=!1;return r.forEach(s=>{o=o||s}),this.loading=o,o})),this.subs.push(this.loading$.subscribe())}reloadSelectedChart(e=!1){!this.charts||!this.charts[this.selectedChart]||!this.charts[this.selectedChart].store||this.charts[this.selectedChart].store.load(e=e&&!this.charts[this.selectedChart].reload).pipe((0,v.take)(1),(0,v.tap)(()=>{this.dataSource=this.charts[this.selectedChart]?.store?.getDataSource()??null,this.charts[this.selectedChart].reload=!1})).subscribe()}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(Oe),n.\u0275\u0275directiveInject(sS))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["chart-sidebar-widget"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:2,vars:3,consts:[[3,"title",4,"ngIf"],[3,"title"],["widget-body",""],[1,"widget-background","chart-sidebar-widget"],[1,"mb-2","ml-1","mr-1"],[1,"container-fluid"],["class","row",4,"ngIf"],[1,"row","mt-3","chart-widget"],[1,"col","pl-0","pr-0","pb-1","pt-1","d-flex","justify-content-center"],[1,"flex-grow-1"],[4,"ngIf"],["class","chart-loading",3,"m-5",4,"ngIf"],["class","lead text-center pt-3",4,"ngIf"],[1,"row"],[1,"col","pr-2","pl-2"],[1,"login-form","mb-0","mt-2","w-100"],["name","chart",1,"m-0","w-100",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[3,"dataSource","type",4,"ngIf"],[3,"dataSource","type"],[1,"chart-loading"],[3,"overlay"],[1,"lead","text-center","pt-3"]],template:function(t,r){1&t&&(n.\u0275\u0275template(0,I9,12,5,"scrm-widget-panel",0),n.\u0275\u0275pipe(1,"async")),2&t&&n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(1,1,r.vm$))},dependencies:[F.NgForOf,F.NgIf,Ga,Ce.\u0275NgNoValidate,Ce.NgSelectOption,Ce.\u0275NgSelectMultipleOption,Ce.SelectControlValueAccessor,Ce.NgControlStatus,Ce.NgControlStatusGroup,Ce.NgModel,Ce.NgForm,A0,pr,F.AsyncPipe],encapsulation:2})}return i})(),lS=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,hr,Ce.FormsModule,T0,mr]})}return i})(),uS=(()=>{class i{listStoreFactory;recordList;viewContext;constructor(e){this.listStoreFactory=e,this.recordList=e.create()}clear(){this.recordList.clear(),this.recordList=null}clearAuthBased(){this.recordList.clearAuthBased()}init(e){this.recordList.init("history",!1,"list_max_entries_per_subpanel"),this.initViewContext(e)}load(e=!0){return this.recordList.load(e)}initSearchCriteria(e,t){this.recordList.criteria={preset:{type:"history-timeline",params:{parentModule:this.viewContext.module,parentId:this.viewContext.id,offset:e,limit:t}}}}initViewContext(e){this.viewContext=e}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Ni))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),Zd=(()=>{class i{listStoreFactory;constructor(e){this.listStoreFactory=e}create(){return new uS(this.listStoreFactory)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Ni))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),qd=(()=>{class i{historyTimelineStoreFactory;loading=!1;cache=[];dataStream=new S.BehaviorSubject(this.cache);dataStream$=this.dataStream.asObservable();defaultPageSize=10;store;constructor(e){this.historyTimelineStoreFactory=e}init(e){this.store=this.historyTimelineStoreFactory.create(),this.store.init(e)}fetchTimelineEntries(e){if(!0!==this.loading)return!0===e&&(this.cache.length=0),this.store.initSearchCriteria(this.cache.length,this.defaultPageSize),this.loading=!0,this.store.load(!1).pipe((0,v.take)(1)).subscribe(t=>{this.loading=!1;const r=t.records;(0,M.emptyObject)(r)||Object.keys(r).forEach(o=>{this.cache.push(this.buildTimelineEntry(r[o]))}),this.dataStream.next([...this.cache])}),this.dataStream$}getActivityGridColor(e){return{calls:"yellow",tasks:"green",meetings:"blue",notes:"orange",audit:"purple",history:"purple"}[e]||"yellow"}buildTimelineEntry(e){const t=e.module;let r=e.attributes.module_name;"audit"===t&&(r="History");const s={module:t,icon:r,color:this.getActivityGridColor(e.module),title:{type:"varchar",value:e.attributes.name},user:{type:"varchar",value:e.attributes.assigned_user_name.user_name},date:{type:"datetime",value:e.attributes.date_end},record:e};return"audit"===t&&(s.description={type:"html",value:e.attributes.description}),s}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Zd))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),dS=(()=>{class i{historyTimelineStoreFactory;constructor(e){this.historyTimelineStoreFactory=e}create(){return new qd(this.historyTimelineStoreFactory)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Zd))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function A9(i,a){1&i&&(n.\u0275\u0275elementStart(0,"div",8),n.\u0275\u0275element(1,"scrm-loading-spinner",9),n.\u0275\u0275elementEnd()),2&i&&(n.\u0275\u0275advance(1),n.\u0275\u0275property("overlay",!0))}function T9(i,a){1&i&&n.\u0275\u0275element(0,"scrm-chart-message-area",10)}function N9(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"a",30),n.\u0275\u0275element(1,"scrm-field",27),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext(2).$implicit,t=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("routerLink",t.redirectLink(e.record.module,e.record.id)),n.\u0275\u0275advance(1),n.\u0275\u0275property("type",e.title.type)("field",e.title)("record",e.record)}}function L9(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"a"),n.\u0275\u0275element(1,"scrm-field",27),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext(2).$implicit;n.\u0275\u0275advance(1),n.\u0275\u0275property("type",e.title.type)("field",e.title)("record",e.record)}}function B9(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",31)(1,"small",26),n.\u0275\u0275element(2,"scrm-field",32),n.\u0275\u0275elementEnd()()),2&i){const e=n.\u0275\u0275nextContext(2).$implicit;n.\u0275\u0275advance(2),n.\u0275\u0275property("type",e.description.type)("field",e.description)("record",e.record)}}function O9(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div")(1,"div",12)(2,"div",13)(3,"div",14),n.\u0275\u0275element(4,"scrm-image",15),n.\u0275\u0275elementEnd()()(),n.\u0275\u0275elementStart(5,"div",12)(6,"div",16),n.\u0275\u0275element(7,"div",17),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(8,"div",18)(9,"div",19)(10,"div",20)(11,"p",21),n.\u0275\u0275template(12,N9,2,4,"a",22),n.\u0275\u0275template(13,L9,2,3,"a",23),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(14,B9,3,3,"div",24),n.\u0275\u0275elementStart(15,"div",25)(16,"small",26),n.\u0275\u0275element(17,"scrm-field",27),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(18,"div",28)(19,"small",29),n.\u0275\u0275element(20,"scrm-field",27),n.\u0275\u0275elementEnd()()()()()()),2&i){const e=n.\u0275\u0275nextContext().$implicit;n.\u0275\u0275classMapInterpolate1("d-flex flex-row m-2 history-timeline-entry entry-",e.color,""),n.\u0275\u0275advance(4),n.\u0275\u0275property("image",e.icon),n.\u0275\u0275advance(8),n.\u0275\u0275property("ngIf","audit"!==e.record.module),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf","audit"===e.record.module),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.description),n.\u0275\u0275advance(3),n.\u0275\u0275property("type",e.user.type)("field",e.user)("record",e.record),n.\u0275\u0275advance(3),n.\u0275\u0275property("type",e.date.type)("field",e.date)("record",e.record)}}function R9(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div"),n.\u0275\u0275template(1,O9,21,13,"div",11),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext().ngIf;n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.length>0)}}const j9=function(i){return[i]};function k9(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"div",2)(1,"div",3),n.\u0275\u0275template(2,A9,2,1,"div",4),n.\u0275\u0275elementStart(3,"cdk-virtual-scroll-viewport",5),n.\u0275\u0275listener("scroll",function(){n.\u0275\u0275restoreView(e);const r=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(r.onScroll())}),n.\u0275\u0275template(4,T9,1,0,"scrm-chart-message-area",6),n.\u0275\u0275template(5,R9,2,1,"div",7),n.\u0275\u0275elementEnd()()()}if(2&i){const e=a.ngIf,t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",null==t.adapter?null:t.adapter.loading),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction1(4,j9,e.length<=0?"history-timeline-viewport-no-data":"history-timeline-viewport")),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!(null!=t.adapter&&t.adapter.loading)&&e.length<=0),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",e)}}let fS=(()=>{class i extends Vr{historyTimelineAdapterFactory;languageStore;navigation;virtualScroll;adapter;subscription=new S.Subscription;constructor(e,t,r){super(),this.historyTimelineAdapterFactory=e,this.languageStore=t,this.navigation=r}ngOnInit(){this.adapter=this.historyTimelineAdapterFactory.create(),this.adapter.init(this.context)}ngAfterViewInit(){const e=[];e.push(this.config.reload$),e.push(this.config.subpanelReload$);const t=["history","activities"],o=e[0].pipe((0,S.combineLatestWith)(...e),(0,v.map)(([s,c={}])=>s||!!c&&t.some(l=>!!c[l]))).pipe((0,v.debounce)(()=>(0,S.timer)(1e3)));this.subscription.add(o.subscribe(s=>{s&&this.adapter.fetchTimelineEntries(!0)}))}ngOnDestroy(){this.subscription.unsubscribe()}getHeaderLabel(){return this.languageStore.getFieldLabel("LBL_QUICK_HISTORY")}onScroll(){if(!this.adapter)return;const e=this.virtualScroll.measureScrollOffset("bottom");0===(0,ne.floor)(e)&&this.adapter.fetchTimelineEntries(!1)}redirectLink(e,t){if("audit"!==e)return this.navigation.getRecordRouterLink(e,t)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(dS),n.\u0275\u0275directiveInject(Oe),n.\u0275\u0275directiveInject(wn))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-history-timeline-widget"]],viewQuery:function(t,r){if(1&t&&n.\u0275\u0275viewQuery(Lt.N7,5),2&t){let o;n.\u0275\u0275queryRefresh(o=n.\u0275\u0275loadQuery())&&(r.virtualScroll=o.first)}},features:[n.\u0275\u0275ProvidersFeature([qd]),n.\u0275\u0275InheritDefinitionFeature],decls:3,vars:4,consts:[[3,"title"],["widget-body","",4,"ngIf"],["widget-body",""],[1,"widget-background","history-timeline","p-2","pt-2"],["class","d-flex record-thread-loading justify-content-center",4,"ngIf"],["itemSize","100",1,"history-timeline-viewport",3,"ngClass","scroll"],["labelKey","LBL_NO_DATA",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"d-flex","record-thread-loading","justify-content-center"],[3,"overlay"],["labelKey","LBL_NO_DATA"],[3,"class",4,"ngIf"],[1,""],[1,"circle"],[1,"d-flex","justify-content-center","align-items-center","h-100","history-timeline-image"],[3,"image"],[1,"d-flex","justify-content-center","h-100"],[1,"connector","mt-3"],[1,"flex-grow-1"],[1,"card"],[1,"card-body","p-1","pr-2","pl-2"],[1,"card-title","text-break","history-timeline-entry-title"],[3,"routerLink",4,"ngIf"],[4,"ngIf"],["class","card-text history-timeline-entry-description",4,"ngIf"],[1,"card-text","history-timeline-entry-user","text-uppercase"],[1,"text-break"],["mode","list",3,"type","field","record"],[1,"card-text","text-break","history-timeline-entry-date"],[1,"font-italic"],[3,"routerLink"],[1,"card-text","history-timeline-entry-description"],["mode","detail",3,"type","field","record"]],template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"scrm-widget-panel",0),n.\u0275\u0275template(1,k9,6,6,"div",1),n.\u0275\u0275pipe(2,"async"),n.\u0275\u0275elementEnd()),2&t&&(n.\u0275\u0275property("title",r.getHeaderLabel()),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(2,2,null==r.adapter?null:r.adapter.dataStream$)))},dependencies:[F.NgClass,F.NgForOf,F.NgIf,Lt.xd,Lt.N7,mn,Ki,Ga,pr,Ho,Ft.RouterLink,F.AsyncPipe],encapsulation:2})}return i})(),pS=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Lt.Cl,fn,Pn,hr,mr,Nt,Zo,Ft.RouterModule]})}return i})();function P9(i,a){1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"div",3),n.\u0275\u0275element(2,"scrm-label",4),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd())}function $9(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275element(1,"scrm-record-thread",5),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("config",e.recordThreadConfig)}}let mS=(()=>{class i extends Vr{language;sytemConfig;panelMode="none";options;recordThreadConfig;filters$;presetFields$;subs=[];constructor(e,t){super(),this.language=e,this.sytemConfig=t}ngOnInit(){this.options=(this.config.options||{}).recordThread||null,this.options&&(this.initPanelMode(),this.initFilters$(),this.initPresetFields$(),this.context$&&this.context$.subscribe()&&this.subs.push(this.context$.subscribe(t=>{this.context=t})),this.recordThreadConfig=this.getConfig())}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}getHeaderLabel(){return this.getLabel(this.config.labelKey)||""}getLabel(e){return this.language.getFieldLabel(e,(this.context||{}).module||"")}getConfig(){const e={filters$:this.filters$,presetFields$:this.presetFields$,module:this.options.module,klass:this.options.class||"",maxListHeight:this.options.maxListHeight??350,direction:this.options.direction||"asc",create:!!this.options.create,itemConfig:{collapsible:this.options.item.collapsible||!1,collapseLimit:this.options.item.collapseLimit||null,klass:this.options.item.itemClass||"",dynamicClass:this.options.item.dynamicClass||[],metadata:{}},createConfig:{collapsible:!1,metadata:{}}};return this.setupItemMetadata(e.itemConfig.metadata,this.options.item.layout),this.setupItemMetadata(e.createConfig.metadata,this.options.create.layout),e}setupItemMetadata(e,t){t&&t.header&&(e.headerLayout=(0,M.deepClone)(t.header)),t&&t.body&&(e.bodyLayout=(0,M.deepClone)(t.body)),t&&t.actions&&(e.actions=(0,M.deepClone)(t.actions)),t&&t.fields&&(e.fields=(0,M.deepClone)(t.fields)),null!==(t?.collapseActions??null)&&(e.collapseActions=t?.collapseActions)}initPanelMode(){const t=this.sytemConfig.getConfigValue("ui")?.widget?.allowCollapse??null,r=this?.config?.allowCollapse??null;let o="none";null!==t&&((0,M.isTrue)(t)?o="collapsible":(0,M.isFalse)(t)&&(o="none")),null!==r&&((0,M.isTrue)(r)?o="collapsible":(0,M.isFalse)(r)&&(o="none")),this.panelMode=o}initFilters$(){if(!this.options||!this.options.filters||!this.context$)return;const e=this.options.filters.parentFilters||{};let t=(0,S.of)({}).pipe((0,v.shareReplay)());Object.keys(e).length>0&&(t=this.context$.pipe((0,v.filter)(r=>{const o=r&&r.record||{};return!(!o.attributes||!Object.keys(o.attributes).length)}))),this.filters$=t.pipe((0,v.map)(r=>{const o={filters:{}};return this.initParentFilters(r,o),o.filters={...o.filters,...this.options.filters.static||{}},this.options.filters.orderBy&&(o.orderBy=this.options.filters.orderBy),this.options.filters.sortOrder&&(o.sortOrder=this.options.filters.sortOrder),o}),(0,v.distinctUntilChanged)())}initPresetFields$(){!this.options||!this.options.create||!this.options.create.presetFields||!this.context$||(this.presetFields$=this.context$.pipe((0,v.map)(e=>({...this.initParentValues(e),...this.options.create.presetFields.static||{}})),(0,v.distinctUntilChanged)()))}initParentFilters(e,t){const r=this.options.filters.parentFilters||{};!e||!e.record||!r||Object.keys(r).forEach(o=>{const c=e.record.attributes[o]||"";c&&(t.filters[r[o]]={field:r,operator:"=",values:[c]})})}initParentValues(e){const t=this.options.create.presetFields.parentValues||{};if(!e||!e.record||!t)return;const r={};return Object.keys(t).forEach(o=>{const c=e.record.attributes[o]||"";c&&(r[t[o]]=c)}),r}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(Oe),n.\u0275\u0275directiveInject(dt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-record-thread-sidebar-widget"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:4,vars:4,consts:[[3,"mode","title"],["widget-body","",1,"record-thread-sidebar-widget"],[4,"ngIf"],[1,"p-3","widget-message"],["labelKey","LBL_BAD_CONFIG"],[3,"config"]],template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"scrm-widget-panel",0)(1,"div",1),n.\u0275\u0275template(2,P9,3,0,"ng-container",2),n.\u0275\u0275template(3,$9,2,1,"ng-container",2),n.\u0275\u0275elementEnd()()),2&t&&(n.\u0275\u0275property("mode",r.panelMode)("title",r.getHeaderLabel()),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",!r.options),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.options))},dependencies:[F.NgIf,Ga,Ot,hd],encapsulation:2})}return i})(),U9=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Pn,hr,Nt,Dd,Pc]})}return i})(),gS=(()=>{class i extends Vr{language;options;subs=[];constructor(e){super(),this.language=e}ngOnInit(){this.options=(this.config.options||{}).sidebarStatistic||null,this.context$&&this.subs.push(this.context$.subscribe(t=>{this.context=t}))}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}getHeaderLabel(){return this.getLabel(this.config.labelKey)||""}getLabel(e){return this.language.getFieldLabel(e,(this.context||{}).module||"")}getGridConfig(){return{rowClass:"statistics-sidebar-widget-row",columnClass:"statistics-sidebar-widget-col",layout:this.options,widgetConfig:{reload$:this.config.reload$},queryArgs:{module:this.context.module,context:this.context,params:{}}}}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(Oe))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-statistics-sidebar-widget"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:3,vars:2,consts:[[3,"title"],["widget-body","",1,"p-3"],[3,"config"]],template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"scrm-widget-panel",0)(1,"div",1),n.\u0275\u0275element(2,"scrm-grid-widget",2),n.\u0275\u0275elementEnd()()),2&t&&(n.\u0275\u0275property("title",r.getHeaderLabel()),n.\u0275\u0275advance(2),n.\u0275\u0275property("config",r.getGridConfig()))},dependencies:[Ga,ld],encapsulation:2})}return i})(),hS=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Pn,Br,hr,ud,Nt]})}return i})();const vS=[pS,lS,hS],Jd={"history-timeline":fS,chart:cS,statistics:gS,"record-thread":mS};let _S=(()=>{class i extends M.BaseComponentRegistry{constructor(){super()}initDefault(){Object.keys(Jd).forEach(e=>{this.register("default",e,Jd[e])})}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function V9(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",2)(1,"div",3),n.\u0275\u0275element(2,"scrm-label",4),n.\u0275\u0275elementEnd()()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(2),n.\u0275\u0275property("labelKey",e.getErrorMessage())}}const z9=function(i,a,e){return{config:i,context:a,context$:e}};function W9(i,a){if(1&i&&n.\u0275\u0275element(0,"ndc-dynamic",5),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275property("ndcDynamicComponent",e.componentType)("ndcDynamicInputs",n.\u0275\u0275pureFunction3(2,z9,e.config,e.context,e.context$))}}let Qd=(()=>{class i extends Vr{registry;type;constructor(e){super(),this.registry=e}get componentType(){return this.registry.get(this.context.module??"default",this.type)}getErrorMessage(){return this.type&&this.config?this.componentType?"LBL_BAD_CONFIG":"LBL_WIDGET_NOT_FOUND":"LBL_CONFIG_NO_CONFIG"}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(_S))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-sidebar-widget"]],inputs:{type:"type"},features:[n.\u0275\u0275InheritDefinitionFeature],decls:2,vars:2,consts:[["class","d-flex mb-4 mt-4 justify-content-center",4,"ngIf"],[3,"ndcDynamicComponent","ndcDynamicInputs",4,"ngIf"],[1,"d-flex","mb-4","mt-4","justify-content-center"],[1,"lead"],[3,"labelKey"],[3,"ndcDynamicComponent","ndcDynamicInputs"]],template:function(t,r){1&t&&(n.\u0275\u0275template(0,V9,3,1,"div",0),n.\u0275\u0275template(1,W9,1,6,"ndc-dynamic",1)),2&t&&(n.\u0275\u0275property("ngIf",!(r.type&&r.config&&r.componentType)),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.type&&r.config&&r.componentType))},dependencies:[F.NgIf,Bt,It,Ot],encapsulation:2})}return i})(),Xd=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,vS,lt,Nt]})}return i})(),yS=(()=>{class i extends Zi{store;language;actionManager;asyncActionService;message;confirmation;selectModalService;metadata;constructor(e,t,r,o,s,c,l,u){super(r,o,s,c,t,l,u),this.store=e,this.language=t,this.actionManager=r,this.asyncActionService=o,this.message=s,this.confirmation=c,this.selectModalService=l,this.metadata=u}getActions(e){return this.store.metadata$.pipe((0,S.combineLatestWith)(this.language.vm$,this.store.criteria$),(0,v.map)(([t,r,o])=>t?this.parseModeActions(t.top_buttons,"list"):[]))}buildActionData(e,t){return{subpanelMeta:this.store?.metadata,module:e.module||this.store.metadata?.module,parentModule:this.store.parentModule,parentId:this.store.parentId,store:this.store,action:e}}getMode(){return"list"}getModuleName(e){return this.store?.metadata?.module}reload(e,t,r){this.store.load(!1).pipe((0,v.take)(1)).subscribe()}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(fa),n.\u0275\u0275inject(Oe),n.\u0275\u0275inject(Ha),n.\u0275\u0275inject(Kt),n.\u0275\u0275inject(ct),n.\u0275\u0275inject(yn),n.\u0275\u0275inject(En),n.\u0275\u0275inject(mt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),bS=(()=>{class i{language;actionManager;asyncActionService;message;confimation;selectModalService;metadata;constructor(e,t,r,o,s,c,l){this.language=e,this.actionManager=t,this.asyncActionService=r,this.message=o,this.confimation=s,this.selectModalService=c,this.metadata=l}create(e){return new yS(e,this.language,this.actionManager,this.asyncActionService,this.message,this.confimation,this.selectModalService,this.metadata)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Oe),n.\u0275\u0275inject(Ha),n.\u0275\u0275inject(Kt),n.\u0275\u0275inject(ct),n.\u0275\u0275inject(yn),n.\u0275\u0275inject(En),n.\u0275\u0275inject(mt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),CS=(()=>{class i{store;constructor(e){this.store=e}getConfig(){return{panelMode:"collapsible",collapseOnSearch:!0,savedFilterEdit:!1,module:this.store.recordList.getModule(),displayHeader:!1,filter$:this.store.recordList.openFilter$,savedFilters$:this.store.filterList.records$,searchFields$:this.store.searchMetadata$.pipe((0,v.map)(e=>{if(this.store.metadata.searchdefs)return this.store.metadata.searchdefs;if(!e)return{};let t="advanced";return e?.layout?.advanced||(t="basic"),e?.layout[t]})),listFields:[],onClose:()=>{},onSearch:()=>{this.store.searchFilter()},updateFilter:(e,t=!0)=>{const r={};r[e.key]=e,this.store.setFilters(r,t)},resetFilter:e=>{this.store.resetFilters(e)},addSavedFilter:e=>{},removeSavedFilter:e=>{},setOpenFilter:e=>{}}}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(fa))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),MS=(()=>{class i{create(e){return new CS(e)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();class SS extends M.ActionHandler{checkRecordAccess(a,e=[]){const r=(a.record??{}).acls??[];return!(!r||!r.length)&&this.checkAccess(a.action??null,r,e)}}let DS=(()=>{class i extends SS{key="async-process";modes=M.ALL_VIEW_MODES;constructor(){super()}run(e){}shouldDisplay(e){const t=e?.action?.acl??[];return!t.length||this.checkRecordAccess(e,t)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Yd=(()=>{class i extends si{async;constructor(e){super(),this.async=e,e.modes.forEach(t=>this.actions[t][e.key]=e)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(DS))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),wS=(()=>{class i extends Zi{store;actionManager;asyncActionService;message;confirmation;language;selectModalService;metadata;constructor(e,t,r,o,s,c,l,u){super(t,r,o,s,c,l,u),this.store=e,this.actionManager=t,this.asyncActionService=r,this.message=o,this.confirmation=s,this.language=c,this.selectModalService=l,this.metadata=u}getActions(e=null){return this.store.metadata$.pipe((0,v.map)(t=>t.lineActions)).pipe((0,S.combineLatestWith)((0,S.of)("list").pipe((0,v.shareReplay)())),(0,v.map)(([t,r])=>this.parseModeActions(t,r,e)))}buildActionData(e,t){return{record:t&&t.record||null,store:this.store,action:e}}getMode(){return"list"}getModuleName(e){return this.store.metadata.module}reload(e,t,r){this.store.load(!1).pipe((0,v.take)(1)).subscribe(),this.store.loadAllStatistics(!1).pipe((0,v.take)(1)).subscribe()}buildActionInput(e,t,r,o=null){const s=this.store.metadata,c=s.collection_list||null,l=o&&o.module||r;let u=s.get_subpanel_data;return c&&c[l]&&c[l].get_subpanel_data&&(u=c[l].get_subpanel_data),u&&e&&e.params&&e.params.linkFieldMapping&&Object.keys(e.params.linkFieldMapping).some(d=>{if(u.includes(d))return u=e.params.linkFieldMapping[d],!0}),{action:t,module:r,id:o&&o.record&&o.record.id||"",payload:{baseModule:this.store.parentModule,baseRecordId:this.store.parentId,linkField:u,recordModule:l,relateModule:this.store.metadata.module,relateRecordId:o&&o.record&&o.record.id||""}}}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(fa),n.\u0275\u0275inject(Yd),n.\u0275\u0275inject(Kt),n.\u0275\u0275inject(ct),n.\u0275\u0275inject(yn),n.\u0275\u0275inject(Oe),n.\u0275\u0275inject(En),n.\u0275\u0275inject(mt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),ef=(()=>{class i{actionManager;asyncActionService;message;confirmation;language;selectModalService;metadata;constructor(e,t,r,o,s,c,l){this.actionManager=e,this.asyncActionService=t,this.message=r,this.confirmation=o,this.language=s,this.selectModalService=c,this.metadata=l}create(e){return new wS(e,this.actionManager,this.asyncActionService,this.message,this.confirmation,this.language,this.selectModalService,this.metadata)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Yd),n.\u0275\u0275inject(Kt),n.\u0275\u0275inject(ct),n.\u0275\u0275inject(yn),n.\u0275\u0275inject(Oe),n.\u0275\u0275inject(En),n.\u0275\u0275inject(mt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),tf=(()=>{class i{store;lineActionsAdapterFactory;preferences;systemConfigs;constructor(e,t,r,o){this.store=e,this.lineActionsAdapterFactory=t,this.preferences=r,this.systemConfigs=o}getTable(){return{showHeader:!1,showFooter:!0,module:this.store.metadata.headerModule,columns:this.getColumns(),lineActions:this.getLineActions(),sort$:this.store.recordList.sort$,maxColumns$:(0,S.of)(5),loading$:this.store.recordList.loading$,dataSource:this.store.recordList,pagination:this.store.recordList,toggleRecordSelection:e=>{this.store.recordList.toggleSelection(e)},updateSorting:(e,t)=>{this.store.recordList.updateSorting(e,t);const r=this.store.parentModule,o=this.store.recordList.getModule();this.preferences.setUi(r,o+"-subpanel-sort",{orderBy:e,sortOrder:t})},maxListHeight:this.preferences.getUserPreference("subpanel_max_height")??this.systemConfigs.getConfigValue("subpanel_max_height"),paginationType:this.preferences.getUserPreference("subpanel_pagination_type")??this.systemConfigs.getConfigValue("subpanel_pagination_type"),loadMore:()=>{const e=this.preferences.getUserPreference("list_max_entries_per_subpanel")??this.systemConfigs.getConfigValue("list_max_entries_per_subpanel"),t=this.store.recordList.getPagination(),o=Number(t.pageSize||0)+Number(e);this.store.recordList.setPageSize(o),this.store.recordList.updatePagination(t.current)},allLoaded:()=>{const e=this.store.recordList.getPagination();return!!e&&(Number(e.pageLast)>=Number(e.total)||Number(e.pageSize)>=Number(e.total))}}}getColumns(){return this.store.metadata$.pipe((0,v.map)(e=>e.columns))}getLineActions(){return this.lineActionsAdapterFactory.create(this.store)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(fa),n.\u0275\u0275inject(ef),n.\u0275\u0275inject(Vt),n.\u0275\u0275inject(dt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),xS=(()=>{class i{lineActionsAdapterFactory;preferences;systemConfigs;constructor(e,t,r){this.lineActionsAdapterFactory=e,this.preferences=t,this.systemConfigs=r}create(e){return new tf(e,this.lineActionsAdapterFactory,this.preferences,this.systemConfigs)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(ef),n.\u0275\u0275inject(Vt),n.\u0275\u0275inject(dt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function G9(i,a){if(1&i&&n.\u0275\u0275element(0,"scrm-list-filter",7),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275property("config",e.filterConfig)}}let ES=(()=>{class i{actionManager;languages;tableAdapterFactory;preferences;systemConfigs;filterAdapterFactory;actionAdapterFactory;store;maxColumns$;onClose;filterConfig;closeButton;adapter;config$;tableConfig;filterAdapter;actionsAdapter;constructor(e,t,r,o,s,c,l){this.actionManager=e,this.languages=t,this.tableAdapterFactory=r,this.preferences=o,this.systemConfigs=s,this.filterAdapterFactory=c,this.actionAdapterFactory=l}ngOnInit(){if(this.buildAdapters(),this.maxColumns$&&(this.tableConfig.maxColumns$=this.maxColumns$),this.store?.metadata?.max_height&&(this.tableConfig.maxListHeight=this.store.metadata.max_height),!this.tableConfig?.maxListHeight){const o=this.systemConfigs.getConfigValue("ui")??{};this.tableConfig.maxListHeight=o.subpanel_max_height}this.tableConfig.paginationType=this?.store?.metadata?.pagination_type??this.tableConfig.paginationType;const e=this.store.parentModule,t=this.store.recordList.getModule(),r=this.preferences.getUi(e,t+"-subpanel-sort");r&&this.store.recordList.updateSorting(r.orderBy,r.sortOrder),this.closeButton={onClick:()=>{this.onClose&&this.onClose()}}}getActionContext(){return{module:this.store?.metadata?.module??""}}buildAdapters(){this.adapter=this.tableAdapterFactory.create(this.store),this.tableConfig=this.adapter.getTable(),this.filterAdapter=this.filterAdapterFactory.create(this.store),this.filterConfig=this.filterAdapter.getConfig(),this.actionsAdapter=this.actionAdapterFactory.create(this.store)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(Ha),n.\u0275\u0275directiveInject(Oe),n.\u0275\u0275directiveInject(xS),n.\u0275\u0275directiveInject(Vt),n.\u0275\u0275directiveInject(dt),n.\u0275\u0275directiveInject(MS),n.\u0275\u0275directiveInject(bS))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-subpanel"]],inputs:{store:"store",maxColumns$:"maxColumns$",onClose:"onClose",filterConfig:"filterConfig"},features:[n.\u0275\u0275ProvidersFeature([tf])],decls:9,vars:9,consts:[["mode","closable","bodyPadding","0",3,"title","close","klass"],["panel-icon-area","",1,"subpanel-icon","pl-1"],[3,"image"],["panel-header-button",""],["buttonClass","btn btn-sm btn-outline-light",3,"config","actionContext","actionLimitConfig"],["panel-body",""],[3,"config",4,"ngIf"],[3,"config"]],template:function(t,r){if(1&t&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"scrm-panel",0)(2,"span",1),n.\u0275\u0275element(3,"scrm-image",2),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(4,"span",3),n.\u0275\u0275element(5,"scrm-action-group-menu",4),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(6,"div",5),n.\u0275\u0275template(7,G9,1,1,"scrm-list-filter",6),n.\u0275\u0275element(8,"scrm-table",7),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementContainerEnd()),2&t){let o;n.\u0275\u0275advance(1),n.\u0275\u0275property("title",r.store.getTitle())("close",r.closeButton)("klass",null!==(o="subpanel-"+(null==r.store||null==r.store.metadata?null:r.store.metadata.name))&&void 0!==o?o:""),n.\u0275\u0275advance(2),n.\u0275\u0275property("image",r.store.getIcon()),n.\u0275\u0275advance(2),n.\u0275\u0275property("config",r.actionsAdapter)("actionContext",r.getActionContext())("actionLimitConfig","subpanelview_actions_limits"),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",r.store.showFilter),n.\u0275\u0275advance(1),n.\u0275\u0275property("config",r.tableConfig)}},dependencies:[F.NgIf,mn,ua,Vc,Gc,ur],encapsulation:2})}return i})(),Hc=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,de.NgbModule,fn,Pr,Ft.RouterModule,dr,zc,Kc,fr]})}return i})();function K9(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275element(1,"scrm-image",12),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("image",e.toggleIcon()),n.\u0275\u0275attribute("aria-expanded",!1)}}function H9(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275element(1,"scrm-image",12),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("image",e.toggleIcon()),n.\u0275\u0275attribute("aria-expanded",!0)}}const Z9=function(i){return{"sub-panel-banner-button-active":i}};function q9(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"div",16),n.\u0275\u0275listener("click",function(){const o=n.\u0275\u0275restoreView(e).$implicit,s=n.\u0275\u0275nextContext(3);return n.\u0275\u0275resetView(s.showSubpanel(o.key,o.value))}),n.\u0275\u0275element(1,"scrm-grid-widget",17),n.\u0275\u0275elementEnd()}if(2&i){const e=a.$implicit,t=n.\u0275\u0275nextContext(3);n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction1(2,Z9,!0===e.value.show)),n.\u0275\u0275advance(1),n.\u0275\u0275property("config",t.getGridConfig(e.value))}}function J9(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",13)(1,"div",14),n.\u0275\u0275template(2,q9,2,4,"div",15),n.\u0275\u0275pipe(3,"keyvalue"),n.\u0275\u0275elementEnd()()),2&i){const e=n.\u0275\u0275nextContext().ngIf;n.\u0275\u0275advance(2),n.\u0275\u0275property("ngForOf",n.\u0275\u0275pipeBind1(3,1,e.subpanels))}}function Q9(i,a){if(1&i&&n.\u0275\u0275element(0,"scrm-subpanel",19),2&i){const e=n.\u0275\u0275nextContext().ngIf,t=n.\u0275\u0275nextContext().$implicit,r=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("maxColumns$",r.maxColumns$)("store",e)("filterConfig",r.filterConfig)("onClose",r.getCloseCallBack(t,e))}}function X9(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,Q9,1,4,"scrm-subpanel",18),n.\u0275\u0275elementContainerEnd()),2&i){const e=a.ngIf;n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.show)}}function Y9(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,X9,2,1,"ng-container",0),n.\u0275\u0275elementContainerEnd()),2&i){const e=a.$implicit,t=n.\u0275\u0275nextContext().ngIf;n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.subpanels[e])}}function e7(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"div",1,2)(3,"div",3)(4,"div",4)(5,"a",5),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(e);const r=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(r.toggleSubPanels())}),n.\u0275\u0275elementStart(6,"div",6),n.\u0275\u0275element(7,"scrm-label",7),n.\u0275\u0275template(8,K9,2,2,"ng-container",0),n.\u0275\u0275template(9,H9,2,2,"ng-container",0),n.\u0275\u0275elementEnd()()(),n.\u0275\u0275elementStart(10,"div",8)(11,"div",9),n.\u0275\u0275template(12,J9,4,3,"ng-template"),n.\u0275\u0275elementEnd()()()(),n.\u0275\u0275elementStart(13,"div",10),n.\u0275\u0275template(14,Y9,2,1,"ng-container",11),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()}if(2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(3),n.\u0275\u0275property("collapsed",e.isCollapsed()),n.\u0275\u0275advance(5),n.\u0275\u0275property("ngIf",e.isCollapsed()),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!e.isCollapsed()),n.\u0275\u0275advance(5),n.\u0275\u0275property("ngForOf",e.openSubpanels)}}let FS=(()=>{class i{languageStore;maxColumnCalculator;localStorage;preferences;config;isCollapsed=(0,n.signal)(!1);toggleIcon=(0,n.signal)("arrow_down_filled");maxColumns$;languages$=(0,S.of)({});vm$;openSubpanels=[];filterConfig;constructor(e,t,r,o){this.languageStore=e,this.maxColumnCalculator=t,this.localStorage=r,this.preferences=o,this.languages$=e?.vm$??(0,S.of)({})}ngOnInit(){const e=this?.config?.parentModule??"default";this.setCollapsed((0,M.isTrue)(this.preferences.getUi(e,"subpanel-container-collapse")??!1)),this.openSubpanels=this.preferences.getUi(e,"subpanel-container-open-subpanels")??[];const t=this.config?.subpanels$??(0,S.of)({});this.vm$=t.pipe((0,v.map)(r=>({subpanels:r})),(0,v.tap)(r=>{!r||!Object.keys(r).length||!this.openSubpanels||this.openSubpanels.length<1||this.openSubpanels.forEach(o=>{const s=r.subpanels[o];!s||s.show||(s.show=!0,s.load().pipe((0,v.take)(1)).subscribe())})})),this.maxColumns$=this.getMaxColumns()}getMaxColumns(){return this.maxColumnCalculator.getMaxColumns(this.config?.sidebarActive$??(0,S.of)(!1))}toggleSubPanels(){this.setCollapsed(!this.isCollapsed()),this.preferences.setUi(this?.config?.parentModule??"default","subpanel-container-collapse",this.isCollapsed())}showSubpanel(e,t){t.show=!t.show,t.show?(this.openSubpanels.includes(e)||this.openSubpanels.push(e),t.load().pipe((0,v.take)(1)).subscribe()):this.openSubpanels=this.openSubpanels.filter(o=>o!=e),this.preferences.setUi(this?.config?.parentModule??"default","subpanel-container-open-subpanels",this.openSubpanels)}getCloseCallBack(e,t){return()=>this.showSubpanel(e,t)}getGridConfig(e){if(!e.metadata||!e.metadata.insightWidget)return{layout:null};const t=e.getWidgetLayout();return t.rows.forEach(r=>{!r.cols||!r.cols.length||r.cols.forEach(o=>{if(!o.statistic)return;const s=e.getStatistic(o.statistic);s&&(o.store=s)})}),{rowClass:"statistics-sidebar-widget-row",columnClass:"statistics-sidebar-widget-col",layout:t,widgetConfig:{},queryArgs:{module:e.metadata.name,context:{module:e.parentModule,id:e.parentId},params:{subpanel:e.metadata.name}}}}setCollapsed(e){this.isCollapsed.set(e),this.setToggleIcon()}setToggleIcon(){this.toggleIcon.set(this.isCollapsed()?"arrow_up_filled":"arrow_down_filled")}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(Oe),n.\u0275\u0275directiveInject(so),n.\u0275\u0275directiveInject(cr),n.\u0275\u0275directiveInject(Vt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-subpanel-container"]],inputs:{config:"config"},features:[n.\u0275\u0275ProvidersFeature([so])],decls:2,vars:3,consts:[[4,"ngIf"],["ngbAccordion","","activeIds","sub-panel-buttons",1,"sub-panel-banner"],["accordion","ngbAccordion"],["ngbAccordionItem","","id","sub-panel-buttons",1,"card",3,"collapsed"],["ngbAccordionHeader","",1,"card-header"],[1,"clickable",3,"click"],[1,"d-flex","align-items-center","justify-content-between"],["labelKey","LBL_SELECT_SUBPANEL_BANNER"],["ngbAccordionCollapse",""],["ngbAccordionBody",""],["id","sub-panels"],[4,"ngFor","ngForOf"],["aria-controls","collapseShowSubPanels",1,"float-right",3,"image"],["id","collapseShowSubPanels"],[1,"row","insight-panel"],["class","col-xs-6 col-sm-3 col-md-2 insight-panel-card border-insight",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"col-xs-6","col-sm-3","col-md-2","insight-panel-card","border-insight",3,"ngClass","click"],[3,"config"],["class","sub-panel",3,"maxColumns$","store","filterConfig","onClose",4,"ngIf"],[1,"sub-panel",3,"maxColumns$","store","filterConfig","onClose"]],template:function(t,r){1&t&&(n.\u0275\u0275template(0,e7,15,4,"ng-container",0),n.\u0275\u0275pipe(1,"async")),2&t&&n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(1,1,r.vm$))},dependencies:[F.NgClass,F.NgForOf,F.NgIf,de.NgbAccordionDirective,de.NgbAccordionItem,de.NgbAccordionHeader,de.NgbAccordionBody,de.NgbAccordionCollapse,mn,ES,ld,Ot,F.AsyncPipe,F.KeyValuePipe],encapsulation:2})}return i})(),IS=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,de.NgbModule,fn,Ft.RouterModule,Hc,Br,Pn,ud,Nt]})}return i})();function t7(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",4),n.\u0275\u0275text(1),n.\u0275\u0275pipe(2,"uppercase"),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext().ngIf,t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",n.\u0275\u0275pipeBind1(2,1,e.appStrings[t.messageLabelKey]||"")," ")}}function n7(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275text(1),n.\u0275\u0275pipe(2,"uppercase"),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(3).$implicit,t=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",n.\u0275\u0275pipeBind1(2,1,t.getLabel(e.value.labelKey)),": ")}}function i7(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275text(1),n.\u0275\u0275pipe(2,"uppercase"),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(3).$implicit,t=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",n.\u0275\u0275pipeBind1(2,1,t.getLabel(e.value.labelKey))," ")}}function r7(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",9),n.\u0275\u0275template(1,n7,3,3,"ng-container",6),n.\u0275\u0275template(2,i7,3,3,"ng-container",6),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext(2).$implicit,t=n.\u0275\u0275nextContext().ngIf,r=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!r.isValueEmpty(t.statistics[e.key])),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.isValueEmpty(t.statistics[e.key]))}}function o7(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,r7,3,2,"div",8),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext().$implicit,t=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.value.labelKey&&t.getLabel(e.value.labelKey))}}function a7(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275element(1,"scrm-field",12),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(3).$implicit,t=n.\u0275\u0275nextContext().ngIf;n.\u0275\u0275advance(1),n.\u0275\u0275property("type",t.statistics[e.key].field.type)("field",t.statistics[e.key].field)}}function s7(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",11),n.\u0275\u0275template(1,a7,2,2,"ng-container",6),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext(2).$implicit,t=n.\u0275\u0275nextContext().ngIf,r=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!r.isValueEmpty(t.statistics[e.key])||!0!==e.value.hideValueIfEmpty)}}function c7(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,s7,2,1,"div",10),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext().$implicit,t=n.\u0275\u0275nextContext().ngIf;n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!t.statistics[e.key].loading&&t.statistics[e.key].field)}}function l7(i,a){1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275text(1," - "),n.\u0275\u0275elementContainerEnd())}function u7(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",13),n.\u0275\u0275element(1,"scrm-inline-loading-spinner"),n.\u0275\u0275template(2,l7,2,0,"ng-container",6),n.\u0275\u0275elementEnd()),2&i){const e=a.ngIf,t=n.\u0275\u0275nextContext().$implicit,r=n.\u0275\u0275nextContext().ngIf;n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",!(e||t.key&&r.statistics[t.key]))}}function d7(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",15),n.\u0275\u0275text(1),n.\u0275\u0275pipe(2,"uppercase"),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext(2).$implicit,t=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",n.\u0275\u0275pipeBind1(2,1,t.getLabel(e.value.endLabelKey))," ")}}function f7(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,d7,3,3,"div",14),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext().$implicit,t=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.value.endLabelKey&&t.getLabel(e.value.endLabelKey))}}function p7(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"div",5),n.\u0275\u0275template(2,o7,2,1,"ng-container",6),n.\u0275\u0275template(3,c7,2,1,"ng-container",6),n.\u0275\u0275template(4,u7,3,1,"div",7),n.\u0275\u0275pipe(5,"async"),n.\u0275\u0275template(6,f7,2,1,"ng-container",6),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()),2&i){const e=a.$implicit,t=n.\u0275\u0275nextContext().ngIf,r=n.\u0275\u0275nextContext();n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",!r.shouldHide(t.statistics[e.key],e.value)),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.key&&t.statistics[e.key]&&!r.shouldHide(t.statistics[e.key],e.value)),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(5,4,e.value.store.loading$)),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",!r.shouldHide(t.statistics[e.key],e.value))}}function m7(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",1),n.\u0275\u0275template(1,t7,3,3,"div",2),n.\u0275\u0275template(2,p7,7,6,"ng-container",3),n.\u0275\u0275pipe(3,"keyvalue"),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.messageLabelKey),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",n.\u0275\u0275pipeBind1(3,2,e.statistics))}}let AS=(()=>{class i extends Vr{language;factory;statistics={};vm$;messageLabelKey;loading$;loading=!0;subs=[];constructor(e,t){super(),this.language=e,this.factory=t,this.language=e??{appStrings$:(0,S.of)({})}}ngOnInit(){if(!this.context||!this.context.module)return void(this.messageLabelKey="LBL_CONFIG_BAD_CONTEXT");if(!this.config)return void(this.messageLabelKey="LBL_CONFIG_NO_CONFIG");if(!this.config.options||!this.config.options.statistics||!this.config.options.statistics.length)return void(this.messageLabelKey="LBL_CONFIG_NO_STATISTICS_KEY");this.context$&&this.subs.push(this.context$.subscribe(o=>{this.context=o}));const e=[],t=[];this.config.options.statistics.forEach(o=>{o.type&&(this.statistics[o.type]={labelKey:o.labelKey||"",endLabelKey:o.endLabelKey||"",hideValueIfEmpty:o.hideValueIfEmpty||!1,type:o.type,store:this.factory.create()},this.statistics[o.type].store.init(this.context.module,{key:o.type,context:{...this.context}}).pipe((0,v.take)(1)).subscribe(),e.push(this.statistics[o.type].store.state$),t.push(this.statistics[o.type].store.loading$))});let r=null;if(e.length<1)r=(0,S.of)([]);else if(1===e.length)r=e[0].pipe((0,v.map)(o=>[o]));else{let s,o=null;[o,...s]=e,r=o.pipe((0,S.combineLatestWith)(s))}this.loading$=t[0].pipe((0,S.combineLatestWith)(...t),(0,v.map)(o=>{if(!o||o.length<1)return this.loading=!1,!1;let s=!0;return o.forEach(c=>{s=s&&c}),this.loading=s,s})),this.subs.push(this.loading$.subscribe()),this.vm$=r.pipe((0,S.combineLatestWith)(this.language?.appStrings$??(0,S.of)({})),(0,v.map)(([o,s])=>{const c={};return o.forEach(l=>{c[l.query.key]=l,this.statistics[l.query.key].labelKey=this.getMetadataEntry(l,"labelKey"),this.statistics[l.query.key].endLabelKey=this.getMetadataEntry(l,"endLabelKey")}),{statistics:c,appStrings:s}})),this.config.reload$&&this.subs.push(this.config.reload$.subscribe(()=>{!1===this.loading&&(this.loading=!0,this.config.options.statistics.forEach(o=>{o.type&&(!this.statistics[o.type]||!this.statistics[o.type].store||this.statistics[o.type].store.load(!1).pipe((0,v.take)(1)).subscribe())}))}))}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}shouldHide(e,t){return this.hasLoaded(e)&&this.isValueEmpty(e)&&!0===t.hideIfEmpty}hasLoaded(e){return!e.loading}isValueEmpty(e){const t=e?.statistic?.metadata?.emptyValueString??null;if(null!==t)return!0;const r=e?.field?.value??null;return!r&&t===r}getMetadataEntry(e,t){const r=e.statistic.metadata&&e.statistic.metadata[t];return null!==r&&typeof r<"u"?r:this.statistics[e.query.key][t]}getLabel(e){return this.language.getFieldLabel(e,(this.context||{}).module||"")}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(Oe),n.\u0275\u0275directiveInject(Wa))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-statistics-top-widget"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:2,vars:3,consts:[["class","d-flex justify-content-center widget-bar rounded",4,"ngIf"],[1,"d-flex","justify-content-center","widget-bar","rounded"],["class","p-2 widget-bar-entry-message",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"p-2","widget-bar-entry-message"],[1,"d-flex","justify-content-center","align-items-baseline","widget-bar-entry","p-2"],[4,"ngIf"],["class","pl-1 pr-1 widget-bar-entry-loading",4,"ngIf"],["class","pr-1 widget-bar-entry-label",4,"ngIf"],[1,"pr-1","widget-bar-entry-label"],["class","pl-1 pr-1 widget-bar-entry-value",4,"ngIf"],[1,"pl-1","pr-1","widget-bar-entry-value"],["mode","list",3,"type","field"],[1,"pl-1","pr-1","widget-bar-entry-loading"],["class","pl-1 widget-bar-entry-end-label",4,"ngIf"],[1,"pl-1","widget-bar-entry-end-label"]],template:function(t,r){1&t&&(n.\u0275\u0275template(0,m7,4,4,"div",0),n.\u0275\u0275pipe(1,"async")),2&t&&n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(1,1,r.vm$))},dependencies:[F.NgForOf,F.NgIf,Ki,ec,F.AsyncPipe,F.UpperCasePipe,F.KeyValuePipe],encapsulation:2})}return i})(),TS=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Pn,Br]})}return i})();const NS=[TS],LS={statistics:AS},g7=function(i,a){return{config:i,context:a}};function h7(i,a){if(1&i&&n.\u0275\u0275element(0,"ndc-dynamic",1),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275property("ndcDynamicComponent",e.componentType)("ndcDynamicInputs",n.\u0275\u0275pureFunction2(2,g7,e.config,e.context))}}let BS=(()=>{class i extends Vr{type;map=LS;inputs;component;get componentType(){return this.map[this.type]}ngOnInit(){this.component=this.componentType,this.inputs={config:this.config,context:this.context}}static \u0275fac=function(){let e;return function(r){return(e||(e=n.\u0275\u0275getInheritedFactory(i)))(r||i)}}();static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-top-widget"]],inputs:{type:"type"},features:[n.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,consts:[[3,"ndcDynamicComponent","ndcDynamicInputs",4,"ngIf"],[3,"ndcDynamicComponent","ndcDynamicInputs"]],template:function(t,r){1&t&&n.\u0275\u0275template(0,h7,1,5,"ndc-dynamic",0),2&t&&n.\u0275\u0275property("ngIf",r.type&&r.config)},dependencies:[F.NgIf,Bt,It],encapsulation:2})}return i})(),OS=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,NS,lt]})}return i})(),v7=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,lt]})}return i})(),RS=(()=>{class i{el;appStateStore;state;subscription;appLoading=!1;constructor(e,t){this.el=e,this.appStateStore=t}ngOnInit(){this.subscription=this.appStateStore.loading$.pipe((0,v.tap)(e=>{this.appLoading=e,this.updateComponent()})).subscribe(),this.updateComponent()}ngOnChanges(e){e.state&&this.updateComponent()}ngOnDestroy(){this.subscription.unsubscribe()}clickEvent(){this.updateComponent()}updateComponent(){const e=this.isLoading();this.setDisabledState(e)}isLoading(){let e=!1;return(!0===this.state||!0===this.appLoading)&&(e=!0),e}setDisabledState(e){this.el.nativeElement.disabled=e}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(n.ElementRef),n.\u0275\u0275directiveInject(Gt))};static \u0275dir=n.\u0275\u0275defineDirective({type:i,selectors:[["","scrm-button-loading",""]],hostBindings:function(t,r){1&t&&n.\u0275\u0275listener("click",function(){return r.clickEvent()})},inputs:{state:["scrm-button-loading","state"]},features:[n.\u0275\u0275NgOnChangesFeature]})}return i})(),jS=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule]})}return i})(),_7=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule]})}return i})(),y7=(()=>{class i extends Ti{languages;typeFormatter;logic;logicDisplay;constructor(e,t,r,o){super(e,t,r,o),this.languages=e,this.typeFormatter=t,this.logic=r,this.logicDisplay=o}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(Oe),n.\u0275\u0275directiveInject(it),n.\u0275\u0275directiveInject(ft),n.\u0275\u0275directiveInject(pt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-dynamicenum-detail"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,template:function(t,r){1&t&&n.\u0275\u0275text(0),2&t&&n.\u0275\u0275textInterpolate1("\n",r.valueLabel,"\n")},encapsulation:2})}return i})(),b7=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Ce.FormsModule]})}return i})();const C7=["tag"];let M7=(()=>{class i extends Ti{languages;typeFormatter;logic;logicDisplay;tag;constructor(e,t,r,o){super(e,t,r,o),this.languages=e,this.typeFormatter=t,this.logic=r,this.logicDisplay=o}ngOnInit(){super.ngOnInit()}onAdd(e){if(e&&e.value)return this.field.value=e.value,this.field.formControl.setValue(e.value),void this.field.formControl.markAsDirty();this.field.value="",this.field.formControl.setValue(""),this.field.formControl.markAsDirty(),this.selectedValues=[]}onRemove(){this.field.value="",this.field.formControl.setValue(""),this.field.formControl.markAsDirty(),setTimeout(()=>{this.tag.focus(!0,!0),this.tag.dropdown.show()},200)}getPlaceholderLabel(){return this.languages.getAppString("LBL_SELECT_ITEM")||""}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(Oe),n.\u0275\u0275directiveInject(it),n.\u0275\u0275directiveInject(ft),n.\u0275\u0275directiveInject(pt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-dynamicenum-edit"]],viewQuery:function(t,r){if(1&t&&n.\u0275\u0275viewQuery(C7,5),2&t){let o;n.\u0275\u0275queryRefresh(o=n.\u0275\u0275loadQuery())&&(r.tag=o.first)}},features:[n.\u0275\u0275InheritDefinitionFeature],decls:3,vars:13,consts:[["maxItems","1",3,"ngModel","onlyFromAutocomplete","clearOnBlur","displayBy","identifyBy","placeholder","secondaryPlaceholder","inputClass","ngModelChange","onAdd","onRemove"],["tag",""],[3,"displayBy","identifyBy","showDropdownIfEmpty","keepOpen","autocompleteItems"]],template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"tag-input",0,1),n.\u0275\u0275listener("ngModelChange",function(s){return r.selectedValues=s})("onAdd",function(s){return r.onAdd(s)})("onRemove",function(){return r.onRemove()}),n.\u0275\u0275element(2,"tag-input-dropdown",2),n.\u0275\u0275elementEnd()),2&t&&(n.\u0275\u0275property("ngModel",r.selectedValues)("onlyFromAutocomplete",!0)("clearOnBlur",!0)("displayBy","label")("identifyBy","value")("placeholder",r.getPlaceholderLabel())("secondaryPlaceholder",r.getPlaceholderLabel())("inputClass",r.getInvalidClass()),n.\u0275\u0275advance(2),n.\u0275\u0275property("displayBy","label")("identifyBy","value")("showDropdownIfEmpty",!0)("keepOpen",!1)("autocompleteItems",r.options))},dependencies:[Tn.TagInputComponent,Tn.TagInputDropdown,Ce.NgControlStatus,Ce.NgModel],encapsulation:2})}return i})(),S7=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Tn.TagInputModule,Ce.FormsModule]})}return i})(),D7=(()=>{class i extends cn{typeFormatter;logic;logicDisplay;constructor(e,t,r){super(e,t,r),this.typeFormatter=e,this.logic=t,this.logicDisplay=r}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(it),n.\u0275\u0275directiveInject(ft),n.\u0275\u0275directiveInject(pt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-email-detail"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,template:function(t,r){1&t&&n.\u0275\u0275text(0),2&t&&n.\u0275\u0275textInterpolate1("\n",r.field.value,"\n")},encapsulation:2})}return i})(),w7=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule]})}return i})(),x7=(()=>{class i{sanitizer;constructor(e){this.sanitizer=e}transform(e){return this.sanitizer.sanitize(n.SecurityContext.HTML,e)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(e0.H7,16))};static \u0275pipe=n.\u0275\u0275definePipe({name:"htmlSanitize",type:i,pure:!0})}return i})(),E7=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule]})}return i})();class kS{}let F7=(()=>{class i{router;authService;asyncActionService;appState;routeConverter;language;notificationStore;constructor(e,t,r,o,s,c,l){this.router=e,this.authService=t,this.asyncActionService=r,this.appState=o,this.routeConverter=s,this.language=c,this.notificationStore=l}canActivate(e,t){return this.authorizeUser(e,t)}authorizeUser(e,t){return(0,S.forkJoin)([this.authorizeUserSession(e,t),this.authorizeUserACL(e)]).pipe((0,v.map)(([r,o])=>r instanceof Ft.UrlTree?r:(o instanceof Ft.UrlTree||r)&&o))}authorizeUserACL(e){const t=this.routeConverter.parseRouteURL(e.url),r=this.appState.getRouteUrl()??"";if(!t.module||"home"===t.module)return(0,S.of)(!0);const s=this.router.parseUrl(""),c="user-acl";return this.asyncActionService.run(c,{action:c,module:t.module,payload:{routeAction:t.action,record:t.record,routeURL:r,queryParams:e?.queryParams??[]}}).pipe((0,v.take)(1),(0,v.map)(u=>{if(u.data&&!0===u.data.result)return!0;if((0,M.isEmptyString)(r))return s;const d=this.router.parseUrl(this.router.url);return!!this.routeConverter.isClassicViewRoute(d)&&d}),(0,v.catchError)(()=>(0,S.of)(s)))}authorizeUserSession(e,t){if(this.authService.isUserLoggedIn.value&&!0!==e.data.checkSession)return(0,S.of)(!0);let r=this.authService.getSessionExpiredRoute();const o=this.authService.sessionExpiredRedirect(),s=this.router.parseUrl(r);return this.authService.fetchSessionStatus().pipe((0,v.take)(1),(0,v.map)(c=>{if(c&&!1===c.appStatus.installed)return this.router.parseUrl("install");if(c&&!0===c.active){const l=!!this.appState.getCurrentUser();return this.authService.setCurrentUser(c),l||this.language.appStrings$.pipe((0,v.filter)(u=>u&&!(0,M.emptyObject)(u)),(0,v.tap)(()=>{this.notificationStore.enableNotifications(),this.notificationStore.refreshNotifications()}),(0,v.take)(1)).subscribe(),!0}return this.appState.setPreLoginUrl(t.url),this.authService.resetState(),o?(this.authService.handleSessionExpiredRedirect(),!1):s}),(0,v.catchError)(()=>o?(this.authService.handleSessionExpiredRedirect(),(0,S.of)(!1)):(this.authService.logout("LBL_SESSION_EXPIRED",!1),(0,S.of)(s))),(0,v.tap)(c=>{!0===c&&this.authService.isUserLoggedIn.next(!0)}))}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Ft.Router),n.\u0275\u0275inject(Hn),n.\u0275\u0275inject(Kt),n.\u0275\u0275inject(Gt),n.\u0275\u0275inject($r),n.\u0275\u0275inject(Oe),n.\u0275\u0275inject(la))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),I7=(()=>{class i{intercept(e,t){return t.handle(e).pipe((0,v.catchError)(r=>(0,S.throwError)(r)))}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),A7=(()=>{class i{systemConfigStore;authService;router;routeConverter;asyncActionService;message;constructor(e,t,r,o,s,c){this.systemConfigStore=e,this.authService=t,this.router=r,this.routeConverter=o,this.asyncActionService=s,this.message=c}canActivate(e){return this.canActivateWebInstallation(e)}canActivateWebInstallation(e){const t=this.systemConfigStore.getHomePage(),r=this.router.parseUrl(t);return this.authService.fetchSessionStatus().pipe((0,v.take)(1),(0,v.map)(o=>o&&!0===o.appStatus.locked&&!0===o.appStatus.installed?(this.message.addDangerMessageByKey("LBL_DISABLED_TITLE_2"),!(!o||!1!==o.active)&&r):(o&&!0===o.active&&(this.authService.logout("",!1),this.authService.isUserLoggedIn.next(!1)),!0)),(0,v.catchError)(()=>(0,S.of)(!0)))}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(dt),n.\u0275\u0275inject(Hn),n.\u0275\u0275inject(Ft.Router),n.\u0275\u0275inject($r),n.\u0275\u0275inject(Kt),n.\u0275\u0275inject(ct))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),T7=(()=>{class i{router;authService;systemConfigStore;appStateStore;constructor(e,t,r,o){this.router=e,this.authService=t,this.systemConfigStore=r,this.appStateStore=o}canActivate(){const e=this.systemConfigStore.getHomePage(),t=this.router.parseUrl(e);return this.authService.isUserLoggedIn.value?t:this.authService.fetchSessionStatus().pipe((0,v.take)(1),(0,v.map)(r=>r&&!1===r.appStatus.installed?this.router.parseUrl("install"):!r||!0!==r.active||(this.authService.setCurrentUser(r),t)),(0,v.catchError)(()=>(0,S.of)(!0)))}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Ft.Router),n.\u0275\u0275inject(Hn),n.\u0275\u0275inject(dt),n.\u0275\u0275inject(Gt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),N7=(()=>{class i{systemConfigStore;constructor(e){this.systemConfigStore=e}load(e){const t=this.systemConfigStore.getConfigValue("extensions"),r={};return Object.keys(t).forEach(o=>{if(!t[o])return;const s=t[o];!s.remoteEntry||!s.remoteName||!s.enabled||(0,M.isFalse)(s.enabled)||(r[o]=this.loadExtension(s,e))}),Object.keys(r).length<1?(0,S.of)({}):(0,S.forkJoin)(r)}loadExtension(e,t){return this.loadModule(()=>function Vk(i,a){return ou.apply(this,arguments)}({type:"module",remoteEntry:e.remoteEntry,exposedModule:"./Module"}).then(o=>o.ExtensionModule),t)}isPromise(e){return!!e&&"function"==typeof e.then}wrapIntoObservable(e){return(0,S.isObservable)(e)?e:this.isPromise(e)?(0,S.from)(Promise.resolve(e)):(0,S.of)(e)}loadModule(e,t){return this.wrapIntoObservable(e()).pipe((0,v.map)(r=>(0,n.createNgModule)(r,t)))}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(dt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),nf=(()=>{class i{systemConfigStore;languageStore;navigationStore;userPreferenceStore;themeImagesStore;appState;moduleNameMapper;messageService;appMetadata;auth;constructor(e,t,r,o,s,c,l,u,d,f){this.systemConfigStore=e,this.languageStore=t,this.navigationStore=r,this.userPreferenceStore=o,this.themeImagesStore=s,this.appState=c,this.moduleNameMapper=l,this.messageService=u,this.appMetadata=d,this.auth=f}resolve(e){const t=this.calculateActiveModule(e);return this.appMetadata.load(t).pipe((0,v.tap)(()=>{this.auth.isLoggedIn()&&setTimeout(()=>{this.appMetadata.loadModuleMetadata(t).pipe((0,v.take)(1)).subscribe()},0)}))}sequentialLoad(e){const t={};if(this.isToLoadNavigation(e)&&(t.navigation=this.navigationStore.load()),this.isToLoadConfigs(e)){let o=this.systemConfigStore.load();if(this.isToLoadLanguageStrings(e)){const s=this.getLanguagesToLoad(e);o=o.pipe((0,v.map)(c=>{let l=c.default_language.value;const u=this.languageStore.getCurrentLanguage();return u&&(l=u),this.languageStore.load(l,s)}),(0,v.concatAll)(),(0,v.toArray)())}t.configs=o}return this.isToLoadUserPreferences(e)&&(t.preferences=this.userPreferenceStore.load()),(0,S.forkJoin)(t).pipe((0,v.map)(o=>{let s=null;return this.systemConfigStore.getConfigValue("default_theme")&&(s=this.systemConfigStore.getConfigValue("default_theme")),this.userPreferenceStore.getUserPreference("user_theme")&&(s=this.userPreferenceStore.getUserPreference("user_theme")),this.themeImagesStore.getTheme()&&(s=this.themeImagesStore.getTheme()),null!==s?this.themeImagesStore.load(s):o}),(0,v.concatAll)(),(0,v.toArray)(),(0,v.tap)(()=>this.appState.setLoaded(!0)))}getLanguagesToLoad(e){let t=this.languageStore.getAvailableStringsTypes();return this.isToLoadNavigation(e)?t:e.data&&e.data.load?(Array.isArray(e.data.load.languageStrings)&&(t=e.data.load.languageStrings),t):[]}isToLoadLanguageStrings(e){return!!this.isToLoadNavigation(e)||!(!e.data||!e.data.load)&&(Array.isArray(e.data.load.languageStrings)||!0===e.data.load.languageStrings)}isToLoadConfigs(e){return!e.data||!e.data.load||!1!==e.data.load.configs}isToLoadNavigation(e){return!e.data||!e.data.load||!1!==e.data.load.navigation}isToLoadUserPreferences(e){return!e.data||!e.data.load||!1!==e.data.load.preferences}addMetadataLoadErrorMessage(){let e=this.languageStore.getAppString("LBL_ERROR_FETCHING_METADATA");e||(e="Error occurred while fetching metadata"),this.messageService.addDangerMessage(e)}calculateActiveModule(e){let t=e.params.module;t||(t=e.data.module);const r=e?.url[0]?.path??"";!t&&""!==r&&(t=r);const o=this.getParentModuleMap()[t]||"",s=e.queryParams[o]||"";return s&&(t=this.moduleNameMapper.toFrontend(s)),t}getParentModuleMap(){return{"merge-records":"return_module",import:"import_module"}}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(dt),n.\u0275\u0275inject(Oe),n.\u0275\u0275inject(Ci),n.\u0275\u0275inject(Vt),n.\u0275\u0275inject(Tr),n.\u0275\u0275inject(Gt),n.\u0275\u0275inject(_n),n.\u0275\u0275inject(ct),n.\u0275\u0275inject(ca),n.\u0275\u0275inject(Hn))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),PS=(()=>{class i extends nf{systemConfigStore;languageStore;navigationStore;userPreferenceStore;themeImagesStore;moduleNameMapper;appStateStore;metadataStore;messageService;routeConverter;appMetadata;auth;constructor(e,t,r,o,s,c,l,u,d,f,p,m){super(e,t,r,o,s,l,c,d,p,m),this.systemConfigStore=e,this.languageStore=t,this.navigationStore=r,this.userPreferenceStore=o,this.themeImagesStore=s,this.moduleNameMapper=c,this.appStateStore=l,this.metadataStore=u,this.messageService=d,this.routeConverter=f,this.appMetadata=p,this.auth=m}resolve(e){let t=e.params.module;return t||(t=e.data.module),super.resolve(e).pipe((0,v.concatMap)(()=>(0,S.forkJoin)([this.metadataStore.load(t,this.metadataStore.getMetadataTypes()),this.metadataStore.getMetadata("saved-search",["recordView"])])),(0,v.map)(r=>({metadata:r[0]??{},savedSearchMeta:r[1]??{}})),(0,v.tap)(()=>{if(t){const s=this.calculateActiveModule(e);this.appStateStore.setModule(s)}const o=this.routeConverter.parseRouteURL(e.url).action??"index";this.appStateStore.setView(o)},()=>{this.addMetadataLoadErrorMessage()}))}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(dt),n.\u0275\u0275inject(Oe),n.\u0275\u0275inject(Ci),n.\u0275\u0275inject(Vt),n.\u0275\u0275inject(Tr),n.\u0275\u0275inject(_n),n.\u0275\u0275inject(Gt),n.\u0275\u0275inject(mt),n.\u0275\u0275inject(ct),n.\u0275\u0275inject($r),n.\u0275\u0275inject(ca),n.\u0275\u0275inject(Hn))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),rf=(()=>{class i{metadata;processService;constructor(e,t){this.metadata=e,this.processService=t}onNavigationAdd(e,t){let r="detail";const o=t&&t.data||{};o.mode&&(r=o.mode);const s=t?.params?.record??null;if(s&&"create"!==r){const c=this.buildRecentlyViewed(e,s);this.addRecentlyViewed(e,c)}}buildRecentlyViewed(e,t,r="detailview"){return(0,M.deepClone)({module:"Tracker",type:"Tracker",attributes:{module_name:e??"",item_id:t??"",action:r??""}})}addRecentlyViewed(e,t){this.saveRecentlyViewed(e,t)}saveRecentlyViewed(e,t){const o={recentlyViewed:t};setTimeout(()=>{this.processService.submit("add-recently-viewed",o).pipe((0,v.take)(1)).subscribe(s=>{const c={id:t.id??"",module:t.module??"",attributes:{...t.attributes??{}}},l=s?.data?.tracker??null;if(null===l)return;c.attributes.item_summary=l.item_summary;const u=c?.attributes?.item_id??"",d=this.metadata.getModuleMeta(e),f=d?.recentlyViewed??null;if(f){let p=f.filter(m=>(m?.attributes?.item_id??"")!==u);p.unshift(c),d.recentlyViewed=p}this.metadata.setModuleMetadata(e,d)})},500)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(mt),n.\u0275\u0275inject($i))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),L7=(()=>{class i extends PS{systemConfigStore;languageStore;navigationStore;metadataStore;userPreferenceStore;themeImagesStore;moduleNameMapper;actionNameMapper;appStateStore;messageService;routeConverter;router;appMetadata;auth;recentlyViewed;constructor(e,t,r,o,s,c,l,u,d,f,p,m,h,g,b){super(e,t,r,s,c,l,d,o,f,p,h,g),this.systemConfigStore=e,this.languageStore=t,this.navigationStore=r,this.metadataStore=o,this.userPreferenceStore=s,this.themeImagesStore=c,this.moduleNameMapper=l,this.actionNameMapper=u,this.appStateStore=d,this.messageService=f,this.routeConverter=p,this.router=m,this.appMetadata=h,this.auth=g,this.recentlyViewed=b}resolve(e){let t=e.params.module;return t||(t=e.data.module),super.resolve(e).pipe((0,v.concatMap)(()=>(0,S.forkJoin)([this.metadataStore.load(t,this.metadataStore.getMetadataTypes())])),(0,v.tap)(()=>{this.auth.isLoggedIn()&&this.recentlyViewed.onNavigationAdd(this.appStateStore.getModule(),e)}))}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(dt),n.\u0275\u0275inject(Oe),n.\u0275\u0275inject(Ci),n.\u0275\u0275inject(mt),n.\u0275\u0275inject(Vt),n.\u0275\u0275inject(Tr),n.\u0275\u0275inject(_n),n.\u0275\u0275inject(ao),n.\u0275\u0275inject(Gt),n.\u0275\u0275inject(ct),n.\u0275\u0275inject($r),n.\u0275\u0275inject(Ft.Router),n.\u0275\u0275inject(ca),n.\u0275\u0275inject(Hn),n.\u0275\u0275inject(rf))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),$S=(()=>{class i{processService;appStateStore;processType="recover-password";constructor(e,t){this.processService=e,this.appStateStore=t}run(e,t){const r={username:e,useremail:t};return this.appStateStore.updateLoading("recover-password",!0,!1),this.processService.submit(this.processType,r).pipe((0,v.tap)(()=>this.appStateStore.updateLoading("recover-password",!1,!1)),(0,v.catchError)(o=>{throw this.appStateStore.updateLoading("recover-password",!1,!1),o}))}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject($i),n.\u0275\u0275inject(Gt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),B7=(()=>{class i{systemConfig;constructor(e,t){this.systemConfig=e,this.docElement=t}docElement;setSystemName(e){(!e||e.length<1)&&(e="SuiteCRM"),this.docElement.documentElement.childNodes.item(0).childNodes.forEach(r=>{"TITLE"===r.nodeName&&(r.textContent=e)})}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(dt),n.\u0275\u0275inject(F.DOCUMENT))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),O7=(()=>{class i{http;constructor(e){this.http=e}getAll(){return this.http.get("users")}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Ar.HttpClient))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),R7=(()=>{class i{fetchGQL;constructor(e){this.fetchGQL=e}create(){return new Kd(this.fetchGQL)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Hi))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),j7=(()=>{class i{fetchGQL;constructor(e){this.fetchGQL=e}create(){return new Rc(this.fetchGQL)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Hi))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function k7(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",9)(1,"a",10)(2,"div",11),n.\u0275\u0275element(3,"scrm-image",12)(4,"scrm-label",13),n.\u0275\u0275elementEnd()()()),2&i){const e=a.$implicit,t=a.first,r=n.\u0275\u0275nextContext(3);n.\u0275\u0275classProp("border-top",t),n.\u0275\u0275advance(1),n.\u0275\u0275property("queryParams",null==e?null:e.params)("routerLink",e.link)("title",r.language.getFieldLabel(e.descriptionKey,"administration")),n.\u0275\u0275advance(2),n.\u0275\u0275property("image",e.icon),n.\u0275\u0275advance(1),n.\u0275\u0275property("labelKey",e.titleKey)}}function P7(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,k7,5,7,"div",8),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",e.content.linkGroup)}}function $7(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",2)(1,"div",3)(2,"h5",4),n.\u0275\u0275element(3,"scrm-label",5),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(4,"div",6),n.\u0275\u0275template(5,P7,2,1,"ng-container",7),n.\u0275\u0275elementEnd()()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(2),n.\u0275\u0275property("title",e.language.getFieldLabel(e.content.descriptionLabelKey,"administration")),n.\u0275\u0275advance(1),n.\u0275\u0275property("labelKey",e.content.titleLabelKey),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",e.content.linkGroup)}}let US=(()=>{class i{language;content;constructor(e){this.language=e}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(Oe))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-admin-card"]],inputs:{content:"content"},decls:2,vars:1,consts:[[1,"widget-panel","h-100","shadow-sm"],["class","card h-100 panel-card border-0",4,"ngIf"],[1,"card","h-100","panel-card","border-0"],[1,"card-header"],[1,"card-title","admin-card-title","m-0",3,"title"],["module","administration",3,"labelKey"],[1,"card-body","d-flex","flex-column","align-items-start"],[4,"ngIf"],["class","admin-card-link-box border-bottom w-100",3,"border-top",4,"ngFor","ngForOf"],[1,"admin-card-link-box","border-bottom","w-100"],["queryParamsHandling","merge",1,"card-link","admin-card-link",3,"queryParams","routerLink","title"],[1,"d-flex","admin-card-link-wrapper","align-items-center","w-100","p-1"],[1,"admin-card-icon","sicon-2x",3,"image"],["module","administration",1,"admin-card-label","pl-1","flex-grow-1",3,"labelKey"]],template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"div",0),n.\u0275\u0275template(1,$7,6,3,"div",1),n.\u0275\u0275elementEnd()),2&t&&(n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.content))},dependencies:[F.NgForOf,F.NgIf,Ft.RouterLink,Ot,mn],encapsulation:2})}return i})(),VS=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Ft.RouterModule,Nt,fn]})}return i})();function U7(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",3),n.\u0275\u0275element(1,"scrm-admin-card",4),n.\u0275\u0275elementEnd()),2&i){const e=a.$implicit;n.\u0275\u0275advance(1),n.\u0275\u0275property("content",e)}}let V7=(()=>{class i{adminMetaData;adminPanelData=[];constructor(e){this.adminMetaData=e}ngOnInit(){const e=this.adminMetaData.getAdminPanel();this.setData(e)}setData(e){e.forEach(({icon:t,titleLabelKey:r,descriptionLabelKey:o,linkGroup:s})=>{this.adminPanelData.push({icon:t,titleLabelKey:r,descriptionLabelKey:o,linkGroup:this.setLinkGroups(s)})})}setLinkGroups(e){let t=[],r=Object.keys(e);for(let o=0;o<r.length;o++){let c=Object.values(e[r[o]]);for(let l=0;l<c.length;l++)t.push(c[l])}return t}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(nd))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-admin-panel"]],decls:3,vars:1,consts:[[1,"admin-view","full-height-view","d-flex","align-items-center"],[1,"row","flex-grow-1"],["class","col-12 col-sm-6 col-lg-4 col-xl-3 mt-3 mb-3",4,"ngFor","ngForOf"],[1,"col-12","col-sm-6","col-lg-4","col-xl-3","mt-3","mb-3"],[3,"content"]],template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"div",0)(1,"div",1),n.\u0275\u0275template(2,U7,2,1,"div",2),n.\u0275\u0275elementEnd()()),2&t&&(n.\u0275\u0275advance(2),n.\u0275\u0275property("ngForOf",r.adminPanelData))},dependencies:[F.NgForOf,US],encapsulation:2})}return i})(),z7=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,VS]})}return i})();const W7=["dataContainer"];let G7=(()=>{class i{route;router;sanitizer;routeConverter;auth;ngZone;systemConfigs;dataContainer;wrapper;url;iframe=null;iframePageChangeHandler;iframeResizeHandler;constructor(e,t,r,o,s,c,l){this.route=e,this.router=t,this.sanitizer=r,this.routeConverter=o,this.auth=s,this.ngZone=c,this.systemConfigs=l}ngOnInit(){this.url=this.route.snapshot.data.legacyUrl}ngAfterViewInit(){this.initIframe()}ngOnDestroy(){this.cleanObservers(),this.iframe=null;const e=this.wrapper;this.wrapper.firstChild&&e.removeChild(e.firstChild),e.innerHTML="<iframe></iframe>",this.wrapper=null}cleanObservers(){this.iframeResizeHandler&&(this.iframeResizeHandler.destroy(),this.iframeResizeHandler=null),this.iframePageChangeHandler&&(this.iframePageChangeHandler.destroy(),this.iframePageChangeHandler=null)}initIframe(){this.wrapper=this.dataContainer.nativeElement,this.wrapper.firstChild&&this.wrapper.removeChild(this.wrapper.firstChild);const e=document.createElement("iframe");e.src=this.url,this.wrapper.appendChild(e),this.iframe=e,this.iframe.style.display="block",this.initObservers()}initObservers(){this.iframePageChangeHandler=this.buildIframePageChangeObserver(),this.iframeResizeHandler=this.buildIframeResizeHandlerHandler(),this.iframePageChangeHandler&&this.iframePageChangeHandler.init()}onPageChange(e){if(!1===this.shouldRedirect(e))return this.iframe.style.display="block",this.cleanObservers(),void this.initObservers();const t=this.routeConverter.toFrontEndRoute(e);"/users/login"!==t?this.ngZone.run(()=>this.router.navigateByUrl(t).then()).then():this.auth.logout("LBL_SESSION_EXPIRED")}onIFrameLoad(){this.iframe.contentWindow.document.body.style.overflow="hidden",this.iframeResizeHandler.init(this.iframe)}onIFrameUnload(){this.iframe.style.display="none",this.iframeResizeHandler.destroy()}buildIframePageChangeObserver(){return new Mu(this.iframe,this.onPageChange.bind(this),this.onIFrameLoad.bind(this),this.onIFrameUnload.bind(this))}buildIframeResizeHandlerHandler(){return new Cu}shouldRedirect(e){if(e&&e.includes("/#/"))return!0;const t=this.routeConverter.parse(e);return!(!t||!t.module||!0===this.routeConverter.matchesActiveRoute(this.route,t))&&(!t.action||this.toExclude(t))}toExclude(e){const t=this.systemConfigs.getConfigValue("classicview_routing_exclusions");if(!t||0===Object.keys(t).length)return!0;if(t.any&&t.any.includes(e.action))return!1;if(!t[e.module])return!0;const r=t[e.module];return!(r&&r.includes(e.action))}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(Ft.ActivatedRoute),n.\u0275\u0275directiveInject(Ft.Router),n.\u0275\u0275directiveInject(e0.H7),n.\u0275\u0275directiveInject($r),n.\u0275\u0275directiveInject(Hn),n.\u0275\u0275directiveInject(n.NgZone),n.\u0275\u0275directiveInject(dt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-classic-view-ui"]],viewQuery:function(t,r){if(1&t&&n.\u0275\u0275viewQuery(W7,7),2&t){let o;n.\u0275\u0275queryRefresh(o=n.\u0275\u0275loadQuery())&&(r.dataContainer=o.first)}},decls:3,vars:0,consts:[[1,"classic-view-container"],["dataContainer",""]],template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"div",0,1),n.\u0275\u0275element(2,"iframe"),n.\u0275\u0275elementEnd())},encapsulation:2})}return i})(),K7=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule]})}return i})(),H7=(()=>{class i extends nf{systemConfigStore;languageStore;navigationStore;userPreferenceStore;themeImagesStore;moduleNameMapper;routeConverter;messageService;appStateStore;appMetadata;auth;recentlyViewed;metadataStore;constructor(e,t,r,o,s,c,l,u,d,f,p,m,h){super(e,t,r,o,s,d,c,u,f,p),this.systemConfigStore=e,this.languageStore=t,this.navigationStore=r,this.userPreferenceStore=o,this.themeImagesStore=s,this.moduleNameMapper=c,this.routeConverter=l,this.messageService=u,this.appStateStore=d,this.appMetadata=f,this.auth=p,this.recentlyViewed=m,this.metadataStore=h}resolve(e){const t=this.calculateActiveModule(e);return super.resolve(e).pipe((0,v.concatMap)(()=>(0,S.forkJoin)([this.metadataStore.load(t,this.metadataStore.getMetadataTypes())])),(0,v.map)(()=>this.routeConverter.toLegacy(e.params,e.queryParams)),(0,v.tap)(()=>{if(e.params.module){const s=this.calculateActiveModule(e);this.appStateStore.setModule(s)}const o=this.routeConverter.parseRouteURL(e.url).action??"index";this.appStateStore.setView(o),this.recentlyViewed.onNavigationAdd(this.appStateStore.getModule(),e)},()=>{this.addMetadataLoadErrorMessage()}))}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(dt),n.\u0275\u0275inject(Oe),n.\u0275\u0275inject(Ci),n.\u0275\u0275inject(Vt),n.\u0275\u0275inject(Tr),n.\u0275\u0275inject(_n),n.\u0275\u0275inject($r),n.\u0275\u0275inject(ct),n.\u0275\u0275inject(Gt),n.\u0275\u0275inject(ca),n.\u0275\u0275inject(Hn),n.\u0275\u0275inject(rf),n.\u0275\u0275inject(mt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Zc=(()=>{class i extends li{recordFetchGQL;recordSaveGQL;appStateStore;languageStore;navigationStore;moduleNavigation;metadataStore;localStorage;message;subpanelFactory;recordManager;statisticsBatch;auth;recordStoreFactory;preferences;panelLogicManager;constructor(e,t,r,o,s,c,l,u,d,f,p,m,h,g,b,_){super(e,t,r,o,s,c,l,u,d,f,p,m,g,b,_),this.recordFetchGQL=e,this.recordSaveGQL=t,this.appStateStore=r,this.languageStore=o,this.navigationStore=s,this.moduleNavigation=c,this.metadataStore=l,this.localStorage=u,this.message=d,this.subpanelFactory=f,this.recordManager=p,this.statisticsBatch=m,this.auth=h,this.recordStoreFactory=g,this.preferences=b,this.panelLogicManager=_}init(e,t,r="detail",o={}){return this.internalState.module=e,this.internalState.recordID=t,this.setMode(r),this.parseParams(o),this.calculateShowWidgets(),this.showTopWidget=!1,this.showSubpanels=!1,!this.params.isDuplicate&&!this.params.originalDuplicateId&&this.initRecord(o),this.load()}save(){return this.appStateStore.updateLoading(`${this.internalState.module}-record-save-new`,!0),this.recordStore.save().pipe((0,v.catchError)(()=>(this.message.addDangerMessageByKey("LBL_ERROR_SAVING"),(0,S.of)({}))),(0,v.finalize)(()=>{this.setMode("detail"),this.appStateStore.updateLoading(`${this.internalState.module}-record-save-new`,!1)}))}initRecord(e={}){const t=this.auth.getCurrentUser(),r={id:"",type:"",module:this.internalState.module,attributes:{assigned_user_id:t.id,assigned_user_name:{id:t.id,user_name:t.userName},relate_to:e?.return_relationship,relate_id:e?.parent_id}};this.recordManager.injectParamFields(e,r,this.getVardefs()),this.recordStore.init(r)}load(){return this.params.isDuplicate&&this.params.originalDuplicateId?(this.updateState({...this.internalState,loading:!0}),this.recordStore.retrieveRecord(this.internalState.module,this.params.originalDuplicateId,!1).pipe((0,v.tap)(e=>{e.id="",e.attributes.id="",e.attributes.date_entered="",this.recordManager.injectParamFields(this.params,e,this.getVardefs()),this.recordStore.setRecord(e),this.updateState({...this.internalState,module:e.module,loading:!1})}))):(0,S.of)(this.recordStore.getBaseRecord()).pipe((0,v.shareReplay)())}calculateShowWidgets(){this.showSidebarWidgets=!1,this.widgets=!1}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Rr),n.\u0275\u0275inject(jr),n.\u0275\u0275inject(Gt),n.\u0275\u0275inject(Oe),n.\u0275\u0275inject(Ci),n.\u0275\u0275inject(wn),n.\u0275\u0275inject(mt),n.\u0275\u0275inject(cr),n.\u0275\u0275inject(ct),n.\u0275\u0275inject(Td),n.\u0275\u0275inject(ci),n.\u0275\u0275inject(Nd),n.\u0275\u0275inject(Hn),n.\u0275\u0275inject(kr),n.\u0275\u0275inject(Vt),n.\u0275\u0275inject($c))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),es=(()=>{class i{systemConfigStore;screenSize;store;swapSizes=[];subs=[];widgetSwap;widgetSwap$;constructor(e,t,r){this.systemConfigStore=e,this.screenSize=t,this.store=r,this.swapSizes=this.systemConfigStore.getUi("widget_swap_screen_sizes"),this.widgetSwap$=this.screenSize.screenSize$.pipe((0,v.map)(o=>{const s=(0,M.isTrue)(this.swapSizes[o]??!1);return(null===this.widgetSwap&&!0===s||this.widgetSwap!==s&&!0===s)&&(this.store.showSidebarWidgets=!1),this.widgetSwap=s,s}))}destroy(){this.subs.forEach(e=>e.unsubscribe()),this.subs=[]}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(dt),n.\u0275\u0275inject(ai),n.\u0275\u0275inject(li))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),af=(()=>{class i{store;metadata;config$;constructor(e,t){this.store=e,this.metadata=t,this.config$=this.metadata.recordViewMetadata$.pipe((0,S.combineLatestWith)(this.store.showSidebarWidgets$),(0,v.map)(([r,o])=>(r.sidebarWidgets&&r.sidebarWidgets.length&&r.sidebarWidgets.forEach(s=>{s&&"data-update"===s.refreshOn&&(s.reload$=this.store.record$.pipe((0,v.map)(()=>!0))),s&&(s.subpanelReload$=this.store.subpanelReload$)}),{widgets:r.sidebarWidgets||[],show:o})))}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(li),n.\u0275\u0275inject(mt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})();class vr extends M.ActionHandler{checkRecordAccess(a,e=[]){const r=a.store.recordStore.getBaseRecord().acls??[];return!(!r||!r.length)&&this.checkAccess(a.action??null,r,e)}navigateBack(a,e,t,r,o){let s=a.getReturnModule(e),c=a.getReturnAction(e),l=a.getReturnId(e);t!==l&&(s===r&&"record"===c&&l!==t||!s||!c||a.navigateBack(o,r,e))}}let zS=(()=>{class i extends vr{key="edit";modes=["detail"];constructor(){super()}run(e){e.store.setMode("edit")}shouldDisplay(e){return this.checkRecordAccess(e,["edit"])}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),WS=(()=>{class i extends vr{moduleNameMapper;router;key="create";modes=["detail"];constructor(e,t){super(),this.moduleNameMapper=e,this.router=t}run(e){const t=e.store,r=t.getBaseRecord(),o="/"+t.vm.appData.module.name+"/edit",s=this.moduleNameMapper.toLegacy(t.vm.appData.module.name);this.router.navigate([o],{queryParams:{return_module:s,return_action:"DetailView",return_record:r&&r.id||""}}).then()}shouldDisplay(e){return this.checkRecordAccess(e,["edit"])}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(_n),n.\u0275\u0275inject(Ft.Router))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),GS=(()=>{class i extends vr{key="toggle-widgets";modes=["detail","edit"];constructor(){super()}run(e){e.store.showSidebarWidgets=!e.store.showSidebarWidgets}shouldDisplay(e){return e.store.widgets}getStatus(e){return e.store.showSidebarWidgets?"active":""}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),KS=(()=>{class i extends vr{modalService;navigation;key="cancel";modes=["edit","detail"];constructor(e,t){super(),this.modalService=e,this.navigation=t}run(e){e.store.recordStore.isDirty()?this.showConfirmationModal(e):this.cancel(e)}shouldDisplay(){return!0}cancel(e){const t=e.store.params,r=e.store.getModuleName(),o=e.store.getRecordId(),s=e.store.getBaseRecord();this.navigateBack(this.navigation,t,o,r,s),e.store.recordStore.resetStaging(),e.store.setMode("detail")}showConfirmationModal(e){const t=this.modalService.open(Za);t.componentInstance.textKey="WARN_UNSAVED_CHANGES",t.componentInstance.buttons=[{labelKey:"LBL_CANCEL",klass:["btn-secondary"],onClick:r=>r.dismiss()},{labelKey:"LBL_PROCEED",klass:["btn-main"],onClick:r=>{this.cancel(e),r.close()}}]}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(de.NgbModal),n.\u0275\u0275inject(wn))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),HS=(()=>{class i extends vr{modalService;router;moduleNameMapper;actionNameMapper;key="cancelCreate";modes=["create"];constructor(e,t,r,o){super(),this.modalService=e,this.router=t,this.moduleNameMapper=r,this.actionNameMapper=o}run(e){e.store.recordStore.isDirty()?this.showConfirmationModal(e):this.cancel(e)}shouldDisplay(){return!0}cancel(e){const t=e.store;let r=t.getModuleName();t.params.return_module&&(r=this.moduleNameMapper.toFrontend(t.params.return_module));let o=t.params.return_action||"";const s=t.params.return_id||"";let c="/"+r;o&&(o=this.actionNameMapper.toFrontend(o),("record"!==o||s)&&(c+="/"+o)),s&&(c+="/"+s),this.router.navigate([c]).then()}showConfirmationModal(e){const t=this.modalService.open(Za);t.componentInstance.textKey="WARN_UNSAVED_CHANGES",t.componentInstance.buttons=[{labelKey:"LBL_CANCEL",klass:["btn-secondary"],onClick:r=>r.dismiss()},{labelKey:"LBL_OK",klass:["btn-main"],onClick:r=>{this.cancel(e),r.close()}}]}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(de.NgbModal),n.\u0275\u0275inject(Ft.Router),n.\u0275\u0275inject(_n),n.\u0275\u0275inject(ao))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),ZS=(()=>{class i extends vr{message;navigation;notificationStore;key="save";modes=["edit"];constructor(e,t,r){super(),this.message=e,this.navigation=t,this.notificationStore=r}run(e){Object.keys(e.store.recordStore.getStaging().fields).some(r=>e.store.recordStore.getStaging().fields[r].loading??!1)?this.message.addWarningMessageByKey("LBL_LOADING_IN_PROGRESS"):e.store.recordStore.validate().pipe((0,v.take)(1)).subscribe(r=>{r?e.store.save().pipe((0,v.take)(1)).subscribe(o=>{const s=e.store.params,c=e.store.getModuleName(),l=o.id;this.notificationStore.conditionalNotificationRefresh("edit"),this.navigateBack(this.navigation,s,l,c,o)}):this.message.addWarningMessageByKey("LBL_VALIDATION_ERRORS")})}shouldDisplay(e){return!0}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(ct),n.\u0275\u0275inject(wn),n.\u0275\u0275inject(la))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),qS=(()=>{class i extends vr{message;navigation;key="saveNew";modes=["create"];constructor(e,t){super(),this.message=e,this.navigation=t}run(e){e.store.recordStore.validate().pipe((0,v.take)(1)).subscribe(t=>{t?e.store.save().pipe((0,v.take)(1)).subscribe(r=>{const o=e.store,s=o.params,c=o.getModuleName();this.navigation.navigateBack(r,c,s)}):this.message.addWarningMessageByKey("LBL_VALIDATION_ERRORS")})}shouldDisplay(e){return!0}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(ct),n.\u0275\u0275inject(wn))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),JS=(()=>{class i extends vr{key="async-process";modes=M.ALL_VIEW_MODES;constructor(){super()}run(e){}shouldDisplay(e){const t=e?.action?.acl??[];return!t.length||this.checkRecordAccess(e,t)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),sf=(()=>{class i extends si{edit;create;toggleWidgets;cancel;cancelCreate;save;saveNew;async;constructor(e,t,r,o,s,c,l,u){super(),this.edit=e,this.create=t,this.toggleWidgets=r,this.cancel=o,this.cancelCreate=s,this.save=c,this.saveNew=l,this.async=u,e.modes.forEach(d=>this.actions[d][e.key]=e),t.modes.forEach(d=>this.actions[d][t.key]=t),r.modes.forEach(d=>this.actions[d][r.key]=r),o.modes.forEach(d=>this.actions[d][o.key]=o),c.modes.forEach(d=>this.actions[d][c.key]=c),l.modes.forEach(d=>this.actions[d][l.key]=l),s.modes.forEach(d=>this.actions[d][s.key]=s),u.modes.forEach(d=>this.actions[d][u.key]=u)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(zS),n.\u0275\u0275inject(WS),n.\u0275\u0275inject(GS),n.\u0275\u0275inject(KS),n.\u0275\u0275inject(HS),n.\u0275\u0275inject(ZS),n.\u0275\u0275inject(qS),n.\u0275\u0275inject(JS))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),cf=(()=>{class i{store;metadata;language;actions;logicManager;inlineEdit;fieldSubs=[];constructor(e,t,r,o,s){this.store=e,this.metadata=t,this.language=r,this.actions=o,this.logicManager=s}getEditAction(){const e={store:this.store};this.actions.run({key:"edit"},this.store.getMode(),e)}getDisplayConfig(){return this.metadata.recordViewMetadata$.pipe((0,S.combineLatestWith)(this.store.mode$),(0,v.map)(([e,t])=>({layout:this.getLayout(e),mode:t,maxColumns:e.templateMeta.maxColumns||2,tabDefs:e.templateMeta.tabDefs})))}getPanels(){return this.store.panels$}getRecord(){return this.store.stagingRecord$.pipe((0,S.combineLatestWith)(this.store.mode$),(0,v.map)(([e,t])=>("edit"===t||"create"===t?this.store.initValidators(e):this.store.resetValidatorsForAllFields(e),e.formGroup.enable(),e)))}getLayout(e){let t="panels";return e.templateMeta.useTabs&&(t="tabs"),t}clean(){this.fieldSubs.forEach(e=>e.unsubscribe())}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(li),n.\u0275\u0275inject(mt),n.\u0275\u0275inject(Oe),n.\u0275\u0275inject(sf),n.\u0275\u0275inject($c))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),lf=(()=>{class i{store;metadata;config$;constructor(e,t){this.store=e,this.metadata=t,this.config$=this.metadata.recordViewMetadata$.pipe((0,S.combineLatestWith)(this.store.showTopWidget$),(0,v.map)(([r,o])=>(r.topWidget&&"data-update"===r.topWidget.refreshOn&&(r.topWidget.reload$=this.store.record$.pipe((0,v.map)(()=>!0))),{widget:r.topWidget,show:o})))}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(li),n.\u0275\u0275inject(mt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),uf=(()=>{class i{store;metadata;config$;constructor(e,t){this.store=e,this.metadata=t,this.config$=this.metadata.recordViewMetadata$.pipe((0,S.combineLatestWith)(this.store.widgets$),(0,v.map)(([r,o])=>(r.bottomWidgets&&r.bottomWidgets.length&&r.bottomWidgets.forEach(s=>{s&&"data-update"===s.refreshOn&&(s.reload$=this.store.record$.pipe((0,v.map)(()=>!0))),s&&(s.subpanelReload$=this.store.subpanelReload$)}),{widgets:r.bottomWidgets||[],show:o})))}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(li),n.\u0275\u0275inject(mt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})();function Z7(i,a){1&i&&(n.\u0275\u0275elementStart(0,"div",7)(1,"div",11)(2,"div",12),n.\u0275\u0275element(3,"div",13),n.\u0275\u0275elementEnd()()())}function q7(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",7)(1,"div",11),n.\u0275\u0275element(2,"scrm-top-widget",14),n.\u0275\u0275elementEnd()()),2&i){const e=n.\u0275\u0275nextContext(3).ngIf,t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(2),n.\u0275\u0275property("config",e.topWidgetConfig.widget)("context",t.getViewContext())("type",e.topWidgetConfig.widget.type)}}function J7(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,q7,3,3,"div",6),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(2).ngIf,t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.topWidgetConfig.show&&t.hasTopWidgetMetadata(e.topWidgetConfig.widget))}}function Q7(i,a){1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275element(1,"scrm-record-content-skeleton"),n.\u0275\u0275elementContainerEnd())}function X7(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275element(1,"scrm-record-content",15),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(3);n.\u0275\u0275advance(1),n.\u0275\u0275property("dataSource",e.getContentAdapter())}}function Y7(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",18),n.\u0275\u0275element(1,"scrm-sidebar-widget",19),n.\u0275\u0275elementEnd()),2&i){const e=a.$implicit,t=n.\u0275\u0275nextContext(4);n.\u0275\u0275advance(1),n.\u0275\u0275property("config",e)("context$",t.getViewContext$())("context",t.getViewContext())("type",e.type)}}function ez(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",16)(1,"div",8),n.\u0275\u0275template(2,Y7,2,4,"div",17),n.\u0275\u0275elementEnd()()),2&i){const e=n.\u0275\u0275nextContext(2).ngIf;n.\u0275\u0275advance(2),n.\u0275\u0275property("ngForOf",e.bottomWidgetConfig.widgets)}}function tz(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",20)(1,"div",8),n.\u0275\u0275element(2,"scrm-subpanel-container",21),n.\u0275\u0275elementEnd()()),2&i){const e=n.\u0275\u0275nextContext(3);n.\u0275\u0275advance(2),n.\u0275\u0275property("config",e.getSubpanelsConfig())}}const nz=function(i){return{"col-lg-12":i}};function iz(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"div",4)(2,"div",5),n.\u0275\u0275template(3,Z7,4,0,"div",6),n.\u0275\u0275template(4,J7,2,1,"ng-container",3),n.\u0275\u0275elementStart(5,"div",7)(6,"div",8),n.\u0275\u0275template(7,Q7,2,0,"ng-container",3),n.\u0275\u0275template(8,X7,2,1,"ng-container",3),n.\u0275\u0275elementEnd()(),n.\u0275\u0275template(9,ez,3,1,"div",9),n.\u0275\u0275template(10,tz,3,1,"div",10),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext().ngIf,t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction1(7,nz,!t.sidebarWidgetConfig.show)),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",t.loading),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!t.loading),n.\u0275\u0275advance(3),n.\u0275\u0275property("ngIf",t.loading),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!t.loading),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.bottomWidgetConfig.show&&e.bottomWidgetConfig.widgets),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.showSubpanels)}}function rz(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",18),n.\u0275\u0275element(1,"scrm-sidebar-widget",24),n.\u0275\u0275elementEnd()),2&i){const e=a.$implicit,t=n.\u0275\u0275nextContext(4);n.\u0275\u0275advance(1),n.\u0275\u0275property("type",e.type)("context",t.getViewContext())("context$",t.getViewContext$())("config",e)}}function oz(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",23),n.\u0275\u0275template(1,rz,2,4,"div",17),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext(3);n.\u0275\u0275classProp("mt-0",e.swapWidgets),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",e.sidebarWidgetConfig.widgets)}}function az(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,oz,2,3,"div",22),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.displayWidgets)}}function sz(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",1)(1,"div",2),n.\u0275\u0275template(2,iz,11,9,"ng-container",3),n.\u0275\u0275template(3,az,2,1,"ng-container",3),n.\u0275\u0275elementEnd()()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",!e.swapWidgets||e.swapWidgets&&!e.displayWidgets),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!e.swapWidgets||e.swapWidgets&&e.displayWidgets)}}let df=(()=>{class i{recordViewStore;language;metadata;contentAdapter;topWidgetAdapter;sidebarWidgetAdapter;bottomWidgetAdapter;sidebarWidgetHandler;loading=!0;language$=(0,S.of)({});displayWidgets=!0;swapWidgets=!1;sidebarWidgetConfig;vm$;subs=[];constructor(e,t,r,o,s,c,l,u){this.recordViewStore=e,this.language=t,this.metadata=r,this.contentAdapter=o,this.topWidgetAdapter=s,this.sidebarWidgetAdapter=c,this.bottomWidgetAdapter=l,this.sidebarWidgetHandler=u,this.language$=t?.vm$??(0,S.of)({});const d=l?.config$??(0,S.of)({}),f=s?.config$??(0,S.of)({}),p=e?.showSubpanels$??(0,S.of)(!1);this.vm$=this.language$.pipe((0,S.combineLatestWith)(d,f,p),(0,v.map)(([m,h,g,b])=>({language:m,bottomWidgetConfig:h,topWidgetConfig:g,showSubpanels:b})))}ngOnInit(){this.subs.push(this.recordViewStore.loading$.subscribe(e=>{this.loading=e})),this.subs.push(this.sidebarWidgetAdapter.config$.subscribe(e=>{this.sidebarWidgetConfig=e,this.displayWidgets=this.sidebarWidgetConfig.show&&this.sidebarWidgetConfig.widgets})),this.subs.push(this.sidebarWidgetHandler.widgetSwap$.subscribe(e=>{this.swapWidgets=e}))}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe()),this.contentAdapter.clean()}getContentAdapter(){return this.contentAdapter}getSubpanelsConfig(){return{parentModule:this.recordViewStore.getModuleName(),subpanels$:this.recordViewStore.subpanels$,sidebarActive$:this.recordViewStore.widgets$}}getViewContext(){return this.recordViewStore.getViewContext()}getViewContext$(){return this.recordViewStore.viewContext$}hasTopWidgetMetadata(e){return!(!e||!e.type)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(li),n.\u0275\u0275directiveInject(Oe),n.\u0275\u0275directiveInject(mt),n.\u0275\u0275directiveInject(cf),n.\u0275\u0275directiveInject(lf),n.\u0275\u0275directiveInject(af),n.\u0275\u0275directiveInject(uf),n.\u0275\u0275directiveInject(es))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-record-container"]],features:[n.\u0275\u0275ProvidersFeature([cf,lf,af,uf])],decls:2,vars:3,consts:[["class","record-view-container view-container container-fluid pt-3 pb-3 small-font",4,"ngIf"],[1,"record-view-container","view-container","container-fluid","pt-3","pb-3","small-font"],[1,"row"],[4,"ngIf"],[1,"col-lg-9",3,"ngClass"],[1,"container-fluid","pl-0","pr-0"],["class","row no-gutters",4,"ngIf"],[1,"row","no-gutters"],[1,"col"],["class","row no-gutters mt-4",4,"ngIf"],["class","row no-gutters pt-1 pb-4",4,"ngIf"],[1,"col","pb-3"],[1,"d-flex","justify-content-center","widget-bar","rounded","pb-1","pt-3","box-loading"],[1,"d-flex","justify-content-center","align-items-baseline","widget-bar-entry","p-2"],[3,"config","context","type"],[3,"dataSource"],[1,"row","no-gutters","mt-4"],["class","mb-3",4,"ngFor","ngForOf"],[1,"mb-3"],[3,"config","context$","context","type"],[1,"row","no-gutters","pt-1","pb-4"],[3,"config"],["class","col-lg-3 record-widget-container pl-0",3,"mt-0",4,"ngIf"],[1,"col-lg-3","record-widget-container","pl-0"],[3,"type","context","context$","config"]],template:function(t,r){1&t&&(n.\u0275\u0275template(0,sz,4,2,"div",0),n.\u0275\u0275pipe(1,"async")),2&t&&n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(1,1,r.vm$))},dependencies:[F.NgClass,F.NgForOf,F.NgIf,FS,Ed,BS,Qd,_M,F.AsyncPipe],encapsulation:2})}return i})(),QS=(()=>{class i extends kS{key="displayType";modes=["edit","detail","list","create","massupdate","filter"];constructor(){super()}runAll(e,t){let r=!0;const o=Object.values(e).filter(u=>{const d=u.modes??[];return!(!d.length||!d.includes(t.store.getMode()))});if(!o||!o.length)return r;let s=t?.action?.display??"show",c="hide";return"hide"===s&&(c="show"),o.some(u=>this.run(t,u))&&(s=c),r="show"===s,r}run(e,t){const r=e.store.recordStore.getStaging();if(!r||!t)return!0;const o=t.params&&t.params.activeOnFields||{},s=Object.keys(o),c=t.params&&t.params.activeOnAttributes||{},l=Object.keys(c);return!s.length&&!l.length||this.isActive(s,r,o,l,c)}isActive(e,t,r,o,s){let c=!0;return(0,ne.isEmpty)(r)||(c=this.areFieldsActive(e,t,r)),(0,ne.isEmpty)(s)||(c=c&&this.areAttributesActive(o,t,s)),c}areAttributesActive(e,t,r){return e.every(o=>{const c=t.fields&&t.fields[o]||null,l=r[o]&&Object.keys(r[o]);if(c&&l&&l.length)return l.some(u=>{const d=r[o][u],f=c.attributes&&c.attributes[u];if(d&&d.length&&f)return this.isValueActive(f,d)})})}areFieldsActive(e,t,r){return e.every(o=>{const c=t.fields&&t.fields[o]||null,l=r[o];return!(c&&l&&l.length)||this.isValueActive(c,l)})}isValueActive(e,t){let r=!1;return e.valueList&&e.valueList.length?(e.valueList.some(o=>t.some(s=>{if(s===o)return r=!0,!0})),r):((0,M.isVoid)(e.value)||t.some(o=>{o===e.value&&(r=!0)}),r)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),ff=(()=>{class i extends Zi{store;metadata;language;actionManager;asyncActionService;message;confirmation;selectModalService;displayTypeLogic;defaultActions={detail:[{key:"toggle-widgets",labelKey:"LBL_INSIGHTS",params:{expanded:!0},acl:[]}],edit:[{key:"toggle-widgets",labelKey:"LBL_INSIGHTS",params:{expanded:!0},acl:[]}]};constructor(e,t,r,o,s,c,l,u,d){super(o,s,c,l,r,u,t),this.store=e,this.metadata=t,this.language=r,this.actionManager=o,this.asyncActionService=s,this.message=c,this.confirmation=l,this.selectModalService=u,this.displayTypeLogic=d}getActions(e){return this.metadata.recordViewMetadata$.pipe((0,S.combineLatestWith)(this.store.mode$,this.store.record$,this.store.language$,this.store.widgets$,this.store.panels$),(0,v.map)(([t,r])=>r&&t?this.parseModeActions(t.actions,r,this.store.getViewContext()):[]))}buildActionData(e,t){return{store:this.store,action:e}}buildActionInput(e,t,r,o=null){const s=this.store.getBaseRecord();return this.message.removeMessages(),{action:t,module:s.module,id:s.id,params:e&&e.params||[]}}getMode(){return this.store.getMode()}getModuleName(e){return this.store.getModuleName()}reload(e,t,r){this.store.load(!1).pipe((0,v.take)(1)).subscribe()}shouldDisplay(e,t){const r=t?.action?.displayLogic??null;let o=!0;return r&&Object.keys(r).length&&(o=this.displayTypeLogic.runAll(r,t)),!!o&&e&&e.shouldDisplay(t)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(li),n.\u0275\u0275inject(mt),n.\u0275\u0275inject(Oe),n.\u0275\u0275inject(sf),n.\u0275\u0275inject(Kt),n.\u0275\u0275inject(ct),n.\u0275\u0275inject(yn),n.\u0275\u0275inject(En),n.\u0275\u0275inject(QS))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})();function cz(i,a){if(1&i&&n.\u0275\u0275element(0,"scrm-dynamic-label",13),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("fields",e.record.fields)("labelKey",e.getSummaryTemplate())}}function lz(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",14),n.\u0275\u0275element(1,"scrm-favorite-toggle",15),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("record",e.record)}}function uz(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",16),n.\u0275\u0275element(1,"scrm-action-group-menu",17),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("config",e.actionsAdapter)}}function dz(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"div",3)(2,"div",4)(3,"div",5),n.\u0275\u0275element(4,"div",6),n.\u0275\u0275elementEnd(),n.\u0275\u0275element(5,"div",7),n.\u0275\u0275elementStart(6,"div",5)(7,"div",8)(8,"div",9),n.\u0275\u0275template(9,cz,1,2,"scrm-dynamic-label",10),n.\u0275\u0275template(10,lz,2,1,"div",11),n.\u0275\u0275elementEnd()()(),n.\u0275\u0275element(11,"div",7),n.\u0275\u0275elementStart(12,"div",5),n.\u0275\u0275template(13,uz,2,1,"div",12),n.\u0275\u0275elementEnd()()(),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(9),n.\u0275\u0275property("ngIf",e.record&&e.record.fields),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.record&&e.record.fields&&"create"!==e.mode),n.\u0275\u0275advance(3),n.\u0275\u0275property("ngIf",e.record)}}function fz(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",19)(1,"div",20),n.\u0275\u0275element(2,"scrm-module-title",21)(3,"div",22),n.\u0275\u0275elementEnd()()),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(2),n.\u0275\u0275property("title",e.moduleTitle)}}function pz(i,a){if(1&i&&n.\u0275\u0275element(0,"scrm-dynamic-label",28),2&i){const e=n.\u0275\u0275nextContext(3);n.\u0275\u0275property("fields",e.record.fields)("labelKey",e.getSummaryTemplate())}}function mz(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",14),n.\u0275\u0275element(1,"scrm-favorite-toggle",29),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext(3);n.\u0275\u0275advance(1),n.\u0275\u0275property("record",e.record)}}function gz(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",7),n.\u0275\u0275element(1,"scrm-action-group-menu",30),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext(3);n.\u0275\u0275advance(1),n.\u0275\u0275property("config",e.actionsAdapter)("actionContext",e.getActionContext(e.record))("klass",e.isScrolled?"record-view-actions-scrolled float-right":"record-view-actions float-right")}}function hz(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",19)(1,"div",23)(2,"div",23),n.\u0275\u0275template(3,pz,1,2,"scrm-dynamic-label",24),n.\u0275\u0275template(4,mz,2,1,"div",11),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(5,"div",25)(6,"div",26),n.\u0275\u0275template(7,gz,2,3,"div",27),n.\u0275\u0275elementEnd()()()),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngClass","col-md-5 d-flex align-items-center justify-content-center justify-content-sm-start"),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngClass",e.isScrolled?"record-view-name-scrolled d-flex align-items-center":"record-view-name d-flex align-items-center"),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.record&&e.record.fields),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.record&&e.record.fields&&"create"!==e.mode),n.\u0275\u0275advance(3),n.\u0275\u0275property("ngIf",e.record)}}function vz(i,a){if(1&i&&(n.\u0275\u0275template(0,fz,4,1,"div",18),n.\u0275\u0275template(1,hz,8,5,"div",18)),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275property("ngIf",e.loading),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!e.loading)}}let pf=(()=>{class i{actionsAdapter;recordViewStore;moduleNavigation;record;displayResponsiveTable=!1;mode="detail";loading=!0;isScrolled=!1;subs=[];onScroll(){const e=window.pageYOffset,t=5*parseFloat(getComputedStyle(document.documentElement).fontSize);if(e>t){if(e-t<10)return;this.isScrolled=!0}else{if(t-e<10)return;this.isScrolled=!1}}constructor(e,t,r){this.actionsAdapter=e,this.recordViewStore=t,this.moduleNavigation=r}ngOnInit(){this.mode=this.recordViewStore.getMode(),this.subs.push(this.recordViewStore.mode$.subscribe(e=>{this.mode=e})),this.subs.push(this.recordViewStore.record$.subscribe(e=>{this.record=e})),this.subs.push(this.recordViewStore.loading$.subscribe(e=>{this.loading=e}))}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}get moduleTitle(){return this.moduleNavigation.getModuleLabel(this.recordViewStore.vm.appData.module,this.recordViewStore.vm.appData.language.appListStrings)}getSummaryTemplate(){return this.recordViewStore.getSummaryTemplate()}getActionContext(e){return e?{module:e.module||"",record:e}:{}}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(ff),n.\u0275\u0275directiveInject(li),n.\u0275\u0275directiveInject(wn))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-record-header"]],hostBindings:function(t,r){1&t&&n.\u0275\u0275listener("scroll",function(){return r.onScroll()},!1,n.\u0275\u0275resolveWindow)},features:[n.\u0275\u0275ProvidersFeature([ff])],decls:4,vars:3,consts:[[1,"record-view-header",3,"ngClass"],[4,"ngIf"],[3,"ngIf"],[1,"d-flex","flex-nowrap"],[1,"row"],[1,"col"],[1,"order-3"],[1,"w-100"],[1,"order-2"],[1,"record-view-name","d-flex","align-items-center"],[3,"fields","labelKey",4,"ngIf"],["class","pl-1 d-flex align-items-top",4,"ngIf"],["class","order-1",4,"ngIf"],[3,"fields","labelKey"],[1,"pl-1","d-flex","align-items-top"],[3,"record"],[1,"order-1"],["klass","record-view-actions float-right",3,"config"],["class","row mr-0",4,"ngIf"],[1,"row","mr-0"],[1,"col-md-5","d-flex","align-items-center","justify-content-center","justify-content-sm-start"],[1,"record-view-title","title-font",3,"title"],[1,"record-view-name","pt-3","pb-3"],[3,"ngClass"],["class","d-inline-block h-100 lh-100",3,"fields","labelKey",4,"ngIf"],[1,"col-md-7","d-flex","align-items-center","justify-content-center","justify-content-sm-end"],[1,"row","mr-1","ml-1"],["class","w-100",4,"ngIf"],[1,"d-inline-block","h-100","lh-100",3,"fields","labelKey"],[1,"d-inline-block","h-100","lh-100",3,"record"],["buttonClass","settings-button",3,"config","actionContext","klass"]],template:function(t,r){1&t&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"div",0),n.\u0275\u0275template(2,dz,14,3,"ng-container",1),n.\u0275\u0275template(3,vz,2,2,"ng-template",2),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()),2&t&&(n.\u0275\u0275advance(1),n.\u0275\u0275property("ngClass",r.isScrolled?"record-view-header-scrolled shadow-md":""),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.displayResponsiveTable),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!r.displayResponsiveTable))},dependencies:[F.NgClass,F.NgIf,fd,no,ur,$M],encapsulation:2})}return i})();function _z(i,a){1&i&&n.\u0275\u0275element(0,"scrm-status-bar")}function yz(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",1)(1,"div",2),n.\u0275\u0275element(2,"scrm-record-header"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(3,"div",3),n.\u0275\u0275element(4,"hr",4),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(5,_z,1,0,"scrm-status-bar",5),n.\u0275\u0275element(6,"scrm-record-container"),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(5),n.\u0275\u0275property("ngIf",e.showStatusBar)}}let bz=(()=>{class i{appState;recordStore;route;recordSub;vm$=null;showStatusBar=!1;constructor(e,t,r){this.appState=e,this.recordStore=t,this.route=r}ngOnInit(){let e="detail";const t=this.route.snapshot&&this.route.snapshot.data||{};t.mode&&(e=t.mode);let r=this.route.snapshot&&this.route.snapshot.queryParams||{};r={...r};let o=this.route.snapshot.params.record;!0===t.duplicate&&(r.originalDuplicateId=o,r.isDuplicate=!0,o=""),this.recordSub=this.recordStore.init(this.appState.getModule(),o,e,r).subscribe(),this.vm$=this.recordStore.vm$}ngOnDestroy(){this.recordSub&&this.recordSub.unsubscribe(),this.recordStore.destroy()}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(Gt),n.\u0275\u0275directiveInject(Zc),n.\u0275\u0275directiveInject(Ft.ActivatedRoute))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-create-record"]],features:[n.\u0275\u0275ProvidersFeature([Zc,{provide:li,useExisting:Zc},es])],decls:2,vars:3,consts:[["class","record-view",4,"ngIf"],[1,"record-view"],[1,"record-view-position-sticky"],[1,"record-view-hr-container"],[1,"record-view-hr"],[4,"ngIf"]],template:function(t,r){1&t&&(n.\u0275\u0275template(0,yz,7,1,"div",0),n.\u0275\u0275pipe(1,"async")),2&t&&n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(1,1,r.vm$))},dependencies:[F.NgIf,df,pf,Ld,F.AsyncPipe],encapsulation:2})}return i})(),mf=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,hr,Ve.AngularSvgIconModule,IS,Fd,OS,Xd,yM]})}return i})(),gf=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,qa,io,fr,UM]})}return i})();function Cz(i,a){1&i&&n.\u0275\u0275element(0,"scrm-status-bar")}function Mz(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",1)(1,"div",2),n.\u0275\u0275element(2,"scrm-record-header"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(3,"div",3),n.\u0275\u0275element(4,"hr",4),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(5,Cz,1,0,"scrm-status-bar",5),n.\u0275\u0275element(6,"scrm-record-container"),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(5),n.\u0275\u0275property("ngIf",e.showStatusBar)}}let Sz=(()=>{class i{appState;recordStore;route;sidebarWidgetHandler;recordSub;vm$=null;showStatusBar=!1;constructor(e,t,r,o){this.appState=e,this.recordStore=t,this.route=r,this.sidebarWidgetHandler=o}ngOnInit(){let e="detail";const t=this.route.snapshot&&this.route.snapshot.data||{};t.mode&&(e=t.mode);const r=this.route.snapshot&&this.route.snapshot.queryParams||{};this.recordSub=this.recordStore.init(this.appState.getModule(),this.route.snapshot.params.record,e,r).subscribe(),this.vm$=this.recordStore.vm$}ngOnDestroy(){this.recordSub&&this.recordSub.unsubscribe(),this.sidebarWidgetHandler.destroy(),this.recordStore.destroy()}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(Gt),n.\u0275\u0275directiveInject(li),n.\u0275\u0275directiveInject(Ft.ActivatedRoute),n.\u0275\u0275directiveInject(es))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-record"]],features:[n.\u0275\u0275ProvidersFeature([li,es])],decls:2,vars:3,consts:[["class","record-view",4,"ngIf"],[1,"record-view"],[1,"record-view-position-sticky"],[1,"record-view-hr-container"],[1,"record-view-hr"],[4,"ngIf"]],template:function(t,r){1&t&&(n.\u0275\u0275template(0,Mz,7,1,"div",0),n.\u0275\u0275pipe(1,"async")),2&t&&n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(1,1,r.vm$))},dependencies:[F.NgIf,df,pf,Ld,F.AsyncPipe],encapsulation:2})}return i})(),XS=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Pn,mf,gf,jd,Hc]})}return i})(),Dz=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Pn,XS,mf,gf,jd,Hc]})}return i})();class YS extends M.ActionHandler{}let eD=(()=>{class i extends YS{message;asyncActionService;router;modalService;state;localStorage;key="install";modes=["edit"];constructor(e,t,r,o,s,c){super(),this.message=e,this.asyncActionService=t,this.router=r,this.modalService=o,this.state=s,this.localStorage=c}run(e){e.store.recordStore.validate().pipe((0,v.take)(1)).subscribe(t=>{if(t){const r=e.store.recordStore.getStaging();this.runInstall(r)}else this.message.addWarningMessageByKey("LBL_VALIDATION_ERRORS")})}shouldDisplay(){return!0}runInstall(e){const t=`suitecrm-app-${this.key}`;this.message.removeMessages(),this.asyncActionService.run(t,{action:t,module:e.module,id:e.id,payload:e.formGroup.value}).pipe((0,v.take)(1)).subscribe(o=>{3===o.data.statusCode&&this.openErrorModalDialog(o.data.errors),0===o.data.statusCode&&(this.state.clear(),this.localStorage.clear(),this.router.navigate(["/"],{}).then())})}openErrorModalDialog(e){this.modalService.open(dd,{ariaLabelledBy:"modal-basic-title",centered:!0,size:"lg",windowClass:"custom-modal",modalDialogClass:"custom-modal"}).componentInstance.errors=e}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(ct),n.\u0275\u0275inject(Kt),n.\u0275\u0275inject(Ft.Router),n.\u0275\u0275inject(de.NgbModal),n.\u0275\u0275inject(id),n.\u0275\u0275inject(cr))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),hf=(()=>{class i extends si{save;constructor(e){super(),this.save=e,e.modes.forEach(t=>this.actions[t][e.key]=e)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(eD))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const tD={loading:!1,mode:"detail",params:{returnModule:"",returnId:"",returnAction:""}};let pa=(()=>{class i{recordFetchGQL;recordSaveGQL;message;recordManager;recordStoreFactory;language;record$;stagingRecord$;loading$;mode$;viewContext$;vm$;vm;recordStore;cache$=null;internalState=(0,M.deepClone)(tD);store=new S.BehaviorSubject(this.internalState);state$=this.store.asObservable();subs=[];constructor(e,t,r,o,s,c){this.recordFetchGQL=e,this.recordSaveGQL=t,this.message=r,this.recordManager=o,this.recordStoreFactory=s,this.language=c,this.recordStore=s.create(this.getViewFieldsObservable()),this.record$=this.recordStore.state$.pipe((0,v.distinctUntilChanged)()),this.stagingRecord$=this.recordStore.staging$.pipe((0,v.distinctUntilChanged)()),this.loading$=this.state$.pipe((0,v.map)(l=>l.loading)),this.mode$=this.state$.pipe((0,v.map)(l=>l.mode)),this.vm$=this.record$.pipe((0,S.combineLatestWith)(this.loading$),(0,v.map)(([l,u])=>(this.vm={record:l,loading:u},this.vm))),this.viewContext$=this.record$.pipe((0,v.map)(()=>this.getViewContext()))}get params(){return this.internalState.params||{}}set params(e){this.updateState({...this.internalState,params:e})}getViewContext(){return{record:this.getBaseRecord()}}getActions(){return(0,S.of)([])}init(e="edit",t={}){this.setMode(e),this.recordStore.init({id:"",module:"install",attributes:{}})}clear(){this.cache$=null,this.updateState((0,M.deepClone)(tD))}clearAuthBased(){this.clear()}getBaseRecord(){return this.internalState?this.recordStore.getBaseRecord():null}getMode(){return this.internalState?this.internalState.mode:null}setMode(e){this.updateState({...this.internalState,mode:e})}getLicenseText(){return this.language.getFieldLabel("SUITE8_LICENSE_CONTENT")}getMetadata(){return{actions:[],templateMeta:{maxColumns:2,useTabs:!0,tabDefs:{LBL_CONFIG:{newTab:!0,panelDefault:"expanded"}}},panels:[{key:"LBL_CONFIG",display$:(0,S.of)(!0).pipe((0,v.shareReplay)(1)),rows:[{cols:[{name:"site_host",label:"LBL_SITECFG_URL",type:"varchar",fieldDefinition:{name:"site_host",vname:"LBL_SITECFG_URL",type:"varchar",required:!0}},{name:"demoData",label:"LBL_DBCONF_DEMO_DATA",type:"enum",fieldDefinition:{name:"demoData",vname:"LBL_DBCONF_DEMO_DATA",type:"enum",options:"__no_options__",required:!0,metadata:{extraOptions:[{value:"yes",labelKey:"LBL_YES"},{value:"no",labelKey:"LBL_NO"}]}}}]},{cols:[{name:"db_config",label:"LBL_DBCONF_TITLE",type:"grouped-field",fieldDefinition:{name:"db_config",vname:"LBL_DBCONF_TITLE",type:"grouped-field",layout:["db_username","db_password","db_host","db_name","db_port"],display:"vertical",groupFields:{db_username:{name:"db_username",type:"varchar",vname:"LBL_DBCONF_SUITE_DB_USER",labelKey:"LBL_DBCONF_SUITE_DB_USER",label:"LBL_DBCONF_SUITE_DB_USER",showLabel:["*"],required:!0},db_password:{name:"db_password",type:"password",vname:"LBL_DBCONF_DB_PASSWORD",labelKey:"LBL_DBCONF_DB_PASSWORD",showLabel:["*"],required:!0},db_host:{name:"db_host",type:"varchar",vname:"LBL_DBCONF_HOST_NAME",labelKey:"LBL_DBCONF_HOST_NAME",showLabel:["*"],required:!0},db_name:{name:"db_name",type:"varchar",vname:"LBL_DBCONF_DB_NAME",labelKey:"LBL_DBCONF_DB_NAME",showLabel:["*"],required:!0},db_port:{name:"db_port",type:"varchar",vname:"LBL_DBCONF_DB_PORT",labelKey:"LBL_DBCONF_DB_PORT",showLabel:["*"],required:!1}},showLabel:{edit:["*"]}}},{name:"admin_config",label:"LBL_SITECFG_TITLE",type:"grouped-field",fieldDefinition:{name:"admin_config",vname:"LBL_SITECFG_TITLE",type:"grouped-field",layout:["site_username","site_password"],display:"vertical",groupFields:{site_username:{name:"site_username",type:"varchar",vname:"LBL_SITECFG_ADMIN_Name",labelKey:"LBL_SITECFG_ADMIN_Name",showLabel:["edit"],required:!0},site_password:{name:"site_password",type:"password",vname:"LBL_SITECFG_ADMIN_PASS",labelKey:"LBL_SITECFG_ADMIN_PASS",showLabel:["edit"],required:!0}},showLabel:{edit:["*"]}}}]}]}]}}getMetadata$(){return(0,S.of)(this.getMetadata())}getModuleName(){return"install"}parseParams(e={}){if(!e)return;const t={...this.internalState.params};Object.keys(e).forEach(r=>{(0,M.isVoid)(t[r])||(t[r]=e[r])}),this.params=e}updateState(e){this.store.next(this.internalState=e)}getIgnoreSystemChecksField(){return this.recordStore.getStaging().fields.sys_check_option}getViewFieldsObservable(){return this.getMetadata$().pipe((0,v.map)(e=>{const t=[];return e.panels.forEach(r=>{r.rows.forEach(o=>{o.cols.forEach(s=>{t.push(s)})})}),t.push({name:"sys_check_option",type:"boolean",fieldDefinition:{name:"sys_check_option",type:"boolean",vname:"LBL_SYS_CHECK_WARNING",labelKey:"LBL_SYS_CHECK_WARNING",showLabel:["edit"],required:!1,value:"false",default:"false"}}),t}))}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Rr),n.\u0275\u0275inject(jr),n.\u0275\u0275inject(ct),n.\u0275\u0275inject(ci),n.\u0275\u0275inject(kr),n.\u0275\u0275inject(Oe))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),vf=(()=>{class i extends Zi{store;metadata;language;actionManager;asyncActionService;message;confirmation;selectModalService;defaultActions={detail:[],edit:[{key:"install",labelKey:"LBL_PROCEED",params:{expanded:!0},acl:[]}],create:[]};collapseButtons=!1;constructor(e,t,r,o,s,c,l,u){super(o,s,c,l,r,u,t),this.store=e,this.metadata=t,this.language=r,this.actionManager=o,this.asyncActionService=s,this.message=c,this.confirmation=l,this.selectModalService=u}getActions(e){return this.store.getActions().pipe((0,S.combineLatestWith)(this.store.mode$,this.store.stagingRecord$),(0,v.map)(([t,r])=>r?this.parseModeActions(t,r,this.store.getViewContext()):[]))}buildActionData(e,t){return{store:this.store}}buildActionInput(e,t,r,o=null){const s=this.store.getBaseRecord();return this.message.removeMessages(),{action:t,module:s.module,id:s.id,record:s}}getMode(){return this.store.getMode()}getModuleName(e){return this.store.getModuleName()}reload(e,t,r){}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(pa),n.\u0275\u0275inject(mt),n.\u0275\u0275inject(Oe),n.\u0275\u0275inject(hf),n.\u0275\u0275inject(Kt),n.\u0275\u0275inject(ct),n.\u0275\u0275inject(yn),n.\u0275\u0275inject(En))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),_f=(()=>{class i{store;metadata;language;actions;inlineEdit;constructor(e,t,r,o){this.store=e,this.metadata=t,this.language=r,this.actions=o}getEditAction(){}getDisplayConfig(){return this.store.getMetadata$().pipe((0,S.combineLatestWith)(this.store.mode$),(0,v.map)(([e,t])=>({layout:this.getLayout(e),mode:t,maxColumns:e.templateMeta.maxColumns||2,tabDefs:e.templateMeta.tabDefs})))}getPanels(){return this.store.getMetadata$().pipe((0,S.combineLatestWith)(this.store.stagingRecord$,this.language.vm$),(0,v.map)(([e,t,r])=>{const o=[],s=t&&t.module||"";return e.panels.forEach(c=>{const u={label:this.language.getFieldLabel(c.key.toUpperCase(),s,r),key:c.key,display$:c?.display$??(0,S.of)(!0).pipe((0,v.shareReplay)(1)),rows:[]};c.rows.forEach(d=>{const f={cols:[]};d.cols.forEach(p=>{f.cols.push({...p})}),u.rows.push(f)}),o.push(u)}),o}))}getRecord(){return this.store.stagingRecord$}getLayout(e){let t="panels";return e.templateMeta.useTabs&&(t="tabs"),t}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(pa),n.\u0275\u0275inject(mt),n.\u0275\u0275inject(Oe),n.\u0275\u0275inject(hf))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),nD=(()=>{class i{metadata;contentAdapter;constructor(e,t){this.metadata=e,this.contentAdapter=t}getContentAdapter(){return this.contentAdapter}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(mt),n.\u0275\u0275directiveInject(_f))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-install-container"]],features:[n.\u0275\u0275ProvidersFeature([_f])],decls:4,vars:1,consts:[[1,"install-view-container","record-view-container","view-container","container-fluid","pt-3","pb-3","small-font"],[1,"row","no-gutters"],[1,"col"],[3,"dataSource"]],template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div",2),n.\u0275\u0275element(3,"scrm-record-content",3),n.\u0275\u0275elementEnd()()()),2&t&&(n.\u0275\u0275advance(3),n.\u0275\u0275property("dataSource",r.getContentAdapter()))},dependencies:[Ed],encapsulation:2})}return i})(),iD=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Ve.AngularSvgIconModule,Fd]})}return i})();function wz(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),n.\u0275\u0275element(5,"scrm-label",5),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(6,"div",6),n.\u0275\u0275element(7,"scrm-label",7),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(8,"div",8)(9,"div",9)(10,"div",10)(11,"div",11)(12,"div",12)(13,"label",13),n.\u0275\u0275element(14,"scrm-label",14),n.\u0275\u0275elementEnd(),n.\u0275\u0275text(15,": "),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(16,"div",15)(17,"div",16),n.\u0275\u0275element(18,"scrm-field",17),n.\u0275\u0275elementEnd()()(),n.\u0275\u0275elementStart(19,"div"),n.\u0275\u0275element(20,"scrm-action-group-menu",18),n.\u0275\u0275elementEnd()()()()()(),n.\u0275\u0275elementContainerEnd()),2&i){const e=a.ngIf,t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(14),n.\u0275\u0275property("labelKey",t.store.getIgnoreSystemChecksField().definition.vname),n.\u0275\u0275advance(4),n.\u0275\u0275property("field",t.store.getIgnoreSystemChecksField())("mode","edit")("record",e.record)("type",t.store.getIgnoreSystemChecksField().type),n.\u0275\u0275advance(2),n.\u0275\u0275property("actionContext",t.getActionContext(e.record))("config",t.actionsAdapter)}}let rD=(()=>{class i{actionsAdapter;store;vm$;constructor(e,t){this.actionsAdapter=e,this.store=t,this.vm$=this.store?.record$?this.store.record$.pipe((0,v.map)(r=>({record:r}))):(0,S.of)({record:null})}getActionContext(e){return e?{module:e.module||"",record:e}:{}}getTitle(){}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(vf),n.\u0275\u0275directiveInject(pa))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-install-header"]],features:[n.\u0275\u0275ProvidersFeature([vf])],decls:2,vars:3,consts:[[4,"ngIf"],[1,"install-view-header"],[1,"row","mr-0"],[1,"col-md-4","install-header-title-col"],[1,"install-view-title","record-view-name"],["labelKey","LBL_WELCOME","module","install"],[1,"install-view-subtitle","record-view-title"],["labelKey","LBL_INSTALL","module","install"],[1,"col-md-8","install-header-buttons-col"],[1,"row","mr-1","ml-1"],[1,"w-100","d-flex","justify-content-end","align-items-center"],[1,"w-100","install-header-options","d-flex","justify-content-end","align-items-center","pr-5"],[1,"label-container","pr-2"],[1,"m-0","small"],[3,"labelKey"],[1,"d-flex"],[1,"flex-grow-1","text-break"],[3,"field","mode","record","type"],["buttonClass","settings-button","klass","install-view-actions float-right",3,"actionContext","config"]],template:function(t,r){1&t&&(n.\u0275\u0275template(0,wz,21,7,"ng-container",0),n.\u0275\u0275pipe(1,"async")),2&t&&n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(1,1,r.vm$))},dependencies:[F.NgIf,ur,Ot,Ki,F.AsyncPipe],encapsulation:2})}return i})(),oD=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,qa,fr,Nt,Pn]})}return i})();function xz(i,a){1&i&&(n.\u0275\u0275elementStart(0,"div",1),n.\u0275\u0275element(1,"scrm-install-header"),n.\u0275\u0275elementStart(2,"div",2),n.\u0275\u0275element(3,"hr",3),n.\u0275\u0275elementEnd(),n.\u0275\u0275element(4,"scrm-install-container"),n.\u0275\u0275elementEnd())}let Ez=(()=>{class i{store;route;vm$=null;showStatusBar=!1;constructor(e,t){this.store=e,this.route=t,this.vm$=this.store?.vm$??(0,S.of)({record:null,loading:!0})}ngOnInit(){let e="edit";const t=this.route.snapshot&&this.route.snapshot.data||{};t.mode&&(e=t.mode),this.store&&(this.store.init(e),this.vm$=this.store.vm$)}ngOnDestroy(){this.store?.clear()}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(pa),n.\u0275\u0275directiveInject(Ft.ActivatedRoute))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-install-view"]],features:[n.\u0275\u0275ProvidersFeature([pa])],decls:2,vars:3,consts:[["class","install-view",4,"ngIf"],[1,"install-view"],[1,"record-view-hr-container"],[1,"record-view-hr"]],template:function(t,r){1&t&&(n.\u0275\u0275template(0,xz,5,0,"div",0),n.\u0275\u0275pipe(1,"async")),2&t&&n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(1,1,r.vm$))},dependencies:[F.NgIf,rD,nD,F.AsyncPipe],encapsulation:2})}return i})(),Fz=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Pn,oD,iD]})}return i})();class yf extends YM{}let aD=(()=>{class i extends yf{message;asyncActionService;confirmation;asyncAction;key="bulk-action";modes=["detail","edit","list","create","massupdate"];constructor(e,t,r,o){super(),this.message=e,this.asyncActionService=t,this.confirmation=r,this.asyncAction=o}run(e){const t=e.action,r=e.listStore.recordList.selection,o=t&&t.params||{};if((0,M.isFalse)(o.allowAll)&&r.all)this.message.addDangerMessage(e.listStore.appStrings.LBL_SELECT_ALL_NOT_ALLOWED);else{if(o.min&&r.count<o.min){let s=e.listStore.appStrings.LBL_TOO_FEW_SELECTED;return s=s.replace("{min}",o.min),void this.message.addDangerMessage(s)}if(o.max&&r.count>o.max){let s=e.listStore.appStrings.LBL_TOO_MANY_SELECTED;return s=s.replace("{max}",o.max),void this.message.addDangerMessage(s)}this.runBulkAction(e)}}shouldDisplay(){return!0}runBulkAction(e){const t=`bulk-${e.action.params.bulkAction}`,r=this.buildActionInput(t,e);this.asyncAction.run(t,r).subscribe(o=>{this.handleProcessResult(o,e)})}buildActionInput(e,t){const r=[];t.listStore.metadata.listView.fields.forEach(c=>{r.push(c.name)});const o={action:e,module:t.listStore.getModuleName(),criteria:null,sort:null,ids:null,fields:r,payload:{panelRecord:t.store.recordStore.getBaseStaging()}},s=t.listStore.recordList.selection;return s.all&&s.count>t.listStore.recordList.records.length&&(o.criteria=t.listStore.recordList.criteria,o.sort=t.listStore.recordList.sort),s.all&&s.count<=t.listStore.recordList.records.length&&(o.ids=[],t.listStore.recordList.records.forEach(c=>{t.ids.push(c.id)})),s.all||(o.ids=Object.keys(s.selected)),o}handleProcessResult(e,t){e.data&&e.data.reload&&(t.listStore.recordList.clearSelection(),t.listStore.load(!1).pipe((0,v.take)(1)).subscribe()),e.data&&e.data.dataUpdated&&t.listStore.triggerDataUpdate(),t.listStore.closeRecordPanel()}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(ct),n.\u0275\u0275inject(Kt),n.\u0275\u0275inject(yn),n.\u0275\u0275inject(Kt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),sD=(()=>{class i extends yf{key="cancel";modes=["detail","edit","list","create","massupdate"];constructor(){super()}run(e){e.listStore.closeRecordPanel()}shouldDisplay(){return!0}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),bf=(()=>{class i extends si{constructor(e,t){super(),e.modes.forEach(r=>this.actions[r][e.key]=e),t.modes.forEach(r=>this.actions[r][t.key]=t)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(aD),n.\u0275\u0275inject(sD))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),cD=(()=>{class i{store;message;confirmation;selectModalService;asyncAction;metadata;constructor(e,t,r,o,s,c){this.store=e,this.message=t,this.confirmation=r,this.selectModalService=o,this.asyncAction=s,this.metadata=c}getBulkActions(){return this.store.metadata$.pipe((0,v.map)(e=>e.listView.bulkActions))}executeBulkAction(e){const t=this.store.recordList.selection,r=this.store.metadata.listView.bulkActions[e],o=`bulk-${e}`;if(this.message.removeMessages(),(0,M.isFalse)(r.params.allowAll)&&t.all)return void this.message.addDangerMessage(this.store.appStrings.LBL_SELECT_ALL_NOT_ALLOWED);if(r.params.min&&t.count<r.params.min){let h=this.store.appStrings.LBL_TOO_FEW_SELECTED;return h=h.replace("{min}",r.params.min),void this.message.addDangerMessage(h)}if(r.params.max&&t.count>r.params.max){let h=this.store.appStrings.LBL_TOO_MANY_SELECTED;return h=h.replace("{max}",r.params.max),void this.message.addDangerMessage(h)}const s=[];this.store.metadata.listView.fields.forEach(h=>{s.push(h.name)});const c={action:o,module:this.store.getModuleName(),criteria:null,sort:null,ids:null,fields:s};t.all&&t.count>this.store.recordList.records.length&&(c.criteria=this.store.recordList.criteria,c.sort=this.store.recordList.sort),t.all&&t.count<=this.store.recordList.records.length&&(c.ids=[],this.store.recordList.records.forEach(h=>{c.ids.push(h.id)})),t.all||(c.ids=Object.keys(t.selected));const l=r&&r.params||{},u=l.displayConfirmation||!1,d=l.confirmationLabel||"",f=r.params&&r.params.selectModal,p=f&&f.module,m=r.params&&r.params.recordPanel;m?this.store.openRecordPanel(m):u?this.confirmation.showModal(d,()=>{p?this.showSelectModal(f.module,o,c):this.runBulkAction(o,c)}):p?this.showSelectModal(f.module,o,c):this.runBulkAction(o,c)}showSelectModal(e,t,r){this.selectModalService.showSelectModal(e,o=>{if(o){const{fields:s,formGroup:c,...l}=o;r.modalRecord=l}this.runBulkAction(t,r)})}runBulkAction(e,t){this.asyncAction.run(e,t).subscribe(r=>{this.handleProcessResult(r)})}handleProcessResult(e){e.data&&e.data.reload&&(this.store.recordList.clearSelection(),this.store.load(!1).pipe((0,v.take)(1)).subscribe()),e.data&&e.data.dataUpdated&&this.store.triggerDataUpdate(),this.reloadMetadata(this.store.getModuleName(),e)}reloadMetadata(e,t){const r=[];this.shouldReloadRecentlyViewed(t)&&r.push(this.metadata.typeKeys.recentlyViewed),this.shouldReloadFavorites(t)&&r.push(this.metadata.typeKeys.favorites),r&&r.length&&this.metadata.reloadModuleMetadata(e,r,!1).pipe((0,v.take)(1)).subscribe()}shouldReloadRecentlyViewed(e){return!(!e.data||!e.data.reloadRecentlyViewed)}shouldReloadFavorites(e){return!(!e.data||!e.data.reloadFavorites)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(zn),n.\u0275\u0275inject(ct),n.\u0275\u0275inject(yn),n.\u0275\u0275inject(En),n.\u0275\u0275inject(Kt),n.\u0275\u0275inject(mt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),lD=(()=>{class i{message;confirmation;selectModalService;asyncAction;metadata;constructor(e,t,r,o,s){this.message=e,this.confirmation=t,this.selectModalService=r,this.asyncAction=o,this.metadata=s}create(e){return new cD(e,this.message,this.confirmation,this.selectModalService,this.asyncAction,this.metadata)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(ct),n.\u0275\u0275inject(yn),n.\u0275\u0275inject(En),n.\u0275\u0275inject(Kt),n.\u0275\u0275inject(mt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Cf=(()=>{class i{store;constructor(e){this.store=e}getConfig(){return{savedFilterEdit:!0,displayHeader:!0,module:this.store.getModuleName(),filter$:this.store.openFilter$,savedFilters$:this.store.filterList.records$,searchFields$:this.store.metadata$.pipe((0,v.map)(e=>{if(!e||!e.search)return{};const t=e.search;let r="advanced";return t.layout.advanced||(r="basic"),t.layout[r]})),listFields:this.store.metadata.listView.fields,onClose:()=>{this.store.showFilters=!1},onSearch:()=>{this.store.showFilters=!1},updateFilter:(e,t=!0)=>{const r={};r[e.key]=e,this.store.setFilters(r,t)},resetFilter:e=>{this.store.resetFilters(e)},addSavedFilter:e=>{this.store.addSavedFilter(e)},removeSavedFilter:e=>{this.store.removeSavedFilter(e)},setOpenFilter:e=>{this.store.setOpenFilter(e)}}}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(zn))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),uD=(()=>{class i extends jM{store;actionManager;asyncActionService;message;confirmation;language;selectModalService;metadata;constructor(e,t,r,o,s,c,l,u){super(t,r,o,s,c,l,u),this.store=e,this.actionManager=t,this.asyncActionService=r,this.message=o,this.confirmation=s,this.language=c,this.selectModalService=l,this.metadata=u}getActions(e=null){return this.store.lineActions$.pipe((0,S.combineLatestWith)((0,S.of)("list").pipe((0,v.shareReplay)())),(0,v.map)(([t,r])=>this.parseModeActions(t,r,e)))}getModuleName(e){return this.store.getModuleName()}reload(e,t,r){this.store.recordList.clearSelection(),this.store.recordList.resetPagination()}getMode(){return"list"}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(zn),n.\u0275\u0275inject(Wc),n.\u0275\u0275inject(Kt),n.\u0275\u0275inject(ct),n.\u0275\u0275inject(yn),n.\u0275\u0275inject(Oe),n.\u0275\u0275inject(En),n.\u0275\u0275inject(mt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})();class Mf extends M.ActionHandler{navigateBack(a,e,t,r,o){let s=a.getReturnModule(e),c=a.getReturnAction(e),l=a.getReturnId(e);t!==l&&(s===r&&"record"===c&&l!==t||!s||!c||a.navigateBack(o,r,e))}}let dD=(()=>{class i extends Mf{key="async-process";modes=M.ALL_VIEW_MODES;constructor(){super()}run(e){}shouldDisplay(e){return!0}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),fD=(()=>{class i extends Mf{key="select-columns";modes=["list"];constructor(){super()}run(e){e.store.openColumnChooserDialog()}shouldDisplay(e){return!0}static \u0275fac=function(t){return new(t||i)};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Sf=(()=>{class i extends si{async;selectColumns;constructor(e,t){super(),this.async=e,this.selectColumns=t,t.modes.forEach(r=>this.actions[r][t.key]=t),e.modes.forEach(r=>this.actions[r][e.key]=e)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(dD),n.\u0275\u0275inject(fD))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),pD=(()=>{class i extends pd{store;actionManager;asyncActionService;message;confirmation;language;selectModalService;metadata;constructor(e,t,r,o,s,c,l,u){super(t,r,o,s,c,l,u),this.store=e,this.actionManager=t,this.asyncActionService=r,this.message=o,this.confirmation=s,this.language=c,this.selectModalService=l,this.metadata=u}buildActionData(e,t){return{store:this.store,action:e}}getActionName(e){return`table-action-${e.key}`}buildActionInput(e,t,r,o=null){const s=this.store.recordList.selection,c=[];this.store.metadata.listView.fields.forEach(u=>{c.push(u.name)});const l={action:t,module:r,criteria:null,sort:null,ids:null,fields:c,params:e&&e.params||[]};return s.all&&s.count>this.store.recordList.records.length&&(l.criteria=this.store.recordList.criteria,l.sort=this.store.recordList.sort),s.all&&s.count<=this.store.recordList.records.length&&(l.ids=[],this.store.recordList.records.forEach(u=>{l.ids.push(u.id)})),s.all||(l.ids=Object.keys(s.selected)),l}getActions(e=null){return this.store.tableActions$.pipe((0,S.combineLatestWith)((0,S.of)("list").pipe((0,v.shareReplay)())),(0,v.map)(([t,r])=>this.parseModeActions(t,r,e)))}getModuleName(e){return this.store.getModuleName()}reload(e,t,r){this.store.recordList.clearSelection(),this.store.recordList.resetPagination()}getMode(){return"list"}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(zn),n.\u0275\u0275inject(Sf),n.\u0275\u0275inject(Kt),n.\u0275\u0275inject(ct),n.\u0275\u0275inject(yn),n.\u0275\u0275inject(Oe),n.\u0275\u0275inject(En),n.\u0275\u0275inject(mt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),mD=(()=>{class i{actionManager;asyncActionService;message;confirmation;language;selectModalService;metadata;constructor(e,t,r,o,s,c,l){this.actionManager=e,this.asyncActionService=t,this.message=r,this.confirmation=o,this.language=s,this.selectModalService=c,this.metadata=l}create(e){return new pD(e,this.actionManager,this.asyncActionService,this.message,this.confirmation,this.language,this.selectModalService,this.metadata)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Sf),n.\u0275\u0275inject(Kt),n.\u0275\u0275inject(ct),n.\u0275\u0275inject(yn),n.\u0275\u0275inject(Oe),n.\u0275\u0275inject(En),n.\u0275\u0275inject(mt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),gD=(()=>{class i extends Zi{store;listStore;language;actionManager;asyncActionService;message;confirmation;selectModalService;metadata;collapseButtons=!1;constructor(e,t,r,o,s,c,l,u,d){super(o,s,c,l,r,u,d),this.store=e,this.listStore=t,this.language=r,this.actionManager=o,this.asyncActionService=s,this.message=c,this.confirmation=l,this.selectModalService=u,this.metadata=d}getActions(e){return this.store.meta$.pipe((0,S.combineLatestWith)(this.store.mode$,this.store.stagingRecord$,this.language.vm$),(0,v.map)(([t,r,o,s])=>r&&t?this.parseModeActions(t.actions,r):[]))}buildActionData(e,t){return{store:this.store,listStore:this.listStore,action:e}}getMode(){return this.store.getMode()}getModuleName(e){return this.store.getModuleName()}reload(e,t,r){this.listStore.load(!1).pipe((0,v.take)(1)).subscribe()}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Gd),n.\u0275\u0275inject(zn),n.\u0275\u0275inject(Oe),n.\u0275\u0275inject(bf),n.\u0275\u0275inject(Kt),n.\u0275\u0275inject(ct),n.\u0275\u0275inject(yn),n.\u0275\u0275inject(En),n.\u0275\u0275inject(mt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),hD=(()=>{class i{language;actionManager;asyncActionService;message;confirmation;selectModalService;metadata;constructor(e,t,r,o,s,c,l){this.language=e,this.actionManager=t,this.asyncActionService=r,this.message=o,this.confirmation=s,this.selectModalService=c,this.metadata=l}create(e,t){const r=new gD(e,t,this.language,this.actionManager,this.asyncActionService,this.message,this.confirmation,this.selectModalService,this.metadata),o=t?.recordPanelConfig?.collapseActions??null;return null!==o&&(r.collapseButtons=o),r}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(Oe),n.\u0275\u0275inject(bf),n.\u0275\u0275inject(Kt),n.\u0275\u0275inject(ct),n.\u0275\u0275inject(yn),n.\u0275\u0275inject(En),n.\u0275\u0275inject(mt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Df=(()=>{class i{store;recordPanelStoreFactory;actionAdapterFactory;recordManager;constructor(e,t,r,o){this.store=e,this.recordPanelStoreFactory=t,this.actionAdapterFactory=r,this.recordManager=o}getConfig(){const e=this.createStore();return{module:this.getModule(),title:this.store.recordPanelConfig&&this.store.recordPanelConfig.title||"",store:e,meta:this.store.recordPanelConfig,actions:this.createActionAdapter(e),onClose:()=>{this.store.closeRecordPanel()}}}getModule(){return this.store.recordPanelConfig.module||this.store.getModuleName()}getViewMode(){return this.store.recordPanelConfig.mode||"edit"}createStore(){const e=this.recordPanelStoreFactory.create(),t=this.recordManager.buildEmptyRecord(this.getModule());return e.setMetadata(this.store.recordPanelConfig),e.initRecord(t,this.getViewMode(),!1),e}createActionAdapter(e){return this.actionAdapterFactory.create(e,this.store)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(zn),n.\u0275\u0275inject(tS),n.\u0275\u0275inject(hD),n.\u0275\u0275inject(ci))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),wf=(()=>{class i{store;metadata;metadata$=this.metadata?.listMetadata$??(0,S.of)({sidebarWidgets:[]});config$=this.metadata$.pipe((0,S.combineLatestWith)(this.store?.showSidebarWidgets$??(0,S.of)(!1),this.store?.widgets$??(0,S.of)([])),(0,v.map)(([e,t,r])=>(e.sidebarWidgets&&e.sidebarWidgets.length&&e.sidebarWidgets.forEach(o=>{o&&"data-update"===o.refreshOn?o.reload$=(this.store?.dataSetUpdate$??(0,S.of)(null)).pipe((0,v.map)(()=>!0)):o&&"data-reload"===o.refreshOn&&(o.reload$=(this.store?.records$??(0,S.of)([])).pipe((0,v.map)(()=>!0)))}),{widgets:e.sidebarWidgets||[],show:t,widgetsEnabled:r})));constructor(e,t){this.store=e,this.metadata=t}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(zn),n.\u0275\u0275inject(mt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),xf=(()=>{class i{store;metadata;actionManager;asyncActionService;message;confirmation;language;bulkActionsAdapterFactory;listviewTableActionsAdapterFactory;selectModalService;preferences;systemConfigs;constructor(e,t,r,o,s,c,l,u,d,f,p,m){this.store=e,this.metadata=t,this.actionManager=r,this.asyncActionService=o,this.message=s,this.confirmation=c,this.language=l,this.bulkActionsAdapterFactory=u,this.listviewTableActionsAdapterFactory=d,this.selectModalService=f,this.preferences=p,this.systemConfigs=m}getTable(){return{showHeader:!0,showFooter:!0,module:this.store.getModuleName(),columns:this.store.columns$,lineActions:this.getLineActionsDataSource(),selection$:this.store.selection$,sort$:this.store.sort$,maxColumns$:(0,S.of)(4),loading$:this.store.recordList.loading$,dataSource:this.store.recordList,selection:this.store.recordList,bulkActions:this.getBulkActionsDataSource(this.store),tableActions:this.getTableActions(this.store),pagination:this.store.recordList,paginationType:this.preferences.getUserPreference("listview_pagination_type")??this.systemConfigs.getConfigValue("listview_pagination_type"),toggleRecordSelection:e=>{this.store.recordList.toggleSelection(e)},updateSorting:(e,t)=>{this.store.recordList.updateSorting(e,t),this.store.updateSortLocalStorage()},maxListHeight:this.preferences.getUserPreference("listview_max_height")??this.systemConfigs.getConfigValue("listview_max_height"),loadMore:()=>{const e=this.preferences.getUserPreference("list_max_entries_per_page")??this.systemConfigs.getConfigValue("list_max_entries_per_page"),t=this.store.recordList.getPagination(),o=Number(t.pageSize||0)+Number(e);this.store.recordList.setPageSize(o),this.store.recordList.updatePagination(t.current)},allLoaded:()=>{const e=this.store.recordList.getPagination();return!!e&&(Number(e.pageLast)>=Number(e.total)||Number(e.pageSize)>=Number(e.total))}}}getLineActionsDataSource(){return new uD(this.store,this.actionManager,this.asyncActionService,this.message,this.confirmation,this.language,this.selectModalService,this.metadata)}getBulkActionsDataSource(e){return this.bulkActionsAdapterFactory.create(e)}getTableActions(e){return this.listviewTableActionsAdapterFactory.create(e)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(zn),n.\u0275\u0275inject(mt),n.\u0275\u0275inject(Wc),n.\u0275\u0275inject(Kt),n.\u0275\u0275inject(ct),n.\u0275\u0275inject(yn),n.\u0275\u0275inject(Oe),n.\u0275\u0275inject(lD),n.\u0275\u0275inject(mD),n.\u0275\u0275inject(En),n.\u0275\u0275inject(Vt),n.\u0275\u0275inject(dt))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})(),qc=(()=>{class i{systemConfigStore;screenSize;store;swapSizes=[];subs=[];widgetSwap;widgetSwap$;constructor(e,t,r){this.systemConfigStore=e,this.screenSize=t,this.store=r,this.swapSizes=this.systemConfigStore.getUi("widget_swap_screen_sizes"),this.widgetSwap$=this.screenSize.screenSize$.pipe((0,v.map)(o=>{const s=(0,M.isTrue)(this.swapSizes[o]??!1);return(null===this.widgetSwap&&!0===s||this.widgetSwap!==s&&!0===s)&&(this.store.showSidebarWidgets=!1),this.widgetSwap=s,s}))}destroy(){this.subs.forEach(e=>e.unsubscribe()),this.subs=[]}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275inject(dt),n.\u0275\u0275inject(ai),n.\u0275\u0275inject(zn))};static \u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac})}return i})();const Iz=function(i){return{"col-lg-12":i}};function Az(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"div",3),n.\u0275\u0275element(2,"scrm-table",4),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction1(2,Iz,!e.displayWidgets)),n.\u0275\u0275advance(1),n.\u0275\u0275property("config",e.tableConfig)}}function Tz(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",7),n.\u0275\u0275element(1,"scrm-sidebar-widget",8),n.\u0275\u0275elementEnd()),2&i){const e=a.$implicit,t=n.\u0275\u0275nextContext(3);n.\u0275\u0275advance(1),n.\u0275\u0275property("config",e)("context",t.getViewContext())("context$",t.store.context$)("type",e.type)}}function Nz(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"div",5),n.\u0275\u0275template(2,Tz,2,4,"div",6),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275styleProp("display",e.widgetDisplayType),n.\u0275\u0275classProp("mt-0",e.swapWidgets),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",e.sidebarWidgetConfig.widgets)}}function Lz(i,a){if(1&i&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,Nz,3,5,"ng-container",2),n.\u0275\u0275elementContainerEnd()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!e.swapWidgets||e.swapWidgets&&e.displayWidgets)}}let vD=(()=>{class i{store;adapter;maxColumnCalculator;languageStore;sidebarWidgetAdapter;systemConfigs;sidebarWidgetHandler;screen=kn.Medium;maxColumns=5;tableConfig;displayWidgets=!0;swapWidgets=!1;sidebarWidgetConfig;widgetDisplayType="none";subs=[];constructor(e,t,r,o,s,c,l){this.store=e,this.adapter=t,this.maxColumnCalculator=r,this.languageStore=o,this.sidebarWidgetAdapter=s,this.systemConfigs=c,this.sidebarWidgetHandler=l}ngOnInit(){if(this.tableConfig=this.adapter.getTable(),this.tableConfig.maxColumns$=this.getMaxColumns(),this.store?.metadata?.listView?.maxHeight&&(this.tableConfig.maxListHeight=this.store.metadata.listView.maxHeight),!this.tableConfig?.maxListHeight){const e=this.systemConfigs.getConfigValue("ui");this.tableConfig.maxListHeight=e.listview_max_height}this.tableConfig.paginationType=this?.store?.metadata?.listView?.paginationType??this.tableConfig.paginationType,this.subs.push(this.sidebarWidgetAdapter.config$.subscribe(e=>{this.sidebarWidgetConfig=e,this.displayWidgets=this.store.widgets&&this.store.showSidebarWidgets,this.widgetDisplayType=this.getDisplay(!(!this.sidebarWidgetConfig.show||!this.sidebarWidgetConfig.widgets))})),this.subs.push(this.sidebarWidgetHandler.widgetSwap$.subscribe(e=>{this.swapWidgets=e}))}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe()),this.subs=[]}getMaxColumns(){return this.maxColumnCalculator.getMaxColumns(this.store.widgets$)}getDisplayWidgets(){return this.store.widgets&&this.store.showSidebarWidgets}getDisplay(e){let t="none";return e&&(t="block"),t}getViewContext(){return this.store.getViewContext()}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(zn),n.\u0275\u0275directiveInject(xf),n.\u0275\u0275directiveInject(so),n.\u0275\u0275directiveInject(Oe),n.\u0275\u0275directiveInject(wf),n.\u0275\u0275directiveInject(dt),n.\u0275\u0275directiveInject(qc))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-list-container"]],features:[n.\u0275\u0275ProvidersFeature([xf,so,wf])],decls:4,vars:2,consts:[[1,"list-view-container","container-fluid","pt-2"],[1,"row"],[4,"ngIf"],[1,"col-lg-9",3,"ngClass"],[3,"config"],[1,"col-lg-3","list-widget-container","pl-0"],["class","mb-3",4,"ngFor","ngForOf"],[1,"mb-3"],[3,"config","context","context$","type"]],template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"div",0)(1,"div",1),n.\u0275\u0275template(2,Az,3,4,"ng-container",2),n.\u0275\u0275template(3,Lz,2,1,"ng-container",2),n.\u0275\u0275elementEnd()()),2&t&&(n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",!r.swapWidgets||r.swapWidgets&&!r.displayWidgets),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.sidebarWidgetConfig.widgetsEnabled))},dependencies:[F.NgClass,F.NgForOf,F.NgIf,Vc,Qd],encapsulation:2})}return i})(),_D=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,zc,hr,Ve.AngularSvgIconModule,Xd]})}return i})();function Bz(i,a){if(1&i&&n.\u0275\u0275element(0,"scrm-button-group",15),2&i){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("config$",e.quickFilters.config$)("klass","quick-filter-button")}}function Oz(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",10)(1,"div",11),n.\u0275\u0275element(2,"scrm-label",12),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(3,"div",13),n.\u0275\u0275template(4,Bz,1,2,"scrm-button-group",14),n.\u0275\u0275elementEnd()()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(4),n.\u0275\u0275property("ngIf",e.quickFilters.config$)}}function Rz(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",16)(1,"div",17)(2,"div",18),n.\u0275\u0275element(3,"scrm-list-filter",19),n.\u0275\u0275elementEnd()()()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(3),n.\u0275\u0275property("config",e.filterAdapter.getConfig())}}function jz(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",16)(1,"div",17)(2,"div",18),n.\u0275\u0275element(3,"scrm-record-panel",19),n.\u0275\u0275elementEnd()()()),2&i){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(3),n.\u0275\u0275property("config",e.recordPanelConfig)}}let yD=(()=>{class i{filterAdapter;listStore;moduleNavigation;recordPanelAdapter;quickFilters;actionPanel="";recordPanelConfig;showQuickFilters=!1;enableQuickFilters=!1;subs=[];constructor(e,t,r,o,s){this.filterAdapter=e,this.listStore=t,this.moduleNavigation=r,this.recordPanelAdapter=o,this.quickFilters=s}get moduleTitle(){return this.moduleNavigation.getModuleLabel(this.listStore.vm.appData.module,this.listStore.vm.appData.language.appListStrings)}ngOnInit(){this.listStore.actionPanel$.subscribe(e=>{this.actionPanel=e,this.recordPanelConfig="recordPanel"===this.actionPanel?this.recordPanelAdapter.getConfig():null}),this.subs.push(this.quickFilters.breakdown$.subscribe(e=>{this.showQuickFilters=(0,M.isTrue)(e)})),this.subs.push(this.quickFilters.enabled$.subscribe(e=>{this.enableQuickFilters=(0,M.isTrue)(e??!1)}))}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe()),this.recordPanelConfig=null}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(Cf),n.\u0275\u0275directiveInject(zn),n.\u0275\u0275directiveInject(wn),n.\u0275\u0275directiveInject(Df),n.\u0275\u0275directiveInject(Ya))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-list-header"]],features:[n.\u0275\u0275ProvidersFeature([Cf,Df])],decls:13,vars:4,consts:[[1,"list-view-header"],[1,"row","align-items-start","mr-0"],[1,"col-md-4","d-flex","align-items-center","justify-content-center","justify-content-sm-start"],[1,"list-view-title",3,"title"],[1,"col-md-8"],[1,"row","justify-content-center","justify-content-sm-end","mr-0","ml-md-1"],["class","d-flex align-items-baseline w-100 justify-content-end pr-3",4,"ngIf"],[1,"list-view-hr-container"],[1,"list-view-hr"],["class","container-fluid pt-2 small-font",4,"ngIf"],[1,"d-flex","align-items-baseline","w-100","justify-content-end","pr-3"],[1,"text-nowrap","text-muted","fs-70","pl-1","mr-2"],["labelKey","LBL_QUICK_FILTERS"],[1,"quick-filter-border","pr-xxl-1","mr-xxl-1"],[3,"config$","klass",4,"ngIf"],[3,"config$","klass"],[1,"container-fluid","pt-2","small-font"],[1,"row"],[1,"col"],[3,"config"]],template:function(t,r){1&t&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"div",0)(2,"div",1)(3,"div",2),n.\u0275\u0275element(4,"scrm-module-title",3),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(5,"div",4)(6,"div",5),n.\u0275\u0275element(7,"scrm-settings-menu"),n.\u0275\u0275elementEnd()()(),n.\u0275\u0275template(8,Oz,5,1,"div",6),n.\u0275\u0275elementStart(9,"div",7),n.\u0275\u0275element(10,"hr",8),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(11,Rz,4,1,"div",9),n.\u0275\u0275template(12,jz,4,1,"div",9),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()),2&t&&(n.\u0275\u0275advance(4),n.\u0275\u0275property("title",r.moduleTitle),n.\u0275\u0275advance(4),n.\u0275\u0275property("ngIf",r.showQuickFilters&&r.enableQuickFilters),n.\u0275\u0275advance(3),n.\u0275\u0275property("ngIf","filters"===r.actionPanel),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf","recordPanel"===r.actionPanel&&r.recordPanelConfig))},dependencies:[F.NgIf,fd,FM,Gc,XM,Yr,Ot],encapsulation:2})}return i})(),bD=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,qa,Od,Rd,Ve.AngularSvgIconModule,Kc,eS,dr,Nt]})}return i})();function kz(i,a){1&i&&(n.\u0275\u0275elementStart(0,"div",1),n.\u0275\u0275element(1,"scrm-list-header")(2,"scrm-list-container"),n.\u0275\u0275elementEnd())}let Pz=(()=>{class i{appState;listStore;quickFilters;sidebarWidgetHandler;listSub;vm$=null;constructor(e,t,r,o){this.appState=e,this.listStore=t,this.quickFilters=r,this.sidebarWidgetHandler=o}ngOnInit(){this.listSub=this.listStore.init(this.appState.getModule()).subscribe(),this.vm$=this.listStore.vm$}ngOnDestroy(){this.listSub&&this.listSub.unsubscribe(),this.quickFilters.destroy(),this.sidebarWidgetHandler.destroy(),this.listStore.destroy()}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(Gt),n.\u0275\u0275directiveInject(zn),n.\u0275\u0275directiveInject(Ya),n.\u0275\u0275directiveInject(qc))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-list"]],features:[n.\u0275\u0275ProvidersFeature([zn,Ya,qc])],decls:2,vars:3,consts:[["class","list-view",4,"ngIf"],[1,"list-view"]],template:function(t,r){1&t&&(n.\u0275\u0275template(0,kz,3,0,"div",0),n.\u0275\u0275pipe(1,"async")),2&t&&n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(1,1,r.vm$))},dependencies:[F.NgIf,yD,vD,F.AsyncPipe],encapsulation:2})}return i})(),$z=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,bD,_D,Pn]})}return i})();function Uz(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"option",17),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&i){const e=a.$implicit,t=n.\u0275\u0275nextContext(3);let r;n.\u0275\u0275property("selected",(null!==(r=t.language)&&void 0!==r?r:"en_us")===e)("value",e),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",t.getEnabledLanguages()[e]," ")}}function Vz(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"div",10)(1,"div",5)(2,"label",11),n.\u0275\u0275text(3),n.\u0275\u0275elementEnd()(),n.\u0275\u0275element(4,"div",12),n.\u0275\u0275elementStart(5,"div",5)(6,"div",13)(7,"select",14,15),n.\u0275\u0275listener("change",function(){n.\u0275\u0275restoreView(e);const r=n.\u0275\u0275reference(8),o=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(o.onLanguageSelect(r.value))}),n.\u0275\u0275template(9,Uz,2,3,"option",16),n.\u0275\u0275elementEnd()()()()}if(2&i){const e=n.\u0275\u0275nextContext().ngIf,t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(3),n.\u0275\u0275textInterpolate(e.appStrings.LBL_LANGUAGE),n.\u0275\u0275advance(6),n.\u0275\u0275property("ngForOf",t.getEnabledLanguagesKeys())}}function zz(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",28),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext(2).ngIf;n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",e.appStrings.ERR_MISSING_REQUIRED_FIELDS," ")}}function Wz(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",28),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext(2).ngIf;n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",e.appStrings.ERR_MISSING_REQUIRED_FIELDS," ")}}function Gz(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"div",29)(1,"a",30),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(e);const r=n.\u0275\u0275nextContext(3);return n.\u0275\u0275resetView(r.flipCard())}),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd()()}if(2&i){const e=n.\u0275\u0275nextContext(2).ngIf;n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate1(" ",e.appStrings.LBL_LOGIN_FORGOT_PASSWORD," ")}}function Kz(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"div",18)(1,"div",13),n.\u0275\u0275element(2,"scrm-image",19),n.\u0275\u0275elementStart(3,"input",20,21),n.\u0275\u0275listener("ngModelChange",function(r){n.\u0275\u0275restoreView(e);const o=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(o.uname=r)}),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(5,zz,2,1,"div",22),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(6,"div",13),n.\u0275\u0275element(7,"scrm-image",23),n.\u0275\u0275elementStart(8,"input",24,25),n.\u0275\u0275listener("ngModelChange",function(r){n.\u0275\u0275restoreView(e);const o=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(o.passw=r)}),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(10,Wz,2,1,"div",22),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(11,"button",26),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(e),n.\u0275\u0275nextContext();const r=n.\u0275\u0275reference(2),o=n.\u0275\u0275nextContext();return r.control.markAllAsTouched(),n.\u0275\u0275resetView(r.valid&&o.doLogin())}),n.\u0275\u0275text(12),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(13,Gz,3,1,"div",27),n.\u0275\u0275elementEnd()}if(2&i){const e=n.\u0275\u0275reference(4),t=n.\u0275\u0275reference(9),r=n.\u0275\u0275nextContext().ngIf,o=n.\u0275\u0275nextContext();n.\u0275\u0275property("@fade",void 0),n.\u0275\u0275advance(3),n.\u0275\u0275classProp("is-invalid",e.invalid&&e.touched),n.\u0275\u0275propertyInterpolate("placeholder",r.appStrings.LBL_USER_NAME),n.\u0275\u0275property("ngModel",o.uname),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",e.invalid&&e.touched),n.\u0275\u0275advance(3),n.\u0275\u0275classProp("is-invalid",t.invalid&&t.touched),n.\u0275\u0275propertyInterpolate("placeholder",r.appStrings.LBL_PASSWORD),n.\u0275\u0275property("ngModel",o.passw),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",t.invalid&&t.touched),n.\u0275\u0275advance(1),n.\u0275\u0275property("scrm-button-loading",o.loading),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",r.appStrings.LBL_LOGIN_BUTTON_LABEL," "),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",r.showForgotPassword)}}function Hz(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",28),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext(2).ngIf;n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",e.appStrings.ERR_MISSING_REQUIRED_FIELDS," ")}}function Zz(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",28),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&i){const e=n.\u0275\u0275nextContext(2).ngIf;n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",e.appStrings.ERR_MISSING_REQUIRED_FIELDS," ")}}function qz(i,a){if(1&i){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"div",31)(1,"div",13),n.\u0275\u0275element(2,"scrm-image",19),n.\u0275\u0275elementStart(3,"input",20,21),n.\u0275\u0275listener("ngModelChange",function(r){n.\u0275\u0275restoreView(e);const o=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(o.uname=r)}),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(5,Hz,2,1,"div",22),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(6,"div",13),n.\u0275\u0275element(7,"scrm-image",32),n.\u0275\u0275elementStart(8,"input",33,34),n.\u0275\u0275listener("ngModelChange",function(r){n.\u0275\u0275restoreView(e);const o=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(o.email=r)}),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(10,Zz,2,1,"div",22),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(11,"button",35),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(e),n.\u0275\u0275nextContext();const r=n.\u0275\u0275reference(2),o=n.\u0275\u0275nextContext();return r.control.markAllAsTouched(),n.\u0275\u0275resetView(r.valid&&o.recoverPassword())}),n.\u0275\u0275text(12),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(13,"div")(14,"a",36),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(e);const r=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(r.flipCard())}),n.\u0275\u0275text(15),n.\u0275\u0275elementEnd()()()}if(2&i){const e=n.\u0275\u0275reference(4),t=n.\u0275\u0275reference(9),r=n.\u0275\u0275nextContext().ngIf,o=n.\u0275\u0275nextContext();n.\u0275\u0275property("@fade",void 0),n.\u0275\u0275advance(3),n.\u0275\u0275classProp("is-invalid",e.invalid&&e.touched),n.\u0275\u0275propertyInterpolate("placeholder",r.appStrings.LBL_USER_NAME),n.\u0275\u0275property("ngModel",o.uname),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",e.invalid&&e.touched),n.\u0275\u0275advance(3),n.\u0275\u0275classProp("is-invalid",t.invalid&&t.touched),n.\u0275\u0275propertyInterpolate("placeholder",r.appStrings.LBL_EMAIL),n.\u0275\u0275property("ngModel",o.email),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",t.invalid&&t.touched),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate1(" ",r.appStrings.LBL_GENERATE_PASSWORD_BUTTON_TITLE," "),n.\u0275\u0275advance(3),n.\u0275\u0275textInterpolate1(" ",r.appStrings.LBL_BACK," ")}}function Jz(i,a){if(1&i&&(n.\u0275\u0275elementStart(0,"div",1)(1,"form",2,3)(3,"div",4)(4,"div",5),n.\u0275\u0275element(5,"scrm-logo-ui"),n.\u0275\u0275elementEnd()(),n.\u0275\u0275template(6,Vz,10,2,"div",6),n.\u0275\u0275elementStart(7,"div",7),n.\u0275\u0275template(8,Kz,14,14,"div",8),n.\u0275\u0275template(9,qz,16,13,"div",9),n.\u0275\u0275elementEnd()()()),2&i){const e=a.ngIf,t=n.\u0275\u0275nextContext();n.\u0275\u0275advance(6),n.\u0275\u0275property("ngIf",e.showLanguages),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf","front"===t.cardState),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf","back"===t.cardState)}}let CD=(()=>{class i{router;auth;message;configs;languageStore;recoverPasswordService;appState;hidden=!0;loading=!1;error="";uname="";passw="";email="";cardState="front";systemConfigs$;appStrings$;language=null;vm$;constructor(e,t,r,o,s,c,l){this.router=e,this.auth=t,this.message=r,this.configs=o,this.languageStore=s,this.recoverPasswordService=c,this.appState=l,this.loading=!1,this.hidden=!1,this.language=null,this.systemConfigs$=o?.configs$??(0,S.of)({}),this.appStrings$=s?.appStrings$??(0,S.of)({}),this.vm$=this.systemConfigs$.pipe((0,S.combineLatestWith)(this.appStrings$),(0,v.map)(([u,d])=>{let f=!1,p=!1;return u.languages&&u.languages.items&&(f=Object.keys(u.languages.items).length>1),u.passwordsetting&&u.passwordsetting.items&&(p=[!0,"1","true"].includes(u.passwordsetting.items.forgotpasswordON)),{systemConfigs:u,appStrings:d,showLanguages:f,showForgotPassword:p}}))}ngOnInit(){this.setCurrentLanguage()}onLanguageSelect(e){e&&e!==this.language&&this.changeLanguage(e)}changeLanguage(e){this.language=e;let t=!1;this?.appState?.updateLoading&&(this.appState.updateLoading("change-language",!0),t=!0),this.languageStore.changeLanguage(e,!0).pipe((0,v.tap)(()=>{t&&this.appState.updateLoading("change-language",!1)})).subscribe()}getEnabledLanguages(){return this.languageStore.getEnabledLanguages()}getEnabledLanguagesKeys(){return Object.keys(this.languageStore.getEnabledLanguages()??{})??[]}flipCard(){this.cardState="front"===this.cardState?"back":"front"}doLogin(){this.loading=!0,this.auth.doLogin(this.uname,this.passw,this.onLoginSuccess.bind(this),this.onLoginError.bind(this))}recoverPassword(){this.recoverPasswordService.run(this.uname,this.email).subscribe(e=>{this.message.log("Recover Password Status: "+e.status);let t="addSuccessMessageByKey";"error"===e.status&&(t="addDangerMessageByKey"),e.messages&&e.messages.forEach(r=>{this.message[t](r)})},()=>{this.message.log("Recover Password failed"),this.message.addDangerMessageByKey("ERR_AJAX_LOAD_FAILURE")})}onLoginSuccess(e){this.loading=!1,this.message.log("Login success"),this.message.removeMessages(),this.languageStore.setSessionLanguage().pipe((0,v.catchError)(()=>(0,S.of)({}))).subscribe(()=>{if(e&&e.redirect)return void this.router.navigate([e.redirect]).then();if(this.appState.getPreLoginUrl())return void this.router.navigateByUrl(this.appState.getPreLoginUrl()).then(()=>{this.appState.setPreLoginUrl("")});const t=this.configs.getHomePage();this.router.navigate(["/"+t]).then()})}onLoginError(e){this.loading=!1,this.message.log("Login failed");let o=this.languageStore.getFieldLabel("LOGIN_INCORRECT");const s=e?.error?.error??"";"string"==typeof s&&s.includes("Too many failed login attempts, please try again in")&&(o=this.getTooManyFailedMessage("Too many failed login attempts, please try again later.")),o||(o="Login credentials incorrect, please try again."),this.message.addDangerMessage(o)}getTooManyFailedMessage(e){let t=this.languageStore.getFieldLabel("LOGIN_TOO_MANY_FAILED");return t||(t=e),t}setCurrentLanguage(){let e=this.languageStore.getSelectedLanguage()??"";const t=this.languageStore.getActiveLanguage();if(e||(e=t),this.languageStore.isLanguageEnabled(e)||(e=""),this.language&&e===this.language)return;const r=this.configs.getConfigValue("default_language")??"en_us";e||(e=r),this.languageStore.isLanguageEnabled(e)||(e=this.languageStore.getFirstLanguage()),this.language=e,this.changeLanguage(e)}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(Ft.Router),n.\u0275\u0275directiveInject(Hn),n.\u0275\u0275directiveInject(ct),n.\u0275\u0275directiveInject(dt),n.\u0275\u0275directiveInject(Oe),n.\u0275\u0275directiveInject($S),n.\u0275\u0275directiveInject(Gt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-login-ui"]],decls:2,vars:3,consts:[["class","login-view full-height-view d-flex align-items-center",4,"ngIf"],[1,"login-view","full-height-view","d-flex","align-items-center"],["name","login",1,"login-form"],["loginForm","ngForm"],[1,"form-row","form-group"],[1,"col"],["class","form-row",4,"ngIf"],[1,"form-row","fade-card"],["class","fade-card-front col",4,"ngIf"],["class","fade-card-back col",4,"ngIf"],[1,"form-row"],["for","languages",1,""],[1,"w-100"],[1,"inner-addon","left-addon"],["id","languages",3,"change"],["languageSelect",""],[3,"selected","value",4,"ngFor","ngForOf"],[3,"selected","value"],[1,"fade-card-front","col"],["image","login_user"],["type","text","name","username","aria-label","Username","required","",3,"ngModel","placeholder","ngModelChange"],["username","ngModel"],["class","invalid-feedback",4,"ngIf"],["image","login_password"],["type","password","name","password","aria-label","Password","required","",3,"ngModel","placeholder","ngModelChange"],["password","ngModel"],["id","login-button",1,"login-button",3,"scrm-button-loading","click"],["class","forgotten-password",4,"ngIf"],[1,"invalid-feedback"],[1,"forgotten-password"],[1,"forgotten-password-link",3,"click"],[1,"fade-card-back","col"],["image","email"],["type","email","name","email","aria-label","Email","required","",3,"ngModel","placeholder","ngModelChange"],["mail","ngModel"],["scrm-button-loading","",1,"submit-button","login-button",3,"click"],[1,"back-link","forgotten-password-link",3,"click"]],template:function(t,r){1&t&&(n.\u0275\u0275template(0,Jz,10,3,"div",0),n.\u0275\u0275pipe(1,"async")),2&t&&n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(1,1,r.vm$))},dependencies:[Ce.\u0275NgNoValidate,Ce.NgSelectOption,Ce.\u0275NgSelectMultipleOption,Ce.DefaultValueAccessor,Ce.NgControlStatus,Ce.NgControlStatusGroup,Ce.RequiredValidator,Ce.NgModel,Ce.NgForm,jc,F.NgForOf,F.NgIf,mn,RS,F.AsyncPipe],encapsulation:2,data:{animation:[(0,jt.trigger)("fade",[(0,jt.transition)(":enter",(0,jt.useAnimation)(Js.fadeIn,{params:{timing:.5,delay:0}}))])]}})}return i})();const MD=[{path:"",component:CD}];let Qz=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[Ce.FormsModule,kc,Ft.RouterModule.forChild(MD),F.CommonModule,Ve.AngularSvgIconModule,fn,jS]})}return i})(),Xz=(()=>{class i{configs;constructor(e){this.configs=e}getLoginURL(){return"./"}static \u0275fac=function(t){return new(t||i)(n.\u0275\u0275directiveInject(dt))};static \u0275cmp=n.\u0275\u0275defineComponent({type:i,selectors:[["scrm-logout"]],decls:11,vars:1,consts:[[1,"logged-out-view","full-height-view","d-flex","flex-column","align-items-center","justify-content-center"],[1,"logo-row","full-height-view-row"],[1,"mt-3","mb-1","page-title","full-height-view-row"],["labelKey","LBL_LOGGED_OUT_MESSAGE"],[1,"page-subtitle","full-height-view-row"],["labelKey","LBL_LOGIN_AGAIN"],[1,"text-lowercase",3,"href"],["labelKey","LBL_CLICK_HERE"]],template:function(t,r){1&t&&(n.\u0275\u0275elementStart(0,"div",0)(1,"div",1),n.\u0275\u0275element(2,"scrm-logo-ui"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(3,"div",2)(4,"h2"),n.\u0275\u0275element(5,"scrm-label",3),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(6,"div",4)(7,"h5"),n.\u0275\u0275element(8,"scrm-label",5),n.\u0275\u0275elementStart(9,"a",6),n.\u0275\u0275element(10,"scrm-label",7),n.\u0275\u0275elementEnd()()()()),2&t&&(n.\u0275\u0275advance(9),n.\u0275\u0275property("href",r.getLoginURL(),n.\u0275\u0275sanitizeUrl))},dependencies:[Ot,jc],encapsulation:2})}return i})(),Yz=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=n.\u0275\u0275defineNgModule({type:i});static \u0275inj=n.\u0275\u0275defineInjector({imports:[F.CommonModule,Nt,kc]})}return i})()},9388:(Me,re,L)=>{L.d(re,{Is:()=>le,vT:()=>V});var n=L(2611),M=L(4187);const S=new n.InjectionToken("cdk-dir-doc",{providedIn:"root",factory:function v(){return(0,n.inject)(M.DOCUMENT)}}),z=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let le=(()=>{class U{constructor(k){this.value="ltr",this.change=new n.EventEmitter,k&&(this.value=function q(U){const T=U?.toLowerCase()||"";return"auto"===T&&typeof navigator<"u"&&navigator?.language?z.test(navigator.language)?"rtl":"ltr":"rtl"===T?"rtl":"ltr"}((k.body?k.body.dir:null)||(k.documentElement?k.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}static#e=this.\u0275fac=function($){return new($||U)(n.\u0275\u0275inject(S,8))};static#t=this.\u0275prov=n.\u0275\u0275defineInjectable({token:U,factory:U.\u0275fac,providedIn:"root"})}return U})(),V=(()=>{class U{static#e=this.\u0275fac=function($){return new($||U)};static#t=this.\u0275mod=n.\u0275\u0275defineNgModule({type:U});static#n=this.\u0275inj=n.\u0275\u0275defineInjector({})}return U})()},2495:(Me,re,L)=>{L.d(re,{Eq:()=>z,Ig:()=>M,fI:()=>le,su:()=>S});var n=L(2611);function M(V){return null!=V&&"false"!=`${V}`}function S(V,U=0){return function v(V){return!isNaN(parseFloat(V))&&!isNaN(Number(V))}(V)?Number(V):U}function z(V){return Array.isArray(V)?V:[V]}function le(V){return V instanceof n.ElementRef?V.nativeElement:V}},2831:(Me,re,L)=>{L.d(re,{Mq:()=>W,_i:()=>X,i$:()=>T,kV:()=>F,sA:()=>de,t4:()=>v});var n=L(2611),M=L(4187);let S;try{S=typeof Intl<"u"&&Intl.v8BreakIterator}catch{S=!1}let V,k,$,ne,v=(()=>{class Le{constructor(Be){this._platformId=Be,this.isBrowser=this._platformId?(0,M.isPlatformBrowser)(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!S)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static#e=this.\u0275fac=function(Ae){return new(Ae||Le)(n.\u0275\u0275inject(n.PLATFORM_ID))};static#t=this.\u0275prov=n.\u0275\u0275defineInjectable({token:Le,factory:Le.\u0275fac,providedIn:"root"})}return Le})();function T(Le){return function U(){if(null==V&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>V=!0}))}finally{V=V||!1}return V}()?Le:!!Le.capture}function W(){if(null==$){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return $=!1,$;if("scrollBehavior"in document.documentElement.style)$=!0;else{const Le=Element.prototype.scrollTo;$=!!Le&&!/\{\s*\[native code\]\s*\}/.test(Le.toString())}}return $}function X(){if("object"!=typeof document||!document)return 0;if(null==k){const Le=document.createElement("div"),at=Le.style;Le.dir="rtl",at.width="1px",at.overflow="auto",at.visibility="hidden",at.pointerEvents="none",at.position="absolute";const Be=document.createElement("div"),Ae=Be.style;Ae.width="2px",Ae.height="1px",Le.appendChild(Be),document.body.appendChild(Le),k=0,0===Le.scrollLeft&&(Le.scrollLeft=1,k=0===Le.scrollLeft?1:2),Le.remove()}return k}function F(Le){if(function fe(){if(null==ne){const Le=typeof document<"u"?document.head:null;ne=!(!Le||!Le.createShadowRoot&&!Le.attachShadow)}return ne}()){const at=Le.getRootNode?Le.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&at instanceof ShadowRoot)return at}return null}function de(Le){return Le.composedPath?Le.composedPath()[0]:Le.target}},6672:(Me,re,L)=>{L.d(re,{Cl:()=>Zt,N7:()=>at,ZD:()=>qe,mF:()=>X,rL:()=>F,xd:()=>$});var n=L(2495),M=L(2611),S=L(8303),v=L(8103),z=L(2831),q=L(4187),le=L(9388);const se=["contentWrapper"],V=["*"],U=new M.InjectionToken("VIRTUAL_SCROLL_STRATEGY");class T{constructor(Et,ie,ye){this._scrolledIndexChange=new S.Subject,this.scrolledIndexChange=this._scrolledIndexChange.pipe((0,v.distinctUntilChanged)()),this._viewport=null,this._itemSize=Et,this._minBufferPx=ie,this._maxBufferPx=ye}attach(Et){this._viewport=Et,this._updateTotalContentSize(),this._updateRenderedRange()}detach(){this._scrolledIndexChange.complete(),this._viewport=null}updateItemAndBufferSize(Et,ie,ye){this._itemSize=Et,this._minBufferPx=ie,this._maxBufferPx=ye,this._updateTotalContentSize(),this._updateRenderedRange()}onContentScrolled(){this._updateRenderedRange()}onDataLengthChanged(){this._updateTotalContentSize(),this._updateRenderedRange()}onContentRendered(){}onRenderedOffsetChanged(){}scrollToIndex(Et,ie){this._viewport&&this._viewport.scrollToOffset(Et*this._itemSize,ie)}_updateTotalContentSize(){this._viewport&&this._viewport.setTotalContentSize(this._viewport.getDataLength()*this._itemSize)}_updateRenderedRange(){if(!this._viewport)return;const Et=this._viewport.getRenderedRange(),ie={start:Et.start,end:Et.end},ye=this._viewport.getViewportSize(),ze=this._viewport.getDataLength();let Je=this._viewport.measureScrollOffset(),Mt=this._itemSize>0?Je/this._itemSize:0;if(ie.end>ze){const kt=Math.ceil(ye/this._itemSize),It=Math.max(0,Math.min(Mt,ze-kt));Mt!=It&&(Mt=It,Je=It*this._itemSize,ie.start=Math.floor(Mt)),ie.end=Math.max(0,Math.min(ze,ie.start+kt))}const Bt=Je-ie.start*this._itemSize;if(Bt<this._minBufferPx&&0!=ie.start){const kt=Math.ceil((this._maxBufferPx-Bt)/this._itemSize);ie.start=Math.max(0,ie.start-kt),ie.end=Math.min(ze,Math.ceil(Mt+(ye+this._minBufferPx)/this._itemSize))}else{const kt=ie.end*this._itemSize-(Je+ye);if(kt<this._minBufferPx&&ie.end!=ze){const It=Math.ceil((this._maxBufferPx-kt)/this._itemSize);It>0&&(ie.end=Math.min(ze,ie.end+It),ie.start=Math.max(0,Math.floor(Mt-this._minBufferPx/this._itemSize)))}}this._viewport.setRenderedRange(ie),this._viewport.setRenderedContentOffset(this._itemSize*ie.start),this._scrolledIndexChange.next(Math.floor(Mt))}}function k(Ke){return Ke._scrollStrategy}let $=(()=>{class Ke{constructor(){this._itemSize=20,this._minBufferPx=100,this._maxBufferPx=200,this._scrollStrategy=new T(this.itemSize,this.minBufferPx,this.maxBufferPx)}get itemSize(){return this._itemSize}set itemSize(ie){this._itemSize=(0,n.su)(ie)}get minBufferPx(){return this._minBufferPx}set minBufferPx(ie){this._minBufferPx=(0,n.su)(ie)}get maxBufferPx(){return this._maxBufferPx}set maxBufferPx(ie){this._maxBufferPx=(0,n.su)(ie)}ngOnChanges(){this._scrollStrategy.updateItemAndBufferSize(this.itemSize,this.minBufferPx,this.maxBufferPx)}static#e=this.\u0275fac=function(ye){return new(ye||Ke)};static#t=this.\u0275dir=M.\u0275\u0275defineDirective({type:Ke,selectors:[["cdk-virtual-scroll-viewport","itemSize",""]],inputs:{itemSize:"itemSize",minBufferPx:"minBufferPx",maxBufferPx:"maxBufferPx"},standalone:!0,features:[M.\u0275\u0275ProvidersFeature([{provide:U,useFactory:k,deps:[(0,M.forwardRef)(()=>Ke)]}]),M.\u0275\u0275NgOnChangesFeature]})}return Ke})(),X=(()=>{class Ke{constructor(ie,ye,ze){this._ngZone=ie,this._platform=ye,this._scrolled=new S.Subject,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=ze}register(ie){this.scrollContainers.has(ie)||this.scrollContainers.set(ie,ie.elementScrolled().subscribe(()=>this._scrolled.next(ie)))}deregister(ie){const ye=this.scrollContainers.get(ie);ye&&(ye.unsubscribe(),this.scrollContainers.delete(ie))}scrolled(ie=20){return this._platform.isBrowser?new S.Observable(ye=>{this._globalSubscription||this._addGlobalListener();const ze=ie>0?this._scrolled.pipe((0,v.auditTime)(ie)).subscribe(ye):this._scrolled.subscribe(ye);return this._scrolledCount++,()=>{ze.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):(0,S.of)()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((ie,ye)=>this.deregister(ye)),this._scrolled.complete()}ancestorScrolled(ie,ye){const ze=this.getAncestorScrollContainers(ie);return this.scrolled(ye).pipe((0,v.filter)(Je=>!Je||ze.indexOf(Je)>-1))}getAncestorScrollContainers(ie){const ye=[];return this.scrollContainers.forEach((ze,Je)=>{this._scrollableContainsElement(Je,ie)&&ye.push(Je)}),ye}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(ie,ye){let ze=(0,n.fI)(ye),Je=ie.getElementRef().nativeElement;do{if(ze==Je)return!0}while(ze=ze.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{const ie=this._getWindow();return(0,S.fromEvent)(ie.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}static#e=this.\u0275fac=function(ye){return new(ye||Ke)(M.\u0275\u0275inject(M.NgZone),M.\u0275\u0275inject(z.t4),M.\u0275\u0275inject(q.DOCUMENT,8))};static#t=this.\u0275prov=M.\u0275\u0275defineInjectable({token:Ke,factory:Ke.\u0275fac,providedIn:"root"})}return Ke})(),ne=(()=>{class Ke{constructor(ie,ye,ze,Je){this.elementRef=ie,this.scrollDispatcher=ye,this.ngZone=ze,this.dir=Je,this._destroyed=new S.Subject,this._elementScrolled=new S.Observable(Mt=>this.ngZone.runOutsideAngular(()=>(0,S.fromEvent)(this.elementRef.nativeElement,"scroll").pipe((0,v.takeUntil)(this._destroyed)).subscribe(Mt)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(ie){const ye=this.elementRef.nativeElement,ze=this.dir&&"rtl"==this.dir.value;null==ie.left&&(ie.left=ze?ie.end:ie.start),null==ie.right&&(ie.right=ze?ie.start:ie.end),null!=ie.bottom&&(ie.top=ye.scrollHeight-ye.clientHeight-ie.bottom),ze&&0!=(0,z._i)()?(null!=ie.left&&(ie.right=ye.scrollWidth-ye.clientWidth-ie.left),2==(0,z._i)()?ie.left=ie.right:1==(0,z._i)()&&(ie.left=ie.right?-ie.right:ie.right)):null!=ie.right&&(ie.left=ye.scrollWidth-ye.clientWidth-ie.right),this._applyScrollToOptions(ie)}_applyScrollToOptions(ie){const ye=this.elementRef.nativeElement;(0,z.Mq)()?ye.scrollTo(ie):(null!=ie.top&&(ye.scrollTop=ie.top),null!=ie.left&&(ye.scrollLeft=ie.left))}measureScrollOffset(ie){const ye="left",Je=this.elementRef.nativeElement;if("top"==ie)return Je.scrollTop;if("bottom"==ie)return Je.scrollHeight-Je.clientHeight-Je.scrollTop;const Mt=this.dir&&"rtl"==this.dir.value;return"start"==ie?ie=Mt?"right":ye:"end"==ie&&(ie=Mt?ye:"right"),Mt&&2==(0,z._i)()?ie==ye?Je.scrollWidth-Je.clientWidth-Je.scrollLeft:Je.scrollLeft:Mt&&1==(0,z._i)()?ie==ye?Je.scrollLeft+Je.scrollWidth-Je.clientWidth:-Je.scrollLeft:ie==ye?Je.scrollLeft:Je.scrollWidth-Je.clientWidth-Je.scrollLeft}static#e=this.\u0275fac=function(ye){return new(ye||Ke)(M.\u0275\u0275directiveInject(M.ElementRef),M.\u0275\u0275directiveInject(X),M.\u0275\u0275directiveInject(M.NgZone),M.\u0275\u0275directiveInject(le.Is,8))};static#t=this.\u0275dir=M.\u0275\u0275defineDirective({type:Ke,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]],standalone:!0})}return Ke})(),F=(()=>{class Ke{constructor(ie,ye,ze){this._platform=ie,this._change=new S.Subject,this._changeListener=Je=>{this._change.next(Je)},this._document=ze,ye.runOutsideAngular(()=>{if(ie.isBrowser){const Je=this._getWindow();Je.addEventListener("resize",this._changeListener),Je.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const ie=this._getWindow();ie.removeEventListener("resize",this._changeListener),ie.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const ie={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),ie}getViewportRect(){const ie=this.getViewportScrollPosition(),{width:ye,height:ze}=this.getViewportSize();return{top:ie.top,left:ie.left,bottom:ie.top+ze,right:ie.left+ye,height:ze,width:ye}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const ie=this._document,ye=this._getWindow(),ze=ie.documentElement,Je=ze.getBoundingClientRect();return{top:-Je.top||ie.body.scrollTop||ye.scrollY||ze.scrollTop||0,left:-Je.left||ie.body.scrollLeft||ye.scrollX||ze.scrollLeft||0}}change(ie=20){return ie>0?this._change.pipe((0,v.auditTime)(ie)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const ie=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:ie.innerWidth,height:ie.innerHeight}:{width:0,height:0}}static#e=this.\u0275fac=function(ye){return new(ye||Ke)(M.\u0275\u0275inject(z.t4),M.\u0275\u0275inject(M.NgZone),M.\u0275\u0275inject(q.DOCUMENT,8))};static#t=this.\u0275prov=M.\u0275\u0275defineInjectable({token:Ke,factory:Ke.\u0275fac,providedIn:"root"})}return Ke})();const Ve=new M.InjectionToken("VIRTUAL_SCROLLABLE");let de=(()=>{class Ke extends ne{constructor(ie,ye,ze,Je){super(ie,ye,ze,Je)}measureViewportSize(ie){const ye=this.elementRef.nativeElement;return"horizontal"===ie?ye.clientWidth:ye.clientHeight}static#e=this.\u0275fac=function(ye){return new(ye||Ke)(M.\u0275\u0275directiveInject(M.ElementRef),M.\u0275\u0275directiveInject(X),M.\u0275\u0275directiveInject(M.NgZone),M.\u0275\u0275directiveInject(le.Is,8))};static#t=this.\u0275dir=M.\u0275\u0275defineDirective({type:Ke,features:[M.\u0275\u0275InheritDefinitionFeature]})}return Ke})();const Le=typeof requestAnimationFrame<"u"?S.animationFrameScheduler:S.asapScheduler;let at=(()=>{class Ke extends de{get orientation(){return this._orientation}set orientation(ie){this._orientation!==ie&&(this._orientation=ie,this._calculateSpacerSize())}get appendOnly(){return this._appendOnly}set appendOnly(ie){this._appendOnly=(0,n.Ig)(ie)}constructor(ie,ye,ze,Je,Mt,Bt,kt,It){super(ie,Bt,ze,Mt),this.elementRef=ie,this._changeDetectorRef=ye,this._scrollStrategy=Je,this.scrollable=It,this._platform=(0,M.inject)(z.t4),this._detachedSubject=new S.Subject,this._renderedRangeSubject=new S.Subject,this._orientation="vertical",this._appendOnly=!1,this.scrolledIndexChange=new S.Observable(lt=>this._scrollStrategy.scrolledIndexChange.subscribe(vt=>Promise.resolve().then(()=>this.ngZone.run(()=>lt.next(vt))))),this.renderedRangeStream=this._renderedRangeSubject,this._totalContentSize=0,this._totalContentWidth="",this._totalContentHeight="",this._renderedRange={start:0,end:0},this._dataLength=0,this._viewportSize=0,this._renderedContentOffset=0,this._renderedContentOffsetNeedsRewrite=!1,this._isChangeDetectionPending=!1,this._runAfterChangeDetection=[],this._viewportChanges=S.Subscription.EMPTY,this._viewportChanges=kt.change().subscribe(()=>{this.checkViewportSize()}),this.scrollable||(this.elementRef.nativeElement.classList.add("cdk-virtual-scrollable"),this.scrollable=this)}ngOnInit(){this._platform.isBrowser&&(this.scrollable===this&&super.ngOnInit(),this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._measureViewportSize(),this._scrollStrategy.attach(this),this.scrollable.elementScrolled().pipe((0,v.startWith)(null),(0,v.auditTime)(0,Le),(0,v.takeUntil)(this._destroyed)).subscribe(()=>this._scrollStrategy.onContentScrolled()),this._markChangeDetectionNeeded()})))}ngOnDestroy(){this.detach(),this._scrollStrategy.detach(),this._renderedRangeSubject.complete(),this._detachedSubject.complete(),this._viewportChanges.unsubscribe(),super.ngOnDestroy()}attach(ie){this.ngZone.runOutsideAngular(()=>{this._forOf=ie,this._forOf.dataStream.pipe((0,v.takeUntil)(this._detachedSubject)).subscribe(ye=>{const ze=ye.length;ze!==this._dataLength&&(this._dataLength=ze,this._scrollStrategy.onDataLengthChanged()),this._doChangeDetection()})})}detach(){this._forOf=null,this._detachedSubject.next()}getDataLength(){return this._dataLength}getViewportSize(){return this._viewportSize}getRenderedRange(){return this._renderedRange}measureBoundingClientRectWithScrollOffset(ie){return this.getElementRef().nativeElement.getBoundingClientRect()[ie]}setTotalContentSize(ie){this._totalContentSize!==ie&&(this._totalContentSize=ie,this._calculateSpacerSize(),this._markChangeDetectionNeeded())}setRenderedRange(ie){(function Ze(Ke,Et){return Ke.start==Et.start&&Ke.end==Et.end})(this._renderedRange,ie)||(this.appendOnly&&(ie={start:0,end:Math.max(this._renderedRange.end,ie.end)}),this._renderedRangeSubject.next(this._renderedRange=ie),this._markChangeDetectionNeeded(()=>this._scrollStrategy.onContentRendered()))}getOffsetToRenderedContentStart(){return this._renderedContentOffsetNeedsRewrite?null:this._renderedContentOffset}setRenderedContentOffset(ie,ye="to-start"){ie=this.appendOnly&&"to-start"===ye?0:ie;const Je="horizontal"==this.orientation,Mt=Je?"X":"Y";let kt=`translate${Mt}(${Number((Je&&this.dir&&"rtl"==this.dir.value?-1:1)*ie)}px)`;this._renderedContentOffset=ie,"to-end"===ye&&(kt+=` translate${Mt}(-100%)`,this._renderedContentOffsetNeedsRewrite=!0),this._renderedContentTransform!=kt&&(this._renderedContentTransform=kt,this._markChangeDetectionNeeded(()=>{this._renderedContentOffsetNeedsRewrite?(this._renderedContentOffset-=this.measureRenderedContentSize(),this._renderedContentOffsetNeedsRewrite=!1,this.setRenderedContentOffset(this._renderedContentOffset)):this._scrollStrategy.onRenderedOffsetChanged()}))}scrollToOffset(ie,ye="auto"){const ze={behavior:ye};"horizontal"===this.orientation?ze.start=ie:ze.top=ie,this.scrollable.scrollTo(ze)}scrollToIndex(ie,ye="auto"){this._scrollStrategy.scrollToIndex(ie,ye)}measureScrollOffset(ie){let ye;return ye=this.scrollable==this?ze=>super.measureScrollOffset(ze):ze=>this.scrollable.measureScrollOffset(ze),Math.max(0,ye(ie??("horizontal"===this.orientation?"start":"top"))-this.measureViewportOffset())}measureViewportOffset(ie){let ye;const Mt="rtl"==this.dir?.value;ye="start"==ie?Mt?"right":"left":"end"==ie?Mt?"left":"right":ie||("horizontal"===this.orientation?"left":"top");const Bt=this.scrollable.measureBoundingClientRectWithScrollOffset(ye);return this.elementRef.nativeElement.getBoundingClientRect()[ye]-Bt}measureRenderedContentSize(){const ie=this._contentWrapper.nativeElement;return"horizontal"===this.orientation?ie.offsetWidth:ie.offsetHeight}measureRangeSize(ie){return this._forOf?this._forOf.measureRangeSize(ie,this.orientation):0}checkViewportSize(){this._measureViewportSize(),this._scrollStrategy.onDataLengthChanged()}_measureViewportSize(){this._viewportSize=this.scrollable.measureViewportSize(this.orientation)}_markChangeDetectionNeeded(ie){ie&&this._runAfterChangeDetection.push(ie),this._isChangeDetectionPending||(this._isChangeDetectionPending=!0,this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._doChangeDetection()})))}_doChangeDetection(){this._isChangeDetectionPending=!1,this._contentWrapper.nativeElement.style.transform=this._renderedContentTransform,this.ngZone.run(()=>this._changeDetectorRef.markForCheck());const ie=this._runAfterChangeDetection;this._runAfterChangeDetection=[];for(const ye of ie)ye()}_calculateSpacerSize(){this._totalContentHeight="horizontal"===this.orientation?"":`${this._totalContentSize}px`,this._totalContentWidth="horizontal"===this.orientation?`${this._totalContentSize}px`:""}static#e=this.\u0275fac=function(ye){return new(ye||Ke)(M.\u0275\u0275directiveInject(M.ElementRef),M.\u0275\u0275directiveInject(M.ChangeDetectorRef),M.\u0275\u0275directiveInject(M.NgZone),M.\u0275\u0275directiveInject(U,8),M.\u0275\u0275directiveInject(le.Is,8),M.\u0275\u0275directiveInject(X),M.\u0275\u0275directiveInject(F),M.\u0275\u0275directiveInject(Ve,8))};static#t=this.\u0275cmp=M.\u0275\u0275defineComponent({type:Ke,selectors:[["cdk-virtual-scroll-viewport"]],viewQuery:function(ye,ze){if(1&ye&&M.\u0275\u0275viewQuery(se,7),2&ye){let Je;M.\u0275\u0275queryRefresh(Je=M.\u0275\u0275loadQuery())&&(ze._contentWrapper=Je.first)}},hostAttrs:[1,"cdk-virtual-scroll-viewport"],hostVars:4,hostBindings:function(ye,ze){2&ye&&M.\u0275\u0275classProp("cdk-virtual-scroll-orientation-horizontal","horizontal"===ze.orientation)("cdk-virtual-scroll-orientation-vertical","horizontal"!==ze.orientation)},inputs:{orientation:"orientation",appendOnly:"appendOnly"},outputs:{scrolledIndexChange:"scrolledIndexChange"},standalone:!0,features:[M.\u0275\u0275ProvidersFeature([{provide:ne,useFactory:(ie,ye)=>ie||ye,deps:[[new M.Optional,new M.Inject(Ve)],Ke]}]),M.\u0275\u0275InheritDefinitionFeature,M.\u0275\u0275StandaloneFeature],ngContentSelectors:V,decls:4,vars:4,consts:[[1,"cdk-virtual-scroll-content-wrapper"],["contentWrapper",""],[1,"cdk-virtual-scroll-spacer"]],template:function(ye,ze){1&ye&&(M.\u0275\u0275projectionDef(),M.\u0275\u0275elementStart(0,"div",0,1),M.\u0275\u0275projection(2),M.\u0275\u0275elementEnd(),M.\u0275\u0275element(3,"div",2)),2&ye&&(M.\u0275\u0275advance(3),M.\u0275\u0275styleProp("width",ze._totalContentWidth)("height",ze._totalContentHeight))},styles:["cdk-virtual-scroll-viewport{display:block;position:relative;transform:translateZ(0)}.cdk-virtual-scrollable{overflow:auto;will-change:scroll-position;contain:strict;-webkit-overflow-scrolling:touch}.cdk-virtual-scroll-content-wrapper{position:absolute;top:0;left:0;contain:content}[dir=rtl] .cdk-virtual-scroll-content-wrapper{right:0;left:auto}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper{min-height:100%}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-left:0;padding-right:0;margin-left:0;margin-right:0;border-left-width:0;border-right-width:0;outline:none}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper{min-width:100%}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-top:0;padding-bottom:0;margin-top:0;margin-bottom:0;border-top-width:0;border-bottom-width:0;outline:none}.cdk-virtual-scroll-spacer{height:1px;transform-origin:0 0;flex:0 0 auto}[dir=rtl] .cdk-virtual-scroll-spacer{transform-origin:100% 0}"],encapsulation:2,changeDetection:0})}return Ke})(),qe=(()=>{class Ke{static#e=this.\u0275fac=function(ye){return new(ye||Ke)};static#t=this.\u0275mod=M.\u0275\u0275defineNgModule({type:Ke});static#n=this.\u0275inj=M.\u0275\u0275defineInjector({})}return Ke})(),Zt=(()=>{class Ke{static#e=this.\u0275fac=function(ye){return new(ye||Ke)};static#t=this.\u0275mod=M.\u0275\u0275defineNgModule({type:Ke});static#n=this.\u0275inj=M.\u0275\u0275defineInjector({imports:[le.vT,qe,le.vT,qe]})}return Ke})()},293:(Me,re,L)=>{L.d(re,{Z:()=>z});var n=L(2675),M=L(7856);function v(q){this.__wrapped__=q,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}(v.prototype=(0,n.Z)(M.Z.prototype)).constructor=v;const z=v},7066:(Me,re,L)=>{L.d(re,{Z:()=>fe});var S=L(8418);const z=function v(F,Ve){for(var de=F.length;de--;)if((0,S.Z)(F[de][0],Ve))return de;return-1};var le=Array.prototype.splice;function ne(F){var Ve=-1,de=null==F?0:F.length;for(this.clear();++Ve<de;){var Ze=F[Ve];this.set(Ze[0],Ze[1])}}ne.prototype.clear=function n(){this.__data__=[],this.size=0},ne.prototype.delete=function se(F){var Ve=this.__data__,de=z(Ve,F);return!(de<0||(de==Ve.length-1?Ve.pop():le.call(Ve,de,1),--this.size,0))},ne.prototype.get=function U(F){var Ve=this.__data__,de=z(Ve,F);return de<0?void 0:Ve[de][1]},ne.prototype.has=function k(F){return z(this.__data__,F)>-1},ne.prototype.set=function W(F,Ve){var de=this.__data__,Ze=z(de,F);return Ze<0?(++this.size,de.push([F,Ve])):de[Ze][1]=Ve,this};const fe=ne},3934:(Me,re,L)=>{L.d(re,{Z:()=>v});var n=L(2675),M=L(7856);function S(z,q){this.__wrapped__=z,this.__actions__=[],this.__chain__=!!q,this.__index__=0,this.__values__=void 0}(S.prototype=(0,n.Z)(M.Z.prototype)).constructor=S;const v=S},2847:(Me,re,L)=>{L.d(re,{Z:()=>v});var n=L(9218),M=L(4131);const v=(0,n.Z)(M.Z,"Map")},8410:(Me,re,L)=>{L.d(re,{Z:()=>It});const S=(0,L(9218).Z)(Object,"create");var U=Object.prototype.hasOwnProperty;var W=Object.prototype.hasOwnProperty;function de(lt){var vt=-1,hn=null==lt?0:lt.length;for(this.clear();++vt<hn;){var ht=lt[vt];this.set(ht[0],ht[1])}}de.prototype.clear=function v(){this.__data__=S?S(null):{},this.size=0},de.prototype.delete=function q(lt){var vt=this.has(lt)&&delete this.__data__[lt];return this.size-=vt?1:0,vt},de.prototype.get=function T(lt){var vt=this.__data__;if(S){var hn=vt[lt];return"__lodash_hash_undefined__"===hn?void 0:hn}return U.call(vt,lt)?vt[lt]:void 0},de.prototype.has=function X(lt){var vt=this.__data__;return S?void 0!==vt[lt]:W.call(vt,lt)},de.prototype.set=function F(lt,vt){var hn=this.__data__;return this.size+=this.has(lt)?0:1,hn[lt]=S&&void 0===vt?"__lodash_hash_undefined__":vt,this};const Ze=de;var Le=L(7066),at=L(2847);const Zt=function qe(lt,vt){var hn=lt.__data__;return function Ye(lt){var vt=typeof lt;return"string"==vt||"number"==vt||"symbol"==vt||"boolean"==vt?"__proto__"!==lt:null===lt}(vt)?hn["string"==typeof vt?"string":"hash"]:hn.map};function kt(lt){var vt=-1,hn=null==lt?0:lt.length;for(this.clear();++vt<hn;){var ht=lt[vt];this.set(ht[0],ht[1])}}kt.prototype.clear=function Be(){this.size=0,this.__data__={hash:new Ze,map:new(at.Z||Le.Z),string:new Ze}},kt.prototype.delete=function Ke(lt){var vt=Zt(this,lt).delete(lt);return this.size-=vt?1:0,vt},kt.prototype.get=function ie(lt){return Zt(this,lt).get(lt)},kt.prototype.has=function ze(lt){return Zt(this,lt).has(lt)},kt.prototype.set=function Mt(lt,vt){var hn=Zt(this,lt),ht=hn.size;return hn.set(lt,vt),this.size+=hn.size==ht?0:1,this};const It=kt},6875:(Me,re,L)=>{L.d(re,{Z:()=>S});const S=L(4131).Z.Symbol},7385:(Me,re,L)=>{L.d(re,{Z:()=>v});var n=L(9218),M=L(4131);const v=(0,n.Z)(M.Z,"WeakMap")},3888:(Me,re,L)=>{L.d(re,{Z:()=>M});const M=function n(S,v,z){switch(z.length){case 0:return S.call(v);case 1:return S.call(v,z[0]);case 2:return S.call(v,z[0],z[1]);case 3:return S.call(v,z[0],z[1],z[2])}return S.apply(v,z)}},4899:(Me,re,L)=>{L.d(re,{Z:()=>M});const M=function n(S,v){for(var z=-1,q=null==S?0:S.length;++z<q&&!1!==v(S[z],z,S););return S}},3041:(Me,re,L)=>{L.d(re,{Z:()=>S});var n=L(5496);const S=function M(v,z){return!(null==v||!v.length)&&(0,n.Z)(v,z,0)>-1}},1668:(Me,re,L)=>{L.d(re,{Z:()=>U});var n=L(1292),M=L(5727),S=L(9977),v=L(9509),z=L(9229),q=L(7227),se=Object.prototype.hasOwnProperty;const U=function V(T,k){var $=(0,S.Z)(T),W=!$&&(0,M.Z)(T),X=!$&&!W&&(0,v.Z)(T),ne=!$&&!W&&!X&&(0,q.Z)(T),fe=$||W||X||ne,F=fe?(0,n.Z)(T.length,String):[],Ve=F.length;for(var de in T)(k||se.call(T,de))&&(!fe||!("length"==de||X&&("offset"==de||"parent"==de)||ne&&("buffer"==de||"byteLength"==de||"byteOffset"==de)||(0,z.Z)(de,Ve)))&&F.push(de);return F}},2720:(Me,re,L)=>{L.d(re,{Z:()=>M});const M=function n(S,v){for(var z=-1,q=null==S?0:S.length,le=Array(q);++z<q;)le[z]=v(S[z],z,S);return le}},4416:(Me,re,L)=>{L.d(re,{Z:()=>q});var n=L(6041),M=L(8418),v=Object.prototype.hasOwnProperty;const q=function z(le,se,V){var U=le[se];(!v.call(le,se)||!(0,M.Z)(U,V)||void 0===V&&!(se in le))&&(0,n.Z)(le,se,V)}},6041:(Me,re,L)=>{L.d(re,{Z:()=>S});var n=L(5753);const S=function M(v,z,q){"__proto__"==z&&n.Z?(0,n.Z)(v,z,{configurable:!0,enumerable:!0,value:q,writable:!0}):v[z]=q}},2675:(Me,re,L)=>{L.d(re,{Z:()=>v});var n=L(5829),M=Object.create;const v=function(){function z(){}return function(q){if(!(0,n.Z)(q))return{};if(M)return M(q);z.prototype=q;var le=new z;return z.prototype=void 0,le}}()},8568:(Me,re,L)=>{L.d(re,{Z:()=>M});const M=function n(S,v,z,q){for(var le=S.length,se=z+(q?1:-1);q?se--:++se<le;)if(v(S[se],se,S))return se;return-1}},4818:(Me,re,L)=>{L.d(re,{Z:()=>v});var n=L(1892),M=L(7801);const v=function S(z,q){for(var le=0,se=(q=(0,n.Z)(q,z)).length;null!=z&&le<se;)z=z[(0,M.Z)(q[le++])];return le&&le==se?z:void 0}},3844:(Me,re,L)=>{L.d(re,{Z:()=>ne});var n=L(6875),M=Object.prototype,S=M.hasOwnProperty,v=M.toString,z=n.Z?n.Z.toStringTag:void 0;var V=Object.prototype.toString;var W=n.Z?n.Z.toStringTag:void 0;const ne=function X(fe){return null==fe?void 0===fe?"[object Undefined]":"[object Null]":W&&W in Object(fe)?function q(fe){var F=S.call(fe,z),Ve=fe[z];try{fe[z]=void 0;var de=!0}catch{}var Ze=v.call(fe);return de&&(F?fe[z]=Ve:delete fe[z]),Ze}(fe):function U(fe){return V.call(fe)}(fe)}},5496:(Me,re,L)=>{L.d(re,{Z:()=>q});var n=L(8568),M=L(7090);const q=function z(le,se,V){return se==se?function S(le,se,V){for(var U=V-1,T=le.length;++U<T;)if(le[U]===se)return U;return-1}(le,se,V):(0,n.Z)(le,M.Z,V)}},7090:(Me,re,L)=>{L.d(re,{Z:()=>M});const M=function n(S){return S!=S}},1915:(Me,re,L)=>{L.d(re,{Z:()=>ne});var fe,n=L(4842),M=L(6006),S=(fe=/[^.]+$/.exec(M.Z&&M.Z.keys&&M.Z.keys.IE_PROTO||""))?"Symbol(src)_1."+fe:"";var q=L(5829),le=L(8594),V=/^\[object .+?Constructor\]$/,W=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const ne=function X(fe){return!(!(0,q.Z)(fe)||function v(fe){return!!S&&S in fe}(fe))&&((0,n.Z)(fe)?W:V).test((0,le.Z)(fe))}},7856:(Me,re,L)=>{L.d(re,{Z:()=>M});const M=function n(){}},2447:(Me,re,L)=>{L.d(re,{Z:()=>z});var n=L(1974),M=L(7657),S=L(7956);const z=function v(q,le){return(0,S.Z)((0,M.Z)(q,le,n.Z),q+"")}},5985:(Me,re,L)=>{L.d(re,{Z:()=>le});var n=L(4416),M=L(1892),S=L(9229),v=L(5829),z=L(7801);const le=function q(se,V,U,T){if(!(0,v.Z)(se))return se;for(var k=-1,$=(V=(0,M.Z)(V,se)).length,W=$-1,X=se;null!=X&&++k<$;){var ne=(0,z.Z)(V[k]),fe=U;if("__proto__"===ne||"constructor"===ne||"prototype"===ne)return se;if(k!=W){var F=X[ne];void 0===(fe=T?T(F,ne,X):void 0)&&(fe=(0,v.Z)(F)?F:(0,S.Z)(V[k+1])?[]:{})}(0,n.Z)(X,ne,fe),X=X[ne]}return se}},9553:(Me,re,L)=>{L.d(re,{Z:()=>v});var n=L(1974),M=L(801);const v=M.Z?function(z,q){return M.Z.set(z,q),z}:n.Z},1292:(Me,re,L)=>{L.d(re,{Z:()=>M});const M=function n(S,v){for(var z=-1,q=Array(S);++z<S;)q[z]=v(z);return q}},6066:(Me,re,L)=>{L.d(re,{Z:()=>V});var n=L(6875),M=L(2720),S=L(9977),v=L(7106),q=n.Z?n.Z.prototype:void 0,le=q?q.toString:void 0;const V=function se(U){if("string"==typeof U)return U;if((0,S.Z)(U))return(0,M.Z)(U,se)+"";if((0,v.Z)(U))return le?le.call(U):"";var T=U+"";return"0"==T&&1/U==-1/0?"-0":T}},4689:(Me,re,L)=>{L.d(re,{Z:()=>v});var n=L(3121),M=/^\s+/;const v=function S(z){return z&&z.slice(0,(0,n.Z)(z)+1).replace(M,"")}},8733:(Me,re,L)=>{L.d(re,{Z:()=>M});const M=function n(S){return function(v){return S(v)}}},1892:(Me,re,L)=>{L.d(re,{Z:()=>q});var n=L(9977),M=L(6331),S=L(7546),v=L(5902);const q=function z(le,se){return(0,n.Z)(le)?le:(0,M.Z)(le,se)?[le]:(0,S.Z)((0,v.Z)(le))}},8195:(Me,re,L)=>{L.d(re,{Z:()=>S});var n=Math.max;const S=function M(v,z,q,le){for(var se=-1,V=v.length,U=q.length,T=-1,k=z.length,$=n(V-U,0),W=Array(k+$),X=!le;++T<k;)W[T]=z[T];for(;++se<U;)(X||se<V)&&(W[q[se]]=v[se]);for(;$--;)W[T++]=v[se++];return W}},5815:(Me,re,L)=>{L.d(re,{Z:()=>S});var n=Math.max;const S=function M(v,z,q,le){for(var se=-1,V=v.length,U=-1,T=q.length,k=-1,$=z.length,W=n(V-T,0),X=Array(W+$),ne=!le;++se<W;)X[se]=v[se];for(var fe=se;++k<$;)X[fe+k]=z[k];for(;++U<T;)(ne||se<V)&&(X[fe+q[U]]=v[se++]);return X}},2307:(Me,re,L)=>{L.d(re,{Z:()=>M});const M=function n(S,v){var z=-1,q=S.length;for(v||(v=Array(q));++z<q;)v[z]=S[z];return v}},6006:(Me,re,L)=>{L.d(re,{Z:()=>S});const S=L(4131).Z["__core-js_shared__"]},6187:(Me,re,L)=>{L.d(re,{Z:()=>v});var n=L(2675),M=L(5829);const v=function S(z){return function(){var q=arguments;switch(q.length){case 0:return new z;case 1:return new z(q[0]);case 2:return new z(q[0],q[1]);case 3:return new z(q[0],q[1],q[2]);case 4:return new z(q[0],q[1],q[2],q[3]);case 5:return new z(q[0],q[1],q[2],q[3],q[4]);case 6:return new z(q[0],q[1],q[2],q[3],q[4],q[5]);case 7:return new z(q[0],q[1],q[2],q[3],q[4],q[5],q[6])}var le=(0,n.Z)(z.prototype),se=z.apply(le,q);return(0,M.Z)(se)?se:le}}},5662:(Me,re,L)=>{L.d(re,{Z:()=>Le});var n=L(8195),M=L(5815);var z=L(6187),q=L(1167),le=L(7500),se=L(2307),V=L(9229),U=Math.min;var $=L(1966),W=L(4131);const Le=function Ze(at,Be,Ae,Ye,st,qe,Zt,Ke,Et,ie){var ye=128&Be,ze=1&Be,Je=2&Be,Mt=24&Be,Bt=512&Be,kt=Je?void 0:(0,z.Z)(at);return function It(){for(var lt=arguments.length,vt=Array(lt),hn=lt;hn--;)vt[hn]=arguments[hn];if(Mt)var ht=(0,le.Z)(It),xt=function S(at,Be){for(var Ae=at.length,Ye=0;Ae--;)at[Ae]===Be&&++Ye;return Ye}(vt,ht);if(Ye&&(vt=(0,n.Z)(vt,Ye,st,Mt)),qe&&(vt=(0,M.Z)(vt,qe,Zt,Mt)),lt-=xt,Mt&&lt<ie){var xn=(0,$.Z)(vt,ht);return(0,q.Z)(at,Be,Ze,It.placeholder,Ae,vt,xn,Ke,Et,ie-lt)}var rn=ze?Ae:this,on=Je?rn[at]:at;return lt=vt.length,Ke?vt=function T(at,Be){for(var Ae=at.length,Ye=U(Be.length,Ae),st=(0,se.Z)(at);Ye--;){var qe=Be[Ye];at[Ye]=(0,V.Z)(qe,Ae)?st[qe]:void 0}return at}(vt,Ke):Bt&&lt>1&&vt.reverse(),ye&&Et<lt&&(vt.length=Et),this&&this!==W.Z&&this instanceof It&&(on=kt||(0,z.Z)(on)),on.apply(rn,vt)}}},1167:(Me,re,L)=>{L.d(re,{Z:()=>T});var n=L(4118),M=L(7778),S=L(8473);const T=function U(k,$,W,X,ne,fe,F,Ve,de,Ze){var Le=8&$;$|=Le?32:64,4&($&=~(Le?64:32))||($&=-4);var st=[k,$,ne,Le?fe:void 0,Le?F:void 0,Le?void 0:fe,Le?void 0:F,Ve,de,Ze],qe=W.apply(void 0,st);return(0,n.Z)(k)&&(0,M.Z)(qe,st),qe.placeholder=X,(0,S.Z)(qe,k,$)}},9774:(Me,re,L)=>{L.d(re,{Z:()=>hn});var n=L(9553),M=L(6187),S=L(4131);var le=L(3888),se=L(5662),V=L(1167),U=L(7500),T=L(1966);var fe=L(3557),F=L(8195),Ve=L(5815),de="__lodash_placeholder__",st=Math.min;var Ke=L(7778),Et=L(8473),ie=L(827),lt=Math.max;const hn=function vt(ht,xt,xn,rn,on,Bn,bn,Lt){var Cn=2&xt;if(!Cn&&"function"!=typeof ht)throw new TypeError("Expected a function");var ti=rn?rn.length:0;if(ti||(xt&=-97,rn=on=void 0),bn=void 0===bn?bn:lt((0,ie.Z)(bn),0),Lt=void 0===Lt?Lt:(0,ie.Z)(Lt),ti-=on?on.length:0,64&xt){var qi=rn,yr=on;rn=on=void 0}var Ji=Cn?void 0:(0,fe.Z)(ht),Wn=[ht,xt,xn,rn,on,qi,yr,Bn,bn,Lt];if(Ji&&function qe(ht,xt){var xn=ht[1],rn=xt[1],on=xn|rn;if(!(on<131||128==rn&&8==xn||128==rn&&256==xn&&ht[7].length<=xt[8]||384==rn&&xt[7].length<=xt[8]&&8==xn))return ht;1&rn&&(ht[2]=xt[2],on|=1&xn?0:4);var Lt=xt[3];if(Lt){var Cn=ht[3];ht[3]=Cn?(0,F.Z)(Cn,Lt,xt[4]):Lt,ht[4]=Cn?(0,T.Z)(ht[3],de):xt[4]}(Lt=xt[5])&&(ht[5]=(Cn=ht[5])?(0,Ve.Z)(Cn,Lt,xt[6]):Lt,ht[6]=Cn?(0,T.Z)(ht[5],de):xt[6]),(Lt=xt[7])&&(ht[7]=Lt),128&rn&&(ht[8]=null==ht[8]?xt[8]:st(ht[8],xt[8])),null==ht[9]&&(ht[9]=xt[9]),ht[0]=xt[0],ht[1]=on}(Wn,Ji),ht=Wn[0],xt=Wn[1],xn=Wn[2],rn=Wn[3],on=Wn[4],!(Lt=Wn[9]=void 0===Wn[9]?Cn?0:ht.length:lt(Wn[9]-ti,0))&&24&xt&&(xt&=-25),xt&&1!=xt)Qi=8==xt||16==xt?function k(ht,xt,xn){var rn=(0,M.Z)(ht);return function on(){for(var Bn=arguments.length,bn=Array(Bn),Lt=Bn,Cn=(0,U.Z)(on);Lt--;)bn[Lt]=arguments[Lt];var ti=Bn<3&&bn[0]!==Cn&&bn[Bn-1]!==Cn?[]:(0,T.Z)(bn,Cn);return(Bn-=ti.length)<xn?(0,V.Z)(ht,xt,se.Z,on.placeholder,void 0,bn,ti,void 0,void 0,xn-Bn):(0,le.Z)(this&&this!==S.Z&&this instanceof on?rn:ht,this,bn)}}(ht,xt,Lt):32!=xt&&33!=xt||on.length?se.Z.apply(void 0,Wn):function X(ht,xt,xn,rn){var on=1&xt,Bn=(0,M.Z)(ht);return function bn(){for(var Lt=-1,Cn=arguments.length,ti=-1,qi=rn.length,yr=Array(qi+Cn),Ji=this&&this!==S.Z&&this instanceof bn?Bn:ht;++ti<qi;)yr[ti]=rn[ti];for(;Cn--;)yr[ti++]=arguments[++Lt];return(0,le.Z)(Ji,on?xn:this,yr)}}(ht,xt,xn,rn);else var Qi=function z(ht,xt,xn){var rn=1&xt,on=(0,M.Z)(ht);return function Bn(){return(this&&this!==S.Z&&this instanceof Bn?on:ht).apply(rn?xn:this,arguments)}}(ht,xt,xn);return(0,Et.Z)((Ji?n.Z:Ke.Z)(Qi,Wn),ht,xt)}},5753:(Me,re,L)=>{L.d(re,{Z:()=>S});var n=L(9218);const S=function(){try{var v=(0,n.Z)(Object,"defineProperty");return v({},"",{}),v}catch{}}()},7806:(Me,re,L)=>{L.d(re,{Z:()=>M});const M="object"==typeof global&&global&&global.Object===Object&&global},3557:(Me,re,L)=>{L.d(re,{Z:()=>v});var n=L(801),M=L(320);const v=n.Z?function(z){return n.Z.get(z)}:M.Z},6034:(Me,re,L)=>{L.d(re,{Z:()=>z});var n=L(1767),S=Object.prototype.hasOwnProperty;const z=function v(q){for(var le=q.name+"",se=n.Z[le],V=S.call(n.Z,le)?se.length:0;V--;){var U=se[V],T=U.func;if(null==T||T==q)return U.name}return le}},7500:(Me,re,L)=>{L.d(re,{Z:()=>M});const M=function n(S){return S.placeholder}},9218:(Me,re,L)=>{L.d(re,{Z:()=>z});var n=L(1915);const z=function v(q,le){var se=function M(q,le){return q?.[le]}(q,le);return(0,n.Z)(se)?se:void 0}},9229:(Me,re,L)=>{L.d(re,{Z:()=>v});var M=/^(?:0|[1-9]\d*)$/;const v=function S(z,q){var le=typeof z;return!!(q=q??9007199254740991)&&("number"==le||"symbol"!=le&&M.test(z))&&z>-1&&z%1==0&&z<q}},1799:(Me,re,L)=>{L.d(re,{Z:()=>q});var n=L(8418),M=L(6247),S=L(9229),v=L(5829);const q=function z(le,se,V){if(!(0,v.Z)(V))return!1;var U=typeof se;return!!("number"==U?(0,M.Z)(V)&&(0,S.Z)(se,V.length):"string"==U&&se in V)&&(0,n.Z)(V[se],le)}},6331:(Me,re,L)=>{L.d(re,{Z:()=>q});var n=L(9977),M=L(7106),S=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,v=/^\w*$/;const q=function z(le,se){if((0,n.Z)(le))return!1;var V=typeof le;return!("number"!=V&&"symbol"!=V&&"boolean"!=V&&null!=le&&!(0,M.Z)(le))||v.test(le)||!S.test(le)||null!=se&&le in Object(se)}},4118:(Me,re,L)=>{L.d(re,{Z:()=>q});var n=L(293),M=L(3557),S=L(6034),v=L(4142);const q=function z(le){var se=(0,S.Z)(le),V=v.Z[se];if("function"!=typeof V||!(se in n.Z.prototype))return!1;if(le===V)return!0;var U=(0,M.Z)(V);return!!U&&le===U[0]}},3834:(Me,re,L)=>{L.d(re,{Z:()=>S});var n=Object.prototype;const S=function M(v){var z=v&&v.constructor;return v===("function"==typeof z&&z.prototype||n)}},801:(Me,re,L)=>{L.d(re,{Z:()=>S});var n=L(7385);const S=n.Z&&new n.Z},5527:(Me,re,L)=>{L.d(re,{Z:()=>le});var n=L(7806),M="object"==typeof exports&&exports&&!exports.nodeType&&exports,S=M&&"object"==typeof module&&module&&!module.nodeType&&module,z=S&&S.exports===M&&n.Z.process;const le=function(){try{return S&&S.require&&S.require("util").types||z&&z.binding&&z.binding("util")}catch{}}()},7657:(Me,re,L)=>{L.d(re,{Z:()=>v});var n=L(3888),M=Math.max;const v=function S(z,q,le){return q=M(void 0===q?z.length-1:q,0),function(){for(var se=arguments,V=-1,U=M(se.length-q,0),T=Array(U);++V<U;)T[V]=se[q+V];V=-1;for(var k=Array(q+1);++V<q;)k[V]=se[V];return k[q]=le(T),(0,n.Z)(z,this,k)}}},1767:(Me,re,L)=>{L.d(re,{Z:()=>M});const M={}},1966:(Me,re,L)=>{L.d(re,{Z:()=>S});var n="__lodash_placeholder__";const S=function M(v,z){for(var q=-1,le=v.length,se=0,V=[];++q<le;){var U=v[q];(U===z||U===n)&&(v[q]=n,V[se++]=q)}return V}},4131:(Me,re,L)=>{L.d(re,{Z:()=>v});var n=L(7806),M="object"==typeof self&&self&&self.Object===Object&&self;const v=n.Z||M||Function("return this")()},7778:(Me,re,L)=>{L.d(re,{Z:()=>v});var n=L(9553);const v=(0,L(4408).Z)(n.Z)},7956:(Me,re,L)=>{L.d(re,{Z:()=>se});var n=L(410),M=L(5753),S=L(1974);const z=M.Z?function(V,U){return(0,M.Z)(V,"toString",{configurable:!0,enumerable:!1,value:(0,n.Z)(U),writable:!0})}:S.Z,se=(0,L(4408).Z)(z)},8473:(Me,re,L)=>{L.d(re,{Z:()=>Be});var n=/\{\n\/\* \[wrapped with (.+)\] \*/,M=/,? & /;var z=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;var se=L(7956),V=L(4899),U=L(3041),de=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]];const Be=function at(Ae,Ye,st){var qe=Ye+"";return(0,se.Z)(Ae,function q(Ae,Ye){var st=Ye.length;if(!st)return Ae;var qe=st-1;return Ye[qe]=(st>1?"& ":"")+Ye[qe],Ye=Ye.join(st>2?", ":" "),Ae.replace(z,"{\n/* [wrapped with "+Ye+"] */\n")}(qe,function Ze(Ae,Ye){return(0,V.Z)(de,function(st){var qe="_."+st[0];Ye&st[1]&&!(0,U.Z)(Ae,qe)&&Ae.push(qe)}),Ae.sort()}(function S(Ae){var Ye=Ae.match(n);return Ye?Ye[1].split(M):[]}(qe),st)))}},4408:(Me,re,L)=>{L.d(re,{Z:()=>z});var S=Date.now;const z=function v(q){var le=0,se=0;return function(){var V=S(),U=16-(V-se);if(se=V,U>0){if(++le>=800)return arguments[0]}else le=0;return q.apply(void 0,arguments)}}},7546:(Me,re,L)=>{L.d(re,{Z:()=>se});var n=L(4961),z=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,q=/\\(\\)?/g;const se=function S(V){var U=(0,n.Z)(V,function(k){return 500===T.size&&T.clear(),k}),T=U.cache;return U}(function(V){var U=[];return 46===V.charCodeAt(0)&&U.push(""),V.replace(z,function(T,k,$,W){U.push($?W.replace(q,"$1"):k||T)}),U})},7801:(Me,re,L)=>{L.d(re,{Z:()=>v});var n=L(7106);const v=function S(z){if("string"==typeof z||(0,n.Z)(z))return z;var q=z+"";return"0"==q&&1/z==-1/0?"-0":q}},8594:(Me,re,L)=>{L.d(re,{Z:()=>v});var M=Function.prototype.toString;const v=function S(z){if(null!=z){try{return M.call(z)}catch{}try{return z+""}catch{}}return""}},3121:(Me,re,L)=>{L.d(re,{Z:()=>S});var n=/\s/;const S=function M(v){for(var z=v.length;z--&&n.test(v.charAt(z)););return z}},92:(Me,re,L)=>{L.d(re,{Z:()=>z});var n=L(293),M=L(3934),S=L(2307);const z=function v(q){if(q instanceof n.Z)return q.clone();var le=new M.Z(q.__wrapped__,q.__chain__);return le.__actions__=(0,S.Z)(q.__actions__),le.__index__=q.__index__,le.__values__=q.__values__,le}},410:(Me,re,L)=>{L.d(re,{Z:()=>M});const M=function n(S){return function(){return S}}},8123:(Me,re,L)=>{L.d(re,{Z:()=>se});var n=L(2447),M=L(8418),S=L(1799),v=L(2851),z=Object.prototype,q=z.hasOwnProperty;const se=(0,n.Z)(function(V,U){V=Object(V);var T=-1,k=U.length,$=k>2?U[2]:void 0;for($&&(0,S.Z)(U[0],U[1],$)&&(k=1);++T<k;)for(var W=U[T],X=(0,v.Z)(W),ne=-1,fe=X.length;++ne<fe;){var F=X[ne],Ve=V[F];(void 0===Ve||(0,M.Z)(Ve,z[F])&&!q.call(V,F))&&(V[F]=W[F])}return V})},8418:(Me,re,L)=>{L.d(re,{Z:()=>M});const M=function n(S,v){return S===v||S!=S&&v!=v}},3068:(Me,re,L)=>{L.d(re,{Z:()=>S});var n=L(4818);const S=function M(v,z,q){var le=null==v?void 0:(0,n.Z)(v,z);return void 0===le?q:le}},1974:(Me,re,L)=>{L.d(re,{Z:()=>M});const M=function n(S){return S}},5727:(Me,re,L)=>{L.d(re,{Z:()=>U});var n=L(3844),M=L(1196);const z=function v(T){return(0,M.Z)(T)&&"[object Arguments]"==(0,n.Z)(T)};var q=Object.prototype,le=q.hasOwnProperty,se=q.propertyIsEnumerable;const U=z(function(){return arguments}())?z:function(T){return(0,M.Z)(T)&&le.call(T,"callee")&&!se.call(T,"callee")}},9977:(Me,re,L)=>{L.d(re,{Z:()=>M});const M=Array.isArray},6247:(Me,re,L)=>{L.d(re,{Z:()=>v});var n=L(4842),M=L(4018);const v=function S(z){return null!=z&&(0,M.Z)(z.length)&&!(0,n.Z)(z)}},9509:(Me,re,L)=>{L.d(re,{Z:()=>V});var n=L(4131),M=L(7950),S="object"==typeof exports&&exports&&!exports.nodeType&&exports,v=S&&"object"==typeof module&&module&&!module.nodeType&&module,q=v&&v.exports===S?n.Z.Buffer:void 0;const V=(q?q.isBuffer:void 0)||M.Z},4842:(Me,re,L)=>{L.d(re,{Z:()=>se});var n=L(3844),M=L(5829);const se=function le(V){if(!(0,M.Z)(V))return!1;var U=(0,n.Z)(V);return"[object Function]"==U||"[object GeneratorFunction]"==U||"[object AsyncFunction]"==U||"[object Proxy]"==U}},4018:(Me,re,L)=>{L.d(re,{Z:()=>S});const S=function M(v){return"number"==typeof v&&v>-1&&v%1==0&&v<=9007199254740991}},5829:(Me,re,L)=>{L.d(re,{Z:()=>M});const M=function n(S){var v=typeof S;return null!=S&&("object"==v||"function"==v)}},1196:(Me,re,L)=>{L.d(re,{Z:()=>M});const M=function n(S){return null!=S&&"object"==typeof S}},7106:(Me,re,L)=>{L.d(re,{Z:()=>z});var n=L(3844),M=L(1196);const z=function v(q){return"symbol"==typeof q||(0,M.Z)(q)&&"[object Symbol]"==(0,n.Z)(q)}},7227:(Me,re,L)=>{L.d(re,{Z:()=>Je});var n=L(3844),M=L(4018),S=L(1196),qe={};qe["[object Float32Array]"]=qe["[object Float64Array]"]=qe["[object Int8Array]"]=qe["[object Int16Array]"]=qe["[object Int32Array]"]=qe["[object Uint8Array]"]=qe["[object Uint8ClampedArray]"]=qe["[object Uint16Array]"]=qe["[object Uint32Array]"]=!0,qe["[object Arguments]"]=qe["[object Array]"]=qe["[object ArrayBuffer]"]=qe["[object Boolean]"]=qe["[object DataView]"]=qe["[object Date]"]=qe["[object Error]"]=qe["[object Function]"]=qe["[object Map]"]=qe["[object Number]"]=qe["[object Object]"]=qe["[object RegExp]"]=qe["[object Set]"]=qe["[object String]"]=qe["[object WeakMap]"]=!1;var Et=L(8733),ie=L(5527),ye=ie.Z&&ie.Z.isTypedArray;const Je=ye?(0,Et.Z)(ye):function Zt(Mt){return(0,S.Z)(Mt)&&(0,M.Z)(Mt.length)&&!!qe[(0,n.Z)(Mt)]}},2851:(Me,re,L)=>{L.d(re,{Z:()=>k});var n=L(1668),M=L(5829),S=L(3834);var le=Object.prototype.hasOwnProperty;const V=function se($){if(!(0,M.Z)($))return function v($){var W=[];if(null!=$)for(var X in Object($))W.push(X);return W}($);var W=(0,S.Z)($),X=[];for(var ne in $)"constructor"==ne&&(W||!le.call($,ne))||X.push(ne);return X};var U=L(6247);const k=function T($){return(0,U.Z)($)?(0,n.Z)($,!0):V($)}},4961:(Me,re,L)=>{L.d(re,{Z:()=>v});var n=L(8410);function S(z,q){if("function"!=typeof z||null!=q&&"function"!=typeof q)throw new TypeError("Expected a function");var le=function(){var se=arguments,V=q?q.apply(this,se):se[0],U=le.cache;if(U.has(V))return U.get(V);var T=z.apply(this,se);return le.cache=U.set(V,T)||U,T};return le.cache=new(S.Cache||n.Z),le}S.Cache=n.Z;const v=S},320:(Me,re,L)=>{L.d(re,{Z:()=>M});const M=function n(){}},9812:(Me,re,L)=>{L.d(re,{Z:()=>le});var n=L(2447),M=L(9774),S=L(7500),v=L(1966),q=(0,n.Z)(function(se,V){var U=(0,v.Z)(V,(0,S.Z)(q));return(0,M.Z)(se,32,void 0,V,U)});q.placeholder={};const le=q},8176:(Me,re,L)=>{L.d(re,{Z:()=>S});var n=L(5985);const S=function M(v,z,q){return null==v?v:(0,n.Z)(v,z,q)}},7950:(Me,re,L)=>{L.d(re,{Z:()=>M});const M=function n(){return!1}},5932:(Me,re,L)=>{L.d(re,{Z:()=>z});var n=L(9585),M=1/0;const z=function v(q){return q?(q=(0,n.Z)(q))===M||q===-M?17976931348623157e292*(q<0?-1:1):q==q?q:0:0===q?q:0}},827:(Me,re,L)=>{L.d(re,{Z:()=>S});var n=L(5932);const S=function M(v){var z=(0,n.Z)(v),q=z%1;return z==z?q?z-q:z:0}},9585:(Me,re,L)=>{L.d(re,{Z:()=>U});var n=L(4689),M=L(5829),S=L(7106),z=/^[-+]0x[0-9a-f]+$/i,q=/^0b[01]+$/i,le=/^0o[0-7]+$/i,se=parseInt;const U=function V(T){if("number"==typeof T)return T;if((0,S.Z)(T))return NaN;if((0,M.Z)(T)){var k="function"==typeof T.valueOf?T.valueOf():T;T=(0,M.Z)(k)?k+"":k}if("string"!=typeof T)return 0===T?T:+T;T=(0,n.Z)(T);var $=q.test(T);return $||le.test(T)?se(T.slice(2),$?2:8):z.test(T)?NaN:+T}},5902:(Me,re,L)=>{L.d(re,{Z:()=>S});var n=L(6066);const S=function M(v){return null==v?"":(0,n.Z)(v)}},4142:(Me,re,L)=>{L.d(re,{Z:()=>U});var n=L(293),M=L(3934),S=L(7856),v=L(9977),z=L(1196),q=L(92),se=Object.prototype.hasOwnProperty;function V(T){if((0,z.Z)(T)&&!(0,v.Z)(T)&&!(T instanceof n.Z)){if(T instanceof M.Z)return T;if(se.call(T,"__wrapped__"))return(0,q.Z)(T)}return new M.Z(T)}(V.prototype=S.Z.prototype).constructor=V;const U=V},5861:(Me,re,L)=>{function n(S,v,z,q,le,se,V){try{var U=S[se](V),T=U.value}catch(k){return void z(k)}U.done?v(T):Promise.resolve(T).then(q,le)}function M(S){return function(){var v=this,z=arguments;return new Promise(function(q,le){var se=S.apply(v,z);function V(T){n(se,q,le,V,U,"next",T)}function U(T){n(se,q,le,V,U,"throw",T)}V(void 0)})}}L.d(re,{Z:()=>M})}}]);